<html>
<head>
<title>dev-app-route-route-matcher-provider.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
dev-app-route-route-matcher-provider.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/server/route-matcher-providers/dev/dev-app-route-route-matcher-provider.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { FileReader } from './helpers/file-reader/file-reader'</span><span class="s3">\n</span><span class="s1">import type { Normalizer } from '../../normalizers/normalizer'</span><span class="s3">\n</span><span class="s1">import { AppRouteRouteMatcher } from '../../route-matchers/app-route-route-matcher'</span><span class="s3">\n</span><span class="s1">import { RouteKind } from '../../route-kind'</span><span class="s3">\n</span><span class="s1">import { FileCacheRouteMatcherProvider } from './file-cache-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import { isAppRouteRoute } from '../../../lib/is-app-route-route'</span><span class="s3">\n</span><span class="s1">import { DevAppNormalizers } from '../../normalizers/built/app'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">isMetadataRouteFile,</span><span class="s3">\n  </span><span class="s1">isStaticMetadataRoute,</span><span class="s3">\n</span><span class="s1">} from '../../../lib/metadata/is-metadata-route'</span><span class="s3">\n</span><span class="s1">import { normalizeMetadataPageToRoute } from '../../../lib/metadata/get-metadata-route'</span><span class="s3">\n</span><span class="s1">import path from '../../../shared/lib/isomorphic/path'</span><span class="s3">\n\n</span><span class="s1">export class DevAppRouteRouteMatcherProvider extends FileCacheRouteMatcherProvider&lt;AppRouteRouteMatcher&gt; {</span><span class="s3">\n  </span><span class="s1">private readonly normalizers: {</span><span class="s3">\n    </span><span class="s1">page: Normalizer</span><span class="s3">\n    </span><span class="s1">pathname: Normalizer</span><span class="s3">\n    </span><span class="s1">bundlePath: Normalizer</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">private readonly appDir: string</span><span class="s3">\n  </span><span class="s1">private readonly isTurbopack: boolean</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">appDir: string,</span><span class="s3">\n    </span><span class="s1">extensions: ReadonlyArray&lt;string&gt;,</span><span class="s3">\n    </span><span class="s1">reader: FileReader,</span><span class="s3">\n    </span><span class="s1">isTurbopack: boolean</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">super(appDir, reader)</span><span class="s3">\n\n    </span><span class="s1">this.appDir = appDir</span><span class="s3">\n    </span><span class="s1">this.isTurbopack = isTurbopack</span><span class="s3">\n    </span><span class="s1">this.normalizers = new DevAppNormalizers(appDir, extensions, isTurbopack)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async transform(</span><span class="s3">\n    </span><span class="s1">files: ReadonlyArray&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;ReadonlyArray&lt;AppRouteRouteMatcher&gt;&gt; {</span><span class="s3">\n    </span><span class="s1">const matchers: Array&lt;AppRouteRouteMatcher&gt; = []</span><span class="s3">\n    </span><span class="s1">for (const filename of files) {</span><span class="s3">\n      </span><span class="s1">let page = this.normalizers.page.normalize(filename)</span><span class="s3">\n\n      </span><span class="s1">// If the file isn't a match for this matcher, then skip it.</span><span class="s3">\n      </span><span class="s1">if (!isAppRouteRoute(page)) continue</span><span class="s3">\n\n      </span><span class="s1">// Validate that this is not an ignored page.</span><span class="s3">\n      </span><span class="s1">if (page.includes('/_')) continue</span><span class="s3">\n\n      </span><span class="s1">// Turbopack uses the correct page name with the underscore normalized.</span><span class="s3">\n      </span><span class="s1">// TODO: Move implementation to packages/next/src/server/normalizers/built/app/app-page-normalizer.ts.</span><span class="s3">\n      </span><span class="s1">// The `includes('/_')` check above needs to be moved for that to work as otherwise `%5Fsegmentname`</span><span class="s3">\n      </span><span class="s1">// will result in `_segmentname` which hits that includes check and be skipped.</span><span class="s3">\n      </span><span class="s1">if (this.isTurbopack) {</span><span class="s3">\n        </span><span class="s1">page = page.replace(/%5F/g, '_')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const pathname = this.normalizers.pathname.normalize(filename)</span><span class="s3">\n      </span><span class="s1">const bundlePath = this.normalizers.bundlePath.normalize(filename)</span><span class="s3">\n      </span><span class="s1">const ext = path.extname(filename).slice(1)</span><span class="s3">\n      </span><span class="s1">const isEntryMetadataRouteFile = isMetadataRouteFile(</span><span class="s3">\n        </span><span class="s1">filename.replace(this.appDir, ''),</span><span class="s3">\n        </span><span class="s1">[ext],</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (isEntryMetadataRouteFile &amp;&amp; !isStaticMetadataRoute(page)) {</span><span class="s3">\n        </span><span class="s1">// Matching dynamic metadata routes.</span><span class="s3">\n        </span><span class="s1">// Add 2 possibilities for both single and multiple routes:</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">// single:</span><span class="s3">\n          </span><span class="s1">// /sitemap.ts -&gt; /sitemap.xml/route</span><span class="s3">\n          </span><span class="s1">// /icon.ts -&gt; /icon/route</span><span class="s3">\n          </span><span class="s1">// We'll map the filename before normalization:</span><span class="s3">\n          </span><span class="s1">// sitemap.ts -&gt; sitemap.xml/route.ts</span><span class="s3">\n          </span><span class="s1">// icon.ts -&gt; icon/route.ts</span><span class="s3">\n          </span><span class="s1">const metadataPage = normalizeMetadataPageToRoute(page, false)</span><span class="s3">\n          </span><span class="s1">const metadataPathname = normalizeMetadataPageToRoute(pathname, false)</span><span class="s3">\n          </span><span class="s1">const metadataBundlePath = normalizeMetadataPageToRoute(</span><span class="s3">\n            </span><span class="s1">bundlePath,</span><span class="s3">\n            </span><span class="s1">false</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n\n          </span><span class="s1">const matcher = new AppRouteRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.APP_ROUTE,</span><span class="s3">\n            </span><span class="s1">page: metadataPage,</span><span class="s3">\n            </span><span class="s1">pathname: metadataPathname,</span><span class="s3">\n            </span><span class="s1">bundlePath: metadataBundlePath,</span><span class="s3">\n            </span><span class="s1">filename,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">matchers.push(matcher)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">// multiple:</span><span class="s3">\n          </span><span class="s1">// /sitemap.ts -&gt; /sitemap/[__metadata_id__]/route</span><span class="s3">\n          </span><span class="s1">// /icon.ts -&gt; /icon/[__metadata_id__]/route</span><span class="s3">\n          </span><span class="s1">// We'll map the filename before normalization:</span><span class="s3">\n          </span><span class="s1">// sitemap.ts -&gt; sitemap.xml/[__metadata_id__].ts</span><span class="s3">\n          </span><span class="s1">// icon.ts -&gt; icon/[__metadata_id__].ts</span><span class="s3">\n          </span><span class="s1">const metadataPage = normalizeMetadataPageToRoute(page, true)</span><span class="s3">\n          </span><span class="s1">const metadataPathname = normalizeMetadataPageToRoute(pathname, true)</span><span class="s3">\n          </span><span class="s1">const metadataBundlePath = normalizeMetadataPageToRoute(</span><span class="s3">\n            </span><span class="s1">bundlePath,</span><span class="s3">\n            </span><span class="s1">true</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n\n          </span><span class="s1">const matcher = new AppRouteRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.APP_ROUTE,</span><span class="s3">\n            </span><span class="s1">page: metadataPage,</span><span class="s3">\n            </span><span class="s1">pathname: metadataPathname,</span><span class="s3">\n            </span><span class="s1">bundlePath: metadataBundlePath,</span><span class="s3">\n            </span><span class="s1">filename,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">matchers.push(matcher)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Normal app routes and static metadata routes.</span><span class="s3">\n        </span><span class="s1">matchers.push(</span><span class="s3">\n          </span><span class="s1">new AppRouteRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.APP_ROUTE,</span><span class="s3">\n            </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">pathname,</span><span class="s3">\n            </span><span class="s1">bundlePath,</span><span class="s3">\n            </span><span class="s1">filename,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return matchers</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DevAppRouteRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;FileCacheRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;reader&quot;</span><span class="s0">,</span><span class="s1">&quot;isTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;DevAppNormalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;transform&quot;</span><span class="s0">,</span><span class="s1">&quot;files&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;normalize&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppRouteRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;ext&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;extname&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;isEntryMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeMetadataPageToRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;AppRouteRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_ROUTE&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAcaA;;;eAAAA;;;sCAZwB;2BACX;+CACoB;iCACd;qBACE;iCAI3B;kCACsC;6DAC5B;;;;;;AAEV,MAAMA,wCAAwCC,4DAA6B;IAShFC,YACEC,MAAc,EACdC,UAAiC,EACjCC,MAAkB,EAClBC,WAAoB,CACpB;QACA,KAAK,CAACH,QAAQE;QAEd,IAAI,CAACF,MAAM,GAAGA;QACd,IAAI,CAACG,WAAW,GAAGA;QACnB,IAAI,CAACC,WAAW,GAAG,IAAIC,sBAAiB,CAACL,QAAQC,YAAYE;IAC/D;IAEA,MAAgBG,UACdC,KAA4B,EACkB;QAC9C,MAAMC,WAAwC,EAAE;QAChD,KAAK,MAAMC,YAAYF,MAAO;YAC5B,IAAIG,OAAO,IAAI,CAACN,WAAW,CAACM,IAAI,CAACC,SAAS,CAACF;YAE3C,4DAA4D;YAC5D,IAAI,CAACG,IAAAA,gCAAe,EAACF,OAAO;YAE5B,6CAA6C;YAC7C,IAAIA,KAAKG,QAAQ,CAAC,OAAO;YAEzB,uEAAuE;YACvE,sGAAsG;YACtG,oGAAoG;YACpG,+EAA+E;YAC/E,IAAI,IAAI,CAACV,WAAW,EAAE;gBACpBO,OAAOA,KAAKI,OAAO,CAAC,QAAQ;YAC9B;YAEA,MAAMC,WAAW,IAAI,CAACX,WAAW,CAACW,QAAQ,CAACJ,SAAS,CAACF;YACrD,MAAMO,aAAa,IAAI,CAACZ,WAAW,CAACY,UAAU,CAACL,SAAS,CAACF;YACzD,MAAMQ,MAAMC,aAAI,CAACC,OAAO,CAACV,UAAUW,KAAK,CAAC;YACzC,MAAMC,2BAA2BC,IAAAA,oCAAmB,EAClDb,SAASK,OAAO,CAAC,IAAI,CAACd,MAAM,EAAE,KAC9B;gBAACiB;aAAI,EACL;YAGF,IAAII,4BAA4B,CAACE,IAAAA,sCAAqB,EAACb,OAAO;gBAC5D,oCAAoC;gBACpC,2DAA2D;gBAC3D;oBACE,UAAU;oBACV,oCAAoC;oBACpC,0BAA0B;oBAC1B,+CAA+C;oBAC/C,qCAAqC;oBACrC,2BAA2B;oBAC3B,MAAMc,eAAeC,IAAAA,8CAA4B,EAACf,MAAM;oBACxD,MAAMgB,mBAAmBD,IAAAA,8CAA4B,EAACV,UAAU;oBAChE,MAAMY,qBAAqBF,IAAAA,8CAA4B,EACrDT,YACA;oBAGF,MAAMY,UAAU,IAAIC,0CAAoB,CAAC;wBACvCC,MAAMC,oBAAS,CAACC,SAAS;wBACzBtB,MAAMc;wBACNT,UAAUW;wBACVV,YAAYW;wBACZlB;oBACF;oBACAD,SAASyB,IAAI,CAACL;gBAChB;gBACA;oBACE,YAAY;oBACZ,kDAAkD;oBAClD,4CAA4C;oBAC5C,+CAA+C;oBAC/C,iDAAiD;oBACjD,uCAAuC;oBACvC,MAAMJ,eAAeC,IAAAA,8CAA4B,EAACf,MAAM;oBACxD,MAAMgB,mBAAmBD,IAAAA,8CAA4B,EAACV,UAAU;oBAChE,MAAMY,qBAAqBF,IAAAA,8CAA4B,EACrDT,YACA;oBAGF,MAAMY,UAAU,IAAIC,0CAAoB,CAAC;wBACvCC,MAAMC,oBAAS,CAACC,SAAS;wBACzBtB,MAAMc;wBACNT,UAAUW;wBACVV,YAAYW;wBACZlB;oBACF;oBACAD,SAASyB,IAAI,CAACL;gBAChB;YACF,OAAO;gBACL,gDAAgD;gBAChDpB,SAASyB,IAAI,CACX,IAAIJ,0CAAoB,CAAC;oBACvBC,MAAMC,oBAAS,CAACC,SAAS;oBACzBtB;oBACAK;oBACAC;oBACAP;gBACF;YAEJ;QACF;QAEA,OAAOD;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>