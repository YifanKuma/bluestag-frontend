<html>
<head>
<title>prerender-manifest-matcher.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
prerender-manifest-matcher.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../../src/server/route-modules/app-page/helpers/prerender-manifest-matcher.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">DynamicPrerenderManifestRoute,</span><span class="s3">\n  </span><span class="s1">PrerenderManifest,</span><span class="s3">\n</span><span class="s1">} from '../../../../build'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../../../../shared/lib/deep-readonly'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getRouteMatcher,</span><span class="s3">\n  </span><span class="s1">type RouteMatchFn,</span><span class="s3">\n</span><span class="s1">} from '../../../../shared/lib/router/utils/route-matcher'</span><span class="s3">\n</span><span class="s1">import { getRouteRegex } from '../../../../shared/lib/router/utils/route-regex'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* A matcher for a dynamic route.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">type Matcher = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The matcher for the dynamic route. This is lazily created when the matcher</span><span class="s3">\n   </span><span class="s1">* is first used.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">matcher?: RouteMatchFn</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The source of the dynamic route.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">source: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The route that matches the source.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">route: DeepReadonly&lt;DynamicPrerenderManifestRoute&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* A matcher for the prerender manifest.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This class is used to match the pathname to the dynamic route.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export class PrerenderManifestMatcher {</span><span class="s3">\n  </span><span class="s1">private readonly matchers: Array&lt;Matcher&gt;</span><span class="s3">\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">pathname: string,</span><span class="s3">\n    </span><span class="s1">prerenderManifest: DeepReadonly&lt;PrerenderManifest&gt;</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">this.matchers = Object.entries(prerenderManifest.dynamicRoutes)</span><span class="s3">\n      </span><span class="s1">.filter(([source, route]) =&gt; {</span><span class="s3">\n        </span><span class="s1">// If the pathname is a fallback source route, or the source route is</span><span class="s3">\n        </span><span class="s1">// the same as the pathname, then we should include it in the matchers.</span><span class="s3">\n        </span><span class="s1">return route.fallbackSourceRoute === pathname || source === pathname</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">.map(([source, route]) =&gt; ({ source, route }))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Match the pathname to the dynamic route. If no match is found, an error is</span><span class="s3">\n   </span><span class="s1">* thrown.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param pathname - The pathname to match.</span><span class="s3">\n   </span><span class="s1">* @returns The dynamic route that matches the pathname.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public match(</span><span class="s3">\n    </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">): DeepReadonly&lt;DynamicPrerenderManifestRoute&gt; | null {</span><span class="s3">\n    </span><span class="s1">// Iterate over the matchers. They're already in the correct order of</span><span class="s3">\n    </span><span class="s1">// specificity as they were inserted into the prerender manifest that way</span><span class="s3">\n    </span><span class="s1">// and iterating over them with Object.entries guarantees that.</span><span class="s3">\n    </span><span class="s1">for (const matcher of this.matchers) {</span><span class="s3">\n      </span><span class="s1">// Lazily create the matcher, this is only done once per matcher.</span><span class="s3">\n      </span><span class="s1">if (!matcher.matcher) {</span><span class="s3">\n        </span><span class="s1">matcher.matcher = getRouteMatcher(getRouteRegex(matcher.source))</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const match = matcher.matcher(pathname)</span><span class="s3">\n      </span><span class="s1">if (match) {</span><span class="s3">\n        </span><span class="s1">return matcher.route</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PrerenderManifestMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackSourceRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteRegex&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAqCaA;;;eAAAA;;;8BA7BN;4BACuB;AA4BvB,MAAMA;IAEXC,YACEC,QAAgB,EAChBC,iBAAkD,CAClD;QACA,IAAI,CAACC,QAAQ,GAAGC,OAAOC,OAAO,CAACH,kBAAkBI,aAAa,EAC3DC,MAAM,CAAC,CAAC,CAACC,QAAQC,MAAM;YACtB,qEAAqE;YACrE,uEAAuE;YACvE,OAAOA,MAAMC,mBAAmB,KAAKT,YAAYO,WAAWP;QAC9D,GACCU,GAAG,CAAC,CAAC,CAACH,QAAQC,MAAM,GAAM,CAAA;gBAAED;gBAAQC;YAAM,CAAA;IAC/C;IAEA;;;;;;GAMC,GACD,AAAOG,MACLX,QAAgB,EACoC;QACpD,qEAAqE;QACrE,yEAAyE;QACzE,+DAA+D;QAC/D,KAAK,MAAMY,WAAW,IAAI,CAACV,QAAQ,CAAE;YACnC,iEAAiE;YACjE,IAAI,CAACU,QAAQA,OAAO,EAAE;gBACpBA,QAAQA,OAAO,GAAGC,IAAAA,6BAAe,EAACC,IAAAA,yBAAa,EAACF,QAAQL,MAAM;YAChE;YAEA,MAAMI,QAAQC,QAAQA,OAAO,CAACZ;YAC9B,IAAIW,OAAO;gBACT,OAAOC,QAAQJ,KAAK;YACtB;QACF;QAEA,OAAO;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>