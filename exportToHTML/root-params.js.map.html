<html>
<head>
<title>root-params.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
root-params.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/request/root-params.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">postponeWithTracking,</span><span class="s3">\n  </span><span class="s1">throwToInterruptStaticGeneration,</span><span class="s3">\n</span><span class="s1">} from '../app-render/dynamic-rendering'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">workAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type WorkStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreLegacy,</span><span class="s3">\n  </span><span class="s1">type PrerenderStorePPR,</span><span class="s3">\n  </span><span class="s1">type StaticPrerenderStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { makeHangingPromise } from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import type { FallbackRouteParams } from './fallback-params'</span><span class="s3">\n</span><span class="s1">import type { Params, ParamValue } from './params'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">describeStringPropertyAccess,</span><span class="s3">\n  </span><span class="s1">wellKnownProperties,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/utils/reflect-utils'</span><span class="s3">\n</span><span class="s1">import { actionAsyncStorage } from '../app-render/action-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { warnOnce } from '../../build/output/log'</span><span class="s3">\n\n</span><span class="s1">interface CacheLifetime {}</span><span class="s3">\n</span><span class="s1">const CachedParams = new WeakMap&lt;CacheLifetime, Promise&lt;Params&gt;&gt;()</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @deprecated import specific root params from `next/root-params` instead.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export async function unstable_rootParams(): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">warnOnce(</span><span class="s3">\n    </span><span class="s1">'`unstable_rootParams()` is deprecated and will be removed in an upcoming major release. Import specific root params from `next/root-params` instead.'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const workStore = workAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (!workStore) {</span><span class="s3">\n    </span><span class="s1">throw new InvariantError('Missing workStore in unstable_rootParams')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n\n  </span><span class="s1">if (!workUnitStore) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Route ${workStore.route} used </span><span class="s3">\\</span><span class="s1">`unstable_rootParams()</span><span class="s3">\\</span><span class="s1">` in Pages Router. This API is only available within App Router.`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'cache':</span><span class="s3">\n    </span><span class="s1">case 'unstable-cache': {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`Route ${workStore.route} used </span><span class="s3">\\</span><span class="s1">`unstable_rootParams()</span><span class="s3">\\</span><span class="s1">` inside </span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\&quot;</span><span class="s1">use cache</span><span class="s3">\&quot;\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`unstable_cache</span><span class="s3">\\</span><span class="s1">`. Support for this API inside cache scopes is planned for a future version of Next.js.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">return createPrerenderRootParams(</span><span class="s3">\n        </span><span class="s1">workUnitStore.rootParams,</span><span class="s3">\n        </span><span class="s1">workStore,</span><span class="s3">\n        </span><span class="s1">workUnitStore</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">case 'private-cache':</span><span class="s3">\n    </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n    </span><span class="s1">case 'request':</span><span class="s3">\n      </span><span class="s1">return Promise.resolve(workUnitStore.rootParams)</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return workUnitStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createPrerenderRootParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender-client': {</span><span class="s3">\n      </span><span class="s1">const exportName = '`unstable_rootParams`'</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">`${exportName} must not be used within a client component. Next.js should be preventing ${exportName} from being included in client components statically, but did not in this case.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams) {</span><span class="s3">\n        </span><span class="s1">for (const key in underlyingParams) {</span><span class="s3">\n          </span><span class="s1">if (fallbackParams.has(key)) {</span><span class="s3">\n            </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n            </span><span class="s1">if (cachedParams) {</span><span class="s3">\n              </span><span class="s1">return cachedParams</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const promise = makeHangingPromise&lt;Params&gt;(</span><span class="s3">\n              </span><span class="s1">prerenderStore.renderSignal,</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">'`unstable_rootParams`'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n            </span><span class="s1">return promise</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams) {</span><span class="s3">\n        </span><span class="s1">for (const key in underlyingParams) {</span><span class="s3">\n          </span><span class="s1">if (fallbackParams.has(key)) {</span><span class="s3">\n            </span><span class="s1">// We have fallback params at this level so we need to make an erroring</span><span class="s3">\n            </span><span class="s1">// params object which will postpone if you access the fallback params</span><span class="s3">\n            </span><span class="s1">return makeErroringRootParams(</span><span class="s3">\n              </span><span class="s1">underlyingParams,</span><span class="s3">\n              </span><span class="s1">fallbackParams,</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">prerenderStore</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">prerenderStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't have any fallback params so we have an entirely static safe params object</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(underlyingParams)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeErroringRootParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">fallbackParams: FallbackRouteParams,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStorePPR | PrerenderStoreLegacy</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const augmentedUnderlying = { ...underlyingParams }</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because params</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = Promise.resolve(augmentedUnderlying)</span><span class="s3">\n  </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (fallbackParams.has(prop)) {</span><span class="s3">\n        </span><span class="s1">Object.defineProperty(augmentedUnderlying, prop, {</span><span class="s3">\n          </span><span class="s1">get() {</span><span class="s3">\n            </span><span class="s1">const expression = describeStringPropertyAccess(</span><span class="s3">\n              </span><span class="s1">'unstable_rootParams',</span><span class="s3">\n              </span><span class="s1">prop</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">// In most dynamic APIs we also throw if `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` however</span><span class="s3">\n            </span><span class="s1">// for params is only dynamic when we're generating a fallback shell</span><span class="s3">\n            </span><span class="s1">// and even when `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` we still support generating dynamic</span><span class="s3">\n            </span><span class="s1">// fallback shells</span><span class="s3">\n            </span><span class="s1">// TODO remove this comment when cacheComponents is the default since there</span><span class="s3">\n            </span><span class="s1">// will be no `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n            </span><span class="s1">if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n              </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n              </span><span class="s1">postponeWithTracking(</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">// Legacy Prerender</span><span class="s3">\n              </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">workStore,</span><span class="s3">\n                </span><span class="s1">prerenderStore</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">enumerable: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">;(promise as any)[prop] = underlyingParams[prop]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Used for the compiler-generated `next/root-params` module.</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getRootParam(paramName: string): Promise&lt;ParamValue&gt; {</span><span class="s3">\n  </span><span class="s1">const apiName = `</span><span class="s3">\\</span><span class="s1">`import('next/root-params').${paramName}()</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n\n  </span><span class="s1">const workStore = workAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (!workStore) {</span><span class="s3">\n    </span><span class="s1">throw new InvariantError(`Missing workStore in ${apiName}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (!workUnitStore) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Route ${workStore.route} used ${apiName} outside of a Server Component. This is not allowed.`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const actionStore = actionAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (actionStore) {</span><span class="s3">\n    </span><span class="s1">if (actionStore.isAppRoute) {</span><span class="s3">\n      </span><span class="s1">// TODO(root-params): add support for route handlers</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`Route ${workStore.route} used ${apiName} inside a Route Handler. Support for this API in Route Handlers is planned for a future version of Next.js.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (actionStore.isAction &amp;&amp; workUnitStore.phase === 'action') {</span><span class="s3">\n      </span><span class="s1">// Actions are not fundamentally tied to a route (even if they're always submitted from some page),</span><span class="s3">\n      </span><span class="s1">// so root params would be inconsistent if an action is called from multiple roots.</span><span class="s3">\n      </span><span class="s1">// Make sure we check if the phase is </span><span class="s3">\&quot;</span><span class="s1">action</span><span class="s3">\&quot; </span><span class="s1">- we should not error in the rerender</span><span class="s3">\n      </span><span class="s1">// after an action revalidates or updates cookies (which will still have `actionStore.isAction === true`)</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`${apiName} was used inside a Server Action. This is not supported. Functions from 'next/root-params' can only be called in the context of a route.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n    </span><span class="s1">case 'cache': {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`Route ${workStore.route} used ${apiName} inside </span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\&quot;</span><span class="s1">use cache</span><span class="s3">\&quot;\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`unstable_cache</span><span class="s3">\\</span><span class="s1">`. Support for this API inside cache scopes is planned for a future version of Next.js.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy': {</span><span class="s3">\n      </span><span class="s1">return createPrerenderRootParamPromise(</span><span class="s3">\n        </span><span class="s1">paramName,</span><span class="s3">\n        </span><span class="s1">workStore,</span><span class="s3">\n        </span><span class="s1">workUnitStore,</span><span class="s3">\n        </span><span class="s1">apiName</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'private-cache':</span><span class="s3">\n    </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n    </span><span class="s1">case 'request': {</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">default: {</span><span class="s3">\n      </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(workUnitStore.rootParams[paramName])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createPrerenderRootParamPromise(</span><span class="s3">\n  </span><span class="s1">paramName: string,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStore,</span><span class="s3">\n  </span><span class="s1">apiName: string</span><span class="s3">\n</span><span class="s1">): Promise&lt;ParamValue&gt; {</span><span class="s3">\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender-client': {</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">`${apiName} must not be used within a client component. Next.js should be preventing ${apiName} from being included in client components statically, but did not in this case.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const underlyingParams = prerenderStore.rootParams</span><span class="s3">\n\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender': {</span><span class="s3">\n      </span><span class="s1">// We are in a dynamicIO prerender.</span><span class="s3">\n      </span><span class="s1">// The param is a fallback, so it should be treated as dynamic.</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">prerenderStore.fallbackRouteParams &amp;&amp;</span><span class="s3">\n        </span><span class="s1">prerenderStore.fallbackRouteParams.has(paramName)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return makeHangingPromise&lt;ParamValue&gt;(</span><span class="s3">\n          </span><span class="s1">prerenderStore.renderSignal,</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">apiName</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n      </span><span class="s1">// We aren't in a dynamicIO prerender, but the param is a fallback,</span><span class="s3">\n      </span><span class="s1">// so we need to make an erroring params object which will postpone/error if you access it</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">prerenderStore.fallbackRouteParams &amp;&amp;</span><span class="s3">\n        </span><span class="s1">prerenderStore.fallbackRouteParams.has(paramName)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return makeErroringRootParamPromise(</span><span class="s3">\n          </span><span class="s1">paramName,</span><span class="s3">\n          </span><span class="s1">workStore,</span><span class="s3">\n          </span><span class="s1">prerenderStore,</span><span class="s3">\n          </span><span class="s1">apiName</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy': {</span><span class="s3">\n      </span><span class="s1">// legacy prerenders can't have fallback params</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">default: {</span><span class="s3">\n      </span><span class="s1">prerenderStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If the param is not a fallback param, we just return the statically available value.</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(underlyingParams[paramName])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/** Deliberately async -- we want to create a rejected promise, not error synchronously. */</span><span class="s3">\n</span><span class="s1">async function makeErroringRootParamPromise(</span><span class="s3">\n  </span><span class="s1">paramName: string,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStorePPR | PrerenderStoreLegacy,</span><span class="s3">\n  </span><span class="s1">apiName: string</span><span class="s3">\n</span><span class="s1">): Promise&lt;ParamValue&gt; {</span><span class="s3">\n  </span><span class="s1">const expression = describeStringPropertyAccess(apiName, paramName)</span><span class="s3">\n  </span><span class="s1">// In most dynamic APIs, we also throw if `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">`.</span><span class="s3">\n  </span><span class="s1">// However, root params are only dynamic when we're generating a fallback shell,</span><span class="s3">\n  </span><span class="s1">// and even with `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` we still support generating dynamic fallback shells.</span><span class="s3">\n  </span><span class="s1">// TODO: remove this comment when dynamicIO is the default since there will be no `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n      </span><span class="s1">return postponeWithTracking(</span><span class="s3">\n        </span><span class="s1">workStore.route,</span><span class="s3">\n        </span><span class="s1">expression,</span><span class="s3">\n        </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy': {</span><span class="s3">\n      </span><span class="s1">return throwToInterruptStaticGeneration(</span><span class="s3">\n        </span><span class="s1">expression,</span><span class="s3">\n        </span><span class="s1">workStore,</span><span class="s3">\n        </span><span class="s1">prerenderStore</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">default: {</span><span class="s3">\n      </span><span class="s1">prerenderStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getRootParam&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_rootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;CachedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderRootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;rootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;underlyingParams&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStore&quot;</span><span class="s0">,</span><span class="s1">&quot;exportName&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringRootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;augmentedUnderlying&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;wellKnownProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;describeStringPropertyAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;postponeWithTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;throwToInterruptStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;enumerable&quot;</span><span class="s0">,</span><span class="s1">&quot;paramName&quot;</span><span class="s0">,</span><span class="s1">&quot;apiName&quot;</span><span class="s0">,</span><span class="s1">&quot;actionStore&quot;</span><span class="s0">,</span><span class="s1">&quot;actionAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;isAction&quot;</span><span class="s0">,</span><span class="s1">&quot;phase&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderRootParamPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringRootParamPromise&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>