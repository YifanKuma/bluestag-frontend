<html>
<head>
<title>read-entry.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
read-entry.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;read-entry.js&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/read-entry.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { Minipass } from 'minipass'</span><span class="s3">\n</span><span class="s1">import { Header } from './header.js'</span><span class="s3">\n</span><span class="s1">import { normalizeWindowsPath } from './normalize-windows-path.js'</span><span class="s3">\n</span><span class="s1">import { Pax } from './pax.js'</span><span class="s3">\n</span><span class="s1">import { EntryTypeName } from './types.js'</span><span class="s3">\n\n</span><span class="s1">export class ReadEntry extends Minipass&lt;Buffer, Buffer&gt; {</span><span class="s3">\n  </span><span class="s1">extended?: Pax</span><span class="s3">\n  </span><span class="s1">globalExtended?: Pax</span><span class="s3">\n  </span><span class="s1">header: Header</span><span class="s3">\n  </span><span class="s1">startBlockSize: number</span><span class="s3">\n  </span><span class="s1">blockRemain: number</span><span class="s3">\n  </span><span class="s1">remain: number</span><span class="s3">\n  </span><span class="s1">type: EntryTypeName</span><span class="s3">\n  </span><span class="s1">meta: boolean = false</span><span class="s3">\n  </span><span class="s1">ignore: boolean = false</span><span class="s3">\n  </span><span class="s1">path: string</span><span class="s3">\n  </span><span class="s1">mode?: number</span><span class="s3">\n  </span><span class="s1">uid?: number</span><span class="s3">\n  </span><span class="s1">gid?: number</span><span class="s3">\n  </span><span class="s1">uname?: string</span><span class="s3">\n  </span><span class="s1">gname?: string</span><span class="s3">\n  </span><span class="s1">size: number = 0</span><span class="s3">\n  </span><span class="s1">mtime?: Date</span><span class="s3">\n  </span><span class="s1">atime?: Date</span><span class="s3">\n  </span><span class="s1">ctime?: Date</span><span class="s3">\n  </span><span class="s1">linkpath?: string</span><span class="s3">\n\n  </span><span class="s1">dev?: number</span><span class="s3">\n  </span><span class="s1">ino?: number</span><span class="s3">\n  </span><span class="s1">nlink?: number</span><span class="s3">\n  </span><span class="s1">invalid: boolean = false</span><span class="s3">\n  </span><span class="s1">absolute?: string</span><span class="s3">\n  </span><span class="s1">unsupported: boolean = false</span><span class="s3">\n\n  </span><span class="s1">constructor(header: Header, ex?: Pax, gex?: Pax) {</span><span class="s3">\n    </span><span class="s1">super({})</span><span class="s3">\n    </span><span class="s1">// read entries always start life paused.  this is to avoid the</span><span class="s3">\n    </span><span class="s1">// situation where Minipass's auto-ending empty streams results</span><span class="s3">\n    </span><span class="s1">// in an entry ending before we're ready for it.</span><span class="s3">\n    </span><span class="s1">this.pause()</span><span class="s3">\n    </span><span class="s1">this.extended = ex</span><span class="s3">\n    </span><span class="s1">this.globalExtended = gex</span><span class="s3">\n    </span><span class="s1">this.header = header</span><span class="s3">\n    </span><span class="s1">/* c8 ignore start */</span><span class="s3">\n    </span><span class="s1">this.remain = header.size ?? 0</span><span class="s3">\n    </span><span class="s1">/* c8 ignore stop */</span><span class="s3">\n    </span><span class="s1">this.startBlockSize = 512 * Math.ceil(this.remain / 512)</span><span class="s3">\n    </span><span class="s1">this.blockRemain = this.startBlockSize</span><span class="s3">\n    </span><span class="s1">this.type = header.type</span><span class="s3">\n    </span><span class="s1">switch (this.type) {</span><span class="s3">\n      </span><span class="s1">case 'File':</span><span class="s3">\n      </span><span class="s1">case 'OldFile':</span><span class="s3">\n      </span><span class="s1">case 'Link':</span><span class="s3">\n      </span><span class="s1">case 'SymbolicLink':</span><span class="s3">\n      </span><span class="s1">case 'CharacterDevice':</span><span class="s3">\n      </span><span class="s1">case 'BlockDevice':</span><span class="s3">\n      </span><span class="s1">case 'Directory':</span><span class="s3">\n      </span><span class="s1">case 'FIFO':</span><span class="s3">\n      </span><span class="s1">case 'ContiguousFile':</span><span class="s3">\n      </span><span class="s1">case 'GNUDumpDir':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">case 'NextFileHasLongLinkpath':</span><span class="s3">\n      </span><span class="s1">case 'NextFileHasLongPath':</span><span class="s3">\n      </span><span class="s1">case 'OldGnuLongPath':</span><span class="s3">\n      </span><span class="s1">case 'GlobalExtendedHeader':</span><span class="s3">\n      </span><span class="s1">case 'ExtendedHeader':</span><span class="s3">\n      </span><span class="s1">case 'OldExtendedHeader':</span><span class="s3">\n        </span><span class="s1">this.meta = true</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">// NOTE: gnutar and bsdtar treat unrecognized types as 'File'</span><span class="s3">\n      </span><span class="s1">// it may be worth doing the same, but with a warning.</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">this.ignore = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">/* c8 ignore start */</span><span class="s3">\n    </span><span class="s1">if (!header.path) {</span><span class="s3">\n      </span><span class="s1">throw new Error('no path provided for tar.ReadEntry')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">/* c8 ignore stop */</span><span class="s3">\n\n    </span><span class="s1">this.path = normalizeWindowsPath(header.path) as string</span><span class="s3">\n    </span><span class="s1">this.mode = header.mode</span><span class="s3">\n    </span><span class="s1">if (this.mode) {</span><span class="s3">\n      </span><span class="s1">this.mode = this.mode &amp; 0o7777</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">this.uid = header.uid</span><span class="s3">\n    </span><span class="s1">this.gid = header.gid</span><span class="s3">\n    </span><span class="s1">this.uname = header.uname</span><span class="s3">\n    </span><span class="s1">this.gname = header.gname</span><span class="s3">\n    </span><span class="s1">this.size = this.remain</span><span class="s3">\n    </span><span class="s1">this.mtime = header.mtime</span><span class="s3">\n    </span><span class="s1">this.atime = header.atime</span><span class="s3">\n    </span><span class="s1">this.ctime = header.ctime</span><span class="s3">\n    </span><span class="s1">/* c8 ignore start */</span><span class="s3">\n    </span><span class="s1">this.linkpath =</span><span class="s3">\n      </span><span class="s1">header.linkpath ?</span><span class="s3">\n        </span><span class="s1">normalizeWindowsPath(header.linkpath)</span><span class="s3">\n      </span><span class="s1">: undefined</span><span class="s3">\n    </span><span class="s1">/* c8 ignore stop */</span><span class="s3">\n    </span><span class="s1">this.uname = header.uname</span><span class="s3">\n    </span><span class="s1">this.gname = header.gname</span><span class="s3">\n\n    </span><span class="s1">if (ex) {</span><span class="s3">\n      </span><span class="s1">this.#slurp(ex)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (gex) {</span><span class="s3">\n      </span><span class="s1">this.#slurp(gex, true)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">write(data: Buffer) {</span><span class="s3">\n    </span><span class="s1">const writeLen = data.length</span><span class="s3">\n    </span><span class="s1">if (writeLen &gt; this.blockRemain) {</span><span class="s3">\n      </span><span class="s1">throw new Error('writing more to entry than is appropriate')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const r = this.remain</span><span class="s3">\n    </span><span class="s1">const br = this.blockRemain</span><span class="s3">\n    </span><span class="s1">this.remain = Math.max(0, r - writeLen)</span><span class="s3">\n    </span><span class="s1">this.blockRemain = Math.max(0, br - writeLen)</span><span class="s3">\n    </span><span class="s1">if (this.ignore) {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (r &gt;= writeLen) {</span><span class="s3">\n      </span><span class="s1">return super.write(data)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// r &lt; writeLen</span><span class="s3">\n    </span><span class="s1">return super.write(data.subarray(0, r))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">#slurp(ex: Pax, gex: boolean = false) {</span><span class="s3">\n    </span><span class="s1">if (ex.path) ex.path = normalizeWindowsPath(ex.path)</span><span class="s3">\n    </span><span class="s1">if (ex.linkpath) ex.linkpath = normalizeWindowsPath(ex.linkpath)</span><span class="s3">\n    </span><span class="s1">Object.assign(</span><span class="s3">\n      </span><span class="s1">this,</span><span class="s3">\n      </span><span class="s1">Object.fromEntries(</span><span class="s3">\n        </span><span class="s1">Object.entries(ex).filter(([k, v]) =&gt; {</span><span class="s3">\n          </span><span class="s1">// we slurp in everything except for the path attribute in</span><span class="s3">\n          </span><span class="s1">// a global extended header, because that's weird. Also, any</span><span class="s3">\n          </span><span class="s1">// null/undefined values are ignored.</span><span class="s3">\n          </span><span class="s1">return !(</span><span class="s3">\n            </span><span class="s1">v === null ||</span><span class="s3">\n            </span><span class="s1">v === undefined ||</span><span class="s3">\n            </span><span class="s1">(k === 'path' &amp;&amp; gex)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">]}</span></pre>
</body>
</html>