<html>
<head>
<title>bloom-filter.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
bloom-filter.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/shared/lib/bloom-filter.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// minimal implementation MurmurHash2 hash function</span><span class="s3">\n</span><span class="s1">function murmurhash2(str: string) {</span><span class="s3">\n  </span><span class="s1">let h = 0</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt; str.length; i++) {</span><span class="s3">\n    </span><span class="s1">const c = str.charCodeAt(i)</span><span class="s3">\n    </span><span class="s1">h = Math.imul(h ^ c, 0x5bd1e995)</span><span class="s3">\n    </span><span class="s1">h ^= h &gt;&gt;&gt; 13</span><span class="s3">\n    </span><span class="s1">h = Math.imul(h, 0x5bd1e995)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return h &gt;&gt;&gt; 0</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// default to 0.01% error rate as the filter compresses very well</span><span class="s3">\n</span><span class="s1">const DEFAULT_ERROR_RATE = 0.0001</span><span class="s3">\n\n</span><span class="s1">export class BloomFilter {</span><span class="s3">\n  </span><span class="s1">numItems: number</span><span class="s3">\n  </span><span class="s1">errorRate: number</span><span class="s3">\n  </span><span class="s1">numBits: number</span><span class="s3">\n  </span><span class="s1">numHashes: number</span><span class="s3">\n  </span><span class="s1">bitArray: number[]</span><span class="s3">\n\n  </span><span class="s1">constructor(numItems: number, errorRate: number = DEFAULT_ERROR_RATE) {</span><span class="s3">\n    </span><span class="s1">this.numItems = numItems</span><span class="s3">\n    </span><span class="s1">this.errorRate = errorRate</span><span class="s3">\n    </span><span class="s1">this.numBits = Math.ceil(</span><span class="s3">\n      </span><span class="s1">-(numItems * Math.log(errorRate)) / (Math.log(2) * Math.log(2))</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.numHashes = Math.ceil((this.numBits / numItems) * Math.log(2))</span><span class="s3">\n    </span><span class="s1">this.bitArray = new Array(this.numBits).fill(0)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static from(items: string[], errorRate = DEFAULT_ERROR_RATE) {</span><span class="s3">\n    </span><span class="s1">const filter = new BloomFilter(items.length, errorRate)</span><span class="s3">\n\n    </span><span class="s1">for (const item of items) {</span><span class="s3">\n      </span><span class="s1">filter.add(item)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return filter</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">export() {</span><span class="s3">\n    </span><span class="s1">const data = {</span><span class="s3">\n      </span><span class="s1">numItems: this.numItems,</span><span class="s3">\n      </span><span class="s1">errorRate: this.errorRate,</span><span class="s3">\n      </span><span class="s1">numBits: this.numBits,</span><span class="s3">\n      </span><span class="s1">numHashes: this.numHashes,</span><span class="s3">\n      </span><span class="s1">bitArray: this.bitArray,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'nodejs') {</span><span class="s3">\n      </span><span class="s1">if (this.errorRate &lt; DEFAULT_ERROR_RATE) {</span><span class="s3">\n        </span><span class="s1">const filterData = JSON.stringify(data)</span><span class="s3">\n        </span><span class="s1">const gzipSize = (</span><span class="s3">\n          </span><span class="s1">require('next/dist/compiled/gzip-size') as typeof import('next/dist/compiled/gzip-size')</span><span class="s3">\n        </span><span class="s1">).sync(filterData)</span><span class="s3">\n\n        </span><span class="s1">if (gzipSize &gt; 1024) {</span><span class="s3">\n          </span><span class="s1">console.warn(</span><span class="s3">\n            </span><span class="s1">`Creating filter with error rate less than 0.1% (0.001) can increase the size dramatically proceed with caution. Received error rate ${this.errorRate} resulted in size ${filterData.length} bytes, ${gzipSize} bytes (gzip)`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return data</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">import(data: ReturnType&lt;(typeof this)['export']&gt;) {</span><span class="s3">\n    </span><span class="s1">this.numItems = data.numItems</span><span class="s3">\n    </span><span class="s1">this.errorRate = data.errorRate</span><span class="s3">\n    </span><span class="s1">this.numBits = data.numBits</span><span class="s3">\n    </span><span class="s1">this.numHashes = data.numHashes</span><span class="s3">\n    </span><span class="s1">this.bitArray = data.bitArray</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">add(item: string) {</span><span class="s3">\n    </span><span class="s1">const hashValues = this.getHashValues(item)</span><span class="s3">\n    </span><span class="s1">hashValues.forEach((hash) =&gt; {</span><span class="s3">\n      </span><span class="s1">this.bitArray[hash] = 1</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">contains(item: string) {</span><span class="s3">\n    </span><span class="s1">const hashValues = this.getHashValues(item)</span><span class="s3">\n    </span><span class="s1">return hashValues.every((hash) =&gt; this.bitArray[hash])</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">getHashValues(item: string) {</span><span class="s3">\n    </span><span class="s1">const hashValues = []</span><span class="s3">\n    </span><span class="s1">for (let i = 1; i &lt;= this.numHashes; i++) {</span><span class="s3">\n      </span><span class="s1">const hash = murmurhash2(`${item}${i}`) % this.numBits</span><span class="s3">\n      </span><span class="s1">hashValues.push(hash)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return hashValues</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;BloomFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;murmurhash2&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;h&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;c&quot;</span><span class="s0">,</span><span class="s1">&quot;charCodeAt&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;imul&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_ERROR_RATE&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;items&quot;</span><span class="s0">,</span><span class="s1">&quot;errorRate&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;export&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;numItems&quot;</span><span class="s0">,</span><span class="s1">&quot;numBits&quot;</span><span class="s0">,</span><span class="s1">&quot;numHashes&quot;</span><span class="s0">,</span><span class="s1">&quot;bitArray&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;filterData&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;gzipSize&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;import&quot;</span><span class="s0">,</span><span class="s1">&quot;hashValues&quot;</span><span class="s0">,</span><span class="s1">&quot;getHashValues&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;contains&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;ceil&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;fill&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>