<html>
<head>
<title>pages-route-matcher-provider.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
pages-route-matcher-provider.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/route-matcher-providers/pages-route-matcher-provider.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { isAPIRoute } from '../../lib/is-api-route'</span><span class="s3">\n</span><span class="s1">import { BLOCKED_PAGES, PAGES_MANIFEST } from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { RouteKind } from '../route-kind'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">PagesLocaleRouteMatcher,</span><span class="s3">\n  </span><span class="s1">PagesRouteMatcher,</span><span class="s3">\n</span><span class="s1">} from '../route-matchers/pages-route-matcher'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Manifest,</span><span class="s3">\n  </span><span class="s1">ManifestLoader,</span><span class="s3">\n</span><span class="s1">} from './helpers/manifest-loaders/manifest-loader'</span><span class="s3">\n</span><span class="s1">import { ManifestRouteMatcherProvider } from './manifest-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import type { I18NProvider } from '../lib/i18n-provider'</span><span class="s3">\n</span><span class="s1">import { PagesNormalizers } from '../normalizers/built/pages'</span><span class="s3">\n\n</span><span class="s1">export class PagesRouteMatcherProvider extends ManifestRouteMatcherProvider&lt;PagesRouteMatcher&gt; {</span><span class="s3">\n  </span><span class="s1">private readonly normalizers: PagesNormalizers</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">distDir: string,</span><span class="s3">\n    </span><span class="s1">manifestLoader: ManifestLoader,</span><span class="s3">\n    </span><span class="s1">private readonly i18nProvider?: I18NProvider</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">super(PAGES_MANIFEST, manifestLoader)</span><span class="s3">\n\n    </span><span class="s1">this.normalizers = new PagesNormalizers(distDir)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async transform(</span><span class="s3">\n    </span><span class="s1">manifest: Manifest</span><span class="s3">\n  </span><span class="s1">): Promise&lt;ReadonlyArray&lt;PagesRouteMatcher&gt;&gt; {</span><span class="s3">\n    </span><span class="s1">// This matcher is only for Pages routes, not Pages API routes which are</span><span class="s3">\n    </span><span class="s1">// included in this manifest.</span><span class="s3">\n    </span><span class="s1">const pathnames = Object.keys(manifest)</span><span class="s3">\n      </span><span class="s1">.filter((pathname) =&gt; !isAPIRoute(pathname))</span><span class="s3">\n      </span><span class="s1">// Remove any blocked pages (page that can't be routed to, like error or</span><span class="s3">\n      </span><span class="s1">// internal pages).</span><span class="s3">\n      </span><span class="s1">.filter((pathname) =&gt; {</span><span class="s3">\n        </span><span class="s1">const normalized =</span><span class="s3">\n          </span><span class="s1">this.i18nProvider?.analyze(pathname).pathname ?? pathname</span><span class="s3">\n\n        </span><span class="s1">// Skip any blocked pages.</span><span class="s3">\n        </span><span class="s1">if (BLOCKED_PAGES.includes(normalized)) return false</span><span class="s3">\n\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const matchers: Array&lt;PagesRouteMatcher&gt; = []</span><span class="s3">\n    </span><span class="s1">for (const page of pathnames) {</span><span class="s3">\n      </span><span class="s1">if (this.i18nProvider) {</span><span class="s3">\n        </span><span class="s1">// Match the locale on the page name, or default to the default locale.</span><span class="s3">\n        </span><span class="s1">const { detectedLocale, pathname } = this.i18nProvider.analyze(page)</span><span class="s3">\n\n        </span><span class="s1">matchers.push(</span><span class="s3">\n          </span><span class="s1">new PagesLocaleRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.PAGES,</span><span class="s3">\n            </span><span class="s1">pathname,</span><span class="s3">\n            </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">bundlePath: this.normalizers.bundlePath.normalize(page),</span><span class="s3">\n            </span><span class="s1">filename: this.normalizers.filename.normalize(manifest[page]),</span><span class="s3">\n            </span><span class="s1">i18n: {</span><span class="s3">\n              </span><span class="s1">locale: detectedLocale,</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">matchers.push(</span><span class="s3">\n          </span><span class="s1">new PagesRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.PAGES,</span><span class="s3">\n            </span><span class="s1">// In `pages/`, the page is the same as the pathname.</span><span class="s3">\n            </span><span class="s1">pathname: page,</span><span class="s3">\n            </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">bundlePath: this.normalizers.bundlePath.normalize(page),</span><span class="s3">\n            </span><span class="s1">filename: this.normalizers.filename.normalize(manifest[page]),</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return matchers</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PagesRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;ManifestRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;i18nProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesNormalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;transform&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnames&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;isAPIRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;normalized&quot;</span><span class="s0">,</span><span class="s1">&quot;analyze&quot;</span><span class="s0">,</span><span class="s1">&quot;BLOCKED_PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesLocaleRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalize&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesRouteMatcher&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAeaA;;;eAAAA;;;4BAfc;2BACmB;2BACpB;mCAInB;8CAKsC;uBAEZ;AAE1B,MAAMA,kCAAkCC,0DAA4B;IAGzEC,YACEC,OAAe,EACfC,cAA8B,EAC9B,AAAiBC,YAA2B,CAC5C;QACA,KAAK,CAACC,yBAAc,EAAEF,sBAFLC,eAAAA;QAIjB,IAAI,CAACE,WAAW,GAAG,IAAIC,uBAAgB,CAACL;IAC1C;IAEA,MAAgBM,UACdC,QAAkB,EACyB;QAC3C,wEAAwE;QACxE,6BAA6B;QAC7B,MAAMC,YAAYC,OAAOC,IAAI,CAACH,UAC3BI,MAAM,CAAC,CAACC,WAAa,CAACC,IAAAA,sBAAU,EAACD,UAClC,wEAAwE;QACxE,mBAAmB;SAClBD,MAAM,CAAC,CAACC;gBAEL;YADF,MAAME,aACJ,EAAA,qBAAA,IAAI,CAACZ,YAAY,qBAAjB,mBAAmBa,OAAO,CAACH,UAAUA,QAAQ,KAAIA;YAEnD,0BAA0B;YAC1B,IAAII,wBAAa,CAACC,QAAQ,CAACH,aAAa,OAAO;YAE/C,OAAO;QACT;QAEF,MAAMI,WAAqC,EAAE;QAC7C,KAAK,MAAMC,QAAQX,UAAW;YAC5B,IAAI,IAAI,CAACN,YAAY,EAAE;gBACrB,uEAAuE;gBACvE,MAAM,EAAEkB,cAAc,EAAER,QAAQ,EAAE,GAAG,IAAI,CAACV,YAAY,CAACa,OAAO,CAACI;gBAE/DD,SAASG,IAAI,CACX,IAAIC,0CAAuB,CAAC;oBAC1BC,MAAMC,oBAAS,CAACC,KAAK;oBACrBb;oBACAO;oBACAO,YAAY,IAAI,CAACtB,WAAW,CAACsB,UAAU,CAACC,SAAS,CAACR;oBAClDS,UAAU,IAAI,CAACxB,WAAW,CAACwB,QAAQ,CAACD,SAAS,CAACpB,QAAQ,CAACY,KAAK;oBAC5DU,MAAM;wBACJC,QAAQV;oBACV;gBACF;YAEJ,OAAO;gBACLF,SAASG,IAAI,CACX,IAAIU,oCAAiB,CAAC;oBACpBR,MAAMC,oBAAS,CAACC,KAAK;oBACrB,qDAAqD;oBACrDb,UAAUO;oBACVA;oBACAO,YAAY,IAAI,CAACtB,WAAW,CAACsB,UAAU,CAACC,SAAS,CAACR;oBAClDS,UAAU,IAAI,CAACxB,WAAW,CAACwB,QAAQ,CAACD,SAAS,CAACpB,QAAQ,CAACY,KAAK;gBAC9D;YAEJ;QACF;QAEA,OAAOD;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>