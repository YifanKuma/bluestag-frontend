<html>
<head>
<title>get-locale-redirect.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
get-locale-redirect.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/shared/lib/i18n/get-locale-redirect.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { DomainLocale } from '../../../server/config'</span><span class="s3">\n</span><span class="s1">import type { I18NConfig } from '../../../server/config-shared'</span><span class="s3">\n</span><span class="s1">import { acceptLanguage } from '../../../server/accept-header'</span><span class="s3">\n</span><span class="s1">import { denormalizePagePath } from '../page-path/denormalize-page-path'</span><span class="s3">\n</span><span class="s1">import { detectDomainLocale } from './detect-domain-locale'</span><span class="s3">\n</span><span class="s1">import { formatUrl } from '../router/utils/format-url'</span><span class="s3">\n</span><span class="s1">import { getCookieParser } from '../../../server/api-utils/get-cookie-parser'</span><span class="s3">\n\n</span><span class="s1">interface Options {</span><span class="s3">\n  </span><span class="s1">defaultLocale: string</span><span class="s3">\n  </span><span class="s1">domainLocale?: DomainLocale</span><span class="s3">\n  </span><span class="s1">headers?: { [key: string]: string | string[] | undefined }</span><span class="s3">\n  </span><span class="s1">nextConfig: {</span><span class="s3">\n    </span><span class="s1">basePath?: string</span><span class="s3">\n    </span><span class="s1">i18n?: I18NConfig | null</span><span class="s3">\n    </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">pathLocale?: string</span><span class="s3">\n  </span><span class="s1">urlParsed: { hostname?: string | null; pathname: string }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getLocaleFromCookie(</span><span class="s3">\n  </span><span class="s1">i18n: I18NConfig,</span><span class="s3">\n  </span><span class="s1">headers: { [key: string]: string | string[] | undefined } = {}</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const nextLocale = getCookieParser(</span><span class="s3">\n    </span><span class="s1">headers || {}</span><span class="s3">\n  </span><span class="s1">)()?.NEXT_LOCALE?.toLowerCase()</span><span class="s3">\n  </span><span class="s1">return nextLocale</span><span class="s3">\n    </span><span class="s1">? i18n.locales.find((locale) =&gt; nextLocale === locale.toLowerCase())</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function detectLocale({</span><span class="s3">\n  </span><span class="s1">i18n,</span><span class="s3">\n  </span><span class="s1">headers,</span><span class="s3">\n  </span><span class="s1">domainLocale,</span><span class="s3">\n  </span><span class="s1">preferredLocale,</span><span class="s3">\n  </span><span class="s1">pathLocale,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">i18n: I18NConfig</span><span class="s3">\n  </span><span class="s1">preferredLocale?: string</span><span class="s3">\n  </span><span class="s1">headers?: { [key: string]: string | string[] | undefined }</span><span class="s3">\n  </span><span class="s1">domainLocale?: DomainLocale</span><span class="s3">\n  </span><span class="s1">pathLocale?: string</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">pathLocale ||</span><span class="s3">\n    </span><span class="s1">domainLocale?.defaultLocale ||</span><span class="s3">\n    </span><span class="s1">getLocaleFromCookie(i18n, headers) ||</span><span class="s3">\n    </span><span class="s1">preferredLocale ||</span><span class="s3">\n    </span><span class="s1">i18n.defaultLocale</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getAcceptPreferredLocale(</span><span class="s3">\n  </span><span class="s1">i18n: I18NConfig,</span><span class="s3">\n  </span><span class="s1">headers?: { [key: string]: string | string[] | undefined }</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">headers?.['accept-language'] &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!Array.isArray(headers['accept-language'])</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">return acceptLanguage(headers['accept-language'], i18n.locales)</span><span class="s3">\n    </span><span class="s1">} catch (err) {}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getLocaleRedirect({</span><span class="s3">\n  </span><span class="s1">defaultLocale,</span><span class="s3">\n  </span><span class="s1">domainLocale,</span><span class="s3">\n  </span><span class="s1">pathLocale,</span><span class="s3">\n  </span><span class="s1">headers,</span><span class="s3">\n  </span><span class="s1">nextConfig,</span><span class="s3">\n  </span><span class="s1">urlParsed,</span><span class="s3">\n</span><span class="s1">}: Options) {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">nextConfig.i18n &amp;&amp;</span><span class="s3">\n    </span><span class="s1">nextConfig.i18n.localeDetection !== false &amp;&amp;</span><span class="s3">\n    </span><span class="s1">denormalizePagePath(urlParsed.pathname) === '/'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const preferredLocale = getAcceptPreferredLocale(nextConfig.i18n, headers)</span><span class="s3">\n    </span><span class="s1">const detectedLocale = detectLocale({</span><span class="s3">\n      </span><span class="s1">i18n: nextConfig.i18n,</span><span class="s3">\n      </span><span class="s1">preferredLocale,</span><span class="s3">\n      </span><span class="s1">headers,</span><span class="s3">\n      </span><span class="s1">pathLocale,</span><span class="s3">\n      </span><span class="s1">domainLocale,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const preferredDomain = detectDomainLocale(</span><span class="s3">\n      </span><span class="s1">nextConfig.i18n.domains,</span><span class="s3">\n      </span><span class="s1">undefined,</span><span class="s3">\n      </span><span class="s1">preferredLocale</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (domainLocale &amp;&amp; preferredDomain) {</span><span class="s3">\n      </span><span class="s1">const isPDomain = preferredDomain.domain === domainLocale.domain</span><span class="s3">\n      </span><span class="s1">const isPLocale = preferredDomain.defaultLocale === preferredLocale</span><span class="s3">\n      </span><span class="s1">if (!isPDomain || !isPLocale) {</span><span class="s3">\n        </span><span class="s1">const scheme = `http${preferredDomain.http ? '' : 's'}`</span><span class="s3">\n        </span><span class="s1">const rlocale = isPLocale ? '' : preferredLocale</span><span class="s3">\n        </span><span class="s1">return `${scheme}://${preferredDomain.domain}/${rlocale}`</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (detectedLocale.toLowerCase() !== defaultLocale.toLowerCase()) {</span><span class="s3">\n      </span><span class="s1">return formatUrl({</span><span class="s3">\n        </span><span class="s1">...urlParsed,</span><span class="s3">\n        </span><span class="s1">pathname: `${nextConfig.basePath || ''}/${detectedLocale}${</span><span class="s3">\n          </span><span class="s1">nextConfig.trailingSlash ? '/' : ''</span><span class="s3">\n        </span><span class="s1">}`,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getLocaleRedirect&quot;</span><span class="s0">,</span><span class="s1">&quot;getLocaleFromCookie&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;getCookieParser&quot;</span><span class="s0">,</span><span class="s1">&quot;nextLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_LOCALE&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;detectLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;domainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;preferredLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;pathLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;getAcceptPreferredLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;acceptLanguage&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;urlParsed&quot;</span><span class="s0">,</span><span class="s1">&quot;localeDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;denormalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;preferredDomain&quot;</span><span class="s0">,</span><span class="s1">&quot;detectDomainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;domains&quot;</span><span class="s0">,</span><span class="s1">&quot;isPDomain&quot;</span><span class="s0">,</span><span class="s1">&quot;domain&quot;</span><span class="s0">,</span><span class="s1">&quot;isPLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;scheme&quot;</span><span class="s0">,</span><span class="s1">&quot;http&quot;</span><span class="s0">,</span><span class="s1">&quot;rlocale&quot;</span><span class="s0">,</span><span class="s1">&quot;formatUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAqEgBA;;;eAAAA;;;8BAnEe;qCACK;oCACD;2BACT;iCACM;AAehC,SAASC,oBACPC,IAAgB,EAChBC,OAA8D;IAA9DA,IAAAA,oBAAAA,UAA4D,CAAC;QAE1CC,8BAAAA;IAAnB,MAAMC,cAAaD,mBAAAA,IAAAA,gCAAe,EAChCD,WAAW,CAAC,0BADKC,+BAAAA,iBAEdE,WAAW,qBAFGF,6BAEDG,WAAW;IAC7B,OAAOF,aACHH,KAAKM,OAAO,CAACC,IAAI,CAAC,CAACC,SAAWL,eAAeK,OAAOH,WAAW,MAC/DI;AACN;AAEA,SAASC,aAAa,KAYrB;IAZqB,IAAA,EACpBV,IAAI,EACJC,OAAO,EACPU,YAAY,EACZC,eAAe,EACfC,UAAU,EAOX,GAZqB;IAapB,OACEA,eACAF,gCAAAA,aAAcG,aAAa,KAC3Bf,oBAAoBC,MAAMC,YAC1BW,mBACAZ,KAAKc,aAAa;AAEtB;AAEA,SAASC,yBACPf,IAAgB,EAChBC,OAA0D;IAE1D,IACEA,CAAAA,2BAAAA,OAAS,CAAC,kBAAkB,KAC5B,CAACe,MAAMC,OAAO,CAAChB,OAAO,CAAC,kBAAkB,GACzC;QACA,IAAI;YACF,OAAOiB,IAAAA,4BAAc,EAACjB,OAAO,CAAC,kBAAkB,EAAED,KAAKM,OAAO;QAChE,EAAE,OAAOa,KAAK,CAAC;IACjB;AACF;AAEO,SAASrB,kBAAkB,KAOxB;IAPwB,IAAA,EAChCgB,aAAa,EACbH,YAAY,EACZE,UAAU,EACVZ,OAAO,EACPmB,UAAU,EACVC,SAAS,EACD,GAPwB;IAQhC,IACED,WAAWpB,IAAI,IACfoB,WAAWpB,IAAI,CAACsB,eAAe,KAAK,SACpCC,IAAAA,wCAAmB,EAACF,UAAUG,QAAQ,MAAM,KAC5C;QACA,MAAMZ,kBAAkBG,yBAAyBK,WAAWpB,IAAI,EAAEC;QAClE,MAAMwB,iBAAiBf,aAAa;YAClCV,MAAMoB,WAAWpB,IAAI;YACrBY;YACAX;YACAY;YACAF;QACF;QAEA,MAAMe,kBAAkBC,IAAAA,sCAAkB,EACxCP,WAAWpB,IAAI,CAAC4B,OAAO,EACvBnB,WACAG;QAGF,IAAID,gBAAgBe,iBAAiB;YACnC,MAAMG,YAAYH,gBAAgBI,MAAM,KAAKnB,aAAamB,MAAM;YAChE,MAAMC,YAAYL,gBAAgBZ,aAAa,KAAKF;YACpD,IAAI,CAACiB,aAAa,CAACE,WAAW;gBAC5B,MAAMC,SAAS,AAAC,SAAMN,CAAAA,gBAAgBO,IAAI,GAAG,KAAK,GAAE;gBACpD,MAAMC,UAAUH,YAAY,KAAKnB;gBACjC,OAAO,AAAGoB,SAAO,QAAKN,gBAAgBI,MAAM,GAAC,MAAGI;YAClD;QACF;QAEA,IAAIT,eAAepB,WAAW,OAAOS,cAAcT,WAAW,IAAI;YAChE,OAAO8B,IAAAA,oBAAS,EAAC;gBACf,GAAGd,SAAS;gBACZG,UAAU,AAAGJ,CAAAA,WAAWgB,QAAQ,IAAI,EAAC,IAAE,MAAGX,iBACxCL,CAAAA,WAAWiB,aAAa,GAAG,MAAM,EAAC;YAEtC;QACF;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>