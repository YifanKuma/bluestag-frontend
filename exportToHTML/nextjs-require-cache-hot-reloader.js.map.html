<html>
<head>
<title>nextjs-require-cache-hot-reloader.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
nextjs-require-cache-hot-reloader.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/build/webpack/plugins/nextjs-require-cache-hot-reloader.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { webpack } from 'next/dist/compiled/webpack/webpack'</span><span class="s3">\n</span><span class="s1">import { deleteCache } from '../../../server/dev/require-cache'</span><span class="s3">\n</span><span class="s1">import { clearModuleContext } from '../../../server/web/sandbox'</span><span class="s3">\n</span><span class="s1">import path from 'path'</span><span class="s3">\n\n</span><span class="s1">type Compiler = webpack.Compiler</span><span class="s3">\n</span><span class="s1">type WebpackPluginInstance = webpack.WebpackPluginInstance</span><span class="s3">\n\n</span><span class="s1">const RUNTIME_NAMES = ['webpack-runtime', 'webpack-api-runtime']</span><span class="s3">\n</span><span class="s1">const PLUGIN_NAME = 'NextJsRequireCacheHotReloader'</span><span class="s3">\n\n</span><span class="s1">// This plugin flushes require.cache after emitting the files. Providing 'hot reloading' of server files.</span><span class="s3">\n</span><span class="s1">export class NextJsRequireCacheHotReloader implements WebpackPluginInstance {</span><span class="s3">\n  </span><span class="s1">prevAssets: any = null</span><span class="s3">\n  </span><span class="s1">serverComponents: boolean</span><span class="s3">\n\n  </span><span class="s1">constructor(opts: { serverComponents: boolean }) {</span><span class="s3">\n    </span><span class="s1">this.serverComponents = opts.serverComponents</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">apply(compiler: Compiler) {</span><span class="s3">\n    </span><span class="s1">compiler.hooks.assetEmitted.tap(PLUGIN_NAME, (_file, { targetPath }) =&gt; {</span><span class="s3">\n      </span><span class="s1">// Clear module context in this process</span><span class="s3">\n      </span><span class="s1">clearModuleContext(targetPath)</span><span class="s3">\n      </span><span class="s1">deleteCache(targetPath)</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">compiler.hooks.afterEmit.tapPromise(PLUGIN_NAME, async (compilation) =&gt; {</span><span class="s3">\n      </span><span class="s1">for (const name of RUNTIME_NAMES) {</span><span class="s3">\n        </span><span class="s1">const runtimeChunkPath = path.join(</span><span class="s3">\n          </span><span class="s1">compilation.outputOptions.path!,</span><span class="s3">\n          </span><span class="s1">`${name}.js`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">deleteCache(runtimeChunkPath)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// we need to make sure to clear all server entries from cache</span><span class="s3">\n      </span><span class="s1">// since they can have a stale webpack-runtime cache</span><span class="s3">\n      </span><span class="s1">// which needs to always be in-sync</span><span class="s3">\n      </span><span class="s1">const entries = [...compilation.entrypoints.keys()].filter((entry) =&gt; {</span><span class="s3">\n        </span><span class="s1">const isAppPath = entry.toString().startsWith('app/')</span><span class="s3">\n        </span><span class="s1">return entry.toString().startsWith('pages/') || isAppPath</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">for (const page of entries) {</span><span class="s3">\n        </span><span class="s1">const outputPath = path.join(</span><span class="s3">\n          </span><span class="s1">compilation.outputOptions.path!,</span><span class="s3">\n          </span><span class="s1">page + '.js'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">deleteCache(outputPath)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NextJsRequireCacheHotReloader&quot;</span><span class="s0">,</span><span class="s1">&quot;RUNTIME_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;PLUGIN_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;prevAssets&quot;</span><span class="s0">,</span><span class="s1">&quot;serverComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;compiler&quot;</span><span class="s0">,</span><span class="s1">&quot;hooks&quot;</span><span class="s0">,</span><span class="s1">&quot;assetEmitted&quot;</span><span class="s0">,</span><span class="s1">&quot;tap&quot;</span><span class="s0">,</span><span class="s1">&quot;_file&quot;</span><span class="s0">,</span><span class="s1">&quot;targetPath&quot;</span><span class="s0">,</span><span class="s1">&quot;clearModuleContext&quot;</span><span class="s0">,</span><span class="s1">&quot;deleteCache&quot;</span><span class="s0">,</span><span class="s1">&quot;afterEmit&quot;</span><span class="s0">,</span><span class="s1">&quot;tapPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;compilation&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;runtimeChunkPath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;outputOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;outputPath&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAYaA;;;eAAAA;;;8BAXe;yBACO;6DAClB;;;;;;AAKjB,MAAMC,gBAAgB;IAAC;IAAmB;CAAsB;AAChE,MAAMC,cAAc;AAGb,MAAMF;IAIXG,YAAYC,IAAmC,CAAE;aAHjDC,aAAkB;QAIhB,IAAI,CAACC,gBAAgB,GAAGF,KAAKE,gBAAgB;IAC/C;IAEAC,MAAMC,QAAkB,EAAE;QACxBA,SAASC,KAAK,CAACC,YAAY,CAACC,GAAG,CAACT,aAAa,CAACU,OAAO,EAAEC,UAAU,EAAE;YACjE,uCAAuC;YACvCC,IAAAA,2BAAkB,EAACD;YACnBE,IAAAA,yBAAW,EAACF;QACd;QAEAL,SAASC,KAAK,CAACO,SAAS,CAACC,UAAU,CAACf,aAAa,OAAOgB;YACtD,KAAK,MAAMC,QAAQlB,cAAe;gBAChC,MAAMmB,mBAAmBC,aAAI,CAACC,IAAI,CAChCJ,YAAYK,aAAa,CAACF,IAAI,EAC9B,GAAGF,KAAK,GAAG,CAAC;gBAEdJ,IAAAA,yBAAW,EAACK;YACd;YAEA,8DAA8D;YAC9D,oDAAoD;YACpD,mCAAmC;YACnC,MAAMI,UAAU;mBAAIN,YAAYO,WAAW,CAACC,IAAI;aAAG,CAACC,MAAM,CAAC,CAACC;gBAC1D,MAAMC,YAAYD,MAAME,QAAQ,GAAGC,UAAU,CAAC;gBAC9C,OAAOH,MAAME,QAAQ,GAAGC,UAAU,CAAC,aAAaF;YAClD;YAEA,KAAK,MAAMG,QAAQR,QAAS;gBAC1B,MAAMS,aAAaZ,aAAI,CAACC,IAAI,CAC1BJ,YAAYK,aAAa,CAACF,IAAI,EAC9BW,OAAO;gBAETjB,IAAAA,yBAAW,EAACkB;YACd;QACF;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>