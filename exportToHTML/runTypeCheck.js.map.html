<html>
<head>
<title>runTypeCheck.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
runTypeCheck.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/lib/typescript/runTypeCheck.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import path from 'path'</span><span class="s3">\n</span><span class="s1">import { getFormattedDiagnostic } from './diagnosticFormatter'</span><span class="s3">\n</span><span class="s1">import { getTypeScriptConfiguration } from './getTypeScriptConfiguration'</span><span class="s3">\n</span><span class="s1">import { getRequiredConfiguration } from './writeConfigurationDefaults'</span><span class="s3">\n\n</span><span class="s1">import { CompileError } from '../compile-error'</span><span class="s3">\n</span><span class="s1">import { warn } from '../../build/output/log'</span><span class="s3">\n\n</span><span class="s1">export interface TypeCheckResult {</span><span class="s3">\n  </span><span class="s1">hasWarnings: boolean</span><span class="s3">\n  </span><span class="s1">warnings?: string[]</span><span class="s3">\n  </span><span class="s1">inputFilesCount: number</span><span class="s3">\n  </span><span class="s1">totalFilesCount: number</span><span class="s3">\n  </span><span class="s1">incremental: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function runTypeCheck(</span><span class="s3">\n  </span><span class="s1">ts: typeof import('typescript'),</span><span class="s3">\n  </span><span class="s1">baseDir: string,</span><span class="s3">\n  </span><span class="s1">distDir: string,</span><span class="s3">\n  </span><span class="s1">tsConfigPath: string,</span><span class="s3">\n  </span><span class="s1">cacheDir?: string,</span><span class="s3">\n  </span><span class="s1">isAppDirEnabled?: boolean</span><span class="s3">\n</span><span class="s1">): Promise&lt;TypeCheckResult&gt; {</span><span class="s3">\n  </span><span class="s1">const effectiveConfiguration = await getTypeScriptConfiguration(</span><span class="s3">\n    </span><span class="s1">ts,</span><span class="s3">\n    </span><span class="s1">tsConfigPath</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (effectiveConfiguration.fileNames.length &lt; 1) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hasWarnings: false,</span><span class="s3">\n      </span><span class="s1">inputFilesCount: 0,</span><span class="s3">\n      </span><span class="s1">totalFilesCount: 0,</span><span class="s3">\n      </span><span class="s1">incremental: false,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const requiredConfig = getRequiredConfiguration(ts)</span><span class="s3">\n\n  </span><span class="s1">const options = {</span><span class="s3">\n    </span><span class="s1">...requiredConfig,</span><span class="s3">\n    </span><span class="s1">...effectiveConfiguration.options,</span><span class="s3">\n    </span><span class="s1">declarationMap: false,</span><span class="s3">\n    </span><span class="s1">emitDeclarationOnly: false,</span><span class="s3">\n    </span><span class="s1">noEmit: true,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let program:</span><span class="s3">\n    </span><span class="s1">| import('typescript').Program</span><span class="s3">\n    </span><span class="s1">| import('typescript').BuilderProgram</span><span class="s3">\n  </span><span class="s1">let incremental = false</span><span class="s3">\n  </span><span class="s1">if ((options.incremental || options.composite) &amp;&amp; cacheDir) {</span><span class="s3">\n    </span><span class="s1">if (options.composite) {</span><span class="s3">\n      </span><span class="s1">warn(</span><span class="s3">\n        </span><span class="s1">'TypeScript project references are not fully supported. Attempting to build in incremental mode.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">incremental = true</span><span class="s3">\n    </span><span class="s1">program = ts.createIncrementalProgram({</span><span class="s3">\n      </span><span class="s1">rootNames: effectiveConfiguration.fileNames,</span><span class="s3">\n      </span><span class="s1">options: {</span><span class="s3">\n        </span><span class="s1">...options,</span><span class="s3">\n        </span><span class="s1">composite: false,</span><span class="s3">\n        </span><span class="s1">incremental: true,</span><span class="s3">\n        </span><span class="s1">tsBuildInfoFile: path.join(cacheDir, '.tsbuildinfo'),</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">program = ts.createProgram(effectiveConfiguration.fileNames, options)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const result = program.emit()</span><span class="s3">\n\n  </span><span class="s1">const ignoreRegex = [</span><span class="s3">\n    </span><span class="s1">// matches **/__(tests|mocks)__/**</span><span class="s3">\n    </span><span class="s1">/[</span><span class="s3">\\\\</span><span class="s1">/]__(?:tests|mocks)__[</span><span class="s3">\\\\</span><span class="s1">/]/,</span><span class="s3">\n    </span><span class="s1">// matches **/*.(spec|test).*</span><span class="s3">\n    </span><span class="s1">/(?&lt;=[</span><span class="s3">\\\\</span><span class="s1">/.])(?:spec|test)</span><span class="s3">\\</span><span class="s1">.[^</span><span class="s3">\\\\</span><span class="s1">/]+$/,</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">const regexIgnoredFile = new RegExp(</span><span class="s3">\n    </span><span class="s1">ignoreRegex.map((r) =&gt; r.source).join('|')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const allDiagnostics = ts</span><span class="s3">\n    </span><span class="s1">.getPreEmitDiagnostics(program as import('typescript').Program)</span><span class="s3">\n    </span><span class="s1">.concat(result.diagnostics)</span><span class="s3">\n    </span><span class="s1">.filter((d) =&gt; !(d.file &amp;&amp; regexIgnoredFile.test(d.file.fileName)))</span><span class="s3">\n\n  </span><span class="s1">const firstError =</span><span class="s3">\n    </span><span class="s1">allDiagnostics.find(</span><span class="s3">\n      </span><span class="s1">(d) =&gt; d.category === ts.DiagnosticCategory.Error &amp;&amp; Boolean(d.file)</span><span class="s3">\n    </span><span class="s1">) ?? allDiagnostics.find((d) =&gt; d.category === ts.DiagnosticCategory.Error)</span><span class="s3">\n\n  </span><span class="s1">// In test mode, we want to check all diagnostics, not just the first one.</span><span class="s3">\n  </span><span class="s1">if (process.env.__NEXT_TEST_MODE) {</span><span class="s3">\n    </span><span class="s1">if (firstError) {</span><span class="s3">\n      </span><span class="s1">const allErrors = allDiagnostics</span><span class="s3">\n        </span><span class="s1">.filter((d) =&gt; d.category === ts.DiagnosticCategory.Error)</span><span class="s3">\n        </span><span class="s1">.map(</span><span class="s3">\n          </span><span class="s1">(d) =&gt;</span><span class="s3">\n            </span><span class="s1">'[Test Mode] ' +</span><span class="s3">\n            </span><span class="s1">getFormattedDiagnostic(ts, baseDir, distDir, d, isAppDirEnabled)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">'</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n===== TS errors =====</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n          </span><span class="s1">allErrors.join('</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n') +</span><span class="s3">\n          </span><span class="s1">'</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n===== TS errors =====</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">// Make sure all stdout is flushed before we exit.</span><span class="s3">\n      </span><span class="s1">await new Promise((resolve) =&gt; setTimeout(resolve, 100))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (firstError) {</span><span class="s3">\n    </span><span class="s1">throw new CompileError(</span><span class="s3">\n      </span><span class="s1">getFormattedDiagnostic(ts, baseDir, distDir, firstError, isAppDirEnabled)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const warnings = allDiagnostics</span><span class="s3">\n    </span><span class="s1">.filter((d) =&gt; d.category === ts.DiagnosticCategory.Warning)</span><span class="s3">\n    </span><span class="s1">.map((d) =&gt;</span><span class="s3">\n      </span><span class="s1">getFormattedDiagnostic(ts, baseDir, distDir, d, isAppDirEnabled)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">hasWarnings: true,</span><span class="s3">\n    </span><span class="s1">warnings,</span><span class="s3">\n    </span><span class="s1">inputFilesCount: effectiveConfiguration.fileNames.length,</span><span class="s3">\n    </span><span class="s1">totalFilesCount: program.getSourceFiles().length,</span><span class="s3">\n    </span><span class="s1">incremental,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;runTypeCheck&quot;</span><span class="s0">,</span><span class="s1">&quot;ts&quot;</span><span class="s0">,</span><span class="s1">&quot;baseDir&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;tsConfigPath&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheDir&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppDirEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;effectiveConfiguration&quot;</span><span class="s0">,</span><span class="s1">&quot;getTypeScriptConfiguration&quot;</span><span class="s0">,</span><span class="s1">&quot;fileNames&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;hasWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;inputFilesCount&quot;</span><span class="s0">,</span><span class="s1">&quot;totalFilesCount&quot;</span><span class="s0">,</span><span class="s1">&quot;incremental&quot;</span><span class="s0">,</span><span class="s1">&quot;requiredConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequiredConfiguration&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;declarationMap&quot;</span><span class="s0">,</span><span class="s1">&quot;emitDeclarationOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;noEmit&quot;</span><span class="s0">,</span><span class="s1">&quot;program&quot;</span><span class="s0">,</span><span class="s1">&quot;composite&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;createIncrementalProgram&quot;</span><span class="s0">,</span><span class="s1">&quot;rootNames&quot;</span><span class="s0">,</span><span class="s1">&quot;tsBuildInfoFile&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;createProgram&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;emit&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;regexIgnoredFile&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;allDiagnostics&quot;</span><span class="s0">,</span><span class="s1">&quot;getPreEmitDiagnostics&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;diagnostics&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;d&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;fileName&quot;</span><span class="s0">,</span><span class="s1">&quot;firstError&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;category&quot;</span><span class="s0">,</span><span class="s1">&quot;DiagnosticCategory&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_TEST_MODE&quot;</span><span class="s0">,</span><span class="s1">&quot;allErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;getFormattedDiagnostic&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;setTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;CompileError&quot;</span><span class="s0">,</span><span class="s1">&quot;warnings&quot;</span><span class="s0">,</span><span class="s1">&quot;Warning&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourceFiles&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>