<html>
<head>
<title>runLintCheck.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #1750eb;}
.s5 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
runLintCheck.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;runLintCheck&quot;</span><span class="s1">, {</span>
    <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
    <span class="s1">get: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">runLintCheck;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_fs = require(</span><span class="s0">&quot;fs&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_picocolors = require(</span><span class="s0">&quot;../picocolors&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_path = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;path&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_findup = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;next/dist/compiled/find-up&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_semver = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;next/dist/compiled/semver&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_commentjson = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_wildcard(require(</span><span class="s0">&quot;next/dist/compiled/comment-json&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_customFormatter = require(</span><span class="s0">&quot;./customFormatter&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_writeDefaultConfig = require(</span><span class="s0">&quot;./writeDefaultConfig&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_hasEslintConfiguration = require(</span><span class="s0">&quot;./hasEslintConfiguration&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_writeOutputFile = require(</span><span class="s0">&quot;./writeOutputFile&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_findpagesdir = require(</span><span class="s0">&quot;../find-pages-dir&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_installdependencies = require(</span><span class="s0">&quot;../install-dependencies&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_hasnecessarydependencies = require(</span><span class="s0">&quot;../has-necessary-dependencies&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_log = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_wildcard(require(</span><span class="s0">&quot;../../build/output/log&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_iserror = </span><span class="s3">/*#__PURE__*/ </span><span class="s1">_interop_require_wildcard(require(</span><span class="s0">&quot;../is-error&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_getpkgmanager = require(</span><span class="s0">&quot;../helpers/get-pkg-manager&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getESLintPromptValues = require(</span><span class="s0">&quot;./getESLintPromptValues&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">_interop_require_default(obj) {</span>
    <span class="s2">return </span><span class="s1">obj &amp;&amp; obj.__esModule ? obj : {</span>
        <span class="s2">default</span><span class="s1">: obj</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_getRequireWildcardCache(nodeInterop) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">WeakMap !== </span><span class="s0">&quot;function&quot;</span><span class="s1">) </span><span class="s2">return null</span><span class="s1">;</span>
    <span class="s2">var </span><span class="s1">cacheBabelInterop = </span><span class="s2">new </span><span class="s1">WeakMap();</span>
    <span class="s2">var </span><span class="s1">cacheNodeInterop = </span><span class="s2">new </span><span class="s1">WeakMap();</span>
    <span class="s2">return </span><span class="s1">(_getRequireWildcardCache = </span><span class="s2">function</span><span class="s1">(nodeInterop) {</span>
        <span class="s2">return </span><span class="s1">nodeInterop ? cacheNodeInterop : cacheBabelInterop;</span>
    <span class="s1">})(nodeInterop);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_interop_require_wildcard(obj, nodeInterop) {</span>
    <span class="s2">if </span><span class="s1">(!nodeInterop &amp;&amp; obj &amp;&amp; obj.__esModule) {</span>
        <span class="s2">return </span><span class="s1">obj;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(obj === </span><span class="s2">null </span><span class="s1">|| </span><span class="s2">typeof </span><span class="s1">obj !== </span><span class="s0">&quot;object&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">typeof </span><span class="s1">obj !== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s2">default</span><span class="s1">: obj</span>
        <span class="s1">};</span>
    <span class="s1">}</span>
    <span class="s2">var </span><span class="s1">cache = _getRequireWildcardCache(nodeInterop);</span>
    <span class="s2">if </span><span class="s1">(cache &amp;&amp; cache.has(obj)) {</span>
        <span class="s2">return </span><span class="s1">cache.get(obj);</span>
    <span class="s1">}</span>
    <span class="s2">var </span><span class="s1">newObj = {</span>
        <span class="s1">__proto__: </span><span class="s2">null</span>
    <span class="s1">};</span>
    <span class="s2">var </span><span class="s1">hasPropertyDescriptor = Object.defineProperty &amp;&amp; Object.getOwnPropertyDescriptor;</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">key </span><span class="s2">in </span><span class="s1">obj){</span>
        <span class="s2">if </span><span class="s1">(key !== </span><span class="s0">&quot;default&quot; </span><span class="s1">&amp;&amp; Object.prototype.hasOwnProperty.call(obj, key)) {</span>
            <span class="s2">var </span><span class="s1">desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : </span><span class="s2">null</span><span class="s1">;</span>
            <span class="s2">if </span><span class="s1">(desc &amp;&amp; (desc.get || desc.set)) {</span>
                <span class="s1">Object.defineProperty(newObj, key, desc);</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s1">newObj[key] = obj[key];</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">newObj.default = obj;</span>
    <span class="s2">if </span><span class="s1">(cache) {</span>
        <span class="s1">cache.set(obj, newObj);</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">newObj;</span>
<span class="s1">}</span>
<span class="s3">// 0 is off, 1 is warn, 2 is error. See https://eslint.org/docs/user-guide/configuring/rules#configuring-rules</span>
<span class="s2">const </span><span class="s1">VALID_SEVERITY = [</span>
    <span class="s0">'off'</span><span class="s1">,</span>
    <span class="s0">'warn'</span><span class="s1">,</span>
    <span class="s0">'error'</span>
<span class="s1">];</span>
<span class="s2">function </span><span class="s1">isValidSeverity(severity) {</span>
    <span class="s2">return </span><span class="s1">VALID_SEVERITY.includes(severity);</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">requiredPackages = [</span>
    <span class="s1">{</span>
        <span class="s1">file: </span><span class="s0">'eslint'</span><span class="s1">,</span>
        <span class="s1">pkg: </span><span class="s0">'eslint'</span><span class="s1">,</span>
        <span class="s1">exportsRestrict: </span><span class="s2">false</span>
    <span class="s1">},</span>
    <span class="s1">{</span>
        <span class="s1">file: </span><span class="s0">'eslint-config-next'</span><span class="s1">,</span>
        <span class="s1">pkg: </span><span class="s0">'eslint-config-next'</span><span class="s1">,</span>
        <span class="s1">exportsRestrict: </span><span class="s2">false</span>
    <span class="s1">}</span>
<span class="s1">];</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">cliPrompt(cwd) {</span>
    <span class="s1">console.log((</span><span class="s4">0</span><span class="s1">, _picocolors.bold)(</span><span class="s0">`</span><span class="s1">${(</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)(</span><span class="s0">'?'</span><span class="s1">)} </span><span class="s0">How would you like to configure ESLint? https://nextjs.org/docs/app/api-reference/config/eslint`</span><span class="s1">));</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s2">const </span><span class="s1">cliSelect = (</span><span class="s2">await </span><span class="s1">Promise.resolve(require(</span><span class="s0">'next/dist/compiled/cli-select'</span><span class="s1">))).default;</span>
        <span class="s2">const </span><span class="s1">{ value } = </span><span class="s2">await </span><span class="s1">cliSelect({</span>
            <span class="s1">values: </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _getESLintPromptValues.getESLintPromptValues)(cwd),</span>
            <span class="s1">valueRenderer: ({ title, recommended }, selected)=&gt;{</span>
                <span class="s2">const </span><span class="s1">name = selected ? (</span><span class="s4">0</span><span class="s1">, _picocolors.bold)((</span><span class="s4">0</span><span class="s1">, _picocolors.underline)((</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)(title))) : title;</span>
                <span class="s2">return </span><span class="s1">name + (recommended ? (</span><span class="s4">0</span><span class="s1">, _picocolors.bold)((</span><span class="s4">0</span><span class="s1">, _picocolors.yellow)(</span><span class="s0">' (recommended)'</span><span class="s1">)) : </span><span class="s0">''</span><span class="s1">);</span>
            <span class="s1">},</span>
            <span class="s1">selected: (</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)(</span><span class="s0">'‚ùØ '</span><span class="s1">),</span>
            <span class="s1">unselected: </span><span class="s0">'  '</span>
        <span class="s1">});</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">config: (value == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: value.config) ?? </span><span class="s2">null</span>
        <span class="s1">};</span>
    <span class="s1">} </span><span class="s2">catch  </span><span class="s1">{</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">config: </span><span class="s2">null</span>
        <span class="s1">};</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">lint(baseDir, lintDirs, eslintrcFile, pkgJsonPath, { lintDuringBuild = </span><span class="s2">false</span><span class="s1">, eslintOptions = </span><span class="s2">null</span><span class="s1">, reportErrorsOnly = </span><span class="s2">false</span><span class="s1">, maxWarnings = -</span><span class="s4">1</span><span class="s1">, formatter = </span><span class="s2">null</span><span class="s1">, outputFile = </span><span class="s2">null </span><span class="s1">}) {</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s2">var </span><span class="s1">_mod_CLIEngine, _ESLint_getErrorResults;</span>
        <span class="s3">// Load ESLint after we're sure it exists:</span>
        <span class="s2">const </span><span class="s1">deps = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _hasnecessarydependencies.hasNecessaryDependencies)(baseDir, requiredPackages);</span>
        <span class="s2">const </span><span class="s1">packageManager = (</span><span class="s4">0</span><span class="s1">, _getpkgmanager.getPkgManager)(baseDir);</span>
        <span class="s2">if </span><span class="s1">(deps.missing.some((dep)=&gt;dep.pkg === </span><span class="s0">'eslint'</span><span class="s1">)) {</span>
            <span class="s1">_log.error(</span><span class="s0">`ESLint must be installed</span><span class="s1">${lintDuringBuild ? </span><span class="s0">' in order to run during builds:' </span><span class="s1">: </span><span class="s0">':'</span><span class="s1">} ${(</span><span class="s4">0</span><span class="s1">, _picocolors.bold)((</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)((packageManager === </span><span class="s0">'yarn' </span><span class="s1">? </span><span class="s0">'yarn add --dev' </span><span class="s1">: packageManager === </span><span class="s0">'pnpm' </span><span class="s1">? </span><span class="s0">'pnpm install --save-dev' </span><span class="s1">: </span><span class="s0">'npm install --save-dev'</span><span class="s1">) + </span><span class="s0">' eslint'</span><span class="s1">))}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s2">return null</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">mod = </span><span class="s2">await </span><span class="s1">Promise.resolve(require(deps.resolved.get(</span><span class="s0">'eslint'</span><span class="s1">)));</span>
        <span class="s3">// If V9 config was found, use flat config, or else use legacy.</span>
        <span class="s2">const </span><span class="s1">useFlatConfig = eslintrcFile ? _path.default.basename(eslintrcFile).startsWith(</span><span class="s0">'eslint.config.'</span><span class="s1">) : </span><span class="s2">false</span><span class="s1">;</span>
        <span class="s2">let </span><span class="s1">ESLint;</span>
        <span class="s3">// loadESLint is &gt;= 8.57.0</span>
        <span class="s3">// PR https://github.com/eslint/eslint/pull/18098</span>
        <span class="s3">// Release https://github.com/eslint/eslint/releases/tag/v8.57.0</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s0">'loadESLint' </span><span class="s2">in </span><span class="s1">mod) {</span>
            <span class="s3">// By default, configType is `flat`. If `useFlatConfig` is false, the return value is `LegacyESLint`.</span>
            <span class="s3">// https://github.com/eslint/eslint/blob/1def4cdfab1f067c5089df8b36242cdf912b0eb6/lib/types/index.d.ts#L1609-L1613</span>
            <span class="s1">ESLint = </span><span class="s2">await </span><span class="s1">mod.loadESLint({</span>
                <span class="s1">useFlatConfig</span>
            <span class="s1">});</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s3">// eslint &lt; 8.57.0, use legacy ESLint</span>
            <span class="s1">ESLint = mod.ESLint;</span>
        <span class="s1">}</span>
        <span class="s2">let </span><span class="s1">eslintVersion = (ESLint == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: ESLint.version) ?? ((_mod_CLIEngine = mod.CLIEngine) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: _mod_CLIEngine.version);</span>
        <span class="s2">if </span><span class="s1">(!eslintVersion || _semver.default.lt(eslintVersion, </span><span class="s0">'7.0.0'</span><span class="s1">)) {</span>
            <span class="s2">return </span><span class="s0">`</span><span class="s1">${(</span><span class="s4">0</span><span class="s1">, _picocolors.red)(</span><span class="s0">'error'</span><span class="s1">)} </span><span class="s0">- Your project has an older version of ESLint installed</span><span class="s1">${eslintVersion ? </span><span class="s0">' (' </span><span class="s1">+ eslintVersion + </span><span class="s0">')' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">}</span><span class="s0">. Please upgrade to ESLint version 7 or above`</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">let </span><span class="s1">options = {</span>
            <span class="s1">useEslintrc: </span><span class="s2">true</span><span class="s1">,</span>
            <span class="s1">baseConfig: {},</span>
            <span class="s1">errorOnUnmatchedPattern: </span><span class="s2">false</span><span class="s1">,</span>
            <span class="s1">extensions: [</span>
                <span class="s0">'.js'</span><span class="s1">,</span>
                <span class="s0">'.jsx'</span><span class="s1">,</span>
                <span class="s0">'.ts'</span><span class="s1">,</span>
                <span class="s0">'.tsx'</span>
            <span class="s1">],</span>
            <span class="s1">cache: </span><span class="s2">true</span><span class="s1">,</span>
            <span class="s1">...eslintOptions</span>
        <span class="s1">};</span>
        <span class="s2">if </span><span class="s1">(_semver.default.gte(eslintVersion, </span><span class="s0">'9.0.0'</span><span class="s1">) &amp;&amp; useFlatConfig) {</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">option of [</span>
                <span class="s0">'useEslintrc'</span><span class="s1">,</span>
                <span class="s0">'extensions'</span><span class="s1">,</span>
                <span class="s0">'ignorePath'</span><span class="s1">,</span>
                <span class="s0">'reportUnusedDisableDirectives'</span><span class="s1">,</span>
                <span class="s0">'resolvePluginsRelativeTo'</span><span class="s1">,</span>
                <span class="s0">'rulePaths'</span><span class="s1">,</span>
                <span class="s0">'inlineConfig'</span><span class="s1">,</span>
                <span class="s0">'maxWarnings'</span>
            <span class="s1">]){</span>
                <span class="s2">if </span><span class="s1">(option </span><span class="s2">in </span><span class="s1">options) {</span>
                    <span class="s2">delete </span><span class="s1">options[option];</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s2">let </span><span class="s1">eslint = </span><span class="s2">new </span><span class="s1">ESLint(options);</span>
        <span class="s2">let </span><span class="s1">nextEslintPluginIsEnabled = </span><span class="s2">false</span><span class="s1">;</span>
        <span class="s2">const </span><span class="s1">nextRulesEnabled = </span><span class="s2">new </span><span class="s1">Map();</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">configFile of [</span>
            <span class="s1">eslintrcFile,</span>
            <span class="s1">pkgJsonPath</span>
        <span class="s1">]){</span>
            <span class="s2">if </span><span class="s1">(!configFile) </span><span class="s2">continue</span><span class="s1">;</span>
            <span class="s2">const </span><span class="s1">completeConfig = </span><span class="s2">await </span><span class="s1">eslint.calculateConfigForFile(configFile);</span>
            <span class="s2">if </span><span class="s1">(!completeConfig) </span><span class="s2">continue</span><span class="s1">;</span>
            <span class="s2">const </span><span class="s1">plugins = completeConfig.plugins;</span>
            <span class="s2">const </span><span class="s1">hasNextPlugin = </span><span class="s3">// in ESLint &lt; 9, `plugins` value is string[]</span>
            <span class="s1">Array.isArray(plugins) ? plugins.includes(</span><span class="s0">'@next/next'</span><span class="s1">) : </span><span class="s0">'@next/next' </span><span class="s2">in </span><span class="s1">plugins;</span>
            <span class="s2">if </span><span class="s1">(hasNextPlugin) {</span>
                <span class="s1">nextEslintPluginIsEnabled = </span><span class="s2">true</span><span class="s1">;</span>
                <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">[name, [severity]] of Object.entries(completeConfig.rules)){</span>
                    <span class="s2">if </span><span class="s1">(!name.startsWith(</span><span class="s0">'@next/next/'</span><span class="s1">)) {</span>
                        <span class="s2">continue</span><span class="s1">;</span>
                    <span class="s1">}</span>
                    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">severity === </span><span class="s0">'number' </span><span class="s1">&amp;&amp; severity &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; severity &lt; VALID_SEVERITY.length) {</span>
                        <span class="s1">nextRulesEnabled.set(name, VALID_SEVERITY[severity]);</span>
                    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">severity === </span><span class="s0">'string' </span><span class="s1">&amp;&amp; isValidSeverity(severity)) {</span>
                        <span class="s1">nextRulesEnabled.set(name, severity);</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
                <span class="s2">break</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">pagesDir = (</span><span class="s4">0</span><span class="s1">, _findpagesdir.findPagesDir)(baseDir).pagesDir;</span>
        <span class="s2">const </span><span class="s1">pagesDirRules = pagesDir ? [</span>
            <span class="s0">'@next/next/no-html-link-for-pages'</span>
        <span class="s1">] : [];</span>
        <span class="s2">if </span><span class="s1">(nextEslintPluginIsEnabled) {</span>
            <span class="s2">let </span><span class="s1">updatedPagesDir = </span><span class="s2">false</span><span class="s1">;</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">rule of pagesDirRules){</span>
                <span class="s2">var </span><span class="s1">_options_baseConfig_rules, _options_baseConfig_rules1;</span>
                <span class="s2">if </span><span class="s1">(!((_options_baseConfig_rules = options.baseConfig.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: _options_baseConfig_rules[rule]) &amp;&amp; !((_options_baseConfig_rules1 = options.baseConfig.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: _options_baseConfig_rules1[rule.replace(</span><span class="s0">'@next/next'</span><span class="s1">, </span><span class="s0">'@next/babel-plugin-next'</span><span class="s1">)])) {</span>
                    <span class="s2">if </span><span class="s1">(!options.baseConfig.rules) {</span>
                        <span class="s1">options.baseConfig.rules = {};</span>
                    <span class="s1">}</span>
                    <span class="s1">options.baseConfig.rules[rule] = [</span>
                        <span class="s4">1</span><span class="s1">,</span>
                        <span class="s1">pagesDir</span>
                    <span class="s1">];</span>
                    <span class="s1">updatedPagesDir = </span><span class="s2">true</span><span class="s1">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s2">if </span><span class="s1">(updatedPagesDir) {</span>
                <span class="s1">eslint = </span><span class="s2">new </span><span class="s1">ESLint(options);</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s1">_log.warn(</span><span class="s0">''</span><span class="s1">);</span>
            <span class="s1">_log.warn(</span><span class="s0">'The Next.js plugin was not detected in your ESLint configuration. See https://nextjs.org/docs/app/api-reference/config/eslint#migrating-existing-config'</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">lintStart = process.hrtime();</span>
        <span class="s2">let </span><span class="s1">results = </span><span class="s2">await </span><span class="s1">eslint.lintFiles(lintDirs);</span>
        <span class="s2">let </span><span class="s1">selectedFormatter = </span><span class="s2">null</span><span class="s1">;</span>
        <span class="s2">if </span><span class="s1">(options.fix) </span><span class="s2">await </span><span class="s1">ESLint.outputFixes(results);</span>
        <span class="s2">if </span><span class="s1">(reportErrorsOnly) results = </span><span class="s2">await </span><span class="s1">ESLint.getErrorResults(results) </span><span class="s3">// Only return errors if --quiet flag is used</span>
        <span class="s1">;</span>
        <span class="s2">if </span><span class="s1">(formatter) selectedFormatter = </span><span class="s2">await </span><span class="s1">eslint.loadFormatter(formatter);</span>
        <span class="s2">const </span><span class="s1">formattedResult = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _customFormatter.formatResults)(baseDir, results, selectedFormatter == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: selectedFormatter.format);</span>
        <span class="s2">const </span><span class="s1">lintEnd = process.hrtime(lintStart);</span>
        <span class="s2">const </span><span class="s1">totalWarnings = results.reduce((sum, file)=&gt;sum + file.warningCount, </span><span class="s4">0</span><span class="s1">);</span>
        <span class="s2">if </span><span class="s1">(outputFile) </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _writeOutputFile.writeOutputFile)(outputFile, formattedResult.output);</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">output: formattedResult.outputWithMessages,</span>
            <span class="s1">isError: ((_ESLint_getErrorResults = ESLint.getErrorResults(results)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s4">0 </span><span class="s1">: _ESLint_getErrorResults.length) &gt; </span><span class="s4">0 </span><span class="s1">|| maxWarnings &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; totalWarnings &gt; maxWarnings,</span>
            <span class="s1">eventInfo: {</span>
                <span class="s1">durationInSeconds: lintEnd[</span><span class="s4">0</span><span class="s1">],</span>
                <span class="s1">eslintVersion: eslintVersion,</span>
                <span class="s1">lintedFilesCount: results.length,</span>
                <span class="s1">lintFix: !!options.fix,</span>
                <span class="s1">nextEslintPluginVersion: nextEslintPluginIsEnabled &amp;&amp; deps.resolved.has(</span><span class="s0">'eslint-config-next'</span><span class="s1">) ? require(_path.default.join(_path.default.dirname(deps.resolved.get(</span><span class="s0">'eslint-config-next'</span><span class="s1">)), </span><span class="s0">'package.json'</span><span class="s1">)).version : </span><span class="s2">null</span><span class="s1">,</span>
                <span class="s1">nextEslintPluginErrorsCount: formattedResult.totalNextPluginErrorCount,</span>
                <span class="s1">nextEslintPluginWarningsCount: formattedResult.totalNextPluginWarningCount,</span>
                <span class="s1">nextRulesEnabled: Object.fromEntries(nextRulesEnabled)</span>
            <span class="s1">}</span>
        <span class="s1">};</span>
    <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
        <span class="s2">if </span><span class="s1">(lintDuringBuild) {</span>
            <span class="s1">_log.error(</span><span class="s0">`ESLint: </span><span class="s1">${(</span><span class="s4">0</span><span class="s1">, _iserror.default)(err) &amp;&amp; err.message ? err.message.replace(</span><span class="s5">/\n/g</span><span class="s1">, </span><span class="s0">' '</span><span class="s1">) : err}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s2">return null</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s2">throw </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _iserror.getProperError)(err);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">runLintCheck(baseDir, lintDirs, opts) {</span>
    <span class="s2">const </span><span class="s1">{ lintDuringBuild = </span><span class="s2">false</span><span class="s1">, eslintOptions = </span><span class="s2">null</span><span class="s1">, reportErrorsOnly = </span><span class="s2">false</span><span class="s1">, maxWarnings = -</span><span class="s4">1</span><span class="s1">, formatter = </span><span class="s2">null</span><span class="s1">, outputFile = </span><span class="s2">null</span><span class="s1">, strict = </span><span class="s2">false </span><span class="s1">} = opts;</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s3">// Find user's .eslintrc file</span>
        <span class="s3">// See: https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-file-formats</span>
        <span class="s2">const </span><span class="s1">eslintrcFile = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _findup.default)([</span>
            <span class="s3">// eslint v9</span>
            <span class="s0">'eslint.config.js'</span><span class="s1">,</span>
            <span class="s0">'eslint.config.mjs'</span><span class="s1">,</span>
            <span class="s0">'eslint.config.cjs'</span><span class="s1">,</span>
            <span class="s3">// TS extensions require to install a separate package `jiti`.</span>
            <span class="s3">// https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files</span>
            <span class="s0">'eslint.config.ts'</span><span class="s1">,</span>
            <span class="s0">'eslint.config.mts'</span><span class="s1">,</span>
            <span class="s0">'eslint.config.cts'</span><span class="s1">,</span>
            <span class="s3">// eslint &lt;= v8</span>
            <span class="s0">'.eslintrc.js'</span><span class="s1">,</span>
            <span class="s0">'.eslintrc.cjs'</span><span class="s1">,</span>
            <span class="s0">'.eslintrc.yaml'</span><span class="s1">,</span>
            <span class="s0">'.eslintrc.yml'</span><span class="s1">,</span>
            <span class="s0">'.eslintrc.json'</span><span class="s1">,</span>
            <span class="s0">'.eslintrc'</span>
        <span class="s1">], {</span>
            <span class="s1">cwd: baseDir</span>
        <span class="s1">}) ?? </span><span class="s2">null</span><span class="s1">;</span>
        <span class="s2">const </span><span class="s1">pkgJsonPath = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _findup.default)(</span><span class="s0">'package.json'</span><span class="s1">, {</span>
            <span class="s1">cwd: baseDir</span>
        <span class="s1">}) ?? </span><span class="s2">null</span><span class="s1">;</span>
        <span class="s2">let </span><span class="s1">packageJsonConfig = </span><span class="s2">null</span><span class="s1">;</span>
        <span class="s2">if </span><span class="s1">(pkgJsonPath) {</span>
            <span class="s2">const </span><span class="s1">pkgJsonContent = </span><span class="s2">await </span><span class="s1">_fs.promises.readFile(pkgJsonPath, {</span>
                <span class="s1">encoding: </span><span class="s0">'utf8'</span>
            <span class="s1">});</span>
            <span class="s1">packageJsonConfig = _commentjson.parse(pkgJsonContent);</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">config = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _hasEslintConfiguration.hasEslintConfiguration)(eslintrcFile, packageJsonConfig);</span>
        <span class="s2">let </span><span class="s1">deps;</span>
        <span class="s2">if </span><span class="s1">(config.exists) {</span>
            <span class="s3">// Run if ESLint config exists</span>
            <span class="s2">return await </span><span class="s1">lint(baseDir, lintDirs, eslintrcFile, pkgJsonPath, {</span>
                <span class="s1">lintDuringBuild,</span>
                <span class="s1">eslintOptions,</span>
                <span class="s1">reportErrorsOnly,</span>
                <span class="s1">maxWarnings,</span>
                <span class="s1">formatter,</span>
                <span class="s1">outputFile</span>
            <span class="s1">});</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s3">// Display warning if no ESLint configuration is present inside</span>
            <span class="s3">// config file during &quot;next build&quot;, no warning is shown when</span>
            <span class="s3">// no eslintrc file is present</span>
            <span class="s2">if </span><span class="s1">(lintDuringBuild) {</span>
                <span class="s2">if </span><span class="s1">(config.emptyPkgJsonConfig || config.emptyEslintrc) {</span>
                    <span class="s1">_log.warn(</span><span class="s0">`No ESLint configuration detected. Run </span><span class="s1">${(</span><span class="s4">0</span><span class="s1">, _picocolors.bold)((</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)(</span><span class="s0">'next lint'</span><span class="s1">))} </span><span class="s0">to begin setup`</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s2">return null</span><span class="s1">;</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s3">// Ask user what config they would like to start with for first time &quot;next lint&quot; setup</span>
                <span class="s2">const </span><span class="s1">{ config: selectedConfig } = strict ? </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _getESLintPromptValues.getESLintStrictValue)(baseDir) : </span><span class="s2">await </span><span class="s1">cliPrompt(baseDir);</span>
                <span class="s2">if </span><span class="s1">(selectedConfig == </span><span class="s2">null</span><span class="s1">) {</span>
                    <span class="s3">// Show a warning if no option is selected in prompt</span>
                    <span class="s1">_log.warn(</span><span class="s0">'If you set up ESLint yourself, we recommend adding the Next.js ESLint plugin. See https://nextjs.org/docs/app/api-reference/config/eslint#migrating-existing-config'</span><span class="s1">);</span>
                    <span class="s2">return null</span><span class="s1">;</span>
                <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                    <span class="s3">// Check if necessary deps installed, and install any that are missing</span>
                    <span class="s1">deps = </span><span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _hasnecessarydependencies.hasNecessaryDependencies)(baseDir, requiredPackages);</span>
                    <span class="s2">if </span><span class="s1">(deps.missing.length &gt; </span><span class="s4">0</span><span class="s1">) {</span>
                        <span class="s1">deps.missing.forEach((dep)=&gt;{</span>
                            <span class="s2">if </span><span class="s1">(dep.pkg === </span><span class="s0">'eslint'</span><span class="s1">) {</span>
                                <span class="s3">// pin to v9 to avoid breaking changes</span>
                                <span class="s1">dep.pkg = </span><span class="s0">'eslint@^9'</span><span class="s1">;</span>
                            <span class="s1">}</span>
                        <span class="s1">});</span>
                        <span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _installdependencies.installDependencies)(baseDir, deps.missing, </span><span class="s2">true</span><span class="s1">);</span>
                    <span class="s1">}</span>
                    <span class="s3">// Write default ESLint config.</span>
                    <span class="s3">// Check for /pages and src/pages is to make sure this happens in Next.js folder</span>
                    <span class="s2">if </span><span class="s1">([</span>
                        <span class="s0">'app'</span><span class="s1">,</span>
                        <span class="s0">'src/app'</span><span class="s1">,</span>
                        <span class="s0">'pages'</span><span class="s1">,</span>
                        <span class="s0">'src/pages'</span>
                    <span class="s1">].some((dir)=&gt;(</span><span class="s4">0</span><span class="s1">, _fs.existsSync)(_path.default.join(baseDir, dir)))) {</span>
                        <span class="s2">await </span><span class="s1">(</span><span class="s4">0</span><span class="s1">, _writeDefaultConfig.writeDefaultConfig)(baseDir, config, selectedConfig, eslintrcFile, pkgJsonPath, packageJsonConfig);</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
                <span class="s1">_log.ready(</span><span class="s0">`ESLint has successfully been configured. Run </span><span class="s1">${(</span><span class="s4">0</span><span class="s1">, _picocolors.bold)((</span><span class="s4">0</span><span class="s1">, _picocolors.cyan)(</span><span class="s0">'next lint'</span><span class="s1">))} </span><span class="s0">again to view warnings and errors.`</span><span class="s1">);</span>
                <span class="s2">return null</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
        <span class="s2">throw </span><span class="s1">err;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">//# sourceMappingURL=runLintCheck.js.map</span></pre>
</body>
</html>