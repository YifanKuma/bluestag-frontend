<html>
<head>
<title>next-dev-server.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
next-dev-server.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/dev/next-dev-server.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { FindComponentsResult, NodeRequestHandler } from '../next-server'</span><span class="s3">\n</span><span class="s1">import type { LoadComponentsReturnType } from '../load-components'</span><span class="s3">\n</span><span class="s1">import type { Options as ServerOptions } from '../next-server'</span><span class="s3">\n</span><span class="s1">import type { Params } from '../request/params'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrl } from '../../shared/lib/router/utils/parse-url'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { UrlWithParsedQuery } from 'url'</span><span class="s3">\n</span><span class="s1">import type { MiddlewareRoutingItem } from '../base-server'</span><span class="s3">\n</span><span class="s1">import type { RouteDefinition } from '../route-definitions/route-definition'</span><span class="s3">\n</span><span class="s1">import type { RouteMatcherManager } from '../route-matcher-managers/route-matcher-manager'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">addRequestMeta,</span><span class="s3">\n  </span><span class="s1">getRequestMeta,</span><span class="s3">\n  </span><span class="s1">type NextParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">type NextUrlWithParsedQuery,</span><span class="s3">\n</span><span class="s1">} from '../request-meta'</span><span class="s3">\n</span><span class="s1">import type { DevBundlerService } from '../lib/dev-bundler-service'</span><span class="s3">\n</span><span class="s1">import type { IncrementalCache } from '../lib/incremental-cache'</span><span class="s3">\n</span><span class="s1">import type { UnwrapPromise } from '../../lib/coalesced-function'</span><span class="s3">\n</span><span class="s1">import type { NodeNextResponse, NodeNextRequest } from '../base-http/node'</span><span class="s3">\n</span><span class="s1">import type { RouteEnsurer } from '../route-matcher-managers/dev-route-matcher-manager'</span><span class="s3">\n</span><span class="s1">import type { PagesManifest } from '../../build/webpack/plugins/pages-manifest-plugin'</span><span class="s3">\n\n</span><span class="s1">import * as React from 'react'</span><span class="s3">\n</span><span class="s1">import fs from 'fs'</span><span class="s3">\n</span><span class="s1">import { Worker } from 'next/dist/compiled/jest-worker'</span><span class="s3">\n</span><span class="s1">import { join as pathJoin } from 'path'</span><span class="s3">\n</span><span class="s1">import { ampValidation } from '../../build/output'</span><span class="s3">\n</span><span class="s1">import { PUBLIC_DIR_MIDDLEWARE_CONFLICT } from '../../lib/constants'</span><span class="s3">\n</span><span class="s1">import { findPagesDir } from '../../lib/find-pages-dir'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">PHASE_DEVELOPMENT_SERVER,</span><span class="s3">\n  </span><span class="s1">PAGES_MANIFEST,</span><span class="s3">\n  </span><span class="s1">APP_PATHS_MANIFEST,</span><span class="s3">\n  </span><span class="s1">COMPILER_NAMES,</span><span class="s3">\n  </span><span class="s1">PRERENDER_MANIFEST,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import Server, { WrappedBuildError } from '../next-server'</span><span class="s3">\n</span><span class="s1">import { normalizePagePath } from '../../shared/lib/page-path/normalize-page-path'</span><span class="s3">\n</span><span class="s1">import { pathHasPrefix } from '../../shared/lib/router/utils/path-has-prefix'</span><span class="s3">\n</span><span class="s1">import { removePathPrefix } from '../../shared/lib/router/utils/remove-path-prefix'</span><span class="s3">\n</span><span class="s1">import { Telemetry } from '../../telemetry/storage'</span><span class="s3">\n</span><span class="s1">import { type Span, setGlobal, trace } from '../../trace'</span><span class="s3">\n</span><span class="s1">import { findPageFile } from '../lib/find-page-file'</span><span class="s3">\n</span><span class="s1">import { getFormattedNodeOptionsWithoutInspect } from '../lib/utils'</span><span class="s3">\n</span><span class="s1">import { withCoalescedInvoke } from '../../lib/coalesced-function'</span><span class="s3">\n</span><span class="s1">import { loadDefaultErrorComponents } from '../load-default-error-components'</span><span class="s3">\n</span><span class="s1">import { DecodeError, MiddlewareNotFoundError } from '../../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import isError, { getProperError } from '../../lib/is-error'</span><span class="s3">\n</span><span class="s1">import { isMiddlewareFile } from '../../build/utils'</span><span class="s3">\n</span><span class="s1">import { formatServerError } from '../../lib/format-server-error'</span><span class="s3">\n</span><span class="s1">import { DevRouteMatcherManager } from '../route-matcher-managers/dev-route-matcher-manager'</span><span class="s3">\n</span><span class="s1">import { DevPagesRouteMatcherProvider } from '../route-matcher-providers/dev/dev-pages-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import { DevPagesAPIRouteMatcherProvider } from '../route-matcher-providers/dev/dev-pages-api-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import { DevAppPageRouteMatcherProvider } from '../route-matcher-providers/dev/dev-app-page-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import { DevAppRouteRouteMatcherProvider } from '../route-matcher-providers/dev/dev-app-route-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import { NodeManifestLoader } from '../route-matcher-providers/helpers/manifest-loaders/node-manifest-loader'</span><span class="s3">\n</span><span class="s1">import { BatchedFileReader } from '../route-matcher-providers/dev/helpers/file-reader/batched-file-reader'</span><span class="s3">\n</span><span class="s1">import { DefaultFileReader } from '../route-matcher-providers/dev/helpers/file-reader/default-file-reader'</span><span class="s3">\n</span><span class="s1">import { LRUCache } from '../lib/lru-cache'</span><span class="s3">\n</span><span class="s1">import { getMiddlewareRouteMatcher } from '../../shared/lib/router/utils/middleware-route-matcher'</span><span class="s3">\n</span><span class="s1">import { DetachedPromise } from '../../lib/detached-promise'</span><span class="s3">\n</span><span class="s1">import { isPostpone } from '../lib/router-utils/is-postpone'</span><span class="s3">\n</span><span class="s1">import { generateInterceptionRoutesRewrites } from '../../lib/generate-interception-routes-rewrites'</span><span class="s3">\n</span><span class="s1">import { buildCustomRoute } from '../../lib/build-custom-route'</span><span class="s3">\n</span><span class="s1">import { decorateServerError } from '../../shared/lib/error-source'</span><span class="s3">\n</span><span class="s1">import type { ServerOnInstrumentationRequestError } from '../app-render/types'</span><span class="s3">\n</span><span class="s1">import type { ServerComponentsHmrCache } from '../response-cache'</span><span class="s3">\n</span><span class="s1">import { logRequests } from './log-requests'</span><span class="s3">\n</span><span class="s1">import { FallbackMode, fallbackModeToFallbackField } from '../../lib/fallback'</span><span class="s3">\n</span><span class="s1">import type { PagesDevOverlayBridgeType } from '../../next-devtools/userspace/pages/pages-dev-overlay-setup'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ensureInstrumentationRegistered,</span><span class="s3">\n  </span><span class="s1">getInstrumentationModule,</span><span class="s3">\n</span><span class="s1">} from '../lib/router-utils/instrumentation-globals.external'</span><span class="s3">\n</span><span class="s1">import type { PrerenderManifest } from '../../build'</span><span class="s3">\n</span><span class="s1">import { getRouteRegex } from '../../shared/lib/router/utils/route-regex'</span><span class="s3">\n</span><span class="s1">import type { PrerenderedRoute } from '../../build/static-paths/types'</span><span class="s3">\n\n</span><span class="s1">// Load ReactDevOverlay only when needed</span><span class="s3">\n</span><span class="s1">let PagesDevOverlayBridgeImpl: PagesDevOverlayBridgeType</span><span class="s3">\n</span><span class="s1">const ReactDevOverlay: PagesDevOverlayBridgeType = (props) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (PagesDevOverlayBridgeImpl === undefined) {</span><span class="s3">\n    </span><span class="s1">PagesDevOverlayBridgeImpl = (</span><span class="s3">\n      </span><span class="s1">require('../../next-devtools/userspace/pages/pages-dev-overlay-setup') as typeof import('../../next-devtools/userspace/pages/pages-dev-overlay-setup')</span><span class="s3">\n    </span><span class="s1">).PagesDevOverlayBridge</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return React.createElement(PagesDevOverlayBridgeImpl, props)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface Options extends ServerOptions {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Tells of Next.js is running from the `next dev` command</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isNextDevCommand?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Interface to the development bundler.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">bundlerService: DevBundlerService</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Trace span for server startup.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">startServerSpan: Span</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default class DevServer extends Server {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The promise that resolves when the server is ready. When this is unset</span><span class="s3">\n   </span><span class="s1">* the server is ready.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private ready? = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n  </span><span class="s1">protected sortedRoutes?: string[]</span><span class="s3">\n  </span><span class="s1">private pagesDir?: string</span><span class="s3">\n  </span><span class="s1">private appDir?: string</span><span class="s3">\n  </span><span class="s1">private actualMiddlewareFile?: string</span><span class="s3">\n  </span><span class="s1">private actualInstrumentationHookFile?: string</span><span class="s3">\n  </span><span class="s1">private middleware?: MiddlewareRoutingItem</span><span class="s3">\n  </span><span class="s1">private readonly bundlerService: DevBundlerService</span><span class="s3">\n  </span><span class="s1">private staticPathsCache: LRUCache&lt;</span><span class="s3">\n    </span><span class="s1">UnwrapPromise&lt;ReturnType&lt;DevServer['getStaticPaths']&gt;&gt;</span><span class="s3">\n  </span><span class="s1">&gt;</span><span class="s3">\n  </span><span class="s1">private startServerSpan: Span</span><span class="s3">\n  </span><span class="s1">private readonly serverComponentsHmrCache:</span><span class="s3">\n    </span><span class="s1">| ServerComponentsHmrCache</span><span class="s3">\n    </span><span class="s1">| undefined</span><span class="s3">\n\n  </span><span class="s1">protected staticPathsWorker?: { [key: string]: any } &amp; {</span><span class="s3">\n    </span><span class="s1">loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private getStaticPathsWorker(): { [key: string]: any } &amp; {</span><span class="s3">\n    </span><span class="s1">loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths</span><span class="s3">\n  </span><span class="s1">} {</span><span class="s3">\n    </span><span class="s1">const worker = new Worker(require.resolve('./static-paths-worker'), {</span><span class="s3">\n      </span><span class="s1">maxRetries: 1,</span><span class="s3">\n      </span><span class="s1">// For dev server, it's not necessary to spin up too many workers as long as you are not doing a load test.</span><span class="s3">\n      </span><span class="s1">// This helps reusing the memory a lot.</span><span class="s3">\n      </span><span class="s1">numWorkers: 1,</span><span class="s3">\n      </span><span class="s1">enableWorkerThreads: this.nextConfig.experimental.workerThreads,</span><span class="s3">\n      </span><span class="s1">forkOptions: {</span><span class="s3">\n        </span><span class="s1">env: {</span><span class="s3">\n          </span><span class="s1">...process.env,</span><span class="s3">\n          </span><span class="s1">// discard --inspect/--inspect-brk flags from process.env.NODE_OPTIONS. Otherwise multiple Node.js debuggers</span><span class="s3">\n          </span><span class="s1">// would be started if user launch Next.js in debugging mode. The number of debuggers is linked to</span><span class="s3">\n          </span><span class="s1">// the number of workers Next.js tries to launch. The only worker users are interested in debugging</span><span class="s3">\n          </span><span class="s1">// is the main Next.js one</span><span class="s3">\n          </span><span class="s1">NODE_OPTIONS: getFormattedNodeOptionsWithoutInspect(),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">}) as Worker &amp; {</span><span class="s3">\n      </span><span class="s1">loadStaticPaths: typeof import('./static-paths-worker').loadStaticPaths</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">worker.getStdout().pipe(process.stdout)</span><span class="s3">\n    </span><span class="s1">worker.getStderr().pipe(process.stderr)</span><span class="s3">\n\n    </span><span class="s1">return worker</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">constructor(options: Options) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">// Increase the number of stack frames on the server</span><span class="s3">\n      </span><span class="s1">Error.stackTraceLimit = 50</span><span class="s3">\n    </span><span class="s1">} catch {}</span><span class="s3">\n    </span><span class="s1">super({ ...options, dev: true })</span><span class="s3">\n    </span><span class="s1">this.bundlerService = options.bundlerService</span><span class="s3">\n    </span><span class="s1">this.startServerSpan =</span><span class="s3">\n      </span><span class="s1">options.startServerSpan ?? trace('start-next-dev-server')</span><span class="s3">\n    </span><span class="s1">this.renderOpts.dev = true</span><span class="s3">\n    </span><span class="s1">this.renderOpts.ErrorDebug = ReactDevOverlay</span><span class="s3">\n    </span><span class="s1">this.staticPathsCache = new LRUCache(</span><span class="s3">\n      </span><span class="s1">// 5MB</span><span class="s3">\n      </span><span class="s1">5 * 1024 * 1024,</span><span class="s3">\n      </span><span class="s1">function length(value) {</span><span class="s3">\n        </span><span class="s1">return JSON.stringify(value.staticPaths)?.length ?? 0</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.renderOpts.ampSkipValidation =</span><span class="s3">\n      </span><span class="s1">this.nextConfig.experimental?.amp?.skipValidation ?? false</span><span class="s3">\n    </span><span class="s1">this.renderOpts.ampValidator = async (html: string, pathname: string) =&gt; {</span><span class="s3">\n      </span><span class="s1">const { getAmpValidatorInstance, getBundledAmpValidatorFilepath } =</span><span class="s3">\n        </span><span class="s1">require('../../export/helpers/get-amp-html-validator') as typeof import('../../export/helpers/get-amp-html-validator')</span><span class="s3">\n\n      </span><span class="s1">const validatorPath =</span><span class="s3">\n        </span><span class="s1">this.nextConfig.experimental?.amp?.validator ||</span><span class="s3">\n        </span><span class="s1">getBundledAmpValidatorFilepath()</span><span class="s3">\n\n      </span><span class="s1">const validator = await getAmpValidatorInstance(validatorPath)</span><span class="s3">\n\n      </span><span class="s1">const result = validator.validateString(html)</span><span class="s3">\n      </span><span class="s1">ampValidation(</span><span class="s3">\n        </span><span class="s1">pathname,</span><span class="s3">\n        </span><span class="s1">result.errors</span><span class="s3">\n          </span><span class="s1">.filter((error) =&gt; {</span><span class="s3">\n            </span><span class="s1">if (error.severity === 'ERROR') {</span><span class="s3">\n              </span><span class="s1">// Unclear yet if these actually prevent the page from being indexed by the AMP cache.</span><span class="s3">\n              </span><span class="s1">// These are coming from React so all we can do is ignore them for now.</span><span class="s3">\n\n              </span><span class="s1">// &lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">expect</span><span class="s3">\&quot; </span><span class="s1">blocking=</span><span class="s3">\&quot;</span><span class="s1">render</span><span class="s3">\&quot; </span><span class="s1">/&gt;</span><span class="s3">\n              </span><span class="s1">// https://github.com/ampproject/amphtml/issues/40279</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">error.code === 'DISALLOWED_ATTR' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[0] === 'blocking' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[1] === 'link'</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">return false</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">// &lt;template&gt; without type</span><span class="s3">\n              </span><span class="s1">// https://github.com/ampproject/amphtml/issues/40280</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">error.code === 'MANDATORY_ATTR_MISSING' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[0] === 'type' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[1] === 'template'</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">return false</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">// &lt;template&gt; without type</span><span class="s3">\n              </span><span class="s1">// https://github.com/ampproject/amphtml/issues/40280</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">error.code === 'MISSING_REQUIRED_EXTENSION' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[0] === 'template' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">error.params[1] === 'amp-mustache'</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">return false</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">return true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">return false</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">.filter((e) =&gt; this._filterAmpDevelopmentScript(html, e)),</span><span class="s3">\n        </span><span class="s1">result.errors.filter((e) =&gt; e.severity !== 'ERROR')</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { pagesDir, appDir } = findPagesDir(this.dir)</span><span class="s3">\n    </span><span class="s1">this.pagesDir = pagesDir</span><span class="s3">\n    </span><span class="s1">this.appDir = appDir</span><span class="s3">\n\n    </span><span class="s1">if (this.nextConfig.experimental.serverComponentsHmrCache) {</span><span class="s3">\n      </span><span class="s1">this.serverComponentsHmrCache = new LRUCache(</span><span class="s3">\n        </span><span class="s1">this.nextConfig.cacheMaxMemorySize,</span><span class="s3">\n        </span><span class="s1">function length(value) {</span><span class="s3">\n          </span><span class="s1">return JSON.stringify(value).length</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected override getServerComponentsHmrCache() {</span><span class="s3">\n    </span><span class="s1">return this.serverComponentsHmrCache</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getRouteMatchers(): RouteMatcherManager {</span><span class="s3">\n    </span><span class="s1">const { pagesDir, appDir } = findPagesDir(this.dir)</span><span class="s3">\n\n    </span><span class="s1">const ensurer: RouteEnsurer = {</span><span class="s3">\n      </span><span class="s1">ensure: async (match, pathname) =&gt; {</span><span class="s3">\n        </span><span class="s1">await this.ensurePage({</span><span class="s3">\n          </span><span class="s1">definition: match.definition,</span><span class="s3">\n          </span><span class="s1">page: match.definition.page,</span><span class="s3">\n          </span><span class="s1">clientOnly: false,</span><span class="s3">\n          </span><span class="s1">url: pathname,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const matchers = new DevRouteMatcherManager(</span><span class="s3">\n      </span><span class="s1">super.getRouteMatchers(),</span><span class="s3">\n      </span><span class="s1">ensurer,</span><span class="s3">\n      </span><span class="s1">this.dir</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const extensions = this.nextConfig.pageExtensions</span><span class="s3">\n    </span><span class="s1">const extensionsExpression = new RegExp(`</span><span class="s3">\\\\</span><span class="s1">.(?:${extensions.join('|')})$`)</span><span class="s3">\n\n    </span><span class="s1">// If the pages directory is available, then configure those matchers.</span><span class="s3">\n    </span><span class="s1">if (pagesDir) {</span><span class="s3">\n      </span><span class="s1">const fileReader = new BatchedFileReader(</span><span class="s3">\n        </span><span class="s1">new DefaultFileReader({</span><span class="s3">\n          </span><span class="s1">// Only allow files that have the correct extensions.</span><span class="s3">\n          </span><span class="s1">pathnameFilter: (pathname) =&gt; extensionsExpression.test(pathname),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">matchers.push(</span><span class="s3">\n        </span><span class="s1">new DevPagesRouteMatcherProvider(</span><span class="s3">\n          </span><span class="s1">pagesDir,</span><span class="s3">\n          </span><span class="s1">extensions,</span><span class="s3">\n          </span><span class="s1">fileReader,</span><span class="s3">\n          </span><span class="s1">this.localeNormalizer</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">matchers.push(</span><span class="s3">\n        </span><span class="s1">new DevPagesAPIRouteMatcherProvider(</span><span class="s3">\n          </span><span class="s1">pagesDir,</span><span class="s3">\n          </span><span class="s1">extensions,</span><span class="s3">\n          </span><span class="s1">fileReader,</span><span class="s3">\n          </span><span class="s1">this.localeNormalizer</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (appDir) {</span><span class="s3">\n      </span><span class="s1">// We create a new file reader for the app directory because we don't want</span><span class="s3">\n      </span><span class="s1">// to include any folders or files starting with an underscore. This will</span><span class="s3">\n      </span><span class="s1">// prevent the reader from wasting time reading files that we know we</span><span class="s3">\n      </span><span class="s1">// don't care about.</span><span class="s3">\n      </span><span class="s1">const fileReader = new BatchedFileReader(</span><span class="s3">\n        </span><span class="s1">new DefaultFileReader({</span><span class="s3">\n          </span><span class="s1">// Ignore any directory prefixed with an underscore.</span><span class="s3">\n          </span><span class="s1">ignorePartFilter: (part) =&gt; part.startsWith('_'),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">// TODO: Improve passing of </span><span class="s3">\&quot;</span><span class="s1">is running with Turbopack</span><span class="s3">\&quot;\n      </span><span class="s1">const isTurbopack = !!process.env.TURBOPACK</span><span class="s3">\n      </span><span class="s1">matchers.push(</span><span class="s3">\n        </span><span class="s1">new DevAppPageRouteMatcherProvider(</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">extensions,</span><span class="s3">\n          </span><span class="s1">fileReader,</span><span class="s3">\n          </span><span class="s1">isTurbopack</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">matchers.push(</span><span class="s3">\n        </span><span class="s1">new DevAppRouteRouteMatcherProvider(</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">extensions,</span><span class="s3">\n          </span><span class="s1">fileReader,</span><span class="s3">\n          </span><span class="s1">isTurbopack</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return matchers</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getBuildId(): string {</span><span class="s3">\n    </span><span class="s1">return 'development'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async prepareImpl(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">setGlobal('distDir', this.distDir)</span><span class="s3">\n    </span><span class="s1">setGlobal('phase', PHASE_DEVELOPMENT_SERVER)</span><span class="s3">\n\n    </span><span class="s1">const telemetry = new Telemetry({ distDir: this.distDir })</span><span class="s3">\n\n    </span><span class="s1">await super.prepareImpl()</span><span class="s3">\n    </span><span class="s1">await this.matchers.reload()</span><span class="s3">\n\n    </span><span class="s1">this.ready?.resolve()</span><span class="s3">\n    </span><span class="s1">this.ready = undefined</span><span class="s3">\n\n    </span><span class="s1">// In dev, this needs to be called after prepare because the build entries won't be known in the constructor</span><span class="s3">\n    </span><span class="s1">this.interceptionRoutePatterns = this.getinterceptionRoutePatterns()</span><span class="s3">\n\n    </span><span class="s1">// This is required by the tracing subsystem.</span><span class="s3">\n    </span><span class="s1">setGlobal('appDir', this.appDir)</span><span class="s3">\n    </span><span class="s1">setGlobal('pagesDir', this.pagesDir)</span><span class="s3">\n    </span><span class="s1">setGlobal('telemetry', telemetry)</span><span class="s3">\n\n    </span><span class="s1">process.on('unhandledRejection', (reason) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (isPostpone(reason)) {</span><span class="s3">\n        </span><span class="s1">// React postpones that are unhandled might end up logged here but they're</span><span class="s3">\n        </span><span class="s1">// not really errors. They're just part of rendering.</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">this.logErrorWithOriginalStack(reason, 'unhandledRejection')</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">process.on('uncaughtException', (err) =&gt; {</span><span class="s3">\n      </span><span class="s1">this.logErrorWithOriginalStack(err, 'uncaughtException')</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async hasPage(pathname: string): Promise&lt;boolean&gt; {</span><span class="s3">\n    </span><span class="s1">let normalizedPath: string</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">normalizedPath = normalizePagePath(pathname)</span><span class="s3">\n    </span><span class="s1">} catch (err) {</span><span class="s3">\n      </span><span class="s1">console.error(err)</span><span class="s3">\n      </span><span class="s1">// if normalizing the page fails it means it isn't valid</span><span class="s3">\n      </span><span class="s1">// so it doesn't exist so don't throw and return false</span><span class="s3">\n      </span><span class="s1">// to ensure we return 404 instead of 500</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isMiddlewareFile(normalizedPath)) {</span><span class="s3">\n      </span><span class="s1">return findPageFile(</span><span class="s3">\n        </span><span class="s1">this.dir,</span><span class="s3">\n        </span><span class="s1">normalizedPath,</span><span class="s3">\n        </span><span class="s1">this.nextConfig.pageExtensions,</span><span class="s3">\n        </span><span class="s1">false</span><span class="s3">\n      </span><span class="s1">).then(Boolean)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let appFile: string | null = null</span><span class="s3">\n    </span><span class="s1">let pagesFile: string | null = null</span><span class="s3">\n\n    </span><span class="s1">if (this.appDir) {</span><span class="s3">\n      </span><span class="s1">appFile = await findPageFile(</span><span class="s3">\n        </span><span class="s1">this.appDir,</span><span class="s3">\n        </span><span class="s1">normalizedPath + '/page',</span><span class="s3">\n        </span><span class="s1">this.nextConfig.pageExtensions,</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (this.pagesDir) {</span><span class="s3">\n      </span><span class="s1">pagesFile = await findPageFile(</span><span class="s3">\n        </span><span class="s1">this.pagesDir,</span><span class="s3">\n        </span><span class="s1">normalizedPath,</span><span class="s3">\n        </span><span class="s1">this.nextConfig.pageExtensions,</span><span class="s3">\n        </span><span class="s1">false</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (appFile &amp;&amp; pagesFile) {</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return Boolean(appFile || pagesFile)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async runMiddleware(params: {</span><span class="s3">\n    </span><span class="s1">request: NodeNextRequest</span><span class="s3">\n    </span><span class="s1">response: NodeNextResponse</span><span class="s3">\n    </span><span class="s1">parsedUrl: ParsedUrl</span><span class="s3">\n    </span><span class="s1">parsed: UrlWithParsedQuery</span><span class="s3">\n    </span><span class="s1">middlewareList: MiddlewareRoutingItem[]</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">const result = await super.runMiddleware({</span><span class="s3">\n        </span><span class="s1">...params,</span><span class="s3">\n        </span><span class="s1">onWarning: (warn) =&gt; {</span><span class="s3">\n          </span><span class="s1">this.logErrorWithOriginalStack(warn, 'warning')</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">if ('finished' in result) {</span><span class="s3">\n        </span><span class="s1">return result</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">result.waitUntil.catch((error) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.logErrorWithOriginalStack(error, 'unhandledRejection')</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">return result</span><span class="s3">\n    </span><span class="s1">} catch (error) {</span><span class="s3">\n      </span><span class="s1">if (error instanceof DecodeError) {</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* We only log the error when it is not a MiddlewareNotFound error as</span><span class="s3">\n       </span><span class="s1">* in that case we should be already displaying a compilation error</span><span class="s3">\n       </span><span class="s1">* which is what makes the module not found.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">if (!(error instanceof MiddlewareNotFoundError)) {</span><span class="s3">\n        </span><span class="s1">this.logErrorWithOriginalStack(error)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const err = getProperError(error)</span><span class="s3">\n      </span><span class="s1">decorateServerError(err, COMPILER_NAMES.edgeServer)</span><span class="s3">\n      </span><span class="s1">const { request, response, parsedUrl } = params</span><span class="s3">\n\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* When there is a failure for an internal Next.js request from</span><span class="s3">\n       </span><span class="s1">* middleware we bypass the error without finishing the request</span><span class="s3">\n       </span><span class="s1">* so we can serve the required chunks to render the error.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">request.url.includes('/_next/static') ||</span><span class="s3">\n        </span><span class="s1">request.url.includes('/__nextjs_original-stack-frame') ||</span><span class="s3">\n        </span><span class="s1">request.url.includes('/__nextjs_source-map') ||</span><span class="s3">\n        </span><span class="s1">request.url.includes('/__nextjs_error_feedback')</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return { finished: false }</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">response.statusCode = 500</span><span class="s3">\n      </span><span class="s1">await this.renderError(err, request, response, parsedUrl.pathname)</span><span class="s3">\n      </span><span class="s1">return { finished: true }</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async runEdgeFunction(params: {</span><span class="s3">\n    </span><span class="s1">req: NodeNextRequest</span><span class="s3">\n    </span><span class="s1">res: NodeNextResponse</span><span class="s3">\n    </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n    </span><span class="s1">params: Params | undefined</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">appPaths: string[] | null</span><span class="s3">\n    </span><span class="s1">isAppPath: boolean</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">return super.runEdgeFunction({</span><span class="s3">\n        </span><span class="s1">...params,</span><span class="s3">\n        </span><span class="s1">onError: (err) =&gt; this.logErrorWithOriginalStack(err, 'app-dir'),</span><span class="s3">\n        </span><span class="s1">onWarning: (warn) =&gt; {</span><span class="s3">\n          </span><span class="s1">this.logErrorWithOriginalStack(warn, 'warning')</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">} catch (error) {</span><span class="s3">\n      </span><span class="s1">if (error instanceof DecodeError) {</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">this.logErrorWithOriginalStack(error, 'warning')</span><span class="s3">\n      </span><span class="s1">const err = getProperError(error)</span><span class="s3">\n      </span><span class="s1">const { req, res, page } = params</span><span class="s3">\n\n      </span><span class="s1">res.statusCode = 500</span><span class="s3">\n      </span><span class="s1">await this.renderError(err, req, res, page)</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getRequestHandler(): NodeRequestHandler {</span><span class="s3">\n    </span><span class="s1">const handler = super.getRequestHandler()</span><span class="s3">\n\n    </span><span class="s1">return (req, res, parsedUrl) =&gt; {</span><span class="s3">\n      </span><span class="s1">const request = this.normalizeReq(req)</span><span class="s3">\n      </span><span class="s1">const response = this.normalizeRes(res)</span><span class="s3">\n      </span><span class="s1">const loggingConfig = this.nextConfig.logging</span><span class="s3">\n\n      </span><span class="s1">if (loggingConfig !== false) {</span><span class="s3">\n        </span><span class="s1">const start = Date.now()</span><span class="s3">\n        </span><span class="s1">const isMiddlewareRequest = getRequestMeta(req, 'middlewareInvoke')</span><span class="s3">\n\n        </span><span class="s1">if (!isMiddlewareRequest) {</span><span class="s3">\n          </span><span class="s1">response.originalResponse.once('close', () =&gt; {</span><span class="s3">\n            </span><span class="s1">// NOTE: The route match is only attached to the request's meta data</span><span class="s3">\n            </span><span class="s1">// after the request handler is created, so we need to check it in the</span><span class="s3">\n            </span><span class="s1">// close handler and not before.</span><span class="s3">\n            </span><span class="s1">const routeMatch = getRequestMeta(req).match</span><span class="s3">\n\n            </span><span class="s1">if (!routeMatch) {</span><span class="s3">\n              </span><span class="s1">return</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">logRequests({</span><span class="s3">\n              </span><span class="s1">request,</span><span class="s3">\n              </span><span class="s1">response,</span><span class="s3">\n              </span><span class="s1">loggingConfig,</span><span class="s3">\n              </span><span class="s1">requestDurationInMs: Date.now() - start,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return handler(request, response, parsedUrl)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async handleRequest(</span><span class="s3">\n    </span><span class="s1">req: NodeNextRequest,</span><span class="s3">\n    </span><span class="s1">res: NodeNextResponse,</span><span class="s3">\n    </span><span class="s1">parsedUrl?: NextUrlWithParsedQuery</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const span = trace('handle-request', undefined, { url: req.url })</span><span class="s3">\n    </span><span class="s1">const result = await span.traceAsyncFn(async () =&gt; {</span><span class="s3">\n      </span><span class="s1">await this.ready?.promise</span><span class="s3">\n      </span><span class="s1">addRequestMeta(req, 'PagesErrorDebug', this.renderOpts.ErrorDebug)</span><span class="s3">\n      </span><span class="s1">return await super.handleRequest(req, res, parsedUrl)</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">const memoryUsage = process.memoryUsage()</span><span class="s3">\n    </span><span class="s1">span</span><span class="s3">\n      </span><span class="s1">.traceChild('memory-usage', {</span><span class="s3">\n        </span><span class="s1">url: req.url,</span><span class="s3">\n        </span><span class="s1">'memory.rss': String(memoryUsage.rss),</span><span class="s3">\n        </span><span class="s1">'memory.heapUsed': String(memoryUsage.heapUsed),</span><span class="s3">\n        </span><span class="s1">'memory.heapTotal': String(memoryUsage.heapTotal),</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">.stop()</span><span class="s3">\n    </span><span class="s1">return result</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async run(</span><span class="s3">\n    </span><span class="s1">req: NodeNextRequest,</span><span class="s3">\n    </span><span class="s1">res: NodeNextResponse,</span><span class="s3">\n    </span><span class="s1">parsedUrl: UrlWithParsedQuery</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">await this.ready?.promise</span><span class="s3">\n\n    </span><span class="s1">const { basePath } = this.nextConfig</span><span class="s3">\n    </span><span class="s1">let originalPathname: string | null = null</span><span class="s3">\n\n    </span><span class="s1">// TODO: see if we can remove this in the future</span><span class="s3">\n    </span><span class="s1">if (basePath &amp;&amp; pathHasPrefix(parsedUrl.pathname || '/', basePath)) {</span><span class="s3">\n      </span><span class="s1">// strip basePath before handling dev bundles</span><span class="s3">\n      </span><span class="s1">// If replace ends up replacing the full url it'll be `undefined`, meaning we have to default it to `/`</span><span class="s3">\n      </span><span class="s1">originalPathname = parsedUrl.pathname</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = removePathPrefix(parsedUrl.pathname || '/', basePath)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { pathname } = parsedUrl</span><span class="s3">\n\n    </span><span class="s1">if (pathname!.startsWith('/_next')) {</span><span class="s3">\n      </span><span class="s1">if (fs.existsSync(pathJoin(this.publicDir, '_next'))) {</span><span class="s3">\n        </span><span class="s1">throw new Error(PUBLIC_DIR_MIDDLEWARE_CONFLICT)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (originalPathname) {</span><span class="s3">\n      </span><span class="s1">// restore the path before continuing so that custom-routes can accurately determine</span><span class="s3">\n      </span><span class="s1">// if they should match against the basePath or not</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = originalPathname</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">return await super.run(req, res, parsedUrl)</span><span class="s3">\n    </span><span class="s1">} catch (error) {</span><span class="s3">\n      </span><span class="s1">const err = getProperError(error)</span><span class="s3">\n      </span><span class="s1">formatServerError(err)</span><span class="s3">\n      </span><span class="s1">this.logErrorWithOriginalStack(err)</span><span class="s3">\n      </span><span class="s1">if (!res.sent) {</span><span class="s3">\n        </span><span class="s1">res.statusCode = 500</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">return await this.renderError(err, req, res, pathname!, {</span><span class="s3">\n            </span><span class="s1">__NEXT_PAGE: (isError(err) &amp;&amp; err.page) || pathname || '',</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">} catch (internalErr) {</span><span class="s3">\n          </span><span class="s1">console.error(internalErr)</span><span class="s3">\n          </span><span class="s1">res.body('Internal Server Error').send()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected logErrorWithOriginalStack(</span><span class="s3">\n    </span><span class="s1">err?: unknown,</span><span class="s3">\n    </span><span class="s1">type?: 'unhandledRejection' | 'uncaughtException' | 'warning' | 'app-dir'</span><span class="s3">\n  </span><span class="s1">): void {</span><span class="s3">\n    </span><span class="s1">this.bundlerService.logErrorWithOriginalStack(err, type)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getPagesManifest(): PagesManifest | undefined {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">NodeManifestLoader.require(</span><span class="s3">\n        </span><span class="s1">pathJoin(this.serverDistDir, PAGES_MANIFEST)</span><span class="s3">\n      </span><span class="s1">) ?? undefined</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getAppPathsManifest(): PagesManifest | undefined {</span><span class="s3">\n    </span><span class="s1">if (!this.enabledDirectories.app) return undefined</span><span class="s3">\n\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">NodeManifestLoader.require(</span><span class="s3">\n        </span><span class="s1">pathJoin(this.serverDistDir, APP_PATHS_MANIFEST)</span><span class="s3">\n      </span><span class="s1">) ?? undefined</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getinterceptionRoutePatterns(): RegExp[] {</span><span class="s3">\n    </span><span class="s1">const rewrites = generateInterceptionRoutesRewrites(</span><span class="s3">\n      </span><span class="s1">Object.keys(this.appPathRoutes ?? {}),</span><span class="s3">\n      </span><span class="s1">this.nextConfig.basePath</span><span class="s3">\n    </span><span class="s1">).map((route) =&gt; new RegExp(buildCustomRoute('rewrite', route).regex))</span><span class="s3">\n\n    </span><span class="s1">if (this.nextConfig.output === 'export' &amp;&amp; rewrites.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">Log.error(</span><span class="s3">\n        </span><span class="s1">'Intercepting routes are not supported with static export.</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/app/building-your-application/deploying/static-exports#unsupported-features'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">process.exit(1)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return rewrites ?? []</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async getMiddleware() {</span><span class="s3">\n    </span><span class="s1">// We need to populate the match</span><span class="s3">\n    </span><span class="s1">// field as it isn't serializable</span><span class="s3">\n    </span><span class="s1">if (this.middleware?.match === null) {</span><span class="s3">\n      </span><span class="s1">this.middleware.match = getMiddlewareRouteMatcher(</span><span class="s3">\n        </span><span class="s1">this.middleware.matchers || []</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return this.middleware</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getNextFontManifest() {</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async hasMiddleware(): Promise&lt;boolean&gt; {</span><span class="s3">\n    </span><span class="s1">return this.hasPage(this.actualMiddlewareFile!)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async ensureMiddleware(url: string) {</span><span class="s3">\n    </span><span class="s1">return this.ensurePage({</span><span class="s3">\n      </span><span class="s1">page: this.actualMiddlewareFile!,</span><span class="s3">\n      </span><span class="s1">clientOnly: false,</span><span class="s3">\n      </span><span class="s1">definition: undefined,</span><span class="s3">\n      </span><span class="s1">url,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async loadInstrumentationModule(): Promise&lt;any&gt; {</span><span class="s3">\n    </span><span class="s1">let instrumentationModule: any</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">this.actualInstrumentationHookFile &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(await this.ensurePage({</span><span class="s3">\n        </span><span class="s1">page: this.actualInstrumentationHookFile!,</span><span class="s3">\n        </span><span class="s1">clientOnly: false,</span><span class="s3">\n        </span><span class="s1">definition: undefined,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">.then(() =&gt; true)</span><span class="s3">\n        </span><span class="s1">.catch(() =&gt; false))</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">instrumentationModule = await getInstrumentationModule(</span><span class="s3">\n          </span><span class="s1">this.dir,</span><span class="s3">\n          </span><span class="s1">this.nextConfig.distDir</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} catch (err: any) {</span><span class="s3">\n        </span><span class="s1">err.message = `An error occurred while loading instrumentation hook: ${err.message}`</span><span class="s3">\n        </span><span class="s1">throw err</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return instrumentationModule</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async runInstrumentationHookIfAvailable() {</span><span class="s3">\n    </span><span class="s1">await ensureInstrumentationRegistered(this.dir, this.nextConfig.distDir)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async ensureEdgeFunction({</span><span class="s3">\n    </span><span class="s1">page,</span><span class="s3">\n    </span><span class="s1">appPaths,</span><span class="s3">\n    </span><span class="s1">url,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">appPaths: string[] | null</span><span class="s3">\n    </span><span class="s1">url: string</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">return this.ensurePage({</span><span class="s3">\n      </span><span class="s1">page,</span><span class="s3">\n      </span><span class="s1">appPaths,</span><span class="s3">\n      </span><span class="s1">clientOnly: false,</span><span class="s3">\n      </span><span class="s1">definition: undefined,</span><span class="s3">\n      </span><span class="s1">url,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">generateRoutes(_dev?: boolean) {</span><span class="s3">\n    </span><span class="s1">// In development we expose all compiled files for react-error-overlay's line show feature</span><span class="s3">\n    </span><span class="s1">// We use unshift so that we're sure the routes is defined before Next's default routes</span><span class="s3">\n    </span><span class="s1">// routes.unshift({</span><span class="s3">\n    </span><span class="s1">//   match: getPathMatch('/_next/development/:path*'),</span><span class="s3">\n    </span><span class="s1">//   type: 'route',</span><span class="s3">\n    </span><span class="s1">//   name: '_next/development catchall',</span><span class="s3">\n    </span><span class="s1">//   fn: async (req, res, params) =&gt; {</span><span class="s3">\n    </span><span class="s1">//     const p = pathJoin(this.distDir, ...(params.path || []))</span><span class="s3">\n    </span><span class="s1">//     await this.serveStatic(req, res, p)</span><span class="s3">\n    </span><span class="s1">//     return {</span><span class="s3">\n    </span><span class="s1">//       finished: true,</span><span class="s3">\n    </span><span class="s1">//     }</span><span class="s3">\n    </span><span class="s1">//   },</span><span class="s3">\n    </span><span class="s1">// })</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">_filterAmpDevelopmentScript(</span><span class="s3">\n    </span><span class="s1">html: string,</span><span class="s3">\n    </span><span class="s1">event: { line: number; col: number; code: string }</span><span class="s3">\n  </span><span class="s1">): boolean {</span><span class="s3">\n    </span><span class="s1">if (event.code !== 'DISALLOWED_SCRIPT_TAG') {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const snippetChunks = html.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n\n    </span><span class="s1">let snippet</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!(snippet = html.split('</span><span class="s3">\\</span><span class="s1">n')[event.line - 1]) ||</span><span class="s3">\n      </span><span class="s1">!(snippet = snippet.substring(event.col))</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">snippet = snippet + snippetChunks.slice(event.line).join('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n    </span><span class="s1">snippet = snippet.substring(0, snippet.indexOf('&lt;/script&gt;'))</span><span class="s3">\n\n    </span><span class="s1">return !snippet.includes('data-amp-development-mode-only')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async getStaticPaths({</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">urlPathname,</span><span class="s3">\n    </span><span class="s1">requestHeaders,</span><span class="s3">\n    </span><span class="s1">page,</span><span class="s3">\n    </span><span class="s1">isAppPath,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">pathname: string</span><span class="s3">\n    </span><span class="s1">urlPathname: string</span><span class="s3">\n    </span><span class="s1">requestHeaders: IncrementalCache['requestHeaders']</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">isAppPath: boolean</span><span class="s3">\n  </span><span class="s1">}): Promise&lt;{</span><span class="s3">\n    </span><span class="s1">prerenderedRoutes?: PrerenderedRoute[]</span><span class="s3">\n    </span><span class="s1">staticPaths?: string[]</span><span class="s3">\n    </span><span class="s1">fallbackMode?: FallbackMode</span><span class="s3">\n  </span><span class="s1">}&gt; {</span><span class="s3">\n    </span><span class="s1">// we lazy load the staticPaths to prevent the user</span><span class="s3">\n    </span><span class="s1">// from waiting on them for the page to load in dev mode</span><span class="s3">\n\n    </span><span class="s1">const __getStaticPaths = async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const {</span><span class="s3">\n        </span><span class="s1">configFileName,</span><span class="s3">\n        </span><span class="s1">publicRuntimeConfig,</span><span class="s3">\n        </span><span class="s1">serverRuntimeConfig,</span><span class="s3">\n        </span><span class="s1">httpAgentOptions,</span><span class="s3">\n      </span><span class="s1">} = this.nextConfig</span><span class="s3">\n      </span><span class="s1">const { locales, defaultLocale } = this.nextConfig.i18n || {}</span><span class="s3">\n      </span><span class="s1">const staticPathsWorker = this.getStaticPathsWorker()</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const pathsResult = await staticPathsWorker.loadStaticPaths({</span><span class="s3">\n          </span><span class="s1">dir: this.dir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">pathname,</span><span class="s3">\n          </span><span class="s1">config: {</span><span class="s3">\n            </span><span class="s1">pprConfig: this.nextConfig.experimental.ppr,</span><span class="s3">\n            </span><span class="s1">configFileName,</span><span class="s3">\n            </span><span class="s1">publicRuntimeConfig,</span><span class="s3">\n            </span><span class="s1">serverRuntimeConfig,</span><span class="s3">\n            </span><span class="s1">cacheComponents: Boolean(</span><span class="s3">\n              </span><span class="s1">this.nextConfig.experimental.cacheComponents</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">httpAgentOptions,</span><span class="s3">\n          </span><span class="s1">locales,</span><span class="s3">\n          </span><span class="s1">defaultLocale,</span><span class="s3">\n          </span><span class="s1">page,</span><span class="s3">\n          </span><span class="s1">isAppPath,</span><span class="s3">\n          </span><span class="s1">requestHeaders,</span><span class="s3">\n          </span><span class="s1">cacheHandler: this.nextConfig.cacheHandler,</span><span class="s3">\n          </span><span class="s1">cacheHandlers: this.nextConfig.experimental.cacheHandlers,</span><span class="s3">\n          </span><span class="s1">cacheLifeProfiles: this.nextConfig.experimental.cacheLife,</span><span class="s3">\n          </span><span class="s1">fetchCacheKeyPrefix: this.nextConfig.experimental.fetchCacheKeyPrefix,</span><span class="s3">\n          </span><span class="s1">isrFlushToDisk: this.nextConfig.experimental.isrFlushToDisk,</span><span class="s3">\n          </span><span class="s1">maxMemoryCacheSize: this.nextConfig.cacheMaxMemorySize,</span><span class="s3">\n          </span><span class="s1">nextConfigOutput: this.nextConfig.output,</span><span class="s3">\n          </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n          </span><span class="s1">authInterrupts: Boolean(this.nextConfig.experimental.authInterrupts),</span><span class="s3">\n          </span><span class="s1">sriEnabled: Boolean(this.nextConfig.experimental.sri?.algorithm),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">return pathsResult</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">// we don't re-use workers so destroy the used one</span><span class="s3">\n        </span><span class="s1">staticPathsWorker.end()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const result = this.staticPathsCache.get(pathname)</span><span class="s3">\n\n    </span><span class="s1">const nextInvoke = withCoalescedInvoke(__getStaticPaths)(</span><span class="s3">\n      </span><span class="s1">`staticPaths-${pathname}`,</span><span class="s3">\n      </span><span class="s1">[]</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">.then(async (res) =&gt; {</span><span class="s3">\n        </span><span class="s1">const { prerenderedRoutes, fallbackMode: fallback } = res.value</span><span class="s3">\n\n        </span><span class="s1">if (isAppPath) {</span><span class="s3">\n          </span><span class="s1">if (this.nextConfig.output === 'export') {</span><span class="s3">\n            </span><span class="s1">if (!prerenderedRoutes) {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                </span><span class="s1">`Page </span><span class="s3">\&quot;</span><span class="s1">${page}</span><span class="s3">\&quot; </span><span class="s1">is missing exported function </span><span class="s3">\&quot;</span><span class="s1">generateStaticParams()</span><span class="s3">\&quot;</span><span class="s1">, which is required with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot; </span><span class="s1">config.`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">!prerenderedRoutes.some((item) =&gt; item.pathname === urlPathname)</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                </span><span class="s1">`Page </span><span class="s3">\&quot;</span><span class="s1">${page}</span><span class="s3">\&quot; </span><span class="s1">is missing param </span><span class="s3">\&quot;</span><span class="s1">${pathname}</span><span class="s3">\&quot; </span><span class="s1">in </span><span class="s3">\&quot;</span><span class="s1">generateStaticParams()</span><span class="s3">\&quot;</span><span class="s1">, which is required with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot; </span><span class="s1">config.`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (!isAppPath &amp;&amp; this.nextConfig.output === 'export') {</span><span class="s3">\n          </span><span class="s1">if (fallback === FallbackMode.BLOCKING_STATIC_RENDER) {</span><span class="s3">\n            </span><span class="s1">throw new Error(</span><span class="s3">\n              </span><span class="s1">'getStaticPaths with </span><span class="s3">\&quot;</span><span class="s1">fallback: blocking</span><span class="s3">\&quot; </span><span class="s1">cannot be used with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot;</span><span class="s1">. See more info here: https://nextjs.org/docs/advanced-features/static-html-export'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else if (fallback === FallbackMode.PRERENDER) {</span><span class="s3">\n            </span><span class="s1">throw new Error(</span><span class="s3">\n              </span><span class="s1">'getStaticPaths with </span><span class="s3">\&quot;</span><span class="s1">fallback: true</span><span class="s3">\&quot; </span><span class="s1">cannot be used with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot;</span><span class="s1">. See more info here: https://nextjs.org/docs/advanced-features/static-html-export'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const value: {</span><span class="s3">\n          </span><span class="s1">staticPaths: string[] | undefined</span><span class="s3">\n          </span><span class="s1">prerenderedRoutes: PrerenderedRoute[] | undefined</span><span class="s3">\n          </span><span class="s1">fallbackMode: FallbackMode | undefined</span><span class="s3">\n        </span><span class="s1">} = {</span><span class="s3">\n          </span><span class="s1">staticPaths: prerenderedRoutes?.map((route) =&gt; route.pathname),</span><span class="s3">\n          </span><span class="s1">prerenderedRoutes,</span><span class="s3">\n          </span><span class="s1">fallbackMode: fallback,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">res.value?.fallbackMode !== undefined &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// This matches the hasGenerateStaticParams logic</span><span class="s3">\n          </span><span class="s1">// we do during build</span><span class="s3">\n          </span><span class="s1">(!isAppPath || (prerenderedRoutes &amp;&amp; prerenderedRoutes.length &gt; 0))</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">// we write the static paths to partial manifest for</span><span class="s3">\n          </span><span class="s1">// fallback handling inside of entry handler's</span><span class="s3">\n          </span><span class="s1">const rawExistingManifest = await fs.promises.readFile(</span><span class="s3">\n            </span><span class="s1">pathJoin(this.distDir, PRERENDER_MANIFEST),</span><span class="s3">\n            </span><span class="s1">'utf8'</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">const existingManifest: PrerenderManifest =</span><span class="s3">\n            </span><span class="s1">JSON.parse(rawExistingManifest)</span><span class="s3">\n          </span><span class="s1">for (const staticPath of value.staticPaths || []) {</span><span class="s3">\n            </span><span class="s1">existingManifest.routes[staticPath] = {} as any</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">existingManifest.dynamicRoutes[pathname] = {</span><span class="s3">\n            </span><span class="s1">dataRoute: null,</span><span class="s3">\n            </span><span class="s1">dataRouteRegex: null,</span><span class="s3">\n            </span><span class="s1">fallback: fallbackModeToFallbackField(res.value.fallbackMode, page),</span><span class="s3">\n            </span><span class="s1">fallbackRevalidate: false,</span><span class="s3">\n            </span><span class="s1">fallbackExpire: undefined,</span><span class="s3">\n            </span><span class="s1">fallbackHeaders: undefined,</span><span class="s3">\n            </span><span class="s1">fallbackStatus: undefined,</span><span class="s3">\n            </span><span class="s1">fallbackRootParams: undefined,</span><span class="s3">\n            </span><span class="s1">fallbackSourceRoute: pathname,</span><span class="s3">\n            </span><span class="s1">prefetchDataRoute: undefined,</span><span class="s3">\n            </span><span class="s1">prefetchDataRouteRegex: undefined,</span><span class="s3">\n            </span><span class="s1">routeRegex: getRouteRegex(pathname).re.source,</span><span class="s3">\n            </span><span class="s1">experimentalPPR: undefined,</span><span class="s3">\n            </span><span class="s1">renderingMode: undefined,</span><span class="s3">\n            </span><span class="s1">allowHeader: [],</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const updatedManifest = JSON.stringify(existingManifest)</span><span class="s3">\n\n          </span><span class="s1">if (updatedManifest !== rawExistingManifest) {</span><span class="s3">\n            </span><span class="s1">await fs.promises.writeFile(</span><span class="s3">\n              </span><span class="s1">pathJoin(this.distDir, PRERENDER_MANIFEST),</span><span class="s3">\n              </span><span class="s1">updatedManifest</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">this.staticPathsCache.set(pathname, value)</span><span class="s3">\n        </span><span class="s1">return value</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">.catch((err) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.staticPathsCache.remove(pathname)</span><span class="s3">\n        </span><span class="s1">if (!result) throw err</span><span class="s3">\n        </span><span class="s1">Log.error(`Failed to generate static paths for ${pathname}:`)</span><span class="s3">\n        </span><span class="s1">console.error(err)</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">if (result) {</span><span class="s3">\n      </span><span class="s1">return result</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return nextInvoke as NonNullable&lt;typeof result&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async ensurePage(opts: {</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">clientOnly: boolean</span><span class="s3">\n    </span><span class="s1">appPaths?: ReadonlyArray&lt;string&gt; | null</span><span class="s3">\n    </span><span class="s1">definition: RouteDefinition | undefined</span><span class="s3">\n    </span><span class="s1">url?: string</span><span class="s3">\n  </span><span class="s1">}): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">await this.bundlerService.ensurePage(opts)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async findPageComponents({</span><span class="s3">\n    </span><span class="s1">locale,</span><span class="s3">\n    </span><span class="s1">page,</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">params,</span><span class="s3">\n    </span><span class="s1">isAppPath,</span><span class="s3">\n    </span><span class="s1">appPaths = null,</span><span class="s3">\n    </span><span class="s1">shouldEnsure,</span><span class="s3">\n    </span><span class="s1">url,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">locale: string | undefined</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">query: NextParsedUrlQuery</span><span class="s3">\n    </span><span class="s1">params: Params</span><span class="s3">\n    </span><span class="s1">isAppPath: boolean</span><span class="s3">\n    </span><span class="s1">sriEnabled?: boolean</span><span class="s3">\n    </span><span class="s1">appPaths?: ReadonlyArray&lt;string&gt; | null</span><span class="s3">\n    </span><span class="s1">shouldEnsure: boolean</span><span class="s3">\n    </span><span class="s1">url?: string</span><span class="s3">\n  </span><span class="s1">}): Promise&lt;FindComponentsResult | null&gt; {</span><span class="s3">\n    </span><span class="s1">await this.ready?.promise</span><span class="s3">\n\n    </span><span class="s1">const compilationErr = await this.getCompilationError(page)</span><span class="s3">\n    </span><span class="s1">if (compilationErr) {</span><span class="s3">\n      </span><span class="s1">// Wrap build errors so that they don't get logged again</span><span class="s3">\n      </span><span class="s1">throw new WrappedBuildError(compilationErr)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (shouldEnsure || this.serverOptions.customServer) {</span><span class="s3">\n      </span><span class="s1">await this.ensurePage({</span><span class="s3">\n        </span><span class="s1">page,</span><span class="s3">\n        </span><span class="s1">appPaths,</span><span class="s3">\n        </span><span class="s1">clientOnly: false,</span><span class="s3">\n        </span><span class="s1">definition: undefined,</span><span class="s3">\n        </span><span class="s1">url,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.nextFontManifest = super.getNextFontManifest()</span><span class="s3">\n\n    </span><span class="s1">return await super.findPageComponents({</span><span class="s3">\n      </span><span class="s1">page,</span><span class="s3">\n      </span><span class="s1">query,</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n      </span><span class="s1">locale,</span><span class="s3">\n      </span><span class="s1">isAppPath,</span><span class="s3">\n      </span><span class="s1">shouldEnsure,</span><span class="s3">\n      </span><span class="s1">url,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async getFallbackErrorComponents(</span><span class="s3">\n    </span><span class="s1">url?: string</span><span class="s3">\n  </span><span class="s1">): Promise&lt;LoadComponentsReturnType | null&gt; {</span><span class="s3">\n    </span><span class="s1">await this.bundlerService.getFallbackErrorComponents(url)</span><span class="s3">\n    </span><span class="s1">return await loadDefaultErrorComponents(this.distDir)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async getCompilationError(page: string): Promise&lt;any&gt; {</span><span class="s3">\n    </span><span class="s1">return await this.bundlerService.getCompilationError(page)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async instrumentationOnRequestError(</span><span class="s3">\n    </span><span class="s1">...args: Parameters&lt;ServerOnInstrumentationRequestError&gt;</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">await super.instrumentationOnRequestError(...args)</span><span class="s3">\n\n    </span><span class="s1">const err = args[0]</span><span class="s3">\n    </span><span class="s1">this.logErrorWithOriginalStack(err, 'app-dir')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DevServer&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesDevOverlayBridgeImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDevOverlay&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesDevOverlayBridge&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;createElement&quot;</span><span class="s0">,</span><span class="s1">&quot;Server&quot;</span><span class="s0">,</span><span class="s1">&quot;getStaticPathsWorker&quot;</span><span class="s0">,</span><span class="s1">&quot;worker&quot;</span><span class="s0">,</span><span class="s1">&quot;Worker&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;maxRetries&quot;</span><span class="s0">,</span><span class="s1">&quot;numWorkers&quot;</span><span class="s0">,</span><span class="s1">&quot;enableWorkerThreads&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;workerThreads&quot;</span><span class="s0">,</span><span class="s1">&quot;forkOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;getFormattedNodeOptionsWithoutInspect&quot;</span><span class="s0">,</span><span class="s1">&quot;getStdout&quot;</span><span class="s0">,</span><span class="s1">&quot;pipe&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;getStderr&quot;</span><span class="s0">,</span><span class="s1">&quot;stderr&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;stackTraceLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;ready&quot;</span><span class="s0">,</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlerService&quot;</span><span class="s0">,</span><span class="s1">&quot;startServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;renderOpts&quot;</span><span class="s0">,</span><span class="s1">&quot;ErrorDebug&quot;</span><span class="s0">,</span><span class="s1">&quot;staticPathsCache&quot;</span><span class="s0">,</span><span class="s1">&quot;LRUCache&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;staticPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;ampSkipValidation&quot;</span><span class="s0">,</span><span class="s1">&quot;amp&quot;</span><span class="s0">,</span><span class="s1">&quot;skipValidation&quot;</span><span class="s0">,</span><span class="s1">&quot;ampValidator&quot;</span><span class="s0">,</span><span class="s1">&quot;html&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;getAmpValidatorInstance&quot;</span><span class="s0">,</span><span class="s1">&quot;getBundledAmpValidatorFilepath&quot;</span><span class="s0">,</span><span class="s1">&quot;validatorPath&quot;</span><span class="s0">,</span><span class="s1">&quot;validator&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;validateString&quot;</span><span class="s0">,</span><span class="s1">&quot;ampValidation&quot;</span><span class="s0">,</span><span class="s1">&quot;errors&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;severity&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;_filterAmpDevelopmentScript&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;findPagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;serverComponentsHmrCache&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheMaxMemorySize&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerComponentsHmrCache&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteMatchers&quot;</span><span class="s0">,</span><span class="s1">&quot;ensurer&quot;</span><span class="s0">,</span><span class="s1">&quot;ensure&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;ensurePage&quot;</span><span class="s0">,</span><span class="s1">&quot;definition&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;clientOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;DevRouteMatcherManager&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;extensionsExpression&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;fileReader&quot;</span><span class="s0">,</span><span class="s1">&quot;BatchedFileReader&quot;</span><span class="s0">,</span><span class="s1">&quot;DefaultFileReader&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnameFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;DevPagesRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;localeNormalizer&quot;</span><span class="s0">,</span><span class="s1">&quot;DevPagesAPIRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;ignorePartFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;part&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;isTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;DevAppPageRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;DevAppRouteRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;getBuildId&quot;</span><span class="s0">,</span><span class="s1">&quot;prepareImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;setGlobal&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;PHASE_DEVELOPMENT_SERVER&quot;</span><span class="s0">,</span><span class="s1">&quot;telemetry&quot;</span><span class="s0">,</span><span class="s1">&quot;Telemetry&quot;</span><span class="s0">,</span><span class="s1">&quot;reload&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionRoutePatterns&quot;</span><span class="s0">,</span><span class="s1">&quot;getinterceptionRoutePatterns&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;isPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;logErrorWithOriginalStack&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiddlewareFile&quot;</span><span class="s0">,</span><span class="s1">&quot;findPageFile&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;appFile&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesFile&quot;</span><span class="s0">,</span><span class="s1">&quot;runMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;onWarning&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;DecodeError&quot;</span><span class="s0">,</span><span class="s1">&quot;MiddlewareNotFoundError&quot;</span><span class="s0">,</span><span class="s1">&quot;getProperError&quot;</span><span class="s0">,</span><span class="s1">&quot;decorateServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;COMPILER_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;renderError&quot;</span><span class="s0">,</span><span class="s1">&quot;runEdgeFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;onError&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;handler&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeReq&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRes&quot;</span><span class="s0">,</span><span class="s1">&quot;loggingConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;logging&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiddlewareRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;originalResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;once&quot;</span><span class="s0">,</span><span class="s1">&quot;routeMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;logRequests&quot;</span><span class="s0">,</span><span class="s1">&quot;requestDurationInMs&quot;</span><span class="s0">,</span><span class="s1">&quot;handleRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;span&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;addRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;memoryUsage&quot;</span><span class="s0">,</span><span class="s1">&quot;traceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;rss&quot;</span><span class="s0">,</span><span class="s1">&quot;heapUsed&quot;</span><span class="s0">,</span><span class="s1">&quot;heapTotal&quot;</span><span class="s0">,</span><span class="s1">&quot;stop&quot;</span><span class="s0">,</span><span class="s1">&quot;run&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;originalPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;removePathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;pathJoin&quot;</span><span class="s0">,</span><span class="s1">&quot;publicDir&quot;</span><span class="s0">,</span><span class="s1">&quot;PUBLIC_DIR_MIDDLEWARE_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;formatServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;sent&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;internalErr&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;send&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;getPagesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;NodeManifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;serverDistDir&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;getAppPathsManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;enabledDirectories&quot;</span><span class="s0">,</span><span class="s1">&quot;app&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_PATHS_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;generateInterceptionRoutesRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;appPathRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;buildCustomRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;exit&quot;</span><span class="s0">,</span><span class="s1">&quot;getMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getMiddlewareRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;hasMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;actualMiddlewareFile&quot;</span><span class="s0">,</span><span class="s1">&quot;ensureMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;loadInstrumentationModule&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentationModule&quot;</span><span class="s0">,</span><span class="s1">&quot;actualInstrumentationHookFile&quot;</span><span class="s0">,</span><span class="s1">&quot;getInstrumentationModule&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;runInstrumentationHookIfAvailable&quot;</span><span class="s0">,</span><span class="s1">&quot;ensureInstrumentationRegistered&quot;</span><span class="s0">,</span><span class="s1">&quot;ensureEdgeFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;appPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;generateRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;_dev&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;snippetChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;snippet&quot;</span><span class="s0">,</span><span class="s1">&quot;line&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;col&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;getStaticPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;urlPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;requestHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;__getStaticPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;configFileName&quot;</span><span class="s0">,</span><span class="s1">&quot;publicRuntimeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;serverRuntimeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;httpAgentOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;staticPathsWorker&quot;</span><span class="s0">,</span><span class="s1">&quot;pathsResult&quot;</span><span class="s0">,</span><span class="s1">&quot;loadStaticPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;pprConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;ppr&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheLifeProfiles&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheLife&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchCacheKeyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;isrFlushToDisk&quot;</span><span class="s0">,</span><span class="s1">&quot;maxMemoryCacheSize&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfigOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;authInterrupts&quot;</span><span class="s0">,</span><span class="s1">&quot;sriEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;sri&quot;</span><span class="s0">,</span><span class="s1">&quot;algorithm&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;nextInvoke&quot;</span><span class="s0">,</span><span class="s1">&quot;withCoalescedInvoke&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderedRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackMode&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;FallbackMode&quot;</span><span class="s0">,</span><span class="s1">&quot;BLOCKING_STATIC_RENDER&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER&quot;</span><span class="s0">,</span><span class="s1">&quot;rawExistingManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;promises&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;existingManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;staticPath&quot;</span><span class="s0">,</span><span class="s1">&quot;routes&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;dataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;dataRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackModeToFallbackField&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackExpire&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackSourceRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;prefetchDataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;prefetchDataRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;routeRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalPPR&quot;</span><span class="s0">,</span><span class="s1">&quot;renderingMode&quot;</span><span class="s0">,</span><span class="s1">&quot;allowHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;remove&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;findPageComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldEnsure&quot;</span><span class="s0">,</span><span class="s1">&quot;compilationErr&quot;</span><span class="s0">,</span><span class="s1">&quot;getCompilationError&quot;</span><span class="s0">,</span><span class="s1">&quot;WrappedBuildError&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;customServer&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;getFallbackErrorComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;loadDefaultErrorComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentationOnRequestError&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BA4GA;;;eAAqBA;;;6BA7Fd;+DAQgB;2DACR;4BACQ;sBACU;wBACH;2BACiB;8BAClB;4BAOtB;oEACmC;mCACR;+BACJ;kCACG;yBACP;uBACkB;8BACf;uBACyB;mCAClB;4CACO;wBACU;6DAChC;iEACmB;wBACP;mCACC;wCACK;8CACM;iDACG;gDACD;iDACC;oCACb;mCACD;mCACA;0BACT;wCACiB;iCACV;4BACL;oDACwB;kCAClB;6BACG;6BAGR;0BAC8B;gDAKnD;4BAEuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAG9B,wCAAwC;AACxC,IAAIC;AACJ,MAAMC,kBAA6C,CAACC;IAClD,IAAIF,8BAA8BG,WAAW;QAC3CH,4BAA4B,AAC1BI,QAAQ,+DACRC,qBAAqB;IACzB;IACA,OAAOC,OAAMC,aAAa,CAACP,2BAA2BE;AACxD;AAmBe,MAAMH,kBAAkBS,mBAAM;IAyBnCC,uBAEN;QACA,MAAMC,SAAS,IAAIC,kBAAM,CAACP,QAAQQ,OAAO,CAAC,0BAA0B;YAClEC,YAAY;YACZ,2GAA2G;YAC3G,uCAAuC;YACvCC,YAAY;YACZC,qBAAqB,IAAI,CAACC,UAAU,CAACC,YAAY,CAACC,aAAa;YAC/DC,aAAa;gBACXC,KAAK;oBACH,GAAGC,QAAQD,GAAG;oBACd,4GAA4G;oBAC5G,kGAAkG;oBAClG,mGAAmG;oBACnG,0BAA0B;oBAC1BE,cAAcC,IAAAA,4CAAqC;gBACrD;YACF;QACF;QAIAb,OAAOc,SAAS,GAAGC,IAAI,CAACJ,QAAQK,MAAM;QACtChB,OAAOiB,SAAS,GAAGF,IAAI,CAACJ,QAAQO,MAAM;QAEtC,OAAOlB;IACT;IAEAmB,YAAYC,OAAgB,CAAE;YAmB1B,mCAAA;QAlBF,IAAI;YACF,oDAAoD;YACpDC,MAAMC,eAAe,GAAG;QAC1B,EAAE,OAAM,CAAC;QACT,KAAK,CAAC;YAAE,GAAGF,OAAO;YAAEG,KAAK;QAAK,IA1DhC;;;GAGC,QACOC,QAAS,IAAIC,gCAAe;QAuDlC,IAAI,CAACC,cAAc,GAAGN,QAAQM,cAAc;QAC5C,IAAI,CAACC,eAAe,GAClBP,QAAQO,eAAe,IAAIC,IAAAA,YAAK,EAAC;QACnC,IAAI,CAACC,UAAU,CAACN,GAAG,GAAG;QACtB,IAAI,CAACM,UAAU,CAACC,UAAU,GAAGvC;QAC7B,IAAI,CAACwC,gBAAgB,GAAG,IAAIC,kBAAQ,CAClC,MAAM;QACN,IAAI,OAAO,MACX,SAASC,OAAOC,KAAK;gBACZC;YAAP,OAAOA,EAAAA,kBAAAA,KAAKC,SAAS,CAACF,MAAMG,WAAW,sBAAhCF,gBAAmCF,MAAM,KAAI;QACtD;QAEF,IAAI,CAACJ,UAAU,CAACS,iBAAiB,GAC/B,EAAA,gCAAA,IAAI,CAAChC,UAAU,CAACC,YAAY,sBAA5B,oCAAA,8BAA8BgC,GAAG,qBAAjC,kCAAmCC,cAAc,KAAI;QACvD,IAAI,CAACX,UAAU,CAACY,YAAY,GAAG,OAAOC,MAAcC;gBAKhD,mCAAA;YAJF,MAAM,EAAEC,uBAAuB,EAAEC,8BAA8B,EAAE,GAC/DnD,QAAQ;YAEV,MAAMoD,gBACJ,EAAA,gCAAA,IAAI,CAACxC,UAAU,CAACC,YAAY,sBAA5B,oCAAA,8BAA8BgC,GAAG,qBAAjC,kCAAmCQ,SAAS,KAC5CF;YAEF,MAAME,YAAY,MAAMH,wBAAwBE;YAEhD,MAAME,SAASD,UAAUE,cAAc,CAACP;YACxCQ,IAAAA,qBAAa,EACXP,UACAK,OAAOG,MAAM,CACVC,MAAM,CAAC,CAACC;gBACP,IAAIA,MAAMC,QAAQ,KAAK,SAAS;oBAC9B,sFAAsF;oBACtF,uEAAuE;oBAEvE,0CAA0C;oBAC1C,qDAAqD;oBACrD,IACED,MAAME,IAAI,KAAK,qBACfF,MAAMG,MAAM,CAAC,EAAE,KAAK,cACpBH,MAAMG,MAAM,CAAC,EAAE,KAAK,QACpB;wBACA,OAAO;oBACT;oBACA,0BAA0B;oBAC1B,qDAAqD;oBACrD,IACEH,MAAME,IAAI,KAAK,4BACfF,MAAMG,MAAM,CAAC,EAAE,KAAK,UACpBH,MAAMG,MAAM,CAAC,EAAE,KAAK,YACpB;wBACA,OAAO;oBACT;oBACA,0BAA0B;oBAC1B,qDAAqD;oBACrD,IACEH,MAAME,IAAI,KAAK,gCACfF,MAAMG,MAAM,CAAC,EAAE,KAAK,cACpBH,MAAMG,MAAM,CAAC,EAAE,KAAK,gBACpB;wBACA,OAAO;oBACT;oBACA,OAAO;gBACT;gBACA,OAAO;YACT,GACCJ,MAAM,CAAC,CAACK,IAAM,IAAI,CAACC,2BAA2B,CAAChB,MAAMe,KACxDT,OAAOG,MAAM,CAACC,MAAM,CAAC,CAACK,IAAMA,EAAEH,QAAQ,KAAK;QAE/C;QAEA,MAAM,EAAEK,QAAQ,EAAEC,MAAM,EAAE,GAAGC,IAAAA,0BAAY,EAAC,IAAI,CAACC,GAAG;QAClD,IAAI,CAACH,QAAQ,GAAGA;QAChB,IAAI,CAACC,MAAM,GAAGA;QAEd,IAAI,IAAI,CAACtD,UAAU,CAACC,YAAY,CAACwD,wBAAwB,EAAE;YACzD,IAAI,CAACA,wBAAwB,GAAG,IAAI/B,kBAAQ,CAC1C,IAAI,CAAC1B,UAAU,CAAC0D,kBAAkB,EAClC,SAAS/B,OAAOC,KAAK;gBACnB,OAAOC,KAAKC,SAAS,CAACF,OAAOD,MAAM;YACrC;QAEJ;IACF;IAEmBgC,8BAA8B;QAC/C,OAAO,IAAI,CAACF,wBAAwB;IACtC;IAEUG,mBAAwC;QAChD,MAAM,EAAEP,QAAQ,EAAEC,MAAM,EAAE,GAAGC,IAAAA,0BAAY,EAAC,IAAI,CAACC,GAAG;QAElD,MAAMK,UAAwB;YAC5BC,QAAQ,OAAOC,OAAO1B;gBACpB,MAAM,IAAI,CAAC2B,UAAU,CAAC;oBACpBC,YAAYF,MAAME,UAAU;oBAC5BC,MAAMH,MAAME,UAAU,CAACC,IAAI;oBAC3BC,YAAY;oBACZC,KAAK/B;gBACP;YACF;QACF;QAEA,MAAMgC,WAAW,IAAIC,8CAAsB,CACzC,KAAK,CAACV,oBACNC,SACA,IAAI,CAACL,GAAG;QAEV,MAAMe,aAAa,IAAI,CAACvE,UAAU,CAACwE,cAAc;QACjD,MAAMC,uBAAuB,IAAIC,OAAO,CAAC,MAAM,EAAEH,WAAWI,IAAI,CAAC,KAAK,EAAE,CAAC;QAEzE,sEAAsE;QACtE,IAAItB,UAAU;YACZ,MAAMuB,aAAa,IAAIC,oCAAiB,CACtC,IAAIC,oCAAiB,CAAC;gBACpB,qDAAqD;gBACrDC,gBAAgB,CAAC1C,WAAaoC,qBAAqBO,IAAI,CAAC3C;YAC1D;YAGFgC,SAASY,IAAI,CACX,IAAIC,0DAA4B,CAC9B7B,UACAkB,YACAK,YACA,IAAI,CAACO,gBAAgB;YAGzBd,SAASY,IAAI,CACX,IAAIG,gEAA+B,CACjC/B,UACAkB,YACAK,YACA,IAAI,CAACO,gBAAgB;QAG3B;QAEA,IAAI7B,QAAQ;YACV,0EAA0E;YAC1E,yEAAyE;YACzE,qEAAqE;YACrE,oBAAoB;YACpB,MAAMsB,aAAa,IAAIC,oCAAiB,CACtC,IAAIC,oCAAiB,CAAC;gBACpB,oDAAoD;gBACpDO,kBAAkB,CAACC,OAASA,KAAKC,UAAU,CAAC;YAC9C;YAGF,uDAAuD;YACvD,MAAMC,cAAc,CAAC,CAACnF,QAAQD,GAAG,CAACqF,SAAS;YAC3CpB,SAASY,IAAI,CACX,IAAIS,8DAA8B,CAChCpC,QACAiB,YACAK,YACAY;YAGJnB,SAASY,IAAI,CACX,IAAIU,gEAA+B,CACjCrC,QACAiB,YACAK,YACAY;QAGN;QAEA,OAAOnB;IACT;IAEUuB,aAAqB;QAC7B,OAAO;IACT;IAEA,MAAgBC,cAA6B;YAS3C;QARAC,IAAAA,gBAAS,EAAC,WAAW,IAAI,CAACC,OAAO;QACjCD,IAAAA,gBAAS,EAAC,SAASE,oCAAwB;QAE3C,MAAMC,YAAY,IAAIC,kBAAS,CAAC;YAAEH,SAAS,IAAI,CAACA,OAAO;QAAC;QAExD,MAAM,KAAK,CAACF;QACZ,MAAM,IAAI,CAACxB,QAAQ,CAAC8B,MAAM;SAE1B,cAAA,IAAI,CAACjF,KAAK,qBAAV,YAAYtB,OAAO;QACnB,IAAI,CAACsB,KAAK,GAAG/B;QAEb,4GAA4G;QAC5G,IAAI,CAACiH,yBAAyB,GAAG,IAAI,CAACC,4BAA4B;QAElE,6CAA6C;QAC7CP,IAAAA,gBAAS,EAAC,UAAU,IAAI,CAACxC,MAAM;QAC/BwC,IAAAA,gBAAS,EAAC,YAAY,IAAI,CAACzC,QAAQ;QACnCyC,IAAAA,gBAAS,EAAC,aAAaG;QAEvB5F,QAAQiG,EAAE,CAAC,sBAAsB,CAACC;YAChC,IAAIC,IAAAA,sBAAU,EAACD,SAAS;gBACtB,0EAA0E;gBAC1E,qDAAqD;gBACrD;YACF;YACA,IAAI,CAACE,yBAAyB,CAACF,QAAQ;QACzC;QACAlG,QAAQiG,EAAE,CAAC,qBAAqB,CAACI;YAC/B,IAAI,CAACD,yBAAyB,CAACC,KAAK;QACtC;IACF;IAEA,MAAgBC,QAAQtE,QAAgB,EAAoB;QAC1D,IAAIuE;QACJ,IAAI;YACFA,iBAAiBC,IAAAA,oCAAiB,EAACxE;QACrC,EAAE,OAAOqE,KAAK;YACZI,QAAQ/D,KAAK,CAAC2D;YACd,wDAAwD;YACxD,sDAAsD;YACtD,yCAAyC;YACzC,OAAO;QACT;QAEA,IAAIK,IAAAA,wBAAgB,EAACH,iBAAiB;YACpC,OAAOI,IAAAA,0BAAY,EACjB,IAAI,CAACxD,GAAG,EACRoD,gBACA,IAAI,CAAC5G,UAAU,CAACwE,cAAc,EAC9B,OACAyC,IAAI,CAACC;QACT;QAEA,IAAIC,UAAyB;QAC7B,IAAIC,YAA2B;QAE/B,IAAI,IAAI,CAAC9D,MAAM,EAAE;YACf6D,UAAU,MAAMH,IAAAA,0BAAY,EAC1B,IAAI,CAAC1D,MAAM,EACXsD,iBAAiB,SACjB,IAAI,CAAC5G,UAAU,CAACwE,cAAc,EAC9B;QAEJ;QAEA,IAAI,IAAI,CAACnB,QAAQ,EAAE;YACjB+D,YAAY,MAAMJ,IAAAA,0BAAY,EAC5B,IAAI,CAAC3D,QAAQ,EACbuD,gBACA,IAAI,CAAC5G,UAAU,CAACwE,cAAc,EAC9B;QAEJ;QACA,IAAI2C,WAAWC,WAAW;YACxB,OAAO;QACT;QAEA,OAAOF,QAAQC,WAAWC;IAC5B;IAEA,MAAMC,cAAcnE,MAMnB,EAAE;QACD,IAAI;YACF,MAAMR,SAAS,MAAM,KAAK,CAAC2E,cAAc;gBACvC,GAAGnE,MAAM;gBACToE,WAAW,CAACC;oBACV,IAAI,CAACd,yBAAyB,CAACc,MAAM;gBACvC;YACF;YAEA,IAAI,cAAc7E,QAAQ;gBACxB,OAAOA;YACT;YAEAA,OAAO8E,SAAS,CAACC,KAAK,CAAC,CAAC1E;gBACtB,IAAI,CAAC0D,yBAAyB,CAAC1D,OAAO;YACxC;YACA,OAAOL;QACT,EAAE,OAAOK,OAAO;YACd,IAAIA,iBAAiB2E,mBAAW,EAAE;gBAChC,MAAM3E;YACR;YAEA;;;;OAIC,GACD,IAAI,CAAEA,CAAAA,iBAAiB4E,+BAAuB,AAAD,GAAI;gBAC/C,IAAI,CAAClB,yBAAyB,CAAC1D;YACjC;YAEA,MAAM2D,MAAMkB,IAAAA,uBAAc,EAAC7E;YAC3B8E,IAAAA,gCAAmB,EAACnB,KAAKoB,0BAAc,CAACC,UAAU;YAClD,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,SAAS,EAAE,GAAGhF;YAEzC;;;;OAIC,GACD,IACE8E,QAAQ5D,GAAG,CAAC+D,QAAQ,CAAC,oBACrBH,QAAQ5D,GAAG,CAAC+D,QAAQ,CAAC,qCACrBH,QAAQ5D,GAAG,CAAC+D,QAAQ,CAAC,2BACrBH,QAAQ5D,GAAG,CAAC+D,QAAQ,CAAC,6BACrB;gBACA,OAAO;oBAAEC,UAAU;gBAAM;YAC3B;YAEAH,SAASI,UAAU,GAAG;YACtB,MAAM,IAAI,CAACC,WAAW,CAAC5B,KAAKsB,SAASC,UAAUC,UAAU7F,QAAQ;YACjE,OAAO;gBAAE+F,UAAU;YAAK;QAC1B;IACF;IAEA,MAAMG,gBAAgBrF,MAQrB,EAAE;QACD,IAAI;YACF,OAAO,KAAK,CAACqF,gBAAgB;gBAC3B,GAAGrF,MAAM;gBACTsF,SAAS,CAAC9B,MAAQ,IAAI,CAACD,yBAAyB,CAACC,KAAK;gBACtDY,WAAW,CAACC;oBACV,IAAI,CAACd,yBAAyB,CAACc,MAAM;gBACvC;YACF;QACF,EAAE,OAAOxE,OAAO;YACd,IAAIA,iBAAiB2E,mBAAW,EAAE;gBAChC,MAAM3E;YACR;YACA,IAAI,CAAC0D,yBAAyB,CAAC1D,OAAO;YACtC,MAAM2D,MAAMkB,IAAAA,uBAAc,EAAC7E;YAC3B,MAAM,EAAE0F,GAAG,EAAEC,GAAG,EAAExE,IAAI,EAAE,GAAGhB;YAE3BwF,IAAIL,UAAU,GAAG;YACjB,MAAM,IAAI,CAACC,WAAW,CAAC5B,KAAK+B,KAAKC,KAAKxE;YACtC,OAAO;QACT;IACF;IAEOyE,oBAAwC;QAC7C,MAAMC,UAAU,KAAK,CAACD;QAEtB,OAAO,CAACF,KAAKC,KAAKR;YAChB,MAAMF,UAAU,IAAI,CAACa,YAAY,CAACJ;YAClC,MAAMR,WAAW,IAAI,CAACa,YAAY,CAACJ;YACnC,MAAMK,gBAAgB,IAAI,CAAC/I,UAAU,CAACgJ,OAAO;YAE7C,IAAID,kBAAkB,OAAO;gBAC3B,MAAME,QAAQC,KAAKC,GAAG;gBACtB,MAAMC,sBAAsBC,IAAAA,2BAAc,EAACZ,KAAK;gBAEhD,IAAI,CAACW,qBAAqB;oBACxBnB,SAASqB,gBAAgB,CAACC,IAAI,CAAC,SAAS;wBACtC,oEAAoE;wBACpE,sEAAsE;wBACtE,gCAAgC;wBAChC,MAAMC,aAAaH,IAAAA,2BAAc,EAACZ,KAAK1E,KAAK;wBAE5C,IAAI,CAACyF,YAAY;4BACf;wBACF;wBAEAC,IAAAA,wBAAW,EAAC;4BACVzB;4BACAC;4BACAc;4BACAW,qBAAqBR,KAAKC,GAAG,KAAKF;wBACpC;oBACF;gBACF;YACF;YAEA,OAAOL,QAAQZ,SAASC,UAAUC;QACpC;IACF;IAEA,MAAayB,cACXlB,GAAoB,EACpBC,GAAqB,EACrBR,SAAkC,EACnB;QACf,MAAM0B,OAAOtI,IAAAA,YAAK,EAAC,kBAAkBnC,WAAW;YAAEiF,KAAKqE,IAAIrE,GAAG;QAAC;QAC/D,MAAM1B,SAAS,MAAMkH,KAAKC,YAAY,CAAC;gBAC/B;YAAN,QAAM,cAAA,IAAI,CAAC3I,KAAK,qBAAV,YAAY4I,OAAO;YACzBC,IAAAA,2BAAc,EAACtB,KAAK,mBAAmB,IAAI,CAAClH,UAAU,CAACC,UAAU;YACjE,OAAO,MAAM,KAAK,CAACmI,cAAclB,KAAKC,KAAKR;QAC7C;QACA,MAAM8B,cAAc3J,QAAQ2J,WAAW;QACvCJ,KACGK,UAAU,CAAC,gBAAgB;YAC1B7F,KAAKqE,IAAIrE,GAAG;YACZ,cAAc8F,OAAOF,YAAYG,GAAG;YACpC,mBAAmBD,OAAOF,YAAYI,QAAQ;YAC9C,oBAAoBF,OAAOF,YAAYK,SAAS;QAClD,GACCC,IAAI;QACP,OAAO5H;IACT;IAEA,MAAM6H,IACJ9B,GAAoB,EACpBC,GAAqB,EACrBR,SAA6B,EACd;YACT;QAAN,QAAM,cAAA,IAAI,CAAChH,KAAK,qBAAV,YAAY4I,OAAO;QAEzB,MAAM,EAAEU,QAAQ,EAAE,GAAG,IAAI,CAACxK,UAAU;QACpC,IAAIyK,mBAAkC;QAEtC,gDAAgD;QAChD,IAAID,YAAYE,IAAAA,4BAAa,EAACxC,UAAU7F,QAAQ,IAAI,KAAKmI,WAAW;YAClE,6CAA6C;YAC7C,uGAAuG;YACvGC,mBAAmBvC,UAAU7F,QAAQ;YACrC6F,UAAU7F,QAAQ,GAAGsI,IAAAA,kCAAgB,EAACzC,UAAU7F,QAAQ,IAAI,KAAKmI;QACnE;QAEA,MAAM,EAAEnI,QAAQ,EAAE,GAAG6F;QAErB,IAAI7F,SAAUkD,UAAU,CAAC,WAAW;YAClC,IAAIqF,WAAE,CAACC,UAAU,CAACC,IAAAA,UAAQ,EAAC,IAAI,CAACC,SAAS,EAAE,WAAW;gBACpD,MAAM,qBAAyC,CAAzC,IAAIhK,MAAMiK,yCAA8B,GAAxC,qBAAA;2BAAA;gCAAA;kCAAA;gBAAwC;YAChD;QACF;QAEA,IAAIP,kBAAkB;YACpB,oFAAoF;YACpF,mDAAmD;YACnDvC,UAAU7F,QAAQ,GAAGoI;QACvB;QACA,IAAI;YACF,OAAO,MAAM,KAAK,CAACF,IAAI9B,KAAKC,KAAKR;QACnC,EAAE,OAAOnF,OAAO;YACd,MAAM2D,MAAMkB,IAAAA,uBAAc,EAAC7E;YAC3BkI,IAAAA,oCAAiB,EAACvE;YAClB,IAAI,CAACD,yBAAyB,CAACC;YAC/B,IAAI,CAACgC,IAAIwC,IAAI,EAAE;gBACbxC,IAAIL,UAAU,GAAG;gBACjB,IAAI;oBACF,OAAO,MAAM,IAAI,CAACC,WAAW,CAAC5B,KAAK+B,KAAKC,KAAKrG,UAAW;wBACtD8I,aAAa,AAACC,IAAAA,gBAAO,EAAC1E,QAAQA,IAAIxC,IAAI,IAAK7B,YAAY;oBACzD;gBACF,EAAE,OAAOgJ,aAAa;oBACpBvE,QAAQ/D,KAAK,CAACsI;oBACd3C,IAAI4C,IAAI,CAAC,yBAAyBC,IAAI;gBACxC;YACF;QACF;IACF;IAEU9E,0BACRC,GAAa,EACb8E,IAAyE,EACnE;QACN,IAAI,CAACpK,cAAc,CAACqF,yBAAyB,CAACC,KAAK8E;IACrD;IAEUC,mBAA8C;QACtD,OACEC,sCAAkB,CAACtM,OAAO,CACxB0L,IAAAA,UAAQ,EAAC,IAAI,CAACa,aAAa,EAAEC,0BAAc,MACxCzM;IAET;IAEU0M,sBAAiD;QACzD,IAAI,CAAC,IAAI,CAACC,kBAAkB,CAACC,GAAG,EAAE,OAAO5M;QAEzC,OACEuM,sCAAkB,CAACtM,OAAO,CACxB0L,IAAAA,UAAQ,EAAC,IAAI,CAACa,aAAa,EAAEK,8BAAkB,MAC5C7M;IAET;IAEUkH,+BAAyC;QACjD,MAAM4F,WAAWC,IAAAA,sEAAkC,EACjDC,OAAOC,IAAI,CAAC,IAAI,CAACC,aAAa,IAAI,CAAC,IACnC,IAAI,CAACrM,UAAU,CAACwK,QAAQ,EACxB8B,GAAG,CAAC,CAACC,QAAU,IAAI7H,OAAO8H,IAAAA,kCAAgB,EAAC,WAAWD,OAAOE,KAAK;QAEpE,IAAI,IAAI,CAACzM,UAAU,CAAC0M,MAAM,KAAK,YAAYT,SAAStK,MAAM,GAAG,GAAG;YAC9DgL,KAAI5J,KAAK,CACP;YAGF1C,QAAQuM,IAAI,CAAC;QACf;QAEA,OAAOX,YAAY,EAAE;IACvB;IAEA,MAAgBY,gBAAgB;YAG1B;QAFJ,gCAAgC;QAChC,iCAAiC;QACjC,IAAI,EAAA,mBAAA,IAAI,CAACC,UAAU,qBAAf,iBAAiB/I,KAAK,MAAK,MAAM;YACnC,IAAI,CAAC+I,UAAU,CAAC/I,KAAK,GAAGgJ,IAAAA,iDAAyB,EAC/C,IAAI,CAACD,UAAU,CAACzI,QAAQ,IAAI,EAAE;QAElC;QACA,OAAO,IAAI,CAACyI,UAAU;IACxB;IAEUE,sBAAsB;QAC9B,OAAO7N;IACT;IAEA,MAAgB8N,gBAAkC;QAChD,OAAO,IAAI,CAACtG,OAAO,CAAC,IAAI,CAACuG,oBAAoB;IAC/C;IAEA,MAAgBC,iBAAiB/I,GAAW,EAAE;QAC5C,OAAO,IAAI,CAACJ,UAAU,CAAC;YACrBE,MAAM,IAAI,CAACgJ,oBAAoB;YAC/B/I,YAAY;YACZF,YAAY9E;YACZiF;QACF;IACF;IAEA,MAAgBgJ,4BAA0C;QACxD,IAAIC;QACJ,IACE,IAAI,CAACC,6BAA6B,IACjC,MAAM,IAAI,CAACtJ,UAAU,CAAC;YACrBE,MAAM,IAAI,CAACoJ,6BAA6B;YACxCnJ,YAAY;YACZF,YAAY9E;QACd,GACG8H,IAAI,CAAC,IAAM,MACXQ,KAAK,CAAC,IAAM,QACf;YACA,IAAI;gBACF4F,wBAAwB,MAAME,IAAAA,wDAAwB,EACpD,IAAI,CAAC/J,GAAG,EACR,IAAI,CAACxD,UAAU,CAAC+F,OAAO;YAE3B,EAAE,OAAOW,KAAU;gBACjBA,IAAI8G,OAAO,GAAG,CAAC,sDAAsD,EAAE9G,IAAI8G,OAAO,EAAE;gBACpF,MAAM9G;YACR;QACF;QACA,OAAO2G;IACT;IAEA,MAAgBI,oCAAoC;QAClD,MAAMC,IAAAA,+DAA+B,EAAC,IAAI,CAAClK,GAAG,EAAE,IAAI,CAACxD,UAAU,CAAC+F,OAAO;IACzE;IAEA,MAAgB4H,mBAAmB,EACjCzJ,IAAI,EACJ0J,QAAQ,EACRxJ,GAAG,EAKJ,EAAE;QACD,OAAO,IAAI,CAACJ,UAAU,CAAC;YACrBE;YACA0J;YACAzJ,YAAY;YACZF,YAAY9E;YACZiF;QACF;IACF;IAEAyJ,eAAeC,IAAc,EAAE;IAC7B,0FAA0F;IAC1F,uFAAuF;IACvF,mBAAmB;IACnB,sDAAsD;IACtD,mBAAmB;IACnB,wCAAwC;IACxC,sCAAsC;IACtC,+DAA+D;IAC/D,0CAA0C;IAC1C,eAAe;IACf,wBAAwB;IACxB,QAAQ;IACR,OAAO;IACP,KAAK;IACP;IAEA1K,4BACEhB,IAAY,EACZ2L,KAAkD,EACzC;QACT,IAAIA,MAAM9K,IAAI,KAAK,yBAAyB;YAC1C,OAAO;QACT;QAEA,MAAM+K,gBAAgB5L,KAAK6L,KAAK,CAAC;QAEjC,IAAIC;QACJ,IACE,CAAEA,CAAAA,UAAU9L,KAAK6L,KAAK,CAAC,KAAK,CAACF,MAAMI,IAAI,GAAG,EAAE,AAAD,KAC3C,CAAED,CAAAA,UAAUA,QAAQE,SAAS,CAACL,MAAMM,GAAG,CAAA,GACvC;YACA,OAAO;QACT;QAEAH,UAAUA,UAAUF,cAAcM,KAAK,CAACP,MAAMI,IAAI,EAAExJ,IAAI,CAAC;QACzDuJ,UAAUA,QAAQE,SAAS,CAAC,GAAGF,QAAQK,OAAO,CAAC;QAE/C,OAAO,CAACL,QAAQ/F,QAAQ,CAAC;IAC3B;IAEA,MAAgBqG,eAAe,EAC7BnM,QAAQ,EACRoM,WAAW,EACXC,cAAc,EACdxK,IAAI,EACJyK,SAAS,EAOV,EAIE;QACD,mDAAmD;QACnD,wDAAwD;QAExD,MAAMC,mBAAmB;YACvB,MAAM,EACJC,cAAc,EACdC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAgB,EACjB,GAAG,IAAI,CAAChP,UAAU;YACnB,MAAM,EAAEiP,OAAO,EAAEC,aAAa,EAAE,GAAG,IAAI,CAAClP,UAAU,CAACmP,IAAI,IAAI,CAAC;YAC5D,MAAMC,oBAAoB,IAAI,CAAC3P,oBAAoB;YAEnD,IAAI;oBA6BoB;gBA5BtB,MAAM4P,cAAc,MAAMD,kBAAkBE,eAAe,CAAC;oBAC1D9L,KAAK,IAAI,CAACA,GAAG;oBACbuC,SAAS,IAAI,CAACA,OAAO;oBACrB1D;oBACAkN,QAAQ;wBACNC,WAAW,IAAI,CAACxP,UAAU,CAACC,YAAY,CAACwP,GAAG;wBAC3CZ;wBACAC;wBACAC;wBACAW,iBAAiBxI,QACf,IAAI,CAAClH,UAAU,CAACC,YAAY,CAACyP,eAAe;oBAEhD;oBACAV;oBACAC;oBACAC;oBACAhL;oBACAyK;oBACAD;oBACAiB,cAAc,IAAI,CAAC3P,UAAU,CAAC2P,YAAY;oBAC1CC,eAAe,IAAI,CAAC5P,UAAU,CAACC,YAAY,CAAC2P,aAAa;oBACzDC,mBAAmB,IAAI,CAAC7P,UAAU,CAACC,YAAY,CAAC6P,SAAS;oBACzDC,qBAAqB,IAAI,CAAC/P,UAAU,CAACC,YAAY,CAAC8P,mBAAmB;oBACrEC,gBAAgB,IAAI,CAAChQ,UAAU,CAACC,YAAY,CAAC+P,cAAc;oBAC3DC,oBAAoB,IAAI,CAACjQ,UAAU,CAAC0D,kBAAkB;oBACtDwM,kBAAkB,IAAI,CAAClQ,UAAU,CAAC0M,MAAM;oBACxCyD,SAAS,IAAI,CAACA,OAAO;oBACrBC,gBAAgBlJ,QAAQ,IAAI,CAAClH,UAAU,CAACC,YAAY,CAACmQ,cAAc;oBACnEC,YAAYnJ,SAAQ,oCAAA,IAAI,CAAClH,UAAU,CAACC,YAAY,CAACqQ,GAAG,qBAAhC,kCAAkCC,SAAS;gBACjE;gBACA,OAAOlB;YACT,SAAU;gBACR,kDAAkD;gBAClDD,kBAAkBoB,GAAG;YACvB;QACF;QACA,MAAM9N,SAAS,IAAI,CAACjB,gBAAgB,CAACgP,GAAG,CAACpO;QAEzC,MAAMqO,aAAaC,IAAAA,sCAAmB,EAAC/B,kBACrC,CAAC,YAAY,EAAEvM,UAAU,EACzB,EAAE,EAED4E,IAAI,CAAC,OAAOyB;gBA4CTA;YA3CF,MAAM,EAAEkI,iBAAiB,EAAEC,cAAcC,QAAQ,EAAE,GAAGpI,IAAI9G,KAAK;YAE/D,IAAI+M,WAAW;gBACb,IAAI,IAAI,CAAC3O,UAAU,CAAC0M,MAAM,KAAK,UAAU;oBACvC,IAAI,CAACkE,mBAAmB;wBACtB,MAAM,qBAEL,CAFK,IAAI7P,MACR,CAAC,MAAM,EAAEmD,KAAK,wGAAwG,CAAC,GADnH,qBAAA;mCAAA;wCAAA;0CAAA;wBAEN;oBACF;oBAEA,IACE,CAAC0M,kBAAkBG,IAAI,CAAC,CAACC,OAASA,KAAK3O,QAAQ,KAAKoM,cACpD;wBACA,MAAM,qBAEL,CAFK,IAAI1N,MACR,CAAC,MAAM,EAAEmD,KAAK,oBAAoB,EAAE7B,SAAS,8EAA8E,CAAC,GADxH,qBAAA;mCAAA;wCAAA;0CAAA;wBAEN;oBACF;gBACF;YACF;YAEA,IAAI,CAACsM,aAAa,IAAI,CAAC3O,UAAU,CAAC0M,MAAM,KAAK,UAAU;gBACrD,IAAIoE,aAAaG,sBAAY,CAACC,sBAAsB,EAAE;oBACpD,MAAM,qBAEL,CAFK,IAAInQ,MACR,oKADI,qBAAA;+BAAA;oCAAA;sCAAA;oBAEN;gBACF,OAAO,IAAI+P,aAAaG,sBAAY,CAACE,SAAS,EAAE;oBAC9C,MAAM,qBAEL,CAFK,IAAIpQ,MACR,gKADI,qBAAA;+BAAA;oCAAA;sCAAA;oBAEN;gBACF;YACF;YAEA,MAAMa,QAIF;gBACFG,WAAW,EAAE6O,qCAAAA,kBAAmBtE,GAAG,CAAC,CAACC,QAAUA,MAAMlK,QAAQ;gBAC7DuO;gBACAC,cAAcC;YAChB;YAEA,IACEpI,EAAAA,aAAAA,IAAI9G,KAAK,qBAAT8G,WAAWmI,YAAY,MAAK1R,aAC5B,iDAAiD;YACjD,qBAAqB;YACpB,CAAA,CAACwP,aAAciC,qBAAqBA,kBAAkBjP,MAAM,GAAG,CAAC,GACjE;gBACA,oDAAoD;gBACpD,8CAA8C;gBAC9C,MAAMyP,sBAAsB,MAAMxG,WAAE,CAACyG,QAAQ,CAACC,QAAQ,CACpDxG,IAAAA,UAAQ,EAAC,IAAI,CAAC/E,OAAO,EAAEwL,8BAAkB,GACzC;gBAEF,MAAMC,mBACJ3P,KAAK4P,KAAK,CAACL;gBACb,KAAK,MAAMM,cAAc9P,MAAMG,WAAW,IAAI,EAAE,CAAE;oBAChDyP,iBAAiBG,MAAM,CAACD,WAAW,GAAG,CAAC;gBACzC;gBACAF,iBAAiBI,aAAa,CAACvP,SAAS,GAAG;oBACzCwP,WAAW;oBACXC,gBAAgB;oBAChBhB,UAAUiB,IAAAA,qCAA2B,EAACrJ,IAAI9G,KAAK,CAACiP,YAAY,EAAE3M;oBAC9D8N,oBAAoB;oBACpBC,gBAAgB9S;oBAChB+S,iBAAiB/S;oBACjBgT,gBAAgBhT;oBAChBiT,oBAAoBjT;oBACpBkT,qBAAqBhQ;oBACrBiQ,mBAAmBnT;oBACnBoT,wBAAwBpT;oBACxBqT,YAAYC,IAAAA,yBAAa,EAACpQ,UAAUqQ,EAAE,CAACC,MAAM;oBAC7CC,iBAAiBzT;oBACjB0T,eAAe1T;oBACf2T,aAAa,EAAE;gBACjB;gBAEA,MAAMC,kBAAkBlR,KAAKC,SAAS,CAAC0P;gBAEvC,IAAIuB,oBAAoB3B,qBAAqB;oBAC3C,MAAMxG,WAAE,CAACyG,QAAQ,CAAC2B,SAAS,CACzBlI,IAAAA,UAAQ,EAAC,IAAI,CAAC/E,OAAO,EAAEwL,8BAAkB,GACzCwB;gBAEJ;YACF;YACA,IAAI,CAACtR,gBAAgB,CAACwR,GAAG,CAAC5Q,UAAUT;YACpC,OAAOA;QACT,GACC6F,KAAK,CAAC,CAACf;YACN,IAAI,CAACjF,gBAAgB,CAACyR,MAAM,CAAC7Q;YAC7B,IAAI,CAACK,QAAQ,MAAMgE;YACnBiG,KAAI5J,KAAK,CAAC,CAAC,oCAAoC,EAAEV,SAAS,CAAC,CAAC;YAC5DyE,QAAQ/D,KAAK,CAAC2D;QAChB;QAEF,IAAIhE,QAAQ;YACV,OAAOA;QACT;QACA,OAAOgO;IACT;IAEA,MAAgB1M,WAAWmP,IAM1B,EAAiB;QAChB,MAAM,IAAI,CAAC/R,cAAc,CAAC4C,UAAU,CAACmP;IACvC;IAEA,MAAgBC,mBAAmB,EACjCC,MAAM,EACNnP,IAAI,EACJoP,KAAK,EACLpQ,MAAM,EACNyL,SAAS,EACTf,WAAW,IAAI,EACf2F,YAAY,EACZnP,GAAG,EAWJ,EAAwC;YACjC;QAAN,QAAM,cAAA,IAAI,CAAClD,KAAK,qBAAV,YAAY4I,OAAO;QAEzB,MAAM0J,iBAAiB,MAAM,IAAI,CAACC,mBAAmB,CAACvP;QACtD,IAAIsP,gBAAgB;YAClB,wDAAwD;YACxD,MAAM,IAAIE,6BAAiB,CAACF;QAC9B;QACA,IAAID,gBAAgB,IAAI,CAACI,aAAa,CAACC,YAAY,EAAE;YACnD,MAAM,IAAI,CAAC5P,UAAU,CAAC;gBACpBE;gBACA0J;gBACAzJ,YAAY;gBACZF,YAAY9E;gBACZiF;YACF;QACF;QAEA,IAAI,CAACyP,gBAAgB,GAAG,KAAK,CAAC7G;QAE9B,OAAO,MAAM,KAAK,CAACoG,mBAAmB;YACpClP;YACAoP;YACApQ;YACAmQ;YACA1E;YACA4E;YACAnP;QACF;IACF;IAEA,MAAgB0P,2BACd1P,GAAY,EAC8B;QAC1C,MAAM,IAAI,CAAChD,cAAc,CAAC0S,0BAA0B,CAAC1P;QACrD,OAAO,MAAM2P,IAAAA,sDAA0B,EAAC,IAAI,CAAChO,OAAO;IACtD;IAEA,MAAM0N,oBAAoBvP,IAAY,EAAgB;QACpD,OAAO,MAAM,IAAI,CAAC9C,cAAc,CAACqS,mBAAmB,CAACvP;IACvD;IAEA,MAAgB8P,8BACd,GAAGC,IAAqD,EACxD;QACA,MAAM,KAAK,CAACD,iCAAiCC;QAE7C,MAAMvN,MAAMuN,IAAI,CAAC,EAAE;QACnB,IAAI,CAACxN,yBAAyB,CAACC,KAAK;IACtC;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>