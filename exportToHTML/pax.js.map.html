<html>
<head>
<title>pax.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
pax.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;pax.js&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceRoot&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/pax.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { basename } from 'node:path'</span><span class="s3">\n</span><span class="s1">import { Header, HeaderData } from './header.js'</span><span class="s3">\n\n</span><span class="s1">export class Pax implements HeaderData {</span><span class="s3">\n  </span><span class="s1">atime?: Date</span><span class="s3">\n  </span><span class="s1">mtime?: Date</span><span class="s3">\n  </span><span class="s1">ctime?: Date</span><span class="s3">\n\n  </span><span class="s1">charset?: string</span><span class="s3">\n  </span><span class="s1">comment?: string</span><span class="s3">\n\n  </span><span class="s1">gid?: number</span><span class="s3">\n  </span><span class="s1">uid?: number</span><span class="s3">\n\n  </span><span class="s1">gname?: string</span><span class="s3">\n  </span><span class="s1">uname?: string</span><span class="s3">\n  </span><span class="s1">linkpath?: string</span><span class="s3">\n  </span><span class="s1">dev?: number</span><span class="s3">\n  </span><span class="s1">ino?: number</span><span class="s3">\n  </span><span class="s1">nlink?: number</span><span class="s3">\n  </span><span class="s1">path?: string</span><span class="s3">\n  </span><span class="s1">size?: number</span><span class="s3">\n  </span><span class="s1">mode?: number</span><span class="s3">\n\n  </span><span class="s1">global: boolean</span><span class="s3">\n\n  </span><span class="s1">constructor(obj: HeaderData, global: boolean = false) {</span><span class="s3">\n    </span><span class="s1">this.atime = obj.atime</span><span class="s3">\n    </span><span class="s1">this.charset = obj.charset</span><span class="s3">\n    </span><span class="s1">this.comment = obj.comment</span><span class="s3">\n    </span><span class="s1">this.ctime = obj.ctime</span><span class="s3">\n    </span><span class="s1">this.dev = obj.dev</span><span class="s3">\n    </span><span class="s1">this.gid = obj.gid</span><span class="s3">\n    </span><span class="s1">this.global = global</span><span class="s3">\n    </span><span class="s1">this.gname = obj.gname</span><span class="s3">\n    </span><span class="s1">this.ino = obj.ino</span><span class="s3">\n    </span><span class="s1">this.linkpath = obj.linkpath</span><span class="s3">\n    </span><span class="s1">this.mtime = obj.mtime</span><span class="s3">\n    </span><span class="s1">this.nlink = obj.nlink</span><span class="s3">\n    </span><span class="s1">this.path = obj.path</span><span class="s3">\n    </span><span class="s1">this.size = obj.size</span><span class="s3">\n    </span><span class="s1">this.uid = obj.uid</span><span class="s3">\n    </span><span class="s1">this.uname = obj.uname</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">encode() {</span><span class="s3">\n    </span><span class="s1">const body = this.encodeBody()</span><span class="s3">\n    </span><span class="s1">if (body === '') {</span><span class="s3">\n      </span><span class="s1">return Buffer.allocUnsafe(0)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const bodyLen = Buffer.byteLength(body)</span><span class="s3">\n    </span><span class="s1">// round up to 512 bytes</span><span class="s3">\n    </span><span class="s1">// add 512 for header</span><span class="s3">\n    </span><span class="s1">const bufLen = 512 * Math.ceil(1 + bodyLen / 512)</span><span class="s3">\n    </span><span class="s1">const buf = Buffer.allocUnsafe(bufLen)</span><span class="s3">\n\n    </span><span class="s1">// 0-fill the header section, it might not hit every field</span><span class="s3">\n    </span><span class="s1">for (let i = 0; i &lt; 512; i++) {</span><span class="s3">\n      </span><span class="s1">buf[i] = 0</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">new Header({</span><span class="s3">\n      </span><span class="s1">// XXX split the path</span><span class="s3">\n      </span><span class="s1">// then the path should be PaxHeader + basename, but less than 99,</span><span class="s3">\n      </span><span class="s1">// prepend with the dirname</span><span class="s3">\n      </span><span class="s1">/* c8 ignore start */</span><span class="s3">\n      </span><span class="s1">path: ('PaxHeader/' + basename(this.path ?? '')).slice(0, 99),</span><span class="s3">\n      </span><span class="s1">/* c8 ignore stop */</span><span class="s3">\n      </span><span class="s1">mode: this.mode || 0o644,</span><span class="s3">\n      </span><span class="s1">uid: this.uid,</span><span class="s3">\n      </span><span class="s1">gid: this.gid,</span><span class="s3">\n      </span><span class="s1">size: bodyLen,</span><span class="s3">\n      </span><span class="s1">mtime: this.mtime,</span><span class="s3">\n      </span><span class="s1">type: this.global ? 'GlobalExtendedHeader' : 'ExtendedHeader',</span><span class="s3">\n      </span><span class="s1">linkpath: '',</span><span class="s3">\n      </span><span class="s1">uname: this.uname || '',</span><span class="s3">\n      </span><span class="s1">gname: this.gname || '',</span><span class="s3">\n      </span><span class="s1">devmaj: 0,</span><span class="s3">\n      </span><span class="s1">devmin: 0,</span><span class="s3">\n      </span><span class="s1">atime: this.atime,</span><span class="s3">\n      </span><span class="s1">ctime: this.ctime,</span><span class="s3">\n    </span><span class="s1">}).encode(buf)</span><span class="s3">\n\n    </span><span class="s1">buf.write(body, 512, bodyLen, 'utf8')</span><span class="s3">\n\n    </span><span class="s1">// null pad after the body</span><span class="s3">\n    </span><span class="s1">for (let i = bodyLen + 512; i &lt; buf.length; i++) {</span><span class="s3">\n      </span><span class="s1">buf[i] = 0</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return buf</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">encodeBody() {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">this.encodeField('path') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('ctime') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('atime') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('dev') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('ino') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('nlink') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('charset') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('comment') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('gid') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('gname') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('linkpath') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('mtime') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('size') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('uid') +</span><span class="s3">\n      </span><span class="s1">this.encodeField('uname')</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">encodeField(field: keyof Pax): string {</span><span class="s3">\n    </span><span class="s1">if (this[field] === undefined) {</span><span class="s3">\n      </span><span class="s1">return ''</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const r = this[field]</span><span class="s3">\n    </span><span class="s1">const v = r instanceof Date ? r.getTime() / 1000 : r</span><span class="s3">\n    </span><span class="s1">const s =</span><span class="s3">\n      </span><span class="s1">' ' +</span><span class="s3">\n      </span><span class="s1">(field === 'dev' || field === 'ino' || field === 'nlink' ?</span><span class="s3">\n        </span><span class="s1">'SCHILY.'</span><span class="s3">\n      </span><span class="s1">: '') +</span><span class="s3">\n      </span><span class="s1">field +</span><span class="s3">\n      </span><span class="s1">'=' +</span><span class="s3">\n      </span><span class="s1">v +</span><span class="s3">\n      </span><span class="s1">'</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n    </span><span class="s1">const byteLen = Buffer.byteLength(s)</span><span class="s3">\n    </span><span class="s1">// the digits includes the length of the digits in ascii base-10</span><span class="s3">\n    </span><span class="s1">// so if it's 9 characters, then adding 1 for the 9 makes it 10</span><span class="s3">\n    </span><span class="s1">// which makes it 11 chars.</span><span class="s3">\n    </span><span class="s1">let digits = Math.floor(Math.log(byteLen) / Math.log(10)) + 1</span><span class="s3">\n    </span><span class="s1">if (byteLen + digits &gt;= Math.pow(10, digits)) {</span><span class="s3">\n      </span><span class="s1">digits += 1</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const len = digits + byteLen</span><span class="s3">\n    </span><span class="s1">return len + s</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static parse(str: string, ex?: HeaderData, g: boolean = false) {</span><span class="s3">\n    </span><span class="s1">return new Pax(merge(parseKV(str), ex), g)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const merge = (a: HeaderData, b?: HeaderData) =&gt;</span><span class="s3">\n  </span><span class="s1">b ? Object.assign({}, b, a) : a</span><span class="s3">\n\n</span><span class="s1">const parseKV = (str: string) =&gt;</span><span class="s3">\n  </span><span class="s1">str</span><span class="s3">\n    </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">n$/, '')</span><span class="s3">\n    </span><span class="s1">.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n    </span><span class="s1">.reduce(parseKVLine, Object.create(null))</span><span class="s3">\n\n</span><span class="s1">const parseKVLine = (set: Record&lt;string, any&gt;, line: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">const n = parseInt(line, 10)</span><span class="s3">\n\n  </span><span class="s1">// XXX Values with </span><span class="s3">\\</span><span class="s1">n in them will fail this.</span><span class="s3">\n  </span><span class="s1">// Refactor to not be a naive line-by-line parse.</span><span class="s3">\n  </span><span class="s1">if (n !== Buffer.byteLength(line) + 1) {</span><span class="s3">\n    </span><span class="s1">return set</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">line = line.slice((n + ' ').length)</span><span class="s3">\n  </span><span class="s1">const kv = line.split('=')</span><span class="s3">\n  </span><span class="s1">const r = kv.shift()</span><span class="s3">\n\n  </span><span class="s1">if (!r) {</span><span class="s3">\n    </span><span class="s1">return set</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const k = r.replace(/^SCHILY</span><span class="s3">\\</span><span class="s1">.(dev|ino|nlink)/, '$1')</span><span class="s3">\n\n  </span><span class="s1">const v = kv.join('=')</span><span class="s3">\n  </span><span class="s1">set[k] =</span><span class="s3">\n    </span><span class="s1">/^([A-Z]+</span><span class="s3">\\</span><span class="s1">.)?([mac]|birth|creation)time$/.test(k) ?</span><span class="s3">\n      </span><span class="s1">new Date(Number(v) * 1000)</span><span class="s3">\n    </span><span class="s1">: /^[0-9]+$/.test(v) ? +v</span><span class="s3">\n    </span><span class="s1">: v</span><span class="s3">\n  </span><span class="s1">return set</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">]}</span></pre>
</body>
</html>