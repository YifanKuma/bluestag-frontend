<html>
<head>
<title>AsYouTypeFormatter.complete.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
AsYouTypeFormatter.complete.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;AsYouTypeFormatter.complete.js&quot;</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_checkNumberLength&quot;</span><span class="s0">,</span><span class="s1">&quot;_interopRequireDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_parseDigits&quot;</span><span class="s0">,</span><span class="s1">&quot;_formatNationalNumberUsingFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;__esModule&quot;</span><span class="s0">,</span><span class="s1">&quot;formatCompleteNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;format&quot;</span><span class="s0">,</span><span class="s1">&quot;_ref&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldTryNationalPrefixFormattingRule&quot;</span><span class="s0">,</span><span class="s1">&quot;getSeparatorAfterNationalPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;pattern&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;nationalSignificantNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;formatNationalNumberWithAndWithoutNationalPrefixFormattingRule&quot;</span><span class="s0">,</span><span class="s1">&quot;canFormatCompleteNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;country&quot;</span><span class="s0">,</span><span class="s1">&quot;checkNumberLength&quot;</span><span class="s0">,</span><span class="s1">&quot;_ref2&quot;</span><span class="s0">,</span><span class="s1">&quot;international&quot;</span><span class="s0">,</span><span class="s1">&quot;nationalPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;carrierCode&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;formatNationalNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;useNationalPrefixFormattingRule&quot;</span><span class="s0">,</span><span class="s1">&quot;_ref3&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedNationalNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;formatNationalNumberUsingFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;useInternationalFormat&quot;</span><span class="s0">,</span><span class="s1">&quot;withNationalPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;isValidFormattedNationalNumber&quot;</span><span class="s0">,</span><span class="s1">&quot;parseDigits&quot;</span><span class="s0">,</span><span class="s1">&quot;getNationalDigits&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../source/AsYouTypeFormatter.complete.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import checkNumberLength from './helpers/checkNumberLength.js'</span><span class="s3">\r\n</span><span class="s1">import parseDigits from './helpers/parseDigits.js'</span><span class="s3">\r\n</span><span class="s1">import formatNationalNumberUsingFormat from './helpers/formatNationalNumberUsingFormat.js'</span><span class="s3">\r\n\r\n</span><span class="s1">export default function formatCompleteNumber(state, format, {</span><span class="s3">\r\n\t</span><span class="s1">metadata,</span><span class="s3">\r\n\t</span><span class="s1">shouldTryNationalPrefixFormattingRule,</span><span class="s3">\r\n\t</span><span class="s1">getSeparatorAfterNationalPrefix</span><span class="s3">\r\n</span><span class="s1">}) {</span><span class="s3">\r\n\t</span><span class="s1">const matcher = new RegExp(`^(?:${format.pattern()})$`)</span><span class="s3">\r\n\t</span><span class="s1">if (matcher.test(state.nationalSignificantNumber)) {</span><span class="s3">\r\n\t\t</span><span class="s1">return formatNationalNumberWithAndWithoutNationalPrefixFormattingRule(</span><span class="s3">\r\n\t\t\t</span><span class="s1">state,</span><span class="s3">\r\n\t\t\t</span><span class="s1">format,</span><span class="s3">\r\n\t\t\t</span><span class="s1">{</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">metadata,</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">shouldTryNationalPrefixFormattingRule,</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">getSeparatorAfterNationalPrefix</span><span class="s3">\r\n\t\t\t</span><span class="s1">}</span><span class="s3">\r\n\t\t</span><span class="s1">)</span><span class="s3">\r\n\t</span><span class="s1">}</span><span class="s3">\r\n</span><span class="s1">}</span><span class="s3">\r\n\r\n</span><span class="s1">export function canFormatCompleteNumber(nationalSignificantNumber, country, metadata) {</span><span class="s3">\r\n\t</span><span class="s1">return checkNumberLength(nationalSignificantNumber, country, metadata) === 'IS_POSSIBLE'</span><span class="s3">\r\n</span><span class="s1">}</span><span class="s3">\r\n\r\n</span><span class="s1">function formatNationalNumberWithAndWithoutNationalPrefixFormattingRule(state, format, {</span><span class="s3">\r\n\t</span><span class="s1">metadata,</span><span class="s3">\r\n\t</span><span class="s1">shouldTryNationalPrefixFormattingRule,</span><span class="s3">\r\n\t</span><span class="s1">getSeparatorAfterNationalPrefix</span><span class="s3">\r\n</span><span class="s1">}) {</span><span class="s3">\r\n\t</span><span class="s1">// `format` has already been checked for `nationalPrefix` requirement.</span><span class="s3">\r\n\r\n\t</span><span class="s1">const {</span><span class="s3">\r\n\t\t</span><span class="s1">nationalSignificantNumber,</span><span class="s3">\r\n\t\t</span><span class="s1">international,</span><span class="s3">\r\n\t\t</span><span class="s1">nationalPrefix,</span><span class="s3">\r\n\t\t</span><span class="s1">carrierCode</span><span class="s3">\r\n\t</span><span class="s1">} = state</span><span class="s3">\r\n\r\n\t</span><span class="s1">// Format the number with using `national_prefix_formatting_rule`.</span><span class="s3">\r\n\t</span><span class="s1">// If the resulting formatted number is a valid formatted number, then return it.</span><span class="s3">\r\n\t</span><span class="s1">//</span><span class="s3">\r\n\t</span><span class="s1">// Google's AsYouType formatter is different in a way that it doesn't try</span><span class="s3">\r\n\t</span><span class="s1">// to format using the </span><span class="s3">\&quot;</span><span class="s1">national prefix formatting rule</span><span class="s3">\&quot;</span><span class="s1">, and instead it</span><span class="s3">\r\n\t</span><span class="s1">// simply prepends a national prefix followed by a </span><span class="s3">\&quot; \&quot; </span><span class="s1">character.</span><span class="s3">\r\n\t</span><span class="s1">// This code does that too, but as a fallback.</span><span class="s3">\r\n\t</span><span class="s1">// The reason is that </span><span class="s3">\&quot;</span><span class="s1">national prefix formatting rule</span><span class="s3">\&quot; </span><span class="s1">may use parentheses,</span><span class="s3">\r\n\t</span><span class="s1">// which wouldn't be included has it used the simpler Google's way.</span><span class="s3">\r\n\t</span><span class="s1">//</span><span class="s3">\r\n\t</span><span class="s1">if (shouldTryNationalPrefixFormattingRule(format)) {</span><span class="s3">\r\n\t\t</span><span class="s1">const formattedNumber = formatNationalNumber(state, format, {</span><span class="s3">\r\n\t\t\t</span><span class="s1">useNationalPrefixFormattingRule: true,</span><span class="s3">\r\n\t\t\t</span><span class="s1">getSeparatorAfterNationalPrefix,</span><span class="s3">\r\n\t\t\t</span><span class="s1">metadata</span><span class="s3">\r\n\t\t</span><span class="s1">})</span><span class="s3">\r\n\t\t</span><span class="s1">if (formattedNumber) {</span><span class="s3">\r\n\t\t\t</span><span class="s1">return formattedNumber</span><span class="s3">\r\n\t\t</span><span class="s1">}</span><span class="s3">\r\n\t</span><span class="s1">}</span><span class="s3">\r\n\r\n\t</span><span class="s1">// Format the number without using `national_prefix_formatting_rule`.</span><span class="s3">\r\n\t</span><span class="s1">return formatNationalNumber(state, format, {</span><span class="s3">\r\n\t\t</span><span class="s1">useNationalPrefixFormattingRule: false,</span><span class="s3">\r\n\t\t</span><span class="s1">getSeparatorAfterNationalPrefix,</span><span class="s3">\r\n\t\t</span><span class="s1">metadata</span><span class="s3">\r\n\t</span><span class="s1">})</span><span class="s3">\r\n</span><span class="s1">}</span><span class="s3">\r\n\r\n</span><span class="s1">function formatNationalNumber(state, format, {</span><span class="s3">\r\n\t</span><span class="s1">metadata,</span><span class="s3">\r\n\t</span><span class="s1">useNationalPrefixFormattingRule,</span><span class="s3">\r\n\t</span><span class="s1">getSeparatorAfterNationalPrefix</span><span class="s3">\r\n</span><span class="s1">}) {</span><span class="s3">\r\n\t</span><span class="s1">let formattedNationalNumber = formatNationalNumberUsingFormat(</span><span class="s3">\r\n\t\t</span><span class="s1">state.nationalSignificantNumber,</span><span class="s3">\r\n\t\t</span><span class="s1">format,</span><span class="s3">\r\n\t\t</span><span class="s1">{</span><span class="s3">\r\n\t\t\t</span><span class="s1">carrierCode: state.carrierCode,</span><span class="s3">\r\n\t\t\t</span><span class="s1">useInternationalFormat: state.international,</span><span class="s3">\r\n\t\t\t</span><span class="s1">withNationalPrefix: useNationalPrefixFormattingRule,</span><span class="s3">\r\n\t\t\t</span><span class="s1">metadata</span><span class="s3">\r\n\t\t</span><span class="s1">}</span><span class="s3">\r\n\t</span><span class="s1">)</span><span class="s3">\r\n\t</span><span class="s1">if (!useNationalPrefixFormattingRule) {</span><span class="s3">\r\n\t\t</span><span class="s1">if (state.nationalPrefix) {</span><span class="s3">\r\n\t\t\t</span><span class="s1">// If a national prefix was extracted, then just prepend it,</span><span class="s3">\r\n\t\t\t</span><span class="s1">// followed by a </span><span class="s3">\&quot; \&quot; </span><span class="s1">character.</span><span class="s3">\r\n\t\t\t</span><span class="s1">formattedNationalNumber = state.nationalPrefix +</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">getSeparatorAfterNationalPrefix(format) +</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">formattedNationalNumber</span><span class="s3">\r\n\t\t</span><span class="s1">} else if (state.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix) {</span><span class="s3">\r\n\t\t\t</span><span class="s1">formattedNationalNumber = state.prefixBeforeNationalSignificantNumberThatIsNotNationalPrefix +</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">' ' +</span><span class="s3">\r\n\t\t\t\t</span><span class="s1">formattedNationalNumber</span><span class="s3">\r\n\t\t</span><span class="s1">}</span><span class="s3">\r\n\t</span><span class="s1">}</span><span class="s3">\r\n\t</span><span class="s1">if (isValidFormattedNationalNumber(formattedNationalNumber, state)) {</span><span class="s3">\r\n\t\t</span><span class="s1">return formattedNationalNumber</span><span class="s3">\r\n\t</span><span class="s1">}</span><span class="s3">\r\n</span><span class="s1">}</span><span class="s3">\r\n\r\n</span><span class="s1">// Check that the formatted phone number contains exactly</span><span class="s3">\r\n</span><span class="s1">// the same digits that have been input by the user.</span><span class="s3">\r\n</span><span class="s1">// For example, when </span><span class="s3">\&quot;</span><span class="s1">0111523456789</span><span class="s3">\&quot; </span><span class="s1">is input for `AR` country,</span><span class="s3">\r\n</span><span class="s1">// the extracted `this.nationalSignificantNumber` is </span><span class="s3">\&quot;</span><span class="s1">91123456789</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\r\n</span><span class="s1">// which means that the national part of `this.digits` isn't simply equal to</span><span class="s3">\r\n</span><span class="s1">// `this.nationalPrefix` + `this.nationalSignificantNumber`.</span><span class="s3">\r\n</span><span class="s1">//</span><span class="s3">\r\n</span><span class="s1">// Also, a `format` can add extra digits to the `this.nationalSignificantNumber`</span><span class="s3">\r\n</span><span class="s1">// being formatted via `metadata[country].national_prefix_transform_rule`.</span><span class="s3">\r\n</span><span class="s1">// For example, for `VI` country, it prepends `340` to the national number,</span><span class="s3">\r\n</span><span class="s1">// and if this check hasn't been implemented, then there would be a bug</span><span class="s3">\r\n</span><span class="s1">// when `340` </span><span class="s3">\&quot;</span><span class="s1">area coude</span><span class="s3">\&quot; </span><span class="s1">is </span><span class="s3">\&quot;</span><span class="s1">duplicated</span><span class="s3">\&quot; </span><span class="s1">during input for `VI` country:</span><span class="s3">\r\n</span><span class="s1">// https://github.com/catamphetamine/libphonenumber-js/issues/318</span><span class="s3">\r\n</span><span class="s1">//</span><span class="s3">\r\n</span><span class="s1">// So, all these </span><span class="s3">\&quot;</span><span class="s1">gotchas</span><span class="s3">\&quot; </span><span class="s1">are filtered out.</span><span class="s3">\r\n</span><span class="s1">//</span><span class="s3">\r\n</span><span class="s1">// In the original Google's code, the comments say:</span><span class="s3">\r\n</span><span class="s1">// </span><span class="s3">\&quot;</span><span class="s1">Check that we didn't remove nor add any extra digits when we matched</span><span class="s3">\r\n</span><span class="s1">// this formatting pattern. This usually happens after we entered the last</span><span class="s3">\r\n</span><span class="s1">// digit during AYTF. Eg: In case of MX, we swallow mobile token (1) when</span><span class="s3">\r\n</span><span class="s1">// formatted but AYTF should retain all the number entered and not change</span><span class="s3">\r\n</span><span class="s1">// in order to match a format (of same leading digits and length) display</span><span class="s3">\r\n</span><span class="s1">// in that way.</span><span class="s3">\&quot;\r\n</span><span class="s1">// </span><span class="s3">\&quot;</span><span class="s1">If it's the same (i.e entered number and format is same), then it's</span><span class="s3">\r\n</span><span class="s1">// safe to return this in formatted number as nothing is lost / added.</span><span class="s3">\&quot;\r\n</span><span class="s1">// Otherwise, don't use this format.</span><span class="s3">\r\n</span><span class="s1">// https://github.com/google/libphonenumber/commit/3e7c1f04f5e7200f87fb131e6f85c6e99d60f510#diff-9149457fa9f5d608a11bb975c6ef4bc5</span><span class="s3">\r\n</span><span class="s1">// https://github.com/google/libphonenumber/commit/3ac88c7106e7dcb553bcc794b15f19185928a1c6#diff-2dcb77e833422ee304da348b905cde0b</span><span class="s3">\r\n</span><span class="s1">//</span><span class="s3">\r\n</span><span class="s1">function isValidFormattedNationalNumber(formattedNationalNumber, state) {</span><span class="s3">\r\n\t</span><span class="s1">return parseDigits(formattedNationalNumber) === state.getNationalDigits()</span><span class="s3">\r\n</span><span class="s1">}&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[]}</span></pre>
</body>
</html>