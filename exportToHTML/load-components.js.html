<html>
<head>
<title>load-components.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #1750eb;}
.s4 { color: #8c8c8c; font-style: italic;}
.s5 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
load-components.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s1">evalManifestWithRetries: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">loadComponents: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">loadManifestWithRetries: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">tryLoadManifestWithRetries: </span><span class="s2">null</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">_export(target, all) {</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">name </span><span class="s2">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s1">evalManifestWithRetries: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">evalManifestWithRetries;</span>
    <span class="s1">},</span>
    <span class="s1">loadComponents: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">loadComponents;</span>
    <span class="s1">},</span>
    <span class="s1">loadManifestWithRetries: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">loadManifestWithRetries;</span>
    <span class="s1">},</span>
    <span class="s1">tryLoadManifestWithRetries: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">tryLoadManifestWithRetries;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_constants = require(</span><span class="s0">&quot;../shared/lib/constants&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_path = require(</span><span class="s0">&quot;path&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_require = require(</span><span class="s0">&quot;./require&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_interopdefault = require(</span><span class="s0">&quot;../lib/interop-default&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_tracer = require(</span><span class="s0">&quot;./lib/trace/tracer&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_constants1 = require(</span><span class="s0">&quot;./lib/trace/constants&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_loadmanifestexternal = require(</span><span class="s0">&quot;./load-manifest.external&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_wait = require(</span><span class="s0">&quot;../lib/wait&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_encryptionutils = require(</span><span class="s0">&quot;./app-render/encryption-utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_actionutils = require(</span><span class="s0">&quot;./app-render/action-utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_normalizepagepath = require(</span><span class="s0">&quot;../shared/lib/page-path/normalize-page-path&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_ismetadataroute = require(</span><span class="s0">&quot;../lib/metadata/is-metadata-route&quot;</span><span class="s1">);</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">loadManifestWithRetries(manifestPath, attempts = </span><span class="s3">3</span><span class="s1">) {</span>
    <span class="s2">while</span><span class="s1">(</span><span class="s2">true</span><span class="s1">){</span>
        <span class="s2">try </span><span class="s1">{</span>
            <span class="s2">return </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _loadmanifestexternal.loadManifest)(manifestPath);</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
            <span class="s1">attempts--;</span>
            <span class="s2">if </span><span class="s1">(attempts &lt;= </span><span class="s3">0</span><span class="s1">) </span><span class="s2">throw </span><span class="s1">err;</span>
            <span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _wait.wait)(</span><span class="s3">100</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">tryLoadManifestWithRetries(manifestPath, attempts = </span><span class="s3">3</span><span class="s1">) {</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s2">return await </span><span class="s1">loadManifestWithRetries(manifestPath, attempts);</span>
    <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
        <span class="s2">return </span><span class="s1">undefined;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">evalManifestWithRetries(manifestPath, attempts = </span><span class="s3">3</span><span class="s1">) {</span>
    <span class="s2">while</span><span class="s1">(</span><span class="s2">true</span><span class="s1">){</span>
        <span class="s2">try </span><span class="s1">{</span>
            <span class="s2">return </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _loadmanifestexternal.evalManifest)(manifestPath);</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
            <span class="s1">attempts--;</span>
            <span class="s2">if </span><span class="s1">(attempts &lt;= </span><span class="s3">0</span><span class="s1">) </span><span class="s2">throw </span><span class="s1">err;</span>
            <span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _wait.wait)(</span><span class="s3">100</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">tryLoadClientReferenceManifest(manifestPath, entryName, attempts) {</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s2">const </span><span class="s1">context = </span><span class="s2">await </span><span class="s1">evalManifestWithRetries(manifestPath, attempts);</span>
        <span class="s2">return </span><span class="s1">context.__RSC_MANIFEST[entryName];</span>
    <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
        <span class="s2">return </span><span class="s1">undefined;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">loadComponentsImpl({ distDir, page, isAppPath, isDev, sriEnabled }) {</span>
    <span class="s2">let </span><span class="s1">DocumentMod = {};</span>
    <span class="s2">let </span><span class="s1">AppMod = {};</span>
    <span class="s2">if </span><span class="s1">(!isAppPath) {</span>
        <span class="s1">;</span>
        <span class="s1">[DocumentMod, AppMod] = </span><span class="s2">await </span><span class="s1">Promise.all([</span>
            <span class="s1">(</span><span class="s3">0</span><span class="s1">, _require.requirePage)(</span><span class="s0">'/_document'</span><span class="s1">, distDir, </span><span class="s2">false</span><span class="s1">),</span>
            <span class="s1">(</span><span class="s3">0</span><span class="s1">, _require.requirePage)(</span><span class="s0">'/_app'</span><span class="s1">, distDir, </span><span class="s2">false</span><span class="s1">)</span>
        <span class="s1">]);</span>
    <span class="s1">}</span>
    <span class="s4">// In dev mode we retry loading a manifest file to handle a race condition</span>
    <span class="s4">// that can occur while app and pages are compiling at the same time, and the</span>
    <span class="s4">// build-manifest is still being written to disk while an app path is</span>
    <span class="s4">// attempting to load.</span>
    <span class="s2">const </span><span class="s1">manifestLoadAttempts = isDev ? </span><span class="s3">3 </span><span class="s1">: </span><span class="s3">1</span><span class="s1">;</span>
    <span class="s2">let </span><span class="s1">reactLoadableManifestPath;</span>
    <span class="s2">if </span><span class="s1">(!process.env.TURBOPACK) {</span>
        <span class="s1">reactLoadableManifestPath = (</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, _constants.REACT_LOADABLE_MANIFEST);</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(isAppPath) {</span>
        <span class="s1">reactLoadableManifestPath = (</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">'server'</span><span class="s1">, </span><span class="s0">'app'</span><span class="s1">, page, _constants.REACT_LOADABLE_MANIFEST);</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">reactLoadableManifestPath = (</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">'server'</span><span class="s1">, </span><span class="s0">'pages'</span><span class="s1">, (</span><span class="s3">0</span><span class="s1">, _normalizepagepath.normalizePagePath)(page), _constants.REACT_LOADABLE_MANIFEST);</span>
    <span class="s1">}</span>
    <span class="s4">// Make sure to avoid loading the manifest for static metadata routes for better performance.</span>
    <span class="s2">const </span><span class="s1">hasClientManifest = !(</span><span class="s3">0</span><span class="s1">, _ismetadataroute.isStaticMetadataRoute)(page);</span>
    <span class="s4">// Load the manifest files first</span>
    <span class="s4">//</span>
    <span class="s4">// Loading page-specific manifests shouldn't throw an error if the manifest couldn't be found, so</span>
    <span class="s4">// that the `requirePage` call below will throw the correct error in that case</span>
    <span class="s4">// (a `PageNotFoundError`).</span>
    <span class="s2">const </span><span class="s1">[buildManifest, reactLoadableManifest, dynamicCssManifest, clientReferenceManifest, serverActionsManifest, subresourceIntegrityManifest] = </span><span class="s2">await </span><span class="s1">Promise.all([</span>
        <span class="s1">loadManifestWithRetries((</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, _constants.BUILD_MANIFEST), manifestLoadAttempts),</span>
        <span class="s1">tryLoadManifestWithRetries(reactLoadableManifestPath, manifestLoadAttempts),</span>
        <span class="s4">// This manifest will only exist in Pages dir &amp;&amp; Production &amp;&amp; Webpack.</span>
        <span class="s1">isAppPath || process.env.TURBOPACK ? undefined : loadManifestWithRetries((</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">`</span><span class="s1">${_constants.DYNAMIC_CSS_MANIFEST}</span><span class="s0">.json`</span><span class="s1">), manifestLoadAttempts).catch(()=&gt;undefined),</span>
        <span class="s1">isAppPath &amp;&amp; hasClientManifest ? tryLoadClientReferenceManifest((</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">'server'</span><span class="s1">, </span><span class="s0">'app'</span><span class="s1">, page.replace(</span><span class="s5">/%5F/g</span><span class="s1">, </span><span class="s0">'_'</span><span class="s1">) + </span><span class="s0">'_' </span><span class="s1">+ _constants.CLIENT_REFERENCE_MANIFEST + </span><span class="s0">'.js'</span><span class="s1">), page.replace(</span><span class="s5">/%5F/g</span><span class="s1">, </span><span class="s0">'_'</span><span class="s1">), manifestLoadAttempts) : undefined,</span>
        <span class="s1">isAppPath ? loadManifestWithRetries((</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">'server'</span><span class="s1">, _constants.SERVER_REFERENCE_MANIFEST + </span><span class="s0">'.json'</span><span class="s1">), manifestLoadAttempts).catch(()=&gt;</span><span class="s2">null</span><span class="s1">) : </span><span class="s2">null</span><span class="s1">,</span>
        <span class="s1">sriEnabled ? loadManifestWithRetries((</span><span class="s3">0</span><span class="s1">, _path.join)(distDir, </span><span class="s0">'server'</span><span class="s1">, _constants.SUBRESOURCE_INTEGRITY_MANIFEST + </span><span class="s0">'.json'</span><span class="s1">)).catch(()=&gt;undefined) : undefined</span>
    <span class="s1">]);</span>
    <span class="s4">// Before requiring the actual page module, we have to set the reference</span>
    <span class="s4">// manifests to our global store so Server Action's encryption util can access</span>
    <span class="s4">// to them at the top level of the page module.</span>
    <span class="s2">if </span><span class="s1">(serverActionsManifest &amp;&amp; clientReferenceManifest) {</span>
        <span class="s1">(</span><span class="s3">0</span><span class="s1">, _encryptionutils.setReferenceManifestsSingleton)({</span>
            <span class="s1">page,</span>
            <span class="s1">clientReferenceManifest,</span>
            <span class="s1">serverActionsManifest,</span>
            <span class="s1">serverModuleMap: (</span><span class="s3">0</span><span class="s1">, _actionutils.createServerModuleMap)({</span>
                <span class="s1">serverActionsManifest</span>
            <span class="s1">})</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">ComponentMod = </span><span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _require.requirePage)(page, distDir, isAppPath);</span>
    <span class="s2">const </span><span class="s1">Component = (</span><span class="s3">0</span><span class="s1">, _interopdefault.interopDefault)(ComponentMod);</span>
    <span class="s2">const </span><span class="s1">Document = (</span><span class="s3">0</span><span class="s1">, _interopdefault.interopDefault)(DocumentMod);</span>
    <span class="s2">const </span><span class="s1">App = (</span><span class="s3">0</span><span class="s1">, _interopdefault.interopDefault)(AppMod);</span>
    <span class="s2">const </span><span class="s1">{ getServerSideProps, getStaticProps, getStaticPaths, routeModule } = ComponentMod;</span>
    <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">App,</span>
        <span class="s1">Document,</span>
        <span class="s1">Component,</span>
        <span class="s1">buildManifest,</span>
        <span class="s1">subresourceIntegrityManifest,</span>
        <span class="s1">reactLoadableManifest: reactLoadableManifest || {},</span>
        <span class="s1">dynamicCssManifest,</span>
        <span class="s1">pageConfig: ComponentMod.config || {},</span>
        <span class="s1">ComponentMod,</span>
        <span class="s1">getServerSideProps,</span>
        <span class="s1">getStaticProps,</span>
        <span class="s1">getStaticPaths,</span>
        <span class="s1">clientReferenceManifest,</span>
        <span class="s1">serverActionsManifest,</span>
        <span class="s1">isAppPath,</span>
        <span class="s1">page,</span>
        <span class="s1">routeModule</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">loadComponents = (</span><span class="s3">0</span><span class="s1">, _tracer.getTracer)().wrap(_constants1.LoadComponentsSpan.loadComponents, loadComponentsImpl);</span>

<span class="s4">//# sourceMappingURL=load-components.js.map</span></pre>
</body>
</html>