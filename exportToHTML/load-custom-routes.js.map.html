<html>
<head>
<title>load-custom-routes.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
load-custom-routes.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/lib/load-custom-routes.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextConfig } from '../server/config'</span><span class="s3">\n</span><span class="s1">import type { Token } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n\n</span><span class="s1">import { bold, yellow } from './picocolors'</span><span class="s3">\n</span><span class="s1">import { escapeStringRegexp } from '../shared/lib/escape-regexp'</span><span class="s3">\n</span><span class="s1">import { tryToParsePath } from './try-to-parse-path'</span><span class="s3">\n</span><span class="s1">import { allowedStatusCodes } from './redirect-status'</span><span class="s3">\n</span><span class="s1">import { isFullStringUrl } from './url'</span><span class="s3">\n\n</span><span class="s1">export type RouteHas =</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">type: string</span><span class="s3">\n      </span><span class="s1">key: string</span><span class="s3">\n      </span><span class="s1">value?: string</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">type: 'host'</span><span class="s3">\n      </span><span class="s1">key?: undefined</span><span class="s3">\n      </span><span class="s1">value: string</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type Rewrite = {</span><span class="s3">\n  </span><span class="s1">source: string</span><span class="s3">\n  </span><span class="s1">destination: string</span><span class="s3">\n  </span><span class="s1">basePath?: false</span><span class="s3">\n  </span><span class="s1">locale?: false</span><span class="s3">\n  </span><span class="s1">has?: RouteHas[]</span><span class="s3">\n  </span><span class="s1">missing?: RouteHas[]</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @internal - used internally for routing</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">internal?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type Header = {</span><span class="s3">\n  </span><span class="s1">source: string</span><span class="s3">\n  </span><span class="s1">basePath?: false</span><span class="s3">\n  </span><span class="s1">locale?: false</span><span class="s3">\n  </span><span class="s1">headers: Array&lt;{ key: string; value: string }&gt;</span><span class="s3">\n  </span><span class="s1">has?: RouteHas[]</span><span class="s3">\n  </span><span class="s1">missing?: RouteHas[]</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @internal - used internally for routing</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">internal?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// internal type used for validation (not user facing)</span><span class="s3">\n</span><span class="s1">export type Redirect = {</span><span class="s3">\n  </span><span class="s1">source: string</span><span class="s3">\n  </span><span class="s1">destination: string</span><span class="s3">\n  </span><span class="s1">basePath?: false</span><span class="s3">\n  </span><span class="s1">locale?: false</span><span class="s3">\n  </span><span class="s1">has?: RouteHas[]</span><span class="s3">\n  </span><span class="s1">missing?: RouteHas[]</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @internal - used internally for routing</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">internal?: boolean</span><span class="s3">\n</span><span class="s1">} &amp; (</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">statusCode?: never</span><span class="s3">\n      </span><span class="s1">permanent: boolean</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">statusCode: number</span><span class="s3">\n      </span><span class="s1">permanent?: never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">export type Middleware = {</span><span class="s3">\n  </span><span class="s1">source: string</span><span class="s3">\n  </span><span class="s1">locale?: false</span><span class="s3">\n  </span><span class="s1">has?: RouteHas[]</span><span class="s3">\n  </span><span class="s1">missing?: RouteHas[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const allowedHasTypes = new Set(['header', 'cookie', 'query', 'host'])</span><span class="s3">\n</span><span class="s1">const namedGroupsRegex = /</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">?&lt;([a-zA-Z][a-zA-Z0-9]*)&gt;/g</span><span class="s3">\n\n</span><span class="s1">export function normalizeRouteRegex(regex: string) {</span><span class="s3">\n  </span><span class="s1">// clean up un-necessary escaping from regex.source which turns / into </span><span class="s3">\\\\</span><span class="s1">/</span><span class="s3">\n  </span><span class="s1">return regex.replace(/</span><span class="s3">\\\\\\</span><span class="s1">//g, '/')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function checkRedirect(route: Redirect): {</span><span class="s3">\n  </span><span class="s1">invalidParts: string[]</span><span class="s3">\n  </span><span class="s1">hadInvalidStatus: boolean</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">const invalidParts: string[] = []</span><span class="s3">\n  </span><span class="s1">let hadInvalidStatus: boolean = false</span><span class="s3">\n\n  </span><span class="s1">if (route.statusCode &amp;&amp; !allowedStatusCodes.has(route['statusCode'])) {</span><span class="s3">\n    </span><span class="s1">hadInvalidStatus = true</span><span class="s3">\n    </span><span class="s1">invalidParts.push(`</span><span class="s3">\\</span><span class="s1">`statusCode</span><span class="s3">\\</span><span class="s1">` is not undefined or valid statusCode`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (typeof route.permanent !== 'boolean' &amp;&amp; !route['statusCode']) {</span><span class="s3">\n    </span><span class="s1">invalidParts.push(`</span><span class="s3">\\</span><span class="s1">`permanent</span><span class="s3">\\</span><span class="s1">` is not set to </span><span class="s3">\\</span><span class="s1">`true</span><span class="s3">\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`false</span><span class="s3">\\</span><span class="s1">``)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">invalidParts,</span><span class="s3">\n    </span><span class="s1">hadInvalidStatus,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function checkHeader(route: Header): string[] {</span><span class="s3">\n  </span><span class="s1">const invalidParts: string[] = []</span><span class="s3">\n\n  </span><span class="s1">if (!Array.isArray(route.headers)) {</span><span class="s3">\n    </span><span class="s1">invalidParts.push('`headers` field must be an array')</span><span class="s3">\n  </span><span class="s1">} else if (route.headers.length === 0) {</span><span class="s3">\n    </span><span class="s1">invalidParts.push('`headers` field cannot be empty')</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">for (const header of route.headers) {</span><span class="s3">\n      </span><span class="s1">if (!header || typeof header !== 'object') {</span><span class="s3">\n        </span><span class="s1">invalidParts.push(</span><span class="s3">\n          \&quot;</span><span class="s1">`headers` items must be object with { key: '', value: '' }</span><span class="s3">\&quot;\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof header.key !== 'string') {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`key` in header item must be string')</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof header.value !== 'string') {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`value` in header item must be string')</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return invalidParts</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RouteType = 'rewrite' | 'redirect' | 'header'</span><span class="s3">\n\n</span><span class="s1">export function checkCustomRoutes(</span><span class="s3">\n  </span><span class="s1">routes: Redirect[] | Header[] | Rewrite[] | Middleware[],</span><span class="s3">\n  </span><span class="s1">type: RouteType | 'middleware'</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">if (!Array.isArray(routes)) {</span><span class="s3">\n    </span><span class="s1">console.error(</span><span class="s3">\n      </span><span class="s1">`Error: ${type}s must return an array, received ${typeof routes}.</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`See here for more info: https://nextjs.org/docs/messages/routes-must-be-array`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">process.exit(1)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let numInvalidRoutes = 0</span><span class="s3">\n  </span><span class="s1">let hadInvalidStatus = false</span><span class="s3">\n  </span><span class="s1">let hadInvalidHas = false</span><span class="s3">\n  </span><span class="s1">let hadInvalidMissing = false</span><span class="s3">\n\n  </span><span class="s1">const allowedKeys = new Set&lt;string&gt;(['source', 'locale', 'has', 'missing'])</span><span class="s3">\n\n  </span><span class="s1">if (type === 'rewrite') {</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('basePath')</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('destination')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === 'redirect') {</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('basePath')</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('statusCode')</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('permanent')</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('destination')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (type === 'header') {</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('basePath')</span><span class="s3">\n    </span><span class="s1">allowedKeys.add('headers')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const route of routes) {</span><span class="s3">\n    </span><span class="s1">if (!route || typeof route !== 'object') {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`The route ${JSON.stringify(</span><span class="s3">\n          </span><span class="s1">route</span><span class="s3">\n        </span><span class="s1">)} is not a valid object with </span><span class="s3">\\</span><span class="s1">`source</span><span class="s3">\\</span><span class="s1">`${</span><span class="s3">\n          </span><span class="s1">type !== 'middleware'</span><span class="s3">\n            </span><span class="s1">? ` and </span><span class="s3">\\</span><span class="s1">`${type === 'header' ? 'headers' : 'destination'}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n            </span><span class="s1">: ''</span><span class="s3">\n        </span><span class="s1">}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">numInvalidRoutes++</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">type === 'rewrite' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(route as Rewrite).basePath === false &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!(</span><span class="s3">\n        </span><span class="s1">(route as Rewrite).destination.startsWith('http://') ||</span><span class="s3">\n        </span><span class="s1">(route as Rewrite).destination.startsWith('https://')</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`The route ${</span><span class="s3">\n          </span><span class="s1">(route as Rewrite).source</span><span class="s3">\n        </span><span class="s1">} rewrites urls outside of the basePath. Please use a destination that starts with </span><span class="s3">\\</span><span class="s1">`http://</span><span class="s3">\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`https://</span><span class="s3">\\</span><span class="s1">` https://nextjs.org/docs/messages/invalid-external-rewrite`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">numInvalidRoutes++</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const keys = Object.keys(route)</span><span class="s3">\n    </span><span class="s1">const invalidKeys = keys.filter((key) =&gt; !allowedKeys.has(key))</span><span class="s3">\n    </span><span class="s1">const invalidParts: string[] = []</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">'basePath' in route &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof route.basePath !== 'undefined' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">route.basePath !== false</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">invalidParts.push('`basePath` must be undefined or false')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof route.locale !== 'undefined' &amp;&amp; route.locale !== false) {</span><span class="s3">\n      </span><span class="s1">invalidParts.push('`locale` must be undefined or false')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const checkInvalidHasMissing = (</span><span class="s3">\n      </span><span class="s1">items: any,</span><span class="s3">\n      </span><span class="s1">fieldName: 'has' | 'missing'</span><span class="s3">\n    </span><span class="s1">) =&gt; {</span><span class="s3">\n      </span><span class="s1">let hadInvalidItem = false</span><span class="s3">\n\n      </span><span class="s1">if (typeof items !== 'undefined' &amp;&amp; !Array.isArray(items)) {</span><span class="s3">\n        </span><span class="s1">invalidParts.push(</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`${fieldName}</span><span class="s3">\\</span><span class="s1">` must be undefined or valid has object`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">hadInvalidItem = true</span><span class="s3">\n      </span><span class="s1">} else if (items) {</span><span class="s3">\n        </span><span class="s1">const invalidHasItems = []</span><span class="s3">\n\n        </span><span class="s1">for (const hasItem of items) {</span><span class="s3">\n          </span><span class="s1">let invalidHasParts = []</span><span class="s3">\n\n          </span><span class="s1">if (!allowedHasTypes.has(hasItem.type)) {</span><span class="s3">\n            </span><span class="s1">invalidHasParts.push(`invalid type </span><span class="s3">\&quot;</span><span class="s1">${hasItem.type}</span><span class="s3">\&quot;</span><span class="s1">`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (typeof hasItem.key !== 'string' &amp;&amp; hasItem.type !== 'host') {</span><span class="s3">\n            </span><span class="s1">invalidHasParts.push(`invalid key </span><span class="s3">\&quot;</span><span class="s1">${hasItem.key}</span><span class="s3">\&quot;</span><span class="s1">`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">typeof hasItem.value !== 'undefined' &amp;&amp;</span><span class="s3">\n            </span><span class="s1">typeof hasItem.value !== 'string'</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">invalidHasParts.push(`invalid value </span><span class="s3">\&quot;</span><span class="s1">${hasItem.value}</span><span class="s3">\&quot;</span><span class="s1">`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (typeof hasItem.value === 'undefined' &amp;&amp; hasItem.type === 'host') {</span><span class="s3">\n            </span><span class="s1">invalidHasParts.push(`value is required for </span><span class="s3">\&quot;</span><span class="s1">host</span><span class="s3">\&quot; </span><span class="s1">type`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (invalidHasParts.length &gt; 0) {</span><span class="s3">\n            </span><span class="s1">invalidHasItems.push(</span><span class="s3">\n              </span><span class="s1">`${invalidHasParts.join(', ')} for ${JSON.stringify(hasItem)}`</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (invalidHasItems.length &gt; 0) {</span><span class="s3">\n          </span><span class="s1">hadInvalidItem = true</span><span class="s3">\n          </span><span class="s1">const itemStr = `item${invalidHasItems.length === 1 ? '' : 's'}`</span><span class="s3">\n\n          </span><span class="s1">console.error(</span><span class="s3">\n            </span><span class="s1">`Invalid </span><span class="s3">\\</span><span class="s1">`${fieldName}</span><span class="s3">\\</span><span class="s1">` ${itemStr}:</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n              </span><span class="s1">invalidHasItems.join('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">console.error()</span><span class="s3">\n          </span><span class="s1">invalidParts.push(`invalid </span><span class="s3">\\</span><span class="s1">`${fieldName}</span><span class="s3">\\</span><span class="s1">` ${itemStr} found`)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return hadInvalidItem</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (checkInvalidHasMissing(route.has, 'has')) {</span><span class="s3">\n      </span><span class="s1">hadInvalidHas = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (checkInvalidHasMissing(route.missing, 'missing')) {</span><span class="s3">\n      </span><span class="s1">hadInvalidMissing = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!route.source) {</span><span class="s3">\n      </span><span class="s1">invalidParts.push('`source` is missing')</span><span class="s3">\n    </span><span class="s1">} else if (typeof route.source !== 'string') {</span><span class="s3">\n      </span><span class="s1">invalidParts.push('`source` is not a string')</span><span class="s3">\n    </span><span class="s1">} else if (!route.source.startsWith('/')) {</span><span class="s3">\n      </span><span class="s1">invalidParts.push('`source` does not start with /')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (type === 'header') {</span><span class="s3">\n      </span><span class="s1">invalidParts.push(...checkHeader(route as Header))</span><span class="s3">\n    </span><span class="s1">} else if (type !== 'middleware') {</span><span class="s3">\n      </span><span class="s1">let _route = route as Rewrite | Redirect</span><span class="s3">\n      </span><span class="s1">if (!_route.destination) {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`destination` is missing')</span><span class="s3">\n      </span><span class="s1">} else if (typeof _route.destination !== 'string') {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`destination` is not a string')</span><span class="s3">\n      </span><span class="s1">} else if (</span><span class="s3">\n        </span><span class="s1">type === 'rewrite' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!_route.destination.match(/^(</span><span class="s3">\\</span><span class="s1">/|https:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/|http:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/)/)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">invalidParts.push(</span><span class="s3">\n          </span><span class="s1">'`destination` does not start with `/`, `http://`, or `https://`'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (type === 'redirect') {</span><span class="s3">\n      </span><span class="s1">const result = checkRedirect(route as Redirect)</span><span class="s3">\n      </span><span class="s1">hadInvalidStatus = hadInvalidStatus || result.hadInvalidStatus</span><span class="s3">\n      </span><span class="s1">invalidParts.push(...result.invalidParts)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let sourceTokens: Token[] | undefined</span><span class="s3">\n\n    </span><span class="s1">if (typeof route.source === 'string' &amp;&amp; route.source.startsWith('/')) {</span><span class="s3">\n      </span><span class="s1">// only show parse error if we didn't already show error</span><span class="s3">\n      </span><span class="s1">// for not being a string</span><span class="s3">\n      </span><span class="s1">const { tokens, error, regexStr } = tryToParsePath(route.source)</span><span class="s3">\n\n      </span><span class="s1">if (error) {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`source` parse failed')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (regexStr &amp;&amp; regexStr.length &gt; 4096) {</span><span class="s3">\n        </span><span class="s1">invalidParts.push('`source` exceeds max built length of 4096')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">sourceTokens = tokens</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const hasSegments = new Set&lt;string&gt;()</span><span class="s3">\n\n    </span><span class="s1">if (route.has) {</span><span class="s3">\n      </span><span class="s1">for (const hasItem of route.has) {</span><span class="s3">\n        </span><span class="s1">if (!hasItem.value &amp;&amp; hasItem.key) {</span><span class="s3">\n          </span><span class="s1">hasSegments.add(hasItem.key)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (hasItem.value) {</span><span class="s3">\n          </span><span class="s1">for (const match of hasItem.value.matchAll(namedGroupsRegex)) {</span><span class="s3">\n            </span><span class="s1">if (match[1]) {</span><span class="s3">\n              </span><span class="s1">hasSegments.add(match[1])</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (hasItem.type === 'host') {</span><span class="s3">\n            </span><span class="s1">hasSegments.add('host')</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// make sure no unnamed patterns are attempted to be used in the</span><span class="s3">\n    </span><span class="s1">// destination as this can cause confusion and is not allowed</span><span class="s3">\n    </span><span class="s1">if (typeof (route as Rewrite).destination === 'string') {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">(route as Rewrite).destination.startsWith('/') &amp;&amp;</span><span class="s3">\n        </span><span class="s1">Array.isArray(sourceTokens)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">const unnamedInDest = new Set()</span><span class="s3">\n\n        </span><span class="s1">for (const token of sourceTokens) {</span><span class="s3">\n          </span><span class="s1">if (typeof token === 'object' &amp;&amp; typeof token.name === 'number') {</span><span class="s3">\n            </span><span class="s1">const unnamedIndex = new RegExp(`:${token.name}(?!</span><span class="s3">\\\\</span><span class="s1">d)`)</span><span class="s3">\n            </span><span class="s1">if ((route as Rewrite).destination.match(unnamedIndex)) {</span><span class="s3">\n              </span><span class="s1">unnamedInDest.add(`:${token.name}`)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (unnamedInDest.size &gt; 0) {</span><span class="s3">\n          </span><span class="s1">invalidParts.push(</span><span class="s3">\n            </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`destination</span><span class="s3">\\</span><span class="s1">` has unnamed params ${[...unnamedInDest].join(</span><span class="s3">\n              </span><span class="s1">', '</span><span class="s3">\n            </span><span class="s1">)}`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">const {</span><span class="s3">\n            </span><span class="s1">tokens: destTokens,</span><span class="s3">\n            </span><span class="s1">regexStr: destRegexStr,</span><span class="s3">\n            </span><span class="s1">error: destinationParseFailed,</span><span class="s3">\n          </span><span class="s1">} = tryToParsePath((route as Rewrite).destination, {</span><span class="s3">\n            </span><span class="s1">handleUrl: true,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n\n          </span><span class="s1">if (destRegexStr &amp;&amp; destRegexStr.length &gt; 4096) {</span><span class="s3">\n            </span><span class="s1">invalidParts.push('`destination` exceeds max built length of 4096')</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (destinationParseFailed) {</span><span class="s3">\n            </span><span class="s1">invalidParts.push('`destination` parse failed')</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">const sourceSegments = new Set(</span><span class="s3">\n              </span><span class="s1">sourceTokens</span><span class="s3">\n                </span><span class="s1">.map((item) =&gt; typeof item === 'object' &amp;&amp; item.name)</span><span class="s3">\n                </span><span class="s1">.filter(Boolean)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">const invalidDestSegments = new Set()</span><span class="s3">\n\n            </span><span class="s1">for (const token of destTokens!) {</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">typeof token === 'object' &amp;&amp;</span><span class="s3">\n                </span><span class="s1">!sourceSegments.has(token.name) &amp;&amp;</span><span class="s3">\n                </span><span class="s1">!hasSegments.has(token.name as string)</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">invalidDestSegments.add(token.name)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">if (invalidDestSegments.size) {</span><span class="s3">\n              </span><span class="s1">invalidParts.push(</span><span class="s3">\n                </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`destination</span><span class="s3">\\</span><span class="s1">` has segments not in </span><span class="s3">\\</span><span class="s1">`source</span><span class="s3">\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`has</span><span class="s3">\\</span><span class="s1">` (${[</span><span class="s3">\n                  </span><span class="s1">...invalidDestSegments,</span><span class="s3">\n                </span><span class="s1">].join(', ')})`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const hasInvalidKeys = invalidKeys.length &gt; 0</span><span class="s3">\n    </span><span class="s1">const hasInvalidParts = invalidParts.length &gt; 0</span><span class="s3">\n\n    </span><span class="s1">if (hasInvalidKeys || hasInvalidParts) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`${invalidParts.join(', ')}${</span><span class="s3">\n          </span><span class="s1">invalidKeys.length</span><span class="s3">\n            </span><span class="s1">? (hasInvalidParts ? ',' : '') +</span><span class="s3">\n              </span><span class="s1">` invalid field${invalidKeys.length === 1 ? '' : 's'}: ` +</span><span class="s3">\n              </span><span class="s1">invalidKeys.join(',')</span><span class="s3">\n            </span><span class="s1">: ''</span><span class="s3">\n        </span><span class="s1">} for route ${JSON.stringify(route)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">console.error()</span><span class="s3">\n      </span><span class="s1">numInvalidRoutes++</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (numInvalidRoutes &gt; 0) {</span><span class="s3">\n    </span><span class="s1">if (hadInvalidStatus) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nValid redirect statusCode values are ${[...allowedStatusCodes].join(</span><span class="s3">\n          </span><span class="s1">', '</span><span class="s3">\n        </span><span class="s1">)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (hadInvalidHas) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nValid </span><span class="s3">\\</span><span class="s1">`has</span><span class="s3">\\</span><span class="s1">` object shape is ${JSON.stringify(</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">type: [...allowedHasTypes].join(', '),</span><span class="s3">\n            </span><span class="s1">key: 'the key to check for',</span><span class="s3">\n            </span><span class="s1">value: 'undefined or a value string to match against',</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">null,</span><span class="s3">\n          </span><span class="s1">2</span><span class="s3">\n        </span><span class="s1">)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (hadInvalidMissing) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nValid </span><span class="s3">\\</span><span class="s1">`missing</span><span class="s3">\\</span><span class="s1">` object shape is ${JSON.stringify(</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">type: [...allowedHasTypes].join(', '),</span><span class="s3">\n            </span><span class="s1">key: 'the key to check for',</span><span class="s3">\n            </span><span class="s1">value: 'undefined or a value string to match against',</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">null,</span><span class="s3">\n          </span><span class="s1">2</span><span class="s3">\n        </span><span class="s1">)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">console.error()</span><span class="s3">\n    </span><span class="s1">console.error(</span><span class="s3">\n      </span><span class="s1">`Error: Invalid ${type}${numInvalidRoutes === 1 ? '' : 's'} found`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">process.exit(1)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CustomRoutes {</span><span class="s3">\n  </span><span class="s1">headers: Header[]</span><span class="s3">\n  </span><span class="s1">rewrites: {</span><span class="s3">\n    </span><span class="s1">fallback: Rewrite[]</span><span class="s3">\n    </span><span class="s1">afterFiles: Rewrite[]</span><span class="s3">\n    </span><span class="s1">beforeFiles: Rewrite[]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">redirects: Redirect[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function processRoutes&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">routes: T,</span><span class="s3">\n  </span><span class="s1">config: NextConfig,</span><span class="s3">\n  </span><span class="s1">type: 'redirect' | 'rewrite' | 'header'</span><span class="s3">\n</span><span class="s1">): T {</span><span class="s3">\n  </span><span class="s1">const _routes = routes as any as Array&lt;{</span><span class="s3">\n    </span><span class="s1">source: string</span><span class="s3">\n    </span><span class="s1">locale?: false</span><span class="s3">\n    </span><span class="s1">basePath?: false</span><span class="s3">\n    </span><span class="s1">destination?: string</span><span class="s3">\n  </span><span class="s1">}&gt;</span><span class="s3">\n  </span><span class="s1">const newRoutes: typeof _routes = []</span><span class="s3">\n  </span><span class="s1">const defaultLocales: Array&lt;{</span><span class="s3">\n    </span><span class="s1">locale: string</span><span class="s3">\n    </span><span class="s1">base: string</span><span class="s3">\n  </span><span class="s1">}&gt; = []</span><span class="s3">\n\n  </span><span class="s1">if (config.i18n &amp;&amp; type === 'redirect') {</span><span class="s3">\n    </span><span class="s1">for (const item of config.i18n?.domains || []) {</span><span class="s3">\n      </span><span class="s1">defaultLocales.push({</span><span class="s3">\n        </span><span class="s1">locale: item.defaultLocale,</span><span class="s3">\n        </span><span class="s1">base: `http${item.http ? '' : 's'}://${item.domain}`,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">defaultLocales.push({</span><span class="s3">\n      </span><span class="s1">locale: config.i18n.defaultLocale,</span><span class="s3">\n      </span><span class="s1">base: '',</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const r of _routes) {</span><span class="s3">\n    </span><span class="s1">const srcBasePath =</span><span class="s3">\n      </span><span class="s1">config.basePath &amp;&amp; r.basePath !== false ? config.basePath : ''</span><span class="s3">\n    </span><span class="s1">const isExternal = !r.destination?.startsWith('/')</span><span class="s3">\n    </span><span class="s1">const destBasePath = srcBasePath &amp;&amp; !isExternal ? srcBasePath : ''</span><span class="s3">\n\n    </span><span class="s1">if (config.i18n &amp;&amp; r.locale !== false) {</span><span class="s3">\n      </span><span class="s1">if (!isExternal) {</span><span class="s3">\n        </span><span class="s1">defaultLocales.forEach((item) =&gt; {</span><span class="s3">\n          </span><span class="s1">let destination</span><span class="s3">\n\n          </span><span class="s1">if (r.destination) {</span><span class="s3">\n            </span><span class="s1">destination = item.base</span><span class="s3">\n              </span><span class="s1">? `${item.base}${destBasePath}${r.destination}`</span><span class="s3">\n              </span><span class="s1">: `${destBasePath}${r.destination}`</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">newRoutes.push({</span><span class="s3">\n            </span><span class="s1">...r,</span><span class="s3">\n            </span><span class="s1">destination,</span><span class="s3">\n            </span><span class="s1">source: `${srcBasePath}/${item.locale}${</span><span class="s3">\n              </span><span class="s1">r.source === '/' &amp;&amp; !config.trailingSlash ? '' : r.source</span><span class="s3">\n            </span><span class="s1">}`,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">r.source = `/:nextInternalLocale(${config.i18n.locales</span><span class="s3">\n        </span><span class="s1">.map((locale: string) =&gt; escapeStringRegexp(locale))</span><span class="s3">\n        </span><span class="s1">.join('|')})${</span><span class="s3">\n        </span><span class="s1">r.source === '/' &amp;&amp; !config.trailingSlash ? '' : r.source</span><span class="s3">\n      </span><span class="s1">}`</span><span class="s3">\n\n      </span><span class="s1">if (r.destination &amp;&amp; r.destination?.startsWith('/')) {</span><span class="s3">\n        </span><span class="s1">r.destination = `/:nextInternalLocale${</span><span class="s3">\n          </span><span class="s1">r.destination === '/' &amp;&amp; !config.trailingSlash ? '' : r.destination</span><span class="s3">\n        </span><span class="s1">}`</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">r.source = `${srcBasePath}${</span><span class="s3">\n      </span><span class="s1">r.source === '/' &amp;&amp; srcBasePath ? '' : r.source</span><span class="s3">\n    </span><span class="s1">}`</span><span class="s3">\n\n    </span><span class="s1">if (r.destination) {</span><span class="s3">\n      </span><span class="s1">r.destination = `${destBasePath}${</span><span class="s3">\n        </span><span class="s1">r.destination === '/' &amp;&amp; destBasePath ? '' : r.destination</span><span class="s3">\n      </span><span class="s1">}`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">newRoutes.push(r)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return newRoutes as any as T</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function loadRedirects(config: NextConfig) {</span><span class="s3">\n  </span><span class="s1">if (typeof config.redirects !== 'function') {</span><span class="s3">\n    </span><span class="s1">return []</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let redirects = await config.redirects()</span><span class="s3">\n  </span><span class="s1">// check before we process the routes and after to ensure</span><span class="s3">\n  </span><span class="s1">// they are still valid</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(redirects, 'redirect')</span><span class="s3">\n\n  </span><span class="s1">// save original redirects before transforms</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(redirects)) {</span><span class="s3">\n    </span><span class="s1">config._originalRedirects = redirects.map((r) =&gt; ({ ...r }))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">redirects = processRoutes(redirects, config, 'redirect')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(redirects, 'redirect')</span><span class="s3">\n  </span><span class="s1">return redirects</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function loadRewrites(config: NextConfig) {</span><span class="s3">\n  </span><span class="s1">// If assetPrefix is set, add a rewrite for `/${assetPrefix}/_next/*`</span><span class="s3">\n  </span><span class="s1">// requests so that they are handled in any of dev, start, or deploy</span><span class="s3">\n  </span><span class="s1">// automatically without the user having to configure this.</span><span class="s3">\n  </span><span class="s1">// If the assetPrefix is an absolute URL, we still consider the path for automatic rewrite.</span><span class="s3">\n  </span><span class="s1">// but hostname routing must be handled by the user</span><span class="s3">\n  </span><span class="s1">let maybeAssetPrefixRewrite: Rewrite[] = []</span><span class="s3">\n  </span><span class="s1">if (config.assetPrefix) {</span><span class="s3">\n    </span><span class="s1">let prefix = config.assetPrefix</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">isFullStringUrl(config.assetPrefix) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">URL.canParse(config.assetPrefix)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">prefix = new URL(config.assetPrefix).pathname</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (prefix &amp;&amp; prefix !== '/') {</span><span class="s3">\n      </span><span class="s1">const assetPrefix = prefix.startsWith('/') ? prefix : `/${prefix}`</span><span class="s3">\n      </span><span class="s1">const basePath = config.basePath || ''</span><span class="s3">\n      </span><span class="s1">// If these are the same, then this would result in an infinite rewrite.</span><span class="s3">\n      </span><span class="s1">if (assetPrefix !== basePath) {</span><span class="s3">\n        </span><span class="s1">maybeAssetPrefixRewrite.push({</span><span class="s3">\n          </span><span class="s1">source: `${assetPrefix}/_next/:path+`,</span><span class="s3">\n          </span><span class="s1">destination: `${basePath}/_next/:path+`,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof config.rewrites !== 'function') {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">beforeFiles: [...maybeAssetPrefixRewrite],</span><span class="s3">\n      </span><span class="s1">afterFiles: [],</span><span class="s3">\n      </span><span class="s1">fallback: [],</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const _rewrites = await config.rewrites()</span><span class="s3">\n  </span><span class="s1">let beforeFiles: Rewrite[] = []</span><span class="s3">\n  </span><span class="s1">let afterFiles: Rewrite[] = []</span><span class="s3">\n  </span><span class="s1">let fallback: Rewrite[] = []</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">!Array.isArray(_rewrites) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof _rewrites === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">Object.keys(_rewrites).every(</span><span class="s3">\n      </span><span class="s1">(key) =&gt;</span><span class="s3">\n        </span><span class="s1">key === 'beforeFiles' || key === 'afterFiles' || key === 'fallback'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">beforeFiles = _rewrites.beforeFiles || []</span><span class="s3">\n    </span><span class="s1">afterFiles = _rewrites.afterFiles || []</span><span class="s3">\n    </span><span class="s1">fallback = _rewrites.fallback || []</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">afterFiles = _rewrites as any</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// check before we process the routes and after to ensure</span><span class="s3">\n  </span><span class="s1">// they are still valid</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(beforeFiles, 'rewrite')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(afterFiles, 'rewrite')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(fallback, 'rewrite')</span><span class="s3">\n\n  </span><span class="s1">// save original rewrites before transforms</span><span class="s3">\n  </span><span class="s1">config._originalRewrites = {</span><span class="s3">\n    </span><span class="s1">beforeFiles: beforeFiles.map((r) =&gt; ({ ...r })),</span><span class="s3">\n    </span><span class="s1">afterFiles: afterFiles.map((r) =&gt; ({ ...r })),</span><span class="s3">\n    </span><span class="s1">fallback: fallback.map((r) =&gt; ({ ...r })),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">beforeFiles = [</span><span class="s3">\n    </span><span class="s1">...maybeAssetPrefixRewrite,</span><span class="s3">\n    </span><span class="s1">...processRoutes(beforeFiles, config, 'rewrite'),</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">afterFiles = processRoutes(afterFiles, config, 'rewrite')</span><span class="s3">\n  </span><span class="s1">fallback = processRoutes(fallback, config, 'rewrite')</span><span class="s3">\n\n  </span><span class="s1">checkCustomRoutes(beforeFiles, 'rewrite')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(afterFiles, 'rewrite')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(fallback, 'rewrite')</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">beforeFiles,</span><span class="s3">\n    </span><span class="s1">afterFiles,</span><span class="s3">\n    </span><span class="s1">fallback,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function loadHeaders(config: NextConfig) {</span><span class="s3">\n  </span><span class="s1">if (typeof config.headers !== 'function') {</span><span class="s3">\n    </span><span class="s1">return []</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let headers = await config.headers()</span><span class="s3">\n  </span><span class="s1">// check before we process the routes and after to ensure</span><span class="s3">\n  </span><span class="s1">// they are still valid</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(headers, 'header')</span><span class="s3">\n\n  </span><span class="s1">headers = processRoutes(headers, config, 'header')</span><span class="s3">\n  </span><span class="s1">checkCustomRoutes(headers, 'header')</span><span class="s3">\n  </span><span class="s1">return headers</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default async function loadCustomRoutes(</span><span class="s3">\n  </span><span class="s1">config: NextConfig</span><span class="s3">\n</span><span class="s1">): Promise&lt;CustomRoutes&gt; {</span><span class="s3">\n  </span><span class="s1">const [headers, rewrites, redirects] = await Promise.all([</span><span class="s3">\n    </span><span class="s1">loadHeaders(config),</span><span class="s3">\n    </span><span class="s1">loadRewrites(config),</span><span class="s3">\n    </span><span class="s1">loadRedirects(config),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n\n  </span><span class="s1">const totalRewrites =</span><span class="s3">\n    </span><span class="s1">rewrites.beforeFiles.length +</span><span class="s3">\n    </span><span class="s1">rewrites.afterFiles.length +</span><span class="s3">\n    </span><span class="s1">rewrites.fallback.length</span><span class="s3">\n\n  </span><span class="s1">const totalRoutes = headers.length + redirects.length + totalRewrites</span><span class="s3">\n\n  </span><span class="s1">if (totalRoutes &gt; 1000) {</span><span class="s3">\n    </span><span class="s1">console.warn(</span><span class="s3">\n      </span><span class="s1">bold(yellow(`Warning: `)) +</span><span class="s3">\n        </span><span class="s1">`total number of custom routes exceeds 1000, this can reduce performance. Route counts:</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`headers: ${headers.length}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`rewrites: ${totalRewrites}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`redirects: ${redirects.length}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`See more info: https://nextjs.org/docs/messages/max-custom-routes-reached`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (config.experimental?.useSkewCookie &amp;&amp; config.deploymentId) {</span><span class="s3">\n    </span><span class="s1">headers.unshift({</span><span class="s3">\n      </span><span class="s1">source: '/:path*',</span><span class="s3">\n      </span><span class="s1">headers: [</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">key: 'Set-Cookie',</span><span class="s3">\n          </span><span class="s1">value: `__vdpl=${config.deploymentId}; Path=/; HttpOnly`,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!config.skipTrailingSlashRedirect) {</span><span class="s3">\n    </span><span class="s1">if (config.trailingSlash) {</span><span class="s3">\n      </span><span class="s1">redirects.unshift(</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">source: '/:file((?!</span><span class="s3">\\\\</span><span class="s1">.well-known(?:/.*)?)(?:[^/]+/)*[^/]+</span><span class="s3">\\\\</span><span class="s1">.</span><span class="s3">\\\\</span><span class="s1">w+)/',</span><span class="s3">\n          </span><span class="s1">destination: '/:file',</span><span class="s3">\n          </span><span class="s1">permanent: true,</span><span class="s3">\n          </span><span class="s1">locale: config.i18n ? false : undefined,</span><span class="s3">\n          </span><span class="s1">internal: true,</span><span class="s3">\n          </span><span class="s1">// don't run this redirect for _next/data requests</span><span class="s3">\n          </span><span class="s1">missing: [</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">type: 'header',</span><span class="s3">\n              </span><span class="s1">key: 'x-nextjs-data',</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">source: '/:notfile((?!</span><span class="s3">\\\\</span><span class="s1">.well-known(?:/.*)?)(?:[^/]+/)*[^/</span><span class="s3">\\\\</span><span class="s1">.]+)',</span><span class="s3">\n          </span><span class="s1">destination: '/:notfile/',</span><span class="s3">\n          </span><span class="s1">permanent: true,</span><span class="s3">\n          </span><span class="s1">locale: config.i18n ? false : undefined,</span><span class="s3">\n          </span><span class="s1">internal: true,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">if (config.basePath) {</span><span class="s3">\n        </span><span class="s1">redirects.unshift({</span><span class="s3">\n          </span><span class="s1">source: config.basePath,</span><span class="s3">\n          </span><span class="s1">destination: config.basePath + '/',</span><span class="s3">\n          </span><span class="s1">permanent: true,</span><span class="s3">\n          </span><span class="s1">basePath: false,</span><span class="s3">\n          </span><span class="s1">locale: config.i18n ? false : undefined,</span><span class="s3">\n          </span><span class="s1">internal: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">redirects.unshift({</span><span class="s3">\n        </span><span class="s1">source: '/:path+/',</span><span class="s3">\n        </span><span class="s1">destination: '/:path+',</span><span class="s3">\n        </span><span class="s1">permanent: true,</span><span class="s3">\n        </span><span class="s1">locale: config.i18n ? false : undefined,</span><span class="s3">\n        </span><span class="s1">internal: true,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">if (config.basePath) {</span><span class="s3">\n        </span><span class="s1">redirects.unshift({</span><span class="s3">\n          </span><span class="s1">source: config.basePath + '/',</span><span class="s3">\n          </span><span class="s1">destination: config.basePath,</span><span class="s3">\n          </span><span class="s1">permanent: true,</span><span class="s3">\n          </span><span class="s1">basePath: false,</span><span class="s3">\n          </span><span class="s1">locale: config.i18n ? false : undefined,</span><span class="s3">\n          </span><span class="s1">internal: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">headers,</span><span class="s3">\n    </span><span class="s1">rewrites,</span><span class="s3">\n    </span><span class="s1">redirects,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;checkCustomRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;loadCustomRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedHasTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;namedGroupsRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;checkRedirect&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidParts&quot;</span><span class="s0">,</span><span class="s1">&quot;hadInvalidStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedStatusCodes&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;permanent&quot;</span><span class="s0">,</span><span class="s1">&quot;checkHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;header&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;routes&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;exit&quot;</span><span class="s0">,</span><span class="s1">&quot;numInvalidRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;hadInvalidHas&quot;</span><span class="s0">,</span><span class="s1">&quot;hadInvalidMissing&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;checkInvalidHasMissing&quot;</span><span class="s0">,</span><span class="s1">&quot;items&quot;</span><span class="s0">,</span><span class="s1">&quot;fieldName&quot;</span><span class="s0">,</span><span class="s1">&quot;hadInvalidItem&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidHasItems&quot;</span><span class="s0">,</span><span class="s1">&quot;hasItem&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidHasParts&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;itemStr&quot;</span><span class="s0">,</span><span class="s1">&quot;missing&quot;</span><span class="s0">,</span><span class="s1">&quot;_route&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceTokens&quot;</span><span class="s0">,</span><span class="s1">&quot;tokens&quot;</span><span class="s0">,</span><span class="s1">&quot;regexStr&quot;</span><span class="s0">,</span><span class="s1">&quot;tryToParsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;hasSegments&quot;</span><span class="s0">,</span><span class="s1">&quot;matchAll&quot;</span><span class="s0">,</span><span class="s1">&quot;unnamedInDest&quot;</span><span class="s0">,</span><span class="s1">&quot;token&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;unnamedIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;destTokens&quot;</span><span class="s0">,</span><span class="s1">&quot;destRegexStr&quot;</span><span class="s0">,</span><span class="s1">&quot;destinationParseFailed&quot;</span><span class="s0">,</span><span class="s1">&quot;handleUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceSegments&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidDestSegments&quot;</span><span class="s0">,</span><span class="s1">&quot;hasInvalidKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;hasInvalidParts&quot;</span><span class="s0">,</span><span class="s1">&quot;processRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;_routes&quot;</span><span class="s0">,</span><span class="s1">&quot;newRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocales&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;domains&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;http&quot;</span><span class="s0">,</span><span class="s1">&quot;domain&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;srcBasePath&quot;</span><span class="s0">,</span><span class="s1">&quot;isExternal&quot;</span><span class="s0">,</span><span class="s1">&quot;destBasePath&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeStringRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;loadRedirects&quot;</span><span class="s0">,</span><span class="s1">&quot;redirects&quot;</span><span class="s0">,</span><span class="s1">&quot;_originalRedirects&quot;</span><span class="s0">,</span><span class="s1">&quot;loadRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;maybeAssetPrefixRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;assetPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;isFullStringUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;canParse&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;_rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;_originalRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;loadHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;totalRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;totalRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;yellow&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;useSkewCookie&quot;</span><span class="s0">,</span><span class="s1">&quot;deploymentId&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;skipTrailingSlashRedirect&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;internal&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>