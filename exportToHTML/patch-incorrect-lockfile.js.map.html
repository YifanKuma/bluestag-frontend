<html>
<head>
<title>patch-incorrect-lockfile.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
patch-incorrect-lockfile.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/lib/patch-incorrect-lockfile.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { promises } from 'fs'</span><span class="s3">\n</span><span class="s1">import * as Log from '../build/output/log'</span><span class="s3">\n</span><span class="s1">import findUp from 'next/dist/compiled/find-up'</span><span class="s3">\n</span><span class="s1">// @ts-ignore no-json types</span><span class="s3">\n</span><span class="s1">import nextPkgJson from 'next/package.json'</span><span class="s3">\n</span><span class="s1">import type { UnwrapPromise } from './coalesced-function'</span><span class="s3">\n</span><span class="s1">import { isCI } from '../server/ci-info'</span><span class="s3">\n</span><span class="s1">import { getRegistry } from './helpers/get-registry'</span><span class="s3">\n\n</span><span class="s1">let registry: string | undefined</span><span class="s3">\n\n</span><span class="s1">async function fetchPkgInfo(pkg: string) {</span><span class="s3">\n  </span><span class="s1">if (!registry) registry = getRegistry()</span><span class="s3">\n  </span><span class="s1">const res = await fetch(`${registry}${pkg}`)</span><span class="s3">\n\n  </span><span class="s1">if (!res.ok) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Failed to fetch registry info for ${pkg}, got status ${res.status}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const data = await res.json()</span><span class="s3">\n  </span><span class="s1">const versionData = data.versions[nextPkgJson.version]</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">os: versionData.os,</span><span class="s3">\n    </span><span class="s1">cpu: versionData.cpu,</span><span class="s3">\n    </span><span class="s1">engines: versionData.engines,</span><span class="s3">\n    </span><span class="s1">tarball: versionData.dist.tarball,</span><span class="s3">\n    </span><span class="s1">integrity: versionData.dist.integrity,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Attempts to patch npm package-lock.json when it</span><span class="s3">\n </span><span class="s1">* fails to include optionalDependencies for other platforms</span><span class="s3">\n </span><span class="s1">* this can occur when the package-lock is rebuilt from a current</span><span class="s3">\n </span><span class="s1">* node_modules install instead of pulling fresh package data</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export async function patchIncorrectLockfile(dir: string) {</span><span class="s3">\n  </span><span class="s1">if (process.env.NEXT_IGNORE_INCORRECT_LOCKFILE) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const lockfilePath = await findUp('package-lock.json', { cwd: dir })</span><span class="s3">\n\n  </span><span class="s1">if (!lockfilePath) {</span><span class="s3">\n    </span><span class="s1">// if no lockfile present there is no action to take</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const content = await promises.readFile(lockfilePath, 'utf8')</span><span class="s3">\n  </span><span class="s1">// maintain current line ending</span><span class="s3">\n  </span><span class="s1">const endingNewline = content.endsWith('</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n    </span><span class="s1">? '</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n    </span><span class="s1">: content.endsWith('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n      </span><span class="s1">? '</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n      </span><span class="s1">: ''</span><span class="s3">\n\n  </span><span class="s1">const lockfileParsed = JSON.parse(content)</span><span class="s3">\n  </span><span class="s1">const lockfileVersion = parseInt(lockfileParsed?.lockfileVersion, 10)</span><span class="s3">\n  </span><span class="s1">const expectedSwcPkgs = Object.keys(</span><span class="s3">\n    </span><span class="s1">nextPkgJson['optionalDependencies'] || {}</span><span class="s3">\n  </span><span class="s1">).filter((pkg) =&gt; pkg.startsWith('@next/swc-'))</span><span class="s3">\n\n  </span><span class="s1">const patchDependency = (</span><span class="s3">\n    </span><span class="s1">pkg: string,</span><span class="s3">\n    </span><span class="s1">pkgData: UnwrapPromise&lt;ReturnType&lt;typeof fetchPkgInfo&gt;&gt;</span><span class="s3">\n  </span><span class="s1">) =&gt; {</span><span class="s3">\n    </span><span class="s1">lockfileParsed.dependencies[pkg] = {</span><span class="s3">\n      </span><span class="s1">version: nextPkgJson.version,</span><span class="s3">\n      </span><span class="s1">resolved: pkgData.tarball,</span><span class="s3">\n      </span><span class="s1">integrity: pkgData.integrity,</span><span class="s3">\n      </span><span class="s1">optional: true,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const patchPackage = (</span><span class="s3">\n    </span><span class="s1">pkg: string,</span><span class="s3">\n    </span><span class="s1">pkgData: UnwrapPromise&lt;ReturnType&lt;typeof fetchPkgInfo&gt;&gt;</span><span class="s3">\n  </span><span class="s1">) =&gt; {</span><span class="s3">\n    </span><span class="s1">lockfileParsed.packages[pkg] = {</span><span class="s3">\n      </span><span class="s1">version: nextPkgJson.version,</span><span class="s3">\n      </span><span class="s1">resolved: pkgData.tarball,</span><span class="s3">\n      </span><span class="s1">integrity: pkgData.integrity,</span><span class="s3">\n      </span><span class="s1">cpu: pkgData.cpu,</span><span class="s3">\n      </span><span class="s1">optional: true,</span><span class="s3">\n      </span><span class="s1">os: pkgData.os,</span><span class="s3">\n      </span><span class="s1">engines: pkgData.engines,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const supportedVersions = [1, 2, 3]</span><span class="s3">\n\n    </span><span class="s1">if (!supportedVersions.includes(lockfileVersion)) {</span><span class="s3">\n      </span><span class="s1">// bail on unsupported version</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// v1 only uses dependencies</span><span class="s3">\n    </span><span class="s1">// v2 uses dependencies and packages</span><span class="s3">\n    </span><span class="s1">// v3 only uses packages</span><span class="s3">\n    </span><span class="s1">const shouldPatchDependencies =</span><span class="s3">\n      </span><span class="s1">lockfileVersion === 1 || lockfileVersion === 2</span><span class="s3">\n    </span><span class="s1">const shouldPatchPackages = lockfileVersion === 2 || lockfileVersion === 3</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(shouldPatchDependencies &amp;&amp; !lockfileParsed.dependencies) ||</span><span class="s3">\n      </span><span class="s1">(shouldPatchPackages &amp;&amp; !lockfileParsed.packages)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// invalid lockfile so bail</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const missingSwcPkgs = []</span><span class="s3">\n    </span><span class="s1">let pkgPrefix: string | undefined</span><span class="s3">\n\n    </span><span class="s1">if (shouldPatchPackages) {</span><span class="s3">\n      </span><span class="s1">pkgPrefix = ''</span><span class="s3">\n      </span><span class="s1">for (const pkg of Object.keys(lockfileParsed.packages)) {</span><span class="s3">\n        </span><span class="s1">if (pkg.endsWith('node_modules/next')) {</span><span class="s3">\n          </span><span class="s1">pkgPrefix = pkg.substring(0, pkg.length - 4)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (!pkgPrefix) {</span><span class="s3">\n        </span><span class="s1">// unable to locate the next package so bail</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">for (const pkg of expectedSwcPkgs) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">(shouldPatchDependencies &amp;&amp; !lockfileParsed.dependencies[pkg]) ||</span><span class="s3">\n        </span><span class="s1">(shouldPatchPackages &amp;&amp; !lockfileParsed.packages[`${pkgPrefix}${pkg}`])</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">missingSwcPkgs.push(pkg)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (missingSwcPkgs.length === 0) {</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">Log.warn(</span><span class="s3">\n      </span><span class="s1">`Found lockfile missing swc dependencies,`,</span><span class="s3">\n      </span><span class="s1">isCI ? 'run next locally to automatically patch' : 'patching...'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (isCI) {</span><span class="s3">\n      </span><span class="s1">// no point in updating in CI as the user can't save the patch</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const pkgsData = await Promise.all(</span><span class="s3">\n      </span><span class="s1">missingSwcPkgs.map((pkg) =&gt; fetchPkgInfo(pkg))</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">for (let i = 0; i &lt; pkgsData.length; i++) {</span><span class="s3">\n      </span><span class="s1">const pkg = missingSwcPkgs[i]</span><span class="s3">\n      </span><span class="s1">const pkgData = pkgsData[i]</span><span class="s3">\n\n      </span><span class="s1">if (shouldPatchDependencies) {</span><span class="s3">\n        </span><span class="s1">patchDependency(pkg, pkgData)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (shouldPatchPackages) {</span><span class="s3">\n        </span><span class="s1">patchPackage(`${pkgPrefix}${pkg}`, pkgData)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">await promises.writeFile(</span><span class="s3">\n      </span><span class="s1">lockfilePath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(lockfileParsed, null, 2) + endingNewline</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">Log.warn(</span><span class="s3">\n      </span><span class="s1">'Lockfile was successfully patched, please run </span><span class="s3">\&quot;</span><span class="s1">npm install</span><span class="s3">\&quot; </span><span class="s1">to ensure @next/swc dependencies are downloaded'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">Log.error(</span><span class="s3">\n      </span><span class="s1">`Failed to patch lockfile, please try uninstalling and reinstalling next in this workspace`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">console.error(err)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;patchIncorrectLockfile&quot;</span><span class="s0">,</span><span class="s1">&quot;registry&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchPkgInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;pkg&quot;</span><span class="s0">,</span><span class="s1">&quot;getRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;fetch&quot;</span><span class="s0">,</span><span class="s1">&quot;ok&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;versionData&quot;</span><span class="s0">,</span><span class="s1">&quot;versions&quot;</span><span class="s0">,</span><span class="s1">&quot;nextPkgJson&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;cpu&quot;</span><span class="s0">,</span><span class="s1">&quot;engines&quot;</span><span class="s0">,</span><span class="s1">&quot;tarball&quot;</span><span class="s0">,</span><span class="s1">&quot;dist&quot;</span><span class="s0">,</span><span class="s1">&quot;integrity&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_IGNORE_INCORRECT_LOCKFILE&quot;</span><span class="s0">,</span><span class="s1">&quot;lockfilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;findUp&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;promises&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;endingNewline&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;lockfileParsed&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;lockfileVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;parseInt&quot;</span><span class="s0">,</span><span class="s1">&quot;expectedSwcPkgs&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;patchDependency&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgData&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;optional&quot;</span><span class="s0">,</span><span class="s1">&quot;patchPackage&quot;</span><span class="s0">,</span><span class="s1">&quot;packages&quot;</span><span class="s0">,</span><span class="s1">&quot;supportedVersions&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldPatchDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldPatchPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;missingSwcPkgs&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;isCI&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgsData&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>