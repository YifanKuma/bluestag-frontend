<html>
<head>
<title>manifest-loader.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
manifest-loader.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/shared/lib/turbopack/manifest-loader.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">EdgeFunctionDefinition,</span><span class="s3">\n  </span><span class="s1">MiddlewareManifest,</span><span class="s3">\n</span><span class="s1">} from '../../../build/webpack/plugins/middleware-plugin'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">StatsAsset,</span><span class="s3">\n  </span><span class="s1">StatsChunk,</span><span class="s3">\n  </span><span class="s1">StatsChunkGroup,</span><span class="s3">\n  </span><span class="s1">StatsModule,</span><span class="s3">\n  </span><span class="s1">StatsCompilation as WebpackStats,</span><span class="s3">\n</span><span class="s1">} from 'webpack'</span><span class="s3">\n</span><span class="s1">import type { BuildManifest } from '../../../server/get-page-files'</span><span class="s3">\n</span><span class="s1">import type { AppBuildManifest } from '../../../build/webpack/plugins/app-build-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { PagesManifest } from '../../../build/webpack/plugins/pages-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { ActionManifest } from '../../../build/webpack/plugins/flight-client-entry-plugin'</span><span class="s3">\n</span><span class="s1">import type { NextFontManifest } from '../../../build/webpack/plugins/next-font-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { REACT_LOADABLE_MANIFEST } from '../constants'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">APP_BUILD_MANIFEST,</span><span class="s3">\n  </span><span class="s1">APP_PATHS_MANIFEST,</span><span class="s3">\n  </span><span class="s1">BUILD_MANIFEST,</span><span class="s3">\n  </span><span class="s1">INTERCEPTION_ROUTE_REWRITE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">MIDDLEWARE_BUILD_MANIFEST,</span><span class="s3">\n  </span><span class="s1">MIDDLEWARE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">NEXT_FONT_MANIFEST,</span><span class="s3">\n  </span><span class="s1">PAGES_MANIFEST,</span><span class="s3">\n  </span><span class="s1">SERVER_REFERENCE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">TURBOPACK_CLIENT_BUILD_MANIFEST,</span><span class="s3">\n  </span><span class="s1">TURBOPACK_CLIENT_MIDDLEWARE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">WEBPACK_STATS,</span><span class="s3">\n</span><span class="s1">} from '../constants'</span><span class="s3">\n</span><span class="s1">import { join, posix } from 'path'</span><span class="s3">\n</span><span class="s1">import { readFile } from 'fs/promises'</span><span class="s3">\n</span><span class="s1">import type { SetupOpts } from '../../../server/lib/router-utils/setup-dev-bundler'</span><span class="s3">\n</span><span class="s1">import { deleteCache } from '../../../server/dev/require-cache'</span><span class="s3">\n</span><span class="s1">import { writeFileAtomic } from '../../../lib/fs/write-atomic'</span><span class="s3">\n</span><span class="s1">import { isInterceptionRouteRewrite } from '../../../lib/generate-interception-routes-rewrites'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">type ClientBuildManifest,</span><span class="s3">\n  </span><span class="s1">normalizeRewritesForBuildManifest,</span><span class="s3">\n  </span><span class="s1">srcEmptySsgManifest,</span><span class="s3">\n  </span><span class="s1">processRoute,</span><span class="s3">\n  </span><span class="s1">createEdgeRuntimeManifest,</span><span class="s3">\n</span><span class="s1">} from '../../../build/webpack/plugins/build-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import getAssetPathFromRoute from '../router/utils/get-asset-path-from-route'</span><span class="s3">\n</span><span class="s1">import { getEntryKey, type EntryKey } from './entry-key'</span><span class="s3">\n</span><span class="s1">import type { CustomRoutes } from '../../../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import { getSortedRoutes } from '../router/utils'</span><span class="s3">\n</span><span class="s1">import { existsSync } from 'fs'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">addMetadataIdToRoute,</span><span class="s3">\n  </span><span class="s1">addRouteSuffix,</span><span class="s3">\n  </span><span class="s1">removeRouteSuffix,</span><span class="s3">\n</span><span class="s1">} from '../../../server/dev/turbopack-utils'</span><span class="s3">\n</span><span class="s1">import { tryToParsePath } from '../../../lib/try-to-parse-path'</span><span class="s3">\n</span><span class="s1">import { safePathToRegexp } from '../router/utils/route-match-utils'</span><span class="s3">\n</span><span class="s1">import type { Entrypoints } from '../../../build/swc/types'</span><span class="s3">\n\n</span><span class="s1">interface InstrumentationDefinition {</span><span class="s3">\n  </span><span class="s1">files: string[]</span><span class="s3">\n  </span><span class="s1">name: 'instrumentation'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type TurbopackMiddlewareManifest = MiddlewareManifest &amp; {</span><span class="s3">\n  </span><span class="s1">instrumentation?: InstrumentationDefinition</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ManifestName =</span><span class="s3">\n  </span><span class="s1">| typeof MIDDLEWARE_MANIFEST</span><span class="s3">\n  </span><span class="s1">| typeof BUILD_MANIFEST</span><span class="s3">\n  </span><span class="s1">| typeof APP_BUILD_MANIFEST</span><span class="s3">\n  </span><span class="s1">| typeof PAGES_MANIFEST</span><span class="s3">\n  </span><span class="s1">| typeof WEBPACK_STATS</span><span class="s3">\n  </span><span class="s1">| typeof APP_PATHS_MANIFEST</span><span class="s3">\n  </span><span class="s1">| `${typeof SERVER_REFERENCE_MANIFEST}.json`</span><span class="s3">\n  </span><span class="s1">| `${typeof NEXT_FONT_MANIFEST}.json`</span><span class="s3">\n  </span><span class="s1">| typeof REACT_LOADABLE_MANIFEST</span><span class="s3">\n  </span><span class="s1">| typeof TURBOPACK_CLIENT_BUILD_MANIFEST</span><span class="s3">\n\n</span><span class="s1">const getManifestPath = (</span><span class="s3">\n  </span><span class="s1">page: string,</span><span class="s3">\n  </span><span class="s1">distDir: string,</span><span class="s3">\n  </span><span class="s1">name: ManifestName,</span><span class="s3">\n  </span><span class="s1">type: string,</span><span class="s3">\n  </span><span class="s1">firstCall: boolean</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">let manifestPath = posix.join(</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n    </span><span class="s1">`server`,</span><span class="s3">\n    </span><span class="s1">type,</span><span class="s3">\n    </span><span class="s1">type === 'middleware' || type === 'instrumentation'</span><span class="s3">\n      </span><span class="s1">? ''</span><span class="s3">\n      </span><span class="s1">: type === 'app'</span><span class="s3">\n        </span><span class="s1">? page</span><span class="s3">\n        </span><span class="s1">: getAssetPathFromRoute(page),</span><span class="s3">\n    </span><span class="s1">name</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (firstCall) {</span><span class="s3">\n    </span><span class="s1">const isSitemapRoute = /[</span><span class="s3">\\\\</span><span class="s1">/]sitemap(.xml)?</span><span class="s3">\\</span><span class="s1">/route$/.test(page)</span><span class="s3">\n    </span><span class="s1">// Check the ambiguity of /sitemap and /sitemap.xml</span><span class="s3">\n    </span><span class="s1">if (isSitemapRoute &amp;&amp; !existsSync(manifestPath)) {</span><span class="s3">\n      </span><span class="s1">manifestPath = getManifestPath(</span><span class="s3">\n        </span><span class="s1">page.replace(/</span><span class="s3">\\</span><span class="s1">/sitemap</span><span class="s3">\\</span><span class="s1">/route$/, '/sitemap.xml/route'),</span><span class="s3">\n        </span><span class="s1">distDir,</span><span class="s3">\n        </span><span class="s1">name,</span><span class="s3">\n        </span><span class="s1">type,</span><span class="s3">\n        </span><span class="s1">false</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// existsSync is faster than using the async version</span><span class="s3">\n    </span><span class="s1">if (!existsSync(manifestPath) &amp;&amp; page.endsWith('/route')) {</span><span class="s3">\n      </span><span class="s1">// TODO: Improve implementation of metadata routes, currently it requires this extra check for the variants of the files that can be written.</span><span class="s3">\n      </span><span class="s1">let metadataPage = addRouteSuffix(</span><span class="s3">\n        </span><span class="s1">addMetadataIdToRoute(removeRouteSuffix(page))</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">manifestPath = getManifestPath(metadataPage, distDir, name, type, false)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return manifestPath</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function readPartialManifest&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">distDir: string,</span><span class="s3">\n  </span><span class="s1">name: ManifestName,</span><span class="s3">\n  </span><span class="s1">pageName: string,</span><span class="s3">\n  </span><span class="s1">type: 'pages' | 'app' | 'middleware' | 'instrumentation' = 'pages'</span><span class="s3">\n</span><span class="s1">): Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">const page = pageName</span><span class="s3">\n  </span><span class="s1">const manifestPath = getManifestPath(page, distDir, name, type, true)</span><span class="s3">\n  </span><span class="s1">return JSON.parse(await readFile(posix.join(manifestPath), 'utf-8')) as T</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class TurbopackManifestLoader {</span><span class="s3">\n  </span><span class="s1">private actionManifests: Map&lt;EntryKey, ActionManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private appBuildManifests: Map&lt;EntryKey, AppBuildManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private appPathsManifests: Map&lt;EntryKey, PagesManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private buildManifests: Map&lt;EntryKey, BuildManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private clientBuildManifests: Map&lt;EntryKey, ClientBuildManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private fontManifests: Map&lt;EntryKey, NextFontManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private middlewareManifests: Map&lt;EntryKey, TurbopackMiddlewareManifest&gt; =</span><span class="s3">\n    </span><span class="s1">new Map()</span><span class="s3">\n  </span><span class="s1">private pagesManifests: Map&lt;string, PagesManifest&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private webpackStats: Map&lt;EntryKey, WebpackStats&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private encryptionKey: string</span><span class="s3">\n\n  </span><span class="s1">private readonly distDir: string</span><span class="s3">\n  </span><span class="s1">private readonly buildId: string</span><span class="s3">\n\n  </span><span class="s1">constructor({</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">encryptionKey,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">buildId: string</span><span class="s3">\n    </span><span class="s1">distDir: string</span><span class="s3">\n    </span><span class="s1">encryptionKey: string</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">this.distDir = distDir</span><span class="s3">\n    </span><span class="s1">this.buildId = buildId</span><span class="s3">\n    </span><span class="s1">this.encryptionKey = encryptionKey</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">delete(key: EntryKey) {</span><span class="s3">\n    </span><span class="s1">this.actionManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.appBuildManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.appPathsManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.buildManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.clientBuildManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.fontManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.middlewareManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.pagesManifests.delete(key)</span><span class="s3">\n    </span><span class="s1">this.webpackStats.delete(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadActionManifest(pageName: string): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.actionManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey('app', 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">`${SERVER_REFERENCE_MANIFEST}.json`,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">'app'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async mergeActionManifests(manifests: Iterable&lt;ActionManifest&gt;) {</span><span class="s3">\n    </span><span class="s1">type ActionEntries = ActionManifest['edge' | 'node']</span><span class="s3">\n    </span><span class="s1">const manifest: ActionManifest = {</span><span class="s3">\n      </span><span class="s1">node: {},</span><span class="s3">\n      </span><span class="s1">edge: {},</span><span class="s3">\n      </span><span class="s1">encryptionKey: this.encryptionKey,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">function mergeActionIds(</span><span class="s3">\n      </span><span class="s1">actionEntries: ActionEntries,</span><span class="s3">\n      </span><span class="s1">other: ActionEntries</span><span class="s3">\n    </span><span class="s1">): void {</span><span class="s3">\n      </span><span class="s1">for (const key in other) {</span><span class="s3">\n        </span><span class="s1">const action = (actionEntries[key] ??= {</span><span class="s3">\n          </span><span class="s1">workers: {},</span><span class="s3">\n          </span><span class="s1">layer: {},</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">action.filename = other[key].filename</span><span class="s3">\n        </span><span class="s1">action.exportedName = other[key].exportedName</span><span class="s3">\n        </span><span class="s1">Object.assign(action.workers, other[key].workers)</span><span class="s3">\n        </span><span class="s1">Object.assign(action.layer, other[key].layer)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">mergeActionIds(manifest.node, m.node)</span><span class="s3">\n      </span><span class="s1">mergeActionIds(manifest.edge, m.edge)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const key in manifest.node) {</span><span class="s3">\n      </span><span class="s1">const entry = manifest.node[key]</span><span class="s3">\n      </span><span class="s1">entry.workers = sortObjectByKey(entry.workers)</span><span class="s3">\n      </span><span class="s1">entry.layer = sortObjectByKey(entry.layer)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const key in manifest.edge) {</span><span class="s3">\n      </span><span class="s1">const entry = manifest.edge[key]</span><span class="s3">\n      </span><span class="s1">entry.workers = sortObjectByKey(entry.workers)</span><span class="s3">\n      </span><span class="s1">entry.layer = sortObjectByKey(entry.layer)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeActionManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const actionManifest = await this.mergeActionManifests(</span><span class="s3">\n      </span><span class="s1">this.actionManifests.values()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const actionManifestJsonPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${SERVER_REFERENCE_MANIFEST}.json`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const actionManifestJsPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${SERVER_REFERENCE_MANIFEST}.js`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const json = JSON.stringify(actionManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">deleteCache(actionManifestJsonPath)</span><span class="s3">\n    </span><span class="s1">deleteCache(actionManifestJsPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(actionManifestJsonPath, json)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">actionManifestJsPath,</span><span class="s3">\n      </span><span class="s1">`self.__RSC_SERVER_MANIFEST=${JSON.stringify(json)}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadAppBuildManifest(pageName: string): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.appBuildManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey('app', 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">APP_BUILD_MANIFEST,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">'app'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeAppBuildManifests(manifests: Iterable&lt;AppBuildManifest&gt;) {</span><span class="s3">\n    </span><span class="s1">const manifest: AppBuildManifest = {</span><span class="s3">\n      </span><span class="s1">pages: {},</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.pages, m.pages)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">manifest.pages = sortObjectByKey(manifest.pages)</span><span class="s3">\n    </span><span class="s1">return manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeAppBuildManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const appBuildManifest = this.mergeAppBuildManifests(</span><span class="s3">\n      </span><span class="s1">this.appBuildManifests.values()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const appBuildManifestPath = join(this.distDir, APP_BUILD_MANIFEST)</span><span class="s3">\n    </span><span class="s1">deleteCache(appBuildManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">appBuildManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(appBuildManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadAppPathsManifest(pageName: string): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.appPathsManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey('app', 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">APP_PATHS_MANIFEST,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">'app'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeAppPathsManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const appPathsManifest = this.mergePagesManifests(</span><span class="s3">\n      </span><span class="s1">this.appPathsManifests.values()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const appPathsManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">APP_PATHS_MANIFEST</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(appPathsManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">appPathsManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(appPathsManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeWebpackStats(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const webpackStats = this.mergeWebpackStats(this.webpackStats.values())</span><span class="s3">\n    </span><span class="s1">const path = join(this.distDir, 'server', WEBPACK_STATS)</span><span class="s3">\n    </span><span class="s1">deleteCache(path)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(path, JSON.stringify(webpackStats, null, 2))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadBuildManifest(</span><span class="s3">\n    </span><span class="s1">pageName: string,</span><span class="s3">\n    </span><span class="s1">type: 'app' | 'pages' = 'pages'</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.buildManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey(type, 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(this.distDir, BUILD_MANIFEST, pageName, type)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadClientBuildManifest(</span><span class="s3">\n    </span><span class="s1">pageName: string,</span><span class="s3">\n    </span><span class="s1">type: 'app' | 'pages' = 'pages'</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.clientBuildManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey(type, 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">TURBOPACK_CLIENT_BUILD_MANIFEST,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">type</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadWebpackStats(</span><span class="s3">\n    </span><span class="s1">pageName: string,</span><span class="s3">\n    </span><span class="s1">type: 'app' | 'pages' = 'pages'</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.webpackStats.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey(type, 'client', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(this.distDir, WEBPACK_STATS, pageName, type)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeWebpackStats(statsFiles: Iterable&lt;WebpackStats&gt;): WebpackStats {</span><span class="s3">\n    </span><span class="s1">const entrypoints: Record&lt;string, StatsChunkGroup&gt; = {}</span><span class="s3">\n    </span><span class="s1">const assets: Map&lt;string, StatsAsset&gt; = new Map()</span><span class="s3">\n    </span><span class="s1">const chunks: Map&lt;string | number, StatsChunk&gt; = new Map()</span><span class="s3">\n    </span><span class="s1">const modules: Map&lt;string | number, StatsModule&gt; = new Map()</span><span class="s3">\n\n    </span><span class="s1">for (const statsFile of statsFiles) {</span><span class="s3">\n      </span><span class="s1">if (statsFile.entrypoints) {</span><span class="s3">\n        </span><span class="s1">for (const [k, v] of Object.entries(statsFile.entrypoints)) {</span><span class="s3">\n          </span><span class="s1">if (!entrypoints[k]) {</span><span class="s3">\n            </span><span class="s1">entrypoints[k] = v</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (statsFile.assets) {</span><span class="s3">\n        </span><span class="s1">for (const asset of statsFile.assets) {</span><span class="s3">\n          </span><span class="s1">if (!assets.has(asset.name)) {</span><span class="s3">\n            </span><span class="s1">assets.set(asset.name, asset)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (statsFile.chunks) {</span><span class="s3">\n        </span><span class="s1">for (const chunk of statsFile.chunks) {</span><span class="s3">\n          </span><span class="s1">if (!chunks.has(chunk.id!)) {</span><span class="s3">\n            </span><span class="s1">chunks.set(chunk.id!, chunk)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (statsFile.modules) {</span><span class="s3">\n        </span><span class="s1">for (const module of statsFile.modules) {</span><span class="s3">\n          </span><span class="s1">const id = module.id</span><span class="s3">\n          </span><span class="s1">if (id != null) {</span><span class="s3">\n            </span><span class="s1">// Merge the chunk list for the module. This can vary across endpoints.</span><span class="s3">\n            </span><span class="s1">const existing = modules.get(id)</span><span class="s3">\n            </span><span class="s1">if (existing == null) {</span><span class="s3">\n              </span><span class="s1">modules.set(id, module)</span><span class="s3">\n            </span><span class="s1">} else if (module.chunks != null &amp;&amp; existing.chunks != null) {</span><span class="s3">\n              </span><span class="s1">for (const chunk of module.chunks) {</span><span class="s3">\n                </span><span class="s1">if (!existing.chunks.includes(chunk)) {</span><span class="s3">\n                  </span><span class="s1">existing.chunks.push(chunk)</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">version: 'Turbopack',</span><span class="s3">\n      </span><span class="s1">entrypoints,</span><span class="s3">\n      </span><span class="s1">assets: [...assets.values()],</span><span class="s3">\n      </span><span class="s1">chunks: [...chunks.values()],</span><span class="s3">\n      </span><span class="s1">modules: [...modules.values()],</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeBuildManifests(manifests: Iterable&lt;BuildManifest&gt;) {</span><span class="s3">\n    </span><span class="s1">const manifest: Partial&lt;BuildManifest&gt; &amp; Pick&lt;BuildManifest, 'pages'&gt; = {</span><span class="s3">\n      </span><span class="s1">pages: {</span><span class="s3">\n        </span><span class="s1">'/_app': [],</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">// Something in next.js depends on these to exist even for app dir rendering</span><span class="s3">\n      </span><span class="s1">devFiles: [],</span><span class="s3">\n      </span><span class="s1">ampDevFiles: [],</span><span class="s3">\n      </span><span class="s1">polyfillFiles: [],</span><span class="s3">\n      </span><span class="s1">lowPriorityFiles: [</span><span class="s3">\n        </span><span class="s1">`static/${this.buildId}/_ssgManifest.js`,</span><span class="s3">\n        </span><span class="s1">`static/${this.buildId}/_buildManifest.js`,</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n      </span><span class="s1">rootMainFiles: [],</span><span class="s3">\n      </span><span class="s1">ampFirstPages: [],</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.pages, m.pages)</span><span class="s3">\n      </span><span class="s1">if (m.rootMainFiles.length) manifest.rootMainFiles = m.rootMainFiles</span><span class="s3">\n      </span><span class="s1">// polyfillFiles should always be the same, so we can overwrite instead of actually merging</span><span class="s3">\n      </span><span class="s1">if (m.polyfillFiles.length) manifest.polyfillFiles = m.polyfillFiles</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">manifest.pages = sortObjectByKey(manifest.pages) as BuildManifest['pages']</span><span class="s3">\n    </span><span class="s1">return manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeClientBuildManifests(</span><span class="s3">\n    </span><span class="s1">rewrites: CustomRoutes['rewrites'],</span><span class="s3">\n    </span><span class="s1">manifests: Iterable&lt;ClientBuildManifest&gt;,</span><span class="s3">\n    </span><span class="s1">sortedPageKeys: string[]</span><span class="s3">\n  </span><span class="s1">): ClientBuildManifest {</span><span class="s3">\n    </span><span class="s1">const manifest = {</span><span class="s3">\n      </span><span class="s1">__rewrites: normalizeRewritesForBuildManifest(rewrites) as any,</span><span class="s3">\n      </span><span class="s1">sortedPages: sortedPageKeys,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest, m)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return sortObjectByKey(manifest)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeBuildManifest(</span><span class="s3">\n    </span><span class="s1">entrypoints: Entrypoints,</span><span class="s3">\n    </span><span class="s1">devRewrites: SetupOpts['fsChecker']['rewrites'] | undefined,</span><span class="s3">\n    </span><span class="s1">productionRewrites: CustomRoutes['rewrites'] | undefined</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const rewrites = productionRewrites ?? {</span><span class="s3">\n      </span><span class="s1">...devRewrites,</span><span class="s3">\n      </span><span class="s1">beforeFiles: (devRewrites?.beforeFiles ?? []).map(processRoute),</span><span class="s3">\n      </span><span class="s1">afterFiles: (devRewrites?.afterFiles ?? []).map(processRoute),</span><span class="s3">\n      </span><span class="s1">fallback: (devRewrites?.fallback ?? []).map(processRoute),</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const buildManifest = this.mergeBuildManifests(this.buildManifests.values())</span><span class="s3">\n    </span><span class="s1">const buildManifestPath = join(this.distDir, BUILD_MANIFEST)</span><span class="s3">\n    </span><span class="s1">const middlewareBuildManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${MIDDLEWARE_BUILD_MANIFEST}.js`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const interceptionRewriteManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${INTERCEPTION_ROUTE_REWRITE_MANIFEST}.js`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(buildManifestPath)</span><span class="s3">\n    </span><span class="s1">deleteCache(middlewareBuildManifestPath)</span><span class="s3">\n    </span><span class="s1">deleteCache(interceptionRewriteManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">buildManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(buildManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">middlewareBuildManifestPath,</span><span class="s3">\n      </span><span class="s1">// we use globalThis here because middleware can be node</span><span class="s3">\n      </span><span class="s1">// which doesn't have </span><span class="s3">\&quot;</span><span class="s1">self</span><span class="s3">\&quot;\n      </span><span class="s1">createEdgeRuntimeManifest(buildManifest)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const interceptionRewrites = JSON.stringify(</span><span class="s3">\n      </span><span class="s1">rewrites.beforeFiles.filter(isInterceptionRouteRewrite)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">interceptionRewriteManifestPath,</span><span class="s3">\n      </span><span class="s1">`self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST=${JSON.stringify(</span><span class="s3">\n        </span><span class="s1">interceptionRewrites</span><span class="s3">\n      </span><span class="s1">)};`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const pagesKeys = [...entrypoints.page.keys()]</span><span class="s3">\n    </span><span class="s1">if (entrypoints.global.app) {</span><span class="s3">\n      </span><span class="s1">pagesKeys.push('/_app')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (entrypoints.global.error) {</span><span class="s3">\n      </span><span class="s1">pagesKeys.push('/_error')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const sortedPageKeys = getSortedRoutes(pagesKeys)</span><span class="s3">\n    </span><span class="s1">const clientBuildManifest = this.mergeClientBuildManifests(</span><span class="s3">\n      </span><span class="s1">rewrites,</span><span class="s3">\n      </span><span class="s1">this.clientBuildManifests.values(),</span><span class="s3">\n      </span><span class="s1">sortedPageKeys</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const clientBuildManifestJs = `self.__BUILD_MANIFEST = ${JSON.stringify(</span><span class="s3">\n      </span><span class="s1">clientBuildManifest,</span><span class="s3">\n      </span><span class="s1">null,</span><span class="s3">\n      </span><span class="s1">2</span><span class="s3">\n    </span><span class="s1">)};self.__BUILD_MANIFEST_CB &amp;&amp; self.__BUILD_MANIFEST_CB()`</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">join(this.distDir, 'static', this.buildId, '_buildManifest.js'),</span><span class="s3">\n      </span><span class="s1">clientBuildManifestJs</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">join(this.distDir, 'static', this.buildId, '_ssgManifest.js'),</span><span class="s3">\n      </span><span class="s1">srcEmptySsgManifest</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeClientMiddlewareManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const middlewareManifest = this.mergeMiddlewareManifests(</span><span class="s3">\n      </span><span class="s1">this.middlewareManifests.values()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const matchers = middlewareManifest?.middleware['/']?.matchers || []</span><span class="s3">\n\n    </span><span class="s1">const clientMiddlewareManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'static',</span><span class="s3">\n      </span><span class="s1">this.buildId,</span><span class="s3">\n      </span><span class="s1">`${TURBOPACK_CLIENT_MIDDLEWARE_MANIFEST}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(clientMiddlewareManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">clientMiddlewareManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(matchers, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeFallbackBuildManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const fallbackBuildManifest = this.mergeBuildManifests(</span><span class="s3">\n      </span><span class="s1">[</span><span class="s3">\n        </span><span class="s1">this.buildManifests.get(getEntryKey('pages', 'server', '_app')),</span><span class="s3">\n        </span><span class="s1">this.buildManifests.get(getEntryKey('pages', 'server', '_error')),</span><span class="s3">\n      </span><span class="s1">].filter(Boolean) as BuildManifest[]</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const fallbackBuildManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">`fallback-${BUILD_MANIFEST}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(fallbackBuildManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">fallbackBuildManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(fallbackBuildManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadFontManifest(</span><span class="s3">\n    </span><span class="s1">pageName: string,</span><span class="s3">\n    </span><span class="s1">type: 'app' | 'pages' = 'pages'</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.fontManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey(type, 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">`${NEXT_FONT_MANIFEST}.json`,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">type</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeFontManifests(manifests: Iterable&lt;NextFontManifest&gt;) {</span><span class="s3">\n    </span><span class="s1">const manifest: NextFontManifest = {</span><span class="s3">\n      </span><span class="s1">app: {},</span><span class="s3">\n      </span><span class="s1">appUsingSizeAdjust: false,</span><span class="s3">\n      </span><span class="s1">pages: {},</span><span class="s3">\n      </span><span class="s1">pagesUsingSizeAdjust: false,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.app, m.app)</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.pages, m.pages)</span><span class="s3">\n\n      </span><span class="s1">manifest.appUsingSizeAdjust =</span><span class="s3">\n        </span><span class="s1">manifest.appUsingSizeAdjust || m.appUsingSizeAdjust</span><span class="s3">\n      </span><span class="s1">manifest.pagesUsingSizeAdjust =</span><span class="s3">\n        </span><span class="s1">manifest.pagesUsingSizeAdjust || m.pagesUsingSizeAdjust</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">manifest.app = sortObjectByKey(manifest.app)</span><span class="s3">\n    </span><span class="s1">manifest.pages = sortObjectByKey(manifest.pages)</span><span class="s3">\n    </span><span class="s1">return manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeNextFontManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const fontManifest = this.mergeFontManifests(this.fontManifests.values())</span><span class="s3">\n    </span><span class="s1">const json = JSON.stringify(fontManifest, null, 2)</span><span class="s3">\n\n    </span><span class="s1">const fontManifestJsonPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${NEXT_FONT_MANIFEST}.json`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const fontManifestJsPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">`${NEXT_FONT_MANIFEST}.js`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(fontManifestJsonPath)</span><span class="s3">\n    </span><span class="s1">deleteCache(fontManifestJsPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(fontManifestJsonPath, json)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">fontManifestJsPath,</span><span class="s3">\n      </span><span class="s1">`self.__NEXT_FONT_MANIFEST=${JSON.stringify(json)}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @returns If the manifest was written or not</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">async loadMiddlewareManifest(</span><span class="s3">\n    </span><span class="s1">pageName: string,</span><span class="s3">\n    </span><span class="s1">type: 'pages' | 'app' | 'middleware' | 'instrumentation'</span><span class="s3">\n  </span><span class="s1">): Promise&lt;boolean&gt; {</span><span class="s3">\n    </span><span class="s1">const middlewareManifestPath = getManifestPath(</span><span class="s3">\n      </span><span class="s1">pageName,</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">MIDDLEWARE_MANIFEST,</span><span class="s3">\n      </span><span class="s1">type,</span><span class="s3">\n      </span><span class="s1">true</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// middlewareManifest is actually </span><span class="s3">\&quot;</span><span class="s1">edge manifest</span><span class="s3">\&quot; </span><span class="s1">and not all routes are edge runtime. If it is not written we skip it.</span><span class="s3">\n    </span><span class="s1">if (!existsSync(middlewareManifestPath)) {</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.middlewareManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey(</span><span class="s3">\n        </span><span class="s1">type === 'middleware' || type === 'instrumentation' ? 'root' : type,</span><span class="s3">\n        </span><span class="s1">'server',</span><span class="s3">\n        </span><span class="s1">pageName</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">MIDDLEWARE_MANIFEST,</span><span class="s3">\n        </span><span class="s1">pageName,</span><span class="s3">\n        </span><span class="s1">type</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">getMiddlewareManifest(key: EntryKey) {</span><span class="s3">\n    </span><span class="s1">return this.middlewareManifests.get(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">deleteMiddlewareManifest(key: EntryKey) {</span><span class="s3">\n    </span><span class="s1">return this.middlewareManifests.delete(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergeMiddlewareManifests(</span><span class="s3">\n    </span><span class="s1">manifests: Iterable&lt;TurbopackMiddlewareManifest&gt;</span><span class="s3">\n  </span><span class="s1">): MiddlewareManifest {</span><span class="s3">\n    </span><span class="s1">const manifest: MiddlewareManifest = {</span><span class="s3">\n      </span><span class="s1">version: 3,</span><span class="s3">\n      </span><span class="s1">middleware: {},</span><span class="s3">\n      </span><span class="s1">sortedMiddleware: [],</span><span class="s3">\n      </span><span class="s1">functions: {},</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">let instrumentation: InstrumentationDefinition | undefined = undefined</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.functions, m.functions)</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest.middleware, m.middleware)</span><span class="s3">\n      </span><span class="s1">if (m.instrumentation) {</span><span class="s3">\n        </span><span class="s1">instrumentation = m.instrumentation</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">manifest.functions = sortObjectByKey(manifest.functions)</span><span class="s3">\n    </span><span class="s1">manifest.middleware = sortObjectByKey(manifest.middleware)</span><span class="s3">\n    </span><span class="s1">const updateFunctionDefinition = (</span><span class="s3">\n      </span><span class="s1">fun: EdgeFunctionDefinition</span><span class="s3">\n    </span><span class="s1">): EdgeFunctionDefinition =&gt; {</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">...fun,</span><span class="s3">\n        </span><span class="s1">files: [...(instrumentation?.files ?? []), ...fun.files],</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const key of Object.keys(manifest.middleware)) {</span><span class="s3">\n      </span><span class="s1">const value = manifest.middleware[key]</span><span class="s3">\n      </span><span class="s1">manifest.middleware[key] = updateFunctionDefinition(value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const key of Object.keys(manifest.functions)) {</span><span class="s3">\n      </span><span class="s1">const value = manifest.functions[key]</span><span class="s3">\n      </span><span class="s1">manifest.functions[key] = updateFunctionDefinition(value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">for (const fun of Object.values(manifest.functions).concat(</span><span class="s3">\n      </span><span class="s1">Object.values(manifest.middleware)</span><span class="s3">\n    </span><span class="s1">)) {</span><span class="s3">\n      </span><span class="s1">for (const matcher of fun.matchers) {</span><span class="s3">\n        </span><span class="s1">if (!matcher.regexp) {</span><span class="s3">\n          </span><span class="s1">matcher.regexp = safePathToRegexp(matcher.originalSource, [], {</span><span class="s3">\n            </span><span class="s1">delimiter: '/',</span><span class="s3">\n            </span><span class="s1">sensitive: false,</span><span class="s3">\n            </span><span class="s1">strict: true,</span><span class="s3">\n          </span><span class="s1">}).source.replaceAll('</span><span class="s3">\\\\</span><span class="s1">/', '/')</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">manifest.sortedMiddleware = Object.keys(manifest.middleware)</span><span class="s3">\n\n    </span><span class="s1">return manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writeMiddlewareManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const middlewareManifest = this.mergeMiddlewareManifests(</span><span class="s3">\n      </span><span class="s1">this.middlewareManifests.values()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// Normalize regexes as it uses path-to-regexp</span><span class="s3">\n    </span><span class="s1">for (const key in middlewareManifest.middleware) {</span><span class="s3">\n      </span><span class="s1">middlewareManifest.middleware[key].matchers.forEach((matcher) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (!matcher.regexp.startsWith('^')) {</span><span class="s3">\n          </span><span class="s1">const parsedPage = tryToParsePath(matcher.regexp)</span><span class="s3">\n          </span><span class="s1">if (parsedPage.error || !parsedPage.regexStr) {</span><span class="s3">\n            </span><span class="s1">throw new Error(`Invalid source: ${matcher.regexp}`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">matcher.regexp = parsedPage.regexStr</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const middlewareManifestPath = join(</span><span class="s3">\n      </span><span class="s1">this.distDir,</span><span class="s3">\n      </span><span class="s1">'server',</span><span class="s3">\n      </span><span class="s1">MIDDLEWARE_MANIFEST</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">deleteCache(middlewareManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">middlewareManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(middlewareManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async loadPagesManifest(pageName: string): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.pagesManifests.set(</span><span class="s3">\n      </span><span class="s1">getEntryKey('pages', 'server', pageName),</span><span class="s3">\n      </span><span class="s1">await readPartialManifest(this.distDir, PAGES_MANIFEST, pageName)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private mergePagesManifests(manifests: Iterable&lt;PagesManifest&gt;) {</span><span class="s3">\n    </span><span class="s1">const manifest: PagesManifest = {}</span><span class="s3">\n    </span><span class="s1">for (const m of manifests) {</span><span class="s3">\n      </span><span class="s1">Object.assign(manifest, m)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return sortObjectByKey(manifest)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async writePagesManifest(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const pagesManifest = this.mergePagesManifests(this.pagesManifests.values())</span><span class="s3">\n    </span><span class="s1">const pagesManifestPath = join(this.distDir, 'server', PAGES_MANIFEST)</span><span class="s3">\n    </span><span class="s1">deleteCache(pagesManifestPath)</span><span class="s3">\n    </span><span class="s1">await writeFileAtomic(</span><span class="s3">\n      </span><span class="s1">pagesManifestPath,</span><span class="s3">\n      </span><span class="s1">JSON.stringify(pagesManifest, null, 2)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async writeManifests({</span><span class="s3">\n    </span><span class="s1">devRewrites,</span><span class="s3">\n    </span><span class="s1">productionRewrites,</span><span class="s3">\n    </span><span class="s1">entrypoints,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">devRewrites: SetupOpts['fsChecker']['rewrites'] | undefined</span><span class="s3">\n    </span><span class="s1">productionRewrites: CustomRoutes['rewrites'] | undefined</span><span class="s3">\n    </span><span class="s1">entrypoints: Entrypoints</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">await this.writeActionManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeAppBuildManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeAppPathsManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeBuildManifest(entrypoints, devRewrites, productionRewrites)</span><span class="s3">\n    </span><span class="s1">await this.writeFallbackBuildManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeMiddlewareManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeClientMiddlewareManifest()</span><span class="s3">\n    </span><span class="s1">await this.writeNextFontManifest()</span><span class="s3">\n    </span><span class="s1">await this.writePagesManifest()</span><span class="s3">\n\n    </span><span class="s1">if (process.env.TURBOPACK_STATS != null) {</span><span class="s3">\n      </span><span class="s1">await this.writeWebpackStats()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function sortObjectByKey(obj: Record&lt;string, any&gt;) {</span><span class="s3">\n  </span><span class="s1">return Object.keys(obj)</span><span class="s3">\n    </span><span class="s1">.sort()</span><span class="s3">\n    </span><span class="s1">.reduce(</span><span class="s3">\n      </span><span class="s1">(acc, key) =&gt; {</span><span class="s3">\n        </span><span class="s1">acc[key] = obj[key]</span><span class="s3">\n        </span><span class="s1">return acc</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">{} as Record&lt;string, any&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;TurbopackManifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;getManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;firstCall&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;posix&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;getAssetPathFromRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;isSitemapRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataPage&quot;</span><span class="s0">,</span><span class="s1">&quot;addRouteSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;addMetadataIdToRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;removeRouteSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;readPartialManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;pageName&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;actionManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;appBuildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;appPathsManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;buildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;clientBuildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;fontManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackStats&quot;</span><span class="s0">,</span><span class="s1">&quot;loadActionManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;getEntryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_REFERENCE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeActionManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;manifests&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;node&quot;</span><span class="s0">,</span><span class="s1">&quot;edge&quot;</span><span class="s0">,</span><span class="s1">&quot;encryptionKey&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeActionIds&quot;</span><span class="s0">,</span><span class="s1">&quot;actionEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;workers&quot;</span><span class="s0">,</span><span class="s1">&quot;layer&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;exportedName&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;sortObjectByKey&quot;</span><span class="s0">,</span><span class="s1">&quot;writeActionManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;actionManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;actionManifestJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;actionManifestJsPath&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;deleteCache&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFileAtomic&quot;</span><span class="s0">,</span><span class="s1">&quot;loadAppBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeAppBuildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;pages&quot;</span><span class="s0">,</span><span class="s1">&quot;writeAppBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;appBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;appBuildManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;loadAppPathsManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_PATHS_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;writeAppPathsManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;appPathsManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;mergePagesManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;appPathsManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;writeWebpackStats&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeWebpackStats&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_STATS&quot;</span><span class="s0">,</span><span class="s1">&quot;loadBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;loadClientBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK_CLIENT_BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;loadWebpackStats&quot;</span><span class="s0">,</span><span class="s1">&quot;statsFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;assets&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;chunks&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;statsFile&quot;</span><span class="s0">,</span><span class="s1">&quot;k&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;asset&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;existing&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeBuildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;devFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;ampDevFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;polyfillFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;lowPriorityFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;rootMainFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;ampFirstPages&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeClientBuildManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;sortedPageKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;__rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRewritesForBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;sortedPages&quot;</span><span class="s0">,</span><span class="s1">&quot;writeBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;devRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;productionRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;processRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;buildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;buildManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareBuildManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionRewriteManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;INTERCEPTION_ROUTE_REWRITE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;createEdgeRuntimeManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;global&quot;</span><span class="s0">,</span><span class="s1">&quot;app&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;getSortedRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;clientBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;clientBuildManifestJs&quot;</span><span class="s0">,</span><span class="s1">&quot;srcEmptySsgManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;writeClientMiddlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeMiddlewareManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;clientMiddlewareManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK_CLIENT_MIDDLEWARE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFallbackBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackBuildManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;loadFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_FONT_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeFontManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;appUsingSizeAdjust&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesUsingSizeAdjust&quot;</span><span class="s0">,</span><span class="s1">&quot;writeNextFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;fontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;fontManifestJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;fontManifestJsPath&quot;</span><span class="s0">,</span><span class="s1">&quot;loadMiddlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;getMiddlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;deleteMiddlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;sortedMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;functions&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentation&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;updateFunctionDefinition&quot;</span><span class="s0">,</span><span class="s1">&quot;fun&quot;</span><span class="s0">,</span><span class="s1">&quot;files&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;regexp&quot;</span><span class="s0">,</span><span class="s1">&quot;safePathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;originalSource&quot;</span><span class="s0">,</span><span class="s1">&quot;delimiter&quot;</span><span class="s0">,</span><span class="s1">&quot;sensitive&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;replaceAll&quot;</span><span class="s0">,</span><span class="s1">&quot;writeMiddlewareManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;tryToParsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;regexStr&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPagesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;writePagesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesManifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;writeManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK_STATS&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;sort&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>