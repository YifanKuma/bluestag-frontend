<html>
<head>
<title>no-cycle.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #0033b3;}
.s1 { color: #080808;}
.s2 { color: #080808;}
.s3 { color: #871094; font-style: italic;}
.s4 { color: #067d17;}
.s5 { color: #006dcc;}
.s6 { color: #00627a; font-style: italic;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
no-cycle.md</font>
</center></td></tr></table>
<pre><span class="s0"># </span><span class="s2">import/no-cycle</span>

<span class="s1">&lt;!-- end auto-generated rule header --&gt;</span>

<span class="s2">Ensures that there is no resolvable path back to this module via its dependencies.</span>

<span class="s2">This includes cycles of depth 1 </span><span class="s1">(</span><span class="s2">imported module imports me</span><span class="s1">) </span><span class="s2">to `</span><span class="s1">&quot;</span><span class="s2">âˆž</span><span class="s1">&quot;</span><span class="s2">` </span><span class="s1">(</span><span class="s2">or `Infinity`</span><span class="s1">)</span><span class="s2">, if the</span>
<span class="s1">[</span><span class="s2">`maxDepth`</span><span class="s1">](</span><span class="s2">#maxdepth</span><span class="s1">) </span><span class="s2">option is not set.</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// dep-b.js</span>
<span class="s4">import './dep-a.js'</span>

<span class="s4">export function b() { /* ... */ }</span>
<span class="s0">```</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// dep-a.js</span>
<span class="s4">import { b } from './dep-b.js' // reported: Dependency cycle detected.</span>
<span class="s0">```</span>

<span class="s2">This rule does </span><span class="s1">_</span><span class="s2">not</span><span class="s1">_ </span><span class="s2">detect imports that resolve directly to the linted module;</span>
<span class="s2">for that, see </span><span class="s1">[</span><span class="s2">`no-self-import`</span><span class="s1">]</span><span class="s2">.</span>

<span class="s2">This rule ignores type-only imports in Flow and TypeScript syntax </span><span class="s1">(</span><span class="s2">`import type` and `import typeof`</span><span class="s1">)</span><span class="s2">, which have no runtime effect.</span>

<span class="s0">## </span><span class="s2">Rule Details</span>

<span class="s0">### </span><span class="s2">Options</span>

<span class="s2">By default, this rule only detects cycles for ES6 imports, but see the </span><span class="s1">[</span><span class="s2">`no-unresolved` options</span><span class="s1">](</span><span class="s2">./no-unresolved.md#options</span><span class="s1">) </span><span class="s2">as this rule also supports the same `commonjs` and `amd` flags. However, these flags only impact which import types are </span><span class="s1">_</span><span class="s2">linted</span><span class="s1">_</span><span class="s2">; the</span>
<span class="s2">import/export infrastructure only registers `import` statements in dependencies, so</span>
<span class="s2">cycles created by `require` within imported modules may not be detected.</span>

<span class="s0">#### </span><span class="s2">`maxDepth`</span>

<span class="s2">There is a `maxDepth` option available to prevent full expansion of very deep dependency trees</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">/*eslint import/no-cycle: [2, { maxDepth: 1 }]*/</span>

<span class="s4">// dep-c.js</span>
<span class="s4">import './dep-a.js'</span>
<span class="s0">```</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// dep-b.js</span>
<span class="s4">import './dep-c.js'</span>

<span class="s4">export function b() { /* ... */ }</span>
<span class="s0">```</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// dep-a.js</span>
<span class="s4">import { b } from './dep-b.js' // not reported as the cycle is at depth 2</span>
<span class="s0">```</span>

<span class="s2">This is not necessarily recommended, but available as a cost/benefit tradeoff mechanism</span>
<span class="s2">for reducing total project lint time, if needed.</span>

<span class="s0">#### </span><span class="s2">`ignoreExternal`</span>

<span class="s2">An `ignoreExternal` option is available to prevent the cycle detection to expand to external modules</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">/*eslint import/no-cycle: [2, { ignoreExternal: true }]*/</span>

<span class="s4">// dep-a.js</span>
<span class="s4">import 'module-b/dep-b.js'</span>

<span class="s4">export function a() { /* ... */ }</span>
<span class="s0">```</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// node_modules/module-b/dep-b.js</span>
<span class="s4">import { a } from './dep-a.js' // not reported as this module is external</span>
<span class="s0">```</span>

<span class="s2">Its value is `false` by default, but can be set to `true` for reducing total project lint time, if needed.</span>

<span class="s0">#### </span><span class="s2">`allowUnsafeDynamicCyclicDependency`</span>

<span class="s2">This option disable reporting of errors if a cycle is detected with at least one dynamic import.</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// bar.js</span>
<span class="s4">import { foo } from './foo';</span>
<span class="s4">export const bar = foo;</span>

<span class="s4">// foo.js</span>
<span class="s4">export const foo = 'Foo';</span>
<span class="s4">export function getBar() { return import('./bar'); }</span>
<span class="s0">```</span>

<span class="s0">&gt; </span><span class="s2">Cyclic dependency are </span><span class="s1">**</span><span class="s2">always</span><span class="s1">** </span><span class="s2">a dangerous anti-pattern as discussed extensively in </span><span class="s1">[</span><span class="s2">#2265</span><span class="s1">](</span><span class="s5">https://github.com/import-js/eslint-plugin-import/issues/2265</span><span class="s1">)</span><span class="s2">. Please be extra careful about using this option.</span>

<span class="s0">#### </span><span class="s2">`disableScc`</span>

<span class="s2">This option disables a pre-processing step that calculates </span><span class="s1">[</span><span class="s2">Strongly Connected Components</span><span class="s1">](</span><span class="s5">https://en.wikipedia.org/wiki/Strongly_connected_component</span><span class="s1">)</span><span class="s2">, which are used for avoiding unnecessary work checking files in different SCCs for cycles.</span>

<span class="s2">However, under some configurations, this pre-processing may be more expensive than the time it saves.</span>

<span class="s2">When this option is `true`, we don't calculate any SCC graph, and check all files for cycles </span><span class="s1">(</span><span class="s2">leading to higher time-complexity</span><span class="s1">)</span><span class="s2">. Default is `false`.</span>

<span class="s0">## </span><span class="s2">When Not To Use It</span>

<span class="s2">This rule is comparatively computationally expensive. If you are pressed for lint</span>
<span class="s2">time, or don't think you have an issue with dependency cycles, you may not want</span>
<span class="s2">this rule enabled.</span>

<span class="s0">## </span><span class="s2">Further Reading</span>

 <span class="s0">- </span><span class="s1">[</span><span class="s2">Original inspiring issue</span><span class="s1">](</span><span class="s5">https://github.com/import-js/eslint-plugin-import/issues/941</span><span class="s1">)</span>
 <span class="s0">- </span><span class="s2">Rule to detect that module imports itself</span><span class="s1">: [</span><span class="s2">`no-self-import`</span><span class="s1">]</span>
 <span class="s0">- </span><span class="s1">[</span><span class="s2">`import/external-module-folders`</span><span class="s1">] </span><span class="s2">setting</span>

<span class="s0">[`no-self-import`]</span><span class="s1">: </span><span class="s6">./no-self-import.md</span>

<span class="s0">[`import/external-module-folders`]</span><span class="s1">: </span><span class="s6">../../README.md#importexternal-module-folders</span>
</pre>
</body>
</html>