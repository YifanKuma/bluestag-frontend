<html>
<head>
<title>after-production-compile.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
after-production-compile.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/build/after-production-compile.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextConfigComplete } from '../server/config-shared'</span><span class="s3">\n</span><span class="s1">import type { Span } from '../trace'</span><span class="s3">\n\n</span><span class="s1">import * as Log from './output/log'</span><span class="s3">\n</span><span class="s1">import createSpinner from './spinner'</span><span class="s3">\n</span><span class="s1">import isError from '../lib/is-error'</span><span class="s3">\n</span><span class="s1">import type { Telemetry } from '../telemetry/storage'</span><span class="s3">\n</span><span class="s1">import { EVENT_BUILD_FEATURE_USAGE } from '../telemetry/events/build'</span><span class="s3">\n\n</span><span class="s1">// TODO: refactor this to account for more compiler lifecycle events</span><span class="s3">\n</span><span class="s1">// such as beforeProductionBuild, but for now this is the only one that is needed</span><span class="s3">\n</span><span class="s1">export async function runAfterProductionCompile({</span><span class="s3">\n  </span><span class="s1">config,</span><span class="s3">\n  </span><span class="s1">buildSpan,</span><span class="s3">\n  </span><span class="s1">telemetry,</span><span class="s3">\n  </span><span class="s1">metadata,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">config: NextConfigComplete</span><span class="s3">\n  </span><span class="s1">buildSpan: Span</span><span class="s3">\n  </span><span class="s1">telemetry: Telemetry</span><span class="s3">\n  </span><span class="s1">metadata: {</span><span class="s3">\n    </span><span class="s1">projectDir: string</span><span class="s3">\n    </span><span class="s1">distDir: string</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}): Promise&lt;void&gt; {</span><span class="s3">\n  </span><span class="s1">const run = config.compiler.runAfterProductionCompile</span><span class="s3">\n  </span><span class="s1">if (!run) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">telemetry.record([</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">eventName: EVENT_BUILD_FEATURE_USAGE,</span><span class="s3">\n      </span><span class="s1">payload: {</span><span class="s3">\n        </span><span class="s1">featureName: 'runAfterProductionCompile',</span><span class="s3">\n        </span><span class="s1">invocationCount: 1,</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n  </span><span class="s1">const afterBuildSpinner = createSpinner(</span><span class="s3">\n    </span><span class="s1">'Running next.config.js provided runAfterProductionCompile'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const startTime = performance.now()</span><span class="s3">\n    </span><span class="s1">await buildSpan</span><span class="s3">\n      </span><span class="s1">.traceChild('after-production-compile')</span><span class="s3">\n      </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n        </span><span class="s1">await run(metadata)</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">const duration = performance.now() - startTime</span><span class="s3">\n    </span><span class="s1">const formattedDuration = `${Math.round(duration)}ms`</span><span class="s3">\n    </span><span class="s1">Log.event(`Completed runAfterProductionCompile in ${formattedDuration}`)</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">// Handle specific known errors differently if needed</span><span class="s3">\n    </span><span class="s1">if (isError(err)) {</span><span class="s3">\n      </span><span class="s1">Log.error(`Failed to run runAfterProductionCompile: ${err.message}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">throw err</span><span class="s3">\n  </span><span class="s1">} finally {</span><span class="s3">\n    </span><span class="s1">afterBuildSpinner?.stop()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;runAfterProductionCompile&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;buildSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;telemetry&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;run&quot;</span><span class="s0">,</span><span class="s1">&quot;compiler&quot;</span><span class="s0">,</span><span class="s1">&quot;record&quot;</span><span class="s0">,</span><span class="s1">&quot;eventName&quot;</span><span class="s0">,</span><span class="s1">&quot;EVENT_BUILD_FEATURE_USAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;payload&quot;</span><span class="s0">,</span><span class="s1">&quot;featureName&quot;</span><span class="s0">,</span><span class="s1">&quot;invocationCount&quot;</span><span class="s0">,</span><span class="s1">&quot;afterBuildSpinner&quot;</span><span class="s0">,</span><span class="s1">&quot;createSpinner&quot;</span><span class="s0">,</span><span class="s1">&quot;startTime&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;traceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;duration&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedDuration&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;round&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;stop&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAWsBA;;;eAAAA;;;6DARD;gEACK;gEACN;uBAEsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAInC,eAAeA,0BAA0B,EAC9CC,MAAM,EACNC,SAAS,EACTC,SAAS,EACTC,QAAQ,EAST;IACC,MAAMC,MAAMJ,OAAOK,QAAQ,CAACN,yBAAyB;IACrD,IAAI,CAACK,KAAK;QACR;IACF;IACAF,UAAUI,MAAM,CAAC;QACf;YACEC,WAAWC,gCAAyB;YACpCC,SAAS;gBACPC,aAAa;gBACbC,iBAAiB;YACnB;QACF;KACD;IACD,MAAMC,oBAAoBC,IAAAA,gBAAa,EACrC;IAGF,IAAI;QACF,MAAMC,YAAYC,YAAYC,GAAG;QACjC,MAAMf,UACHgB,UAAU,CAAC,4BACXC,YAAY,CAAC;YACZ,MAAMd,IAAID;QACZ;QACF,MAAMgB,WAAWJ,YAAYC,GAAG,KAAKF;QACrC,MAAMM,oBAAoB,GAAGC,KAAKC,KAAK,CAACH,UAAU,EAAE,CAAC;QACrDI,KAAIC,KAAK,CAAC,CAAC,uCAAuC,EAAEJ,mBAAmB;IACzE,EAAE,OAAOK,KAAK;QACZ,qDAAqD;QACrD,IAAIC,IAAAA,gBAAO,EAACD,MAAM;YAChBF,KAAII,KAAK,CAAC,CAAC,yCAAyC,EAAEF,IAAIG,OAAO,EAAE;QACrE;QAEA,MAAMH;IACR,SAAU;QACRb,qCAAAA,kBAAmBiB,IAAI;IACzB;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>