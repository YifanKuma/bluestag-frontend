<html>
<head>
<title>app-router-announcer.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
app-router-announcer.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/client/components/app-router-announcer.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { useEffect, useRef, useState } from 'react'</span><span class="s3">\n</span><span class="s1">import { createPortal } from 'react-dom'</span><span class="s3">\n</span><span class="s1">import type { FlightRouterState } from '../../server/app-render/types'</span><span class="s3">\n\n</span><span class="s1">const ANNOUNCER_TYPE = 'next-route-announcer'</span><span class="s3">\n</span><span class="s1">const ANNOUNCER_ID = '__next-route-announcer__'</span><span class="s3">\n\n</span><span class="s1">function getAnnouncerNode() {</span><span class="s3">\n  </span><span class="s1">const existingAnnouncer = document.getElementsByName(ANNOUNCER_TYPE)[0]</span><span class="s3">\n  </span><span class="s1">if (existingAnnouncer?.shadowRoot?.childNodes[0]) {</span><span class="s3">\n    </span><span class="s1">return existingAnnouncer.shadowRoot.childNodes[0] as HTMLElement</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const container = document.createElement(ANNOUNCER_TYPE)</span><span class="s3">\n    </span><span class="s1">container.style.cssText = 'position:absolute'</span><span class="s3">\n    </span><span class="s1">const announcer = document.createElement('div')</span><span class="s3">\n    </span><span class="s1">announcer.ariaLive = 'assertive'</span><span class="s3">\n    </span><span class="s1">announcer.id = ANNOUNCER_ID</span><span class="s3">\n    </span><span class="s1">announcer.role = 'alert'</span><span class="s3">\n    </span><span class="s1">announcer.style.cssText =</span><span class="s3">\n      </span><span class="s1">'position:absolute;border:0;height:1px;margin:-1px;padding:0;width:1px;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;word-wrap:normal'</span><span class="s3">\n\n    </span><span class="s1">// Use shadow DOM here to avoid any potential CSS bleed</span><span class="s3">\n    </span><span class="s1">const shadow = container.attachShadow({ mode: 'open' })</span><span class="s3">\n    </span><span class="s1">shadow.appendChild(announcer)</span><span class="s3">\n    </span><span class="s1">document.body.appendChild(container)</span><span class="s3">\n    </span><span class="s1">return announcer</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function AppRouterAnnouncer({ tree }: { tree: FlightRouterState }) {</span><span class="s3">\n  </span><span class="s1">const [portalNode, setPortalNode] = useState&lt;HTMLElement | null&gt;(null)</span><span class="s3">\n\n  </span><span class="s1">useEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">const announcer = getAnnouncerNode()</span><span class="s3">\n    </span><span class="s1">setPortalNode(announcer)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">const container = document.getElementsByTagName(ANNOUNCER_TYPE)[0]</span><span class="s3">\n      </span><span class="s1">if (container?.isConnected) {</span><span class="s3">\n        </span><span class="s1">document.body.removeChild(container)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [])</span><span class="s3">\n\n  </span><span class="s1">const [routeAnnouncement, setRouteAnnouncement] = useState('')</span><span class="s3">\n  </span><span class="s1">const previousTitle = useRef&lt;string | undefined&gt;(undefined)</span><span class="s3">\n\n  </span><span class="s1">useEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">let currentTitle = ''</span><span class="s3">\n    </span><span class="s1">if (document.title) {</span><span class="s3">\n      </span><span class="s1">currentTitle = document.title</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">const pageHeader = document.querySelector('h1')</span><span class="s3">\n      </span><span class="s1">if (pageHeader) {</span><span class="s3">\n        </span><span class="s1">currentTitle = pageHeader.innerText || pageHeader.textContent || ''</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Only announce the title change, but not for the first load because screen</span><span class="s3">\n    </span><span class="s1">// readers do that automatically.</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">previousTitle.current !== undefined &amp;&amp;</span><span class="s3">\n      </span><span class="s1">previousTitle.current !== currentTitle</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">setRouteAnnouncement(currentTitle)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">previousTitle.current = currentTitle</span><span class="s3">\n  </span><span class="s1">}, [tree])</span><span class="s3">\n\n  </span><span class="s1">return portalNode ? createPortal(routeAnnouncement, portalNode) : null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AppRouterAnnouncer&quot;</span><span class="s0">,</span><span class="s1">&quot;ANNOUNCER_TYPE&quot;</span><span class="s0">,</span><span class="s1">&quot;ANNOUNCER_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;getAnnouncerNode&quot;</span><span class="s0">,</span><span class="s1">&quot;existingAnnouncer&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;getElementsByName&quot;</span><span class="s0">,</span><span class="s1">&quot;shadowRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;childNodes&quot;</span><span class="s0">,</span><span class="s1">&quot;container&quot;</span><span class="s0">,</span><span class="s1">&quot;createElement&quot;</span><span class="s0">,</span><span class="s1">&quot;style&quot;</span><span class="s0">,</span><span class="s1">&quot;cssText&quot;</span><span class="s0">,</span><span class="s1">&quot;announcer&quot;</span><span class="s0">,</span><span class="s1">&quot;ariaLive&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;role&quot;</span><span class="s0">,</span><span class="s1">&quot;shadow&quot;</span><span class="s0">,</span><span class="s1">&quot;attachShadow&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;appendChild&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;portalNode&quot;</span><span class="s0">,</span><span class="s1">&quot;setPortalNode&quot;</span><span class="s0">,</span><span class="s1">&quot;useState&quot;</span><span class="s0">,</span><span class="s1">&quot;useEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;getElementsByTagName&quot;</span><span class="s0">,</span><span class="s1">&quot;isConnected&quot;</span><span class="s0">,</span><span class="s1">&quot;removeChild&quot;</span><span class="s0">,</span><span class="s1">&quot;routeAnnouncement&quot;</span><span class="s0">,</span><span class="s1">&quot;setRouteAnnouncement&quot;</span><span class="s0">,</span><span class="s1">&quot;previousTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;useRef&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;currentTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;pageHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;querySelector&quot;</span><span class="s0">,</span><span class="s1">&quot;innerText&quot;</span><span class="s0">,</span><span class="s1">&quot;textContent&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;createPortal&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BA6BgBA;;;eAAAA;;;uBA7B4B;0BACf;AAG7B,MAAMC,iBAAiB;AACvB,MAAMC,eAAe;AAErB,SAASC;QAEHC;IADJ,MAAMA,oBAAoBC,SAASC,iBAAiB,CAACL,eAAe,CAAC,EAAE;IACvE,IAAIG,sCAAAA,gCAAAA,kBAAmBG,UAAU,qBAA7BH,8BAA+BI,UAAU,CAAC,EAAE,EAAE;QAChD,OAAOJ,kBAAkBG,UAAU,CAACC,UAAU,CAAC,EAAE;IACnD,OAAO;QACL,MAAMC,YAAYJ,SAASK,aAAa,CAACT;QACzCQ,UAAUE,KAAK,CAACC,OAAO,GAAG;QAC1B,MAAMC,YAAYR,SAASK,aAAa,CAAC;QACzCG,UAAUC,QAAQ,GAAG;QACrBD,UAAUE,EAAE,GAAGb;QACfW,UAAUG,IAAI,GAAG;QACjBH,UAAUF,KAAK,CAACC,OAAO,GACrB;QAEF,uDAAuD;QACvD,MAAMK,SAASR,UAAUS,YAAY,CAAC;YAAEC,MAAM;QAAO;QACrDF,OAAOG,WAAW,CAACP;QACnBR,SAASgB,IAAI,CAACD,WAAW,CAACX;QAC1B,OAAOI;IACT;AACF;AAEO,SAASb,mBAAmB,KAAqC;IAArC,IAAA,EAAEsB,IAAI,EAA+B,GAArC;IACjC,MAAM,CAACC,YAAYC,cAAc,GAAGC,IAAAA,eAAQ,EAAqB;IAEjEC,IAAAA,gBAAS,EAAC;QACR,MAAMb,YAAYV;QAClBqB,cAAcX;QACd,OAAO;YACL,MAAMJ,YAAYJ,SAASsB,oBAAoB,CAAC1B,eAAe,CAAC,EAAE;YAClE,IAAIQ,6BAAAA,UAAWmB,WAAW,EAAE;gBAC1BvB,SAASgB,IAAI,CAACQ,WAAW,CAACpB;YAC5B;QACF;IACF,GAAG,EAAE;IAEL,MAAM,CAACqB,mBAAmBC,qBAAqB,GAAGN,IAAAA,eAAQ,EAAC;IAC3D,MAAMO,gBAAgBC,IAAAA,aAAM,EAAqBC;IAEjDR,IAAAA,gBAAS,EAAC;QACR,IAAIS,eAAe;QACnB,IAAI9B,SAAS+B,KAAK,EAAE;YAClBD,eAAe9B,SAAS+B,KAAK;QAC/B,OAAO;YACL,MAAMC,aAAahC,SAASiC,aAAa,CAAC;YAC1C,IAAID,YAAY;gBACdF,eAAeE,WAAWE,SAAS,IAAIF,WAAWG,WAAW,IAAI;YACnE;QACF;QAEA,4EAA4E;QAC5E,iCAAiC;QACjC,IACER,cAAcS,OAAO,KAAKP,aAC1BF,cAAcS,OAAO,KAAKN,cAC1B;YACAJ,qBAAqBI;QACvB;QACAH,cAAcS,OAAO,GAAGN;IAC1B,GAAG;QAACb;KAAK;IAET,OAAOC,2BAAamB,IAAAA,sBAAY,EAACZ,mBAAmBP,cAAc;AACpE&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>