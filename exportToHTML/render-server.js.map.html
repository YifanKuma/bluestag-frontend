<html>
<head>
<title>render-server.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
render-server.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/lib/render-server.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextServer, RequestHandler, UpgradeHandler } from '../next'</span><span class="s3">\n</span><span class="s1">import type { DevBundlerService } from './dev-bundler-service'</span><span class="s3">\n</span><span class="s1">import type { PropagateToWorkersField } from './router-utils/types'</span><span class="s3">\n\n</span><span class="s1">import next from '../next'</span><span class="s3">\n</span><span class="s1">import type { Span } from '../../trace'</span><span class="s3">\n\n</span><span class="s1">export type ServerInitResult = {</span><span class="s3">\n  </span><span class="s1">requestHandler: RequestHandler</span><span class="s3">\n  </span><span class="s1">upgradeHandler: UpgradeHandler</span><span class="s3">\n  </span><span class="s1">server: NextServer</span><span class="s3">\n  </span><span class="s1">// Make an effort to close upgraded HTTP requests (e.g. Turbopack HMR websockets)</span><span class="s3">\n  </span><span class="s1">closeUpgraded: () =&gt; void</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">let initializations: Record&lt;string, Promise&lt;ServerInitResult&gt; | undefined&gt; = {}</span><span class="s3">\n\n</span><span class="s1">let sandboxContext: undefined | typeof import('../web/sandbox/context')</span><span class="s3">\n\n</span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n  </span><span class="s1">sandboxContext =</span><span class="s3">\n    </span><span class="s1">require('../web/sandbox/context') as typeof import('../web/sandbox/context')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function clearAllModuleContexts() {</span><span class="s3">\n  </span><span class="s1">return sandboxContext?.clearAllModuleContexts()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function clearModuleContext(target: string) {</span><span class="s3">\n  </span><span class="s1">return sandboxContext?.clearModuleContext(target)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function getServerField(</span><span class="s3">\n  </span><span class="s1">dir: string,</span><span class="s3">\n  </span><span class="s1">field: PropagateToWorkersField</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const initialization = await initializations[dir]</span><span class="s3">\n  </span><span class="s1">if (!initialization) {</span><span class="s3">\n    </span><span class="s1">throw new Error('Invariant cant propagate server field, no app initialized')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const { server } = initialization</span><span class="s3">\n  </span><span class="s1">let wrappedServer = server['server']! // NextServer.server is private</span><span class="s3">\n  </span><span class="s1">return wrappedServer[field as keyof typeof wrappedServer]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function propagateServerField(</span><span class="s3">\n  </span><span class="s1">dir: string,</span><span class="s3">\n  </span><span class="s1">field: PropagateToWorkersField,</span><span class="s3">\n  </span><span class="s1">value: any</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const initialization = await initializations[dir]</span><span class="s3">\n  </span><span class="s1">if (!initialization) {</span><span class="s3">\n    </span><span class="s1">throw new Error('Invariant cant propagate server field, no app initialized')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const { server } = initialization</span><span class="s3">\n  </span><span class="s1">let wrappedServer = server['server']</span><span class="s3">\n  </span><span class="s1">const _field = field as keyof NonNullable&lt;typeof wrappedServer&gt;</span><span class="s3">\n\n  </span><span class="s1">if (wrappedServer) {</span><span class="s3">\n    </span><span class="s1">if (typeof wrappedServer[_field] === 'function') {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error</span><span class="s3">\n      </span><span class="s1">await wrappedServer[_field].apply(</span><span class="s3">\n        </span><span class="s1">wrappedServer,</span><span class="s3">\n        </span><span class="s1">Array.isArray(value) ? value : []</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error</span><span class="s3">\n      </span><span class="s1">wrappedServer[_field] = value</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function initializeImpl(opts: {</span><span class="s3">\n  </span><span class="s1">dir: string</span><span class="s3">\n  </span><span class="s1">port: number</span><span class="s3">\n  </span><span class="s1">dev: boolean</span><span class="s3">\n  </span><span class="s1">minimalMode?: boolean</span><span class="s3">\n  </span><span class="s1">hostname?: string</span><span class="s3">\n  </span><span class="s1">keepAliveTimeout?: number</span><span class="s3">\n  </span><span class="s1">serverFields?: any</span><span class="s3">\n  </span><span class="s1">server?: any</span><span class="s3">\n  </span><span class="s1">experimentalTestProxy: boolean</span><span class="s3">\n  </span><span class="s1">experimentalHttpsServer: boolean</span><span class="s3">\n  </span><span class="s1">_ipcPort?: string</span><span class="s3">\n  </span><span class="s1">_ipcKey?: string</span><span class="s3">\n  </span><span class="s1">bundlerService: DevBundlerService | undefined</span><span class="s3">\n  </span><span class="s1">startServerSpan: Span | undefined</span><span class="s3">\n  </span><span class="s1">quiet?: boolean</span><span class="s3">\n  </span><span class="s1">onDevServerCleanup: ((listener: () =&gt; Promise&lt;void&gt;) =&gt; void) | undefined</span><span class="s3">\n</span><span class="s1">}): Promise&lt;ServerInitResult&gt; {</span><span class="s3">\n  </span><span class="s1">const type = process.env.__NEXT_PRIVATE_RENDER_WORKER</span><span class="s3">\n  </span><span class="s1">if (type) {</span><span class="s3">\n    </span><span class="s1">process.title = 'next-render-worker-' + type</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let requestHandler: RequestHandler</span><span class="s3">\n  </span><span class="s1">let upgradeHandler: UpgradeHandler</span><span class="s3">\n\n  </span><span class="s1">const server = next({</span><span class="s3">\n    </span><span class="s1">...opts,</span><span class="s3">\n    </span><span class="s1">hostname: opts.hostname || 'localhost',</span><span class="s3">\n    </span><span class="s1">customServer: false,</span><span class="s3">\n    </span><span class="s1">httpServer: opts.server,</span><span class="s3">\n    </span><span class="s1">port: opts.port,</span><span class="s3">\n  </span><span class="s1">}) as NextServer // should return a NextServer when `customServer: false`</span><span class="s3">\n  </span><span class="s1">requestHandler = server.getRequestHandler()</span><span class="s3">\n  </span><span class="s1">upgradeHandler = server.getUpgradeHandler()</span><span class="s3">\n\n  </span><span class="s1">await server.prepare(opts.serverFields)</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">requestHandler,</span><span class="s3">\n    </span><span class="s1">upgradeHandler,</span><span class="s3">\n    </span><span class="s1">server,</span><span class="s3">\n    </span><span class="s1">closeUpgraded() {</span><span class="s3">\n      </span><span class="s1">opts.bundlerService?.close()</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function initialize(</span><span class="s3">\n  </span><span class="s1">opts: Parameters&lt;typeof initializeImpl&gt;[0]</span><span class="s3">\n</span><span class="s1">): Promise&lt;ServerInitResult&gt; {</span><span class="s3">\n  </span><span class="s1">// if we already setup the server return as we only need to do</span><span class="s3">\n  </span><span class="s1">// this on first worker boot</span><span class="s3">\n  </span><span class="s1">if (initializations[opts.dir]) {</span><span class="s3">\n    </span><span class="s1">return initializations[opts.dir]!</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return (initializations[opts.dir] = initializeImpl(opts))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;clearAllModuleContexts&quot;</span><span class="s0">,</span><span class="s1">&quot;clearModuleContext&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerField&quot;</span><span class="s0">,</span><span class="s1">&quot;initialize&quot;</span><span class="s0">,</span><span class="s1">&quot;propagateServerField&quot;</span><span class="s0">,</span><span class="s1">&quot;initializations&quot;</span><span class="s0">,</span><span class="s1">&quot;sandboxContext&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;field&quot;</span><span class="s0">,</span><span class="s1">&quot;initialization&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;server&quot;</span><span class="s0">,</span><span class="s1">&quot;wrappedServer&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;_field&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;initializeImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PRIVATE_RENDER_WORKER&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;requestHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;upgradeHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;customServer&quot;</span><span class="s0">,</span><span class="s1">&quot;httpServer&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;getUpgradeHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;prepare&quot;</span><span class="s0">,</span><span class="s1">&quot;serverFields&quot;</span><span class="s0">,</span><span class="s1">&quot;closeUpgraded&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlerService&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;IAwBgBA,sBAAsB;eAAtBA;;IAIAC,kBAAkB;eAAlBA;;IAIMC,cAAc;eAAdA;;IAwFAC,UAAU;eAAVA;;IA3EAC,oBAAoB;eAApBA;;;6DAzCL;;;;;;AAWjB,IAAIC,kBAAyE,CAAC;AAE9E,IAAIC;AAEJ,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,cAAc;IACzCH,iBACEI,QAAQ;AACZ;AAEO,SAASV;IACd,OAAOM,kCAAAA,eAAgBN,sBAAsB;AAC/C;AAEO,SAASC,mBAAmBU,MAAc;IAC/C,OAAOL,kCAAAA,eAAgBL,kBAAkB,CAACU;AAC5C;AAEO,eAAeT,eACpBU,GAAW,EACXC,KAA8B;IAE9B,MAAMC,iBAAiB,MAAMT,eAAe,CAACO,IAAI;IACjD,IAAI,CAACE,gBAAgB;QACnB,MAAM,qBAAsE,CAAtE,IAAIC,MAAM,8DAAV,qBAAA;mBAAA;wBAAA;0BAAA;QAAqE;IAC7E;IACA,MAAM,EAAEC,MAAM,EAAE,GAAGF;IACnB,IAAIG,gBAAgBD,MAAM,CAAC,SAAS,AAAE,+BAA+B;;IACrE,OAAOC,aAAa,CAACJ,MAAoC;AAC3D;AAEO,eAAeT,qBACpBQ,GAAW,EACXC,KAA8B,EAC9BK,KAAU;IAEV,MAAMJ,iBAAiB,MAAMT,eAAe,CAACO,IAAI;IACjD,IAAI,CAACE,gBAAgB;QACnB,MAAM,qBAAsE,CAAtE,IAAIC,MAAM,8DAAV,qBAAA;mBAAA;wBAAA;0BAAA;QAAqE;IAC7E;IACA,MAAM,EAAEC,MAAM,EAAE,GAAGF;IACnB,IAAIG,gBAAgBD,MAAM,CAAC,SAAS;IACpC,MAAMG,SAASN;IAEf,IAAII,eAAe;QACjB,IAAI,OAAOA,aAAa,CAACE,OAAO,KAAK,YAAY;YAC/C,mBAAmB;YACnB,MAAMF,aAAa,CAACE,OAAO,CAACC,KAAK,CAC/BH,eACAI,MAAMC,OAAO,CAACJ,SAASA,QAAQ,EAAE;QAErC,OAAO;YACL,mBAAmB;YACnBD,aAAa,CAACE,OAAO,GAAGD;QAC1B;IACF;AACF;AAEA,eAAeK,eAAeC,IAiB7B;IACC,MAAMC,OAAOlB,QAAQC,GAAG,CAACkB,4BAA4B;IACrD,IAAID,MAAM;QACRlB,QAAQoB,KAAK,GAAG,wBAAwBF;IAC1C;IAEA,IAAIG;IACJ,IAAIC;IAEJ,MAAMb,SAASc,IAAAA,aAAI,EAAC;QAClB,GAAGN,IAAI;QACPO,UAAUP,KAAKO,QAAQ,IAAI;QAC3BC,cAAc;QACdC,YAAYT,KAAKR,MAAM;QACvBkB,MAAMV,KAAKU,IAAI;IACjB,EAAiB,wDAAwD;;IACzEN,iBAAiBZ,OAAOmB,iBAAiB;IACzCN,iBAAiBb,OAAOoB,iBAAiB;IAEzC,MAAMpB,OAAOqB,OAAO,CAACb,KAAKc,YAAY;IAEtC,OAAO;QACLV;QACAC;QACAb;QACAuB;gBACEf;aAAAA,uBAAAA,KAAKgB,cAAc,qBAAnBhB,qBAAqBiB,KAAK;QAC5B;IACF;AACF;AAEO,eAAetC,WACpBqB,IAA0C;IAE1C,8DAA8D;IAC9D,4BAA4B;IAC5B,IAAInB,eAAe,CAACmB,KAAKZ,GAAG,CAAC,EAAE;QAC7B,OAAOP,eAAe,CAACmB,KAAKZ,GAAG,CAAC;IAClC;IACA,OAAQP,eAAe,CAACmB,KAAKZ,GAAG,CAAC,GAAGW,eAAeC;AACrD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>