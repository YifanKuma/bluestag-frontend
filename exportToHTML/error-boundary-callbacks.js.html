<html>
<head>
<title>error-boundary-callbacks.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #080808;}
.s2 { color: #067d17;}
.s3 { color: #0033b3;}
.s4 { color: #1750eb;}
.s5 { color: #0037a6;}
.s6 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
error-boundary-callbacks.js</font>
</center></td></tr></table>
<pre><span class="s0">// This file is only used in app router due to the specific error state handling.</span>
<span class="s2">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s2">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s3">true</span>
<span class="s1">});</span>
<span class="s4">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s1">onCaughtError: </span><span class="s3">null</span><span class="s1">,</span>
    <span class="s1">onUncaughtError: </span><span class="s3">null</span>
<span class="s1">});</span>
<span class="s3">function </span><span class="s1">_export(target, all) {</span>
    <span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">name </span><span class="s3">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s3">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s1">onCaughtError: </span><span class="s3">function</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s1">onCaughtError;</span>
    <span class="s1">},</span>
    <span class="s1">onUncaughtError: </span><span class="s3">function</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s1">onUncaughtError;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s3">const </span><span class="s1">_interop_require_default = require(</span><span class="s2">&quot;@swc/helpers/_/_interop_require_default&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_isnextroutererror = require(</span><span class="s2">&quot;../components/is-next-router-error&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_bailouttocsr = require(</span><span class="s2">&quot;../../shared/lib/lazy-dynamic/bailout-to-csr&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_reportglobalerror = require(</span><span class="s2">&quot;./report-global-error&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_errorboundary = require(</span><span class="s2">&quot;../components/error-boundary&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_globalerror = </span><span class="s0">/*#__PURE__*/ </span><span class="s1">_interop_require_default._(require(</span><span class="s2">&quot;../components/builtin/global-error&quot;</span><span class="s1">));</span>
<span class="s3">const </span><span class="s1">devToolErrorMod = process.env.NODE_ENV !== </span><span class="s2">'production' </span><span class="s1">? require(</span><span class="s2">'../../next-devtools/userspace/app/errors'</span><span class="s1">) : {</span>
    <span class="s1">decorateDevError: (error)=&gt;error,</span>
    <span class="s1">handleClientError: ()=&gt;{},</span>
    <span class="s1">originConsoleError: console.error.bind(console)</span>
<span class="s1">};</span>
<span class="s3">function </span><span class="s1">onCaughtError(thrownValue, errorInfo) {</span>
    <span class="s3">var </span><span class="s1">_errorInfo_errorBoundary;</span>
    <span class="s3">const </span><span class="s1">errorBoundaryComponent = (_errorInfo_errorBoundary = errorInfo.errorBoundary) == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: _errorInfo_errorBoundary.constructor;</span>
    <span class="s3">let </span><span class="s1">isImplicitErrorBoundary;</span>
    <span class="s3">if </span><span class="s1">(process.env.NODE_ENV !== </span><span class="s2">'production'</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ AppDevOverlayErrorBoundary } = require(</span><span class="s2">'../../next-devtools/userspace/app/app-dev-overlay-error-boundary'</span><span class="s1">);</span>
        <span class="s1">isImplicitErrorBoundary = errorBoundaryComponent === AppDevOverlayErrorBoundary;</span>
    <span class="s1">}</span>
    <span class="s1">isImplicitErrorBoundary = isImplicitErrorBoundary || errorBoundaryComponent === _errorboundary.ErrorBoundaryHandler &amp;&amp; errorInfo.errorBoundary.props.errorComponent === _globalerror.default;</span>
    <span class="s0">// Skip the segment explorer triggered error</span>
    <span class="s3">if </span><span class="s1">(process.env.NODE_ENV !== </span><span class="s2">'production'</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">{ SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE } = require(</span><span class="s2">'../../next-devtools/userspace/app/segment-explorer-node'</span><span class="s1">);</span>
        <span class="s3">if </span><span class="s1">(thrownValue </span><span class="s3">instanceof </span><span class="s1">Error &amp;&amp; thrownValue.message === SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE) {</span>
            <span class="s3">return</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(isImplicitErrorBoundary) {</span>
        <span class="s0">// We don't consider errors caught unless they're caught by an explicit error</span>
        <span class="s0">// boundary. The built-in ones are considered implicit.</span>
        <span class="s0">// This mimics how the same app would behave without Next.js.</span>
        <span class="s3">return </span><span class="s1">onUncaughtError(thrownValue);</span>
    <span class="s1">}</span>
    <span class="s0">// Skip certain custom errors which are not expected to be reported on client</span>
    <span class="s3">if </span><span class="s1">((</span><span class="s4">0</span><span class="s1">, _bailouttocsr.isBailoutToCSRError)(thrownValue) || (</span><span class="s4">0</span><span class="s1">, _isnextroutererror.isNextRouterError)(thrownValue)) </span><span class="s3">return</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(process.env.NODE_ENV !== </span><span class="s2">'production'</span><span class="s1">) {</span>
        <span class="s3">var </span><span class="s1">_errorInfo_componentStack;</span>
        <span class="s3">const </span><span class="s1">errorBoundaryName = (</span><span class="s0">// read react component displayName</span>
        <span class="s1">errorBoundaryComponent == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: errorBoundaryComponent.displayName) || (errorBoundaryComponent == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: errorBoundaryComponent.name) || </span><span class="s2">'Unknown'</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s1">componentThatErroredFrame = errorInfo == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: (_errorInfo_componentStack = errorInfo.componentStack) == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: _errorInfo_componentStack.split(</span><span class="s2">'</span><span class="s5">\n</span><span class="s2">'</span><span class="s1">)[</span><span class="s4">1</span><span class="s1">];</span>
        <span class="s3">var </span><span class="s0">// regex to match the function name in the stack trace</span>
        <span class="s0">// example 1: at Page (http://localhost:3000/_next/static/chunks/pages/index.js?ts=1631600000000:2:1)</span>
        <span class="s0">// example 2: Page@http://localhost:3000/_next/static/chunks/pages/index.js?ts=1631600000000:2:1</span>
        <span class="s1">_componentThatErroredFrame_match;</span>
        <span class="s0">// Match chrome or safari stack trace</span>
        <span class="s3">const </span><span class="s1">matches = (_componentThatErroredFrame_match = componentThatErroredFrame == </span><span class="s3">null </span><span class="s1">? </span><span class="s3">void </span><span class="s4">0 </span><span class="s1">: componentThatErroredFrame.match(</span><span class="s6">/\s+at (\w+)\s+|(\w+)@/</span><span class="s1">)) != </span><span class="s3">null </span><span class="s1">? _componentThatErroredFrame_match : [];</span>
        <span class="s3">const </span><span class="s1">componentThatErroredName = matches[</span><span class="s4">1</span><span class="s1">] || matches[</span><span class="s4">2</span><span class="s1">] || </span><span class="s2">'Unknown'</span><span class="s1">;</span>
        <span class="s0">// Create error location with errored component and error boundary, to match the behavior of default React onCaughtError handler.</span>
        <span class="s3">const </span><span class="s1">errorBoundaryMessage = </span><span class="s2">&quot;It was handled by the &lt;&quot; </span><span class="s1">+ errorBoundaryName + </span><span class="s2">&quot;&gt; error boundary.&quot;</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s1">componentErrorMessage = componentThatErroredName ? </span><span class="s2">&quot;The above error occurred in the &lt;&quot; </span><span class="s1">+ componentThatErroredName + </span><span class="s2">&quot;&gt; component.&quot; </span><span class="s1">: </span><span class="s2">&quot;The above error occurred in one of your components.&quot;</span><span class="s1">;</span>
        <span class="s3">const </span><span class="s1">errorLocation = componentErrorMessage + </span><span class="s2">&quot; &quot; </span><span class="s1">+ errorBoundaryMessage;</span>
        <span class="s3">const </span><span class="s1">error = devToolErrorMod.decorateDevError(thrownValue);</span>
        <span class="s0">// Log and report the error with location but without modifying the error stack</span>
        <span class="s1">devToolErrorMod.originConsoleError(</span><span class="s2">'%o</span><span class="s5">\n\n</span><span class="s2">%s'</span><span class="s1">, thrownValue, errorLocation);</span>
        <span class="s1">devToolErrorMod.handleClientError(error);</span>
    <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
        <span class="s1">devToolErrorMod.originConsoleError(thrownValue);</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s1">onUncaughtError(thrownValue) {</span>
    <span class="s0">// Skip certain custom errors which are not expected to be reported on client</span>
    <span class="s3">if </span><span class="s1">((</span><span class="s4">0</span><span class="s1">, _bailouttocsr.isBailoutToCSRError)(thrownValue) || (</span><span class="s4">0</span><span class="s1">, _isnextroutererror.isNextRouterError)(thrownValue)) </span><span class="s3">return</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(process.env.NODE_ENV !== </span><span class="s2">'production'</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">error = devToolErrorMod.decorateDevError(thrownValue);</span>
        <span class="s0">// TODO: Add an adendum to the overlay telling people about custom error boundaries.</span>
        <span class="s1">(</span><span class="s4">0</span><span class="s1">, _reportglobalerror.reportGlobalError)(error);</span>
    <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
        <span class="s1">(</span><span class="s4">0</span><span class="s1">, _reportglobalerror.reportGlobalError)(thrownValue);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">if </span><span class="s1">((</span><span class="s3">typeof </span><span class="s1">exports.default === </span><span class="s2">'function' </span><span class="s1">|| (</span><span class="s3">typeof </span><span class="s1">exports.default === </span><span class="s2">'object' </span><span class="s1">&amp;&amp; exports.default !== </span><span class="s3">null</span><span class="s1">)) &amp;&amp; </span><span class="s3">typeof </span><span class="s1">exports.default.__esModule === </span><span class="s2">'undefined'</span><span class="s1">) {</span>
  <span class="s1">Object.defineProperty(exports.default, </span><span class="s2">'__esModule'</span><span class="s1">, { value: </span><span class="s3">true </span><span class="s1">});</span>
  <span class="s1">Object.assign(exports.default, exports);</span>
  <span class="s1">module.exports = exports.default;</span>
<span class="s1">}</span>

<span class="s0">//# sourceMappingURL=error-boundary-callbacks.js.map</span></pre>
</body>
</html>