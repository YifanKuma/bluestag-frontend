<html>
<head>
<title>render.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
render.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/server/render.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { IncomingMessage, ServerResponse } from 'http'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { ReactDOMServerReadableStream } from 'react-dom/server'</span><span class="s3">\n</span><span class="s1">import type { NextRouter } from '../shared/lib/router/router'</span><span class="s3">\n</span><span class="s1">import type { HtmlProps } from '../shared/lib/html-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import type { DomainLocale } from './config'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">AppType,</span><span class="s3">\n  </span><span class="s1">DocumentInitialProps,</span><span class="s3">\n  </span><span class="s1">DocumentType,</span><span class="s3">\n  </span><span class="s1">DocumentProps,</span><span class="s3">\n  </span><span class="s1">DocumentContext,</span><span class="s3">\n  </span><span class="s1">NextComponentType,</span><span class="s3">\n  </span><span class="s1">RenderPage,</span><span class="s3">\n  </span><span class="s1">RenderPageResult,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import type { ImageConfigComplete } from '../shared/lib/image-config'</span><span class="s3">\n</span><span class="s1">import type { Redirect } from '../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">type NextApiRequestCookies,</span><span class="s3">\n  </span><span class="s1">type __ApiPreviewProps,</span><span class="s3">\n  </span><span class="s1">setLazyProp,</span><span class="s3">\n</span><span class="s1">} from './api-utils'</span><span class="s3">\n</span><span class="s1">import { getCookieParser } from './api-utils/get-cookie-parser'</span><span class="s3">\n</span><span class="s1">import type { LoadComponentsReturnType } from './load-components'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">GetServerSideProps,</span><span class="s3">\n  </span><span class="s1">GetStaticProps,</span><span class="s3">\n  </span><span class="s1">PreviewData,</span><span class="s3">\n  </span><span class="s1">ServerRuntime,</span><span class="s3">\n  </span><span class="s1">SizeLimit,</span><span class="s3">\n</span><span class="s1">} from '../types'</span><span class="s3">\n</span><span class="s1">import type { UnwrapPromise } from '../lib/coalesced-function'</span><span class="s3">\n</span><span class="s1">import type { ClientReferenceManifest } from '../build/webpack/plugins/flight-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { NextFontManifest } from '../build/webpack/plugins/next-font-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { PagesModule } from './route-modules/pages/module'</span><span class="s3">\n</span><span class="s1">import type { ComponentsEnhancer } from '../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import type { NextParsedUrlQuery } from './request-meta'</span><span class="s3">\n</span><span class="s1">import type { Revalidate } from './lib/cache-control'</span><span class="s3">\n</span><span class="s1">import type { COMPILER_NAMES } from '../shared/lib/constants'</span><span class="s3">\n\n</span><span class="s1">import React, { type JSX } from 'react'</span><span class="s3">\n</span><span class="s1">import ReactDOMServerPages from 'next/dist/server/ReactDOMServerPages'</span><span class="s3">\n</span><span class="s1">import { StyleRegistry, createStyleRegistry } from 'styled-jsx'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">GSP_NO_RETURNED_VALUE,</span><span class="s3">\n  </span><span class="s1">GSSP_COMPONENT_MEMBER_ERROR,</span><span class="s3">\n  </span><span class="s1">GSSP_NO_RETURNED_VALUE,</span><span class="s3">\n  </span><span class="s1">STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR,</span><span class="s3">\n  </span><span class="s1">SERVER_PROPS_GET_INIT_PROPS_CONFLICT,</span><span class="s3">\n  </span><span class="s1">SERVER_PROPS_SSG_CONFLICT,</span><span class="s3">\n  </span><span class="s1">SSG_GET_INITIAL_PROPS_CONFLICT,</span><span class="s3">\n  </span><span class="s1">UNSTABLE_REVALIDATE_RENAME_ERROR,</span><span class="s3">\n  </span><span class="s1">HTML_CONTENT_TYPE_HEADER,</span><span class="s3">\n  </span><span class="s1">JSON_CONTENT_TYPE_HEADER,</span><span class="s3">\n</span><span class="s1">} from '../lib/constants'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NEXT_BUILTIN_DOCUMENT,</span><span class="s3">\n  </span><span class="s1">SERVER_PROPS_ID,</span><span class="s3">\n  </span><span class="s1">STATIC_PROPS_ID,</span><span class="s3">\n  </span><span class="s1">STATIC_STATUS_PAGES,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { isSerializableProps } from '../lib/is-serializable-props'</span><span class="s3">\n</span><span class="s1">import { isInAmpMode } from '../shared/lib/amp-mode'</span><span class="s3">\n</span><span class="s1">import { AmpStateContext } from '../shared/lib/amp-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { defaultHead } from '../shared/lib/head'</span><span class="s3">\n</span><span class="s1">import { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import Loadable from '../shared/lib/loadable.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { LoadableContext } from '../shared/lib/loadable-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { RouterContext } from '../shared/lib/router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { isDynamicRoute } from '../shared/lib/router/utils/is-dynamic'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getDisplayName,</span><span class="s3">\n  </span><span class="s1">isResSent,</span><span class="s3">\n  </span><span class="s1">loadGetInitialProps,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import { HtmlContext } from '../shared/lib/html-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { normalizePagePath } from '../shared/lib/page-path/normalize-page-path'</span><span class="s3">\n</span><span class="s1">import { denormalizePagePath } from '../shared/lib/page-path/denormalize-page-path'</span><span class="s3">\n</span><span class="s1">import { getRequestMeta } from './request-meta'</span><span class="s3">\n</span><span class="s1">import { allowedStatusCodes, getRedirectStatus } from '../lib/redirect-status'</span><span class="s3">\n</span><span class="s1">import RenderResult, { type PagesRenderResultMetadata } from './render-result'</span><span class="s3">\n</span><span class="s1">import isError from '../lib/is-error'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">streamToString,</span><span class="s3">\n  </span><span class="s1">renderToInitialFizzStream,</span><span class="s3">\n</span><span class="s1">} from './stream-utils/node-web-streams-helper'</span><span class="s3">\n</span><span class="s1">import { ImageConfigContext } from '../shared/lib/image-config-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import stripAnsi from 'next/dist/compiled/strip-ansi'</span><span class="s3">\n</span><span class="s1">import { stripInternalQueries } from './internal-utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">adaptForAppRouterInstance,</span><span class="s3">\n  </span><span class="s1">adaptForPathParams,</span><span class="s3">\n  </span><span class="s1">adaptForSearchParams,</span><span class="s3">\n  </span><span class="s1">PathnameContextProviderAdapter,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/router/adapters'</span><span class="s3">\n</span><span class="s1">import { AppRouterContext } from '../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">SearchParamsContext,</span><span class="s3">\n  </span><span class="s1">PathParamsContext,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/hooks-client-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { getTracer } from './lib/trace/tracer'</span><span class="s3">\n</span><span class="s1">import { RenderSpan } from './lib/trace/constants'</span><span class="s3">\n</span><span class="s1">import { ReflectAdapter } from './web/spec-extension/adapters/reflect'</span><span class="s3">\n</span><span class="s1">import { getCacheControlHeader } from './lib/cache-control'</span><span class="s3">\n</span><span class="s1">import { getErrorSource } from '../shared/lib/error-source'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../shared/lib/deep-readonly'</span><span class="s3">\n</span><span class="s1">import type { PagesDevOverlayBridgeType } from '../next-devtools/userspace/pages/pages-dev-overlay-setup'</span><span class="s3">\n</span><span class="s1">import { getScriptNonceFromHeader } from './app-render/get-script-nonce-from-header'</span><span class="s3">\n\n</span><span class="s1">let tryGetPreviewData: typeof import('./api-utils/node/try-get-preview-data').tryGetPreviewData</span><span class="s3">\n</span><span class="s1">let warn: typeof import('../build/output/log').warn</span><span class="s3">\n</span><span class="s1">let postProcessHTML: typeof import('./post-process').postProcessHTML</span><span class="s3">\n\n</span><span class="s1">const DOCTYPE = '&lt;!DOCTYPE html&gt;'</span><span class="s3">\n\n</span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge') {</span><span class="s3">\n  </span><span class="s1">tryGetPreviewData = (</span><span class="s3">\n    </span><span class="s1">require('./api-utils/node/try-get-preview-data') as typeof import('./api-utils/node/try-get-preview-data')</span><span class="s3">\n  </span><span class="s1">).tryGetPreviewData</span><span class="s3">\n  </span><span class="s1">warn = (</span><span class="s3">\n    </span><span class="s1">require('../build/output/log') as typeof import('../build/output/log')</span><span class="s3">\n  </span><span class="s1">).warn</span><span class="s3">\n  </span><span class="s1">postProcessHTML = (</span><span class="s3">\n    </span><span class="s1">require('./post-process') as typeof import('./post-process')</span><span class="s3">\n  </span><span class="s1">).postProcessHTML</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">warn = console.warn.bind(console)</span><span class="s3">\n  </span><span class="s1">postProcessHTML = async (_pathname: string, html: string) =&gt; html</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function noRouter() {</span><span class="s3">\n  </span><span class="s1">const message =</span><span class="s3">\n    </span><span class="s1">'No router instance found. you should only use </span><span class="s3">\&quot;</span><span class="s1">next/router</span><span class="s3">\&quot; </span><span class="s1">inside the client side of your app. https://nextjs.org/docs/messages/no-router-instance'</span><span class="s3">\n  </span><span class="s1">throw new Error(message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function renderToString(element: React.ReactElement) {</span><span class="s3">\n  </span><span class="s1">const renderStream = await ReactDOMServerPages.renderToReadableStream(element)</span><span class="s3">\n  </span><span class="s1">await renderStream.allReady</span><span class="s3">\n  </span><span class="s1">return streamToString(renderStream)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">class ServerRouter implements NextRouter {</span><span class="s3">\n  </span><span class="s1">route: string</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">asPath: string</span><span class="s3">\n  </span><span class="s1">basePath: string</span><span class="s3">\n  </span><span class="s1">events: any</span><span class="s3">\n  </span><span class="s1">isFallback: boolean</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n  </span><span class="s1">isReady: boolean</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n  </span><span class="s1">domainLocales?: readonly DomainLocale[]</span><span class="s3">\n  </span><span class="s1">isPreview: boolean</span><span class="s3">\n  </span><span class="s1">isLocaleDomain: boolean</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">pathname: string,</span><span class="s3">\n    </span><span class="s1">query: ParsedUrlQuery,</span><span class="s3">\n    </span><span class="s1">as: string,</span><span class="s3">\n    </span><span class="s1">{ isFallback }: { isFallback: boolean },</span><span class="s3">\n    </span><span class="s1">isReady: boolean,</span><span class="s3">\n    </span><span class="s1">basePath: string,</span><span class="s3">\n    </span><span class="s1">locale?: string,</span><span class="s3">\n    </span><span class="s1">locales?: readonly string[],</span><span class="s3">\n    </span><span class="s1">defaultLocale?: string,</span><span class="s3">\n    </span><span class="s1">domainLocales?: readonly DomainLocale[],</span><span class="s3">\n    </span><span class="s1">isPreview?: boolean,</span><span class="s3">\n    </span><span class="s1">isLocaleDomain?: boolean</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">this.route = pathname.replace(/</span><span class="s3">\\</span><span class="s1">/$/, '') || '/'</span><span class="s3">\n    </span><span class="s1">this.pathname = pathname</span><span class="s3">\n    </span><span class="s1">this.query = query</span><span class="s3">\n    </span><span class="s1">this.asPath = as</span><span class="s3">\n    </span><span class="s1">this.isFallback = isFallback</span><span class="s3">\n    </span><span class="s1">this.basePath = basePath</span><span class="s3">\n    </span><span class="s1">this.locale = locale</span><span class="s3">\n    </span><span class="s1">this.locales = locales</span><span class="s3">\n    </span><span class="s1">this.defaultLocale = defaultLocale</span><span class="s3">\n    </span><span class="s1">this.isReady = isReady</span><span class="s3">\n    </span><span class="s1">this.domainLocales = domainLocales</span><span class="s3">\n    </span><span class="s1">this.isPreview = !!isPreview</span><span class="s3">\n    </span><span class="s1">this.isLocaleDomain = !!isLocaleDomain</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">push(): any {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">replace(): any {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">reload() {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">back() {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">forward(): void {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">prefetch(): any {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">beforePopState() {</span><span class="s3">\n    </span><span class="s1">noRouter()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function enhanceComponents(</span><span class="s3">\n  </span><span class="s1">options: ComponentsEnhancer,</span><span class="s3">\n  </span><span class="s1">App: AppType,</span><span class="s3">\n  </span><span class="s1">Component: NextComponentType</span><span class="s3">\n</span><span class="s1">): {</span><span class="s3">\n  </span><span class="s1">App: AppType</span><span class="s3">\n  </span><span class="s1">Component: NextComponentType</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">// For backwards compatibility</span><span class="s3">\n  </span><span class="s1">if (typeof options === 'function') {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">App,</span><span class="s3">\n      </span><span class="s1">Component: options(Component),</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">App: options.enhanceApp ? options.enhanceApp(App) : App,</span><span class="s3">\n    </span><span class="s1">Component: options.enhanceComponent</span><span class="s3">\n      </span><span class="s1">? options.enhanceComponent(Component)</span><span class="s3">\n      </span><span class="s1">: Component,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function renderPageTree(</span><span class="s3">\n  </span><span class="s1">App: AppType,</span><span class="s3">\n  </span><span class="s1">Component: NextComponentType,</span><span class="s3">\n  </span><span class="s1">props: any</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return &lt;App Component={Component} {...props} /&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RenderOptsPartial = {</span><span class="s3">\n  </span><span class="s1">canonicalBase: string</span><span class="s3">\n  </span><span class="s1">runtimeConfig?: { [key: string]: any }</span><span class="s3">\n  </span><span class="s1">assetPrefix?: string</span><span class="s3">\n  </span><span class="s1">err?: Error | null</span><span class="s3">\n  </span><span class="s1">nextExport?: boolean</span><span class="s3">\n  </span><span class="s1">dev?: boolean</span><span class="s3">\n  </span><span class="s1">ampPath?: string</span><span class="s3">\n  </span><span class="s1">ErrorDebug?: PagesDevOverlayBridgeType</span><span class="s3">\n  </span><span class="s1">ampValidator?: (html: string, pathname: string) =&gt; Promise&lt;void&gt;</span><span class="s3">\n  </span><span class="s1">ampSkipValidation?: boolean</span><span class="s3">\n  </span><span class="s1">ampOptimizerConfig?: { [key: string]: any }</span><span class="s3">\n  </span><span class="s1">isNextDataRequest?: boolean</span><span class="s3">\n  </span><span class="s1">params?: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">previewProps: __ApiPreviewProps | undefined</span><span class="s3">\n  </span><span class="s1">basePath: string</span><span class="s3">\n  </span><span class="s1">unstable_runtimeJS?: false</span><span class="s3">\n  </span><span class="s1">unstable_JsPreload?: false</span><span class="s3">\n  </span><span class="s1">optimizeCss: any</span><span class="s3">\n  </span><span class="s1">nextConfigOutput?: 'standalone' | 'export'</span><span class="s3">\n  </span><span class="s1">nextScriptWorkers: any</span><span class="s3">\n  </span><span class="s1">assetQueryString?: string</span><span class="s3">\n  </span><span class="s1">resolvedUrl?: string</span><span class="s3">\n  </span><span class="s1">resolvedAsPath?: string</span><span class="s3">\n  </span><span class="s1">setIsrStatus?: (key: string, value: boolean | null) =&gt; void</span><span class="s3">\n  </span><span class="s1">clientReferenceManifest?: DeepReadonly&lt;ClientReferenceManifest&gt;</span><span class="s3">\n  </span><span class="s1">nextFontManifest?: DeepReadonly&lt;NextFontManifest&gt;</span><span class="s3">\n  </span><span class="s1">distDir?: string</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n  </span><span class="s1">domainLocales?: readonly DomainLocale[]</span><span class="s3">\n  </span><span class="s1">disableOptimizedLoading?: boolean</span><span class="s3">\n  </span><span class="s1">supportsDynamicResponse: boolean</span><span class="s3">\n  </span><span class="s1">botType?: 'dom' | 'html' | undefined</span><span class="s3">\n  </span><span class="s1">serveStreamingMetadata?: boolean</span><span class="s3">\n  </span><span class="s1">runtime?: ServerRuntime</span><span class="s3">\n  </span><span class="s1">serverComponents?: boolean</span><span class="s3">\n  </span><span class="s1">serverActions?: {</span><span class="s3">\n    </span><span class="s1">bodySizeLimit?: SizeLimit</span><span class="s3">\n    </span><span class="s1">allowedOrigins?: string[]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">crossOrigin?: 'anonymous' | 'use-credentials' | '' | undefined</span><span class="s3">\n  </span><span class="s1">images: ImageConfigComplete</span><span class="s3">\n  </span><span class="s1">largePageDataBytes?: number</span><span class="s3">\n  </span><span class="s1">isOnDemandRevalidate?: boolean</span><span class="s3">\n  </span><span class="s1">isPossibleServerAction?: boolean</span><span class="s3">\n  </span><span class="s1">isExperimentalCompile?: boolean</span><span class="s3">\n  </span><span class="s1">isPrefetch?: boolean</span><span class="s3">\n  </span><span class="s1">isBot?: boolean</span><span class="s3">\n  </span><span class="s1">expireTime?: number</span><span class="s3">\n  </span><span class="s1">experimental: {</span><span class="s3">\n    </span><span class="s1">clientTraceMetadata?: string[]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RenderOpts = LoadComponentsReturnType&lt;PagesModule&gt; &amp;</span><span class="s3">\n  </span><span class="s1">RenderOptsPartial</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Shared context used for all page renders.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type PagesSharedContext = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Used to facilitate caching of page bundles, we send it to the client so</span><span class="s3">\n   </span><span class="s1">* that pageloader knows where to load bundles.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The deployment ID if the user is deploying to a platform that provides one.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">deploymentId: string | undefined</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True if the user is using a custom server.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">customServer: true | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The context for the given request.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type PagesRenderContext = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether this should be rendered as a fallback page.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isFallback: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether this is in draft mode.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isDraftMode: boolean | undefined</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* In development, the original source page that returned a 404.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">developmentNotFoundSourcePage: string | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* RenderOptsExtra is being used to split away functionality that's within the</span><span class="s3">\n </span><span class="s1">* renderOpts. Eventually we can have more explicit render options for each</span><span class="s3">\n </span><span class="s1">* route kind.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type RenderOptsExtra = {</span><span class="s3">\n  </span><span class="s1">App: AppType</span><span class="s3">\n  </span><span class="s1">Document: DocumentType</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const invalidKeysMsg = (</span><span class="s3">\n  </span><span class="s1">methodName: 'getServerSideProps' | 'getStaticProps',</span><span class="s3">\n  </span><span class="s1">invalidKeys: string[]</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">const docsPathname = `invalid-${methodName.toLocaleLowerCase()}-value`</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">`Additional keys were returned from </span><span class="s3">\\</span><span class="s1">`${methodName}</span><span class="s3">\\</span><span class="s1">`. Properties intended for your component must be nested under the </span><span class="s3">\\</span><span class="s1">`props</span><span class="s3">\\</span><span class="s1">` key, e.g.:` +</span><span class="s3">\n    </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">treturn { props: { title: 'My Title', content: '...' } }` +</span><span class="s3">\n    </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">nKeys that need to be moved: ${invalidKeys.join(', ')}.` +</span><span class="s3">\n    </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/messages/${docsPathname}`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function checkRedirectValues(</span><span class="s3">\n  </span><span class="s1">redirect: Redirect,</span><span class="s3">\n  </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n  </span><span class="s1">method: 'getStaticProps' | 'getServerSideProps'</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const { destination, permanent, statusCode, basePath } = redirect</span><span class="s3">\n  </span><span class="s1">let errors: string[] = []</span><span class="s3">\n\n  </span><span class="s1">const hasStatusCode = typeof statusCode !== 'undefined'</span><span class="s3">\n  </span><span class="s1">const hasPermanent = typeof permanent !== 'undefined'</span><span class="s3">\n\n  </span><span class="s1">if (hasPermanent &amp;&amp; hasStatusCode) {</span><span class="s3">\n    </span><span class="s1">errors.push(`</span><span class="s3">\\</span><span class="s1">`permanent</span><span class="s3">\\</span><span class="s1">` and </span><span class="s3">\\</span><span class="s1">`statusCode</span><span class="s3">\\</span><span class="s1">` can not both be provided`)</span><span class="s3">\n  </span><span class="s1">} else if (hasPermanent &amp;&amp; typeof permanent !== 'boolean') {</span><span class="s3">\n    </span><span class="s1">errors.push(`</span><span class="s3">\\</span><span class="s1">`permanent</span><span class="s3">\\</span><span class="s1">` must be </span><span class="s3">\\</span><span class="s1">`true</span><span class="s3">\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`false</span><span class="s3">\\</span><span class="s1">``)</span><span class="s3">\n  </span><span class="s1">} else if (hasStatusCode &amp;&amp; !allowedStatusCodes.has(statusCode!)) {</span><span class="s3">\n    </span><span class="s1">errors.push(</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`statusCode</span><span class="s3">\\</span><span class="s1">` must undefined or one of ${[...allowedStatusCodes].join(</span><span class="s3">\n        </span><span class="s1">', '</span><span class="s3">\n      </span><span class="s1">)}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const destinationType = typeof destination</span><span class="s3">\n\n  </span><span class="s1">if (destinationType !== 'string') {</span><span class="s3">\n    </span><span class="s1">errors.push(</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`destination</span><span class="s3">\\</span><span class="s1">` should be string but received ${destinationType}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const basePathType = typeof basePath</span><span class="s3">\n\n  </span><span class="s1">if (basePathType !== 'undefined' &amp;&amp; basePathType !== 'boolean') {</span><span class="s3">\n    </span><span class="s1">errors.push(</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`basePath</span><span class="s3">\\</span><span class="s1">` should be undefined or a false, received ${basePathType}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (errors.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Invalid redirect object returned from ${method} for ${req.url}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">errors.join(' and ') +</span><span class="s3">\n        </span><span class="s1">'</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n        </span><span class="s1">`See more info here: https://nextjs.org/docs/messages/invalid-redirect-gssp`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function errorToJSON(err: Error) {</span><span class="s3">\n  </span><span class="s1">let source: typeof COMPILER_NAMES.server | typeof COMPILER_NAMES.edgeServer =</span><span class="s3">\n    </span><span class="s1">'server'</span><span class="s3">\n\n  </span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge') {</span><span class="s3">\n    </span><span class="s1">source = getErrorSource(err) || 'server'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">name: err.name,</span><span class="s3">\n    </span><span class="s1">source,</span><span class="s3">\n    </span><span class="s1">message: stripAnsi(err.message),</span><span class="s3">\n    </span><span class="s1">stack: err.stack,</span><span class="s3">\n    </span><span class="s1">digest: (err as any).digest,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function serializeError(</span><span class="s3">\n  </span><span class="s1">dev: boolean | undefined,</span><span class="s3">\n  </span><span class="s1">err: Error</span><span class="s3">\n</span><span class="s1">): Error &amp; {</span><span class="s3">\n  </span><span class="s1">statusCode?: number</span><span class="s3">\n  </span><span class="s1">source?: typeof COMPILER_NAMES.server | typeof COMPILER_NAMES.edgeServer</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">if (dev) {</span><span class="s3">\n    </span><span class="s1">return errorToJSON(err)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">name: 'Internal Server Error.',</span><span class="s3">\n    </span><span class="s1">message: '500 - Internal Server Error.',</span><span class="s3">\n    </span><span class="s1">statusCode: 500,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function renderToHTMLImpl(</span><span class="s3">\n  </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n  </span><span class="s1">res: ServerResponse,</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">query: NextParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">renderOpts: Omit&lt;RenderOpts, keyof RenderOptsExtra&gt;,</span><span class="s3">\n  </span><span class="s1">extra: RenderOptsExtra,</span><span class="s3">\n  </span><span class="s1">sharedContext: PagesSharedContext,</span><span class="s3">\n  </span><span class="s1">renderContext: PagesRenderContext</span><span class="s3">\n</span><span class="s1">): Promise&lt;RenderResult&gt; {</span><span class="s3">\n  </span><span class="s1">// Adds support for reading `cookies` in `getServerSideProps` when SSR.</span><span class="s3">\n  </span><span class="s1">setLazyProp({ req: req as any }, 'cookies', getCookieParser(req.headers))</span><span class="s3">\n\n  </span><span class="s1">const metadata: PagesRenderResultMetadata = {}</span><span class="s3">\n\n  </span><span class="s1">metadata.assetQueryString =</span><span class="s3">\n    </span><span class="s1">(renderOpts.dev &amp;&amp; renderOpts.assetQueryString) || ''</span><span class="s3">\n\n  </span><span class="s1">if (renderOpts.dev &amp;&amp; !metadata.assetQueryString) {</span><span class="s3">\n    </span><span class="s1">const userAgent = (req.headers['user-agent'] || '').toLowerCase()</span><span class="s3">\n    </span><span class="s1">if (userAgent.includes('safari') &amp;&amp; !userAgent.includes('chrome')) {</span><span class="s3">\n      </span><span class="s1">// In dev we invalidate the cache by appending a timestamp to the resource URL.</span><span class="s3">\n      </span><span class="s1">// This is a workaround to fix https://github.com/vercel/next.js/issues/5860</span><span class="s3">\n      </span><span class="s1">// TODO: remove this workaround when https://bugs.webkit.org/show_bug.cgi?id=187726 is fixed.</span><span class="s3">\n      </span><span class="s1">// Note: The workaround breaks breakpoints on reload since the script url always changes,</span><span class="s3">\n      </span><span class="s1">// so we only apply it to Safari.</span><span class="s3">\n      </span><span class="s1">metadata.assetQueryString = `?ts=${Date.now()}`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// if deploymentId is provided we append it to all asset requests</span><span class="s3">\n  </span><span class="s1">if (sharedContext.deploymentId) {</span><span class="s3">\n    </span><span class="s1">metadata.assetQueryString += `${metadata.assetQueryString ? '&amp;' : '?'}dpl=${</span><span class="s3">\n      </span><span class="s1">sharedContext.deploymentId</span><span class="s3">\n    </span><span class="s1">}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// don't modify original query object</span><span class="s3">\n  </span><span class="s1">query = Object.assign({}, query)</span><span class="s3">\n\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">err,</span><span class="s3">\n    </span><span class="s1">dev = false,</span><span class="s3">\n    </span><span class="s1">ampPath = '',</span><span class="s3">\n    </span><span class="s1">pageConfig = {},</span><span class="s3">\n    </span><span class="s1">buildManifest,</span><span class="s3">\n    </span><span class="s1">reactLoadableManifest,</span><span class="s3">\n    </span><span class="s1">ErrorDebug,</span><span class="s3">\n    </span><span class="s1">getStaticProps,</span><span class="s3">\n    </span><span class="s1">getStaticPaths,</span><span class="s3">\n    </span><span class="s1">getServerSideProps,</span><span class="s3">\n    </span><span class="s1">isNextDataRequest,</span><span class="s3">\n    </span><span class="s1">params,</span><span class="s3">\n    </span><span class="s1">previewProps,</span><span class="s3">\n    </span><span class="s1">basePath,</span><span class="s3">\n    </span><span class="s1">images,</span><span class="s3">\n    </span><span class="s1">runtime: globalRuntime,</span><span class="s3">\n    </span><span class="s1">isExperimentalCompile,</span><span class="s3">\n    </span><span class="s1">expireTime,</span><span class="s3">\n  </span><span class="s1">} = renderOpts</span><span class="s3">\n  </span><span class="s1">const { App } = extra</span><span class="s3">\n\n  </span><span class="s1">const assetQueryString = metadata.assetQueryString</span><span class="s3">\n\n  </span><span class="s1">let Document = extra.Document</span><span class="s3">\n\n  </span><span class="s1">let Component: React.ComponentType&lt;{}&gt; | ((props: any) =&gt; JSX.Element) =</span><span class="s3">\n    </span><span class="s1">renderOpts.Component</span><span class="s3">\n  </span><span class="s1">const OriginComponent = Component</span><span class="s3">\n\n  </span><span class="s1">const isFallback = renderContext.isFallback ?? false</span><span class="s3">\n  </span><span class="s1">const notFoundSrcPage = renderContext.developmentNotFoundSourcePage</span><span class="s3">\n\n  </span><span class="s1">// next internal queries should be stripped out</span><span class="s3">\n  </span><span class="s1">stripInternalQueries(query)</span><span class="s3">\n\n  </span><span class="s1">const isSSG = !!getStaticProps</span><span class="s3">\n  </span><span class="s1">const isBuildTimeSSG = isSSG &amp;&amp; renderOpts.nextExport</span><span class="s3">\n  </span><span class="s1">const defaultAppGetInitialProps =</span><span class="s3">\n    </span><span class="s1">App.getInitialProps === (App as any).origGetInitialProps</span><span class="s3">\n\n  </span><span class="s1">const hasPageGetInitialProps = !!(Component as any)?.getInitialProps</span><span class="s3">\n  </span><span class="s1">const hasPageScripts = (Component as any)?.unstable_scriptLoader</span><span class="s3">\n\n  </span><span class="s1">const pageIsDynamic = isDynamicRoute(pathname)</span><span class="s3">\n\n  </span><span class="s1">const defaultErrorGetInitialProps =</span><span class="s3">\n    </span><span class="s1">pathname === '/_error' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">(Component as any).getInitialProps ===</span><span class="s3">\n      </span><span class="s1">(Component as any).origGetInitialProps</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">renderOpts.nextExport &amp;&amp;</span><span class="s3">\n    </span><span class="s1">hasPageGetInitialProps &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!defaultErrorGetInitialProps</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">warn(</span><span class="s3">\n      </span><span class="s1">`Detected getInitialProps on page '${pathname}'` +</span><span class="s3">\n        </span><span class="s1">` while running export. It's recommended to use getStaticProps` +</span><span class="s3">\n        </span><span class="s1">` which has a more correct behavior for static exporting.` +</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/messages/get-initial-props-export`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let isAutoExport =</span><span class="s3">\n    </span><span class="s1">!hasPageGetInitialProps &amp;&amp;</span><span class="s3">\n    </span><span class="s1">defaultAppGetInitialProps &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!isSSG &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!getServerSideProps</span><span class="s3">\n\n  </span><span class="s1">// if we are running from experimental compile and the page</span><span class="s3">\n  </span><span class="s1">// would normally be automatically statically optimized</span><span class="s3">\n  </span><span class="s1">// ensure we set cache header so it's not rendered on-demand</span><span class="s3">\n  </span><span class="s1">// every request</span><span class="s3">\n  </span><span class="s1">if (isAutoExport &amp;&amp; !dev &amp;&amp; isExperimentalCompile) {</span><span class="s3">\n    </span><span class="s1">res.setHeader(</span><span class="s3">\n      </span><span class="s1">'Cache-Control',</span><span class="s3">\n      </span><span class="s1">getCacheControlHeader({ revalidate: false, expire: expireTime })</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">isAutoExport = false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (hasPageGetInitialProps &amp;&amp; isSSG) {</span><span class="s3">\n    </span><span class="s1">throw new Error(SSG_GET_INITIAL_PROPS_CONFLICT + ` ${pathname}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (hasPageGetInitialProps &amp;&amp; getServerSideProps) {</span><span class="s3">\n    </span><span class="s1">throw new Error(SERVER_PROPS_GET_INIT_PROPS_CONFLICT + ` ${pathname}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (getServerSideProps &amp;&amp; isSSG) {</span><span class="s3">\n    </span><span class="s1">throw new Error(SERVER_PROPS_SSG_CONFLICT + ` ${pathname}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (getServerSideProps &amp;&amp; renderOpts.nextConfigOutput === 'export') {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">'getServerSideProps cannot be used with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot;</span><span class="s1">. See more info here: https://nextjs.org/docs/advanced-features/static-html-export'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (getStaticPaths &amp;&amp; !pageIsDynamic) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`getStaticPaths is only allowed for dynamic SSG pages and was found on '${pathname}'.` +</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/messages/non-dynamic-getstaticpaths-usage`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!!getStaticPaths &amp;&amp; !isSSG) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`getStaticPaths was added without a getStaticProps in ${pathname}. Without getStaticProps, getStaticPaths does nothing`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (isSSG &amp;&amp; pageIsDynamic &amp;&amp; !getStaticPaths) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`getStaticPaths is required for dynamic SSG pages and is missing for '${pathname}'.` +</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/messages/invalid-getstaticpaths-value`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let asPath: string = renderOpts.resolvedAsPath || (req.url as string)</span><span class="s3">\n\n  </span><span class="s1">if (dev) {</span><span class="s3">\n    </span><span class="s1">const { isValidElementType } =</span><span class="s3">\n      </span><span class="s1">require('next/dist/compiled/react-is') as typeof import('next/dist/compiled/react-is')</span><span class="s3">\n    </span><span class="s1">if (!isValidElementType(Component)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`The default export is not a React Component in page: </span><span class="s3">\&quot;</span><span class="s1">${pathname}</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!isValidElementType(App)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`The default export is not a React Component in page: </span><span class="s3">\&quot;</span><span class="s1">/_app</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!isValidElementType(Document)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`The default export is not a React Component in page: </span><span class="s3">\&quot;</span><span class="s1">/_document</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isAutoExport || isFallback) {</span><span class="s3">\n      </span><span class="s1">// remove query values except ones that will be set during export</span><span class="s3">\n      </span><span class="s1">query = {</span><span class="s3">\n        </span><span class="s1">...(query.amp</span><span class="s3">\n          </span><span class="s1">? {</span><span class="s3">\n              </span><span class="s1">amp: query.amp,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">: {}),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">asPath = `${pathname}${</span><span class="s3">\n        </span><span class="s1">// ensure trailing slash is present for non-dynamic auto-export pages</span><span class="s3">\n        </span><span class="s1">req.url!.endsWith('/') &amp;&amp; pathname !== '/' &amp;&amp; !pageIsDynamic ? '/' : ''</span><span class="s3">\n      </span><span class="s1">}`</span><span class="s3">\n      </span><span class="s1">req.url = pathname</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (pathname === '/404' &amp;&amp; (hasPageGetInitialProps || getServerSideProps)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`pages/404</span><span class="s3">\\</span><span class="s1">` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">STATIC_STATUS_PAGES.includes(pathname) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(hasPageGetInitialProps || getServerSideProps)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`pages${pathname}</span><span class="s3">\\</span><span class="s1">` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (renderOpts?.setIsrStatus) {</span><span class="s3">\n      </span><span class="s1">renderOpts.setIsrStatus(asPath, isSSG || isAutoExport ? true : null)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const methodName of [</span><span class="s3">\n    </span><span class="s1">'getStaticProps',</span><span class="s3">\n    </span><span class="s1">'getServerSideProps',</span><span class="s3">\n    </span><span class="s1">'getStaticPaths',</span><span class="s3">\n  </span><span class="s1">]) {</span><span class="s3">\n    </span><span class="s1">if ((Component as any)?.[methodName]) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`page ${pathname} ${methodName} ${GSSP_COMPONENT_MEMBER_ERROR}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">await Loadable.preloadAll() // Make sure all dynamic imports are loaded</span><span class="s3">\n\n  </span><span class="s1">let isPreview: boolean | undefined = undefined</span><span class="s3">\n  </span><span class="s1">let previewData: PreviewData</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">(isSSG || getServerSideProps) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!isFallback &amp;&amp;</span><span class="s3">\n    </span><span class="s1">process.env.NEXT_RUNTIME !== 'edge' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">previewProps</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// Reads of this are cached on the `req` object, so this should resolve</span><span class="s3">\n    </span><span class="s1">// instantly. There's no need to pass this data down from a previous</span><span class="s3">\n    </span><span class="s1">// invoke.</span><span class="s3">\n    </span><span class="s1">previewData = tryGetPreviewData(</span><span class="s3">\n      </span><span class="s1">req,</span><span class="s3">\n      </span><span class="s1">res,</span><span class="s3">\n      </span><span class="s1">previewProps,</span><span class="s3">\n      </span><span class="s1">!!renderOpts.multiZoneDraftMode</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">isPreview = previewData !== false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// url will always be set</span><span class="s3">\n  </span><span class="s1">const routerIsReady = !!(</span><span class="s3">\n    </span><span class="s1">getServerSideProps ||</span><span class="s3">\n    </span><span class="s1">hasPageGetInitialProps ||</span><span class="s3">\n    </span><span class="s1">(!defaultAppGetInitialProps &amp;&amp; !isSSG) ||</span><span class="s3">\n    </span><span class="s1">isExperimentalCompile</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const router = new ServerRouter(</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">asPath,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">isFallback: isFallback,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">routerIsReady,</span><span class="s3">\n    </span><span class="s1">basePath,</span><span class="s3">\n    </span><span class="s1">renderOpts.locale,</span><span class="s3">\n    </span><span class="s1">renderOpts.locales,</span><span class="s3">\n    </span><span class="s1">renderOpts.defaultLocale,</span><span class="s3">\n    </span><span class="s1">renderOpts.domainLocales,</span><span class="s3">\n    </span><span class="s1">isPreview,</span><span class="s3">\n    </span><span class="s1">getRequestMeta(req, 'isLocaleDomain')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const appRouter = adaptForAppRouterInstance(router)</span><span class="s3">\n\n  </span><span class="s1">let scriptLoader: any = {}</span><span class="s3">\n  </span><span class="s1">const jsxStyleRegistry = createStyleRegistry()</span><span class="s3">\n  </span><span class="s1">const ampState = {</span><span class="s3">\n    </span><span class="s1">ampFirst: pageConfig.amp === true,</span><span class="s3">\n    </span><span class="s1">hasQuery: Boolean(query.amp),</span><span class="s3">\n    </span><span class="s1">hybrid: pageConfig.amp === 'hybrid',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Disable AMP under the web environment</span><span class="s3">\n  </span><span class="s1">const inAmpMode = process.env.NEXT_RUNTIME !== 'edge' &amp;&amp; isInAmpMode(ampState)</span><span class="s3">\n  </span><span class="s1">let head: JSX.Element[] = defaultHead(inAmpMode)</span><span class="s3">\n  </span><span class="s1">const reactLoadableModules: string[] = []</span><span class="s3">\n\n  </span><span class="s1">let initialScripts: any = {}</span><span class="s3">\n  </span><span class="s1">if (hasPageScripts) {</span><span class="s3">\n    </span><span class="s1">initialScripts.beforeInteractive = []</span><span class="s3">\n      </span><span class="s1">.concat(hasPageScripts())</span><span class="s3">\n      </span><span class="s1">.filter((script: any) =&gt; script.props.strategy === 'beforeInteractive')</span><span class="s3">\n      </span><span class="s1">.map((script: any) =&gt; script.props)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const csp =</span><span class="s3">\n    </span><span class="s1">req.headers['content-security-policy'] ||</span><span class="s3">\n    </span><span class="s1">req.headers['content-security-policy-report-only']</span><span class="s3">\n\n  </span><span class="s1">const nonce =</span><span class="s3">\n    </span><span class="s1">typeof csp === 'string' ? getScriptNonceFromHeader(csp) : undefined</span><span class="s3">\n\n  </span><span class="s1">const AppContainer = ({ children }: { children: JSX.Element }) =&gt; (</span><span class="s3">\n    </span><span class="s1">&lt;AppRouterContext.Provider value={appRouter}&gt;</span><span class="s3">\n      </span><span class="s1">&lt;SearchParamsContext.Provider value={adaptForSearchParams(router)}&gt;</span><span class="s3">\n        </span><span class="s1">&lt;PathnameContextProviderAdapter</span><span class="s3">\n          </span><span class="s1">router={router}</span><span class="s3">\n          </span><span class="s1">isAutoExport={isAutoExport}</span><span class="s3">\n        </span><span class="s1">&gt;</span><span class="s3">\n          </span><span class="s1">&lt;PathParamsContext.Provider value={adaptForPathParams(router)}&gt;</span><span class="s3">\n            </span><span class="s1">&lt;RouterContext.Provider value={router}&gt;</span><span class="s3">\n              </span><span class="s1">&lt;AmpStateContext.Provider value={ampState}&gt;</span><span class="s3">\n                </span><span class="s1">&lt;HeadManagerContext.Provider</span><span class="s3">\n                  </span><span class="s1">value={{</span><span class="s3">\n                    </span><span class="s1">updateHead: (state) =&gt; {</span><span class="s3">\n                      </span><span class="s1">head = state</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                    </span><span class="s1">updateScripts: (scripts) =&gt; {</span><span class="s3">\n                      </span><span class="s1">scriptLoader = scripts</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                    </span><span class="s1">scripts: initialScripts,</span><span class="s3">\n                    </span><span class="s1">mountedInstances: new Set(),</span><span class="s3">\n                    </span><span class="s1">nonce,</span><span class="s3">\n                  </span><span class="s1">}}</span><span class="s3">\n                </span><span class="s1">&gt;</span><span class="s3">\n                  </span><span class="s1">&lt;LoadableContext.Provider</span><span class="s3">\n                    </span><span class="s1">value={(moduleName) =&gt;</span><span class="s3">\n                      </span><span class="s1">reactLoadableModules.push(moduleName)</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">&gt;</span><span class="s3">\n                    </span><span class="s1">&lt;StyleRegistry registry={jsxStyleRegistry}&gt;</span><span class="s3">\n                      </span><span class="s1">&lt;ImageConfigContext.Provider value={images}&gt;</span><span class="s3">\n                        </span><span class="s1">{children}</span><span class="s3">\n                      </span><span class="s1">&lt;/ImageConfigContext.Provider&gt;</span><span class="s3">\n                    </span><span class="s1">&lt;/StyleRegistry&gt;</span><span class="s3">\n                  </span><span class="s1">&lt;/LoadableContext.Provider&gt;</span><span class="s3">\n                </span><span class="s1">&lt;/HeadManagerContext.Provider&gt;</span><span class="s3">\n              </span><span class="s1">&lt;/AmpStateContext.Provider&gt;</span><span class="s3">\n            </span><span class="s1">&lt;/RouterContext.Provider&gt;</span><span class="s3">\n          </span><span class="s1">&lt;/PathParamsContext.Provider&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/PathnameContextProviderAdapter&gt;</span><span class="s3">\n      </span><span class="s1">&lt;/SearchParamsContext.Provider&gt;</span><span class="s3">\n    </span><span class="s1">&lt;/AppRouterContext.Provider&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">// The `useId` API uses the path indexes to generate an ID for each node.</span><span class="s3">\n  </span><span class="s1">// To guarantee the match of hydration, we need to ensure that the structure</span><span class="s3">\n  </span><span class="s1">// of wrapper nodes is isomorphic in server and client.</span><span class="s3">\n  </span><span class="s1">// TODO: With `enhanceApp` and `enhanceComponents` options, this approach may</span><span class="s3">\n  </span><span class="s1">// not be useful.</span><span class="s3">\n  </span><span class="s1">// https://github.com/facebook/react/pull/22644</span><span class="s3">\n  </span><span class="s1">const Noop = () =&gt; null</span><span class="s3">\n  </span><span class="s1">const AppContainerWithIsomorphicFiberStructure: React.FC&lt;{</span><span class="s3">\n    </span><span class="s1">children: JSX.Element</span><span class="s3">\n  </span><span class="s1">}&gt; = ({ children }) =&gt; {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;&gt;</span><span class="s3">\n        </span><span class="s1">{/* &lt;Head/&gt; */}</span><span class="s3">\n        </span><span class="s1">&lt;Noop /&gt;</span><span class="s3">\n        </span><span class="s1">&lt;AppContainer&gt;</span><span class="s3">\n          </span><span class="s1">&lt;&gt;</span><span class="s3">\n            </span><span class="s1">{children}</span><span class="s3">\n            </span><span class="s1">{/* &lt;RouteAnnouncer/&gt; */}</span><span class="s3">\n            </span><span class="s1">&lt;Noop /&gt;</span><span class="s3">\n          </span><span class="s1">&lt;/&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/AppContainer&gt;</span><span class="s3">\n      </span><span class="s1">&lt;/&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const ctx = {</span><span class="s3">\n    </span><span class="s1">err,</span><span class="s3">\n    </span><span class="s1">req: isAutoExport ? undefined : req,</span><span class="s3">\n    </span><span class="s1">res: isAutoExport ? undefined : res,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">asPath,</span><span class="s3">\n    </span><span class="s1">locale: renderOpts.locale,</span><span class="s3">\n    </span><span class="s1">locales: renderOpts.locales,</span><span class="s3">\n    </span><span class="s1">defaultLocale: renderOpts.defaultLocale,</span><span class="s3">\n    </span><span class="s1">AppTree: (props: any) =&gt; {</span><span class="s3">\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">&lt;AppContainerWithIsomorphicFiberStructure&gt;</span><span class="s3">\n          </span><span class="s1">{renderPageTree(App, OriginComponent, { ...props, router })}</span><span class="s3">\n        </span><span class="s1">&lt;/AppContainerWithIsomorphicFiberStructure&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">defaultGetInitialProps: async (</span><span class="s3">\n      </span><span class="s1">docCtx: DocumentContext,</span><span class="s3">\n      </span><span class="s1">options: { nonce?: string } = {}</span><span class="s3">\n    </span><span class="s1">): Promise&lt;DocumentInitialProps&gt; =&gt; {</span><span class="s3">\n      </span><span class="s1">const enhanceApp = (AppComp: any) =&gt; {</span><span class="s3">\n        </span><span class="s1">return (props: any) =&gt; &lt;AppComp {...props} /&gt;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const { html, head: renderPageHead } = await docCtx.renderPage({</span><span class="s3">\n        </span><span class="s1">enhanceApp,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">const styles = jsxStyleRegistry.styles({ nonce: options.nonce || nonce })</span><span class="s3">\n      </span><span class="s1">jsxStyleRegistry.flush()</span><span class="s3">\n      </span><span class="s1">return { html, head: renderPageHead, styles }</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let props: any</span><span class="s3">\n\n  </span><span class="s1">const nextExport =</span><span class="s3">\n    </span><span class="s1">!isSSG &amp;&amp; (renderOpts.nextExport || (dev &amp;&amp; (isAutoExport || isFallback)))</span><span class="s3">\n\n  </span><span class="s1">const styledJsxInsertedHTML = () =&gt; {</span><span class="s3">\n    </span><span class="s1">const styles = jsxStyleRegistry.styles()</span><span class="s3">\n    </span><span class="s1">jsxStyleRegistry.flush()</span><span class="s3">\n    </span><span class="s1">return &lt;&gt;{styles}&lt;/&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">props = await loadGetInitialProps(App, {</span><span class="s3">\n    </span><span class="s1">AppTree: ctx.AppTree,</span><span class="s3">\n    </span><span class="s1">Component,</span><span class="s3">\n    </span><span class="s1">router,</span><span class="s3">\n    </span><span class="s1">ctx,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">if ((isSSG || getServerSideProps) &amp;&amp; isPreview) {</span><span class="s3">\n    </span><span class="s1">props.__N_PREVIEW = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (isSSG) {</span><span class="s3">\n    </span><span class="s1">props[STATIC_PROPS_ID] = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (isSSG &amp;&amp; !isFallback) {</span><span class="s3">\n    </span><span class="s1">let data: Readonly&lt;UnwrapPromise&lt;ReturnType&lt;GetStaticProps&gt;&gt;&gt;</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">data = await getTracer().trace(</span><span class="s3">\n        </span><span class="s1">RenderSpan.getStaticProps,</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">spanName: `getStaticProps ${pathname}`,</span><span class="s3">\n          </span><span class="s1">attributes: {</span><span class="s3">\n            </span><span class="s1">'next.route': pathname,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">() =&gt;</span><span class="s3">\n          </span><span class="s1">getStaticProps({</span><span class="s3">\n            </span><span class="s1">...(pageIsDynamic ? { params } : undefined),</span><span class="s3">\n            </span><span class="s1">...(isPreview</span><span class="s3">\n              </span><span class="s1">? { draftMode: true, preview: true, previewData: previewData }</span><span class="s3">\n              </span><span class="s1">: undefined),</span><span class="s3">\n            </span><span class="s1">locales: [...(renderOpts.locales ?? [])],</span><span class="s3">\n            </span><span class="s1">locale: renderOpts.locale,</span><span class="s3">\n            </span><span class="s1">defaultLocale: renderOpts.defaultLocale,</span><span class="s3">\n            </span><span class="s1">revalidateReason: renderOpts.isOnDemandRevalidate</span><span class="s3">\n              </span><span class="s1">? 'on-demand'</span><span class="s3">\n              </span><span class="s1">: isBuildTimeSSG</span><span class="s3">\n                </span><span class="s1">? 'build'</span><span class="s3">\n                </span><span class="s1">: 'stale',</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} catch (staticPropsError: any) {</span><span class="s3">\n      </span><span class="s1">// remove not found error code to prevent triggering legacy</span><span class="s3">\n      </span><span class="s1">// 404 rendering</span><span class="s3">\n      </span><span class="s1">if (staticPropsError &amp;&amp; staticPropsError.code === 'ENOENT') {</span><span class="s3">\n        </span><span class="s1">delete staticPropsError.code</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">throw staticPropsError</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (data == null) {</span><span class="s3">\n      </span><span class="s1">throw new Error(GSP_NO_RETURNED_VALUE)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const invalidKeys = Object.keys(data).filter(</span><span class="s3">\n      </span><span class="s1">(key) =&gt;</span><span class="s3">\n        </span><span class="s1">key !== 'revalidate' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">key !== 'props' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">key !== 'redirect' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">key !== 'notFound'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (invalidKeys.includes('unstable_revalidate')) {</span><span class="s3">\n      </span><span class="s1">throw new Error(UNSTABLE_REVALIDATE_RENAME_ERROR)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (invalidKeys.length) {</span><span class="s3">\n      </span><span class="s1">throw new Error(invalidKeysMsg('getStaticProps', invalidKeys))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">typeof (data as any).notFound !== 'undefined' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">typeof (data as any).redirect !== 'undefined'</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`redirect</span><span class="s3">\\</span><span class="s1">` and </span><span class="s3">\\</span><span class="s1">`notFound</span><span class="s3">\\</span><span class="s1">` can not both be returned from ${</span><span class="s3">\n            </span><span class="s1">isSSG ? 'getStaticProps' : 'getServerSideProps'</span><span class="s3">\n          </span><span class="s1">} at the same time. Page: ${pathname}</span><span class="s3">\\</span><span class="s1">nSee more info here: https://nextjs.org/docs/messages/gssp-mixed-not-found-redirect`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if ('notFound' in data &amp;&amp; data.notFound) {</span><span class="s3">\n      </span><span class="s1">if (pathname === '/404') {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`The /404 page can not return notFound in </span><span class="s3">\&quot;</span><span class="s1">getStaticProps</span><span class="s3">\&quot;</span><span class="s1">, please remove it to continue!`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">metadata.isNotFound = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">'redirect' in data &amp;&amp;</span><span class="s3">\n      </span><span class="s1">data.redirect &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof data.redirect === 'object'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">checkRedirectValues(data.redirect as Redirect, req, 'getStaticProps')</span><span class="s3">\n\n      </span><span class="s1">if (isBuildTimeSSG) {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`redirect</span><span class="s3">\\</span><span class="s1">` can not be returned from getStaticProps during prerendering (${req.url})</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n            </span><span class="s1">`See more info here: https://nextjs.org/docs/messages/gsp-redirect-during-prerender`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">;(data as any).props = {</span><span class="s3">\n        </span><span class="s1">__N_REDIRECT: data.redirect.destination,</span><span class="s3">\n        </span><span class="s1">__N_REDIRECT_STATUS: getRedirectStatus(data.redirect),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof data.redirect.basePath !== 'undefined') {</span><span class="s3">\n        </span><span class="s1">;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">metadata.isRedirect = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(dev || isBuildTimeSSG) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!metadata.isNotFound &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!isSerializableProps(pathname, 'getStaticProps', (data as any).props)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// this fn should throw an error instead of ever returning `false`</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">'invariant: getStaticProps did not return valid props. Please report this.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let revalidate: Revalidate</span><span class="s3">\n    </span><span class="s1">if ('revalidate' in data) {</span><span class="s3">\n      </span><span class="s1">if (data.revalidate &amp;&amp; renderOpts.nextConfigOutput === 'export') {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">'ISR cannot be used with </span><span class="s3">\&quot;</span><span class="s1">output: export</span><span class="s3">\&quot;</span><span class="s1">. See more info here: https://nextjs.org/docs/advanced-features/static-html-export'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof data.revalidate === 'number') {</span><span class="s3">\n        </span><span class="s1">if (!Number.isInteger(data.revalidate)) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\n            </span><span class="s1">`A page's revalidate option must be seconds expressed as a natural number for ${req.url}. Mixed numbers, such as '${data.revalidate}', cannot be used.` +</span><span class="s3">\n              </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nTry changing the value to '${Math.ceil(</span><span class="s3">\n                </span><span class="s1">data.revalidate</span><span class="s3">\n              </span><span class="s1">)}' or using </span><span class="s3">\\</span><span class="s1">`Math.ceil()</span><span class="s3">\\</span><span class="s1">` if you're computing the value.`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else if (data.revalidate &lt;= 0) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\n            </span><span class="s1">`A page's revalidate option can not be less than or equal to zero for ${req.url}. A revalidate option of zero means to revalidate after _every_ request, and implies stale data cannot be tolerated.` +</span><span class="s3">\n              </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">nTo never revalidate, you can set revalidate to </span><span class="s3">\\</span><span class="s1">`false</span><span class="s3">\\</span><span class="s1">` (only ran once at build-time).` +</span><span class="s3">\n              </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nTo revalidate as soon as possible, you can set the value to </span><span class="s3">\\</span><span class="s1">`1</span><span class="s3">\\</span><span class="s1">`.`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">if (data.revalidate &gt; 31536000) {</span><span class="s3">\n            </span><span class="s1">// if it's greater than a year for some reason error</span><span class="s3">\n            </span><span class="s1">console.warn(</span><span class="s3">\n              </span><span class="s1">`Warning: A page's revalidate option was set to more than a year for ${req.url}. This may have been done in error.` +</span><span class="s3">\n                </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nTo only run getStaticProps at build-time and not revalidate at runtime, you can set </span><span class="s3">\\</span><span class="s1">`revalidate</span><span class="s3">\\</span><span class="s1">` to </span><span class="s3">\\</span><span class="s1">`false</span><span class="s3">\\</span><span class="s1">`!`</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">revalidate = data.revalidate</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else if (data.revalidate === true) {</span><span class="s3">\n        </span><span class="s1">// When enabled, revalidate after 1 second. This value is optimal for</span><span class="s3">\n        </span><span class="s1">// the most up-to-date page possible, but without a 1-to-1</span><span class="s3">\n        </span><span class="s1">// request-refresh ratio.</span><span class="s3">\n        </span><span class="s1">revalidate = 1</span><span class="s3">\n      </span><span class="s1">} else if (</span><span class="s3">\n        </span><span class="s1">data.revalidate === false ||</span><span class="s3">\n        </span><span class="s1">typeof data.revalidate === 'undefined'</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">// By default, we never revalidate.</span><span class="s3">\n        </span><span class="s1">revalidate = false</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`A page's revalidate option must be seconds expressed as a natural number. Mixed numbers and strings cannot be used. Received '${JSON.stringify(</span><span class="s3">\n            </span><span class="s1">data.revalidate</span><span class="s3">\n          </span><span class="s1">)}' for ${req.url}`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// By default, we never revalidate.</span><span class="s3">\n      </span><span class="s1">revalidate = false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">props.pageProps = Object.assign(</span><span class="s3">\n      </span><span class="s1">{},</span><span class="s3">\n      </span><span class="s1">props.pageProps,</span><span class="s3">\n      </span><span class="s1">'props' in data ? data.props : undefined</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// pass up cache control and props for export</span><span class="s3">\n    </span><span class="s1">metadata.cacheControl = { revalidate, expire: undefined }</span><span class="s3">\n    </span><span class="s1">metadata.pageData = props</span><span class="s3">\n\n    </span><span class="s1">// this must come after revalidate is added to renderResultMeta</span><span class="s3">\n    </span><span class="s1">if (metadata.isNotFound) {</span><span class="s3">\n      </span><span class="s1">return new RenderResult(null, {</span><span class="s3">\n        </span><span class="s1">metadata,</span><span class="s3">\n        </span><span class="s1">contentType: null,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (getServerSideProps) {</span><span class="s3">\n    </span><span class="s1">props[SERVER_PROPS_ID] = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (getServerSideProps &amp;&amp; !isFallback) {</span><span class="s3">\n    </span><span class="s1">let data: UnwrapPromise&lt;ReturnType&lt;GetServerSideProps&gt;&gt;</span><span class="s3">\n\n    </span><span class="s1">let canAccessRes = true</span><span class="s3">\n    </span><span class="s1">let resOrProxy = res</span><span class="s3">\n    </span><span class="s1">let deferredContent = false</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">resOrProxy = new Proxy&lt;ServerResponse&gt;(res, {</span><span class="s3">\n        </span><span class="s1">get: function (obj, prop) {</span><span class="s3">\n          </span><span class="s1">if (!canAccessRes) {</span><span class="s3">\n            </span><span class="s1">const message =</span><span class="s3">\n              </span><span class="s1">`You should not access 'res' after getServerSideProps resolves.` +</span><span class="s3">\n              </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/messages/gssp-no-mutating-res`</span><span class="s3">\n\n            </span><span class="s1">if (deferredContent) {</span><span class="s3">\n              </span><span class="s1">throw new Error(message)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">warn(message)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (typeof prop === 'symbol') {</span><span class="s3">\n            </span><span class="s1">return ReflectAdapter.get(obj, prop, res)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return ReflectAdapter.get(obj, prop, res)</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">data = await getTracer().trace(</span><span class="s3">\n        </span><span class="s1">RenderSpan.getServerSideProps,</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">spanName: `getServerSideProps ${pathname}`,</span><span class="s3">\n          </span><span class="s1">attributes: {</span><span class="s3">\n            </span><span class="s1">'next.route': pathname,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">async () =&gt;</span><span class="s3">\n          </span><span class="s1">getServerSideProps({</span><span class="s3">\n            </span><span class="s1">req: req as IncomingMessage &amp; {</span><span class="s3">\n              </span><span class="s1">cookies: NextApiRequestCookies</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">res: resOrProxy,</span><span class="s3">\n            </span><span class="s1">query,</span><span class="s3">\n            </span><span class="s1">resolvedUrl: renderOpts.resolvedUrl as string,</span><span class="s3">\n            </span><span class="s1">...(pageIsDynamic ? { params } : undefined),</span><span class="s3">\n            </span><span class="s1">...(previewData !== false</span><span class="s3">\n              </span><span class="s1">? { draftMode: true, preview: true, previewData: previewData }</span><span class="s3">\n              </span><span class="s1">: undefined),</span><span class="s3">\n            </span><span class="s1">// We create a copy here to avoid having the types of</span><span class="s3">\n            </span><span class="s1">// `getServerSideProps` change. This ensures that users can't</span><span class="s3">\n            </span><span class="s1">// mutate this array and have it poison the reference.</span><span class="s3">\n            </span><span class="s1">locales: [...(renderOpts.locales ?? [])],</span><span class="s3">\n            </span><span class="s1">locale: renderOpts.locale,</span><span class="s3">\n            </span><span class="s1">defaultLocale: renderOpts.defaultLocale,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">canAccessRes = false</span><span class="s3">\n      </span><span class="s1">metadata.cacheControl = { revalidate: 0, expire: undefined }</span><span class="s3">\n    </span><span class="s1">} catch (serverSidePropsError: any) {</span><span class="s3">\n      </span><span class="s1">// remove not found error code to prevent triggering legacy</span><span class="s3">\n      </span><span class="s1">// 404 rendering</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">isError(serverSidePropsError) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">serverSidePropsError.code === 'ENOENT'</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">delete serverSidePropsError.code</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">throw serverSidePropsError</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (data == null) {</span><span class="s3">\n      </span><span class="s1">throw new Error(GSSP_NO_RETURNED_VALUE)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if ((data as any).props instanceof Promise) {</span><span class="s3">\n      </span><span class="s1">deferredContent = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const invalidKeys = Object.keys(data).filter(</span><span class="s3">\n      </span><span class="s1">(key) =&gt; key !== 'props' &amp;&amp; key !== 'redirect' &amp;&amp; key !== 'notFound'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if ((data as any).unstable_notFound) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`unstable_notFound has been renamed to notFound, please update the field to continue. Page: ${pathname}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if ((data as any).unstable_redirect) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`unstable_redirect has been renamed to redirect, please update the field to continue. Page: ${pathname}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (invalidKeys.length) {</span><span class="s3">\n      </span><span class="s1">throw new Error(invalidKeysMsg('getServerSideProps', invalidKeys))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if ('notFound' in data &amp;&amp; data.notFound) {</span><span class="s3">\n      </span><span class="s1">if (pathname === '/404') {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`The /404 page can not return notFound in </span><span class="s3">\&quot;</span><span class="s1">getStaticProps</span><span class="s3">\&quot;</span><span class="s1">, please remove it to continue!`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">metadata.isNotFound = true</span><span class="s3">\n      </span><span class="s1">return new RenderResult(null, {</span><span class="s3">\n        </span><span class="s1">metadata,</span><span class="s3">\n        </span><span class="s1">contentType: null,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if ('redirect' in data &amp;&amp; typeof data.redirect === 'object') {</span><span class="s3">\n      </span><span class="s1">checkRedirectValues(data.redirect as Redirect, req, 'getServerSideProps')</span><span class="s3">\n      </span><span class="s1">;(data as any).props = {</span><span class="s3">\n        </span><span class="s1">__N_REDIRECT: data.redirect.destination,</span><span class="s3">\n        </span><span class="s1">__N_REDIRECT_STATUS: getRedirectStatus(data.redirect),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof data.redirect.basePath !== 'undefined') {</span><span class="s3">\n        </span><span class="s1">;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">metadata.isRedirect = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (deferredContent) {</span><span class="s3">\n      </span><span class="s1">;(data as any).props = await (data as any).props</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(dev || isBuildTimeSSG) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!isSerializableProps(pathname, 'getServerSideProps', (data as any).props)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// this fn should throw an error instead of ever returning `false`</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">'invariant: getServerSideProps did not return valid props. Please report this.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">props.pageProps = Object.assign({}, props.pageProps, (data as any).props)</span><span class="s3">\n    </span><span class="s1">metadata.pageData = props</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">!isSSG &amp;&amp; // we only show this warning for legacy pages</span><span class="s3">\n    </span><span class="s1">!getServerSideProps &amp;&amp;</span><span class="s3">\n    </span><span class="s1">process.env.NODE_ENV !== 'production' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">Object.keys(props?.pageProps || {}).includes('url')</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">console.warn(</span><span class="s3">\n      </span><span class="s1">`The prop </span><span class="s3">\\</span><span class="s1">`url</span><span class="s3">\\</span><span class="s1">` is a reserved prop in Next.js for legacy reasons and will be overridden on page ${pathname}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`See more info here: https://nextjs.org/docs/messages/reserved-page-prop`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Avoid rendering page un-necessarily for getServerSideProps data request</span><span class="s3">\n  </span><span class="s1">// and getServerSideProps/getStaticProps redirects</span><span class="s3">\n  </span><span class="s1">if ((isNextDataRequest &amp;&amp; !isSSG) || metadata.isRedirect) {</span><span class="s3">\n    </span><span class="s1">return new RenderResult(JSON.stringify(props), {</span><span class="s3">\n      </span><span class="s1">metadata,</span><span class="s3">\n      </span><span class="s1">contentType: JSON_CONTENT_TYPE_HEADER,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't call getStaticProps or getServerSideProps while generating</span><span class="s3">\n  </span><span class="s1">// the fallback so make sure to set pageProps to an empty object</span><span class="s3">\n  </span><span class="s1">if (isFallback) {</span><span class="s3">\n    </span><span class="s1">props.pageProps = {}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// the response might be finished on the getInitialProps call</span><span class="s3">\n  </span><span class="s1">if (isResSent(res) &amp;&amp; !isSSG) return RenderResult.EMPTY</span><span class="s3">\n\n  </span><span class="s1">// we preload the buildManifest for auto-export dynamic pages</span><span class="s3">\n  </span><span class="s1">// to speed up hydrating query values</span><span class="s3">\n  </span><span class="s1">let filteredBuildManifest = buildManifest</span><span class="s3">\n  </span><span class="s1">if (isAutoExport &amp;&amp; pageIsDynamic) {</span><span class="s3">\n    </span><span class="s1">const page = denormalizePagePath(normalizePagePath(pathname))</span><span class="s3">\n    </span><span class="s1">// This code would be much cleaner using `immer` and directly pushing into</span><span class="s3">\n    </span><span class="s1">// the result from `getPageFiles`, we could maybe consider that in the</span><span class="s3">\n    </span><span class="s1">// future.</span><span class="s3">\n    </span><span class="s1">if (page in filteredBuildManifest.pages) {</span><span class="s3">\n      </span><span class="s1">filteredBuildManifest = {</span><span class="s3">\n        </span><span class="s1">...filteredBuildManifest,</span><span class="s3">\n        </span><span class="s1">pages: {</span><span class="s3">\n          </span><span class="s1">...filteredBuildManifest.pages,</span><span class="s3">\n          </span><span class="s1">[page]: [</span><span class="s3">\n            </span><span class="s1">...filteredBuildManifest.pages[page],</span><span class="s3">\n            </span><span class="s1">...filteredBuildManifest.lowPriorityFiles.filter((f) =&gt;</span><span class="s3">\n              </span><span class="s1">f.includes('_buildManifest')</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">lowPriorityFiles: filteredBuildManifest.lowPriorityFiles.filter(</span><span class="s3">\n          </span><span class="s1">(f) =&gt; !f.includes('_buildManifest')</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const Body = ({ children }: { children: JSX.Element }) =&gt; {</span><span class="s3">\n    </span><span class="s1">return inAmpMode ? children : &lt;div id=</span><span class="s3">\&quot;</span><span class="s1">__next</span><span class="s3">\&quot;</span><span class="s1">&gt;{children}&lt;/div&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const renderDocument = async () =&gt; {</span><span class="s3">\n    </span><span class="s1">// For `Document`, there are two cases that we don't support:</span><span class="s3">\n    </span><span class="s1">// 1. Using `Document.getInitialProps` in the Edge runtime.</span><span class="s3">\n    </span><span class="s1">// 2. Using the class component `Document` with concurrent features.</span><span class="s3">\n\n    </span><span class="s1">const BuiltinFunctionalDocument: DocumentType | undefined = (</span><span class="s3">\n      </span><span class="s1">Document as any</span><span class="s3">\n    </span><span class="s1">)[NEXT_BUILTIN_DOCUMENT]</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge' &amp;&amp; Document.getInitialProps) {</span><span class="s3">\n      </span><span class="s1">// In the Edge runtime, `Document.getInitialProps` isn't supported.</span><span class="s3">\n      </span><span class="s1">// We throw an error here if it's customized.</span><span class="s3">\n      </span><span class="s1">if (BuiltinFunctionalDocument) {</span><span class="s3">\n        </span><span class="s1">Document = BuiltinFunctionalDocument</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">'`getInitialProps` in Document component is not supported with the Edge Runtime.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">async function loadDocumentInitialProps(</span><span class="s3">\n      </span><span class="s1">renderShell: (</span><span class="s3">\n        </span><span class="s1">_App: AppType,</span><span class="s3">\n        </span><span class="s1">_Component: NextComponentType</span><span class="s3">\n      </span><span class="s1">) =&gt; Promise&lt;ReactDOMServerReadableStream&gt;</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">const renderPage: RenderPage = async (</span><span class="s3">\n        </span><span class="s1">options: ComponentsEnhancer = {}</span><span class="s3">\n      </span><span class="s1">): Promise&lt;RenderPageResult&gt; =&gt; {</span><span class="s3">\n        </span><span class="s1">if (ctx.err &amp;&amp; ErrorDebug) {</span><span class="s3">\n          </span><span class="s1">// Always start rendering the shell even if there's an error.</span><span class="s3">\n          </span><span class="s1">if (renderShell) {</span><span class="s3">\n            </span><span class="s1">renderShell(App, Component)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const html = await renderToString(</span><span class="s3">\n            </span><span class="s1">&lt;Body&gt;</span><span class="s3">\n              </span><span class="s1">&lt;ErrorDebug /&gt;</span><span class="s3">\n            </span><span class="s1">&lt;/Body&gt;</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return { html, head }</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (dev &amp;&amp; (props.router || props.Component)) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\n            </span><span class="s1">`'router' and 'Component' can not be returned in getInitialProps from _app.js https://nextjs.org/docs/messages/cant-override-next-props`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const { App: EnhancedApp, Component: EnhancedComponent } =</span><span class="s3">\n          </span><span class="s1">enhanceComponents(options, App, Component)</span><span class="s3">\n\n        </span><span class="s1">const stream = await renderShell(EnhancedApp, EnhancedComponent)</span><span class="s3">\n        </span><span class="s1">await stream.allReady</span><span class="s3">\n        </span><span class="s1">const html = await streamToString(stream)</span><span class="s3">\n\n        </span><span class="s1">return { html, head }</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const documentCtx = { ...ctx, renderPage }</span><span class="s3">\n      </span><span class="s1">const docProps: DocumentInitialProps = await loadGetInitialProps(</span><span class="s3">\n        </span><span class="s1">Document,</span><span class="s3">\n        </span><span class="s1">documentCtx</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">// the response might be finished on the getInitialProps call</span><span class="s3">\n      </span><span class="s1">if (isResSent(res) &amp;&amp; !isSSG) return null</span><span class="s3">\n\n      </span><span class="s1">if (!docProps || typeof docProps.html !== 'string') {</span><span class="s3">\n        </span><span class="s1">const message = `</span><span class="s3">\&quot;</span><span class="s1">${getDisplayName(</span><span class="s3">\n          </span><span class="s1">Document</span><span class="s3">\n        </span><span class="s1">)}.getInitialProps()</span><span class="s3">\&quot; </span><span class="s1">should resolve to an object with a </span><span class="s3">\&quot;</span><span class="s1">html</span><span class="s3">\&quot; </span><span class="s1">prop set with a valid html string`</span><span class="s3">\n        </span><span class="s1">throw new Error(message)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return { docProps, documentCtx }</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const renderContent = (_App: AppType, _Component: NextComponentType) =&gt; {</span><span class="s3">\n      </span><span class="s1">const EnhancedApp = _App || App</span><span class="s3">\n      </span><span class="s1">const EnhancedComponent = _Component || Component</span><span class="s3">\n\n      </span><span class="s1">return ctx.err &amp;&amp; ErrorDebug ? (</span><span class="s3">\n        </span><span class="s1">&lt;Body&gt;</span><span class="s3">\n          </span><span class="s1">&lt;ErrorDebug /&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/Body&gt;</span><span class="s3">\n      </span><span class="s1">) : (</span><span class="s3">\n        </span><span class="s1">&lt;Body&gt;</span><span class="s3">\n          </span><span class="s1">&lt;AppContainerWithIsomorphicFiberStructure&gt;</span><span class="s3">\n            </span><span class="s1">{renderPageTree(EnhancedApp, EnhancedComponent, {</span><span class="s3">\n              </span><span class="s1">...props,</span><span class="s3">\n              </span><span class="s1">router,</span><span class="s3">\n            </span><span class="s1">})}</span><span class="s3">\n          </span><span class="s1">&lt;/AppContainerWithIsomorphicFiberStructure&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/Body&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Always using react concurrent rendering mode with required react version 18.x</span><span class="s3">\n    </span><span class="s1">const renderShell = async (</span><span class="s3">\n      </span><span class="s1">EnhancedApp: AppType,</span><span class="s3">\n      </span><span class="s1">EnhancedComponent: NextComponentType</span><span class="s3">\n    </span><span class="s1">) =&gt; {</span><span class="s3">\n      </span><span class="s1">const content = renderContent(EnhancedApp, EnhancedComponent)</span><span class="s3">\n      </span><span class="s1">return await renderToInitialFizzStream({</span><span class="s3">\n        </span><span class="s1">ReactDOMServer: ReactDOMServerPages,</span><span class="s3">\n        </span><span class="s1">element: content,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const hasDocumentGetInitialProps =</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_RUNTIME !== 'edge' &amp;&amp; !!Document.getInitialProps</span><span class="s3">\n\n    </span><span class="s1">// If it has getInitialProps, we will render the shell in `renderPage`.</span><span class="s3">\n    </span><span class="s1">// Otherwise we do it right now.</span><span class="s3">\n    </span><span class="s1">let documentInitialPropsRes:</span><span class="s3">\n      </span><span class="s1">| {}</span><span class="s3">\n      </span><span class="s1">| Awaited&lt;ReturnType&lt;typeof loadDocumentInitialProps&gt;&gt;</span><span class="s3">\n\n    </span><span class="s1">const [rawStyledJsxInsertedHTML, content] = await Promise.all([</span><span class="s3">\n      </span><span class="s1">renderToString(styledJsxInsertedHTML()),</span><span class="s3">\n      </span><span class="s1">(async () =&gt; {</span><span class="s3">\n        </span><span class="s1">if (hasDocumentGetInitialProps) {</span><span class="s3">\n          </span><span class="s1">documentInitialPropsRes = await loadDocumentInitialProps(renderShell)</span><span class="s3">\n          </span><span class="s1">if (documentInitialPropsRes === null) return null</span><span class="s3">\n          </span><span class="s1">const { docProps } = documentInitialPropsRes as any</span><span class="s3">\n          </span><span class="s1">return docProps.html</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">documentInitialPropsRes = {}</span><span class="s3">\n          </span><span class="s1">const stream = await renderShell(App, Component)</span><span class="s3">\n          </span><span class="s1">await stream.allReady</span><span class="s3">\n          </span><span class="s1">return streamToString(stream)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})(),</span><span class="s3">\n    </span><span class="s1">])</span><span class="s3">\n\n    </span><span class="s1">if (content === null) {</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const contentHTML = rawStyledJsxInsertedHTML + content</span><span class="s3">\n\n    </span><span class="s1">// @ts-ignore: documentInitialPropsRes is set</span><span class="s3">\n    </span><span class="s1">const { docProps } = (documentInitialPropsRes as any) || {}</span><span class="s3">\n    </span><span class="s1">const documentElement = (htmlProps: any) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n        </span><span class="s1">return (Document as any)()</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">return &lt;Document {...htmlProps} {...docProps} /&gt;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let styles</span><span class="s3">\n    </span><span class="s1">if (hasDocumentGetInitialProps) {</span><span class="s3">\n      </span><span class="s1">styles = docProps.styles</span><span class="s3">\n      </span><span class="s1">head = docProps.head</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">styles = jsxStyleRegistry.styles()</span><span class="s3">\n      </span><span class="s1">jsxStyleRegistry.flush()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">contentHTML,</span><span class="s3">\n      </span><span class="s1">documentElement,</span><span class="s3">\n      </span><span class="s1">head,</span><span class="s3">\n      </span><span class="s1">headTags: [],</span><span class="s3">\n      </span><span class="s1">styles,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">getTracer().setRootSpanAttribute('next.route', renderOpts.page)</span><span class="s3">\n  </span><span class="s1">const documentResult = await getTracer().trace(</span><span class="s3">\n    </span><span class="s1">RenderSpan.renderDocument,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">spanName: `render route (pages) ${renderOpts.page}`,</span><span class="s3">\n      </span><span class="s1">attributes: {</span><span class="s3">\n        </span><span class="s1">'next.route': renderOpts.page,</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async () =&gt; renderDocument()</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">if (!documentResult) {</span><span class="s3">\n    </span><span class="s1">return new RenderResult(null, {</span><span class="s3">\n      </span><span class="s1">metadata,</span><span class="s3">\n      </span><span class="s1">contentType: HTML_CONTENT_TYPE_HEADER,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const dynamicImportsIds = new Set&lt;string | number&gt;()</span><span class="s3">\n  </span><span class="s1">const dynamicImports = new Set&lt;string&gt;()</span><span class="s3">\n\n  </span><span class="s1">for (const mod of reactLoadableModules) {</span><span class="s3">\n    </span><span class="s1">const manifestItem = reactLoadableManifest[mod]</span><span class="s3">\n\n    </span><span class="s1">if (manifestItem) {</span><span class="s3">\n      </span><span class="s1">dynamicImportsIds.add(manifestItem.id)</span><span class="s3">\n      </span><span class="s1">manifestItem.files.forEach((item) =&gt; {</span><span class="s3">\n        </span><span class="s1">dynamicImports.add(item)</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const hybridAmp = ampState.hybrid</span><span class="s3">\n  </span><span class="s1">const docComponentsRendered: DocumentProps['docComponentsRendered'] = {}</span><span class="s3">\n\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">assetPrefix,</span><span class="s3">\n    </span><span class="s1">defaultLocale,</span><span class="s3">\n    </span><span class="s1">disableOptimizedLoading,</span><span class="s3">\n    </span><span class="s1">domainLocales,</span><span class="s3">\n    </span><span class="s1">locale,</span><span class="s3">\n    </span><span class="s1">locales,</span><span class="s3">\n    </span><span class="s1">runtimeConfig,</span><span class="s3">\n  </span><span class="s1">} = renderOpts</span><span class="s3">\n  </span><span class="s1">const htmlProps: HtmlProps = {</span><span class="s3">\n    </span><span class="s1">__NEXT_DATA__: {</span><span class="s3">\n      </span><span class="s1">props, // The result of getInitialProps</span><span class="s3">\n      </span><span class="s1">page: pathname, // The rendered page</span><span class="s3">\n      </span><span class="s1">query, // querystring parsed / passed by the user</span><span class="s3">\n      </span><span class="s1">buildId: sharedContext.buildId,</span><span class="s3">\n      </span><span class="s1">assetPrefix: assetPrefix === '' ? undefined : assetPrefix, // send assetPrefix to the client side when configured, otherwise don't sent in the resulting HTML</span><span class="s3">\n      </span><span class="s1">runtimeConfig, // runtimeConfig if provided, otherwise don't sent in the resulting HTML</span><span class="s3">\n      </span><span class="s1">nextExport: nextExport === true ? true : undefined, // If this is a page exported by `next export`</span><span class="s3">\n      </span><span class="s1">autoExport: isAutoExport === true ? true : undefined, // If this is an auto exported page</span><span class="s3">\n      </span><span class="s1">isFallback,</span><span class="s3">\n      </span><span class="s1">isExperimentalCompile,</span><span class="s3">\n      </span><span class="s1">dynamicIds:</span><span class="s3">\n        </span><span class="s1">dynamicImportsIds.size === 0</span><span class="s3">\n          </span><span class="s1">? undefined</span><span class="s3">\n          </span><span class="s1">: Array.from(dynamicImportsIds),</span><span class="s3">\n      </span><span class="s1">err: renderOpts.err ? serializeError(dev, renderOpts.err) : undefined, // Error if one happened, otherwise don't sent in the resulting HTML</span><span class="s3">\n      </span><span class="s1">gsp: !!getStaticProps ? true : undefined, // whether the page is getStaticProps</span><span class="s3">\n      </span><span class="s1">gssp: !!getServerSideProps ? true : undefined, // whether the page is getServerSideProps</span><span class="s3">\n      </span><span class="s1">customServer: sharedContext.customServer,</span><span class="s3">\n      </span><span class="s1">gip: hasPageGetInitialProps ? true : undefined, // whether the page has getInitialProps</span><span class="s3">\n      </span><span class="s1">appGip: !defaultAppGetInitialProps ? true : undefined, // whether the _app has getInitialProps</span><span class="s3">\n      </span><span class="s1">locale,</span><span class="s3">\n      </span><span class="s1">locales,</span><span class="s3">\n      </span><span class="s1">defaultLocale,</span><span class="s3">\n      </span><span class="s1">domainLocales,</span><span class="s3">\n      </span><span class="s1">isPreview: isPreview === true ? true : undefined,</span><span class="s3">\n      </span><span class="s1">notFoundSrcPage: notFoundSrcPage &amp;&amp; dev ? notFoundSrcPage : undefined,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">nonce,</span><span class="s3">\n    </span><span class="s1">buildManifest: filteredBuildManifest,</span><span class="s3">\n    </span><span class="s1">docComponentsRendered,</span><span class="s3">\n    </span><span class="s1">dangerousAsPath: router.asPath,</span><span class="s3">\n    </span><span class="s1">canonicalBase:</span><span class="s3">\n      </span><span class="s1">!renderOpts.ampPath &amp;&amp; getRequestMeta(req, 'didStripLocale')</span><span class="s3">\n        </span><span class="s1">? `${renderOpts.canonicalBase || ''}/${renderOpts.locale}`</span><span class="s3">\n        </span><span class="s1">: renderOpts.canonicalBase,</span><span class="s3">\n    </span><span class="s1">ampPath,</span><span class="s3">\n    </span><span class="s1">inAmpMode,</span><span class="s3">\n    </span><span class="s1">isDevelopment: !!dev,</span><span class="s3">\n    </span><span class="s1">hybridAmp,</span><span class="s3">\n    </span><span class="s1">dynamicImports: Array.from(dynamicImports),</span><span class="s3">\n    </span><span class="s1">dynamicCssManifest: new Set(renderOpts.dynamicCssManifest || []),</span><span class="s3">\n    </span><span class="s1">assetPrefix,</span><span class="s3">\n    </span><span class="s1">// Only enabled in production as development mode has features relying on HMR (style injection for example)</span><span class="s3">\n    </span><span class="s1">unstable_runtimeJS:</span><span class="s3">\n      </span><span class="s1">process.env.NODE_ENV === 'production'</span><span class="s3">\n        </span><span class="s1">? pageConfig.unstable_runtimeJS</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n    </span><span class="s1">unstable_JsPreload: pageConfig.unstable_JsPreload,</span><span class="s3">\n    </span><span class="s1">assetQueryString,</span><span class="s3">\n    </span><span class="s1">scriptLoader,</span><span class="s3">\n    </span><span class="s1">locale,</span><span class="s3">\n    </span><span class="s1">disableOptimizedLoading,</span><span class="s3">\n    </span><span class="s1">head: documentResult.head,</span><span class="s3">\n    </span><span class="s1">headTags: documentResult.headTags,</span><span class="s3">\n    </span><span class="s1">styles: documentResult.styles,</span><span class="s3">\n    </span><span class="s1">crossOrigin: renderOpts.crossOrigin,</span><span class="s3">\n    </span><span class="s1">optimizeCss: renderOpts.optimizeCss,</span><span class="s3">\n    </span><span class="s1">nextConfigOutput: renderOpts.nextConfigOutput,</span><span class="s3">\n    </span><span class="s1">nextScriptWorkers: renderOpts.nextScriptWorkers,</span><span class="s3">\n    </span><span class="s1">runtime: globalRuntime,</span><span class="s3">\n    </span><span class="s1">largePageDataBytes: renderOpts.largePageDataBytes,</span><span class="s3">\n    </span><span class="s1">nextFontManifest: renderOpts.nextFontManifest,</span><span class="s3">\n    </span><span class="s1">experimentalClientTraceMetadata:</span><span class="s3">\n      </span><span class="s1">renderOpts.experimental.clientTraceMetadata,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const document = (</span><span class="s3">\n    </span><span class="s1">&lt;AmpStateContext.Provider value={ampState}&gt;</span><span class="s3">\n      </span><span class="s1">&lt;HtmlContext.Provider value={htmlProps}&gt;</span><span class="s3">\n        </span><span class="s1">{documentResult.documentElement(htmlProps)}</span><span class="s3">\n      </span><span class="s1">&lt;/HtmlContext.Provider&gt;</span><span class="s3">\n    </span><span class="s1">&lt;/AmpStateContext.Provider&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const documentHTML = await getTracer().trace(</span><span class="s3">\n    </span><span class="s1">RenderSpan.renderToString,</span><span class="s3">\n    </span><span class="s1">async () =&gt; renderToString(document)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n    </span><span class="s1">const nonRenderedComponents = []</span><span class="s3">\n    </span><span class="s1">const expectedDocComponents = ['Main', 'Head', 'NextScript', 'Html']</span><span class="s3">\n\n    </span><span class="s1">for (const comp of expectedDocComponents) {</span><span class="s3">\n      </span><span class="s1">if (!(docComponentsRendered as any)[comp]) {</span><span class="s3">\n        </span><span class="s1">nonRenderedComponents.push(comp)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (nonRenderedComponents.length) {</span><span class="s3">\n      </span><span class="s1">const missingComponentList = nonRenderedComponents</span><span class="s3">\n        </span><span class="s1">.map((e) =&gt; `&lt;${e} /&gt;`)</span><span class="s3">\n        </span><span class="s1">.join(', ')</span><span class="s3">\n      </span><span class="s1">const plural = nonRenderedComponents.length !== 1 ? 's' : ''</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">`Your custom Document (pages/_document) did not render all the required subcomponent${plural}.</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n          </span><span class="s1">`Missing component${plural}: ${missingComponentList}</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n          </span><span class="s1">'Read how to fix here: https://nextjs.org/docs/messages/missing-document-component'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const [renderTargetPrefix, renderTargetSuffix] = documentHTML.split(</span><span class="s3">\n    </span><span class="s1">'&lt;next-js-internal-body-render-target&gt;&lt;/next-js-internal-body-render-target&gt;',</span><span class="s3">\n    </span><span class="s1">2</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let prefix = ''</span><span class="s3">\n  </span><span class="s1">if (!documentHTML.startsWith(DOCTYPE)) {</span><span class="s3">\n    </span><span class="s1">prefix += DOCTYPE</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">prefix += renderTargetPrefix</span><span class="s3">\n  </span><span class="s1">if (inAmpMode) {</span><span class="s3">\n    </span><span class="s1">prefix += '&lt;!-- __NEXT_DATA__ --&gt;'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const content = prefix + documentResult.contentHTML + renderTargetSuffix</span><span class="s3">\n\n  </span><span class="s1">const optimizedHtml = await postProcessHTML(pathname, content, renderOpts, {</span><span class="s3">\n    </span><span class="s1">inAmpMode,</span><span class="s3">\n    </span><span class="s1">hybridAmp,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return new RenderResult(optimizedHtml, {</span><span class="s3">\n    </span><span class="s1">metadata,</span><span class="s3">\n    </span><span class="s1">contentType: HTML_CONTENT_TYPE_HEADER,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type PagesRender = (</span><span class="s3">\n  </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n  </span><span class="s1">res: ServerResponse,</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">query: NextParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">renderOpts: RenderOpts,</span><span class="s3">\n  </span><span class="s1">sharedContext: PagesSharedContext,</span><span class="s3">\n  </span><span class="s1">renderContext: PagesRenderContext</span><span class="s3">\n</span><span class="s1">) =&gt; Promise&lt;RenderResult&gt;</span><span class="s3">\n\n</span><span class="s1">export const renderToHTML: PagesRender = (</span><span class="s3">\n  </span><span class="s1">req,</span><span class="s3">\n  </span><span class="s1">res,</span><span class="s3">\n  </span><span class="s1">pathname,</span><span class="s3">\n  </span><span class="s1">query,</span><span class="s3">\n  </span><span class="s1">renderOpts,</span><span class="s3">\n  </span><span class="s1">sharedContext,</span><span class="s3">\n  </span><span class="s1">renderContext</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">return renderToHTMLImpl(</span><span class="s3">\n    </span><span class="s1">req,</span><span class="s3">\n    </span><span class="s1">res,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">renderOpts,</span><span class="s3">\n    </span><span class="s1">renderOpts,</span><span class="s3">\n    </span><span class="s1">sharedContext,</span><span class="s3">\n    </span><span class="s1">renderContext</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;errorToJSON&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToHTMLImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;tryGetPreviewData&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;postProcessHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;DOCTYPE&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;_pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;html&quot;</span><span class="s0">,</span><span class="s1">&quot;noRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToString&quot;</span><span class="s0">,</span><span class="s1">&quot;element&quot;</span><span class="s0">,</span><span class="s1">&quot;renderStream&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDOMServerPages&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;allReady&quot;</span><span class="s0">,</span><span class="s1">&quot;streamToString&quot;</span><span class="s0">,</span><span class="s1">&quot;ServerRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;as&quot;</span><span class="s0">,</span><span class="s1">&quot;isFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;isReady&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;domainLocales&quot;</span><span class="s0">,</span><span class="s1">&quot;isPreview&quot;</span><span class="s0">,</span><span class="s1">&quot;isLocaleDomain&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;asPath&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;reload&quot;</span><span class="s0">,</span><span class="s1">&quot;back&quot;</span><span class="s0">,</span><span class="s1">&quot;forward&quot;</span><span class="s0">,</span><span class="s1">&quot;prefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;beforePopState&quot;</span><span class="s0">,</span><span class="s1">&quot;enhanceComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;App&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;enhanceApp&quot;</span><span class="s0">,</span><span class="s1">&quot;enhanceComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;renderPageTree&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidKeysMsg&quot;</span><span class="s0">,</span><span class="s1">&quot;methodName&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;docsPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;toLocaleLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;checkRedirectValues&quot;</span><span class="s0">,</span><span class="s1">&quot;redirect&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;permanent&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;errors&quot;</span><span class="s0">,</span><span class="s1">&quot;hasStatusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPermanent&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedStatusCodes&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;destinationType&quot;</span><span class="s0">,</span><span class="s1">&quot;basePathType&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;getErrorSource&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;stripAnsi&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;serializeError&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;renderOpts&quot;</span><span class="s0">,</span><span class="s1">&quot;extra&quot;</span><span class="s0">,</span><span class="s1">&quot;sharedContext&quot;</span><span class="s0">,</span><span class="s1">&quot;renderContext&quot;</span><span class="s0">,</span><span class="s1">&quot;setLazyProp&quot;</span><span class="s0">,</span><span class="s1">&quot;getCookieParser&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;assetQueryString&quot;</span><span class="s0">,</span><span class="s1">&quot;userAgent&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;deploymentId&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;ampPath&quot;</span><span class="s0">,</span><span class="s1">&quot;pageConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;buildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;reactLoadableManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;ErrorDebug&quot;</span><span class="s0">,</span><span class="s1">&quot;getStaticProps&quot;</span><span class="s0">,</span><span class="s1">&quot;getStaticPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerSideProps&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextDataRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;previewProps&quot;</span><span class="s0">,</span><span class="s1">&quot;images&quot;</span><span class="s0">,</span><span class="s1">&quot;runtime&quot;</span><span class="s0">,</span><span class="s1">&quot;globalRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;isExperimentalCompile&quot;</span><span class="s0">,</span><span class="s1">&quot;expireTime&quot;</span><span class="s0">,</span><span class="s1">&quot;Document&quot;</span><span class="s0">,</span><span class="s1">&quot;OriginComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;notFoundSrcPage&quot;</span><span class="s0">,</span><span class="s1">&quot;developmentNotFoundSourcePage&quot;</span><span class="s0">,</span><span class="s1">&quot;stripInternalQueries&quot;</span><span class="s0">,</span><span class="s1">&quot;isSSG&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuildTimeSSG&quot;</span><span class="s0">,</span><span class="s1">&quot;nextExport&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultAppGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;getInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;origGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPageGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPageScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_scriptLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;pageIsDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultErrorGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;isAutoExport&quot;</span><span class="s0">,</span><span class="s1">&quot;setHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheControlHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;expire&quot;</span><span class="s0">,</span><span class="s1">&quot;SSG_GET_INITIAL_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_GET_INIT_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_SSG_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfigOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedAsPath&quot;</span><span class="s0">,</span><span class="s1">&quot;isValidElementType&quot;</span><span class="s0">,</span><span class="s1">&quot;amp&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_STATUS_PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;setIsrStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_COMPONENT_MEMBER_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;Loadable&quot;</span><span class="s0">,</span><span class="s1">&quot;preloadAll&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;previewData&quot;</span><span class="s0">,</span><span class="s1">&quot;multiZoneDraftMode&quot;</span><span class="s0">,</span><span class="s1">&quot;routerIsReady&quot;</span><span class="s0">,</span><span class="s1">&quot;router&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;appRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;adaptForAppRouterInstance&quot;</span><span class="s0">,</span><span class="s1">&quot;scriptLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;jsxStyleRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;createStyleRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;ampState&quot;</span><span class="s0">,</span><span class="s1">&quot;ampFirst&quot;</span><span class="s0">,</span><span class="s1">&quot;hasQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;hybrid&quot;</span><span class="s0">,</span><span class="s1">&quot;inAmpMode&quot;</span><span class="s0">,</span><span class="s1">&quot;isInAmpMode&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultHead&quot;</span><span class="s0">,</span><span class="s1">&quot;reactLoadableModules&quot;</span><span class="s0">,</span><span class="s1">&quot;initialScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeInteractive&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;script&quot;</span><span class="s0">,</span><span class="s1">&quot;strategy&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;csp&quot;</span><span class="s0">,</span><span class="s1">&quot;nonce&quot;</span><span class="s0">,</span><span class="s1">&quot;getScriptNonceFromHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;AppContainer&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;AppRouterContext&quot;</span><span class="s0">,</span><span class="s1">&quot;Provider&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;SearchParamsContext&quot;</span><span class="s0">,</span><span class="s1">&quot;adaptForSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;PathnameContextProviderAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;PathParamsContext&quot;</span><span class="s0">,</span><span class="s1">&quot;adaptForPathParams&quot;</span><span class="s0">,</span><span class="s1">&quot;RouterContext&quot;</span><span class="s0">,</span><span class="s1">&quot;AmpStateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;HeadManagerContext&quot;</span><span class="s0">,</span><span class="s1">&quot;updateHead&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;updateScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;scripts&quot;</span><span class="s0">,</span><span class="s1">&quot;mountedInstances&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;LoadableContext&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleName&quot;</span><span class="s0">,</span><span class="s1">&quot;StyleRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;registry&quot;</span><span class="s0">,</span><span class="s1">&quot;ImageConfigContext&quot;</span><span class="s0">,</span><span class="s1">&quot;Noop&quot;</span><span class="s0">,</span><span class="s1">&quot;AppContainerWithIsomorphicFiberStructure&quot;</span><span class="s0">,</span><span class="s1">&quot;ctx&quot;</span><span class="s0">,</span><span class="s1">&quot;AppTree&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;docCtx&quot;</span><span class="s0">,</span><span class="s1">&quot;AppComp&quot;</span><span class="s0">,</span><span class="s1">&quot;renderPageHead&quot;</span><span class="s0">,</span><span class="s1">&quot;renderPage&quot;</span><span class="s0">,</span><span class="s1">&quot;styles&quot;</span><span class="s0">,</span><span class="s1">&quot;flush&quot;</span><span class="s0">,</span><span class="s1">&quot;styledJsxInsertedHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;loadGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;__N_PREVIEW&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_PROPS_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;draftMode&quot;</span><span class="s0">,</span><span class="s1">&quot;preview&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidateReason&quot;</span><span class="s0">,</span><span class="s1">&quot;isOnDemandRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;staticPropsError&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;GSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;UNSTABLE_REVALIDATE_RENAME_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;isNotFound&quot;</span><span class="s0">,</span><span class="s1">&quot;__N_REDIRECT&quot;</span><span class="s0">,</span><span class="s1">&quot;__N_REDIRECT_STATUS&quot;</span><span class="s0">,</span><span class="s1">&quot;getRedirectStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;__N_REDIRECT_BASE_PATH&quot;</span><span class="s0">,</span><span class="s1">&quot;isRedirect&quot;</span><span class="s0">,</span><span class="s1">&quot;isSerializableProps&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;isInteger&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;ceil&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;pageProps&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheControl&quot;</span><span class="s0">,</span><span class="s1">&quot;pageData&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderResult&quot;</span><span class="s0">,</span><span class="s1">&quot;contentType&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;canAccessRes&quot;</span><span class="s0">,</span><span class="s1">&quot;resOrProxy&quot;</span><span class="s0">,</span><span class="s1">&quot;deferredContent&quot;</span><span class="s0">,</span><span class="s1">&quot;Proxy&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;ReflectAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;serverSidePropsError&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_redirect&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;isResSent&quot;</span><span class="s0">,</span><span class="s1">&quot;EMPTY&quot;</span><span class="s0">,</span><span class="s1">&quot;filteredBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;denormalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pages&quot;</span><span class="s0">,</span><span class="s1">&quot;lowPriorityFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;f&quot;</span><span class="s0">,</span><span class="s1">&quot;Body&quot;</span><span class="s0">,</span><span class="s1">&quot;div&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;renderDocument&quot;</span><span class="s0">,</span><span class="s1">&quot;BuiltinFunctionalDocument&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_BUILTIN_DOCUMENT&quot;</span><span class="s0">,</span><span class="s1">&quot;loadDocumentInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;renderShell&quot;</span><span class="s0">,</span><span class="s1">&quot;EnhancedApp&quot;</span><span class="s0">,</span><span class="s1">&quot;EnhancedComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;stream&quot;</span><span class="s0">,</span><span class="s1">&quot;documentCtx&quot;</span><span class="s0">,</span><span class="s1">&quot;docProps&quot;</span><span class="s0">,</span><span class="s1">&quot;getDisplayName&quot;</span><span class="s0">,</span><span class="s1">&quot;renderContent&quot;</span><span class="s0">,</span><span class="s1">&quot;_App&quot;</span><span class="s0">,</span><span class="s1">&quot;_Component&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToInitialFizzStream&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDOMServer&quot;</span><span class="s0">,</span><span class="s1">&quot;hasDocumentGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;documentInitialPropsRes&quot;</span><span class="s0">,</span><span class="s1">&quot;rawStyledJsxInsertedHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;contentHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;documentElement&quot;</span><span class="s0">,</span><span class="s1">&quot;htmlProps&quot;</span><span class="s0">,</span><span class="s1">&quot;headTags&quot;</span><span class="s0">,</span><span class="s1">&quot;setRootSpanAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;documentResult&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicImportsIds&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicImports&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestItem&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;files&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;hybridAmp&quot;</span><span class="s0">,</span><span class="s1">&quot;docComponentsRendered&quot;</span><span class="s0">,</span><span class="s1">&quot;assetPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;disableOptimizedLoading&quot;</span><span class="s0">,</span><span class="s1">&quot;runtimeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_DATA__&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;autoExport&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicIds&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;gsp&quot;</span><span class="s0">,</span><span class="s1">&quot;gssp&quot;</span><span class="s0">,</span><span class="s1">&quot;customServer&quot;</span><span class="s0">,</span><span class="s1">&quot;gip&quot;</span><span class="s0">,</span><span class="s1">&quot;appGip&quot;</span><span class="s0">,</span><span class="s1">&quot;dangerousAsPath&quot;</span><span class="s0">,</span><span class="s1">&quot;canonicalBase&quot;</span><span class="s0">,</span><span class="s1">&quot;isDevelopment&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicCssManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_runtimeJS&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_JsPreload&quot;</span><span class="s0">,</span><span class="s1">&quot;crossOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;optimizeCss&quot;</span><span class="s0">,</span><span class="s1">&quot;nextScriptWorkers&quot;</span><span class="s0">,</span><span class="s1">&quot;largePageDataBytes&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalClientTraceMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;clientTraceMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;HtmlContext&quot;</span><span class="s0">,</span><span class="s1">&quot;documentHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;nonRenderedComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;expectedDocComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;comp&quot;</span><span class="s0">,</span><span class="s1">&quot;missingComponentList&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;plural&quot;</span><span class="s0">,</span><span class="s1">&quot;renderTargetPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;renderTargetSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;optimizedHtml&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>