<html>
<head>
<title>report.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
report.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/experimental/testmode/playwright/report.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { TestInfo } from '@playwright/test'</span><span class="s3">\n</span><span class="s1">import type { FetchHandler } from './next-worker-fixture'</span><span class="s3">\n</span><span class="s1">import { step } from './step'</span><span class="s3">\n\n</span><span class="s1">async function parseBody(</span><span class="s3">\n  </span><span class="s1">r: Pick&lt;Request, 'headers' | 'json' | 'text' | 'arrayBuffer' | 'formData'&gt;</span><span class="s3">\n</span><span class="s1">): Promise&lt;Record&lt;string, string&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">const contentType = r.headers.get('content-type')</span><span class="s3">\n  </span><span class="s1">let error: string | undefined</span><span class="s3">\n  </span><span class="s1">let text: string | undefined</span><span class="s3">\n  </span><span class="s1">let json: unknown</span><span class="s3">\n  </span><span class="s1">let formData: FormData | undefined</span><span class="s3">\n  </span><span class="s1">let buffer: ArrayBuffer | undefined</span><span class="s3">\n  </span><span class="s1">if (contentType?.includes('text')) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">text = await r.text()</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">error = 'failed to parse text'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else if (contentType?.includes('json')) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">json = await r.json()</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">error = 'failed to parse json'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else if (contentType?.includes('form-data')) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">formData = await r.formData()</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">error = 'failed to parse formData'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">buffer = await r.arrayBuffer()</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">error = 'failed to parse arrayBuffer'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">...(error ? { error } : null),</span><span class="s3">\n    </span><span class="s1">...(text ? { text } : null),</span><span class="s3">\n    </span><span class="s1">...(json ? { json: JSON.stringify(json) } : null),</span><span class="s3">\n    </span><span class="s1">...(formData ? { formData: JSON.stringify(Array.from(formData)) } : null),</span><span class="s3">\n    </span><span class="s1">...(buffer &amp;&amp; buffer.byteLength &gt; 0</span><span class="s3">\n      </span><span class="s1">? { buffer: `base64;${Buffer.from(buffer).toString('base64')}` }</span><span class="s3">\n      </span><span class="s1">: null),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function parseHeaders(headers: Headers): Record&lt;string, string&gt; {</span><span class="s3">\n  </span><span class="s1">return Object.fromEntries(</span><span class="s3">\n    </span><span class="s1">Array.from(headers)</span><span class="s3">\n      </span><span class="s1">.sort(([key1], [key2]) =&gt; key1.localeCompare(key2))</span><span class="s3">\n      </span><span class="s1">.map(([key, value]) =&gt; {</span><span class="s3">\n        </span><span class="s1">return [`header.${key}`, value]</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function reportFetch(</span><span class="s3">\n  </span><span class="s1">testInfo: TestInfo,</span><span class="s3">\n  </span><span class="s1">req: Request,</span><span class="s3">\n  </span><span class="s1">handler: FetchHandler</span><span class="s3">\n</span><span class="s1">): Promise&lt;Awaited&lt;ReturnType&lt;FetchHandler&gt;&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">return step(</span><span class="s3">\n    </span><span class="s1">testInfo,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">title: `next.onFetch: ${req.method} ${req.url}`,</span><span class="s3">\n      </span><span class="s1">category: 'next.onFetch',</span><span class="s3">\n      </span><span class="s1">apiName: 'next.onFetch',</span><span class="s3">\n      </span><span class="s1">params: {</span><span class="s3">\n        </span><span class="s1">method: req.method,</span><span class="s3">\n        </span><span class="s1">url: req.url,</span><span class="s3">\n        </span><span class="s1">...(await parseBody(req.clone())),</span><span class="s3">\n        </span><span class="s1">...parseHeaders(req.headers),</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async (complete) =&gt; {</span><span class="s3">\n      </span><span class="s1">const res = await handler(req)</span><span class="s3">\n      </span><span class="s1">if (res === undefined || res == null) {</span><span class="s3">\n        </span><span class="s1">complete({ error: { message: 'unhandled' } })</span><span class="s3">\n      </span><span class="s1">} else if (typeof res === 'string' &amp;&amp; res !== 'continue') {</span><span class="s3">\n        </span><span class="s1">complete({ error: { message: res } })</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">let body: Record&lt;string, unknown&gt;</span><span class="s3">\n        </span><span class="s1">if (typeof res === 'string') {</span><span class="s3">\n          </span><span class="s1">body = { response: res }</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">const { status, statusText } = res</span><span class="s3">\n          </span><span class="s1">body = {</span><span class="s3">\n            </span><span class="s1">status,</span><span class="s3">\n            </span><span class="s1">...(statusText ? { statusText } : null),</span><span class="s3">\n            </span><span class="s1">...(await parseBody(res.clone())),</span><span class="s3">\n            </span><span class="s1">...parseHeaders(res.headers),</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">await step(</span><span class="s3">\n          </span><span class="s1">testInfo,</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">title: `next.onFetch.fulfilled: ${req.method} ${req.url}`,</span><span class="s3">\n            </span><span class="s1">category: 'next.onFetch',</span><span class="s3">\n            </span><span class="s1">apiName: 'next.onFetch.fulfilled',</span><span class="s3">\n            </span><span class="s1">params: {</span><span class="s3">\n              </span><span class="s1">...body,</span><span class="s3">\n              </span><span class="s1">'request.url': req.url,</span><span class="s3">\n              </span><span class="s1">'request.method': req.method,</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">async () =&gt; undefined</span><span class="s3">\n        </span><span class="s1">).catch(() =&gt; undefined)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return res</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;reportFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;parseBody&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;contentType&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;text&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;formData&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;arrayBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;byteLength&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;parseHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;sort&quot;</span><span class="s0">,</span><span class="s1">&quot;key1&quot;</span><span class="s0">,</span><span class="s1">&quot;key2&quot;</span><span class="s0">,</span><span class="s1">&quot;localeCompare&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;testInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;handler&quot;</span><span class="s0">,</span><span class="s1">&quot;step&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;category&quot;</span><span class="s0">,</span><span class="s1">&quot;apiName&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;clone&quot;</span><span class="s0">,</span><span class="s1">&quot;complete&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;statusText&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>