<html>
<head>
<title>webpack-config.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #1750eb;}
.s4 { color: #8c8c8c; font-style: italic;}
.s5 { color: #264eff;}
.s6 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
webpack-config.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s1">NODE_BASE_ESM_RESOLVE_OPTIONS: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">NODE_BASE_RESOLVE_OPTIONS: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">NODE_ESM_RESOLVE_OPTIONS: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">NODE_RESOLVE_OPTIONS: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">attachReactRefresh: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">babelIncludeRegexes: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">getCacheDirectories: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">hasExternalOtelApiPackage: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">loadProjectInfo: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">nextImageLoaderRegex: </span><span class="s2">null</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">_export(target, all) {</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">name </span><span class="s2">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s1">NODE_BASE_ESM_RESOLVE_OPTIONS: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">NODE_BASE_ESM_RESOLVE_OPTIONS;</span>
    <span class="s1">},</span>
    <span class="s1">NODE_BASE_RESOLVE_OPTIONS: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">NODE_BASE_RESOLVE_OPTIONS;</span>
    <span class="s1">},</span>
    <span class="s1">NODE_ESM_RESOLVE_OPTIONS: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">NODE_ESM_RESOLVE_OPTIONS;</span>
    <span class="s1">},</span>
    <span class="s1">NODE_RESOLVE_OPTIONS: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">NODE_RESOLVE_OPTIONS;</span>
    <span class="s1">},</span>
    <span class="s1">attachReactRefresh: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">attachReactRefresh;</span>
    <span class="s1">},</span>
    <span class="s1">babelIncludeRegexes: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">babelIncludeRegexes;</span>
    <span class="s1">},</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">getBaseWebpackConfig;</span>
    <span class="s1">},</span>
    <span class="s1">getCacheDirectories: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">getCacheDirectories;</span>
    <span class="s1">},</span>
    <span class="s1">hasExternalOtelApiPackage: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">hasExternalOtelApiPackage;</span>
    <span class="s1">},</span>
    <span class="s1">loadProjectInfo: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">loadProjectInfo;</span>
    <span class="s1">},</span>
    <span class="s1">nextImageLoaderRegex: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">nextImageLoaderRegex;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_react = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;react&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_ReactRefreshWebpackPlugin = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;next/dist/compiled/@next/react-refresh-utils/dist/ReactRefreshWebpackPlugin&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_picocolors = require(</span><span class="s0">&quot;../lib/picocolors&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_crypto = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;crypto&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_webpack = require(</span><span class="s0">&quot;next/dist/compiled/webpack/webpack&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_path = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;path&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_defineenv = require(</span><span class="s0">&quot;./define-env&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_escaperegexp = require(</span><span class="s0">&quot;../shared/lib/escape-regexp&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_constants = require(</span><span class="s0">&quot;../lib/constants&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_utils = require(</span><span class="s0">&quot;./utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_constants1 = require(</span><span class="s0">&quot;../shared/lib/constants&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_utils1 = require(</span><span class="s0">&quot;../shared/lib/utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_entries = require(</span><span class="s0">&quot;./entries&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_log = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_wildcard(require(</span><span class="s0">&quot;./output/log&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_config = require(</span><span class="s0">&quot;./webpack/config&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_middlewareplugin = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_wildcard(require(</span><span class="s0">&quot;./webpack/plugins/middleware-plugin&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_buildmanifestplugin = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;./webpack/plugins/build-manifest-plugin&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_jsconfigpathsplugin = require(</span><span class="s0">&quot;./webpack/plugins/jsconfig-paths-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_nextdropclientpageplugin = require(</span><span class="s0">&quot;./webpack/plugins/next-drop-client-page-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_pagesmanifestplugin = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;./webpack/plugins/pages-manifest-plugin&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_profilingplugin = require(</span><span class="s0">&quot;./webpack/plugins/profiling-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_reactloadableplugin = require(</span><span class="s0">&quot;./webpack/plugins/react-loadable-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_wellknownerrorsplugin = require(</span><span class="s0">&quot;./webpack/plugins/wellknown-errors-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_css = require(</span><span class="s0">&quot;./webpack/config/blocks/css&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_copyfileplugin = require(</span><span class="s0">&quot;./webpack/plugins/copy-file-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_flightmanifestplugin = require(</span><span class="s0">&quot;./webpack/plugins/flight-manifest-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_flightcliententryplugin = require(</span><span class="s0">&quot;./webpack/plugins/flight-client-entry-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_rspackflightcliententryplugin = require(</span><span class="s0">&quot;./webpack/plugins/rspack-flight-client-entry-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_nexttypesplugin = require(</span><span class="s0">&quot;./webpack/plugins/next-types-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_loadjsconfig = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;./load-jsconfig&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_swc = require(</span><span class="s0">&quot;./swc&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_appbuildmanifestplugin = require(</span><span class="s0">&quot;./webpack/plugins/app-build-manifest-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_subresourceintegrityplugin = require(</span><span class="s0">&quot;./webpack/plugins/subresource-integrity-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_nextfontmanifestplugin = require(</span><span class="s0">&quot;./webpack/plugins/next-font-manifest-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_memorywithgccacheplugin = require(</span><span class="s0">&quot;./webpack/plugins/memory-with-gc-cache-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getbabelconfigfile = require(</span><span class="s0">&quot;./get-babel-config-file&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_needsexperimentalreact = require(</span><span class="s0">&quot;../lib/needs-experimental-react&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_handleexternals = require(</span><span class="s0">&quot;./handle-externals&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_resolve = require(</span><span class="s0">&quot;./webpack-config-rules/resolve&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_optionalpeerdependencyresolveplugin = require(</span><span class="s0">&quot;./webpack/plugins/optional-peer-dependency-resolve-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_createcompileraliases = require(</span><span class="s0">&quot;./create-compiler-aliases&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_utils2 = require(</span><span class="s0">&quot;../export/utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_csschunkingplugin = require(</span><span class="s0">&quot;./webpack/plugins/css-chunking-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getbabelloaderconfig = require(</span><span class="s0">&quot;./get-babel-loader-config&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_nextdirpaths = require(</span><span class="s0">&quot;./next-dir-paths&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getrspack = require(</span><span class="s0">&quot;../shared/lib/get-rspack&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_rspackprofilingplugin = require(</span><span class="s0">&quot;./webpack/plugins/rspack-profiling-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getwebpackbundler = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;../shared/lib/get-webpack-bundler&quot;</span><span class="s1">));</span>
<span class="s2">function </span><span class="s1">_interop_require_default(obj) {</span>
    <span class="s2">return </span><span class="s1">obj &amp;&amp; obj.__esModule ? obj : {</span>
        <span class="s2">default</span><span class="s1">: obj</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_getRequireWildcardCache(nodeInterop) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">WeakMap !== </span><span class="s0">&quot;function&quot;</span><span class="s1">) </span><span class="s2">return null</span><span class="s1">;</span>
    <span class="s2">var </span><span class="s1">cacheBabelInterop = </span><span class="s2">new </span><span class="s1">WeakMap();</span>
    <span class="s2">var </span><span class="s1">cacheNodeInterop = </span><span class="s2">new </span><span class="s1">WeakMap();</span>
    <span class="s2">return </span><span class="s1">(_getRequireWildcardCache = </span><span class="s2">function</span><span class="s1">(nodeInterop) {</span>
        <span class="s2">return </span><span class="s1">nodeInterop ? cacheNodeInterop : cacheBabelInterop;</span>
    <span class="s1">})(nodeInterop);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_interop_require_wildcard(obj, nodeInterop) {</span>
    <span class="s2">if </span><span class="s1">(!nodeInterop &amp;&amp; obj &amp;&amp; obj.__esModule) {</span>
        <span class="s2">return </span><span class="s1">obj;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(obj === </span><span class="s2">null </span><span class="s1">|| </span><span class="s2">typeof </span><span class="s1">obj !== </span><span class="s0">&quot;object&quot; </span><span class="s1">&amp;&amp; </span><span class="s2">typeof </span><span class="s1">obj !== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s2">default</span><span class="s1">: obj</span>
        <span class="s1">};</span>
    <span class="s1">}</span>
    <span class="s2">var </span><span class="s1">cache = _getRequireWildcardCache(nodeInterop);</span>
    <span class="s2">if </span><span class="s1">(cache &amp;&amp; cache.has(obj)) {</span>
        <span class="s2">return </span><span class="s1">cache.get(obj);</span>
    <span class="s1">}</span>
    <span class="s2">var </span><span class="s1">newObj = {</span>
        <span class="s1">__proto__: </span><span class="s2">null</span>
    <span class="s1">};</span>
    <span class="s2">var </span><span class="s1">hasPropertyDescriptor = Object.defineProperty &amp;&amp; Object.getOwnPropertyDescriptor;</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">key </span><span class="s2">in </span><span class="s1">obj){</span>
        <span class="s2">if </span><span class="s1">(key !== </span><span class="s0">&quot;default&quot; </span><span class="s1">&amp;&amp; Object.prototype.hasOwnProperty.call(obj, key)) {</span>
            <span class="s2">var </span><span class="s1">desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : </span><span class="s2">null</span><span class="s1">;</span>
            <span class="s2">if </span><span class="s1">(desc &amp;&amp; (desc.get || desc.set)) {</span>
                <span class="s1">Object.defineProperty(newObj, key, desc);</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s1">newObj[key] = obj[key];</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">newObj.default = obj;</span>
    <span class="s2">if </span><span class="s1">(cache) {</span>
        <span class="s1">cache.set(obj, newObj);</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">newObj;</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">EXTERNAL_PACKAGES = require(</span><span class="s0">'../lib/server-external-packages.json'</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">DEFAULT_TRANSPILED_PACKAGES = require(</span><span class="s0">'../lib/default-transpiled-packages.json'</span><span class="s1">);</span>
<span class="s2">if </span><span class="s1">(parseInt(_react.default.version) &lt; </span><span class="s3">18</span><span class="s1">) {</span>
    <span class="s2">throw </span><span class="s1">Object.defineProperty(</span><span class="s2">new </span><span class="s1">Error(</span><span class="s0">'Next.js requires react &gt;= 18.2.0 to be installed.'</span><span class="s1">), </span><span class="s0">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s1">, {</span>
        <span class="s1">value: </span><span class="s0">&quot;E480&quot;</span><span class="s1">,</span>
        <span class="s1">enumerable: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">configurable: </span><span class="s2">true</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">babelIncludeRegexes = [</span>
    <span class="s5">/next[\\/]dist[\\/](esm[\\/])?shared[\\/]lib/</span><span class="s1">,</span>
    <span class="s5">/next[\\/]dist[\\/](esm[\\/])?client/</span><span class="s1">,</span>
    <span class="s5">/next[\\/]dist[\\/](esm[\\/])?pages/</span><span class="s1">,</span>
    <span class="s5">/[\\/](strip-ansi|ansi-regex|styled-jsx)[\\/]/</span>
<span class="s1">];</span>
<span class="s2">const </span><span class="s1">browserNonTranspileModules = [</span>
    <span class="s4">// Transpiling `process/browser` will trigger babel compilation error due to value replacement.</span>
    <span class="s4">// TypeError: Property left of AssignmentExpression expected node to be of a type [&quot;LVal&quot;] but instead got &quot;BooleanLiteral&quot;</span>
    <span class="s4">// e.g. `process.browser = true` will become `true = true`.</span>
    <span class="s5">/[\\/]node_modules[\\/]process[\\/]browser/</span><span class="s1">,</span>
    <span class="s4">// Exclude precompiled react packages from browser compilation due to SWC helper insertion (#61791),</span>
    <span class="s4">// We fixed the issue but it's safer to exclude them from compilation since they don't need to be re-compiled.</span>
    <span class="s5">/[\\/]next[\\/]dist[\\/]compiled[\\/](react|react-dom|react-server-dom-webpack)(-experimental)?($|[\\/])/</span>
<span class="s1">];</span>
<span class="s2">const </span><span class="s1">precompileRegex = </span><span class="s5">/[\\/]next[\\/]dist[\\/]compiled[\\/]/</span><span class="s1">;</span>
<span class="s2">const </span><span class="s1">asyncStoragesRegex = </span><span class="s5">/next[\\/]dist[\\/](esm[\\/])?server[\\/]app-render[\\/](work-async-storage|action-async-storage|dynamic-access-async-storage|work-unit-async-storage)/</span><span class="s1">;</span>
<span class="s4">// Support for NODE_PATH</span>
<span class="s2">const </span><span class="s1">nodePathList = (process.env.NODE_PATH || </span><span class="s0">''</span><span class="s1">).split(process.platform === </span><span class="s0">'win32' </span><span class="s1">? </span><span class="s0">';' </span><span class="s1">: </span><span class="s0">':'</span><span class="s1">).filter((p)=&gt;!!p);</span>
<span class="s2">const </span><span class="s1">baseWatchOptions = Object.freeze({</span>
    <span class="s1">aggregateTimeout: </span><span class="s3">5</span><span class="s1">,</span>
    <span class="s1">ignored: </span><span class="s4">// Matches **/node_modules/**, **/.git/** and **/.next/**</span>
    <span class="s5">/^((?:[^/]*(?:\/|$))*)(\.(git|next)|node_modules)(\/((?:[^/]*(?:\/|$))*)(?:$|\/))?/</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">isModuleCSS(module1) {</span>
    <span class="s2">return</span><span class="s1">(</span><span class="s4">// mini-css-extract-plugin</span>
    <span class="s1">module1.type === </span><span class="s0">`css/mini-extract` </span><span class="s1">|| </span><span class="s4">// extract-css-chunks-webpack-plugin (old)</span>
    <span class="s1">module1.type === </span><span class="s0">`css/extract-chunks` </span><span class="s1">|| </span><span class="s4">// extract-css-chunks-webpack-plugin (new)</span>
    <span class="s1">module1.type === </span><span class="s0">`css/extract-css-chunks`</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">devtoolRevertWarning = (</span><span class="s3">0</span><span class="s1">, _utils1.execOnce)((devtool)=&gt;{</span>
    <span class="s1">console.warn((</span><span class="s3">0</span><span class="s1">, _picocolors.yellow)((</span><span class="s3">0</span><span class="s1">, _picocolors.bold)(</span><span class="s0">'Warning: '</span><span class="s1">)) + (</span><span class="s3">0</span><span class="s1">, _picocolors.bold)(</span><span class="s0">`Reverting webpack devtool to '</span><span class="s1">${devtool}</span><span class="s0">'.</span><span class="s6">\n</span><span class="s0">`</span><span class="s1">) + </span><span class="s0">'Changing the webpack devtool in development mode will cause severe performance regressions.</span><span class="s6">\n</span><span class="s0">' </span><span class="s1">+ </span><span class="s0">'Read more: https://nextjs.org/docs/messages/improper-devtool'</span><span class="s1">);</span>
<span class="s1">});</span>
<span class="s2">let </span><span class="s1">loggedSwcDisabled = </span><span class="s2">false</span><span class="s1">;</span>
<span class="s2">let </span><span class="s1">loggedIgnoredCompilerOptions = </span><span class="s2">false</span><span class="s1">;</span>
<span class="s2">const </span><span class="s1">reactRefreshLoaderName = </span><span class="s0">'next/dist/compiled/@next/react-refresh-utils/dist/loader'</span><span class="s1">;</span>
<span class="s2">function </span><span class="s1">getReactRefreshLoader() {</span>
    <span class="s2">return </span><span class="s1">process.env.NEXT_RSPACK ? (</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackReactRefresh)().loader : require.resolve(reactRefreshLoaderName);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">attachReactRefresh(webpackConfig, targetLoader) {</span>
    <span class="s2">var </span><span class="s1">_webpackConfig_module_rules, _webpackConfig_module;</span>
    <span class="s2">const </span><span class="s1">reactRefreshLoader = getReactRefreshLoader();</span>
    <span class="s1">(_webpackConfig_module = webpackConfig.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_module_rules = _webpackConfig_module.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_module_rules.forEach((rule)=&gt;{</span>
        <span class="s2">if </span><span class="s1">(rule &amp;&amp; </span><span class="s2">typeof </span><span class="s1">rule === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; </span><span class="s0">'use' </span><span class="s2">in </span><span class="s1">rule) {</span>
            <span class="s2">const </span><span class="s1">curr = rule.use;</span>
            <span class="s4">// When the user has configured `defaultLoaders.babel` for a input file:</span>
            <span class="s2">if </span><span class="s1">(curr === targetLoader) {</span>
                <span class="s1">rule.use = [</span>
                    <span class="s1">reactRefreshLoader,</span>
                    <span class="s1">curr</span>
                <span class="s1">];</span>
            <span class="s1">} </span><span class="s2">else if </span><span class="s1">(Array.isArray(curr) &amp;&amp; curr.some((r)=&gt;r === targetLoader) &amp;&amp; </span><span class="s4">// Check if loader already exists:</span>
            <span class="s1">!curr.some((r)=&gt;r === reactRefreshLoader || r === reactRefreshLoaderName)) {</span>
                <span class="s2">const </span><span class="s1">idx = curr.findIndex((r)=&gt;r === targetLoader);</span>
                <span class="s4">// Clone to not mutate user input</span>
                <span class="s1">rule.use = [</span>
                    <span class="s1">...curr</span>
                <span class="s1">];</span>
                <span class="s4">// inject / input: [other, babel] output: [other, refresh, babel]:</span>
                <span class="s1">rule.use.splice(idx, </span><span class="s3">0</span><span class="s1">, reactRefreshLoader);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">NODE_RESOLVE_OPTIONS = {</span>
    <span class="s1">dependencyType: </span><span class="s0">'commonjs'</span><span class="s1">,</span>
    <span class="s1">modules: [</span>
        <span class="s0">'node_modules'</span>
    <span class="s1">],</span>
    <span class="s1">fallback: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">exportsFields: [</span>
        <span class="s0">'exports'</span>
    <span class="s1">],</span>
    <span class="s1">importsFields: [</span>
        <span class="s0">'imports'</span>
    <span class="s1">],</span>
    <span class="s1">conditionNames: [</span>
        <span class="s0">'node'</span><span class="s1">,</span>
        <span class="s0">'require'</span>
    <span class="s1">],</span>
    <span class="s1">descriptionFiles: [</span>
        <span class="s0">'package.json'</span>
    <span class="s1">],</span>
    <span class="s1">extensions: [</span>
        <span class="s0">'.js'</span><span class="s1">,</span>
        <span class="s0">'.json'</span><span class="s1">,</span>
        <span class="s0">'.node'</span>
    <span class="s1">],</span>
    <span class="s1">enforceExtensions: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">symlinks: </span><span class="s2">true</span><span class="s1">,</span>
    <span class="s1">mainFields: [</span>
        <span class="s0">'main'</span>
    <span class="s1">],</span>
    <span class="s1">mainFiles: [</span>
        <span class="s0">'index'</span>
    <span class="s1">],</span>
    <span class="s1">roots: [],</span>
    <span class="s1">fullySpecified: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">preferRelative: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">preferAbsolute: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">restrictions: []</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">NODE_BASE_RESOLVE_OPTIONS = {</span>
    <span class="s1">...NODE_RESOLVE_OPTIONS,</span>
    <span class="s1">alias: </span><span class="s2">false</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">NODE_ESM_RESOLVE_OPTIONS = {</span>
    <span class="s1">...NODE_RESOLVE_OPTIONS,</span>
    <span class="s1">alias: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">dependencyType: </span><span class="s0">'esm'</span><span class="s1">,</span>
    <span class="s1">conditionNames: [</span>
        <span class="s0">'node'</span><span class="s1">,</span>
        <span class="s0">'import'</span>
    <span class="s1">],</span>
    <span class="s1">fullySpecified: </span><span class="s2">true</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">NODE_BASE_ESM_RESOLVE_OPTIONS = {</span>
    <span class="s1">...NODE_ESM_RESOLVE_OPTIONS,</span>
    <span class="s1">alias: </span><span class="s2">false</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">nextImageLoaderRegex = </span><span class="s5">/\.(png|jpg|jpeg|gif|webp|avif|ico|bmp|svg)$/i</span><span class="s1">;</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">loadProjectInfo({ dir, config, dev }) {</span>
    <span class="s2">const </span><span class="s1">{ jsConfig, jsConfigPath, resolvedBaseUrl } = </span><span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _loadjsconfig.default)(dir, config);</span>
    <span class="s2">const </span><span class="s1">supportedBrowsers = (</span><span class="s3">0</span><span class="s1">, _utils.getSupportedBrowsers)(dir, dev);</span>
    <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">jsConfig,</span>
        <span class="s1">jsConfigPath,</span>
        <span class="s1">resolvedBaseUrl,</span>
        <span class="s1">supportedBrowsers</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">hasExternalOtelApiPackage() {</span>
    <span class="s2">try </span><span class="s1">{</span>
        <span class="s1">require(</span><span class="s0">'@opentelemetry/api'</span><span class="s1">);</span>
        <span class="s2">return true</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s2">catch  </span><span class="s1">{</span>
        <span class="s2">return false</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">UNSAFE_CACHE_REGEX = </span><span class="s5">/[\\/]pages[\\/][^\\/]+(?:$|\?|#)/</span><span class="s1">;</span>
<span class="s2">function </span><span class="s1">getCacheDirectories(configs) {</span>
    <span class="s2">return new </span><span class="s1">Set(configs.map((cfg)=&gt;{</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">cfg.cache === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; cfg.cache.type === </span><span class="s0">'filesystem'</span><span class="s1">) {</span>
            <span class="s2">return </span><span class="s1">cfg.cache.cacheDirectory;</span>
        <span class="s1">}</span>
        <span class="s2">return null</span><span class="s1">;</span>
    <span class="s1">}).filter((dir)=&gt;dir != </span><span class="s2">null</span><span class="s1">));</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">getBaseWebpackConfig(dir, { buildId, encryptionKey, config, compilerType, dev = </span><span class="s2">false</span><span class="s1">, entrypoints, isDevFallback = </span><span class="s2">false</span><span class="s1">, pagesDir, reactProductionProfiling = </span><span class="s2">false</span><span class="s1">, rewrites, originalRewrites, originalRedirects, runWebpackSpan, appDir, middlewareMatchers, noMangling, jsConfig, jsConfigPath, resolvedBaseUrl, supportedBrowsers, clientRouterFilters, fetchCacheKeyPrefix, isCompileMode, previewProps }) {</span>
    <span class="s2">var </span><span class="s1">_config_experimental, _config_experimental1, _config_compiler, _config_compiler1, _config_compiler2, _jsConfig_compilerOptions, _config_compiler3, _jsConfig_compilerOptions1, _config_compiler4, _config_experimental2, _config_watchOptions, _config_experimental_sri, _config_experimental_sri1, _jsConfig_compilerOptions2, </span><span class="s4">// always add JsConfigPathsPlugin to allow hot-reloading</span>
    <span class="s4">// if the config is added/removed</span>
    <span class="s1">_webpackConfig_resolve_plugins, _webpackConfig_resolve, _config_experimental3, _config_compiler5, _config_compiler6, _config_compiler7, _config_compiler8, _config_compiler9, _webpack5Config_plugins, _webpackConfig_module, _webpackConfig_module1, _webpackConfig_module_rules, _webpackConfig_module2;</span>
    <span class="s2">const </span><span class="s1">bundler = (</span><span class="s3">0</span><span class="s1">, _getwebpackbundler.default)();</span>
    <span class="s2">const </span><span class="s1">isClient = compilerType === _constants1.COMPILER_NAMES.client;</span>
    <span class="s2">const </span><span class="s1">isEdgeServer = compilerType === _constants1.COMPILER_NAMES.edgeServer;</span>
    <span class="s2">const </span><span class="s1">isNodeServer = compilerType === _constants1.COMPILER_NAMES.server;</span>
    <span class="s2">const </span><span class="s1">isRspack = Boolean(process.env.NEXT_RSPACK);</span>
    <span class="s2">const </span><span class="s1">FlightClientEntryPlugin = isRspack &amp;&amp; process.env.BUILTIN_FLIGHT_CLIENT_ENTRY_PLUGIN ? _rspackflightcliententryplugin.RspackFlightClientEntryPlugin : _flightcliententryplugin.FlightClientEntryPlugin;</span>
    <span class="s4">// If the current compilation is aimed at server-side code instead of client-side code.</span>
    <span class="s2">const </span><span class="s1">isNodeOrEdgeCompilation = isNodeServer || isEdgeServer;</span>
    <span class="s2">const </span><span class="s1">hasRewrites = rewrites.beforeFiles.length &gt; </span><span class="s3">0 </span><span class="s1">|| rewrites.afterFiles.length &gt; </span><span class="s3">0 </span><span class="s1">|| rewrites.fallback.length &gt; </span><span class="s3">0</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">hasAppDir = !!appDir;</span>
    <span class="s2">const </span><span class="s1">disableOptimizedLoading = </span><span class="s2">true</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">bundledReactChannel = (</span><span class="s3">0</span><span class="s1">, _needsexperimentalreact.needsExperimentalReact)(config) ? </span><span class="s0">'-experimental' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">babelConfigFile = (</span><span class="s3">0</span><span class="s1">, _getbabelconfigfile.getBabelConfigFile)(dir);</span>
    <span class="s2">if </span><span class="s1">(!dev &amp;&amp; (</span><span class="s3">0</span><span class="s1">, _utils2.hasCustomExportOutput)(config)) {</span>
        <span class="s1">config.distDir = </span><span class="s0">'.next'</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">distDir = _path.default.join(dir, config.distDir);</span>
    <span class="s2">let </span><span class="s1">useSWCLoader = !babelConfigFile || config.experimental.forceSwcTransforms;</span>
    <span class="s2">let </span><span class="s1">SWCBinaryTarget = undefined;</span>
    <span class="s2">if </span><span class="s1">(useSWCLoader) {</span>
        <span class="s2">var </span><span class="s1">_require_getBinaryMetadata, _require_getBinaryMetadata1, _require;</span>
        <span class="s4">// TODO: we do not collect wasm target yet</span>
        <span class="s2">const </span><span class="s1">binaryTarget = (_require = require(</span><span class="s0">'./swc'</span><span class="s1">)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_require_getBinaryMetadata1 = _require.getBinaryMetadata) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_require_getBinaryMetadata = _require_getBinaryMetadata1.call(_require)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _require_getBinaryMetadata.target;</span>
        <span class="s1">SWCBinaryTarget = binaryTarget ? [</span>
            <span class="s0">`swc/target/</span><span class="s1">${binaryTarget}</span><span class="s0">`</span><span class="s1">,</span>
            <span class="s2">true</span>
        <span class="s1">] : undefined;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(!loggedSwcDisabled &amp;&amp; !useSWCLoader &amp;&amp; babelConfigFile) {</span>
        <span class="s1">_log.info(</span><span class="s0">`Disabled SWC as replacement for Babel because of custom Babel configuration &quot;</span><span class="s1">${_path.default.relative(dir, babelConfigFile)}</span><span class="s0">&quot; https://nextjs.org/docs/messages/swc-disabled`</span><span class="s1">);</span>
        <span class="s1">loggedSwcDisabled = </span><span class="s2">true</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s4">// eagerly load swc bindings instead of waiting for transform calls</span>
    <span class="s2">if </span><span class="s1">(!babelConfigFile &amp;&amp; isClient) {</span>
        <span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _swc.loadBindings)(config.experimental.useWasmBinary);</span>
    <span class="s1">}</span>
    <span class="s4">// since `pages` doesn't always bundle by default we need to</span>
    <span class="s4">// auto-include optimizePackageImports in transpilePackages</span>
    <span class="s2">const </span><span class="s1">finalTranspilePackages = (config.transpilePackages || []).concat(DEFAULT_TRANSPILED_PACKAGES);</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">pkg of config.experimental.optimizePackageImports || []){</span>
        <span class="s2">if </span><span class="s1">(!finalTranspilePackages.includes(pkg)) {</span>
            <span class="s1">finalTranspilePackages.push(pkg);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(!loggedIgnoredCompilerOptions &amp;&amp; !useSWCLoader &amp;&amp; config.compiler) {</span>
        <span class="s1">_log.info(</span><span class="s0">'`compiler` options in `next.config.js` will be ignored while using Babel https://nextjs.org/docs/messages/ignored-compiler-options'</span><span class="s1">);</span>
        <span class="s1">loggedIgnoredCompilerOptions = </span><span class="s2">true</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">excludeCache = {};</span>
    <span class="s2">function </span><span class="s1">exclude(excludePath) {</span>
        <span class="s2">const </span><span class="s1">cached = excludeCache[excludePath];</span>
        <span class="s2">if </span><span class="s1">(cached !== undefined) {</span>
            <span class="s2">return </span><span class="s1">cached;</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">shouldExclude = excludePath.includes(</span><span class="s0">'node_modules'</span><span class="s1">) &amp;&amp; !babelIncludeRegexes.some((r)=&gt;r.test(excludePath)) &amp;&amp; !(</span><span class="s3">0</span><span class="s1">, _handleexternals.isResourceInPackages)(excludePath, finalTranspilePackages);</span>
        <span class="s1">excludeCache[excludePath] = shouldExclude;</span>
        <span class="s2">return </span><span class="s1">shouldExclude;</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">shouldIncludeExternalDirs = config.experimental.externalDir || !!config.transpilePackages;</span>
    <span class="s2">const </span><span class="s1">codeCondition = {</span>
        <span class="s1">test: {</span>
            <span class="s1">or: [</span>
                <span class="s5">/\.(tsx|ts|js|cjs|mjs|jsx)$/</span><span class="s1">,</span>
                <span class="s5">/__barrel_optimize__/</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">...shouldIncludeExternalDirs ? {} : {</span>
            <span class="s1">include: [</span>
                <span class="s1">dir,</span>
                <span class="s1">...babelIncludeRegexes</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">exclude</span>
    <span class="s1">};</span>
    <span class="s2">const </span><span class="s1">babelLoader = (</span><span class="s3">0</span><span class="s1">, _getbabelloaderconfig.getBabelLoader)(useSWCLoader, babelConfigFile, isNodeOrEdgeCompilation, distDir, pagesDir, dir, appDir || pagesDir, dev, isClient, (_config_experimental = config.experimental) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental.reactCompiler, codeCondition.exclude);</span>
    <span class="s2">const </span><span class="s1">reactCompilerLoader = babelLoader ? undefined : (</span><span class="s3">0</span><span class="s1">, _getbabelloaderconfig.getReactCompilerLoader)((_config_experimental1 = config.experimental) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental1.reactCompiler, dir, dev, isNodeOrEdgeCompilation, codeCondition.exclude);</span>
    <span class="s2">let </span><span class="s1">swcTraceProfilingInitialized = </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">getSwcLoader = (extraOptions)=&gt;{</span>
        <span class="s2">var </span><span class="s1">_config_experimental;</span>
        <span class="s2">if </span><span class="s1">((config == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_config_experimental = config.experimental) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental.swcTraceProfiling) &amp;&amp; !swcTraceProfilingInitialized) {</span>
            <span class="s2">var </span><span class="s1">_require_initCustomTraceSubscriber, _require;</span>
            <span class="s4">// This will init subscribers once only in a single process lifecycle,</span>
            <span class="s4">// even though it can be called multiple times.</span>
            <span class="s4">// Subscriber need to be initialized _before_ any actual swc's call (transform, etcs)</span>
            <span class="s4">// to collect correct trace spans when they are called.</span>
            <span class="s1">swcTraceProfilingInitialized = </span><span class="s2">true</span><span class="s1">;</span>
            <span class="s1">(_require = require(</span><span class="s0">'./swc'</span><span class="s1">)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_require_initCustomTraceSubscriber = _require.initCustomTraceSubscriber) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _require_initCustomTraceSubscriber.call(_require, _path.default.join(distDir, </span><span class="s0">`swc-trace-profile-</span><span class="s1">${Date.now()}</span><span class="s0">.json`</span><span class="s1">));</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">useBuiltinSwcLoader = process.env.BUILTIN_SWC_LOADER;</span>
        <span class="s2">if </span><span class="s1">(isRspack &amp;&amp; useBuiltinSwcLoader) {</span>
            <span class="s2">var </span><span class="s1">_jsConfig_compilerOptions, _jsConfig_compilerOptions1;</span>
            <span class="s2">return </span><span class="s1">{</span>
                <span class="s1">loader: </span><span class="s0">'builtin:next-swc-loader'</span><span class="s1">,</span>
                <span class="s1">options: {</span>
                    <span class="s1">isServer: isNodeOrEdgeCompilation,</span>
                    <span class="s1">rootDir: dir,</span>
                    <span class="s1">pagesDir,</span>
                    <span class="s1">appDir,</span>
                    <span class="s1">hasReactRefresh: dev &amp;&amp; isClient,</span>
                    <span class="s1">transpilePackages: finalTranspilePackages,</span>
                    <span class="s1">supportedBrowsers,</span>
                    <span class="s1">swcCacheDir: _path.default.join(dir, (config == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: config.distDir) ?? </span><span class="s0">'.next'</span><span class="s1">, </span><span class="s0">'cache'</span><span class="s1">, </span><span class="s0">'swc'</span><span class="s1">),</span>
                    <span class="s1">serverReferenceHashSalt: encryptionKey,</span>
                    <span class="s4">// rspack specific options</span>
                    <span class="s1">pnp: Boolean(process.versions.pnp),</span>
                    <span class="s1">optimizeServerReact: Boolean(config.experimental.optimizeServerReact),</span>
                    <span class="s1">modularizeImports: config.modularizeImports,</span>
                    <span class="s1">decorators: Boolean(jsConfig == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_jsConfig_compilerOptions = jsConfig.compilerOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _jsConfig_compilerOptions.experimentalDecorators),</span>
                    <span class="s1">emitDecoratorMetadata: Boolean(jsConfig == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_jsConfig_compilerOptions1 = jsConfig.compilerOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _jsConfig_compilerOptions1.emitDecoratorMetadata),</span>
                    <span class="s1">regeneratorRuntimePath: require.resolve(</span><span class="s0">'next/dist/compiled/regenerator-runtime'</span><span class="s1">),</span>
                    <span class="s1">...extraOptions</span>
                <span class="s1">}</span>
            <span class="s1">};</span>
        <span class="s1">}</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">loader: </span><span class="s0">'next-swc-loader'</span><span class="s1">,</span>
            <span class="s1">options: {</span>
                <span class="s1">isServer: isNodeOrEdgeCompilation,</span>
                <span class="s1">compilerType,</span>
                <span class="s1">rootDir: dir,</span>
                <span class="s1">pagesDir,</span>
                <span class="s1">appDir,</span>
                <span class="s1">hasReactRefresh: dev &amp;&amp; isClient,</span>
                <span class="s1">nextConfig: config,</span>
                <span class="s1">jsConfig,</span>
                <span class="s1">transpilePackages: finalTranspilePackages,</span>
                <span class="s1">supportedBrowsers,</span>
                <span class="s1">swcCacheDir: _path.default.join(dir, (config == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: config.distDir) ?? </span><span class="s0">'.next'</span><span class="s1">, </span><span class="s0">'cache'</span><span class="s1">, </span><span class="s0">'swc'</span><span class="s1">),</span>
                <span class="s1">serverReferenceHashSalt: encryptionKey,</span>
                <span class="s1">...extraOptions</span>
            <span class="s1">}</span>
        <span class="s1">};</span>
    <span class="s1">};</span>
    <span class="s4">// RSC loaders, prefer ESM, set `esm` to true</span>
    <span class="s2">const </span><span class="s1">swcServerLayerLoader = getSwcLoader({</span>
        <span class="s1">serverComponents: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">bundleLayer: _constants.WEBPACK_LAYERS.reactServerComponents,</span>
        <span class="s1">esm: </span><span class="s2">true</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">swcSSRLayerLoader = getSwcLoader({</span>
        <span class="s1">serverComponents: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">bundleLayer: _constants.WEBPACK_LAYERS.serverSideRendering,</span>
        <span class="s1">esm: </span><span class="s2">true</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">swcBrowserLayerLoader = getSwcLoader({</span>
        <span class="s1">serverComponents: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">bundleLayer: _constants.WEBPACK_LAYERS.appPagesBrowser,</span>
        <span class="s1">esm: </span><span class="s2">true</span>
    <span class="s1">});</span>
    <span class="s4">// Default swc loaders for pages doesn't prefer ESM.</span>
    <span class="s2">const </span><span class="s1">swcDefaultLoader = getSwcLoader({</span>
        <span class="s1">serverComponents: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">esm: </span><span class="s2">false</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">defaultLoaders = {</span>
        <span class="s1">babel: useSWCLoader ? swcDefaultLoader : babelLoader</span>
    <span class="s1">};</span>
    <span class="s2">const </span><span class="s1">appServerLayerLoaders = hasAppDir ? [</span>
        <span class="s4">// When using Babel, we will have to add the SWC loader</span>
        <span class="s4">// as an additional pass to handle RSC correctly.</span>
        <span class="s4">// This will cause some performance overhead but</span>
        <span class="s4">// acceptable as Babel will not be recommended.</span>
        <span class="s1">swcServerLayerLoader,</span>
        <span class="s1">babelLoader,</span>
        <span class="s1">reactCompilerLoader</span>
    <span class="s1">].filter(Boolean) : [];</span>
    <span class="s2">const </span><span class="s1">instrumentLayerLoaders = [</span>
        <span class="s0">'next-flight-loader'</span><span class="s1">,</span>
        <span class="s4">// When using Babel, we will have to add the SWC loader</span>
        <span class="s4">// as an additional pass to handle RSC correctly.</span>
        <span class="s4">// This will cause some performance overhead but</span>
        <span class="s4">// acceptable as Babel will not be recommended.</span>
        <span class="s1">swcServerLayerLoader,</span>
        <span class="s1">babelLoader</span>
    <span class="s1">].filter(Boolean);</span>
    <span class="s2">const </span><span class="s1">middlewareLayerLoaders = [</span>
        <span class="s0">'next-flight-loader'</span><span class="s1">,</span>
        <span class="s4">// When using Babel, we will have to use SWC to do the optimization</span>
        <span class="s4">// for middleware to tree shake the unused default optimized imports like &quot;next/server&quot;.</span>
        <span class="s4">// This will cause some performance overhead but</span>
        <span class="s4">// acceptable as Babel will not be recommended.</span>
        <span class="s1">getSwcLoader({</span>
            <span class="s1">serverComponents: </span><span class="s2">true</span><span class="s1">,</span>
            <span class="s1">bundleLayer: _constants.WEBPACK_LAYERS.middleware</span>
        <span class="s1">}),</span>
        <span class="s1">babelLoader</span>
    <span class="s1">].filter(Boolean);</span>
    <span class="s2">const </span><span class="s1">reactRefreshLoaders = dev &amp;&amp; isClient ? [</span>
        <span class="s1">getReactRefreshLoader()</span>
    <span class="s1">] : [];</span>
    <span class="s4">// client components layers: SSR or browser</span>
    <span class="s2">const </span><span class="s1">createClientLayerLoader = ({ isBrowserLayer, reactRefresh })=&gt;[</span>
            <span class="s1">...reactRefresh ? reactRefreshLoaders : [],</span>
            <span class="s1">{</span>
                <span class="s4">// This loader handles actions and client entries</span>
                <span class="s4">// in the client layer.</span>
                <span class="s1">loader: </span><span class="s0">'next-flight-client-module-loader'</span>
            <span class="s1">},</span>
            <span class="s1">...hasAppDir ? [</span>
                <span class="s4">// When using Babel, we will have to add the SWC loader</span>
                <span class="s4">// as an additional pass to handle RSC correctly.</span>
                <span class="s4">// This will cause some performance overhead but</span>
                <span class="s4">// acceptable as Babel will not be recommended.</span>
                <span class="s1">isBrowserLayer ? swcBrowserLayerLoader : swcSSRLayerLoader,</span>
                <span class="s1">babelLoader,</span>
                <span class="s1">reactCompilerLoader</span>
            <span class="s1">].filter(Boolean) : []</span>
        <span class="s1">];</span>
    <span class="s2">const </span><span class="s1">appBrowserLayerLoaders = createClientLayerLoader({</span>
        <span class="s1">isBrowserLayer: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s4">// reactRefresh for browser layer is applied conditionally to user-land source</span>
        <span class="s1">reactRefresh: </span><span class="s2">false</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">appSSRLayerLoaders = createClientLayerLoader({</span>
        <span class="s1">isBrowserLayer: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">reactRefresh: </span><span class="s2">true</span>
    <span class="s1">});</span>
    <span class="s4">// Loader for API routes needs to be differently configured as it shouldn't</span>
    <span class="s4">// have RSC transpiler enabled, so syntax checks such as invalid imports won't</span>
    <span class="s4">// be performed.</span>
    <span class="s2">const </span><span class="s1">apiRoutesLayerLoaders = useSWCLoader ? getSwcLoader({</span>
        <span class="s1">serverComponents: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">bundleLayer: _constants.WEBPACK_LAYERS.apiNode</span>
    <span class="s1">}) : defaultLoaders.babel;</span>
    <span class="s2">const </span><span class="s1">pageExtensions = config.pageExtensions;</span>
    <span class="s2">const </span><span class="s1">outputPath = isNodeOrEdgeCompilation ? _path.default.join(distDir, _constants1.SERVER_DIRECTORY) : distDir;</span>
    <span class="s2">const </span><span class="s1">reactServerCondition = [</span>
        <span class="s0">'react-server'</span><span class="s1">,</span>
        <span class="s1">...isEdgeServer ? _resolve.edgeConditionNames : [],</span>
        <span class="s4">// inherits the default conditions</span>
        <span class="s0">'...'</span>
    <span class="s1">];</span>
    <span class="s2">const </span><span class="s1">reactRefreshEntry = isRspack ? (</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackReactRefresh)().entry : require.resolve(</span><span class="s0">`next/dist/compiled/@next/react-refresh-utils/dist/runtime`</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">clientEntries = isClient ? {</span>
        <span class="s4">// Backwards compatibility</span>
        <span class="s0">'main.js'</span><span class="s1">: [],</span>
        <span class="s1">...dev ? {</span>
            <span class="s1">[_constants1.CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]: reactRefreshEntry,</span>
            <span class="s1">[_constants1.CLIENT_STATIC_FILES_RUNTIME_AMP]: </span><span class="s0">`./` </span><span class="s1">+ _path.default.relative(dir, _path.default.join(_nextdirpaths.NEXT_PROJECT_ROOT_DIST_CLIENT, </span><span class="s0">'dev'</span><span class="s1">, </span><span class="s0">'amp-dev'</span><span class="s1">)).replace(</span><span class="s5">/\\/g</span><span class="s1">, </span><span class="s0">'/'</span><span class="s1">)</span>
        <span class="s1">} : {},</span>
        <span class="s1">[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN]: </span><span class="s0">`./` </span><span class="s1">+ _path.default.relative(dir, _path.default.join(_nextdirpaths.NEXT_PROJECT_ROOT_DIST_CLIENT, dev ? </span><span class="s0">`next-dev.js` </span><span class="s1">: </span><span class="s0">'next.js'</span><span class="s1">)).replace(</span><span class="s5">/\\/g</span><span class="s1">, </span><span class="s0">'/'</span><span class="s1">),</span>
        <span class="s1">...hasAppDir ? {</span>
            <span class="s1">[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP]: dev ? [</span>
                <span class="s1">reactRefreshEntry,</span>
                <span class="s0">`./` </span><span class="s1">+ _path.default.relative(dir, _path.default.join(_nextdirpaths.NEXT_PROJECT_ROOT_DIST_CLIENT, </span><span class="s0">'app-next-dev.js'</span><span class="s1">)).replace(</span><span class="s5">/\\/g</span><span class="s1">, </span><span class="s0">'/'</span><span class="s1">)</span>
            <span class="s1">] : [</span>
                <span class="s0">`./` </span><span class="s1">+ _path.default.relative(dir, _path.default.join(_nextdirpaths.NEXT_PROJECT_ROOT_DIST_CLIENT, </span><span class="s0">'app-next.js'</span><span class="s1">)).replace(</span><span class="s5">/\\/g</span><span class="s1">, </span><span class="s0">'/'</span><span class="s1">)</span>
            <span class="s1">]</span>
        <span class="s1">} : {}</span>
    <span class="s1">} : undefined;</span>
    <span class="s2">const </span><span class="s1">resolveConfig = {</span>
        <span class="s4">// Disable .mjs for node_modules bundling</span>
        <span class="s1">extensions: [</span>
            <span class="s0">'.js'</span><span class="s1">,</span>
            <span class="s0">'.mjs'</span><span class="s1">,</span>
            <span class="s0">'.tsx'</span><span class="s1">,</span>
            <span class="s0">'.ts'</span><span class="s1">,</span>
            <span class="s0">'.jsx'</span><span class="s1">,</span>
            <span class="s0">'.json'</span><span class="s1">,</span>
            <span class="s0">'.wasm'</span>
        <span class="s1">],</span>
        <span class="s1">extensionAlias: config.experimental.extensionAlias,</span>
        <span class="s1">modules: [</span>
            <span class="s0">'node_modules'</span><span class="s1">,</span>
            <span class="s1">...nodePathList</span>
        <span class="s1">],</span>
        <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createWebpackAliases)({</span>
            <span class="s1">distDir,</span>
            <span class="s1">isClient,</span>
            <span class="s1">isEdgeServer,</span>
            <span class="s1">dev,</span>
            <span class="s1">config,</span>
            <span class="s1">pagesDir,</span>
            <span class="s1">appDir,</span>
            <span class="s1">dir,</span>
            <span class="s1">reactProductionProfiling</span>
        <span class="s1">}),</span>
        <span class="s1">...isClient ? {</span>
            <span class="s1">fallback: {</span>
                <span class="s1">process: require.resolve(</span><span class="s0">'./polyfills/process'</span><span class="s1">)</span>
            <span class="s1">}</span>
        <span class="s1">} : undefined,</span>
        <span class="s4">// default main fields use pages dir ones, and customize app router ones in loaders.</span>
        <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">false</span><span class="s1">),</span>
        <span class="s1">...isEdgeServer &amp;&amp; {</span>
            <span class="s1">conditionNames: _resolve.edgeConditionNames</span>
        <span class="s1">},</span>
        <span class="s1">plugins: [</span>
            <span class="s1">isNodeServer ? </span><span class="s2">new </span><span class="s1">_optionalpeerdependencyresolveplugin.OptionalPeerDependencyResolverPlugin() : undefined</span>
        <span class="s1">].filter(Boolean),</span>
        <span class="s1">...isRspack &amp;&amp; jsConfigPath ? {</span>
            <span class="s4">// Skip paths that are routed to a .d.ts file</span>
            <span class="s1">restrictions: [</span>
                <span class="s5">/^(?!.*\.d\.ts$).*$/</span>
            <span class="s1">],</span>
            <span class="s1">tsConfig: {</span>
                <span class="s1">configFile: jsConfigPath</span>
            <span class="s1">}</span>
        <span class="s1">} : {}</span>
    <span class="s1">};</span>
    <span class="s4">// Packages which will be split into the 'framework' chunk.</span>
    <span class="s4">// Only top-level packages are included, e.g. nested copies like</span>
    <span class="s4">// 'node_modules/meow/node_modules/object-assign' are not included.</span>
    <span class="s2">const </span><span class="s1">nextFrameworkPaths = [];</span>
    <span class="s2">const </span><span class="s1">topLevelFrameworkPaths = [];</span>
    <span class="s2">const </span><span class="s1">visitedFrameworkPackages = </span><span class="s2">new </span><span class="s1">Set();</span>
    <span class="s4">// Adds package-paths of dependencies recursively</span>
    <span class="s2">const </span><span class="s1">addPackagePath = (packageName, relativeToPath, paths)=&gt;{</span>
        <span class="s2">try </span><span class="s1">{</span>
            <span class="s2">if </span><span class="s1">(visitedFrameworkPackages.has(packageName)) {</span>
                <span class="s2">return</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s1">visitedFrameworkPackages.add(packageName);</span>
            <span class="s2">const </span><span class="s1">packageJsonPath = require.resolve(</span><span class="s0">`</span><span class="s1">${packageName}</span><span class="s0">/package.json`</span><span class="s1">, {</span>
                <span class="s1">paths: [</span>
                    <span class="s1">relativeToPath</span>
                <span class="s1">]</span>
            <span class="s1">});</span>
            <span class="s4">// Include a trailing slash so that a `.startsWith(packagePath)` check avoids false positives</span>
            <span class="s4">// when one package name starts with the full name of a different package.</span>
            <span class="s4">// For example:</span>
            <span class="s4">//   &quot;node_modules/react-slider&quot;.startsWith(&quot;node_modules/react&quot;)  // true</span>
            <span class="s4">//   &quot;node_modules/react-slider&quot;.startsWith(&quot;node_modules/react/&quot;) // false</span>
            <span class="s2">const </span><span class="s1">directory = _path.default.join(packageJsonPath, </span><span class="s0">'../'</span><span class="s1">);</span>
            <span class="s4">// Returning from the function in case the directory has already been added and traversed</span>
            <span class="s2">if </span><span class="s1">(paths.includes(directory)) </span><span class="s2">return</span><span class="s1">;</span>
            <span class="s1">paths.push(directory);</span>
            <span class="s2">const </span><span class="s1">dependencies = require(packageJsonPath).dependencies || {};</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">name of Object.keys(dependencies)){</span>
                <span class="s1">addPackagePath(name, directory, paths);</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(_) {</span>
        <span class="s4">// don't error on failing to resolve framework packages</span>
        <span class="s1">}</span>
    <span class="s1">};</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">packageName of [</span>
        <span class="s0">'react'</span><span class="s1">,</span>
        <span class="s0">'react-dom'</span><span class="s1">,</span>
        <span class="s1">...hasAppDir ? [</span>
            <span class="s0">`next/dist/compiled/react</span><span class="s1">${bundledReactChannel}</span><span class="s0">`</span><span class="s1">,</span>
            <span class="s0">`next/dist/compiled/react-dom</span><span class="s1">${bundledReactChannel}</span><span class="s0">`</span>
        <span class="s1">] : []</span>
    <span class="s1">]){</span>
        <span class="s1">addPackagePath(packageName, dir, topLevelFrameworkPaths);</span>
    <span class="s1">}</span>
    <span class="s1">addPackagePath(</span><span class="s0">'next'</span><span class="s1">, dir, nextFrameworkPaths);</span>
    <span class="s2">const </span><span class="s1">crossOrigin = config.crossOrigin;</span>
    <span class="s4">// The `serverExternalPackages` should not conflict with</span>
    <span class="s4">// the `transpilePackages`.</span>
    <span class="s2">if </span><span class="s1">(config.serverExternalPackages &amp;&amp; finalTranspilePackages) {</span>
        <span class="s2">const </span><span class="s1">externalPackageConflicts = finalTranspilePackages.filter((pkg)=&gt;{</span>
            <span class="s2">var </span><span class="s1">_config_serverExternalPackages;</span>
            <span class="s2">return </span><span class="s1">(_config_serverExternalPackages = config.serverExternalPackages) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_serverExternalPackages.includes(pkg);</span>
        <span class="s1">});</span>
        <span class="s2">if </span><span class="s1">(externalPackageConflicts.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
            <span class="s2">throw </span><span class="s1">Object.defineProperty(</span><span class="s2">new </span><span class="s1">Error(</span><span class="s0">`The packages specified in the 'transpilePackages' conflict with the 'serverExternalPackages': </span><span class="s1">${externalPackageConflicts.join(</span><span class="s0">', '</span><span class="s1">)}</span><span class="s0">`</span><span class="s1">), </span><span class="s0">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s1">, {</span>
                <span class="s1">value: </span><span class="s0">&quot;E173&quot;</span><span class="s1">,</span>
                <span class="s1">enumerable: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">configurable: </span><span class="s2">true</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// For original request, such as `package name`</span>
    <span class="s2">const </span><span class="s1">optOutBundlingPackages = EXTERNAL_PACKAGES.concat(...config.serverExternalPackages || []).filter((pkg)=&gt;!(finalTranspilePackages == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: finalTranspilePackages.includes(pkg)));</span>
    <span class="s4">// For resolved request, such as `absolute path/package name/foo/bar.js`</span>
    <span class="s2">const </span><span class="s1">optOutBundlingPackageRegex = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`[/</span><span class="s6">\\\\</span><span class="s0">]node_modules[/</span><span class="s6">\\\\</span><span class="s0">](</span><span class="s1">${optOutBundlingPackages.map((p)=&gt;p.replace(</span><span class="s5">/\//g</span><span class="s1">, </span><span class="s0">'[/</span><span class="s6">\\\\</span><span class="s0">]'</span><span class="s1">)).join(</span><span class="s0">'|'</span><span class="s1">)}</span><span class="s0">)[/</span><span class="s6">\\\\</span><span class="s0">]`</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">transpilePackagesRegex = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`[/</span><span class="s6">\\\\</span><span class="s0">]node_modules[/</span><span class="s6">\\\\</span><span class="s0">](</span><span class="s1">${finalTranspilePackages == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: finalTranspilePackages.map((p)=&gt;p.replace(</span><span class="s5">/\//g</span><span class="s1">, </span><span class="s0">'[/</span><span class="s6">\\\\</span><span class="s0">]'</span><span class="s1">)).join(</span><span class="s0">'|'</span><span class="s1">)}</span><span class="s0">)[/</span><span class="s6">\\\\</span><span class="s0">]`</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">handleExternals = (</span><span class="s3">0</span><span class="s1">, _handleexternals.makeExternalHandler)({</span>
        <span class="s1">config,</span>
        <span class="s1">optOutBundlingPackageRegex,</span>
        <span class="s1">transpiledPackages: finalTranspilePackages,</span>
        <span class="s1">dir</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">pageExtensionsRegex = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`</span><span class="s6">\\</span><span class="s0">.(</span><span class="s1">${pageExtensions.join(</span><span class="s0">'|'</span><span class="s1">)}</span><span class="s0">)$`</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">aliasCodeConditionTest = [</span>
        <span class="s1">codeCondition.test,</span>
        <span class="s1">pageExtensionsRegex</span>
    <span class="s1">];</span>
    <span class="s2">const </span><span class="s1">builtinModules = require(</span><span class="s0">'module'</span><span class="s1">).builtinModules;</span>
    <span class="s2">const </span><span class="s1">bunExternals = [</span>
        <span class="s0">'bun:ffi'</span><span class="s1">,</span>
        <span class="s0">'bun:jsc'</span><span class="s1">,</span>
        <span class="s0">'bun:sqlite'</span><span class="s1">,</span>
        <span class="s0">'bun:test'</span><span class="s1">,</span>
        <span class="s0">'bun:wrap'</span><span class="s1">,</span>
        <span class="s0">'bun'</span>
    <span class="s1">];</span>
    <span class="s2">const </span><span class="s1">shouldEnableSlowModuleDetection = !!config.experimental.slowModuleDetection &amp;&amp; dev;</span>
    <span class="s2">const </span><span class="s1">getParallelism = ()=&gt;{</span>
        <span class="s2">const </span><span class="s1">override = Number(process.env.NEXT_WEBPACK_PARALLELISM);</span>
        <span class="s2">if </span><span class="s1">(shouldEnableSlowModuleDetection) {</span>
            <span class="s2">if </span><span class="s1">(override) {</span>
                <span class="s1">console.warn(</span><span class="s0">'NEXT_WEBPACK_PARALLELISM is specified but will be ignored due to experimental.slowModuleDetection being enabled.'</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s2">return </span><span class="s3">1</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">return </span><span class="s1">override || undefined;</span>
    <span class="s1">};</span>
    <span class="s2">const </span><span class="s1">telemetryPlugin = !dev &amp;&amp; isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">(require(</span><span class="s0">'./webpack/plugins/telemetry-plugin/telemetry-plugin'</span><span class="s1">)).TelemetryPlugin(</span><span class="s2">new </span><span class="s1">Map([</span>
        <span class="s1">[</span>
            <span class="s0">'swcLoader'</span><span class="s1">,</span>
            <span class="s1">useSWCLoader</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcRelay'</span><span class="s1">,</span>
            <span class="s1">!!((_config_compiler = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler.relay)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcStyledComponents'</span><span class="s1">,</span>
            <span class="s1">!!((_config_compiler1 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler1.styledComponents)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcReactRemoveProperties'</span><span class="s1">,</span>
            <span class="s1">!!((_config_compiler2 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler2.reactRemoveProperties)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcExperimentalDecorators'</span><span class="s1">,</span>
            <span class="s1">!!(jsConfig == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_jsConfig_compilerOptions = jsConfig.compilerOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _jsConfig_compilerOptions.experimentalDecorators)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcRemoveConsole'</span><span class="s1">,</span>
            <span class="s1">!!((_config_compiler3 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler3.removeConsole)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcImportSource'</span><span class="s1">,</span>
            <span class="s1">!!(jsConfig == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_jsConfig_compilerOptions1 = jsConfig.compilerOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _jsConfig_compilerOptions1.jsxImportSource)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'swcEmotion'</span><span class="s1">,</span>
            <span class="s1">!!((_config_compiler4 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler4.emotion)</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'transpilePackages'</span><span class="s1">,</span>
            <span class="s1">!!config.transpilePackages</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'skipMiddlewareUrlNormalize'</span><span class="s1">,</span>
            <span class="s1">!!config.skipMiddlewareUrlNormalize</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'skipTrailingSlashRedirect'</span><span class="s1">,</span>
            <span class="s1">!!config.skipTrailingSlashRedirect</span>
        <span class="s1">],</span>
        <span class="s1">[</span>
            <span class="s0">'modularizeImports'</span><span class="s1">,</span>
            <span class="s1">!!config.modularizeImports</span>
        <span class="s1">],</span>
        <span class="s4">// If esmExternals is not same as default value, it represents customized usage</span>
        <span class="s1">[</span>
            <span class="s0">'esmExternals'</span><span class="s1">,</span>
            <span class="s1">config.experimental.esmExternals !== </span><span class="s2">true</span>
        <span class="s1">],</span>
        <span class="s1">SWCBinaryTarget</span>
    <span class="s1">].filter(Boolean)));</span>
    <span class="s2">let </span><span class="s1">webpackConfig = {</span>
        <span class="s1">parallelism: getParallelism(),</span>
        <span class="s1">...isNodeServer ? {</span>
            <span class="s1">externalsPresets: {</span>
                <span class="s1">node: </span><span class="s2">true</span>
            <span class="s1">}</span>
        <span class="s1">} : {},</span>
        <span class="s4">// @ts-ignore</span>
        <span class="s1">externals: isClient || isEdgeServer ? </span><span class="s4">// bundles in case a user imported types and it wasn't removed</span>
        <span class="s4">// TODO: should we warn/error for this instead?</span>
        <span class="s1">[</span>
            <span class="s0">'next'</span><span class="s1">,</span>
            <span class="s1">...isEdgeServer ? [</span>
                <span class="s1">{</span>
                    <span class="s0">'@builder.io/partytown'</span><span class="s1">: </span><span class="s0">'{}'</span><span class="s1">,</span>
                    <span class="s0">'next/dist/compiled/etag'</span><span class="s1">: </span><span class="s0">'{}'</span>
                <span class="s1">},</span>
                <span class="s1">(</span><span class="s3">0</span><span class="s1">, _middlewareplugin.getEdgePolyfilledModules)(),</span>
                <span class="s1">_middlewareplugin.handleWebpackExternalForEdgeRuntime</span>
            <span class="s1">] : []</span>
        <span class="s1">] : [</span>
            <span class="s1">...builtinModules,</span>
            <span class="s1">...bunExternals,</span>
            <span class="s1">({ context, request, dependencyType, contextInfo, getResolve })=&gt;handleExternals(context, request, dependencyType, contextInfo.issuerLayer, (options)=&gt;{</span>
                    <span class="s2">const </span><span class="s1">resolveFunction = getResolve(options);</span>
                    <span class="s2">return </span><span class="s1">(resolveContext, requestToResolve)=&gt;</span><span class="s2">new </span><span class="s1">Promise((resolve, reject)=&gt;{</span>
                            <span class="s1">resolveFunction(resolveContext, requestToResolve, (err, result, resolveData)=&gt;{</span>
                                <span class="s2">var </span><span class="s1">_resolveData_descriptionFileData;</span>
                                <span class="s2">if </span><span class="s1">(err) </span><span class="s2">return </span><span class="s1">reject(err);</span>
                                <span class="s2">if </span><span class="s1">(!result) </span><span class="s2">return </span><span class="s1">resolve([</span>
                                    <span class="s2">null</span><span class="s1">,</span>
                                    <span class="s2">false</span>
                                <span class="s1">]);</span>
                                <span class="s2">const </span><span class="s1">isEsm = </span><span class="s5">/\.js$/i</span><span class="s1">.test(result) ? (resolveData == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_resolveData_descriptionFileData = resolveData.descriptionFileData) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _resolveData_descriptionFileData.type) === </span><span class="s0">'module' </span><span class="s1">: </span><span class="s5">/\.mjs$/i</span><span class="s1">.test(result);</span>
                                <span class="s1">resolve([</span>
                                    <span class="s1">result,</span>
                                    <span class="s1">isEsm</span>
                                <span class="s1">]);</span>
                            <span class="s1">});</span>
                        <span class="s1">});</span>
                <span class="s1">})</span>
        <span class="s1">],</span>
        <span class="s1">optimization: {</span>
            <span class="s1">emitOnErrors: !dev,</span>
            <span class="s1">checkWasmTypes: </span><span class="s2">false</span><span class="s1">,</span>
            <span class="s1">nodeEnv: </span><span class="s2">false</span><span class="s1">,</span>
            <span class="s1">splitChunks: (()=&gt;{</span>
                <span class="s4">// server chunking</span>
                <span class="s2">if </span><span class="s1">(dev) {</span>
                    <span class="s2">if </span><span class="s1">(isNodeServer) {</span>
                        <span class="s4">/* 
              In development, we want to split code that comes from `node_modules` into their own chunks. 
              This is because in development, we often need to reload the user bundle due to changes in the code. 
              To work around this, we put all the vendor code into separate chunks so that we don't need to reload them. 
              This is safe because the vendor code doesn't change between reloads. 
            */ </span><span class="s2">const </span><span class="s1">extractRootNodeModule = (modulePath)=&gt;{</span>
                            <span class="s4">// This regex is used to extract the root node module name to be used as the chunk group name.</span>
                            <span class="s4">// example: ../../node_modules/.pnpm/next@10/foo/node_modules/bar -&gt; next@10</span>
                            <span class="s2">const </span><span class="s1">regex = </span><span class="s5">/node_modules(?:\/|\\)\.?(?:pnpm(?:\/|\\))?([^/\\]+)/</span><span class="s1">;</span>
                            <span class="s2">const </span><span class="s1">match = modulePath.match(regex);</span>
                            <span class="s2">return </span><span class="s1">match ? match[</span><span class="s3">1</span><span class="s1">] : </span><span class="s2">null</span><span class="s1">;</span>
                        <span class="s1">};</span>
                        <span class="s2">return </span><span class="s1">{</span>
                            <span class="s1">cacheGroups: {</span>
                                <span class="s4">// this chunk configuration gives us a separate chunk for each top level module in node_modules</span>
                                <span class="s4">// or a hashed chunk if we can't extract the module name.</span>
                                <span class="s1">vendor: {</span>
                                    <span class="s1">chunks: </span><span class="s0">'all'</span><span class="s1">,</span>
                                    <span class="s1">reuseExistingChunk: </span><span class="s2">true</span><span class="s1">,</span>
                                    <span class="s1">test: </span><span class="s5">/[\\/]node_modules[\\/]/</span><span class="s1">,</span>
                                    <span class="s1">minSize: </span><span class="s3">0</span><span class="s1">,</span>
                                    <span class="s1">minChunks: </span><span class="s3">1</span><span class="s1">,</span>
                                    <span class="s1">maxAsyncRequests: </span><span class="s3">300</span><span class="s1">,</span>
                                    <span class="s1">maxInitialRequests: </span><span class="s3">300</span><span class="s1">,</span>
                                    <span class="s1">name: (module1)=&gt;{</span>
                                        <span class="s2">const </span><span class="s1">moduleId = module1.nameForCondition();</span>
                                        <span class="s2">const </span><span class="s1">rootModule = extractRootNodeModule(moduleId);</span>
                                        <span class="s2">if </span><span class="s1">(rootModule) {</span>
                                            <span class="s2">return </span><span class="s0">`vendor-chunks/</span><span class="s1">${rootModule}</span><span class="s0">`</span><span class="s1">;</span>
                                        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                                            <span class="s2">const </span><span class="s1">hash = _crypto.default.createHash(</span><span class="s0">'sha1'</span><span class="s1">).update(moduleId);</span>
                                            <span class="s1">hash.update(moduleId);</span>
                                            <span class="s2">return </span><span class="s0">`vendor-chunks/</span><span class="s1">${hash.digest(</span><span class="s0">'hex'</span><span class="s1">)}</span><span class="s0">`</span><span class="s1">;</span>
                                        <span class="s1">}</span>
                                    <span class="s1">}</span>
                                <span class="s1">},</span>
                                <span class="s4">// disable the default chunk groups</span>
                                <span class="s2">default</span><span class="s1">: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">defaultVendors: </span><span class="s2">false</span>
                            <span class="s1">}</span>
                        <span class="s1">};</span>
                    <span class="s1">}</span>
                    <span class="s2">return false</span><span class="s1">;</span>
                <span class="s1">}</span>
                <span class="s2">if </span><span class="s1">(isNodeServer || isEdgeServer) {</span>
                    <span class="s2">return </span><span class="s1">{</span>
                        <span class="s1">filename: </span><span class="s0">`</span><span class="s1">${isEdgeServer ? </span><span class="s0">`edge-chunks/` </span><span class="s1">: </span><span class="s0">''</span><span class="s1">}</span><span class="s0">[name].js`</span><span class="s1">,</span>
                        <span class="s1">chunks: </span><span class="s0">'all'</span><span class="s1">,</span>
                        <span class="s1">minChunks: </span><span class="s3">2</span>
                    <span class="s1">};</span>
                <span class="s1">}</span>
                <span class="s2">const </span><span class="s1">frameworkCacheGroup = {</span>
                    <span class="s1">chunks: </span><span class="s0">'all'</span><span class="s1">,</span>
                    <span class="s1">name: </span><span class="s0">'framework'</span><span class="s1">,</span>
                    <span class="s4">// Ensures the framework chunk is not created for App Router.</span>
                    <span class="s1">layer: _utils.isWebpackDefaultLayer,</span>
                    <span class="s1">test (module1) {</span>
                        <span class="s2">const </span><span class="s1">resource = module1.nameForCondition == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: module1.nameForCondition.call(module1);</span>
                        <span class="s2">return </span><span class="s1">resource ? topLevelFrameworkPaths.some((pkgPath)=&gt;resource.startsWith(pkgPath)) : </span><span class="s2">false</span><span class="s1">;</span>
                    <span class="s1">},</span>
                    <span class="s1">priority: </span><span class="s3">40</span><span class="s1">,</span>
                    <span class="s4">// Don't let webpack eliminate this chunk (prevents this chunk from</span>
                    <span class="s4">// becoming a part of the commons chunk)</span>
                    <span class="s1">enforce: </span><span class="s2">true</span>
                <span class="s1">};</span>
                <span class="s2">const </span><span class="s1">libCacheGroup = {</span>
                    <span class="s1">test (module1) {</span>
                        <span class="s2">var </span><span class="s1">_module_type;</span>
                        <span class="s2">return </span><span class="s1">!((_module_type = module1.type) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _module_type.startsWith(</span><span class="s0">'css'</span><span class="s1">)) &amp;&amp; module1.size() &gt; </span><span class="s3">160000 </span><span class="s1">&amp;&amp; </span><span class="s5">/node_modules[/\\]/</span><span class="s1">.test(module1.nameForCondition() || </span><span class="s0">''</span><span class="s1">);</span>
                    <span class="s1">},</span>
                    <span class="s1">name (module1) {</span>
                        <span class="s2">const </span><span class="s1">hash = _crypto.default.createHash(</span><span class="s0">'sha1'</span><span class="s1">);</span>
                        <span class="s2">if </span><span class="s1">(isModuleCSS(module1)) {</span>
                            <span class="s1">module1.updateHash(hash);</span>
                        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                            <span class="s2">if </span><span class="s1">(!module1.libIdent) {</span>
                                <span class="s2">throw </span><span class="s1">Object.defineProperty(</span><span class="s2">new </span><span class="s1">Error(</span><span class="s0">`Encountered unknown module type: </span><span class="s1">${module1.type}</span><span class="s0">. Please open an issue.`</span><span class="s1">), </span><span class="s0">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s1">, {</span>
                                    <span class="s1">value: </span><span class="s0">&quot;E487&quot;</span><span class="s1">,</span>
                                    <span class="s1">enumerable: </span><span class="s2">false</span><span class="s1">,</span>
                                    <span class="s1">configurable: </span><span class="s2">true</span>
                                <span class="s1">});</span>
                            <span class="s1">}</span>
                            <span class="s1">hash.update(module1.libIdent({</span>
                                <span class="s1">context: dir</span>
                            <span class="s1">}));</span>
                        <span class="s1">}</span>
                        <span class="s4">// Ensures the name of the chunk is not the same between two modules in different layers</span>
                        <span class="s4">// E.g. if you import 'button-library' in App Router and Pages Router we don't want these to be bundled in the same chunk</span>
                        <span class="s4">// as they're never used on the same page.</span>
                        <span class="s2">if </span><span class="s1">(module1.layer) {</span>
                            <span class="s1">hash.update(module1.layer);</span>
                        <span class="s1">}</span>
                        <span class="s2">return </span><span class="s1">hash.digest(</span><span class="s0">'hex'</span><span class="s1">).substring(</span><span class="s3">0</span><span class="s1">, </span><span class="s3">8</span><span class="s1">);</span>
                    <span class="s1">},</span>
                    <span class="s1">priority: </span><span class="s3">30</span><span class="s1">,</span>
                    <span class="s1">minChunks: </span><span class="s3">1</span><span class="s1">,</span>
                    <span class="s1">reuseExistingChunk: </span><span class="s2">true</span>
                <span class="s1">};</span>
                <span class="s4">// client chunking</span>
                <span class="s2">return </span><span class="s1">{</span>
                    <span class="s4">// Keep main and _app chunks unsplitted in webpack 5</span>
                    <span class="s4">// as we don't need a separate vendor chunk from that</span>
                    <span class="s4">// and all other chunk depend on them so there is no</span>
                    <span class="s4">// duplication that need to be pulled out.</span>
                    <span class="s1">chunks: isRspack ? </span><span class="s4">// in rspack</span>
                    <span class="s5">/(?!polyfills|main|pages\/_app)/ </span><span class="s1">: (chunk)=&gt;!</span><span class="s5">/^(polyfills|main|pages\/_app)$/</span><span class="s1">.test(chunk.name),</span>
                    <span class="s1">cacheGroups: isRspack ? {</span>
                        <span class="s1">framework: {</span>
                            <span class="s1">chunks: </span><span class="s0">'all'</span><span class="s1">,</span>
                            <span class="s1">name: </span><span class="s0">'framework'</span><span class="s1">,</span>
                            <span class="s1">layer: _utils.RSPACK_DEFAULT_LAYERS_REGEX,</span>
                            <span class="s1">test: </span><span class="s5">/[/]node_modules[/](react|react-dom|next[/]dist[/]compiled[/](react|react-dom)(-experimental)?)[/]/</span><span class="s1">,</span>
                            <span class="s1">priority: </span><span class="s3">40</span><span class="s1">,</span>
                            <span class="s1">enforce: </span><span class="s2">true</span>
                        <span class="s1">},</span>
                        <span class="s1">lib: {</span>
                            <span class="s1">test: </span><span class="s5">/[/]node_modules[/](?!.*\.(css|scss|sass|less|styl)$)/</span><span class="s1">,</span>
                            <span class="s1">name: </span><span class="s0">'lib'</span><span class="s1">,</span>
                            <span class="s1">chunks: </span><span class="s0">'all'</span><span class="s1">,</span>
                            <span class="s1">priority: </span><span class="s3">30</span><span class="s1">,</span>
                            <span class="s1">minChunks: </span><span class="s3">1</span><span class="s1">,</span>
                            <span class="s1">reuseExistingChunk: </span><span class="s2">true</span>
                        <span class="s1">}</span>
                    <span class="s1">} : {</span>
                        <span class="s1">framework: frameworkCacheGroup,</span>
                        <span class="s1">lib: libCacheGroup</span>
                    <span class="s1">},</span>
                    <span class="s1">maxInitialRequests: </span><span class="s3">25</span><span class="s1">,</span>
                    <span class="s1">minSize: </span><span class="s3">20000</span>
                <span class="s1">};</span>
            <span class="s1">})(),</span>
            <span class="s1">runtimeChunk: isClient ? {</span>
                <span class="s1">name: _constants1.CLIENT_STATIC_FILES_RUNTIME_WEBPACK</span>
            <span class="s1">} : undefined,</span>
            <span class="s1">minimize: !dev &amp;&amp; (isClient || isEdgeServer || isNodeServer &amp;&amp; config.experimental.serverMinification),</span>
            <span class="s1">minimizer: [</span>
                <span class="s4">// Minify JavaScript</span>
                <span class="s1">isRspack ? </span><span class="s2">new </span><span class="s1">((</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackCore)()).SwcJsMinimizerRspackPlugin({</span>
                    <span class="s4">// JS minimizer configuration</span>
                    <span class="s4">// options should align with crates/napi/src/minify.rs#patch_opts</span>
                    <span class="s1">minimizerOptions: {</span>
                        <span class="s1">compress: {</span>
                            <span class="s1">inline: </span><span class="s3">2</span><span class="s1">,</span>
                            <span class="s1">global_defs: {</span>
                                <span class="s0">'process.env.__NEXT_PRIVATE_MINIMIZE_MACRO_FALSE'</span><span class="s1">: </span><span class="s2">false</span>
                            <span class="s1">}</span>
                        <span class="s1">},</span>
                        <span class="s1">mangle: !noMangling &amp;&amp; {</span>
                            <span class="s1">reserved: [</span>
                                <span class="s0">'AbortSignal'</span>
                            <span class="s1">],</span>
                            <span class="s1">disableCharFreq: !isClient</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">}) : (compiler)=&gt;{</span>
                    <span class="s4">// @ts-ignore No typings yet</span>
                    <span class="s2">const </span><span class="s1">{ MinifyPlugin } = require(</span><span class="s0">'./webpack/plugins/minify-webpack-plugin/src'</span><span class="s1">);</span>
                    <span class="s2">new </span><span class="s1">MinifyPlugin({</span>
                        <span class="s1">noMangling,</span>
                        <span class="s1">disableCharFreq: !isClient</span>
                    <span class="s1">}).apply(compiler);</span>
                <span class="s1">},</span>
                <span class="s4">// Minify CSS</span>
                <span class="s4">// By default, Rspack uses LightningCSS for CSS minification.</span>
                <span class="s4">// Rspack uses css-minimizer-plugin by default for compatibility.</span>
                <span class="s1">isRspack &amp;&amp; (process.env.__NEXT_TEST_MODE ? config.experimental.useLightningcss : ((_config_experimental2 = config.experimental) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental2.useLightningcss) === undefined || config.experimental.useLightningcss) ? </span><span class="s2">new </span><span class="s1">((</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackCore)()).LightningCssMinimizerRspackPlugin({</span>
                    <span class="s4">// CSS minimizer configuration</span>
                    <span class="s1">minimizerOptions: {</span>
                        <span class="s1">targets: supportedBrowsers</span>
                    <span class="s1">}</span>
                <span class="s1">}) : (compiler)=&gt;{</span>
                    <span class="s2">const </span><span class="s1">{ CssMinimizerPlugin } = require(</span><span class="s0">'./webpack/plugins/css-minimizer-plugin'</span><span class="s1">);</span>
                    <span class="s2">new </span><span class="s1">CssMinimizerPlugin({</span>
                        <span class="s1">postcssOptions: {</span>
                            <span class="s1">map: {</span>
                                <span class="s4">// `inline: false` generates the source map in a separate file.</span>
                                <span class="s4">// Otherwise, the CSS file is needlessly large.</span>
                                <span class="s1">inline: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s4">// `annotation: false` skips appending the `sourceMappingURL`</span>
                                <span class="s4">// to the end of the CSS file. Webpack already handles this.</span>
                                <span class="s1">annotation: </span><span class="s2">false</span>
                            <span class="s1">}</span>
                        <span class="s1">}</span>
                    <span class="s1">}).apply(compiler);</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">context: dir,</span>
        <span class="s4">// Kept as function to be backwards compatible</span>
        <span class="s1">entry: async ()=&gt;{</span>
            <span class="s2">return </span><span class="s1">{</span>
                <span class="s1">...clientEntries ? clientEntries : {},</span>
                <span class="s1">...entrypoints</span>
            <span class="s1">};</span>
        <span class="s1">},</span>
        <span class="s1">watchOptions: Object.freeze({</span>
            <span class="s1">...baseWatchOptions,</span>
            <span class="s1">poll: (_config_watchOptions = config.watchOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_watchOptions.pollIntervalMs</span>
        <span class="s1">}),</span>
        <span class="s1">output: {</span>
            <span class="s4">// we must set publicPath to an empty value to override the default of</span>
            <span class="s4">// auto which doesn't work in IE11</span>
            <span class="s1">publicPath: </span><span class="s0">`</span><span class="s1">${config.assetPrefix ? config.assetPrefix.endsWith(</span><span class="s0">'/'</span><span class="s1">) ? config.assetPrefix.slice(</span><span class="s3">0</span><span class="s1">, -</span><span class="s3">1</span><span class="s1">) : config.assetPrefix : </span><span class="s0">''</span><span class="s1">}</span><span class="s0">/_next/`</span><span class="s1">,</span>
            <span class="s1">path: !dev &amp;&amp; isNodeServer ? _path.default.join(outputPath, </span><span class="s0">'chunks'</span><span class="s1">) : outputPath,</span>
            <span class="s4">// On the server we don't use hashes</span>
            <span class="s1">filename: isNodeOrEdgeCompilation ? dev || isEdgeServer ? </span><span class="s0">`[name].js` </span><span class="s1">: </span><span class="s0">`../[name].js` </span><span class="s1">: </span><span class="s0">`static/chunks/</span><span class="s1">${isDevFallback ? </span><span class="s0">'fallback/' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">}</span><span class="s0">[name]</span><span class="s1">${dev ? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">'-[contenthash]'</span><span class="s1">}</span><span class="s0">.js`</span><span class="s1">,</span>
            <span class="s1">library: isClient || isEdgeServer ? </span><span class="s0">'_N_E' </span><span class="s1">: undefined,</span>
            <span class="s1">libraryTarget: isClient || isEdgeServer ? </span><span class="s0">'assign' </span><span class="s1">: </span><span class="s0">'commonjs2'</span><span class="s1">,</span>
            <span class="s1">hotUpdateChunkFilename: </span><span class="s0">'static/webpack/[id].[fullhash].hot-update.js'</span><span class="s1">,</span>
            <span class="s1">hotUpdateMainFilename: </span><span class="s0">'static/webpack/[fullhash].[runtime].hot-update.json'</span><span class="s1">,</span>
            <span class="s4">// This saves chunks with the name given via `import()`</span>
            <span class="s1">chunkFilename: isNodeOrEdgeCompilation ? </span><span class="s0">'[name].js' </span><span class="s1">: </span><span class="s0">`static/chunks/</span><span class="s1">${isDevFallback ? </span><span class="s0">'fallback/' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">}${dev ? </span><span class="s0">'[name]' </span><span class="s1">: </span><span class="s0">'[name].[contenthash]'</span><span class="s1">}</span><span class="s0">.js`</span><span class="s1">,</span>
            <span class="s1">strictModuleExceptionHandling: </span><span class="s2">true</span><span class="s1">,</span>
            <span class="s1">crossOriginLoading: crossOrigin,</span>
            <span class="s4">// if `sources[number]` is not an absolute path, it's is resolved</span>
            <span class="s4">// relative to the location of the source map file (https://tc39.es/source-map/#resolving-sources).</span>
            <span class="s4">// However, Webpack's `resource-path` is relative to the app dir.</span>
            <span class="s4">// TODO: Either `sourceRoot` should be populated with the root and then we can use `[resource-path]`</span>
            <span class="s4">// or we need a way to resolve return `path.relative(sourceMapLocation, info.resourcePath)`</span>
            <span class="s1">devtoolModuleFilenameTemplate: dev ? </span><span class="s0">'[absolute-resource-path]' </span><span class="s1">: undefined,</span>
            <span class="s1">webassemblyModuleFilename: </span><span class="s0">'static/wasm/[modulehash].wasm'</span><span class="s1">,</span>
            <span class="s1">hashFunction: </span><span class="s0">'xxhash64'</span><span class="s1">,</span>
            <span class="s1">hashDigestLength: </span><span class="s3">16</span>
        <span class="s1">},</span>
        <span class="s1">performance: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">resolve: resolveConfig,</span>
        <span class="s1">resolveLoader: {</span>
            <span class="s4">// The loaders Next.js provides</span>
            <span class="s1">alias: [</span>
                <span class="s0">'error-loader'</span><span class="s1">,</span>
                <span class="s0">'next-swc-loader'</span><span class="s1">,</span>
                <span class="s0">'next-client-pages-loader'</span><span class="s1">,</span>
                <span class="s0">'next-image-loader'</span><span class="s1">,</span>
                <span class="s0">'next-metadata-image-loader'</span><span class="s1">,</span>
                <span class="s0">'next-style-loader'</span><span class="s1">,</span>
                <span class="s0">'next-flight-loader'</span><span class="s1">,</span>
                <span class="s0">'next-flight-client-entry-loader'</span><span class="s1">,</span>
                <span class="s0">'next-flight-action-entry-loader'</span><span class="s1">,</span>
                <span class="s0">'next-flight-client-module-loader'</span><span class="s1">,</span>
                <span class="s0">'next-flight-server-reference-proxy-loader'</span><span class="s1">,</span>
                <span class="s0">'empty-loader'</span><span class="s1">,</span>
                <span class="s0">'next-middleware-loader'</span><span class="s1">,</span>
                <span class="s0">'next-edge-function-loader'</span><span class="s1">,</span>
                <span class="s0">'next-edge-app-route-loader'</span><span class="s1">,</span>
                <span class="s0">'next-edge-ssr-loader'</span><span class="s1">,</span>
                <span class="s0">'next-middleware-asset-loader'</span><span class="s1">,</span>
                <span class="s0">'next-middleware-wasm-loader'</span><span class="s1">,</span>
                <span class="s0">'next-app-loader'</span><span class="s1">,</span>
                <span class="s0">'next-route-loader'</span><span class="s1">,</span>
                <span class="s0">'next-font-loader'</span><span class="s1">,</span>
                <span class="s0">'next-invalid-import-error-loader'</span><span class="s1">,</span>
                <span class="s0">'next-metadata-route-loader'</span><span class="s1">,</span>
                <span class="s0">'modularize-import-loader'</span><span class="s1">,</span>
                <span class="s0">'next-barrel-loader'</span><span class="s1">,</span>
                <span class="s0">'next-error-browser-binary-loader'</span><span class="s1">,</span>
                <span class="s0">'next-root-params-loader'</span>
            <span class="s1">].reduce((alias, loader)=&gt;{</span>
                <span class="s4">// using multiple aliases to replace `resolveLoader.modules`</span>
                <span class="s1">alias[loader] = _path.default.join(__dirname, </span><span class="s0">'webpack'</span><span class="s1">, </span><span class="s0">'loaders'</span><span class="s1">, loader);</span>
                <span class="s2">return </span><span class="s1">alias;</span>
            <span class="s1">}, {}),</span>
            <span class="s1">modules: [</span>
                <span class="s0">'node_modules'</span><span class="s1">,</span>
                <span class="s1">...nodePathList</span>
            <span class="s1">],</span>
            <span class="s1">plugins: []</span>
        <span class="s1">},</span>
        <span class="s1">module: {</span>
            <span class="s1">rules: [</span>
                <span class="s4">// Alias server-only and client-only to proper exports based on bundling layers</span>
                <span class="s1">{</span>
                    <span class="s1">issuerLayer: {</span>
                        <span class="s1">or: [</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.serverOnly,</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.neutralTarget</span>
                        <span class="s1">]</span>
                    <span class="s1">},</span>
                    <span class="s1">resolve: {</span>
                        <span class="s4">// Error on client-only but allow server-only</span>
                        <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createServerOnlyClientOnlyAliases)(</span><span class="s2">true</span><span class="s1">)</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">issuerLayer: {</span>
                        <span class="s1">not: [</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.serverOnly,</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.neutralTarget</span>
                        <span class="s1">]</span>
                    <span class="s1">},</span>
                    <span class="s1">resolve: {</span>
                        <span class="s4">// Error on server-only but allow client-only</span>
                        <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createServerOnlyClientOnlyAliases)(</span><span class="s2">false</span><span class="s1">)</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s4">// Detect server-only / client-only imports and error in build time</span>
                <span class="s1">{</span>
                    <span class="s1">test: [</span>
                        <span class="s5">/^client-only$/</span><span class="s1">,</span>
                        <span class="s5">/next[\\/]dist[\\/]compiled[\\/]client-only[\\/]error/</span>
                    <span class="s1">],</span>
                    <span class="s1">loader: </span><span class="s0">'next-invalid-import-error-loader'</span><span class="s1">,</span>
                    <span class="s1">issuerLayer: {</span>
                        <span class="s1">or: _constants.WEBPACK_LAYERS.GROUP.serverOnly</span>
                    <span class="s1">},</span>
                    <span class="s1">options: {</span>
                        <span class="s1">message: </span><span class="s0">&quot;'client-only' cannot be imported from a Server Component module. It should only be used from a Client Component.&quot;</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">test: [</span>
                        <span class="s5">/^server-only$/</span><span class="s1">,</span>
                        <span class="s5">/next[\\/]dist[\\/]compiled[\\/]server-only[\\/]index/</span>
                    <span class="s1">],</span>
                    <span class="s1">loader: </span><span class="s0">'next-invalid-import-error-loader'</span><span class="s1">,</span>
                    <span class="s1">issuerLayer: {</span>
                        <span class="s1">not: [</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.serverOnly,</span>
                            <span class="s1">..._constants.WEBPACK_LAYERS.GROUP.neutralTarget</span>
                        <span class="s1">]</span>
                    <span class="s1">},</span>
                    <span class="s1">options: {</span>
                        <span class="s1">message: </span><span class="s0">&quot;'server-only' cannot be imported from a Client Component module. It should only be used from a Server Component.&quot;</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s4">// Potential the bundle introduced into middleware and api can be poisoned by client-only</span>
                <span class="s4">// but not being used, so we disabled the `client-only` erroring on these layers.</span>
                <span class="s4">// `server-only` is still available.</span>
                <span class="s1">{</span>
                    <span class="s1">test: [</span>
                        <span class="s5">/^client-only$/</span><span class="s1">,</span>
                        <span class="s5">/next[\\/]dist[\\/]compiled[\\/]client-only[\\/]error/</span>
                    <span class="s1">],</span>
                    <span class="s1">loader: </span><span class="s0">'empty-loader'</span><span class="s1">,</span>
                    <span class="s1">issuerLayer: {</span>
                        <span class="s1">or: _constants.WEBPACK_LAYERS.GROUP.neutralTarget</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s1">...isNodeServer ? [] : [</span>
                    <span class="s1">{</span>
                        <span class="s1">test: </span><span class="s5">/[\\/].*?\.node$/</span><span class="s1">,</span>
                        <span class="s1">loader: </span><span class="s0">'next-error-browser-binary-loader'</span>
                    <span class="s1">}</span>
                <span class="s1">],</span>
                <span class="s1">...hasAppDir ? [</span>
                    <span class="s1">{</span>
                        <span class="s4">// Make sure that AsyncLocalStorage module instance is shared between server and client</span>
                        <span class="s4">// layers.</span>
                        <span class="s1">layer: _constants.WEBPACK_LAYERS.shared,</span>
                        <span class="s1">test: asyncStoragesRegex</span>
                    <span class="s1">},</span>
                    <span class="s4">// Convert metadata routes to separate layer</span>
                    <span class="s1">{</span>
                        <span class="s1">resourceQuery: </span><span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadataRoute),</span>
                        <span class="s1">layer: _constants.WEBPACK_LAYERS.reactServerComponents</span>
                    <span class="s1">},</span>
                    <span class="s1">{</span>
                        <span class="s4">// Ensure that the app page module is in the client layers, this</span>
                        <span class="s4">// enables React to work correctly for RSC.</span>
                        <span class="s1">layer: _constants.WEBPACK_LAYERS.serverSideRendering,</span>
                        <span class="s1">test: </span><span class="s5">/next[\\/]dist[\\/](esm[\\/])?server[\\/]route-modules[\\/]app-page[\\/]module/</span>
                    <span class="s1">},</span>
                    <span class="s1">{</span>
                        <span class="s1">issuerLayer: _utils.isWebpackBundledLayer,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createNextApiEsmAliases)()</span>
                        <span class="s1">}</span>
                    <span class="s1">},</span>
                    <span class="s1">{</span>
                        <span class="s1">issuerLayer: _utils.shouldUseReactServerCondition,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createAppRouterApiAliases)(</span><span class="s2">true</span><span class="s1">)</span>
                        <span class="s1">}</span>
                    <span class="s1">},</span>
                    <span class="s1">{</span>
                        <span class="s1">issuerLayer: _utils.isWebpackClientOnlyLayer,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createAppRouterApiAliases)(</span><span class="s2">false</span><span class="s1">)</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">...hasAppDir &amp;&amp; !isClient ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">issuerLayer: _utils.shouldUseReactServerCondition,</span>
                        <span class="s1">test: {</span>
                            <span class="s4">// Resolve it if it is a source code file, and it has NOT been</span>
                            <span class="s4">// opted out of bundling.</span>
                            <span class="s1">and: [</span>
                                <span class="s1">aliasCodeConditionTest,</span>
                                <span class="s1">{</span>
                                    <span class="s1">not: [</span>
                                        <span class="s1">optOutBundlingPackageRegex,</span>
                                        <span class="s1">asyncStoragesRegex</span>
                                    <span class="s1">]</span>
                                <span class="s1">}</span>
                            <span class="s1">]</span>
                        <span class="s1">},</span>
                        <span class="s1">resourceQuery: {</span>
                            <span class="s4">// Do not apply next-flight-loader to imports generated by the</span>
                            <span class="s4">// next-metadata-image-loader, to avoid generating unnecessary</span>
                            <span class="s4">// and conflicting entries in the flight client entry plugin.</span>
                            <span class="s4">// These are already covered by the next-metadata-route-loader</span>
                            <span class="s4">// entries.</span>
                            <span class="s1">not: [</span>
                                <span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadata),</span>
                                <span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadataImageMeta)</span>
                            <span class="s1">]</span>
                        <span class="s1">},</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">),</span>
                            <span class="s1">conditionNames: reactServerCondition,</span>
                            <span class="s4">// If missing the alias override here, the default alias will be used which aliases</span>
                            <span class="s4">// react to the direct file path, not the package name. In that case the condition</span>
                            <span class="s4">// will be ignored completely.</span>
                            <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                <span class="s4">// No server components profiling</span>
                                <span class="s1">reactProductionProfiling,</span>
                                <span class="s1">layer: _constants.WEBPACK_LAYERS.reactServerComponents,</span>
                                <span class="s1">isBrowser: isClient,</span>
                                <span class="s1">isEdgeServer</span>
                            <span class="s1">})</span>
                        <span class="s1">},</span>
                        <span class="s1">use: </span><span class="s0">'next-flight-loader'</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">...getNextRootParamsRules({</span>
                    <span class="s1">isRootParamsEnabled: config.experimental.rootParams ?? </span><span class="s4">// `experimental.dynamicIO` implies `experimental.rootParams`.</span>
                    <span class="s1">config.experimental.cacheComponents ?? </span><span class="s2">false</span><span class="s1">,</span>
                    <span class="s1">isClient,</span>
                    <span class="s1">appDir,</span>
                    <span class="s1">pageExtensions</span>
                <span class="s1">}),</span>
                <span class="s4">// TODO: FIXME: do NOT webpack 5 support with this</span>
                <span class="s4">// x-ref: https://github.com/webpack/webpack/issues/11467</span>
                <span class="s1">...!config.experimental.fullySpecified ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">test: </span><span class="s5">/\.m?js/</span><span class="s1">,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">fullySpecified: </span><span class="s2">false</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">...hasAppDir &amp;&amp; isEdgeServer ? [</span>
                    <span class="s4">// The Edge bundle includes the server in its entrypoint, so it has to</span>
                    <span class="s4">// be in the SSR layer  here we convert the actual page request to</span>
                    <span class="s4">// the RSC layer via a webpack rule.</span>
                    <span class="s1">{</span>
                        <span class="s1">resourceQuery: </span><span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.edgeSSREntry),</span>
                        <span class="s1">layer: _constants.WEBPACK_LAYERS.reactServerComponents</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">...hasAppDir ? [</span>
                    <span class="s1">{</span>
                        <span class="s4">// Alias react-dom for ReactDOM.preload usage.</span>
                        <span class="s4">// Alias react for switching between default set and share subset.</span>
                        <span class="s1">oneOf: [</span>
                            <span class="s1">{</span>
                                <span class="s1">issuerLayer: _utils.shouldUseReactServerCondition,</span>
                                <span class="s1">test: {</span>
                                    <span class="s4">// Resolve it if it is a source code file, and it has NOT been</span>
                                    <span class="s4">// opted out of bundling.</span>
                                    <span class="s1">and: [</span>
                                        <span class="s1">aliasCodeConditionTest,</span>
                                        <span class="s1">{</span>
                                            <span class="s1">not: [</span>
                                                <span class="s1">optOutBundlingPackageRegex,</span>
                                                <span class="s1">asyncStoragesRegex</span>
                                            <span class="s1">]</span>
                                        <span class="s1">}</span>
                                    <span class="s1">]</span>
                                <span class="s1">},</span>
                                <span class="s1">resolve: {</span>
                                    <span class="s4">// It needs `conditionNames` here to require the proper asset,</span>
                                    <span class="s4">// when react is acting as dependency of compiled/react-dom.</span>
                                    <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                        <span class="s1">reactProductionProfiling,</span>
                                        <span class="s1">layer: _constants.WEBPACK_LAYERS.reactServerComponents,</span>
                                        <span class="s1">isBrowser: isClient,</span>
                                        <span class="s1">isEdgeServer</span>
                                    <span class="s1">})</span>
                                <span class="s1">}</span>
                            <span class="s1">},</span>
                            <span class="s1">{</span>
                                <span class="s1">test: aliasCodeConditionTest,</span>
                                <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.serverSideRendering,</span>
                                <span class="s1">resolve: {</span>
                                    <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                        <span class="s1">reactProductionProfiling,</span>
                                        <span class="s1">layer: _constants.WEBPACK_LAYERS.serverSideRendering,</span>
                                        <span class="s1">isBrowser: isClient,</span>
                                        <span class="s1">isEdgeServer</span>
                                    <span class="s1">})</span>
                                <span class="s1">}</span>
                            <span class="s1">}</span>
                        <span class="s1">]</span>
                    <span class="s1">},</span>
                    <span class="s1">{</span>
                        <span class="s1">test: aliasCodeConditionTest,</span>
                        <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.appPagesBrowser,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                <span class="s1">reactProductionProfiling,</span>
                                <span class="s1">layer: _constants.WEBPACK_LAYERS.appPagesBrowser,</span>
                                <span class="s1">isBrowser: isClient,</span>
                                <span class="s1">isEdgeServer</span>
                            <span class="s1">})</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s4">// Do not apply react-refresh-loader to node_modules for app router browser layer</span>
                <span class="s1">...hasAppDir &amp;&amp; dev &amp;&amp; isClient ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">test: codeCondition.test,</span>
                        <span class="s1">exclude: [</span>
                            <span class="s4">// exclude unchanged modules from react-refresh</span>
                            <span class="s1">codeCondition.exclude,</span>
                            <span class="s1">transpilePackagesRegex,</span>
                            <span class="s1">precompileRegex</span>
                        <span class="s1">],</span>
                        <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.appPagesBrowser,</span>
                        <span class="s1">use: reactRefreshLoaders,</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">)</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">{</span>
                    <span class="s1">oneOf: [</span>
                        <span class="s1">{</span>
                            <span class="s1">...codeCondition,</span>
                            <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.apiNode,</span>
                            <span class="s1">use: apiRoutesLayerLoaders,</span>
                            <span class="s4">// In Node.js, switch back to normal URL handling.</span>
                            <span class="s4">// We won't bundle `new URL()` cases in Node.js bundler layer.</span>
                            <span class="s1">parser: {</span>
                                <span class="s1">url: </span><span class="s2">true</span>
                            <span class="s1">}</span>
                        <span class="s1">},</span>
                        <span class="s1">{</span>
                            <span class="s1">...codeCondition,</span>
                            <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.apiEdge,</span>
                            <span class="s1">use: apiRoutesLayerLoaders</span>
                        <span class="s1">},</span>
                        <span class="s1">{</span>
                            <span class="s1">test: codeCondition.test,</span>
                            <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.middleware,</span>
                            <span class="s1">use: middlewareLayerLoaders,</span>
                            <span class="s1">resolve: {</span>
                                <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">),</span>
                                <span class="s1">conditionNames: reactServerCondition,</span>
                                <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                    <span class="s1">reactProductionProfiling,</span>
                                    <span class="s1">layer: _constants.WEBPACK_LAYERS.middleware,</span>
                                    <span class="s1">isBrowser: isClient,</span>
                                    <span class="s1">isEdgeServer</span>
                                <span class="s1">})</span>
                            <span class="s1">}</span>
                        <span class="s1">},</span>
                        <span class="s1">{</span>
                            <span class="s1">test: codeCondition.test,</span>
                            <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.instrument,</span>
                            <span class="s1">use: instrumentLayerLoaders,</span>
                            <span class="s1">resolve: {</span>
                                <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">),</span>
                                <span class="s1">conditionNames: reactServerCondition,</span>
                                <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                                    <span class="s1">reactProductionProfiling,</span>
                                    <span class="s1">layer: _constants.WEBPACK_LAYERS.instrument,</span>
                                    <span class="s1">isBrowser: isClient,</span>
                                    <span class="s1">isEdgeServer</span>
                                <span class="s1">})</span>
                            <span class="s1">}</span>
                        <span class="s1">},</span>
                        <span class="s1">...hasAppDir ? [</span>
                            <span class="s1">{</span>
                                <span class="s1">test: codeCondition.test,</span>
                                <span class="s1">issuerLayer: _utils.shouldUseReactServerCondition,</span>
                                <span class="s1">exclude: asyncStoragesRegex,</span>
                                <span class="s1">use: appServerLayerLoaders</span>
                            <span class="s1">},</span>
                            <span class="s1">{</span>
                                <span class="s1">test: codeCondition.test,</span>
                                <span class="s1">resourceQuery: </span><span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.edgeSSREntry),</span>
                                <span class="s1">use: appServerLayerLoaders</span>
                            <span class="s1">},</span>
                            <span class="s1">{</span>
                                <span class="s1">test: codeCondition.test,</span>
                                <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.appPagesBrowser,</span>
                                <span class="s4">// Exclude the transpilation of the app layer due to compilation issues</span>
                                <span class="s1">exclude: browserNonTranspileModules,</span>
                                <span class="s1">use: appBrowserLayerLoaders,</span>
                                <span class="s1">resolve: {</span>
                                    <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">)</span>
                                <span class="s1">}</span>
                            <span class="s1">},</span>
                            <span class="s1">{</span>
                                <span class="s1">test: codeCondition.test,</span>
                                <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.serverSideRendering,</span>
                                <span class="s1">exclude: asyncStoragesRegex,</span>
                                <span class="s1">use: appSSRLayerLoaders,</span>
                                <span class="s1">resolve: {</span>
                                    <span class="s1">mainFields: (</span><span class="s3">0</span><span class="s1">, _resolve.getMainField)(compilerType, </span><span class="s2">true</span><span class="s1">)</span>
                                <span class="s1">}</span>
                            <span class="s1">}</span>
                        <span class="s1">] : [],</span>
                        <span class="s1">{</span>
                            <span class="s1">...codeCondition,</span>
                            <span class="s1">use: [</span>
                                <span class="s1">...reactRefreshLoaders,</span>
                                <span class="s1">defaultLoaders.babel,</span>
                                <span class="s1">reactCompilerLoader</span>
                            <span class="s1">].filter(Boolean)</span>
                        <span class="s1">}</span>
                    <span class="s1">]</span>
                <span class="s1">},</span>
                <span class="s1">...!config.images.disableStaticImages ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">test: nextImageLoaderRegex,</span>
                        <span class="s1">loader: </span><span class="s0">'next-image-loader'</span><span class="s1">,</span>
                        <span class="s1">issuer: {</span>
                            <span class="s1">not: _css.regexLikeCss</span>
                        <span class="s1">},</span>
                        <span class="s1">dependency: {</span>
                            <span class="s1">not: [</span>
                                <span class="s0">'url'</span>
                            <span class="s1">]</span>
                        <span class="s1">},</span>
                        <span class="s1">resourceQuery: {</span>
                            <span class="s1">not: [</span>
                                <span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadata),</span>
                                <span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadataRoute),</span>
                                <span class="s2">new </span><span class="s1">RegExp(_constants.WEBPACK_RESOURCE_QUERIES.metadataImageMeta)</span>
                            <span class="s1">]</span>
                        <span class="s1">},</span>
                        <span class="s1">options: {</span>
                            <span class="s1">isDev: dev,</span>
                            <span class="s1">compilerType,</span>
                            <span class="s1">basePath: config.basePath,</span>
                            <span class="s1">assetPrefix: config.assetPrefix</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">...isEdgeServer ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">fallback: {</span>
                                <span class="s1">process: require.resolve(</span><span class="s0">'./polyfills/process'</span><span class="s1">)</span>
                            <span class="s1">}</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : isClient ? [</span>
                    <span class="s1">{</span>
                        <span class="s1">resolve: {</span>
                            <span class="s1">fallback: config.experimental.fallbackNodePolyfills === </span><span class="s2">false </span><span class="s1">? {</span>
                                <span class="s1">assert: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">buffer: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">constants: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">crypto: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">domain: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">http: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">https: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">os: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">path: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">punycode: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">process: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">querystring: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">stream: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">string_decoder: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">sys: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">timers: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">tty: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">util: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">vm: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">zlib: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">events: </span><span class="s2">false</span><span class="s1">,</span>
                                <span class="s1">setImmediate: </span><span class="s2">false</span>
                            <span class="s1">} : {</span>
                                <span class="s1">assert: require.resolve(</span><span class="s0">'next/dist/compiled/assert'</span><span class="s1">),</span>
                                <span class="s1">buffer: require.resolve(</span><span class="s0">'next/dist/compiled/buffer'</span><span class="s1">),</span>
                                <span class="s1">constants: require.resolve(</span><span class="s0">'next/dist/compiled/constants-browserify'</span><span class="s1">),</span>
                                <span class="s1">crypto: require.resolve(</span><span class="s0">'next/dist/compiled/crypto-browserify'</span><span class="s1">),</span>
                                <span class="s1">domain: require.resolve(</span><span class="s0">'next/dist/compiled/domain-browser'</span><span class="s1">),</span>
                                <span class="s1">http: require.resolve(</span><span class="s0">'next/dist/compiled/stream-http'</span><span class="s1">),</span>
                                <span class="s1">https: require.resolve(</span><span class="s0">'next/dist/compiled/https-browserify'</span><span class="s1">),</span>
                                <span class="s1">os: require.resolve(</span><span class="s0">'next/dist/compiled/os-browserify'</span><span class="s1">),</span>
                                <span class="s1">path: require.resolve(</span><span class="s0">'next/dist/compiled/path-browserify'</span><span class="s1">),</span>
                                <span class="s1">punycode: require.resolve(</span><span class="s0">'next/dist/compiled/punycode'</span><span class="s1">),</span>
                                <span class="s1">process: require.resolve(</span><span class="s0">'./polyfills/process'</span><span class="s1">),</span>
                                <span class="s4">// Handled in separate alias</span>
                                <span class="s1">querystring: require.resolve(</span><span class="s0">'next/dist/compiled/querystring-es3'</span><span class="s1">),</span>
                                <span class="s1">stream: require.resolve(</span><span class="s0">'next/dist/compiled/stream-browserify'</span><span class="s1">),</span>
                                <span class="s1">string_decoder: require.resolve(</span><span class="s0">'next/dist/compiled/string_decoder'</span><span class="s1">),</span>
                                <span class="s1">sys: require.resolve(</span><span class="s0">'next/dist/compiled/util'</span><span class="s1">),</span>
                                <span class="s1">timers: require.resolve(</span><span class="s0">'next/dist/compiled/timers-browserify'</span><span class="s1">),</span>
                                <span class="s1">tty: require.resolve(</span><span class="s0">'next/dist/compiled/tty-browserify'</span><span class="s1">),</span>
                                <span class="s4">// Handled in separate alias</span>
                                <span class="s4">// url: require.resolve('url'),</span>
                                <span class="s1">util: require.resolve(</span><span class="s0">'next/dist/compiled/util'</span><span class="s1">),</span>
                                <span class="s1">vm: require.resolve(</span><span class="s0">'next/dist/compiled/vm-browserify'</span><span class="s1">),</span>
                                <span class="s1">zlib: require.resolve(</span><span class="s0">'next/dist/compiled/browserify-zlib'</span><span class="s1">),</span>
                                <span class="s1">events: require.resolve(</span><span class="s0">'next/dist/compiled/events'</span><span class="s1">),</span>
                                <span class="s1">setImmediate: require.resolve(</span><span class="s0">'next/dist/compiled/setimmediate'</span><span class="s1">)</span>
                            <span class="s1">}</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">] : [],</span>
                <span class="s1">{</span>
                    <span class="s4">// Mark `image-response.js` as side-effects free to make sure we can</span>
                    <span class="s4">// tree-shake it if not used.</span>
                    <span class="s1">test: </span><span class="s5">/[\\/]next[\\/]dist[\\/](esm[\\/])?server[\\/]og[\\/]image-response\.js/</span><span class="s1">,</span>
                    <span class="s1">sideEffects: </span><span class="s2">false</span>
                <span class="s1">},</span>
                <span class="s4">// Mark the action-client-wrapper module as side-effects free to make sure</span>
                <span class="s4">// the individual transformed module of client action can be tree-shaken.</span>
                <span class="s4">// This will make modules processed by `next-flight-server-reference-proxy-loader` become side-effects free,</span>
                <span class="s4">// then on client side the module ids will become tree-shakable.</span>
                <span class="s4">// e.g. the output of client action module will look like:</span>
                <span class="s4">// `export { a } from 'next-flight-server-reference-proxy-loader?id=idOfA&amp;name=a!</span>
                <span class="s4">// `export { b } from 'next-flight-server-reference-proxy-loader?id=idOfB&amp;name=b!</span>
                <span class="s1">{</span>
                    <span class="s1">test: </span><span class="s5">/[\\/]next[\\/]dist[\\/](esm[\\/])?build[\\/]webpack[\\/]loaders[\\/]next-flight-loader[\\/]action-client-wrapper\.js/</span><span class="s1">,</span>
                    <span class="s1">sideEffects: </span><span class="s2">false</span>
                <span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s4">// This loader rule should be before other rules, as it can output code</span>
                    <span class="s4">// that still contains `&quot;use client&quot;` or `&quot;use server&quot;` statements that</span>
                    <span class="s4">// needs to be re-transformed by the RSC compilers.</span>
                    <span class="s4">// This loader rule works like a bridge between user's import and</span>
                    <span class="s4">// the target module behind a package's barrel file. It reads SWC's</span>
                    <span class="s4">// analysis result from the previous loader, and directly returns the</span>
                    <span class="s4">// code that only exports values that are asked by the user.</span>
                    <span class="s1">test: </span><span class="s5">/__barrel_optimize__/</span><span class="s1">,</span>
                    <span class="s1">use: ({ resourceQuery })=&gt;{</span>
                        <span class="s2">var </span><span class="s1">_resourceQuery_match;</span>
                        <span class="s2">const </span><span class="s1">names = (((_resourceQuery_match = resourceQuery.match(</span><span class="s5">/\?names=([^&amp;]+)/</span><span class="s1">)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _resourceQuery_match[</span><span class="s3">1</span><span class="s1">]) || </span><span class="s0">''</span><span class="s1">).split(</span><span class="s0">','</span><span class="s1">);</span>
                        <span class="s2">return </span><span class="s1">[</span>
                            <span class="s1">{</span>
                                <span class="s1">loader: </span><span class="s0">'next-barrel-loader'</span><span class="s1">,</span>
                                <span class="s1">options: {</span>
                                    <span class="s1">names,</span>
                                    <span class="s1">swcCacheDir: _path.default.join(dir, (config == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: config.distDir) ?? </span><span class="s0">'.next'</span><span class="s1">, </span><span class="s0">'cache'</span><span class="s1">, </span><span class="s0">'swc'</span><span class="s1">)</span>
                                <span class="s1">},</span>
                                <span class="s4">// This is part of the request value to serve as the module key.</span>
                                <span class="s4">// The barrel loader are no-op re-exported modules keyed by</span>
                                <span class="s4">// export names.</span>
                                <span class="s1">ident: </span><span class="s0">'next-barrel-loader:' </span><span class="s1">+ resourceQuery</span>
                            <span class="s1">}</span>
                        <span class="s1">];</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">resolve: {</span>
                        <span class="s1">alias: {</span>
                            <span class="s1">next: _nextdirpaths.NEXT_PROJECT_ROOT</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">plugins: [</span>
            <span class="s1">isNodeServer &amp;&amp; </span><span class="s2">new </span><span class="s1">bundler.NormalModuleReplacementPlugin(</span><span class="s5">/\.\/(.+)\.shared-runtime$/</span><span class="s1">, </span><span class="s2">function</span><span class="s1">(resource) {</span>
                <span class="s2">const </span><span class="s1">moduleName = _path.default.basename(resource.request, </span><span class="s0">'.shared-runtime'</span><span class="s1">);</span>
                <span class="s2">const </span><span class="s1">layer = resource.contextInfo.issuerLayer;</span>
                <span class="s2">let </span><span class="s1">runtime;</span>
                <span class="s2">switch</span><span class="s1">(layer){</span>
                    <span class="s2">case </span><span class="s1">_constants.WEBPACK_LAYERS.serverSideRendering:</span>
                    <span class="s2">case </span><span class="s1">_constants.WEBPACK_LAYERS.reactServerComponents:</span>
                    <span class="s2">case </span><span class="s1">_constants.WEBPACK_LAYERS.appPagesBrowser:</span>
                    <span class="s2">case </span><span class="s1">_constants.WEBPACK_LAYERS.actionBrowser:</span>
                        <span class="s1">runtime = </span><span class="s0">'app-page'</span><span class="s1">;</span>
                        <span class="s2">break</span><span class="s1">;</span>
                    <span class="s2">case null</span><span class="s1">:</span>
                    <span class="s2">case </span><span class="s1">undefined:</span>
                    <span class="s2">default</span><span class="s1">:</span>
                        <span class="s1">runtime = </span><span class="s0">'pages'</span><span class="s1">;</span>
                <span class="s1">}</span>
                <span class="s1">resource.request = </span><span class="s0">`next/dist/server/route-modules/</span><span class="s1">${runtime}</span><span class="s0">/vendored/contexts/</span><span class="s1">${moduleName}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s1">}),</span>
            <span class="s1">dev &amp;&amp; </span><span class="s2">new </span><span class="s1">_memorywithgccacheplugin.MemoryWithGcCachePlugin({</span>
                <span class="s1">maxGenerations: </span><span class="s3">5</span>
            <span class="s1">}),</span>
            <span class="s1">dev &amp;&amp; isClient &amp;&amp; (isRspack ? </span><span class="s2">new </span><span class="s1">((</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackReactRefresh)())({</span>
                <span class="s1">injectLoader: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">injectEntry: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">overlay: </span><span class="s2">false</span>
            <span class="s1">}) : </span><span class="s2">new </span><span class="s1">_ReactRefreshWebpackPlugin.default(_webpack.webpack)),</span>
            <span class="s4">// Makes sure `Buffer` and `process` are polyfilled in client and flight bundles (same behavior as webpack 4)</span>
            <span class="s1">(isClient || isEdgeServer) &amp;&amp; </span><span class="s2">new </span><span class="s1">bundler.ProvidePlugin({</span>
                <span class="s4">// Buffer is used by getInlineScriptSource</span>
                <span class="s1">Buffer: [</span>
                    <span class="s1">require.resolve(</span><span class="s0">'buffer'</span><span class="s1">),</span>
                    <span class="s0">'Buffer'</span>
                <span class="s1">],</span>
                <span class="s4">// Avoid process being overridden when in web run time</span>
                <span class="s1">...isClient &amp;&amp; {</span>
                    <span class="s1">process: [</span>
                        <span class="s1">require.resolve(</span><span class="s0">'process'</span><span class="s1">)</span>
                    <span class="s1">]</span>
                <span class="s1">}</span>
            <span class="s1">}),</span>
            <span class="s2">new </span><span class="s1">((</span><span class="s3">0</span><span class="s1">, _getwebpackbundler.default)()).DefinePlugin((</span><span class="s3">0</span><span class="s1">, _defineenv.getDefineEnv)({</span>
                <span class="s1">isTurbopack: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">config,</span>
                <span class="s1">dev,</span>
                <span class="s1">distDir,</span>
                <span class="s1">projectPath: dir,</span>
                <span class="s1">fetchCacheKeyPrefix,</span>
                <span class="s1">hasRewrites,</span>
                <span class="s1">isClient,</span>
                <span class="s1">isEdgeServer,</span>
                <span class="s1">isNodeServer,</span>
                <span class="s1">middlewareMatchers,</span>
                <span class="s1">omitNonDeterministic: isCompileMode,</span>
                <span class="s1">rewrites</span>
            <span class="s1">})),</span>
            <span class="s1">isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_reactloadableplugin.ReactLoadablePlugin({</span>
                <span class="s1">filename: _constants1.REACT_LOADABLE_MANIFEST,</span>
                <span class="s1">pagesDir,</span>
                <span class="s1">appDir,</span>
                <span class="s1">runtimeAsset: </span><span class="s0">`server/</span><span class="s1">${_constants1.MIDDLEWARE_REACT_LOADABLE_MANIFEST}</span><span class="s0">.js`</span><span class="s1">,</span>
                <span class="s1">dev</span>
            <span class="s1">}),</span>
            <span class="s4">// rspack doesn't support the parser hooks used here</span>
            <span class="s1">!isRspack &amp;&amp; (isClient || isEdgeServer) &amp;&amp; </span><span class="s2">new </span><span class="s1">_nextdropclientpageplugin.DropClientPage(),</span>
            <span class="s1">isNodeServer &amp;&amp; !dev &amp;&amp; </span><span class="s2">new </span><span class="s1">(require(</span><span class="s0">'./webpack/plugins/next-trace-entrypoints-plugin'</span><span class="s1">)).TraceEntryPointsPlugin({</span>
                <span class="s1">rootDir: dir,</span>
                <span class="s1">appDir: appDir,</span>
                <span class="s1">pagesDir: pagesDir,</span>
                <span class="s1">esmExternals: config.experimental.esmExternals,</span>
                <span class="s1">outputFileTracingRoot: config.outputFileTracingRoot,</span>
                <span class="s1">appDirEnabled: hasAppDir,</span>
                <span class="s1">traceIgnores: [],</span>
                <span class="s1">compilerType</span>
            <span class="s1">}),</span>
            <span class="s4">// Moment.js is an extremely popular library that bundles large locale files</span>
            <span class="s4">// by default due to how Webpack interprets its code. This is a practical</span>
            <span class="s4">// solution that requires the user to opt into importing specific locales.</span>
            <span class="s4">// https://github.com/jmblog/how-to-optimize-momentjs-with-webpack</span>
            <span class="s1">config.excludeDefaultMomentLocales &amp;&amp; </span><span class="s2">new </span><span class="s1">bundler.IgnorePlugin({</span>
                <span class="s1">resourceRegExp: </span><span class="s5">/^\.\/locale$/</span><span class="s1">,</span>
                <span class="s1">contextRegExp: </span><span class="s5">/moment$/</span>
            <span class="s1">}),</span>
            <span class="s1">...dev ? (()=&gt;{</span>
                <span class="s4">// Even though require.cache is server only we have to clear assets from both compilations</span>
                <span class="s4">// This is because the client compilation generates the build manifest that's used on the server side</span>
                <span class="s2">const </span><span class="s1">{ NextJsRequireCacheHotReloader } = require(</span><span class="s0">'./webpack/plugins/nextjs-require-cache-hot-reloader'</span><span class="s1">);</span>
                <span class="s2">const </span><span class="s1">devPlugins = [</span>
                    <span class="s2">new </span><span class="s1">NextJsRequireCacheHotReloader({</span>
                        <span class="s1">serverComponents: hasAppDir</span>
                    <span class="s1">})</span>
                <span class="s1">];</span>
                <span class="s2">if </span><span class="s1">(isClient || isEdgeServer) {</span>
                    <span class="s1">devPlugins.push(</span><span class="s2">new </span><span class="s1">bundler.HotModuleReplacementPlugin());</span>
                <span class="s1">}</span>
                <span class="s2">return </span><span class="s1">devPlugins;</span>
            <span class="s1">})() : [],</span>
            <span class="s1">!dev &amp;&amp; </span><span class="s2">new </span><span class="s1">bundler.IgnorePlugin({</span>
                <span class="s1">resourceRegExp: </span><span class="s5">/react-is/</span><span class="s1">,</span>
                <span class="s1">contextRegExp: </span><span class="s5">/next[\\/]dist[\\/]/</span>
            <span class="s1">}),</span>
            <span class="s1">isNodeOrEdgeCompilation &amp;&amp; </span><span class="s2">new </span><span class="s1">_pagesmanifestplugin.default({</span>
                <span class="s1">dev,</span>
                <span class="s1">appDirEnabled: hasAppDir,</span>
                <span class="s1">isEdgeRuntime: isEdgeServer,</span>
                <span class="s1">distDir: !dev ? distDir : undefined</span>
            <span class="s1">}),</span>
            <span class="s4">// MiddlewarePlugin should be after DefinePlugin so NEXT_PUBLIC_*</span>
            <span class="s4">// replacement is done before its process.env.* handling</span>
            <span class="s1">isEdgeServer &amp;&amp; </span><span class="s2">new </span><span class="s1">_middlewareplugin.default({</span>
                <span class="s1">dev,</span>
                <span class="s1">sriEnabled: !dev &amp;&amp; !!((_config_experimental_sri = config.experimental.sri) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental_sri.algorithm),</span>
                <span class="s1">rewrites,</span>
                <span class="s1">edgeEnvironments: {</span>
                    <span class="s1">__NEXT_BUILD_ID: buildId,</span>
                    <span class="s1">NEXT_SERVER_ACTIONS_ENCRYPTION_KEY: encryptionKey,</span>
                    <span class="s1">__NEXT_PREVIEW_MODE_ID: previewProps.previewModeId,</span>
                    <span class="s1">__NEXT_PREVIEW_MODE_SIGNING_KEY: previewProps.previewModeSigningKey,</span>
                    <span class="s1">__NEXT_PREVIEW_MODE_ENCRYPTION_KEY: previewProps.previewModeEncryptionKey</span>
                <span class="s1">}</span>
            <span class="s1">}),</span>
            <span class="s1">isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_buildmanifestplugin.default({</span>
                <span class="s1">buildId,</span>
                <span class="s1">rewrites,</span>
                <span class="s1">isDevFallback,</span>
                <span class="s1">appDirEnabled: hasAppDir,</span>
                <span class="s1">clientRouterFilters</span>
            <span class="s1">}),</span>
            <span class="s1">isRspack ? </span><span class="s2">new </span><span class="s1">_rspackprofilingplugin.RspackProfilingPlugin({</span>
                <span class="s1">runWebpackSpan</span>
            <span class="s1">}) : </span><span class="s2">new </span><span class="s1">_profilingplugin.ProfilingPlugin({</span>
                <span class="s1">runWebpackSpan,</span>
                <span class="s1">rootDir: dir</span>
            <span class="s1">}),</span>
            <span class="s2">new </span><span class="s1">_wellknownerrorsplugin.WellKnownErrorsPlugin(),</span>
            <span class="s1">isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_copyfileplugin.CopyFilePlugin({</span>
                <span class="s4">// file path to build output of `@next/polyfill-nomodule`</span>
                <span class="s1">filePath: require.resolve(</span><span class="s0">'./polyfills/polyfill-nomodule'</span><span class="s1">),</span>
                <span class="s1">cacheKey: </span><span class="s0">&quot;15.5.4&quot;</span><span class="s1">,</span>
                <span class="s1">name: </span><span class="s0">`static/chunks/polyfills</span><span class="s1">${dev ? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">'-[hash]'</span><span class="s1">}</span><span class="s0">.js`</span><span class="s1">,</span>
                <span class="s1">minimize: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">info: {</span>
                    <span class="s1">[_constants1.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL]: </span><span class="s3">1</span><span class="s1">,</span>
                    <span class="s4">// This file is already minified</span>
                    <span class="s1">minimized: </span><span class="s2">true</span>
                <span class="s1">}</span>
            <span class="s1">}),</span>
            <span class="s1">hasAppDir &amp;&amp; isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_appbuildmanifestplugin.AppBuildManifestPlugin({</span>
                <span class="s1">dev</span>
            <span class="s1">}),</span>
            <span class="s1">hasAppDir &amp;&amp; (isClient ? </span><span class="s2">new </span><span class="s1">_flightmanifestplugin.ClientReferenceManifestPlugin({</span>
                <span class="s1">dev,</span>
                <span class="s1">appDir,</span>
                <span class="s1">experimentalInlineCss: !!config.experimental.inlineCss</span>
            <span class="s1">}) : </span><span class="s2">new </span><span class="s1">FlightClientEntryPlugin({</span>
                <span class="s1">appDir,</span>
                <span class="s1">dev,</span>
                <span class="s1">isEdgeServer,</span>
                <span class="s1">encryptionKey</span>
            <span class="s1">})),</span>
            <span class="s1">hasAppDir &amp;&amp; !isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_nexttypesplugin.NextTypesPlugin({</span>
                <span class="s1">dir,</span>
                <span class="s1">distDir: config.distDir,</span>
                <span class="s1">appDir,</span>
                <span class="s1">dev,</span>
                <span class="s1">isEdgeServer,</span>
                <span class="s1">pageExtensions: config.pageExtensions,</span>
                <span class="s1">cacheLifeConfig: config.experimental.cacheLife,</span>
                <span class="s1">originalRewrites,</span>
                <span class="s1">originalRedirects</span>
            <span class="s1">}),</span>
            <span class="s1">!dev &amp;&amp; isClient &amp;&amp; !!((_config_experimental_sri1 = config.experimental.sri) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental_sri1.algorithm) &amp;&amp; </span><span class="s2">new </span><span class="s1">_subresourceintegrityplugin.SubresourceIntegrityPlugin(config.experimental.sri.algorithm),</span>
            <span class="s1">isClient &amp;&amp; </span><span class="s2">new </span><span class="s1">_nextfontmanifestplugin.NextFontManifestPlugin({</span>
                <span class="s1">appDir</span>
            <span class="s1">}),</span>
            <span class="s1">!dev &amp;&amp; isClient &amp;&amp; config.experimental.cssChunking &amp;&amp; (isRspack ? </span><span class="s2">new </span><span class="s1">((</span><span class="s3">0</span><span class="s1">, _getrspack.getRspackCore)()).experiments.CssChunkingPlugin({</span>
                <span class="s1">strict: config.experimental.cssChunking === </span><span class="s0">'strict'</span><span class="s1">,</span>
                <span class="s1">nextjs: </span><span class="s2">true</span>
            <span class="s1">}) : </span><span class="s2">new </span><span class="s1">_csschunkingplugin.CssChunkingPlugin(config.experimental.cssChunking === </span><span class="s0">'strict'</span><span class="s1">)),</span>
            <span class="s1">telemetryPlugin,</span>
            <span class="s1">!dev &amp;&amp; isNodeServer &amp;&amp; </span><span class="s2">new </span><span class="s1">(require(</span><span class="s0">'./webpack/plugins/telemetry-plugin/telemetry-plugin'</span><span class="s1">)).TelemetryPlugin(</span><span class="s2">new </span><span class="s1">Map()),</span>
            <span class="s1">shouldEnableSlowModuleDetection &amp;&amp; </span><span class="s2">new </span><span class="s1">(require(</span><span class="s0">'./webpack/plugins/slow-module-detection-plugin'</span><span class="s1">)).default({</span>
                <span class="s1">compilerType,</span>
                <span class="s1">...config.experimental.slowModuleDetection</span>
            <span class="s1">})</span>
        <span class="s1">].filter(Boolean)</span>
    <span class="s1">};</span>
    <span class="s4">// Support tsconfig and jsconfig baseUrl</span>
    <span class="s4">// Only add the baseUrl if it's explicitly set in tsconfig/jsconfig</span>
    <span class="s2">if </span><span class="s1">(resolvedBaseUrl &amp;&amp; !resolvedBaseUrl.isImplicit) {</span>
        <span class="s2">var </span><span class="s1">_webpackConfig_resolve_modules, _webpackConfig_resolve1;</span>
        <span class="s1">(_webpackConfig_resolve1 = webpackConfig.resolve) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_resolve_modules = _webpackConfig_resolve1.modules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_resolve_modules.push(resolvedBaseUrl.baseUrl);</span>
    <span class="s1">}</span>
    <span class="s1">(_webpackConfig_resolve = webpackConfig.resolve) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_resolve_plugins = _webpackConfig_resolve.plugins) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_resolve_plugins.unshift(</span><span class="s2">new </span><span class="s1">_jsconfigpathsplugin.JsConfigPathsPlugin((jsConfig == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_jsConfig_compilerOptions2 = jsConfig.compilerOptions) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _jsConfig_compilerOptions2.paths) || {}, resolvedBaseUrl));</span>
    <span class="s2">const </span><span class="s1">webpack5Config = webpackConfig;</span>
    <span class="s2">if </span><span class="s1">(isEdgeServer) {</span>
        <span class="s2">var </span><span class="s1">_webpack5Config_module_rules, _webpack5Config_module, _webpack5Config_module_rules1, _webpack5Config_module1, _webpack5Config_module_rules2, _webpack5Config_module2;</span>
        <span class="s1">(_webpack5Config_module = webpack5Config.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpack5Config_module_rules = _webpack5Config_module.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_module_rules.unshift({</span>
            <span class="s1">test: </span><span class="s5">/\.wasm$/</span><span class="s1">,</span>
            <span class="s1">loader: </span><span class="s0">'next-middleware-wasm-loader'</span><span class="s1">,</span>
            <span class="s1">type: </span><span class="s0">'javascript/auto'</span><span class="s1">,</span>
            <span class="s1">resourceQuery: </span><span class="s5">/module/i</span>
        <span class="s1">});</span>
        <span class="s1">(_webpack5Config_module1 = webpack5Config.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpack5Config_module_rules1 = _webpack5Config_module1.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_module_rules1.unshift({</span>
            <span class="s1">dependency: </span><span class="s0">'url'</span><span class="s1">,</span>
            <span class="s1">loader: </span><span class="s0">'next-middleware-asset-loader'</span><span class="s1">,</span>
            <span class="s1">type: </span><span class="s0">'javascript/auto'</span><span class="s1">,</span>
            <span class="s1">layer: _constants.WEBPACK_LAYERS.edgeAsset</span>
        <span class="s1">});</span>
        <span class="s1">(_webpack5Config_module2 = webpack5Config.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpack5Config_module_rules2 = _webpack5Config_module2.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_module_rules2.unshift({</span>
            <span class="s1">issuerLayer: _constants.WEBPACK_LAYERS.edgeAsset,</span>
            <span class="s1">type: </span><span class="s0">'asset/source'</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s1">webpack5Config.experiments = {</span>
        <span class="s1">layers: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">cacheUnaffected: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">buildHttp: Array.isArray(config.experimental.urlImports) ? {</span>
            <span class="s1">allowedUris: config.experimental.urlImports,</span>
            <span class="s1">cacheLocation: _path.default.join(dir, </span><span class="s0">'next.lock/data'</span><span class="s1">),</span>
            <span class="s1">lockfileLocation: _path.default.join(dir, </span><span class="s0">'next.lock/lock.json'</span><span class="s1">)</span>
        <span class="s1">} : config.experimental.urlImports ? {</span>
            <span class="s1">cacheLocation: _path.default.join(dir, </span><span class="s0">'next.lock/data'</span><span class="s1">),</span>
            <span class="s1">lockfileLocation: _path.default.join(dir, </span><span class="s0">'next.lock/lock.json'</span><span class="s1">),</span>
            <span class="s1">...config.experimental.urlImports</span>
        <span class="s1">} : undefined</span>
    <span class="s1">};</span>
    <span class="s1">webpack5Config.module.parser = {</span>
        <span class="s1">javascript: {</span>
            <span class="s1">url: </span><span class="s0">'relative'</span>
        <span class="s1">}</span>
    <span class="s1">};</span>
    <span class="s1">webpack5Config.module.generator = {</span>
        <span class="s1">asset: {</span>
            <span class="s1">filename: </span><span class="s0">'static/media/[name].[hash:8][ext]'</span>
        <span class="s1">}</span>
    <span class="s1">};</span>
    <span class="s2">if </span><span class="s1">(!webpack5Config.output) {</span>
        <span class="s1">webpack5Config.output = {};</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(isClient) {</span>
        <span class="s1">webpack5Config.output.trustedTypes = </span><span class="s0">'nextjs#bundler'</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(isClient || isEdgeServer) {</span>
        <span class="s1">webpack5Config.output.enabledLibraryTypes = [</span>
            <span class="s0">'assign'</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s4">// This enables managedPaths for all node_modules</span>
    <span class="s4">// and also for the unplugged folder when using yarn pnp</span>
    <span class="s4">// It also add the yarn cache to the immutable paths</span>
    <span class="s1">webpack5Config.snapshot = {};</span>
    <span class="s2">if </span><span class="s1">(process.versions.pnp === </span><span class="s0">'3'</span><span class="s1">) {</span>
        <span class="s1">webpack5Config.snapshot.managedPaths = [</span>
            <span class="s5">/^(.+?(?:[\\/]\.yarn[\\/]unplugged[\\/][^\\/]+)?[\\/]node_modules[\\/])/</span>
        <span class="s1">];</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">webpack5Config.snapshot.managedPaths = [</span>
            <span class="s5">/^(.+?[\\/]node_modules[\\/])/</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(process.versions.pnp === </span><span class="s0">'3'</span><span class="s1">) {</span>
        <span class="s1">webpack5Config.snapshot.immutablePaths = [</span>
            <span class="s5">/^(.+?[\\/]cache[\\/][^\\/]+\.zip[\\/]node_modules[\\/])/</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(dev) {</span>
        <span class="s2">if </span><span class="s1">(!webpack5Config.optimization) {</span>
            <span class="s1">webpack5Config.optimization = {};</span>
        <span class="s1">}</span>
        <span class="s4">// For Server Components, it's necessary to have provided exports collected</span>
        <span class="s4">// to generate the correct flight manifest.</span>
        <span class="s2">if </span><span class="s1">(!hasAppDir) {</span>
            <span class="s1">webpack5Config.optimization.providedExports = </span><span class="s2">false</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s1">webpack5Config.optimization.usedExports = </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">configVars = JSON.stringify({</span>
        <span class="s1">optimizePackageImports: config == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_config_experimental3 = config.experimental) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_experimental3.optimizePackageImports,</span>
        <span class="s1">crossOrigin: config.crossOrigin,</span>
        <span class="s1">pageExtensions: pageExtensions,</span>
        <span class="s1">trailingSlash: config.trailingSlash,</span>
        <span class="s1">buildActivityPosition: config.devIndicators === </span><span class="s2">false </span><span class="s1">? undefined : config.devIndicators.position,</span>
        <span class="s1">productionBrowserSourceMaps: !!config.productionBrowserSourceMaps,</span>
        <span class="s1">reactStrictMode: config.reactStrictMode,</span>
        <span class="s1">optimizeCss: config.experimental.optimizeCss,</span>
        <span class="s1">nextScriptWorkers: config.experimental.nextScriptWorkers,</span>
        <span class="s1">scrollRestoration: config.experimental.scrollRestoration,</span>
        <span class="s1">basePath: config.basePath,</span>
        <span class="s1">excludeDefaultMomentLocales: config.excludeDefaultMomentLocales,</span>
        <span class="s1">assetPrefix: config.assetPrefix,</span>
        <span class="s1">disableOptimizedLoading,</span>
        <span class="s1">isEdgeRuntime: isEdgeServer,</span>
        <span class="s1">reactProductionProfiling,</span>
        <span class="s1">webpack: !!config.webpack,</span>
        <span class="s1">hasRewrites,</span>
        <span class="s1">swcLoader: useSWCLoader,</span>
        <span class="s1">removeConsole: (_config_compiler5 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler5.removeConsole,</span>
        <span class="s1">reactRemoveProperties: (_config_compiler6 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler6.reactRemoveProperties,</span>
        <span class="s1">styledComponents: (_config_compiler7 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler7.styledComponents,</span>
        <span class="s1">relay: (_config_compiler8 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler8.relay,</span>
        <span class="s1">emotion: (_config_compiler9 = config.compiler) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _config_compiler9.emotion,</span>
        <span class="s1">modularizeImports: config.modularizeImports,</span>
        <span class="s1">imageLoaderFile: config.images.loaderFile,</span>
        <span class="s1">clientTraceMetadata: config.experimental.clientTraceMetadata,</span>
        <span class="s1">serverSourceMaps: config.experimental.serverSourceMaps,</span>
        <span class="s1">serverReferenceHashSalt: encryptionKey</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">cache = {</span>
        <span class="s1">type: </span><span class="s0">'filesystem'</span><span class="s1">,</span>
        <span class="s4">// Disable memory cache in development in favor of our own MemoryWithGcCachePlugin.</span>
        <span class="s1">maxMemoryGenerations: dev ? </span><span class="s3">0 </span><span class="s1">: Infinity,</span>
        <span class="s4">// Includes:</span>
        <span class="s4">//  - Next.js location on disk (some loaders use absolute paths and some resolve options depend on absolute paths)</span>
        <span class="s4">//  - Next.js version</span>
        <span class="s4">//  - next.config.js keys that affect compilation</span>
        <span class="s1">version: </span><span class="s0">`</span><span class="s1">${__dirname}</span><span class="s0">|</span><span class="s1">${</span><span class="s0">&quot;15.5.4&quot;</span><span class="s1">}</span><span class="s0">|</span><span class="s1">${configVars}</span><span class="s0">`</span><span class="s1">,</span>
        <span class="s1">cacheDirectory: _path.default.join(distDir, </span><span class="s0">'cache'</span><span class="s1">, </span><span class="s0">'webpack'</span><span class="s1">),</span>
        <span class="s4">// For production builds, it's more efficient to compress all cache files together instead of compression each one individually.</span>
        <span class="s4">// So we disable compression here and allow the build runner to take care of compressing the cache as a whole.</span>
        <span class="s4">// For local development, we still want to compress the cache files individually to avoid I/O bottlenecks</span>
        <span class="s4">// as we are seeing 1~10 seconds of fs I/O time from user reports.</span>
        <span class="s1">compression: dev ? </span><span class="s0">'gzip' </span><span class="s1">: </span><span class="s2">false</span>
    <span class="s1">};</span>
    <span class="s4">// Adds `next.config.js` as a buildDependency when custom webpack config is provided</span>
    <span class="s2">if </span><span class="s1">(config.webpack &amp;&amp; config.configFile) {</span>
        <span class="s1">cache.buildDependencies = {</span>
            <span class="s1">config: [</span>
                <span class="s1">config.configFile</span>
            <span class="s1">],</span>
            <span class="s4">// We don't want to use the webpack default buildDependencies as we already include the next.js version</span>
            <span class="s1">defaultWebpack: []</span>
        <span class="s1">};</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">cache.buildDependencies = {</span>
            <span class="s4">// We don't want to use the webpack default buildDependencies as we already include the next.js version</span>
            <span class="s1">defaultWebpack: []</span>
        <span class="s1">};</span>
    <span class="s1">}</span>
    <span class="s1">(_webpack5Config_plugins = webpack5Config.plugins) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_plugins.push((compiler)=&gt;{</span>
        <span class="s1">compiler.hooks.done.tap(</span><span class="s0">'next-build-dependencies'</span><span class="s1">, (stats)=&gt;{</span>
            <span class="s2">const </span><span class="s1">buildDependencies = stats.compilation.buildDependencies;</span>
            <span class="s2">const </span><span class="s1">nextPackage = _path.default.dirname(require.resolve(</span><span class="s0">'next/package.json'</span><span class="s1">));</span>
            <span class="s4">// Remove all next.js build dependencies, they are already covered by the cacheVersion</span>
            <span class="s4">// and next.js also imports the output files which leads to broken caching.</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">dep of buildDependencies){</span>
                <span class="s2">if </span><span class="s1">(dep.startsWith(nextPackage)) {</span>
                    <span class="s1">buildDependencies.delete(dep);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">});</span>
    <span class="s1">webpack5Config.cache = cache;</span>
    <span class="s2">if </span><span class="s1">(process.env.NEXT_WEBPACK_LOGGING) {</span>
        <span class="s2">const </span><span class="s1">infra = process.env.NEXT_WEBPACK_LOGGING.includes(</span><span class="s0">'infrastructure'</span><span class="s1">);</span>
        <span class="s2">const </span><span class="s1">profileClient = process.env.NEXT_WEBPACK_LOGGING.includes(</span><span class="s0">'profile-client'</span><span class="s1">);</span>
        <span class="s2">const </span><span class="s1">profileServer = process.env.NEXT_WEBPACK_LOGGING.includes(</span><span class="s0">'profile-server'</span><span class="s1">);</span>
        <span class="s2">const </span><span class="s1">summaryClient = process.env.NEXT_WEBPACK_LOGGING.includes(</span><span class="s0">'summary-client'</span><span class="s1">);</span>
        <span class="s2">const </span><span class="s1">summaryServer = process.env.NEXT_WEBPACK_LOGGING.includes(</span><span class="s0">'summary-server'</span><span class="s1">);</span>
        <span class="s2">const </span><span class="s1">profile = profileClient &amp;&amp; isClient || profileServer &amp;&amp; isNodeOrEdgeCompilation;</span>
        <span class="s2">const </span><span class="s1">summary = summaryClient &amp;&amp; isClient || summaryServer &amp;&amp; isNodeOrEdgeCompilation;</span>
        <span class="s2">const </span><span class="s1">logDefault = !infra &amp;&amp; !profile &amp;&amp; !summary;</span>
        <span class="s2">if </span><span class="s1">(logDefault || infra) {</span>
            <span class="s1">webpack5Config.infrastructureLogging = {</span>
                <span class="s1">level: </span><span class="s0">'verbose'</span><span class="s1">,</span>
                <span class="s1">debug: </span><span class="s5">/FileSystemInfo/</span>
            <span class="s1">};</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(logDefault || profile) {</span>
            <span class="s1">webpack5Config.plugins.push((compiler)=&gt;{</span>
                <span class="s1">compiler.hooks.done.tap(</span><span class="s0">'next-webpack-logging'</span><span class="s1">, (stats)=&gt;{</span>
                    <span class="s1">console.log(stats.toString({</span>
                        <span class="s1">colors: </span><span class="s2">true</span><span class="s1">,</span>
                        <span class="s1">logging: logDefault ? </span><span class="s0">'log' </span><span class="s1">: </span><span class="s0">'verbose'</span>
                    <span class="s1">}));</span>
                <span class="s1">});</span>
            <span class="s1">});</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(summary) {</span>
            <span class="s1">webpack5Config.plugins.push((compiler)=&gt;{</span>
                <span class="s1">compiler.hooks.done.tap(</span><span class="s0">'next-webpack-logging'</span><span class="s1">, (stats)=&gt;{</span>
                    <span class="s1">console.log(stats.toString({</span>
                        <span class="s1">preset: </span><span class="s0">'summary'</span><span class="s1">,</span>
                        <span class="s1">colors: </span><span class="s2">true</span><span class="s1">,</span>
                        <span class="s1">timings: </span><span class="s2">true</span>
                    <span class="s1">}));</span>
                <span class="s1">});</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(profile) {</span>
            <span class="s2">const </span><span class="s1">ProgressPlugin = _webpack.webpack.ProgressPlugin;</span>
            <span class="s1">webpack5Config.plugins.push(</span><span class="s2">new </span><span class="s1">ProgressPlugin({</span>
                <span class="s1">profile: </span><span class="s2">true</span>
            <span class="s1">}));</span>
            <span class="s1">webpack5Config.profile = </span><span class="s2">true</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">webpackConfig = </span><span class="s2">await </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _config.buildConfiguration)(webpackConfig, {</span>
        <span class="s1">supportedBrowsers,</span>
        <span class="s1">rootDirectory: dir,</span>
        <span class="s1">customAppFile: pagesDir ? </span><span class="s2">new </span><span class="s1">RegExp((</span><span class="s3">0</span><span class="s1">, _escaperegexp.escapeStringRegexp)(_path.default.join(pagesDir, </span><span class="s0">`_app`</span><span class="s1">))) : undefined,</span>
        <span class="s1">hasAppDir,</span>
        <span class="s1">isDevelopment: dev,</span>
        <span class="s1">isServer: isNodeOrEdgeCompilation,</span>
        <span class="s1">isEdgeRuntime: isEdgeServer,</span>
        <span class="s1">targetWeb: isClient || isEdgeServer,</span>
        <span class="s1">assetPrefix: config.assetPrefix || </span><span class="s0">''</span><span class="s1">,</span>
        <span class="s1">sassOptions: config.sassOptions,</span>
        <span class="s1">productionBrowserSourceMaps: config.productionBrowserSourceMaps,</span>
        <span class="s1">future: config.future,</span>
        <span class="s1">experimental: config.experimental,</span>
        <span class="s1">disableStaticImages: config.images.disableStaticImages,</span>
        <span class="s1">transpilePackages: config.transpilePackages,</span>
        <span class="s1">serverSourceMaps: config.experimental.serverSourceMaps</span>
    <span class="s1">});</span>
    <span class="s4">// @ts-ignore Cache exists</span>
    <span class="s1">webpackConfig.cache.name = </span><span class="s0">`</span><span class="s1">${webpackConfig.name}</span><span class="s0">-</span><span class="s1">${webpackConfig.mode}${isDevFallback ? </span><span class="s0">'-fallback' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(dev) {</span>
        <span class="s2">if </span><span class="s1">(webpackConfig.module) {</span>
            <span class="s1">webpackConfig.module.unsafeCache = (module1)=&gt;!UNSAFE_CACHE_REGEX.test(module1.resource);</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s1">webpackConfig.module = {</span>
                <span class="s1">unsafeCache: (module1)=&gt;!UNSAFE_CACHE_REGEX.test(module1.resource)</span>
            <span class="s1">};</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">let </span><span class="s1">originalDevtool = webpackConfig.devtool;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">config.webpack === </span><span class="s0">'function'</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">_webpackConfig_plugins, _webpack5Config_experiments, _webpack5Config_experiments1;</span>
        <span class="s2">const </span><span class="s1">pluginCountBefore = (_webpackConfig_plugins = webpackConfig.plugins) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_plugins.length;</span>
        <span class="s1">webpackConfig = config.webpack(webpackConfig, {</span>
            <span class="s1">dir,</span>
            <span class="s1">dev,</span>
            <span class="s1">isServer: isNodeOrEdgeCompilation,</span>
            <span class="s1">buildId,</span>
            <span class="s1">config,</span>
            <span class="s1">defaultLoaders,</span>
            <span class="s1">totalPages: Object.keys(entrypoints).length,</span>
            <span class="s1">webpack: bundler,</span>
            <span class="s1">...isNodeOrEdgeCompilation ? {</span>
                <span class="s1">nextRuntime: isEdgeServer ? </span><span class="s0">'edge' </span><span class="s1">: </span><span class="s0">'nodejs'</span>
            <span class="s1">} : {}</span>
        <span class="s1">});</span>
        <span class="s2">if </span><span class="s1">(telemetryPlugin &amp;&amp; pluginCountBefore) {</span>
            <span class="s2">var </span><span class="s1">_webpackConfig_plugins1;</span>
            <span class="s2">const </span><span class="s1">pluginCountAfter = (_webpackConfig_plugins1 = webpackConfig.plugins) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_plugins1.length;</span>
            <span class="s2">if </span><span class="s1">(pluginCountAfter) {</span>
                <span class="s2">const </span><span class="s1">pluginsChanged = pluginCountAfter !== pluginCountBefore;</span>
                <span class="s1">telemetryPlugin.addUsage(</span><span class="s0">'webpackPlugins'</span><span class="s1">, pluginsChanged ? </span><span class="s3">1 </span><span class="s1">: </span><span class="s3">0</span><span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(!webpackConfig) {</span>
            <span class="s2">throw </span><span class="s1">Object.defineProperty(</span><span class="s2">new </span><span class="s1">Error(</span><span class="s0">`Webpack config is undefined. You may have forgot to return properly from within the &quot;webpack&quot; method of your </span><span class="s1">${config.configFileName}</span><span class="s0">.</span><span class="s6">\n</span><span class="s0">` </span><span class="s1">+ </span><span class="s0">'See more info here https://nextjs.org/docs/messages/undefined-webpack-config'</span><span class="s1">), </span><span class="s0">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s1">, {</span>
                <span class="s1">value: </span><span class="s0">&quot;E297&quot;</span><span class="s1">,</span>
                <span class="s1">enumerable: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">configurable: </span><span class="s2">true</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(dev &amp;&amp; originalDevtool !== webpackConfig.devtool) {</span>
            <span class="s1">webpackConfig.devtool = originalDevtool;</span>
            <span class="s1">devtoolRevertWarning(originalDevtool);</span>
        <span class="s1">}</span>
        <span class="s4">// eslint-disable-next-line @typescript-eslint/no-shadow</span>
        <span class="s2">const </span><span class="s1">webpack5Config = webpackConfig;</span>
        <span class="s4">// disable lazy compilation of entries as next.js has it's own method here</span>
        <span class="s2">if </span><span class="s1">(((_webpack5Config_experiments = webpack5Config.experiments) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_experiments.lazyCompilation) === </span><span class="s2">true</span><span class="s1">) {</span>
            <span class="s1">webpack5Config.experiments.lazyCompilation = {</span>
                <span class="s1">entries: </span><span class="s2">false</span>
            <span class="s1">};</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">((_webpack5Config_experiments1 = webpack5Config.experiments) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpack5Config_experiments1.lazyCompilation) === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; webpack5Config.experiments.lazyCompilation.entries !== </span><span class="s2">false</span><span class="s1">) {</span>
            <span class="s1">webpack5Config.experiments.lazyCompilation.entries = </span><span class="s2">false</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">webpackConfig.then === </span><span class="s0">'function'</span><span class="s1">) {</span>
            <span class="s1">console.warn(</span><span class="s0">'&gt; Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">rules = ((_webpackConfig_module = webpackConfig.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_module.rules) || [];</span>
    <span class="s2">const </span><span class="s1">customSvgRule = rules.find((rule)=&gt;rule &amp;&amp; </span><span class="s2">typeof </span><span class="s1">rule === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; rule.loader !== </span><span class="s0">'next-image-loader' </span><span class="s1">&amp;&amp; </span><span class="s0">'test' </span><span class="s2">in </span><span class="s1">rule &amp;&amp; rule.test </span><span class="s2">instanceof </span><span class="s1">RegExp &amp;&amp; rule.test.test(</span><span class="s0">'.svg'</span><span class="s1">) || </span><span class="s2">false</span><span class="s1">);</span>
    <span class="s2">if </span><span class="s1">(customSvgRule &amp;&amp; hasAppDir) {</span>
        <span class="s4">// Create React aliases for SVG components that were transformed using a</span>
        <span class="s4">// custom webpack config with e.g. the `@svgr/webpack` loader, or the</span>
        <span class="s4">// `babel-plugin-inline-react-svg` plugin.</span>
        <span class="s1">rules.push({</span>
            <span class="s1">test: customSvgRule.test,</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">_constants.WEBPACK_LAYERS.reactServerComponents,</span>
                <span class="s1">_constants.WEBPACK_LAYERS.serverSideRendering,</span>
                <span class="s1">_constants.WEBPACK_LAYERS.appPagesBrowser</span>
            <span class="s1">].map((layer)=&gt;({</span>
                    <span class="s1">issuerLayer: layer,</span>
                    <span class="s1">resolve: {</span>
                        <span class="s1">alias: (</span><span class="s3">0</span><span class="s1">, _createcompileraliases.createVendoredReactAliases)(bundledReactChannel, {</span>
                            <span class="s1">reactProductionProfiling,</span>
                            <span class="s1">layer,</span>
                            <span class="s1">isBrowser: isClient,</span>
                            <span class="s1">isEdgeServer</span>
                        <span class="s1">})</span>
                    <span class="s1">}</span>
                <span class="s1">}))</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(!config.images.disableStaticImages) {</span>
        <span class="s2">const </span><span class="s1">nextImageRule = rules.find((rule)=&gt;rule &amp;&amp; </span><span class="s2">typeof </span><span class="s1">rule === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; rule.loader === </span><span class="s0">'next-image-loader'</span><span class="s1">);</span>
        <span class="s2">if </span><span class="s1">(customSvgRule &amp;&amp; nextImageRule &amp;&amp; </span><span class="s2">typeof </span><span class="s1">nextImageRule === </span><span class="s0">'object'</span><span class="s1">) {</span>
            <span class="s4">// Exclude svg if the user already defined it in custom</span>
            <span class="s4">// webpack config such as the `@svgr/webpack` loader, or</span>
            <span class="s4">// the `babel-plugin-inline-react-svg` plugin.</span>
            <span class="s1">nextImageRule.test = </span><span class="s5">/\.(png|jpg|jpeg|gif|webp|avif|ico|bmp)$/i</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(config.experimental.craCompat &amp;&amp; ((_webpackConfig_module1 = webpackConfig.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_module1.rules) &amp;&amp; webpackConfig.plugins) {</span>
        <span class="s4">// CRA allows importing non-webpack handled files with file-loader</span>
        <span class="s4">// these need to be the last rule to prevent catching other items</span>
        <span class="s4">// https://github.com/facebook/create-react-app/blob/fddce8a9e21bf68f37054586deb0c8636a45f50b/packages/react-scripts/config/webpack.config.js#L594</span>
        <span class="s2">const </span><span class="s1">fileLoaderExclude = [</span>
            <span class="s5">/\.(js|mjs|jsx|ts|tsx|json)$/</span>
        <span class="s1">];</span>
        <span class="s2">const </span><span class="s1">fileLoader = {</span>
            <span class="s1">exclude: fileLoaderExclude,</span>
            <span class="s1">issuer: fileLoaderExclude,</span>
            <span class="s1">type: </span><span class="s0">'asset/resource'</span>
        <span class="s1">};</span>
        <span class="s2">const </span><span class="s1">topRules = [];</span>
        <span class="s2">const </span><span class="s1">innerRules = [];</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">rule of webpackConfig.module.rules){</span>
            <span class="s2">if </span><span class="s1">(!rule || </span><span class="s2">typeof </span><span class="s1">rule !== </span><span class="s0">'object'</span><span class="s1">) </span><span class="s2">continue</span><span class="s1">;</span>
            <span class="s2">if </span><span class="s1">(rule.resolve) {</span>
                <span class="s1">topRules.push(rule);</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s2">if </span><span class="s1">(rule.oneOf &amp;&amp; !(rule.test || rule.exclude || rule.resource || rule.issuer)) {</span>
                    <span class="s1">rule.oneOf.forEach((r)=&gt;innerRules.push(r));</span>
                <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                    <span class="s1">innerRules.push(rule);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s1">webpackConfig.module.rules = [</span>
            <span class="s1">...topRules,</span>
            <span class="s1">{</span>
                <span class="s1">oneOf: [</span>
                    <span class="s1">...innerRules,</span>
                    <span class="s1">fileLoader</span>
                <span class="s1">]</span>
            <span class="s1">}</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s4">// Backwards compat with webpack-dev-middleware options object</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">config.webpackDevMiddleware === </span><span class="s0">'function'</span><span class="s1">) {</span>
        <span class="s2">const </span><span class="s1">options = config.webpackDevMiddleware({</span>
            <span class="s1">watchOptions: webpackConfig.watchOptions</span>
        <span class="s1">});</span>
        <span class="s2">if </span><span class="s1">(options.watchOptions) {</span>
            <span class="s1">webpackConfig.watchOptions = options.watchOptions;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">function </span><span class="s1">canMatchCss(rule) {</span>
        <span class="s2">if </span><span class="s1">(!rule) {</span>
            <span class="s2">return false</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">fileNames = [</span>
            <span class="s0">'/tmp/NEXTJS_CSS_DETECTION_FILE.css'</span><span class="s1">,</span>
            <span class="s0">'/tmp/NEXTJS_CSS_DETECTION_FILE.scss'</span><span class="s1">,</span>
            <span class="s0">'/tmp/NEXTJS_CSS_DETECTION_FILE.sass'</span><span class="s1">,</span>
            <span class="s0">'/tmp/NEXTJS_CSS_DETECTION_FILE.less'</span><span class="s1">,</span>
            <span class="s0">'/tmp/NEXTJS_CSS_DETECTION_FILE.styl'</span>
        <span class="s1">];</span>
        <span class="s2">if </span><span class="s1">(rule </span><span class="s2">instanceof </span><span class="s1">RegExp &amp;&amp; fileNames.some((input)=&gt;rule.test(input))) {</span>
            <span class="s2">return true</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">rule === </span><span class="s0">'function'</span><span class="s1">) {</span>
            <span class="s2">if </span><span class="s1">(fileNames.some((input)=&gt;{</span>
                <span class="s2">try </span><span class="s1">{</span>
                    <span class="s2">if </span><span class="s1">(rule(input)) {</span>
                        <span class="s2">return true</span><span class="s1">;</span>
                    <span class="s1">}</span>
                <span class="s1">} </span><span class="s2">catch  </span><span class="s1">{}</span>
                <span class="s2">return false</span><span class="s1">;</span>
            <span class="s1">})) {</span>
                <span class="s2">return true</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(Array.isArray(rule) &amp;&amp; rule.some(canMatchCss)) {</span>
            <span class="s2">return true</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">return false</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">hasUserCssConfig = ((_webpackConfig_module2 = webpackConfig.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_module_rules = _webpackConfig_module2.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_module_rules.some((rule)=&gt;canMatchCss(rule.test) || canMatchCss(rule.include))) ?? </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(hasUserCssConfig) {</span>
        <span class="s2">var </span><span class="s1">_webpackConfig_module_rules1, _webpackConfig_module3, _webpackConfig_plugins2, _webpackConfig_optimization_minimizer, _webpackConfig_optimization;</span>
        <span class="s4">// only show warning for one build</span>
        <span class="s2">if </span><span class="s1">(isNodeOrEdgeCompilation) {</span>
            <span class="s1">console.warn((</span><span class="s3">0</span><span class="s1">, _picocolors.yellow)((</span><span class="s3">0</span><span class="s1">, _picocolors.bold)(</span><span class="s0">'Warning: '</span><span class="s1">)) + (</span><span class="s3">0</span><span class="s1">, _picocolors.bold)(</span><span class="s0">'Built-in CSS support is being disabled due to custom CSS configuration being detected.</span><span class="s6">\n</span><span class="s0">'</span><span class="s1">) + </span><span class="s0">'See here for more info: https://nextjs.org/docs/messages/built-in-css-disabled</span><span class="s6">\n</span><span class="s0">'</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">((_webpackConfig_module3 = webpackConfig.module) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_module_rules1 = _webpackConfig_module3.rules) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_module_rules1.length) {</span>
            <span class="s4">// Remove default CSS Loaders</span>
            <span class="s1">webpackConfig.module.rules.forEach((r)=&gt;{</span>
                <span class="s2">if </span><span class="s1">(!r || </span><span class="s2">typeof </span><span class="s1">r !== </span><span class="s0">'object'</span><span class="s1">) </span><span class="s2">return</span><span class="s1">;</span>
                <span class="s2">if </span><span class="s1">(Array.isArray(r.oneOf)) {</span>
                    <span class="s1">r.oneOf = r.oneOf.filter((o)=&gt;o[Symbol.for(</span><span class="s0">'__next_css_remove'</span><span class="s1">)] !== </span><span class="s2">true</span><span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">((_webpackConfig_plugins2 = webpackConfig.plugins) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_plugins2.length) {</span>
            <span class="s4">// Disable CSS Extraction Plugin</span>
            <span class="s1">webpackConfig.plugins = webpackConfig.plugins.filter((p)=&gt;p.__next_css_remove !== </span><span class="s2">true</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">((_webpackConfig_optimization = webpackConfig.optimization) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_webpackConfig_optimization_minimizer = _webpackConfig_optimization.minimizer) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _webpackConfig_optimization_minimizer.length) {</span>
            <span class="s4">// Disable CSS Minifier</span>
            <span class="s1">webpackConfig.optimization.minimizer = webpackConfig.optimization.minimizer.filter((e)=&gt;e.__next_css_remove !== </span><span class="s2">true</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s4">// Inject missing React Refresh loaders so that development mode is fast:</span>
    <span class="s2">if </span><span class="s1">(dev &amp;&amp; isClient) {</span>
        <span class="s1">attachReactRefresh(webpackConfig, defaultLoaders.babel);</span>
    <span class="s1">}</span>
    <span class="s4">// Backwards compat for `main.js` entry key</span>
    <span class="s4">// and setup of dependencies between entries</span>
    <span class="s4">// we can't do that in the initial entry for</span>
    <span class="s4">// backward-compat reasons</span>
    <span class="s2">const </span><span class="s1">originalEntry = webpackConfig.entry;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">originalEntry !== </span><span class="s0">'undefined'</span><span class="s1">) {</span>
        <span class="s2">const </span><span class="s1">updatedEntry = async ()=&gt;{</span>
            <span class="s2">const </span><span class="s1">entry = </span><span class="s2">typeof </span><span class="s1">originalEntry === </span><span class="s0">'function' </span><span class="s1">? </span><span class="s2">await </span><span class="s1">originalEntry() : originalEntry;</span>
            <span class="s4">// Server compilation doesn't have main.js</span>
            <span class="s2">if </span><span class="s1">(clientEntries &amp;&amp; Array.isArray(entry[</span><span class="s0">'main.js'</span><span class="s1">]) &amp;&amp; entry[</span><span class="s0">'main.js'</span><span class="s1">].length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
                <span class="s2">const </span><span class="s1">originalFile = clientEntries[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN];</span>
                <span class="s1">entry[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN] = [</span>
                    <span class="s1">...entry[</span><span class="s0">'main.js'</span><span class="s1">],</span>
                    <span class="s1">originalFile</span>
                <span class="s1">];</span>
            <span class="s1">}</span>
            <span class="s2">delete </span><span class="s1">entry[</span><span class="s0">'main.js'</span><span class="s1">];</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">name of Object.keys(entry)){</span>
                <span class="s1">entry[name] = (</span><span class="s3">0</span><span class="s1">, _entries.finalizeEntrypoint)({</span>
                    <span class="s1">value: entry[name],</span>
                    <span class="s1">compilerType,</span>
                    <span class="s1">name,</span>
                    <span class="s1">hasAppDir</span>
                <span class="s1">});</span>
            <span class="s1">}</span>
            <span class="s2">return </span><span class="s1">entry;</span>
        <span class="s1">};</span>
        <span class="s4">// @ts-ignore webpack 5 typings needed</span>
        <span class="s1">webpackConfig.entry = updatedEntry;</span>
    <span class="s1">}</span>
    <span class="s2">if </span><span class="s1">(!dev &amp;&amp; </span><span class="s2">typeof </span><span class="s1">webpackConfig.entry === </span><span class="s0">'function'</span><span class="s1">) {</span>
        <span class="s4">// entry is always a function</span>
        <span class="s1">webpackConfig.entry = </span><span class="s2">await </span><span class="s1">webpackConfig.entry();</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">webpackConfig;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">getNextRootParamsRules({ isRootParamsEnabled, isClient, appDir, pageExtensions }) {</span>
    <span class="s4">// Match resolved import of 'next/root-params'</span>
    <span class="s2">const </span><span class="s1">nextRootParamsModule = _path.default.join(_nextdirpaths.NEXT_PROJECT_ROOT, </span><span class="s0">'root-params.js'</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">createInvalidImportRule = (message)=&gt;{</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">resource: nextRootParamsModule,</span>
            <span class="s1">loader: </span><span class="s0">'next-invalid-import-error-loader'</span><span class="s1">,</span>
            <span class="s1">options: {</span>
                <span class="s1">message</span>
            <span class="s1">}</span>
        <span class="s1">};</span>
    <span class="s1">};</span>
    <span class="s4">// Hard-error if the flag is not enabled, regardless of if we're on the server or on the client.</span>
    <span class="s2">if </span><span class="s1">(!isRootParamsEnabled) {</span>
        <span class="s2">return </span><span class="s1">[</span>
            <span class="s1">createInvalidImportRule(</span><span class="s0">&quot;'next/root-params' can only be imported when `experimental.rootParams` is enabled.&quot;</span><span class="s1">)</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s4">// If there's no app-dir (and thus no layouts), there's no sensible way to use 'next/root-params',</span>
    <span class="s4">// because we wouldn't generate any getters.</span>
    <span class="s2">if </span><span class="s1">(!appDir) {</span>
        <span class="s2">return </span><span class="s1">[</span>
            <span class="s1">createInvalidImportRule(</span><span class="s0">&quot;'next/root-params' can only be used with the App Directory.&quot;</span><span class="s1">)</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s4">// In general, the compiler should prevent importing 'next/root-params' from client modules, but it doesn't catch everything.</span>
    <span class="s4">// If an import slips through our validation, make it error.</span>
    <span class="s2">const </span><span class="s1">invalidClientImportRule = createInvalidImportRule(</span><span class="s0">&quot;'next/root-params' cannot be imported from a Client Component module. It should only be used from a Server Component.&quot;</span><span class="s1">);</span>
    <span class="s4">// in the browser compilation we can skip the server rules, because we know all imports will be invalid.</span>
    <span class="s2">if </span><span class="s1">(isClient) {</span>
        <span class="s2">return </span><span class="s1">[</span>
            <span class="s1">invalidClientImportRule</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">[</span>
        <span class="s1">{</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{</span>
                    <span class="s1">resource: nextRootParamsModule,</span>
                    <span class="s1">issuerLayer: _utils.shouldUseReactServerCondition,</span>
                    <span class="s1">loader: </span><span class="s0">'next-root-params-loader'</span><span class="s1">,</span>
                    <span class="s1">options: {</span>
                        <span class="s1">appDir,</span>
                        <span class="s1">pageExtensions</span>
                    <span class="s1">}</span>
                <span class="s1">},</span>
                <span class="s4">// if the rule above didn't match, we're in the SSR layer (or something else that isn't server-only).</span>
                <span class="s1">invalidClientImportRule</span>
            <span class="s1">]</span>
        <span class="s1">}</span>
    <span class="s1">];</span>
<span class="s1">}</span>

<span class="s4">//# sourceMappingURL=webpack-config.js.map</span></pre>
</body>
</html>