<html>
<head>
<title>get-package-version.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
get-package-version.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/lib/get-package-version.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { promises as fs } from 'fs'</span><span class="s3">\n</span><span class="s1">import findUp from 'next/dist/compiled/find-up'</span><span class="s3">\n</span><span class="s1">import JSON5 from 'next/dist/compiled/json5'</span><span class="s3">\n</span><span class="s1">import * as path from 'path'</span><span class="s3">\n\n</span><span class="s1">type PackageJsonDependencies = {</span><span class="s3">\n  </span><span class="s1">dependencies: Record&lt;string, string&gt;</span><span class="s3">\n  </span><span class="s1">devDependencies: Record&lt;string, string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">let cachedDeps: Promise&lt;PackageJsonDependencies&gt;</span><span class="s3">\n\n</span><span class="s1">export function getDependencies({</span><span class="s3">\n  </span><span class="s1">cwd,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">cwd: string</span><span class="s3">\n</span><span class="s1">}): Promise&lt;PackageJsonDependencies&gt; {</span><span class="s3">\n  </span><span class="s1">if (cachedDeps) {</span><span class="s3">\n    </span><span class="s1">return cachedDeps</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return (cachedDeps = (async () =&gt; {</span><span class="s3">\n    </span><span class="s1">const configurationPath: string | undefined = await findUp('package.json', {</span><span class="s3">\n      </span><span class="s1">cwd,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">if (!configurationPath) {</span><span class="s3">\n      </span><span class="s1">return { dependencies: {}, devDependencies: {} }</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const content = await fs.readFile(configurationPath, 'utf-8')</span><span class="s3">\n    </span><span class="s1">const packageJson: any = JSON5.parse(content)</span><span class="s3">\n\n    </span><span class="s1">const { dependencies = {}, devDependencies = {} } = packageJson || {}</span><span class="s3">\n    </span><span class="s1">return { dependencies, devDependencies }</span><span class="s3">\n  </span><span class="s1">})())</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function getPackageVersion({</span><span class="s3">\n  </span><span class="s1">cwd,</span><span class="s3">\n  </span><span class="s1">name,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">cwd: string</span><span class="s3">\n  </span><span class="s1">name: string</span><span class="s3">\n</span><span class="s1">}): Promise&lt;string | null&gt; {</span><span class="s3">\n  </span><span class="s1">const { dependencies, devDependencies } = await getDependencies({ cwd })</span><span class="s3">\n  </span><span class="s1">if (!(dependencies[name] || devDependencies[name])) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const cwd2 =</span><span class="s3">\n    </span><span class="s1">cwd.endsWith(path.posix.sep) || cwd.endsWith(path.win32.sep)</span><span class="s3">\n      </span><span class="s1">? cwd</span><span class="s3">\n      </span><span class="s1">: `${cwd}/`</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const targetPath = require.resolve(`${name}/package.json`, {</span><span class="s3">\n      </span><span class="s1">paths: [cwd2],</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">const targetContent = await fs.readFile(targetPath, 'utf-8')</span><span class="s3">\n    </span><span class="s1">return JSON5.parse(targetContent).version ?? null</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;getPackageVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedDeps&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;configurationPath&quot;</span><span class="s0">,</span><span class="s1">&quot;findUp&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;devDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJson&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON5&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd2&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;posix&quot;</span><span class="s0">,</span><span class="s1">&quot;sep&quot;</span><span class="s0">,</span><span class="s1">&quot;win32&quot;</span><span class="s0">,</span><span class="s1">&quot;targetPath&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;paths&quot;</span><span class="s0">,</span><span class="s1">&quot;targetContent&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;IAYgBA,eAAe;eAAfA;;IAyBMC,iBAAiB;eAAjBA;;;oBArCS;+DACZ;8DACD;8DACI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtB,IAAIC;AAEG,SAASF,gBAAgB,EAC9BG,GAAG,EAGJ;IACC,IAAID,YAAY;QACd,OAAOA;IACT;IAEA,OAAQA,aAAa,AAAC,CAAA;QACpB,MAAME,oBAAwC,MAAMC,IAAAA,eAAM,EAAC,gBAAgB;YACzEF;QACF;QACA,IAAI,CAACC,mBAAmB;YACtB,OAAO;gBAAEE,cAAc,CAAC;gBAAGC,iBAAiB,CAAC;YAAE;QACjD;QAEA,MAAMC,UAAU,MAAMC,YAAE,CAACC,QAAQ,CAACN,mBAAmB;QACrD,MAAMO,cAAmBC,cAAK,CAACC,KAAK,CAACL;QAErC,MAAM,EAAEF,eAAe,CAAC,CAAC,EAAEC,kBAAkB,CAAC,CAAC,EAAE,GAAGI,eAAe,CAAC;QACpE,OAAO;YAAEL;YAAcC;QAAgB;IACzC,CAAA;AACF;AAEO,eAAeN,kBAAkB,EACtCE,GAAG,EACHW,IAAI,EAIL;IACC,MAAM,EAAER,YAAY,EAAEC,eAAe,EAAE,GAAG,MAAMP,gBAAgB;QAAEG;IAAI;IACtE,IAAI,CAAEG,CAAAA,YAAY,CAACQ,KAAK,IAAIP,eAAe,CAACO,KAAK,AAAD,GAAI;QAClD,OAAO;IACT;IAEA,MAAMC,OACJZ,IAAIa,QAAQ,CAACC,MAAKC,KAAK,CAACC,GAAG,KAAKhB,IAAIa,QAAQ,CAACC,MAAKG,KAAK,CAACD,GAAG,IACvDhB,MACA,GAAGA,IAAI,CAAC,CAAC;IAEf,IAAI;QACF,MAAMkB,aAAaC,QAAQC,OAAO,CAAC,GAAGT,KAAK,aAAa,CAAC,EAAE;YACzDU,OAAO;gBAACT;aAAK;QACf;QACA,MAAMU,gBAAgB,MAAMhB,YAAE,CAACC,QAAQ,CAACW,YAAY;QACpD,OAAOT,cAAK,CAACC,KAAK,CAACY,eAAeC,OAAO,IAAI;IAC/C,EAAE,OAAM;QACN,OAAO;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>