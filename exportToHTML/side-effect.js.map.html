<html>
<head>
<title>side-effect.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
side-effect.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/shared/lib/side-effect.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type React from 'react'</span><span class="s3">\n</span><span class="s1">import { Children, useEffect, useLayoutEffect, type JSX } from 'react'</span><span class="s3">\n\n</span><span class="s1">type State = JSX.Element[] | undefined</span><span class="s3">\n\n</span><span class="s1">export type SideEffectProps = {</span><span class="s3">\n  </span><span class="s1">reduceComponentsToState: &lt;T extends {}&gt;(</span><span class="s3">\n    </span><span class="s1">components: Array&lt;React.ReactElement&lt;any&gt;&gt;,</span><span class="s3">\n    </span><span class="s1">props: T</span><span class="s3">\n  </span><span class="s1">) =&gt; State</span><span class="s3">\n  </span><span class="s1">handleStateChange?: (state: State) =&gt; void</span><span class="s3">\n  </span><span class="s1">headManager: any</span><span class="s3">\n  </span><span class="s1">inAmpMode?: boolean</span><span class="s3">\n  </span><span class="s1">children: React.ReactNode</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const isServer = typeof window === 'undefined'</span><span class="s3">\n</span><span class="s1">const useClientOnlyLayoutEffect = isServer ? () =&gt; {} : useLayoutEffect</span><span class="s3">\n</span><span class="s1">const useClientOnlyEffect = isServer ? () =&gt; {} : useEffect</span><span class="s3">\n\n</span><span class="s1">export default function SideEffect(props: SideEffectProps) {</span><span class="s3">\n  </span><span class="s1">const { headManager, reduceComponentsToState } = props</span><span class="s3">\n\n  </span><span class="s1">function emitChange() {</span><span class="s3">\n    </span><span class="s1">if (headManager &amp;&amp; headManager.mountedInstances) {</span><span class="s3">\n      </span><span class="s1">const headElements = Children.toArray(</span><span class="s3">\n        </span><span class="s1">Array.from(headManager.mountedInstances as Set&lt;React.ReactNode&gt;).filter(</span><span class="s3">\n          </span><span class="s1">Boolean</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">) as React.ReactElement[]</span><span class="s3">\n      </span><span class="s1">headManager.updateHead(reduceComponentsToState(headElements, props))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (isServer) {</span><span class="s3">\n    </span><span class="s1">headManager?.mountedInstances?.add(props.children)</span><span class="s3">\n    </span><span class="s1">emitChange()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">useClientOnlyLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">headManager?.mountedInstances?.add(props.children)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">headManager?.mountedInstances?.delete(props.children)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// We need to call `updateHead` method whenever the `SideEffect` is trigger in all</span><span class="s3">\n  </span><span class="s1">// life-cycles: mount, update, unmount. However, if there are multiple `SideEffect`s</span><span class="s3">\n  </span><span class="s1">// being rendered, we only trigger the method from the last one.</span><span class="s3">\n  </span><span class="s1">// This is ensured by keeping the last unflushed `updateHead` in the `_pendingUpdate`</span><span class="s3">\n  </span><span class="s1">// singleton in the layout effect pass, and actually trigger it in the effect pass.</span><span class="s3">\n  </span><span class="s1">useClientOnlyLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">if (headManager) {</span><span class="s3">\n      </span><span class="s1">headManager._pendingUpdate = emitChange</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">if (headManager) {</span><span class="s3">\n        </span><span class="s1">headManager._pendingUpdate = emitChange</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">useClientOnlyEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">if (headManager &amp;&amp; headManager._pendingUpdate) {</span><span class="s3">\n      </span><span class="s1">headManager._pendingUpdate()</span><span class="s3">\n      </span><span class="s1">headManager._pendingUpdate = null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">if (headManager &amp;&amp; headManager._pendingUpdate) {</span><span class="s3">\n        </span><span class="s1">headManager._pendingUpdate()</span><span class="s3">\n        </span><span class="s1">headManager._pendingUpdate = null</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;SideEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;isServer&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;useClientOnlyLayoutEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;useLayoutEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;useClientOnlyEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;useEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;headManager&quot;</span><span class="s0">,</span><span class="s1">&quot;reduceComponentsToState&quot;</span><span class="s0">,</span><span class="s1">&quot;emitChange&quot;</span><span class="s0">,</span><span class="s1">&quot;mountedInstances&quot;</span><span class="s0">,</span><span class="s1">&quot;headElements&quot;</span><span class="s0">,</span><span class="s1">&quot;Children&quot;</span><span class="s0">,</span><span class="s1">&quot;toArray&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;updateHead&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;_pendingUpdate&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAoBA;;;eAAwBA;;;uBAnBuC;AAe/D,MAAMC,WAAW,OAAOC,WAAW;AACnC,MAAMC,4BAA4BF,WAAW,KAAO,IAAIG,sBAAe;AACvE,MAAMC,sBAAsBJ,WAAW,KAAO,IAAIK,gBAAS;AAE5C,SAASN,WAAWO,KAAsB;IACvD,MAAM,EAAEC,WAAW,EAAEC,uBAAuB,EAAE,GAAGF;IAEjD,SAASG;QACP,IAAIF,eAAeA,YAAYG,gBAAgB,EAAE;YAC/C,MAAMC,eAAeC,eAAQ,CAACC,OAAO,CACnCC,MAAMC,IAAI,CAACR,YAAYG,gBAAgB,EAA0BM,MAAM,CACrEC;YAGJV,YAAYW,UAAU,CAACV,wBAAwBG,cAAcL;QAC/D;IACF;IAEA,IAAIN,UAAU;YACZO;QAAAA,gCAAAA,gCAAAA,YAAaG,gBAAgB,qBAA7BH,8BAA+BY,GAAG,CAACb,MAAMc,QAAQ;QACjDX;IACF;IAEAP,0BAA0B;YACxBK;QAAAA,gCAAAA,gCAAAA,YAAaG,gBAAgB,qBAA7BH,8BAA+BY,GAAG,CAACb,MAAMc,QAAQ;QACjD,OAAO;gBACLb;YAAAA,gCAAAA,gCAAAA,YAAaG,gBAAgB,qBAA7BH,8BAA+Bc,MAAM,CAACf,MAAMc,QAAQ;QACtD;IACF;IAEA,kFAAkF;IAClF,oFAAoF;IACpF,gEAAgE;IAChE,qFAAqF;IACrF,mFAAmF;IACnFlB,0BAA0B;QACxB,IAAIK,aAAa;YACfA,YAAYe,cAAc,GAAGb;QAC/B;QACA,OAAO;YACL,IAAIF,aAAa;gBACfA,YAAYe,cAAc,GAAGb;YAC/B;QACF;IACF;IAEAL,oBAAoB;QAClB,IAAIG,eAAeA,YAAYe,cAAc,EAAE;YAC7Cf,YAAYe,cAAc;YAC1Bf,YAAYe,cAAc,GAAG;QAC/B;QACA,OAAO;YACL,IAAIf,eAAeA,YAAYe,cAAc,EAAE;gBAC7Cf,YAAYe,cAAc;gBAC1Bf,YAAYe,cAAc,GAAG;YAC/B;QACF;IACF;IAEA,OAAO;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>