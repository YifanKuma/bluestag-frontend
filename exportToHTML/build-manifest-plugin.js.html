<html>
<head>
<title>build-manifest-plugin.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #1750eb;}
.s4 { color: #8c8c8c; font-style: italic;}
.s5 { color: #0037a6;}
.s6 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
build-manifest-plugin.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s1">createEdgeRuntimeManifest: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">generateClientManifest: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">getEntrypointFiles: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">normalizeRewritesForBuildManifest: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">processRoute: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">srcEmptySsgManifest: </span><span class="s2">null</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">_export(target, all) {</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">name </span><span class="s2">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s1">createEdgeRuntimeManifest: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">createEdgeRuntimeManifest;</span>
    <span class="s1">},</span>
    <span class="s4">// This plugin creates a build-manifest.json for all assets that are being output</span>
    <span class="s4">// It has a mapping of &quot;entry&quot; filename to real filename. Because the real filename can be hashed in production</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">BuildManifestPlugin;</span>
    <span class="s1">},</span>
    <span class="s1">generateClientManifest: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">generateClientManifest;</span>
    <span class="s1">},</span>
    <span class="s1">getEntrypointFiles: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">getEntrypointFiles;</span>
    <span class="s1">},</span>
    <span class="s1">normalizeRewritesForBuildManifest: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">normalizeRewritesForBuildManifest;</span>
    <span class="s1">},</span>
    <span class="s1">processRoute: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">processRoute;</span>
    <span class="s1">},</span>
    <span class="s1">srcEmptySsgManifest: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">srcEmptySsgManifest;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_devalue = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;next/dist/compiled/devalue&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_webpack = require(</span><span class="s0">&quot;next/dist/compiled/webpack/webpack&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_constants = require(</span><span class="s0">&quot;../../../shared/lib/constants&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_getroutefromentrypoint = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;../../../server/get-route-from-entrypoint&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_nextdropclientpageplugin = require(</span><span class="s0">&quot;./next-drop-client-page-plugin&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_utils = require(</span><span class="s0">&quot;../../../shared/lib/router/utils&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_trace = require(</span><span class="s0">&quot;../../../trace&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_utils1 = require(</span><span class="s0">&quot;../utils&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">_interop_require_default(obj) {</span>
    <span class="s2">return </span><span class="s1">obj &amp;&amp; obj.__esModule ? obj : {</span>
        <span class="s2">default</span><span class="s1">: obj</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">srcEmptySsgManifest = </span><span class="s0">`self.__SSG_MANIFEST=new Set;self.__SSG_MANIFEST_CB&amp;&amp;self.__SSG_MANIFEST_CB()`</span><span class="s1">;</span>
<span class="s4">// nodejs: '/static/&lt;build id&gt;/low-priority.js'</span>
<span class="s2">function </span><span class="s1">buildNodejsLowPriorityPath(filename, buildId) {</span>
    <span class="s2">return </span><span class="s0">`</span><span class="s1">${_constants.CLIENT_STATIC_FILES_PATH}</span><span class="s0">/</span><span class="s1">${buildId}</span><span class="s0">/</span><span class="s1">${filename}</span><span class="s0">`</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">createEdgeRuntimeManifest(originAssetMap) {</span>
    <span class="s2">const </span><span class="s1">manifestFilenames = [</span>
        <span class="s0">'_buildManifest.js'</span><span class="s1">,</span>
        <span class="s0">'_ssgManifest.js'</span>
    <span class="s1">];</span>
    <span class="s2">const </span><span class="s1">assetMap = {</span>
        <span class="s1">...originAssetMap,</span>
        <span class="s1">lowPriorityFiles: []</span>
    <span class="s1">};</span>
    <span class="s4">// we use globalThis here because middleware can be node</span>
    <span class="s4">// which doesn't have &quot;self&quot;</span>
    <span class="s2">const </span><span class="s1">manifestDefCode = </span><span class="s0">`globalThis.__BUILD_MANIFEST = </span><span class="s1">${JSON.stringify(assetMap, </span><span class="s2">null</span><span class="s1">, </span><span class="s3">2</span><span class="s1">)}</span><span class="s0">;</span><span class="s5">\n</span><span class="s0">`</span><span class="s1">;</span>
    <span class="s4">// edge lowPriorityFiles item: '&quot;/static/&quot; + process.env.__NEXT_BUILD_ID + &quot;/low-priority.js&quot;'.</span>
    <span class="s4">// Since lowPriorityFiles is not fixed and relying on `process.env.__NEXT_BUILD_ID`, we'll produce code creating it dynamically.</span>
    <span class="s2">const </span><span class="s1">lowPriorityFilesCode = </span><span class="s0">`globalThis.__BUILD_MANIFEST.lowPriorityFiles = [</span><span class="s5">\n</span><span class="s0">` </span><span class="s1">+ manifestFilenames.map((filename)=&gt;{</span>
        <span class="s2">return </span><span class="s0">`&quot;/static/&quot; + process.env.__NEXT_BUILD_ID + &quot;/</span><span class="s1">${filename}</span><span class="s0">&quot;,</span><span class="s5">\n</span><span class="s0">`</span><span class="s1">;</span>
    <span class="s1">}).join(</span><span class="s0">','</span><span class="s1">) + </span><span class="s0">`</span><span class="s5">\n</span><span class="s0">];`</span><span class="s1">;</span>
    <span class="s2">return </span><span class="s1">manifestDefCode + lowPriorityFilesCode;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">normalizeRewrite(item) {</span>
    <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">has: item.has,</span>
        <span class="s1">source: item.source,</span>
        <span class="s1">destination: item.destination</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">normalizeRewritesForBuildManifest(rewrites) {</span>
    <span class="s2">var </span><span class="s1">_rewrites_afterFiles_map, _rewrites_afterFiles, _rewrites_beforeFiles_map, _rewrites_beforeFiles, _rewrites_fallback_map, _rewrites_fallback;</span>
    <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">afterFiles: (_rewrites_afterFiles = rewrites.afterFiles) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_rewrites_afterFiles_map = _rewrites_afterFiles.map(processRoute)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _rewrites_afterFiles_map.map((item)=&gt;normalizeRewrite(item)),</span>
        <span class="s1">beforeFiles: (_rewrites_beforeFiles = rewrites.beforeFiles) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_rewrites_beforeFiles_map = _rewrites_beforeFiles.map(processRoute)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _rewrites_beforeFiles_map.map((item)=&gt;normalizeRewrite(item)),</span>
        <span class="s1">fallback: (_rewrites_fallback = rewrites.fallback) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_rewrites_fallback_map = _rewrites_fallback.map(processRoute)) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _rewrites_fallback_map.map((item)=&gt;normalizeRewrite(item))</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">generateClientManifest(assetMap, rewrites, clientRouterFilters, compiler, compilation) {</span>
    <span class="s2">const </span><span class="s1">compilationSpan = compilation ? (</span><span class="s3">0</span><span class="s1">, _utils1.getCompilationSpan)(compilation) : compiler ? (</span><span class="s3">0</span><span class="s1">, _utils1.getCompilationSpan)(compiler) : </span><span class="s2">new </span><span class="s1">_trace.Span({</span>
        <span class="s1">name: </span><span class="s0">'client-manifest'</span>
    <span class="s1">});</span>
    <span class="s2">const </span><span class="s1">genClientManifestSpan = compilationSpan == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: compilationSpan.traceChild(</span><span class="s0">'NextJsBuildManifest-generateClientManifest'</span><span class="s1">);</span>
    <span class="s2">return </span><span class="s1">genClientManifestSpan == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: genClientManifestSpan.traceFn(()=&gt;{</span>
        <span class="s2">const </span><span class="s1">clientManifest = {</span>
            <span class="s1">__rewrites: normalizeRewritesForBuildManifest(rewrites),</span>
            <span class="s1">__routerFilterStatic: clientRouterFilters == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: clientRouterFilters.staticFilter,</span>
            <span class="s1">__routerFilterDynamic: clientRouterFilters == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: clientRouterFilters.dynamicFilter</span>
        <span class="s1">};</span>
        <span class="s2">const </span><span class="s1">appDependencies = </span><span class="s2">new </span><span class="s1">Set(assetMap.pages[</span><span class="s0">'/_app'</span><span class="s1">]);</span>
        <span class="s2">const </span><span class="s1">sortedPageKeys = (</span><span class="s3">0</span><span class="s1">, _utils.getSortedRoutes)(Object.keys(assetMap.pages));</span>
        <span class="s1">sortedPageKeys.forEach((page)=&gt;{</span>
            <span class="s2">const </span><span class="s1">dependencies = assetMap.pages[page];</span>
            <span class="s2">if </span><span class="s1">(page === </span><span class="s0">'/_app'</span><span class="s1">) </span><span class="s2">return</span><span class="s1">;</span>
            <span class="s4">// Filter out dependencies in the _app entry, because those will have already</span>
            <span class="s4">// been loaded by the client prior to a navigation event</span>
            <span class="s2">const </span><span class="s1">filteredDeps = dependencies.filter((dep)=&gt;!appDependencies.has(dep));</span>
            <span class="s4">// The manifest can omit the page if it has no requirements</span>
            <span class="s2">if </span><span class="s1">(filteredDeps.length) {</span>
                <span class="s1">clientManifest[page] = filteredDeps;</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
        <span class="s4">// provide the sorted pages as an array so we don't rely on the object's keys</span>
        <span class="s4">// being in order and we don't slow down look-up time for page assets</span>
        <span class="s1">clientManifest.sortedPages = sortedPageKeys;</span>
        <span class="s2">return </span><span class="s1">(</span><span class="s3">0</span><span class="s1">, _devalue.default)(clientManifest);</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">getEntrypointFiles(entrypoint) {</span>
    <span class="s2">return </span><span class="s1">(entrypoint == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: entrypoint.getFiles().filter((file)=&gt;{</span>
        <span class="s4">// We don't want to include `.hot-update.js` files into the initial page</span>
        <span class="s2">return </span><span class="s6">/(?&lt;!\.hot-update)\.(js|css)($|\?)/</span><span class="s1">.test(file);</span>
    <span class="s1">}).map((file)=&gt;file.replace(</span><span class="s6">/\\/g</span><span class="s1">, </span><span class="s0">'/'</span><span class="s1">))) ?? [];</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">processRoute = (r)=&gt;{</span>
    <span class="s2">var </span><span class="s1">_rewrite_destination;</span>
    <span class="s2">const </span><span class="s1">rewrite = {</span>
        <span class="s1">...r</span>
    <span class="s1">};</span>
    <span class="s4">// omit external rewrite destinations since these aren't</span>
    <span class="s4">// handled client-side</span>
    <span class="s2">if </span><span class="s1">(!(rewrite == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: (_rewrite_destination = rewrite.destination) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _rewrite_destination.startsWith(</span><span class="s0">'/'</span><span class="s1">))) {</span>
        <span class="s2">delete </span><span class="s1">rewrite.destination;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">rewrite;</span>
<span class="s1">};</span>
<span class="s2">class </span><span class="s1">BuildManifestPlugin {</span>
    <span class="s1">constructor(options){</span>
        <span class="s2">this</span><span class="s1">.buildId = options.buildId;</span>
        <span class="s2">this</span><span class="s1">.isDevFallback = !!options.isDevFallback;</span>
        <span class="s2">this</span><span class="s1">.rewrites = {</span>
            <span class="s1">beforeFiles: [],</span>
            <span class="s1">afterFiles: [],</span>
            <span class="s1">fallback: []</span>
        <span class="s1">};</span>
        <span class="s2">this</span><span class="s1">.appDirEnabled = options.appDirEnabled;</span>
        <span class="s2">this</span><span class="s1">.clientRouterFilters = options.clientRouterFilters;</span>
        <span class="s2">this</span><span class="s1">.rewrites.beforeFiles = options.rewrites.beforeFiles.map(processRoute);</span>
        <span class="s2">this</span><span class="s1">.rewrites.afterFiles = options.rewrites.afterFiles.map(processRoute);</span>
        <span class="s2">this</span><span class="s1">.rewrites.fallback = options.rewrites.fallback.map(processRoute);</span>
    <span class="s1">}</span>
    <span class="s1">createAssets(compiler, compilation) {</span>
        <span class="s2">const </span><span class="s1">compilationSpan = (</span><span class="s3">0</span><span class="s1">, _utils1.getCompilationSpan)(compilation) ?? (</span><span class="s3">0</span><span class="s1">, _utils1.getCompilationSpan)(compiler);</span>
        <span class="s2">if </span><span class="s1">(!compilationSpan) {</span>
            <span class="s2">throw </span><span class="s1">Object.defineProperty(</span><span class="s2">new </span><span class="s1">Error(</span><span class="s0">'No span found for compilation'</span><span class="s1">), </span><span class="s0">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s1">, {</span>
                <span class="s1">value: </span><span class="s0">&quot;E646&quot;</span><span class="s1">,</span>
                <span class="s1">enumerable: </span><span class="s2">false</span><span class="s1">,</span>
                <span class="s1">configurable: </span><span class="s2">true</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">createAssetsSpan = compilationSpan.traceChild(</span><span class="s0">'NextJsBuildManifest-createassets'</span><span class="s1">);</span>
        <span class="s2">return </span><span class="s1">createAssetsSpan.traceFn(()=&gt;{</span>
            <span class="s2">const </span><span class="s1">entrypoints = compilation.entrypoints;</span>
            <span class="s2">const </span><span class="s1">assetMap = {</span>
                <span class="s1">polyfillFiles: [],</span>
                <span class="s1">devFiles: [],</span>
                <span class="s1">ampDevFiles: [],</span>
                <span class="s1">lowPriorityFiles: [],</span>
                <span class="s1">rootMainFiles: [],</span>
                <span class="s1">rootMainFilesTree: {},</span>
                <span class="s1">pages: {</span>
                    <span class="s0">'/_app'</span><span class="s1">: []</span>
                <span class="s1">},</span>
                <span class="s1">ampFirstPages: []</span>
            <span class="s1">};</span>
            <span class="s2">const </span><span class="s1">ampFirstEntryNames = _nextdropclientpageplugin.ampFirstEntryNamesMap.get(compilation);</span>
            <span class="s2">if </span><span class="s1">(ampFirstEntryNames) {</span>
                <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">entryName of ampFirstEntryNames){</span>
                    <span class="s2">const </span><span class="s1">pagePath = (</span><span class="s3">0</span><span class="s1">, _getroutefromentrypoint.default)(entryName);</span>
                    <span class="s2">if </span><span class="s1">(!pagePath) {</span>
                        <span class="s2">continue</span><span class="s1">;</span>
                    <span class="s1">}</span>
                    <span class="s1">assetMap.ampFirstPages.push(pagePath);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s2">const </span><span class="s1">mainFiles = </span><span class="s2">new </span><span class="s1">Set(getEntrypointFiles(entrypoints.get(_constants.CLIENT_STATIC_FILES_RUNTIME_MAIN)));</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.appDirEnabled) {</span>
                <span class="s1">assetMap.rootMainFiles = [</span>
                    <span class="s1">...</span><span class="s2">new </span><span class="s1">Set(getEntrypointFiles(entrypoints.get(_constants.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP)))</span>
                <span class="s1">];</span>
            <span class="s1">}</span>
            <span class="s2">const </span><span class="s1">compilationAssets = compilation.getAssets();</span>
            <span class="s1">assetMap.polyfillFiles = compilationAssets.filter((p)=&gt;{</span>
                <span class="s4">// Ensure only .js files are passed through</span>
                <span class="s2">if </span><span class="s1">(!p.name.endsWith(</span><span class="s0">'.js'</span><span class="s1">)) {</span>
                    <span class="s2">return false</span><span class="s1">;</span>
                <span class="s1">}</span>
                <span class="s2">return </span><span class="s1">p.info &amp;&amp; _constants.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL </span><span class="s2">in </span><span class="s1">p.info;</span>
            <span class="s1">}).map((v)=&gt;v.name);</span>
            <span class="s1">assetMap.devFiles = getEntrypointFiles(entrypoints.get(_constants.CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH)).filter((file)=&gt;!mainFiles.has(file));</span>
            <span class="s1">assetMap.ampDevFiles = getEntrypointFiles(entrypoints.get(_constants.CLIENT_STATIC_FILES_RUNTIME_AMP));</span>
            <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">entrypoint of compilation.entrypoints.values()){</span>
                <span class="s2">if </span><span class="s1">(_constants.SYSTEM_ENTRYPOINTS.has(entrypoint.name)) </span><span class="s2">continue</span><span class="s1">;</span>
                <span class="s2">const </span><span class="s1">pagePath = (</span><span class="s3">0</span><span class="s1">, _getroutefromentrypoint.default)(entrypoint.name);</span>
                <span class="s2">if </span><span class="s1">(!pagePath) {</span>
                    <span class="s2">continue</span><span class="s1">;</span>
                <span class="s1">}</span>
                <span class="s2">const </span><span class="s1">filesForPage = getEntrypointFiles(entrypoint);</span>
                <span class="s1">assetMap.pages[pagePath] = [</span>
                    <span class="s1">...</span><span class="s2">new </span><span class="s1">Set([</span>
                        <span class="s1">...mainFiles,</span>
                        <span class="s1">...filesForPage</span>
                    <span class="s1">])</span>
                <span class="s1">];</span>
            <span class="s1">}</span>
            <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">.isDevFallback) {</span>
                <span class="s4">// Add the runtime build manifest file (generated later in this file)</span>
                <span class="s4">// as a dependency for the app. If the flag is false, the file won't be</span>
                <span class="s4">// downloaded by the client.</span>
                <span class="s2">const </span><span class="s1">buildManifestPath = buildNodejsLowPriorityPath(</span><span class="s0">'_buildManifest.js'</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.buildId);</span>
                <span class="s2">const </span><span class="s1">ssgManifestPath = buildNodejsLowPriorityPath(</span><span class="s0">'_ssgManifest.js'</span><span class="s1">, </span><span class="s2">this</span><span class="s1">.buildId);</span>
                <span class="s1">assetMap.lowPriorityFiles.push(buildManifestPath, ssgManifestPath);</span>
                <span class="s1">compilation.emitAsset(ssgManifestPath, </span><span class="s2">new </span><span class="s1">_webpack.sources.RawSource(srcEmptySsgManifest));</span>
            <span class="s1">}</span>
            <span class="s1">assetMap.pages = Object.keys(assetMap.pages).sort().reduce(</span><span class="s4">// eslint-disable-next-line</span>
            <span class="s1">(a, c)=&gt;(a[c] = assetMap.pages[c], a), {});</span>
            <span class="s2">let </span><span class="s1">buildManifestName = _constants.BUILD_MANIFEST;</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isDevFallback) {</span>
                <span class="s1">buildManifestName = </span><span class="s0">`fallback-</span><span class="s1">${_constants.BUILD_MANIFEST}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s1">compilation.emitAsset(buildManifestName, </span><span class="s2">new </span><span class="s1">_webpack.sources.RawSource(JSON.stringify(assetMap, </span><span class="s2">null</span><span class="s1">, </span><span class="s3">2</span><span class="s1">)));</span>
            <span class="s1">compilation.emitAsset(</span><span class="s0">`server/</span><span class="s1">${_constants.MIDDLEWARE_BUILD_MANIFEST}</span><span class="s0">.js`</span><span class="s1">, </span><span class="s2">new </span><span class="s1">_webpack.sources.RawSource(</span><span class="s0">`</span><span class="s1">${createEdgeRuntimeManifest(assetMap)}</span><span class="s0">`</span><span class="s1">));</span>
            <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">.isDevFallback) {</span>
                <span class="s1">compilation.emitAsset(</span><span class="s0">`</span><span class="s1">${_constants.CLIENT_STATIC_FILES_PATH}</span><span class="s0">/</span><span class="s1">${</span><span class="s2">this</span><span class="s1">.buildId}</span><span class="s0">/_buildManifest.js`</span><span class="s1">, </span><span class="s2">new </span><span class="s1">_webpack.sources.RawSource(</span><span class="s0">`self.__BUILD_MANIFEST = </span><span class="s1">${generateClientManifest(assetMap, </span><span class="s2">this</span><span class="s1">.rewrites, </span><span class="s2">this</span><span class="s1">.clientRouterFilters, compiler, compilation)}</span><span class="s0">;self.__BUILD_MANIFEST_CB &amp;&amp; self.__BUILD_MANIFEST_CB()`</span><span class="s1">));</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s1">apply(compiler) {</span>
        <span class="s1">compiler.hooks.make.tap(</span><span class="s0">'NextJsBuildManifest'</span><span class="s1">, (compilation)=&gt;{</span>
            <span class="s1">compilation.hooks.processAssets.tap({</span>
                <span class="s1">name: </span><span class="s0">'NextJsBuildManifest'</span><span class="s1">,</span>
                <span class="s1">stage: _webpack.webpack.Compilation.PROCESS_ASSETS_STAGE_ADDITIONS</span>
            <span class="s1">}, ()=&gt;{</span>
                <span class="s2">this</span><span class="s1">.createAssets(compiler, compilation);</span>
            <span class="s1">});</span>
        <span class="s1">});</span>
        <span class="s2">return</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s4">//# sourceMappingURL=build-manifest-plugin.js.map</span></pre>
</body>
</html>