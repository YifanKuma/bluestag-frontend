<html>
<head>
<title>watchpack.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #0033b3;}
.s2 { color: #1750eb;}
.s3 { color: #067d17;}
.s4 { color: #0037a6;}
.s5 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
watchpack.js</font>
</center></td></tr></table>
<pre><span class="s0">(()=&gt;{</span><span class="s1">var </span><span class="s0">e={</span><span class="s2">660</span><span class="s0">:e=&gt;{e.exports=</span><span class="s1">function</span><span class="s0">(e,t){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">e!==</span><span class="s3">&quot;string&quot;</span><span class="s0">){</span><span class="s1">throw new </span><span class="s0">TypeError(</span><span class="s3">&quot;Expected a string&quot;</span><span class="s0">)}</span><span class="s1">var </span><span class="s0">i=String(e);</span><span class="s1">var </span><span class="s0">s=</span><span class="s3">&quot;&quot;</span><span class="s0">;</span><span class="s1">var </span><span class="s0">r=t?!!t.extended:</span><span class="s1">false</span><span class="s0">;</span><span class="s1">var </span><span class="s0">n=t?!!t.globstar:</span><span class="s1">false</span><span class="s0">;</span><span class="s1">var </span><span class="s0">c=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">var </span><span class="s0">a=t&amp;&amp;</span><span class="s1">typeof </span><span class="s0">t.flags===</span><span class="s3">&quot;string&quot;</span><span class="s0">?t.flags:</span><span class="s3">&quot;&quot;</span><span class="s0">;</span><span class="s1">var </span><span class="s0">o;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">var </span><span class="s0">h=</span><span class="s2">0</span><span class="s0">,f=i.length;h&lt;f;h++){o=i[h];</span><span class="s1">switch</span><span class="s0">(o){</span><span class="s1">case</span><span class="s3">&quot;/&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;$&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;^&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;+&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;.&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;(&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;)&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;=&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;!&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;|&quot;</span><span class="s0">:s+=</span><span class="s3">&quot;</span><span class="s4">\\</span><span class="s3">&quot;</span><span class="s0">+o;</span><span class="s1">break</span><span class="s0">;</span><span class="s1">case</span><span class="s3">&quot;?&quot;</span><span class="s0">:</span><span class="s1">if</span><span class="s0">(r){s+=</span><span class="s3">&quot;.&quot;</span><span class="s0">;</span><span class="s1">break</span><span class="s0">}</span><span class="s1">case</span><span class="s3">&quot;[&quot;</span><span class="s0">:</span><span class="s1">case</span><span class="s3">&quot;]&quot;</span><span class="s0">:</span><span class="s1">if</span><span class="s0">(r){s+=o;</span><span class="s1">break</span><span class="s0">}</span><span class="s1">case</span><span class="s3">&quot;{&quot;</span><span class="s0">:</span><span class="s1">if</span><span class="s0">(r){c=</span><span class="s1">true</span><span class="s0">;s+=</span><span class="s3">&quot;(&quot;</span><span class="s0">;</span><span class="s1">break</span><span class="s0">}</span><span class="s1">case</span><span class="s3">&quot;}&quot;</span><span class="s0">:</span><span class="s1">if</span><span class="s0">(r){c=</span><span class="s1">false</span><span class="s0">;s+=</span><span class="s3">&quot;)&quot;</span><span class="s0">;</span><span class="s1">break</span><span class="s0">}</span><span class="s1">case</span><span class="s3">&quot;,&quot;</span><span class="s0">:</span><span class="s1">if</span><span class="s0">(c){s+=</span><span class="s3">&quot;|&quot;</span><span class="s0">;</span><span class="s1">break</span><span class="s0">}s+=</span><span class="s3">&quot;</span><span class="s4">\\</span><span class="s3">&quot;</span><span class="s0">+o;</span><span class="s1">break</span><span class="s0">;</span><span class="s1">case</span><span class="s3">&quot;*&quot;</span><span class="s0">:</span><span class="s1">var </span><span class="s0">l=i[h-</span><span class="s2">1</span><span class="s0">];</span><span class="s1">var </span><span class="s0">u=</span><span class="s2">1</span><span class="s0">;</span><span class="s1">while</span><span class="s0">(i[h+</span><span class="s2">1</span><span class="s0">]===</span><span class="s3">&quot;*&quot;</span><span class="s0">){u++;h++}</span><span class="s1">var </span><span class="s0">d=i[h+</span><span class="s2">1</span><span class="s0">];</span><span class="s1">if</span><span class="s0">(!n){s+=</span><span class="s3">&quot;.*&quot;</span><span class="s0">}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">var </span><span class="s0">p=u&gt;</span><span class="s2">1</span><span class="s0">&amp;&amp;(l===</span><span class="s3">&quot;/&quot;</span><span class="s0">||l===undefined)&amp;&amp;(d===</span><span class="s3">&quot;/&quot;</span><span class="s0">||d===undefined);</span><span class="s1">if</span><span class="s0">(p){s+=</span><span class="s3">&quot;((?:[^/]*(?:/|$))*)&quot;</span><span class="s0">;h++}</span><span class="s1">else</span><span class="s0">{s+=</span><span class="s3">&quot;([^/]*)&quot;</span><span class="s0">}}</span><span class="s1">break</span><span class="s0">;</span><span class="s1">default</span><span class="s0">:s+=o}}</span><span class="s1">if</span><span class="s0">(!a||!~a.indexOf(</span><span class="s3">&quot;g&quot;</span><span class="s0">)){s=</span><span class="s3">&quot;^&quot;</span><span class="s0">+s+</span><span class="s3">&quot;$&quot;</span><span class="s0">}</span><span class="s1">return new </span><span class="s0">RegExp(s,a)}},</span><span class="s2">567</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=clone;</span><span class="s1">var </span><span class="s0">t=Object.getPrototypeOf||</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">return </span><span class="s0">e.__proto__};</span><span class="s1">function </span><span class="s0">clone(e){</span><span class="s1">if</span><span class="s0">(e===</span><span class="s1">null</span><span class="s0">||</span><span class="s1">typeof </span><span class="s0">e!==</span><span class="s3">&quot;object&quot;</span><span class="s0">)</span><span class="s1">return </span><span class="s0">e;</span><span class="s1">if</span><span class="s0">(e </span><span class="s1">instanceof </span><span class="s0">Object)</span><span class="s1">var </span><span class="s0">i={__proto__:t(e)};</span><span class="s1">else var </span><span class="s0">i=Object.create(</span><span class="s1">null</span><span class="s0">);Object.getOwnPropertyNames(e).forEach((</span><span class="s1">function</span><span class="s0">(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}));</span><span class="s1">return </span><span class="s0">i}},</span><span class="s2">450</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s1">var </span><span class="s0">s=i(</span><span class="s2">147</span><span class="s0">);</span><span class="s1">var </span><span class="s0">r=i(</span><span class="s2">164</span><span class="s0">);</span><span class="s1">var </span><span class="s0">n=i(</span><span class="s2">873</span><span class="s0">);</span><span class="s1">var </span><span class="s0">c=i(</span><span class="s2">567</span><span class="s0">);</span><span class="s1">var </span><span class="s0">a=i(</span><span class="s2">837</span><span class="s0">);</span><span class="s1">var </span><span class="s0">o;</span><span class="s1">var </span><span class="s0">h;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">Symbol===</span><span class="s3">&quot;function&quot;</span><span class="s0">&amp;&amp;</span><span class="s1">typeof </span><span class="s0">Symbol.for===</span><span class="s3">&quot;function&quot;</span><span class="s0">){o=Symbol.for(</span><span class="s3">&quot;graceful-fs.queue&quot;</span><span class="s0">);h=Symbol.for(</span><span class="s3">&quot;graceful-fs.previous&quot;</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{o=</span><span class="s3">&quot;___graceful-fs.queue&quot;</span><span class="s0">;h=</span><span class="s3">&quot;___graceful-fs.previous&quot;</span><span class="s0">}</span><span class="s1">function </span><span class="s0">noop(){}</span><span class="s1">function </span><span class="s0">publishQueue(e,t){Object.defineProperty(e,o,{get:</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">return </span><span class="s0">t}})}</span><span class="s1">var </span><span class="s0">f=noop;</span><span class="s1">if</span><span class="s0">(a.debuglog)f=a.debuglog(</span><span class="s3">&quot;gfs4&quot;</span><span class="s0">);</span><span class="s1">else if</span><span class="s0">(</span><span class="s5">/\bgfs4\b/i</span><span class="s0">.test(process.env.NODE_DEBUG||</span><span class="s3">&quot;&quot;</span><span class="s0">))f=</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">var </span><span class="s0">e=a.format.apply(a,arguments);e=</span><span class="s3">&quot;GFS4: &quot;</span><span class="s0">+e.split(</span><span class="s5">/\n/</span><span class="s0">).join(</span><span class="s3">&quot;</span><span class="s4">\n</span><span class="s3">GFS4: &quot;</span><span class="s0">);console.error(e)};</span><span class="s1">if</span><span class="s0">(!s[o]){</span><span class="s1">var </span><span class="s0">l=global[o]||[];publishQueue(s,l);s.close=</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">function </span><span class="s0">close(t,i){</span><span class="s1">return </span><span class="s0">e.call(s,t,(</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(!e){resetQueue()}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">)i.apply(</span><span class="s1">this</span><span class="s0">,arguments)}))}Object.defineProperty(close,h,{value:e});</span><span class="s1">return </span><span class="s0">close}(s.close);s.closeSync=</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">function </span><span class="s0">closeSync(t){e.apply(s,arguments);resetQueue()}Object.defineProperty(closeSync,h,{value:e});</span><span class="s1">return </span><span class="s0">closeSync}(s.closeSync);</span><span class="s1">if</span><span class="s0">(</span><span class="s5">/\bgfs4\b/i</span><span class="s0">.test(process.env.NODE_DEBUG||</span><span class="s3">&quot;&quot;</span><span class="s0">)){process.on(</span><span class="s3">&quot;exit&quot;</span><span class="s0">,(</span><span class="s1">function</span><span class="s0">(){f(s[o]);i(</span><span class="s2">491</span><span class="s0">).equal(s[o].length,</span><span class="s2">0</span><span class="s0">)}))}}</span><span class="s1">if</span><span class="s0">(!global[o]){publishQueue(global,s[o])}e.exports=patch(c(s));</span><span class="s1">if</span><span class="s0">(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&amp;&amp;!s.__patched){e.exports=patch(s);s.__patched=</span><span class="s1">true</span><span class="s0">}</span><span class="s1">function </span><span class="s0">patch(e){r(e);e.gracefulify=patch;e.createReadStream=createReadStream;e.createWriteStream=createWriteStream;</span><span class="s1">var </span><span class="s0">t=e.readFile;e.readFile=readFile;</span><span class="s1">function </span><span class="s0">readFile(e,i,s){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">)s=i,i=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">return </span><span class="s0">go$readFile(e,i,s);</span><span class="s1">function </span><span class="s0">go$readFile(e,i,s,r){</span><span class="s1">return </span><span class="s0">t(e,i,(</span><span class="s1">function</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(t&amp;&amp;(t.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||t.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([go$readFile,[e,i,s],t,r||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">s===</span><span class="s3">&quot;function&quot;</span><span class="s0">)s.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}))}}</span><span class="s1">var </span><span class="s0">i=e.writeFile;e.writeFile=writeFile;</span><span class="s1">function </span><span class="s0">writeFile(e,t,s,r){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">s===</span><span class="s3">&quot;function&quot;</span><span class="s0">)r=s,s=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">return </span><span class="s0">go$writeFile(e,t,s,r);</span><span class="s1">function </span><span class="s0">go$writeFile(e,t,s,r,n){</span><span class="s1">return </span><span class="s0">i(e,t,s,(</span><span class="s1">function</span><span class="s0">(i){</span><span class="s1">if</span><span class="s0">(i&amp;&amp;(i.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||i.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([go$writeFile,[e,t,s,r],i,n||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">r===</span><span class="s3">&quot;function&quot;</span><span class="s0">)r.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}))}}</span><span class="s1">var </span><span class="s0">s=e.appendFile;</span><span class="s1">if</span><span class="s0">(s)e.appendFile=appendFile;</span><span class="s1">function </span><span class="s0">appendFile(e,t,i,r){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">)r=i,i=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">return </span><span class="s0">go$appendFile(e,t,i,r);</span><span class="s1">function </span><span class="s0">go$appendFile(e,t,i,r,n){</span><span class="s1">return </span><span class="s0">s(e,t,i,(</span><span class="s1">function</span><span class="s0">(s){</span><span class="s1">if</span><span class="s0">(s&amp;&amp;(s.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||s.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([go$appendFile,[e,t,i,r],s,n||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">r===</span><span class="s3">&quot;function&quot;</span><span class="s0">)r.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}))}}</span><span class="s1">var </span><span class="s0">c=e.copyFile;</span><span class="s1">if</span><span class="s0">(c)e.copyFile=copyFile;</span><span class="s1">function </span><span class="s0">copyFile(e,t,i,s){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">){s=i;i=</span><span class="s2">0</span><span class="s0">}</span><span class="s1">return </span><span class="s0">go$copyFile(e,t,i,s);</span><span class="s1">function </span><span class="s0">go$copyFile(e,t,i,s,r){</span><span class="s1">return </span><span class="s0">c(e,t,i,(</span><span class="s1">function</span><span class="s0">(n){</span><span class="s1">if</span><span class="s0">(n&amp;&amp;(n.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||n.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([go$copyFile,[e,t,i,s],n,r||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">s===</span><span class="s3">&quot;function&quot;</span><span class="s0">)s.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}))}}</span><span class="s1">var </span><span class="s0">a=e.readdir;e.readdir=readdir;</span><span class="s1">var </span><span class="s0">o=</span><span class="s5">/^v[0-5]\./</span><span class="s0">;</span><span class="s1">function </span><span class="s0">readdir(e,t,i){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">t===</span><span class="s3">&quot;function&quot;</span><span class="s0">)i=t,t=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">var </span><span class="s0">s=o.test(process.version)?</span><span class="s1">function </span><span class="s0">go$readdir(e,t,i,s){</span><span class="s1">return </span><span class="s0">a(e,fs$readdirCallback(e,t,i,s))}:</span><span class="s1">function </span><span class="s0">go$readdir(e,t,i,s){</span><span class="s1">return </span><span class="s0">a(e,t,fs$readdirCallback(e,t,i,s))};</span><span class="s1">return </span><span class="s0">s(e,t,i);</span><span class="s1">function </span><span class="s0">fs$readdirCallback(e,t,i,r){</span><span class="s1">return function</span><span class="s0">(n,c){</span><span class="s1">if</span><span class="s0">(n&amp;&amp;(n.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||n.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([s,[e,t,i],n,r||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(c&amp;&amp;c.sort)c.sort();</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">)i.call(</span><span class="s1">this</span><span class="s0">,n,c)}}}}</span><span class="s1">if</span><span class="s0">(process.version.substr(</span><span class="s2">0</span><span class="s0">,</span><span class="s2">4</span><span class="s0">)===</span><span class="s3">&quot;v0.8&quot;</span><span class="s0">){</span><span class="s1">var </span><span class="s0">h=n(e);ReadStream=h.ReadStream;WriteStream=h.WriteStream}</span><span class="s1">var </span><span class="s0">f=e.ReadStream;</span><span class="s1">if</span><span class="s0">(f){ReadStream.prototype=Object.create(f.prototype);ReadStream.prototype.open=ReadStream$open}</span><span class="s1">var </span><span class="s0">l=e.WriteStream;</span><span class="s1">if</span><span class="s0">(l){WriteStream.prototype=Object.create(l.prototype);WriteStream.prototype.open=WriteStream$open}Object.defineProperty(e,</span><span class="s3">&quot;ReadStream&quot;</span><span class="s0">,{get:</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">return </span><span class="s0">ReadStream},set:</span><span class="s1">function</span><span class="s0">(e){ReadStream=e},enumerable:</span><span class="s1">true</span><span class="s0">,configurable:</span><span class="s1">true</span><span class="s0">});Object.defineProperty(e,</span><span class="s3">&quot;WriteStream&quot;</span><span class="s0">,{get:</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">return </span><span class="s0">WriteStream},set:</span><span class="s1">function</span><span class="s0">(e){WriteStream=e},enumerable:</span><span class="s1">true</span><span class="s0">,configurable:</span><span class="s1">true</span><span class="s0">});</span><span class="s1">var </span><span class="s0">u=ReadStream;Object.defineProperty(e,</span><span class="s3">&quot;FileReadStream&quot;</span><span class="s0">,{get:</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">return </span><span class="s0">u},set:</span><span class="s1">function</span><span class="s0">(e){u=e},enumerable:</span><span class="s1">true</span><span class="s0">,configurable:</span><span class="s1">true</span><span class="s0">});</span><span class="s1">var </span><span class="s0">d=WriteStream;Object.defineProperty(e,</span><span class="s3">&quot;FileWriteStream&quot;</span><span class="s0">,{get:</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">return </span><span class="s0">d},set:</span><span class="s1">function</span><span class="s0">(e){d=e},enumerable:</span><span class="s1">true</span><span class="s0">,configurable:</span><span class="s1">true</span><span class="s0">});</span><span class="s1">function </span><span class="s0">ReadStream(e,t){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this instanceof </span><span class="s0">ReadStream)</span><span class="s1">return </span><span class="s0">f.apply(</span><span class="s1">this</span><span class="s0">,arguments),</span><span class="s1">this</span><span class="s0">;</span><span class="s1">else return </span><span class="s0">ReadStream.apply(Object.create(ReadStream.prototype),arguments)}</span><span class="s1">function </span><span class="s0">ReadStream$open(){</span><span class="s1">var </span><span class="s0">e=</span><span class="s1">this</span><span class="s0">;open(e.path,e.flags,e.mode,(</span><span class="s1">function</span><span class="s0">(t,i){</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(e.autoClose)e.destroy();e.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,t)}</span><span class="s1">else</span><span class="s0">{e.fd=i;e.emit(</span><span class="s3">&quot;open&quot;</span><span class="s0">,i);e.read()}}))}</span><span class="s1">function </span><span class="s0">WriteStream(e,t){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this instanceof </span><span class="s0">WriteStream)</span><span class="s1">return </span><span class="s0">l.apply(</span><span class="s1">this</span><span class="s0">,arguments),</span><span class="s1">this</span><span class="s0">;</span><span class="s1">else return </span><span class="s0">WriteStream.apply(Object.create(WriteStream.prototype),arguments)}</span><span class="s1">function </span><span class="s0">WriteStream$open(){</span><span class="s1">var </span><span class="s0">e=</span><span class="s1">this</span><span class="s0">;open(e.path,e.flags,e.mode,(</span><span class="s1">function</span><span class="s0">(t,i){</span><span class="s1">if</span><span class="s0">(t){e.destroy();e.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,t)}</span><span class="s1">else</span><span class="s0">{e.fd=i;e.emit(</span><span class="s3">&quot;open&quot;</span><span class="s0">,i)}}))}</span><span class="s1">function </span><span class="s0">createReadStream(t,i){</span><span class="s1">return new </span><span class="s0">e.ReadStream(t,i)}</span><span class="s1">function </span><span class="s0">createWriteStream(t,i){</span><span class="s1">return new </span><span class="s0">e.WriteStream(t,i)}</span><span class="s1">var </span><span class="s0">p=e.open;e.open=open;</span><span class="s1">function </span><span class="s0">open(e,t,i,s){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i===</span><span class="s3">&quot;function&quot;</span><span class="s0">)s=i,i=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">return </span><span class="s0">go$open(e,t,i,s);</span><span class="s1">function </span><span class="s0">go$open(e,t,i,s,r){</span><span class="s1">return </span><span class="s0">p(e,t,i,(</span><span class="s1">function</span><span class="s0">(n,c){</span><span class="s1">if</span><span class="s0">(n&amp;&amp;(n.code===</span><span class="s3">&quot;EMFILE&quot;</span><span class="s0">||n.code===</span><span class="s3">&quot;ENFILE&quot;</span><span class="s0">))enqueue([go$open,[e,t,i,s],n,r||Date.now(),Date.now()]);</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">s===</span><span class="s3">&quot;function&quot;</span><span class="s0">)s.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}))}}</span><span class="s1">return </span><span class="s0">e}</span><span class="s1">function </span><span class="s0">enqueue(e){f(</span><span class="s3">&quot;ENQUEUE&quot;</span><span class="s0">,e[</span><span class="s2">0</span><span class="s0">].name,e[</span><span class="s2">1</span><span class="s0">]);s[o].push(e);retry()}</span><span class="s1">var </span><span class="s0">u;</span><span class="s1">function </span><span class="s0">resetQueue(){</span><span class="s1">var </span><span class="s0">e=Date.now();</span><span class="s1">for</span><span class="s0">(</span><span class="s1">var </span><span class="s0">t=</span><span class="s2">0</span><span class="s0">;t&lt;s[o].length;++t){</span><span class="s1">if</span><span class="s0">(s[o][t].length&gt;</span><span class="s2">2</span><span class="s0">){s[o][t][</span><span class="s2">3</span><span class="s0">]=e;s[o][t][</span><span class="s2">4</span><span class="s0">]=e}}retry()}</span><span class="s1">function </span><span class="s0">retry(){clearTimeout(u);u=undefined;</span><span class="s1">if</span><span class="s0">(s[o].length===</span><span class="s2">0</span><span class="s0">)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">var </span><span class="s0">e=s[o].shift();</span><span class="s1">var </span><span class="s0">t=e[</span><span class="s2">0</span><span class="s0">];</span><span class="s1">var </span><span class="s0">i=e[</span><span class="s2">1</span><span class="s0">];</span><span class="s1">var </span><span class="s0">r=e[</span><span class="s2">2</span><span class="s0">];</span><span class="s1">var </span><span class="s0">n=e[</span><span class="s2">3</span><span class="s0">];</span><span class="s1">var </span><span class="s0">c=e[</span><span class="s2">4</span><span class="s0">];</span><span class="s1">if</span><span class="s0">(n===undefined){f(</span><span class="s3">&quot;RETRY&quot;</span><span class="s0">,t.name,i);t.apply(</span><span class="s1">null</span><span class="s0">,i)}</span><span class="s1">else if</span><span class="s0">(Date.now()-n&gt;=</span><span class="s2">6e4</span><span class="s0">){f(</span><span class="s3">&quot;TIMEOUT&quot;</span><span class="s0">,t.name,i);</span><span class="s1">var </span><span class="s0">a=i.pop();</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">a===</span><span class="s3">&quot;function&quot;</span><span class="s0">)a.call(</span><span class="s1">null</span><span class="s0">,r)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">var </span><span class="s0">h=Date.now()-c;</span><span class="s1">var </span><span class="s0">l=Math.max(c-n,</span><span class="s2">1</span><span class="s0">);</span><span class="s1">var </span><span class="s0">d=Math.min(l*</span><span class="s2">1.2</span><span class="s0">,</span><span class="s2">100</span><span class="s0">);</span><span class="s1">if</span><span class="s0">(h&gt;=d){f(</span><span class="s3">&quot;RETRY&quot;</span><span class="s0">,t.name,i);t.apply(</span><span class="s1">null</span><span class="s0">,i.concat([n]))}</span><span class="s1">else</span><span class="s0">{s[o].push(e)}}</span><span class="s1">if</span><span class="s0">(u===undefined){u=setTimeout(retry,</span><span class="s2">0</span><span class="s0">)}}},</span><span class="s2">873</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s1">var </span><span class="s0">s=i(</span><span class="s2">781</span><span class="s0">).Stream;e.exports=legacy;</span><span class="s1">function </span><span class="s0">legacy(e){</span><span class="s1">return</span><span class="s0">{ReadStream:ReadStream,WriteStream:WriteStream};</span><span class="s1">function </span><span class="s0">ReadStream(t,i){</span><span class="s1">if</span><span class="s0">(!(</span><span class="s1">this instanceof </span><span class="s0">ReadStream))</span><span class="s1">return new </span><span class="s0">ReadStream(t,i);s.call(</span><span class="s1">this</span><span class="s0">);</span><span class="s1">var </span><span class="s0">r=</span><span class="s1">this</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.path=t;</span><span class="s1">this</span><span class="s0">.fd=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.readable=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.paused=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.flags=</span><span class="s3">&quot;r&quot;</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.mode=</span><span class="s2">438</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.bufferSize=</span><span class="s2">64</span><span class="s0">*</span><span class="s2">1024</span><span class="s0">;i=i||{};</span><span class="s1">var </span><span class="s0">n=Object.keys(i);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">var </span><span class="s0">c=</span><span class="s2">0</span><span class="s0">,a=n.length;c&lt;a;c++){</span><span class="s1">var </span><span class="s0">o=n[c];</span><span class="s1">this</span><span class="s0">[o]=i[o]}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.encoding)</span><span class="s1">this</span><span class="s0">.setEncoding(</span><span class="s1">this</span><span class="s0">.encoding);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.start!==undefined){</span><span class="s1">if</span><span class="s0">(</span><span class="s3">&quot;number&quot;</span><span class="s0">!==</span><span class="s1">typeof this</span><span class="s0">.start){</span><span class="s1">throw </span><span class="s0">TypeError(</span><span class="s3">&quot;start must be a Number&quot;</span><span class="s0">)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.end===undefined){</span><span class="s1">this</span><span class="s0">.end=Infinity}</span><span class="s1">else if</span><span class="s0">(</span><span class="s3">&quot;number&quot;</span><span class="s0">!==</span><span class="s1">typeof this</span><span class="s0">.end){</span><span class="s1">throw </span><span class="s0">TypeError(</span><span class="s3">&quot;end must be a Number&quot;</span><span class="s0">)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.start&gt;</span><span class="s1">this</span><span class="s0">.end){</span><span class="s1">throw new </span><span class="s0">Error(</span><span class="s3">&quot;start must be &lt;= end&quot;</span><span class="s0">)}</span><span class="s1">this</span><span class="s0">.pos=</span><span class="s1">this</span><span class="s0">.start}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.fd!==</span><span class="s1">null</span><span class="s0">){process.nextTick((</span><span class="s1">function</span><span class="s0">(){r._read()}));</span><span class="s1">return</span><span class="s0">}e.open(</span><span class="s1">this</span><span class="s0">.path,</span><span class="s1">this</span><span class="s0">.flags,</span><span class="s1">this</span><span class="s0">.mode,(</span><span class="s1">function</span><span class="s0">(e,t){</span><span class="s1">if</span><span class="s0">(e){r.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,e);r.readable=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">return</span><span class="s0">}r.fd=t;r.emit(</span><span class="s3">&quot;open&quot;</span><span class="s0">,t);r._read()}))}</span><span class="s1">function </span><span class="s0">WriteStream(t,i){</span><span class="s1">if</span><span class="s0">(!(</span><span class="s1">this instanceof </span><span class="s0">WriteStream))</span><span class="s1">return new </span><span class="s0">WriteStream(t,i);s.call(</span><span class="s1">this</span><span class="s0">);</span><span class="s1">this</span><span class="s0">.path=t;</span><span class="s1">this</span><span class="s0">.fd=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.writable=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.flags=</span><span class="s3">&quot;w&quot;</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.encoding=</span><span class="s3">&quot;binary&quot;</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.mode=</span><span class="s2">438</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.bytesWritten=</span><span class="s2">0</span><span class="s0">;i=i||{};</span><span class="s1">var </span><span class="s0">r=Object.keys(i);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">var </span><span class="s0">n=</span><span class="s2">0</span><span class="s0">,c=r.length;n&lt;c;n++){</span><span class="s1">var </span><span class="s0">a=r[n];</span><span class="s1">this</span><span class="s0">[a]=i[a]}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.start!==undefined){</span><span class="s1">if</span><span class="s0">(</span><span class="s3">&quot;number&quot;</span><span class="s0">!==</span><span class="s1">typeof this</span><span class="s0">.start){</span><span class="s1">throw </span><span class="s0">TypeError(</span><span class="s3">&quot;start must be a Number&quot;</span><span class="s0">)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.start&lt;</span><span class="s2">0</span><span class="s0">){</span><span class="s1">throw new </span><span class="s0">Error(</span><span class="s3">&quot;start must be &gt;= zero&quot;</span><span class="s0">)}</span><span class="s1">this</span><span class="s0">.pos=</span><span class="s1">this</span><span class="s0">.start}</span><span class="s1">this</span><span class="s0">.busy=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">._queue=[];</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.fd===</span><span class="s1">null</span><span class="s0">){</span><span class="s1">this</span><span class="s0">._open=e.open;</span><span class="s1">this</span><span class="s0">._queue.push([</span><span class="s1">this</span><span class="s0">._open,</span><span class="s1">this</span><span class="s0">.path,</span><span class="s1">this</span><span class="s0">.flags,</span><span class="s1">this</span><span class="s0">.mode,undefined]);</span><span class="s1">this</span><span class="s0">.flush()}}}},</span><span class="s2">164</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s1">var </span><span class="s0">s=i(</span><span class="s2">57</span><span class="s0">);</span><span class="s1">var </span><span class="s0">r=process.cwd;</span><span class="s1">var </span><span class="s0">n=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">var </span><span class="s0">c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">if</span><span class="s0">(!n)n=r.call(process);</span><span class="s1">return </span><span class="s0">n};</span><span class="s1">try</span><span class="s0">{process.cwd()}</span><span class="s1">catch</span><span class="s0">(e){}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">process.chdir===</span><span class="s3">&quot;function&quot;</span><span class="s0">){</span><span class="s1">var </span><span class="s0">a=process.chdir;process.chdir=</span><span class="s1">function</span><span class="s0">(e){n=</span><span class="s1">null</span><span class="s0">;a.call(process,e)};</span><span class="s1">if</span><span class="s0">(Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,a)}e.exports=patch;</span><span class="s1">function </span><span class="s0">patch(e){</span><span class="s1">if</span><span class="s0">(s.hasOwnProperty(</span><span class="s3">&quot;O_SYMLINK&quot;</span><span class="s0">)&amp;&amp;process.version.match(</span><span class="s5">/^v0\.6\.[0-2]|^v0\.5\./</span><span class="s0">)){patchLchmod(e)}</span><span class="s1">if</span><span class="s0">(!e.lutimes){patchLutimes(e)}e.chown=chownFix(e.chown);e.fchown=chownFix(e.fchown);e.lchown=chownFix(e.lchown);e.chmod=chmodFix(e.chmod);e.fchmod=chmodFix(e.fchmod);e.lchmod=chmodFix(e.lchmod);e.chownSync=chownFixSync(e.chownSync);e.fchownSync=chownFixSync(e.fchownSync);e.lchownSync=chownFixSync(e.lchownSync);e.chmodSync=chmodFixSync(e.chmodSync);e.fchmodSync=chmodFixSync(e.fchmodSync);e.lchmodSync=chmodFixSync(e.lchmodSync);e.stat=statFix(e.stat);e.fstat=statFix(e.fstat);e.lstat=statFix(e.lstat);e.statSync=statFixSync(e.statSync);e.fstatSync=statFixSync(e.fstatSync);e.lstatSync=statFixSync(e.lstatSync);</span><span class="s1">if</span><span class="s0">(e.chmod&amp;&amp;!e.lchmod){e.lchmod=</span><span class="s1">function</span><span class="s0">(e,t,i){</span><span class="s1">if</span><span class="s0">(i)process.nextTick(i)};e.lchmodSync=</span><span class="s1">function</span><span class="s0">(){}}</span><span class="s1">if</span><span class="s0">(e.chown&amp;&amp;!e.lchown){e.lchown=</span><span class="s1">function</span><span class="s0">(e,t,i,s){</span><span class="s1">if</span><span class="s0">(s)process.nextTick(s)};e.lchownSync=</span><span class="s1">function</span><span class="s0">(){}}</span><span class="s1">if</span><span class="s0">(c===</span><span class="s3">&quot;win32&quot;</span><span class="s0">){e.rename=</span><span class="s1">typeof </span><span class="s0">e.rename!==</span><span class="s3">&quot;function&quot;</span><span class="s0">?e.rename:</span><span class="s1">function</span><span class="s0">(t){</span><span class="s1">function </span><span class="s0">rename(i,s,r){</span><span class="s1">var </span><span class="s0">n=Date.now();</span><span class="s1">var </span><span class="s0">c=</span><span class="s2">0</span><span class="s0">;t(i,s,(</span><span class="s1">function </span><span class="s0">CB(a){</span><span class="s1">if</span><span class="s0">(a&amp;&amp;(a.code===</span><span class="s3">&quot;EACCES&quot;</span><span class="s0">||a.code===</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">||a.code===</span><span class="s3">&quot;EBUSY&quot;</span><span class="s0">)&amp;&amp;Date.now()-n&lt;</span><span class="s2">6e4</span><span class="s0">){setTimeout((</span><span class="s1">function</span><span class="s0">(){e.stat(s,(</span><span class="s1">function</span><span class="s0">(e,n){</span><span class="s1">if</span><span class="s0">(e&amp;&amp;e.code===</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">)t(i,s,CB);</span><span class="s1">else </span><span class="s0">r(a)}))}),c);</span><span class="s1">if</span><span class="s0">(c&lt;</span><span class="s2">100</span><span class="s0">)c+=</span><span class="s2">10</span><span class="s0">;</span><span class="s1">return</span><span class="s0">}</span><span class="s1">if</span><span class="s0">(r)r(a)}))}</span><span class="s1">if</span><span class="s0">(Object.setPrototypeOf)Object.setPrototypeOf(rename,t);</span><span class="s1">return </span><span class="s0">rename}(e.rename)}e.read=</span><span class="s1">typeof </span><span class="s0">e.read!==</span><span class="s3">&quot;function&quot;</span><span class="s0">?e.read:</span><span class="s1">function</span><span class="s0">(t){</span><span class="s1">function </span><span class="s0">read(i,s,r,n,c,a){</span><span class="s1">var </span><span class="s0">o;</span><span class="s1">if</span><span class="s0">(a&amp;&amp;</span><span class="s1">typeof </span><span class="s0">a===</span><span class="s3">&quot;function&quot;</span><span class="s0">){</span><span class="s1">var </span><span class="s0">h=</span><span class="s2">0</span><span class="s0">;o=</span><span class="s1">function</span><span class="s0">(f,l,u){</span><span class="s1">if</span><span class="s0">(f&amp;&amp;f.code===</span><span class="s3">&quot;EAGAIN&quot;</span><span class="s0">&amp;&amp;h&lt;</span><span class="s2">10</span><span class="s0">){h++;</span><span class="s1">return </span><span class="s0">t.call(e,i,s,r,n,c,o)}a.apply(</span><span class="s1">this</span><span class="s0">,arguments)}}</span><span class="s1">return </span><span class="s0">t.call(e,i,s,r,n,c,o)}</span><span class="s1">if</span><span class="s0">(Object.setPrototypeOf)Object.setPrototypeOf(read,t);</span><span class="s1">return </span><span class="s0">read}(e.read);e.readSync=</span><span class="s1">typeof </span><span class="s0">e.readSync!==</span><span class="s3">&quot;function&quot;</span><span class="s0">?e.readSync:</span><span class="s1">function</span><span class="s0">(t){</span><span class="s1">return function</span><span class="s0">(i,s,r,n,c){</span><span class="s1">var </span><span class="s0">a=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">while</span><span class="s0">(</span><span class="s1">true</span><span class="s0">){</span><span class="s1">try</span><span class="s0">{</span><span class="s1">return </span><span class="s0">t.call(e,i,s,r,n,c)}</span><span class="s1">catch</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(e.code===</span><span class="s3">&quot;EAGAIN&quot;</span><span class="s0">&amp;&amp;a&lt;</span><span class="s2">10</span><span class="s0">){a++;</span><span class="s1">continue</span><span class="s0">}</span><span class="s1">throw </span><span class="s0">e}}}}(e.readSync);</span><span class="s1">function </span><span class="s0">patchLchmod(e){e.lchmod=</span><span class="s1">function</span><span class="s0">(t,i,r){e.open(t,s.O_WRONLY|s.O_SYMLINK,i,(</span><span class="s1">function</span><span class="s0">(t,s){</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(r)r(t);</span><span class="s1">return</span><span class="s0">}e.fchmod(s,i,(</span><span class="s1">function</span><span class="s0">(t){e.close(s,(</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(r)r(t||e)}))}))}))};e.lchmodSync=</span><span class="s1">function</span><span class="s0">(t,i){</span><span class="s1">var </span><span class="s0">r=e.openSync(t,s.O_WRONLY|s.O_SYMLINK,i);</span><span class="s1">var </span><span class="s0">n=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">var </span><span class="s0">c;</span><span class="s1">try</span><span class="s0">{c=e.fchmodSync(r,i);n=</span><span class="s1">false</span><span class="s0">}</span><span class="s1">finally</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(n){</span><span class="s1">try</span><span class="s0">{e.closeSync(r)}</span><span class="s1">catch</span><span class="s0">(e){}}</span><span class="s1">else</span><span class="s0">{e.closeSync(r)}}</span><span class="s1">return </span><span class="s0">c}}</span><span class="s1">function </span><span class="s0">patchLutimes(e){</span><span class="s1">if</span><span class="s0">(s.hasOwnProperty(</span><span class="s3">&quot;O_SYMLINK&quot;</span><span class="s0">)&amp;&amp;e.futimes){e.lutimes=</span><span class="s1">function</span><span class="s0">(t,i,r,n){e.open(t,s.O_SYMLINK,(</span><span class="s1">function</span><span class="s0">(t,s){</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(n)n(t);</span><span class="s1">return</span><span class="s0">}e.futimes(s,i,r,(</span><span class="s1">function</span><span class="s0">(t){e.close(s,(</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(n)n(t||e)}))}))}))};e.lutimesSync=</span><span class="s1">function</span><span class="s0">(t,i,r){</span><span class="s1">var </span><span class="s0">n=e.openSync(t,s.O_SYMLINK);</span><span class="s1">var </span><span class="s0">c;</span><span class="s1">var </span><span class="s0">a=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">try</span><span class="s0">{c=e.futimesSync(n,i,r);a=</span><span class="s1">false</span><span class="s0">}</span><span class="s1">finally</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(a){</span><span class="s1">try</span><span class="s0">{e.closeSync(n)}</span><span class="s1">catch</span><span class="s0">(e){}}</span><span class="s1">else</span><span class="s0">{e.closeSync(n)}}</span><span class="s1">return </span><span class="s0">c}}</span><span class="s1">else if</span><span class="s0">(e.futimes){e.lutimes=</span><span class="s1">function</span><span class="s0">(e,t,i,s){</span><span class="s1">if</span><span class="s0">(s)process.nextTick(s)};e.lutimesSync=</span><span class="s1">function</span><span class="s0">(){}}}</span><span class="s1">function </span><span class="s0">chmodFix(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s,r){</span><span class="s1">return </span><span class="s0">t.call(e,i,s,(</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(chownErOk(e))e=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(r)r.apply(</span><span class="s1">this</span><span class="s0">,arguments)}))}}</span><span class="s1">function </span><span class="s0">chmodFixSync(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s){</span><span class="s1">try</span><span class="s0">{</span><span class="s1">return </span><span class="s0">t.call(e,i,s)}</span><span class="s1">catch</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(!chownErOk(e))</span><span class="s1">throw </span><span class="s0">e}}}</span><span class="s1">function </span><span class="s0">chownFix(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s,r,n){</span><span class="s1">return </span><span class="s0">t.call(e,i,s,r,(</span><span class="s1">function</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(chownErOk(e))e=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(n)n.apply(</span><span class="s1">this</span><span class="s0">,arguments)}))}}</span><span class="s1">function </span><span class="s0">chownFixSync(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s,r){</span><span class="s1">try</span><span class="s0">{</span><span class="s1">return </span><span class="s0">t.call(e,i,s,r)}</span><span class="s1">catch</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(!chownErOk(e))</span><span class="s1">throw </span><span class="s0">e}}}</span><span class="s1">function </span><span class="s0">statFix(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s,r){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">s===</span><span class="s3">&quot;function&quot;</span><span class="s0">){r=s;s=</span><span class="s1">null</span><span class="s0">}</span><span class="s1">function </span><span class="s0">callback(e,t){</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(t.uid&lt;</span><span class="s2">0</span><span class="s0">)t.uid+=</span><span class="s2">4294967296</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(t.gid&lt;</span><span class="s2">0</span><span class="s0">)t.gid+=</span><span class="s2">4294967296</span><span class="s0">}</span><span class="s1">if</span><span class="s0">(r)r.apply(</span><span class="s1">this</span><span class="s0">,arguments)}</span><span class="s1">return </span><span class="s0">s?t.call(e,i,s,callback):t.call(e,i,callback)}}</span><span class="s1">function </span><span class="s0">statFixSync(t){</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">return function</span><span class="s0">(i,s){</span><span class="s1">var </span><span class="s0">r=s?t.call(e,i,s):t.call(e,i);</span><span class="s1">if</span><span class="s0">(r){</span><span class="s1">if</span><span class="s0">(r.uid&lt;</span><span class="s2">0</span><span class="s0">)r.uid+=</span><span class="s2">4294967296</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(r.gid&lt;</span><span class="s2">0</span><span class="s0">)r.gid+=</span><span class="s2">4294967296</span><span class="s0">}</span><span class="s1">return </span><span class="s0">r}}</span><span class="s1">function </span><span class="s0">chownErOk(e){</span><span class="s1">if</span><span class="s0">(!e)</span><span class="s1">return true</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(e.code===</span><span class="s3">&quot;ENOSYS&quot;</span><span class="s0">)</span><span class="s1">return true</span><span class="s0">;</span><span class="s1">var </span><span class="s0">t=!process.getuid||process.getuid()!==</span><span class="s2">0</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(e.code===</span><span class="s3">&quot;EINVAL&quot;</span><span class="s0">||e.code===</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">)</span><span class="s1">return true</span><span class="s0">}</span><span class="s1">return false</span><span class="s0">}}},</span><span class="s2">377</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">361</span><span class="s0">).EventEmitter;</span><span class="s1">const </span><span class="s0">r=i(</span><span class="s2">450</span><span class="s0">);</span><span class="s1">const </span><span class="s0">n=i(</span><span class="s2">17</span><span class="s0">);</span><span class="s1">const </span><span class="s0">c=i(</span><span class="s2">384</span><span class="s0">);</span><span class="s1">const </span><span class="s0">a=Object.freeze({});</span><span class="s1">let </span><span class="s0">o=</span><span class="s2">2e3</span><span class="s0">;</span><span class="s1">const </span><span class="s0">h=i(</span><span class="s2">37</span><span class="s0">).platform()===</span><span class="s3">&quot;darwin&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">f=process.env.WATCHPACK_POLLING;</span><span class="s1">const </span><span class="s0">l=</span><span class="s3">`</span><span class="s0">${+f}</span><span class="s3">`</span><span class="s0">===f?+f:!!f&amp;&amp;f!==</span><span class="s3">&quot;false&quot;</span><span class="s0">;</span><span class="s1">function </span><span class="s0">withoutCase(e){</span><span class="s1">return </span><span class="s0">e.toLowerCase()}</span><span class="s1">function </span><span class="s0">needCalls(e,t){</span><span class="s1">return function</span><span class="s0">(){</span><span class="s1">if</span><span class="s0">(--e===</span><span class="s2">0</span><span class="s0">){</span><span class="s1">return </span><span class="s0">t()}}}</span><span class="s1">class </span><span class="s0">Watcher </span><span class="s1">extends </span><span class="s0">s{constructor(e,t,i){</span><span class="s1">super</span><span class="s0">();</span><span class="s1">this</span><span class="s0">.directoryWatcher=e;</span><span class="s1">this</span><span class="s0">.path=t;</span><span class="s1">this</span><span class="s0">.startTime=i&amp;&amp;+i}checkStartTime(e,t){</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.startTime;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">i!==</span><span class="s3">&quot;number&quot;</span><span class="s0">)</span><span class="s1">return</span><span class="s0">!t;</span><span class="s1">return </span><span class="s0">i&lt;=e}close(){</span><span class="s1">this</span><span class="s0">.emit(</span><span class="s3">&quot;closed&quot;</span><span class="s0">)}}</span><span class="s1">class </span><span class="s0">DirectoryWatcher </span><span class="s1">extends </span><span class="s0">s{constructor(e,t,i){</span><span class="s1">super</span><span class="s0">();</span><span class="s1">if</span><span class="s0">(l){i.poll=l}</span><span class="s1">this</span><span class="s0">.watcherManager=e;</span><span class="s1">this</span><span class="s0">.options=i;</span><span class="s1">this</span><span class="s0">.path=t;</span><span class="s1">this</span><span class="s0">.files=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.filesWithoutCase=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.directories=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.lastWatchEvent=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScan=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.ignored=i.ignored||(()=&gt;</span><span class="s1">false</span><span class="s0">);</span><span class="s1">this</span><span class="s0">.nestedWatching=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.polledWatching=</span><span class="s1">typeof </span><span class="s0">i.poll===</span><span class="s3">&quot;number&quot;</span><span class="s0">?i.poll:i.poll?</span><span class="s2">5007</span><span class="s0">:</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.timeout=undefined;</span><span class="s1">this</span><span class="s0">.initialScanRemoved=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.initialScanFinished=undefined;</span><span class="s1">this</span><span class="s0">.watchers=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.parentWatcher=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.refs=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">this</span><span class="s0">._activeEvents=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.closed=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.scanning=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.scanAgain=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.scanAgainInitial=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.createWatcher();</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">true</span><span class="s0">)}createWatcher(){</span><span class="s1">try</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.polledWatching){</span><span class="s1">this</span><span class="s0">.watcher={close:()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.timeout){clearTimeout(</span><span class="s1">this</span><span class="s0">.timeout);</span><span class="s1">this</span><span class="s0">.timeout=undefined}}}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(h){</span><span class="s1">this</span><span class="s0">.watchInParentDirectory()}</span><span class="s1">this</span><span class="s0">.watcher=c.watch(</span><span class="s1">this</span><span class="s0">.path);</span><span class="s1">this</span><span class="s0">.watcher.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,</span><span class="s1">this</span><span class="s0">.onWatchEvent.bind(</span><span class="s1">this</span><span class="s0">));</span><span class="s1">this</span><span class="s0">.watcher.on(</span><span class="s3">&quot;error&quot;</span><span class="s0">,</span><span class="s1">this</span><span class="s0">.onWatcherError.bind(</span><span class="s1">this</span><span class="s0">))}}</span><span class="s1">catch</span><span class="s0">(e){</span><span class="s1">this</span><span class="s0">.onWatcherError(e)}}forEachWatcher(e,t){</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.watchers.get(withoutCase(e));</span><span class="s1">if</span><span class="s0">(i!==undefined){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of i){t(e)}}}setMissing(e,t,i){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.initialScan){</span><span class="s1">this</span><span class="s0">.initialScanRemoved.add(e)}</span><span class="s1">const </span><span class="s0">s=</span><span class="s1">this</span><span class="s0">.directories.get(e);</span><span class="s1">if</span><span class="s0">(s){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching)s.close();</span><span class="s1">this</span><span class="s0">.directories.delete(e);</span><span class="s1">this</span><span class="s0">.forEachWatcher(e,(e=&gt;e.emit(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,i)));</span><span class="s1">if</span><span class="s0">(!t){</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(s=&gt;s.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,</span><span class="s1">null</span><span class="s0">,i,t)))}}</span><span class="s1">const </span><span class="s0">r=</span><span class="s1">this</span><span class="s0">.files.get(e);</span><span class="s1">if</span><span class="s0">(r){</span><span class="s1">this</span><span class="s0">.files.delete(e);</span><span class="s1">const </span><span class="s0">s=withoutCase(e);</span><span class="s1">const </span><span class="s0">r=</span><span class="s1">this</span><span class="s0">.filesWithoutCase.get(s)-</span><span class="s2">1</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(r&lt;=</span><span class="s2">0</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.filesWithoutCase.delete(s);</span><span class="s1">this</span><span class="s0">.forEachWatcher(e,(e=&gt;e.emit(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,i)))}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.filesWithoutCase.set(s,r)}</span><span class="s1">if</span><span class="s0">(!t){</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(s=&gt;s.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,</span><span class="s1">null</span><span class="s0">,i,t)))}}}setFileTime(e,t,i,s,r){</span><span class="s1">const </span><span class="s0">n=Date.now();</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.ignored(e))</span><span class="s1">return</span><span class="s0">;</span><span class="s1">const </span><span class="s0">c=</span><span class="s1">this</span><span class="s0">.files.get(e);</span><span class="s1">let </span><span class="s0">a,h;</span><span class="s1">if</span><span class="s0">(i){a=Math.min(n,t)+o;h=o}</span><span class="s1">else</span><span class="s0">{a=n;h=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(c&amp;&amp;c.timestamp===t&amp;&amp;t+o&lt;n){</span><span class="s1">return</span><span class="s0">}}</span><span class="s1">if</span><span class="s0">(s&amp;&amp;c&amp;&amp;c.timestamp===t)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.files.set(e,{safeTime:a,accuracy:h,timestamp:t});</span><span class="s1">if</span><span class="s0">(!c){</span><span class="s1">const </span><span class="s0">s=withoutCase(e);</span><span class="s1">const </span><span class="s0">n=</span><span class="s1">this</span><span class="s0">.filesWithoutCase.get(s);</span><span class="s1">this</span><span class="s0">.filesWithoutCase.set(s,(n||</span><span class="s2">0</span><span class="s0">)+</span><span class="s2">1</span><span class="s0">);</span><span class="s1">if</span><span class="s0">(n!==undefined){</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">false</span><span class="s0">)}</span><span class="s1">this</span><span class="s0">.forEachWatcher(e,(e=&gt;{</span><span class="s1">if</span><span class="s0">(!i||e.checkStartTime(a,i)){e.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,t,r)}}))}</span><span class="s1">else if</span><span class="s0">(!i){</span><span class="s1">this</span><span class="s0">.forEachWatcher(e,(e=&gt;e.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,t,r)))}</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(t=&gt;{</span><span class="s1">if</span><span class="s0">(!i||t.checkStartTime(a,i)){t.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,a,r,i)}}))}setDirectory(e,t,i,s){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.ignored(e))</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(e===</span><span class="s1">this</span><span class="s0">.path){</span><span class="s1">if</span><span class="s0">(!i){</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(r=&gt;r.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,t,s,i)))}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">const </span><span class="s0">r=</span><span class="s1">this</span><span class="s0">.directories.get(e);</span><span class="s1">if</span><span class="s0">(!r){</span><span class="s1">const </span><span class="s0">r=Date.now();</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching){</span><span class="s1">this</span><span class="s0">.createNestedWatcher(e)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.directories.set(e,</span><span class="s1">true</span><span class="s0">)}</span><span class="s1">let </span><span class="s0">n;</span><span class="s1">if</span><span class="s0">(i){n=Math.min(r,t)+o}</span><span class="s1">else</span><span class="s0">{n=r}</span><span class="s1">this</span><span class="s0">.forEachWatcher(e,(e=&gt;{</span><span class="s1">if</span><span class="s0">(!i||e.checkStartTime(n,</span><span class="s1">false</span><span class="s0">)){e.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,t,s)}}));</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(t=&gt;{</span><span class="s1">if</span><span class="s0">(!i||t.checkStartTime(n,i)){t.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,n,s,i)}}))}}}createNestedWatcher(e){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.watcherManager.watchDirectory(e,</span><span class="s2">1</span><span class="s0">);t.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((e,t,i,s)=&gt;{</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(r=&gt;{</span><span class="s1">if</span><span class="s0">(!s||r.checkStartTime(t,s)){r.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,t,i,s)}}))}));</span><span class="s1">this</span><span class="s0">.directories.set(e,t)}setNestedWatching(e){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching!==!!e){</span><span class="s1">this</span><span class="s0">.nestedWatching=!!e;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.directories.keys()){</span><span class="s1">this</span><span class="s0">.createNestedWatcher(e)}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of </span><span class="s1">this</span><span class="s0">.directories){t.close();</span><span class="s1">this</span><span class="s0">.directories.set(e,</span><span class="s1">true</span><span class="s0">)}}}}watch(e,t){</span><span class="s1">const </span><span class="s0">i=withoutCase(e);</span><span class="s1">let </span><span class="s0">s=</span><span class="s1">this</span><span class="s0">.watchers.get(i);</span><span class="s1">if</span><span class="s0">(s===undefined){s=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.watchers.set(i,s)}</span><span class="s1">this</span><span class="s0">.refs++;</span><span class="s1">const </span><span class="s0">r=</span><span class="s1">new </span><span class="s0">Watcher(</span><span class="s1">this</span><span class="s0">,e,t);r.on(</span><span class="s3">&quot;closed&quot;</span><span class="s0">,(()=&gt;{</span><span class="s1">if</span><span class="s0">(--</span><span class="s1">this</span><span class="s0">.refs&lt;=</span><span class="s2">0</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.close();</span><span class="s1">return</span><span class="s0">}s.delete(r);</span><span class="s1">if</span><span class="s0">(s.size===</span><span class="s2">0</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.watchers.delete(i);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.path===e)</span><span class="s1">this</span><span class="s0">.setNestedWatching(</span><span class="s1">false</span><span class="s0">)}}));s.add(r);</span><span class="s1">let </span><span class="s0">n;</span><span class="s1">if</span><span class="s0">(e===</span><span class="s1">this</span><span class="s0">.path){</span><span class="s1">this</span><span class="s0">.setNestedWatching(</span><span class="s1">true</span><span class="s0">);n=</span><span class="s1">this</span><span class="s0">.lastWatchEvent;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.files.values()){fixupEntryAccuracy(e);n=Math.max(n,e.safeTime)}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.files.get(e);</span><span class="s1">if</span><span class="s0">(t){fixupEntryAccuracy(t);n=t.safeTime}</span><span class="s1">else</span><span class="s0">{n=</span><span class="s2">0</span><span class="s0">}}</span><span class="s1">if</span><span class="s0">(n){</span><span class="s1">if</span><span class="s0">(n&gt;=t){process.nextTick((()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(e===</span><span class="s1">this</span><span class="s0">.path){r.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,n,</span><span class="s3">&quot;watch (outdated on attach)&quot;</span><span class="s0">,</span><span class="s1">true</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{r.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,n,</span><span class="s3">&quot;watch (outdated on attach)&quot;</span><span class="s0">,</span><span class="s1">true</span><span class="s0">)}}))}}</span><span class="s1">else if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.initialScan){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.initialScanRemoved.has(e)){process.nextTick((()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;r.emit(</span><span class="s3">&quot;remove&quot;</span><span class="s0">)}))}}</span><span class="s1">else if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.directories.has(e)&amp;&amp;r.checkStartTime(</span><span class="s1">this</span><span class="s0">.initialScanFinished,</span><span class="s1">false</span><span class="s0">)){process.nextTick((()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;r.emit(</span><span class="s3">&quot;initial-missing&quot;</span><span class="s0">,</span><span class="s3">&quot;watch (missing on attach)&quot;</span><span class="s0">)}))}</span><span class="s1">return </span><span class="s0">r}onWatchEvent(e,t){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(!t){</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">false</span><span class="s0">);</span><span class="s1">return</span><span class="s0">}</span><span class="s1">const </span><span class="s0">i=n.join(</span><span class="s1">this</span><span class="s0">.path,t);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.ignored(i))</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">._activeEvents.get(t)===undefined){</span><span class="s1">this</span><span class="s0">._activeEvents.set(t,</span><span class="s1">false</span><span class="s0">);</span><span class="s1">const </span><span class="s0">checkStats=()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">._activeEvents.set(t,</span><span class="s1">false</span><span class="s0">);r.lstat(i,((s,c)=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">._activeEvents.get(t)===</span><span class="s1">true</span><span class="s0">){process.nextTick(checkStats);</span><span class="s1">return</span><span class="s0">}</span><span class="s1">this</span><span class="s0">._activeEvents.delete(t);</span><span class="s1">if</span><span class="s0">(s){</span><span class="s1">if</span><span class="s0">(s.code!==</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">&amp;&amp;s.code!==</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">&amp;&amp;s.code!==</span><span class="s3">&quot;EBUSY&quot;</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.onStatsError(s)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(t===n.basename(</span><span class="s1">this</span><span class="s0">.path)){</span><span class="s1">if</span><span class="s0">(!r.existsSync(</span><span class="s1">this</span><span class="s0">.path)){</span><span class="s1">this</span><span class="s0">.onDirectoryRemoved(</span><span class="s3">&quot;stat failed&quot;</span><span class="s0">)}}}}</span><span class="s1">this</span><span class="s0">.lastWatchEvent=Date.now();</span><span class="s1">if</span><span class="s0">(!c){</span><span class="s1">this</span><span class="s0">.setMissing(i,</span><span class="s1">false</span><span class="s0">,e)}</span><span class="s1">else if</span><span class="s0">(c.isDirectory()){</span><span class="s1">this</span><span class="s0">.setDirectory(i,+c.birthtime||</span><span class="s2">1</span><span class="s0">,</span><span class="s1">false</span><span class="s0">,e)}</span><span class="s1">else if</span><span class="s0">(c.isFile()||c.isSymbolicLink()){</span><span class="s1">if</span><span class="s0">(c.mtime){ensureFsAccuracy(c.mtime)}</span><span class="s1">this</span><span class="s0">.setFileTime(i,+c.mtime||+c.ctime||</span><span class="s2">1</span><span class="s0">,</span><span class="s1">false</span><span class="s0">,</span><span class="s1">false</span><span class="s0">,e)}}))};process.nextTick(checkStats)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">._activeEvents.set(t,</span><span class="s1">true</span><span class="s0">)}}onWatcherError(e){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(e){</span><span class="s1">if</span><span class="s0">(e.code!==</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">&amp;&amp;e.code!==</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">){console.error(</span><span class="s3">&quot;Watchpack Error (watcher): &quot;</span><span class="s0">+e)}</span><span class="s1">this</span><span class="s0">.onDirectoryRemoved(</span><span class="s3">&quot;watch error&quot;</span><span class="s0">)}}onStatsError(e){</span><span class="s1">if</span><span class="s0">(e){console.error(</span><span class="s3">&quot;Watchpack Error (stats): &quot;</span><span class="s0">+e)}}onScanError(e){</span><span class="s1">if</span><span class="s0">(e){console.error(</span><span class="s3">&quot;Watchpack Error (initial scan): &quot;</span><span class="s0">+e)}</span><span class="s1">this</span><span class="s0">.onScanFinished()}onScanFinished(){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.polledWatching){</span><span class="s1">this</span><span class="s0">.timeout=setTimeout((()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">false</span><span class="s0">)}),</span><span class="s1">this</span><span class="s0">.polledWatching)}}onDirectoryRemoved(e){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watcher){</span><span class="s1">this</span><span class="s0">.watcher.close();</span><span class="s1">this</span><span class="s0">.watcher=</span><span class="s1">null</span><span class="s0">}</span><span class="s1">this</span><span class="s0">.watchInParentDirectory();</span><span class="s1">const </span><span class="s0">t=</span><span class="s3">`directory-removed (</span><span class="s0">${e}</span><span class="s3">)`</span><span class="s0">;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.directories.keys()){</span><span class="s1">this</span><span class="s0">.setMissing(e,</span><span class="s1">null</span><span class="s0">,t)}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.files.keys()){</span><span class="s1">this</span><span class="s0">.setMissing(e,</span><span class="s1">null</span><span class="s0">,t)}}watchInParentDirectory(){</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.parentWatcher){</span><span class="s1">const </span><span class="s0">e=n.dirname(</span><span class="s1">this</span><span class="s0">.path);</span><span class="s1">if</span><span class="s0">(n.dirname(e)===e)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.parentWatcher=</span><span class="s1">this</span><span class="s0">.watcherManager.watchFile(</span><span class="s1">this</span><span class="s0">.path,</span><span class="s2">1</span><span class="s0">);</span><span class="s1">this</span><span class="s0">.parentWatcher.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((e,t)=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">((!h||</span><span class="s1">this</span><span class="s0">.polledWatching)&amp;&amp;</span><span class="s1">this</span><span class="s0">.parentWatcher){</span><span class="s1">this</span><span class="s0">.parentWatcher.close();</span><span class="s1">this</span><span class="s0">.parentWatcher=</span><span class="s1">null</span><span class="s0">}</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.watcher){</span><span class="s1">this</span><span class="s0">.createWatcher();</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">false</span><span class="s0">);</span><span class="s1">this</span><span class="s0">.forEachWatcher(</span><span class="s1">this</span><span class="s0">.path,(i=&gt;i.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,</span><span class="s1">this</span><span class="s0">.path,e,t,</span><span class="s1">false</span><span class="s0">)))}}));</span><span class="s1">this</span><span class="s0">.parentWatcher.on(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,(()=&gt;{</span><span class="s1">this</span><span class="s0">.onDirectoryRemoved(</span><span class="s3">&quot;parent directory removed&quot;</span><span class="s0">)}))}}doScan(e){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.scanning){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.scanAgain){</span><span class="s1">if</span><span class="s0">(!e)</span><span class="s1">this</span><span class="s0">.scanAgainInitial=</span><span class="s1">false</span><span class="s0">}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.scanAgain=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.scanAgainInitial=e}</span><span class="s1">return</span><span class="s0">}</span><span class="s1">this</span><span class="s0">.scanning=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.timeout){clearTimeout(</span><span class="s1">this</span><span class="s0">.timeout);</span><span class="s1">this</span><span class="s0">.timeout=undefined}process.nextTick((()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;r.readdir(</span><span class="s1">this</span><span class="s0">.path,((t,i)=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(t.code===</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">||t.code===</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.onDirectoryRemoved(</span><span class="s3">&quot;scan readdir failed&quot;</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.onScanError(t)}</span><span class="s1">this</span><span class="s0">.initialScan=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScanFinished=Date.now();</span><span class="s1">if</span><span class="s0">(e){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.watchers.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of e){</span><span class="s1">if</span><span class="s0">(t.checkStartTime(</span><span class="s1">this</span><span class="s0">.initialScanFinished,</span><span class="s1">false</span><span class="s0">)){t.emit(</span><span class="s3">&quot;initial-missing&quot;</span><span class="s0">,</span><span class="s3">&quot;scan (parent directory missing in initial scan)&quot;</span><span class="s0">)}}}}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.scanAgain){</span><span class="s1">this</span><span class="s0">.scanAgain=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">this</span><span class="s0">.scanAgainInitial)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.scanning=</span><span class="s1">false</span><span class="s0">}</span><span class="s1">return</span><span class="s0">}</span><span class="s1">const </span><span class="s0">s=</span><span class="s1">new </span><span class="s0">Set(i.map((e=&gt;n.join(</span><span class="s1">this</span><span class="s0">.path,e.normalize(</span><span class="s3">&quot;NFC&quot;</span><span class="s0">)))));</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.files.keys()){</span><span class="s1">if</span><span class="s0">(!s.has(t)){</span><span class="s1">this</span><span class="s0">.setMissing(t,e,</span><span class="s3">&quot;scan (missing)&quot;</span><span class="s0">)}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.directories.keys()){</span><span class="s1">if</span><span class="s0">(!s.has(t)){</span><span class="s1">this</span><span class="s0">.setMissing(t,e,</span><span class="s3">&quot;scan (missing)&quot;</span><span class="s0">)}}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.scanAgain){</span><span class="s1">this</span><span class="s0">.scanAgain=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.doScan(e);</span><span class="s1">return</span><span class="s0">}</span><span class="s1">const </span><span class="s0">c=needCalls(s.size+</span><span class="s2">1</span><span class="s0">,(()=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScan=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScanRemoved=</span><span class="s1">null</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScanFinished=Date.now();</span><span class="s1">if</span><span class="s0">(e){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Map(</span><span class="s1">this</span><span class="s0">.watchers);e.delete(withoutCase(</span><span class="s1">this</span><span class="s0">.path));</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of s){e.delete(withoutCase(t))}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of e.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of t){</span><span class="s1">if</span><span class="s0">(e.checkStartTime(</span><span class="s1">this</span><span class="s0">.initialScanFinished,</span><span class="s1">false</span><span class="s0">)){e.emit(</span><span class="s3">&quot;initial-missing&quot;</span><span class="s0">,</span><span class="s3">&quot;scan (missing in initial scan)&quot;</span><span class="s0">)}}}}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.scanAgain){</span><span class="s1">this</span><span class="s0">.scanAgain=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.doScan(</span><span class="s1">this</span><span class="s0">.scanAgainInitial)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.scanning=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.onScanFinished()}}));</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of s){r.lstat(t,((i,s)=&gt;{</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.closed)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(i){</span><span class="s1">if</span><span class="s0">(i.code===</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">||i.code===</span><span class="s3">&quot;EPERM&quot;</span><span class="s0">||i.code===</span><span class="s3">&quot;EACCES&quot;</span><span class="s0">||i.code===</span><span class="s3">&quot;EBUSY&quot;</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.setMissing(t,e,</span><span class="s3">&quot;scan (&quot;</span><span class="s0">+i.code+</span><span class="s3">&quot;)&quot;</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.onScanError(i)}c();</span><span class="s1">return</span><span class="s0">}</span><span class="s1">if</span><span class="s0">(s.isFile()||s.isSymbolicLink()){</span><span class="s1">if</span><span class="s0">(s.mtime){ensureFsAccuracy(s.mtime)}</span><span class="s1">this</span><span class="s0">.setFileTime(t,+s.mtime||+s.ctime||</span><span class="s2">1</span><span class="s0">,e,</span><span class="s1">true</span><span class="s0">,</span><span class="s3">&quot;scan (file)&quot;</span><span class="s0">)}</span><span class="s1">else if</span><span class="s0">(s.isDirectory()){</span><span class="s1">if</span><span class="s0">(!e||!</span><span class="s1">this</span><span class="s0">.directories.has(t))</span><span class="s1">this</span><span class="s0">.setDirectory(t,+s.birthtime||</span><span class="s2">1</span><span class="s0">,e,</span><span class="s3">&quot;scan (dir)&quot;</span><span class="s0">)}c()}))}c()}))}))}getTimes(){</span><span class="s1">const </span><span class="s0">e=Object.create(</span><span class="s1">null</span><span class="s0">);</span><span class="s1">let </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.lastWatchEvent;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[i,s]of </span><span class="s1">this</span><span class="s0">.files){fixupEntryAccuracy(s);t=Math.max(t,s.safeTime);e[i]=Math.max(s.safeTime,s.timestamp)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.directories.values()){</span><span class="s1">const </span><span class="s0">s=i.directoryWatcher.getTimes();</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of Object.keys(s)){</span><span class="s1">const </span><span class="s0">r=s[i];t=Math.max(t,r);e[i]=r}}e[</span><span class="s1">this</span><span class="s0">.path]=t}</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.initialScan){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.watchers.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of t){</span><span class="s1">const </span><span class="s0">t=i.path;</span><span class="s1">if</span><span class="s0">(!Object.prototype.hasOwnProperty.call(e,t)){e[t]=</span><span class="s1">null</span><span class="s0">}}}}</span><span class="s1">return </span><span class="s0">e}collectTimeInfoEntries(e,t){</span><span class="s1">let </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.lastWatchEvent;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[t,s]of </span><span class="s1">this</span><span class="s0">.files){fixupEntryAccuracy(s);i=Math.max(i,s.safeTime);e.set(t,s)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">s of </span><span class="s1">this</span><span class="s0">.directories.values()){i=Math.max(i,s.directoryWatcher.collectTimeInfoEntries(e,t))}e.set(</span><span class="s1">this</span><span class="s0">.path,a);t.set(</span><span class="s1">this</span><span class="s0">.path,{safeTime:i})}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.directories.keys()){e.set(i,a);</span><span class="s1">if</span><span class="s0">(!t.has(i))t.set(i,a)}e.set(</span><span class="s1">this</span><span class="s0">.path,a);t.set(</span><span class="s1">this</span><span class="s0">.path,a)}</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.initialScan){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.watchers.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of t){</span><span class="s1">const </span><span class="s0">t=i.path;</span><span class="s1">if</span><span class="s0">(!e.has(t)){e.set(t,</span><span class="s1">null</span><span class="s0">)}}}}</span><span class="s1">return </span><span class="s0">i}close(){</span><span class="s1">this</span><span class="s0">.closed=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.initialScan=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watcher){</span><span class="s1">this</span><span class="s0">.watcher.close();</span><span class="s1">this</span><span class="s0">.watcher=</span><span class="s1">null</span><span class="s0">}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.nestedWatching){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.directories.values()){e.close()}</span><span class="s1">this</span><span class="s0">.directories.clear()}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.parentWatcher){</span><span class="s1">this</span><span class="s0">.parentWatcher.close();</span><span class="s1">this</span><span class="s0">.parentWatcher=</span><span class="s1">null</span><span class="s0">}</span><span class="s1">this</span><span class="s0">.emit(</span><span class="s3">&quot;closed&quot;</span><span class="s0">)}}e.exports=DirectoryWatcher;e.exports.EXISTANCE_ONLY_TIME_ENTRY=a;</span><span class="s1">function </span><span class="s0">fixupEntryAccuracy(e){</span><span class="s1">if</span><span class="s0">(e.accuracy&gt;o){e.safeTime=e.safeTime-e.accuracy+o;e.accuracy=o}}</span><span class="s1">function </span><span class="s0">ensureFsAccuracy(e){</span><span class="s1">if</span><span class="s0">(!e)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(o&gt;</span><span class="s2">1</span><span class="s0">&amp;&amp;e%</span><span class="s2">1</span><span class="s0">!==</span><span class="s2">0</span><span class="s0">)o=</span><span class="s2">1</span><span class="s0">;</span><span class="s1">else if</span><span class="s0">(o&gt;</span><span class="s2">10</span><span class="s0">&amp;&amp;e%</span><span class="s2">10</span><span class="s0">!==</span><span class="s2">0</span><span class="s0">)o=</span><span class="s2">10</span><span class="s0">;</span><span class="s1">else if</span><span class="s0">(o&gt;</span><span class="s2">100</span><span class="s0">&amp;&amp;e%</span><span class="s2">100</span><span class="s0">!==</span><span class="s2">0</span><span class="s0">)o=</span><span class="s2">100</span><span class="s0">;</span><span class="s1">else if</span><span class="s0">(o&gt;</span><span class="s2">1e3</span><span class="s0">&amp;&amp;e%</span><span class="s2">1e3</span><span class="s0">!==</span><span class="s2">0</span><span class="s0">)o=</span><span class="s2">1e3</span><span class="s0">}},</span><span class="s2">73</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">147</span><span class="s0">);</span><span class="s1">const </span><span class="s0">r=i(</span><span class="s2">17</span><span class="s0">);</span><span class="s1">const </span><span class="s0">n=</span><span class="s1">new </span><span class="s0">Set([</span><span class="s3">&quot;EINVAL&quot;</span><span class="s0">,</span><span class="s3">&quot;ENOENT&quot;</span><span class="s0">]);</span><span class="s1">if</span><span class="s0">(process.platform===</span><span class="s3">&quot;win32&quot;</span><span class="s0">)n.add(</span><span class="s3">&quot;UNKNOWN&quot;</span><span class="s0">);</span><span class="s1">class </span><span class="s0">LinkResolver{constructor(){</span><span class="s1">this</span><span class="s0">.cache=</span><span class="s1">new </span><span class="s0">Map}resolve(e){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.cache.get(e);</span><span class="s1">if</span><span class="s0">(t!==undefined){</span><span class="s1">return </span><span class="s0">t}</span><span class="s1">const </span><span class="s0">i=r.dirname(e);</span><span class="s1">if</span><span class="s0">(i===e){</span><span class="s1">const </span><span class="s0">t=Object.freeze([e]);</span><span class="s1">this</span><span class="s0">.cache.set(e,t);</span><span class="s1">return </span><span class="s0">t}</span><span class="s1">const </span><span class="s0">c=</span><span class="s1">this</span><span class="s0">.resolve(i);</span><span class="s1">let </span><span class="s0">a=e;</span><span class="s1">if</span><span class="s0">(c[</span><span class="s2">0</span><span class="s0">]!==i){</span><span class="s1">const </span><span class="s0">t=r.basename(e);a=r.resolve(c[</span><span class="s2">0</span><span class="s0">],t)}</span><span class="s1">try</span><span class="s0">{</span><span class="s1">const </span><span class="s0">t=s.readlinkSync(a);</span><span class="s1">const </span><span class="s0">i=r.resolve(c[</span><span class="s2">0</span><span class="s0">],t);</span><span class="s1">const </span><span class="s0">n=</span><span class="s1">this</span><span class="s0">.resolve(i);</span><span class="s1">let </span><span class="s0">o;</span><span class="s1">if</span><span class="s0">(n.length&gt;</span><span class="s2">1</span><span class="s0">&amp;&amp;c.length&gt;</span><span class="s2">1</span><span class="s0">){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Set(n);e.add(a);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">let </span><span class="s0">t=</span><span class="s2">1</span><span class="s0">;t&lt;c.length;t++){e.add(c[t])}o=Object.freeze(Array.from(e))}</span><span class="s1">else if</span><span class="s0">(c.length&gt;</span><span class="s2">1</span><span class="s0">){o=c.slice();o[</span><span class="s2">0</span><span class="s0">]=n[</span><span class="s2">0</span><span class="s0">];o.push(a);Object.freeze(o)}</span><span class="s1">else if</span><span class="s0">(n.length&gt;</span><span class="s2">1</span><span class="s0">){o=n.slice();o.push(a);Object.freeze(o)}</span><span class="s1">else</span><span class="s0">{o=Object.freeze([n[</span><span class="s2">0</span><span class="s0">],a])}</span><span class="s1">this</span><span class="s0">.cache.set(e,o);</span><span class="s1">return </span><span class="s0">o}</span><span class="s1">catch</span><span class="s0">(t){</span><span class="s1">if</span><span class="s0">(!n.has(t.code)){</span><span class="s1">throw </span><span class="s0">t}</span><span class="s1">const </span><span class="s0">i=c.slice();i[</span><span class="s2">0</span><span class="s0">]=a;Object.freeze(i);</span><span class="s1">this</span><span class="s0">.cache.set(e,i);</span><span class="s1">return </span><span class="s0">i}}}e.exports=LinkResolver},</span><span class="s2">653</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">17</span><span class="s0">);</span><span class="s1">const </span><span class="s0">r=i(</span><span class="s2">377</span><span class="s0">);</span><span class="s1">class </span><span class="s0">WatcherManager{constructor(e){</span><span class="s1">this</span><span class="s0">.options=e;</span><span class="s1">this</span><span class="s0">.directoryWatchers=</span><span class="s1">new </span><span class="s0">Map}getDirectoryWatcher(e){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.directoryWatchers.get(e);</span><span class="s1">if</span><span class="s0">(t===undefined){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">r(</span><span class="s1">this</span><span class="s0">,e,</span><span class="s1">this</span><span class="s0">.options);</span><span class="s1">this</span><span class="s0">.directoryWatchers.set(e,t);t.on(</span><span class="s3">&quot;closed&quot;</span><span class="s0">,(()=&gt;{</span><span class="s1">this</span><span class="s0">.directoryWatchers.delete(e)}));</span><span class="s1">return </span><span class="s0">t}</span><span class="s1">return </span><span class="s0">t}watchFile(e,t){</span><span class="s1">const </span><span class="s0">i=s.dirname(e);</span><span class="s1">if</span><span class="s0">(i===e)</span><span class="s1">return null</span><span class="s0">;</span><span class="s1">return this</span><span class="s0">.getDirectoryWatcher(i).watch(e,t)}watchDirectory(e,t){</span><span class="s1">return this</span><span class="s0">.getDirectoryWatcher(e).watch(e,t)}}</span><span class="s1">const </span><span class="s0">n=</span><span class="s1">new </span><span class="s0">WeakMap;e.exports=e=&gt;{</span><span class="s1">const </span><span class="s0">t=n.get(e);</span><span class="s1">if</span><span class="s0">(t!==undefined)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">WatcherManager(e);n.set(e,i);</span><span class="s1">return </span><span class="s0">i};e.exports.WatcherManager=WatcherManager},</span><span class="s2">535</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">17</span><span class="s0">);e.exports=(e,t)=&gt;{</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[t,s]of e){i.set(t,{filePath:t,parent:undefined,children:undefined,entries:</span><span class="s2">1</span><span class="s0">,active:</span><span class="s1">true</span><span class="s0">,value:s})}</span><span class="s1">let </span><span class="s0">r=i.size;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of i.values()){</span><span class="s1">const </span><span class="s0">t=s.dirname(e.filePath);</span><span class="s1">if</span><span class="s0">(t!==e.filePath){</span><span class="s1">let </span><span class="s0">s=i.get(t);</span><span class="s1">if</span><span class="s0">(s===undefined){s={filePath:t,parent:undefined,children:[e],entries:e.entries,active:</span><span class="s1">false</span><span class="s0">,value:undefined};i.set(t,s);e.parent=s}</span><span class="s1">else</span><span class="s0">{e.parent=s;</span><span class="s1">if</span><span class="s0">(s.children===undefined){s.children=[e]}</span><span class="s1">else</span><span class="s0">{s.children.push(e)}</span><span class="s1">do</span><span class="s0">{s.entries+=e.entries;s=s.parent}</span><span class="s1">while</span><span class="s0">(s)}}}</span><span class="s1">while</span><span class="s0">(r&gt;t){</span><span class="s1">const </span><span class="s0">e=r-t;</span><span class="s1">let </span><span class="s0">s=undefined;</span><span class="s1">let </span><span class="s0">n=Infinity;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">r of i.values()){</span><span class="s1">if</span><span class="s0">(r.entries&lt;=</span><span class="s2">1</span><span class="s0">||!r.children||!r.parent)</span><span class="s1">continue</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(r.children.length===</span><span class="s2">0</span><span class="s0">)</span><span class="s1">continue</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(r.children.length===</span><span class="s2">1</span><span class="s0">&amp;&amp;!r.value)</span><span class="s1">continue</span><span class="s0">;</span><span class="s1">const </span><span class="s0">i=r.entries-</span><span class="s2">1</span><span class="s0">&gt;=e?r.entries-</span><span class="s2">1</span><span class="s0">-e:e-r.entries+</span><span class="s2">1</span><span class="s0">+t*</span><span class="s2">.3</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(i&lt;n){s=r;n=i}}</span><span class="s1">if</span><span class="s0">(!s)</span><span class="s1">break</span><span class="s0">;</span><span class="s1">const </span><span class="s0">c=s.entries-</span><span class="s2">1</span><span class="s0">;s.active=</span><span class="s1">true</span><span class="s0">;s.entries=</span><span class="s2">1</span><span class="s0">;r-=c;</span><span class="s1">let </span><span class="s0">a=s.parent;</span><span class="s1">while</span><span class="s0">(a){a.entries-=c;a=a.parent}</span><span class="s1">const </span><span class="s0">o=</span><span class="s1">new </span><span class="s0">Set(s.children);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of o){e.active=</span><span class="s1">false</span><span class="s0">;e.entries=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(e.children){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of e.children)o.add(t)}}}</span><span class="s1">const </span><span class="s0">n=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of i.values()){</span><span class="s1">if</span><span class="s0">(!e.active)</span><span class="s1">continue</span><span class="s0">;</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">Set([e]);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">s of i){</span><span class="s1">if</span><span class="s0">(s.active&amp;&amp;s!==e)</span><span class="s1">continue</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(s.value){</span><span class="s1">if</span><span class="s0">(Array.isArray(s.value)){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of s.value){t.set(e,s.filePath)}}</span><span class="s1">else</span><span class="s0">{t.set(s.value,s.filePath)}}</span><span class="s1">if</span><span class="s0">(s.children){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of s.children){i.add(e)}}}n.set(e.filePath,t)}</span><span class="s1">return </span><span class="s0">n}},</span><span class="s2">384</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">147</span><span class="s0">);</span><span class="s1">const </span><span class="s0">r=i(</span><span class="s2">17</span><span class="s0">);</span><span class="s1">const</span><span class="s0">{EventEmitter:n}=i(</span><span class="s2">361</span><span class="s0">);</span><span class="s1">const </span><span class="s0">c=i(</span><span class="s2">535</span><span class="s0">);</span><span class="s1">const </span><span class="s0">a=i(</span><span class="s2">37</span><span class="s0">).platform()===</span><span class="s3">&quot;darwin&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">o=i(</span><span class="s2">37</span><span class="s0">).platform()===</span><span class="s3">&quot;win32&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">h=a||o;</span><span class="s1">const </span><span class="s0">f=+process.env.WATCHPACK_WATCHER_LIMIT||(a?</span><span class="s2">2e3</span><span class="s0">:</span><span class="s2">1e4</span><span class="s0">);</span><span class="s1">const </span><span class="s0">l=!!process.env.WATCHPACK_RECURSIVE_WATCHER_LOGGING;</span><span class="s1">let </span><span class="s0">u=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">let </span><span class="s0">d=</span><span class="s2">0</span><span class="s0">;</span><span class="s1">const </span><span class="s0">p=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">m=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">g=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">y=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">class </span><span class="s0">DirectWatcher{constructor(e){</span><span class="s1">this</span><span class="s0">.filePath=e;</span><span class="s1">this</span><span class="s0">.watchers=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.watcher=undefined;</span><span class="s1">try</span><span class="s0">{</span><span class="s1">const </span><span class="s0">t=s.watch(e);</span><span class="s1">this</span><span class="s0">.watcher=t;t.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((e,t)=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.watchers){i.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,t)}}));t.on(</span><span class="s3">&quot;error&quot;</span><span class="s0">,(e=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.watchers){t.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,e)}}))}</span><span class="s1">catch</span><span class="s0">(e){process.nextTick((()=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.watchers){t.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,e)}}))}d++}add(e){y.set(e,</span><span class="s1">this</span><span class="s0">);</span><span class="s1">this</span><span class="s0">.watchers.add(e)}remove(e){</span><span class="s1">this</span><span class="s0">.watchers.delete(e);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watchers.size===</span><span class="s2">0</span><span class="s0">){g.delete(</span><span class="s1">this</span><span class="s0">.filePath);d--;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watcher)</span><span class="s1">this</span><span class="s0">.watcher.close()}}getWatchers(){</span><span class="s1">return this</span><span class="s0">.watchers}}</span><span class="s1">class </span><span class="s0">RecursiveWatcher{constructor(e){</span><span class="s1">this</span><span class="s0">.rootPath=e;</span><span class="s1">this</span><span class="s0">.mapWatcherToPath=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.mapPathToWatchers=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.watcher=undefined;</span><span class="s1">try</span><span class="s0">{</span><span class="s1">const </span><span class="s0">t=s.watch(e,{recursive:</span><span class="s1">true</span><span class="s0">});</span><span class="s1">this</span><span class="s0">.watcher=t;t.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((e,t)=&gt;{</span><span class="s1">if</span><span class="s0">(!t){</span><span class="s1">if</span><span class="s0">(l){process.stderr.write(</span><span class="s3">`[watchpack] dispatch </span><span class="s0">${e} </span><span class="s3">event in recursive watcher (</span><span class="s0">${</span><span class="s1">this</span><span class="s0">.rootPath}</span><span class="s3">) to all watchers</span><span class="s4">\n</span><span class="s3">`</span><span class="s0">)}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.mapWatcherToPath.keys()){t.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e)}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">const </span><span class="s0">i=r.dirname(t);</span><span class="s1">const </span><span class="s0">s=</span><span class="s1">this</span><span class="s0">.mapPathToWatchers.get(i);</span><span class="s1">if</span><span class="s0">(l){process.stderr.write(</span><span class="s3">`[watchpack] dispatch </span><span class="s0">${e} </span><span class="s3">event in recursive watcher (</span><span class="s0">${</span><span class="s1">this</span><span class="s0">.rootPath}</span><span class="s3">) for '</span><span class="s0">${t}</span><span class="s3">' to </span><span class="s0">${s?s.size:</span><span class="s2">0</span><span class="s0">} </span><span class="s3">watchers</span><span class="s4">\n</span><span class="s3">`</span><span class="s0">)}</span><span class="s1">if</span><span class="s0">(s===undefined)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of s){i.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,e,r.basename(t))}}}));t.on(</span><span class="s3">&quot;error&quot;</span><span class="s0">,(e=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.mapWatcherToPath.keys()){t.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,e)}}))}</span><span class="s1">catch</span><span class="s0">(e){process.nextTick((()=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of </span><span class="s1">this</span><span class="s0">.mapWatcherToPath.keys()){t.emit(</span><span class="s3">&quot;error&quot;</span><span class="s0">,e)}}))}d++;</span><span class="s1">if</span><span class="s0">(l){process.stderr.write(</span><span class="s3">`[watchpack] created recursive watcher at </span><span class="s0">${e}</span><span class="s4">\n</span><span class="s3">`</span><span class="s0">)}}add(e,t){y.set(t,</span><span class="s1">this</span><span class="s0">);</span><span class="s1">const </span><span class="s0">i=e.slice(</span><span class="s1">this</span><span class="s0">.rootPath.length+</span><span class="s2">1</span><span class="s0">)||</span><span class="s3">&quot;.&quot;</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.mapWatcherToPath.set(t,i);</span><span class="s1">const </span><span class="s0">s=</span><span class="s1">this</span><span class="s0">.mapPathToWatchers.get(i);</span><span class="s1">if</span><span class="s0">(s===undefined){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Set;e.add(t);</span><span class="s1">this</span><span class="s0">.mapPathToWatchers.set(i,e)}</span><span class="s1">else</span><span class="s0">{s.add(t)}}remove(e){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.mapWatcherToPath.get(e);</span><span class="s1">if</span><span class="s0">(!t)</span><span class="s1">return</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.mapWatcherToPath.delete(e);</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.mapPathToWatchers.get(t);i.delete(e);</span><span class="s1">if</span><span class="s0">(i.size===</span><span class="s2">0</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.mapPathToWatchers.delete(t)}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.mapWatcherToPath.size===</span><span class="s2">0</span><span class="s0">){m.delete(</span><span class="s1">this</span><span class="s0">.rootPath);d--;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watcher)</span><span class="s1">this</span><span class="s0">.watcher.close();</span><span class="s1">if</span><span class="s0">(l){process.stderr.write(</span><span class="s3">`[watchpack] closed recursive watcher at </span><span class="s0">${</span><span class="s1">this</span><span class="s0">.rootPath}</span><span class="s4">\n</span><span class="s3">`</span><span class="s0">)}}}getWatchers(){</span><span class="s1">return this</span><span class="s0">.mapWatcherToPath}}</span><span class="s1">class </span><span class="s0">Watcher </span><span class="s1">extends </span><span class="s0">n{close(){</span><span class="s1">if</span><span class="s0">(p.has(</span><span class="s1">this</span><span class="s0">)){p.delete(</span><span class="s1">this</span><span class="s0">);</span><span class="s1">return</span><span class="s0">}</span><span class="s1">const </span><span class="s0">e=y.get(</span><span class="s1">this</span><span class="s0">);e.remove(</span><span class="s1">this</span><span class="s0">);y.delete(</span><span class="s1">this</span><span class="s0">)}}</span><span class="s1">const </span><span class="s0">createDirectWatcher=e=&gt;{</span><span class="s1">const </span><span class="s0">t=g.get(e);</span><span class="s1">if</span><span class="s0">(t!==undefined)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">DirectWatcher(e);g.set(e,i);</span><span class="s1">return </span><span class="s0">i};</span><span class="s1">const </span><span class="s0">createRecursiveWatcher=e=&gt;{</span><span class="s1">const </span><span class="s0">t=m.get(e);</span><span class="s1">if</span><span class="s0">(t!==undefined)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">RecursiveWatcher(e);m.set(e,i);</span><span class="s1">return </span><span class="s0">i};</span><span class="s1">const </span><span class="s0">execute=()=&gt;{</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">addWatcher=(t,i)=&gt;{</span><span class="s1">const </span><span class="s0">s=e.get(i);</span><span class="s1">if</span><span class="s0">(s===undefined){e.set(i,t)}</span><span class="s1">else if</span><span class="s0">(Array.isArray(s)){s.push(t)}</span><span class="s1">else</span><span class="s0">{e.set(i,[s,t])}};</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of p){addWatcher(e,t)}p.clear();</span><span class="s1">if</span><span class="s0">(!h||f-d&gt;=e.size){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[t,i]of e){</span><span class="s1">const </span><span class="s0">e=createDirectWatcher(t);</span><span class="s1">if</span><span class="s0">(Array.isArray(i)){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of i)e.add(t)}</span><span class="s1">else</span><span class="s0">{e.add(i)}}</span><span class="s1">return</span><span class="s0">}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of m.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[t,i]of e.getWatchers()){addWatcher(t,r.join(e.rootPath,i))}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of g.values()){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of e.getWatchers()){addWatcher(t,e.filePath)}}</span><span class="s1">const </span><span class="s0">t=c(e,f*</span><span class="s2">.9</span><span class="s0">);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,i]of t){</span><span class="s1">if</span><span class="s0">(i.size===</span><span class="s2">1</span><span class="s0">){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of i){</span><span class="s1">const </span><span class="s0">i=createDirectWatcher(t);</span><span class="s1">const </span><span class="s0">s=y.get(e);</span><span class="s1">if</span><span class="s0">(s===i)</span><span class="s1">continue</span><span class="s0">;i.add(e);</span><span class="s1">if</span><span class="s0">(s!==undefined)s.remove(e)}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">Set(i.values());</span><span class="s1">if</span><span class="s0">(t.size&gt;</span><span class="s2">1</span><span class="s0">){</span><span class="s1">const </span><span class="s0">t=createRecursiveWatcher(e);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,s]of i){</span><span class="s1">const </span><span class="s0">i=y.get(e);</span><span class="s1">if</span><span class="s0">(i===t)</span><span class="s1">continue</span><span class="s0">;t.add(s,e);</span><span class="s1">if</span><span class="s0">(i!==undefined)i.remove(e)}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of t){</span><span class="s1">const </span><span class="s0">t=createDirectWatcher(e);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of i.keys()){</span><span class="s1">const </span><span class="s0">i=y.get(e);</span><span class="s1">if</span><span class="s0">(i===t)</span><span class="s1">continue</span><span class="s0">;t.add(e);</span><span class="s1">if</span><span class="s0">(i!==undefined)i.remove(e)}}}}}};t.watch=e=&gt;{</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">Watcher;</span><span class="s1">const </span><span class="s0">i=g.get(e);</span><span class="s1">if</span><span class="s0">(i!==undefined){i.add(t);</span><span class="s1">return </span><span class="s0">t}</span><span class="s1">let </span><span class="s0">s=e;</span><span class="s1">for</span><span class="s0">(;;){</span><span class="s1">const </span><span class="s0">i=m.get(s);</span><span class="s1">if</span><span class="s0">(i!==undefined){i.add(e,t);</span><span class="s1">return </span><span class="s0">t}</span><span class="s1">const </span><span class="s0">n=r.dirname(s);</span><span class="s1">if</span><span class="s0">(n===s)</span><span class="s1">break</span><span class="s0">;s=n}p.set(t,e);</span><span class="s1">if</span><span class="s0">(!u)execute();</span><span class="s1">return </span><span class="s0">t};t.batch=e=&gt;{u=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">try</span><span class="s0">{e()}</span><span class="s1">finally</span><span class="s0">{u=</span><span class="s1">false</span><span class="s0">;execute()}};t.getNumberOfWatchers=()=&gt;d},</span><span class="s2">747</span><span class="s0">:(e,t,i)=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;</span><span class="s1">const </span><span class="s0">s=i(</span><span class="s2">653</span><span class="s0">);</span><span class="s1">const </span><span class="s0">r=i(</span><span class="s2">73</span><span class="s0">);</span><span class="s1">const </span><span class="s0">n=i(</span><span class="s2">361</span><span class="s0">).EventEmitter;</span><span class="s1">const </span><span class="s0">c=i(</span><span class="s2">660</span><span class="s0">);</span><span class="s1">const </span><span class="s0">a=i(</span><span class="s2">384</span><span class="s0">);</span><span class="s1">const </span><span class="s0">o=[];</span><span class="s1">const </span><span class="s0">h={};</span><span class="s1">function </span><span class="s0">addWatchersToSet(e,t){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of e){</span><span class="s1">const </span><span class="s0">e=i.watcher;</span><span class="s1">if</span><span class="s0">(!t.has(e.directoryWatcher)){t.add(e.directoryWatcher)}}}</span><span class="s1">const </span><span class="s0">stringToRegexp=e=&gt;{</span><span class="s1">const </span><span class="s0">t=c(e,{globstar:</span><span class="s1">true</span><span class="s0">,extended:</span><span class="s1">true</span><span class="s0">}).source;</span><span class="s1">const </span><span class="s0">i=t.slice(</span><span class="s2">0</span><span class="s0">,t.length-</span><span class="s2">1</span><span class="s0">)+</span><span class="s3">&quot;(?:$|</span><span class="s4">\\</span><span class="s3">/)&quot;</span><span class="s0">;</span><span class="s1">return </span><span class="s0">i};</span><span class="s1">const </span><span class="s0">ignoredToFunction=e=&gt;{</span><span class="s1">if</span><span class="s0">(Array.isArray(e)){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">RegExp(e.map((e=&gt;stringToRegexp(e))).join(</span><span class="s3">&quot;|&quot;</span><span class="s0">));</span><span class="s1">return </span><span class="s0">e=&gt;t.test(e.replace(</span><span class="s5">/\\/g</span><span class="s0">,</span><span class="s3">&quot;/&quot;</span><span class="s0">))}</span><span class="s1">else if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">e===</span><span class="s3">&quot;string&quot;</span><span class="s0">){</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">new </span><span class="s0">RegExp(stringToRegexp(e));</span><span class="s1">return </span><span class="s0">e=&gt;t.test(e.replace(</span><span class="s5">/\\/g</span><span class="s0">,</span><span class="s3">&quot;/&quot;</span><span class="s0">))}</span><span class="s1">else if</span><span class="s0">(e </span><span class="s1">instanceof </span><span class="s0">RegExp){</span><span class="s1">return </span><span class="s0">t=&gt;e.test(t.replace(</span><span class="s5">/\\/g</span><span class="s0">,</span><span class="s3">&quot;/&quot;</span><span class="s0">))}</span><span class="s1">else if</span><span class="s0">(e </span><span class="s1">instanceof </span><span class="s0">Function){</span><span class="s1">return </span><span class="s0">e}</span><span class="s1">else if</span><span class="s0">(e){</span><span class="s1">throw new </span><span class="s0">Error(</span><span class="s3">`Invalid option for 'ignored': </span><span class="s0">${e}</span><span class="s3">`</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">return</span><span class="s0">()=&gt;</span><span class="s1">false</span><span class="s0">}};</span><span class="s1">const </span><span class="s0">normalizeOptions=e=&gt;({followSymlinks:!!e.followSymlinks,ignored:ignoredToFunction(e.ignored),poll:e.poll});</span><span class="s1">const </span><span class="s0">f=</span><span class="s1">new </span><span class="s0">WeakMap;</span><span class="s1">const </span><span class="s0">cachedNormalizeOptions=e=&gt;{</span><span class="s1">const </span><span class="s0">t=f.get(e);</span><span class="s1">if</span><span class="s0">(t!==undefined)</span><span class="s1">return </span><span class="s0">t;</span><span class="s1">const </span><span class="s0">i=normalizeOptions(e);f.set(e,i);</span><span class="s1">return </span><span class="s0">i};</span><span class="s1">class </span><span class="s0">WatchpackFileWatcher{constructor(e,t,i){</span><span class="s1">this</span><span class="s0">.files=Array.isArray(i)?i:[i];</span><span class="s1">this</span><span class="s0">.watcher=t;t.on(</span><span class="s3">&quot;initial-missing&quot;</span><span class="s0">,(t=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.files){</span><span class="s1">if</span><span class="s0">(!e._missing.has(i))e._onRemove(i,i,t)}}));t.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((t,i)=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">s of </span><span class="s1">this</span><span class="s0">.files){e._onChange(s,t,s,i)}}));t.on(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,(t=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.files){e._onRemove(i,i,t)}}))}update(e){</span><span class="s1">if</span><span class="s0">(!Array.isArray(e)){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.files.length!==</span><span class="s2">1</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.files=[e]}</span><span class="s1">else if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.files[</span><span class="s2">0</span><span class="s0">]!==e){</span><span class="s1">this</span><span class="s0">.files[</span><span class="s2">0</span><span class="s0">]=e}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.files=e}}close(){</span><span class="s1">this</span><span class="s0">.watcher.close()}}</span><span class="s1">class </span><span class="s0">WatchpackDirectoryWatcher{constructor(e,t,i){</span><span class="s1">this</span><span class="s0">.directories=Array.isArray(i)?i:[i];</span><span class="s1">this</span><span class="s0">.watcher=t;t.on(</span><span class="s3">&quot;initial-missing&quot;</span><span class="s0">,(t=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.directories){e._onRemove(i,i,t)}}));t.on(</span><span class="s3">&quot;change&quot;</span><span class="s0">,((t,i,s)=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">r of </span><span class="s1">this</span><span class="s0">.directories){e._onChange(r,i,t,s)}}));t.on(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,(t=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of </span><span class="s1">this</span><span class="s0">.directories){e._onRemove(i,i,t)}}))}update(e){</span><span class="s1">if</span><span class="s0">(!Array.isArray(e)){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.directories.length!==</span><span class="s2">1</span><span class="s0">){</span><span class="s1">this</span><span class="s0">.directories=[e]}</span><span class="s1">else if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.directories[</span><span class="s2">0</span><span class="s0">]!==e){</span><span class="s1">this</span><span class="s0">.directories[</span><span class="s2">0</span><span class="s0">]=e}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">this</span><span class="s0">.directories=e}}close(){</span><span class="s1">this</span><span class="s0">.watcher.close()}}</span><span class="s1">class </span><span class="s0">Watchpack </span><span class="s1">extends </span><span class="s0">n{constructor(e){</span><span class="s1">super</span><span class="s0">();</span><span class="s1">if</span><span class="s0">(!e)e=h;</span><span class="s1">this</span><span class="s0">.options=e;</span><span class="s1">this</span><span class="s0">.aggregateTimeout=</span><span class="s1">typeof </span><span class="s0">e.aggregateTimeout===</span><span class="s3">&quot;number&quot;</span><span class="s0">?e.aggregateTimeout:</span><span class="s2">200</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.watcherOptions=cachedNormalizeOptions(e);</span><span class="s1">this</span><span class="s0">.watcherManager=s(</span><span class="s1">this</span><span class="s0">.watcherOptions);</span><span class="s1">this</span><span class="s0">.fileWatchers=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.directoryWatchers=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">._missing=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.startTime=undefined;</span><span class="s1">this</span><span class="s0">.paused=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">this</span><span class="s0">.aggregatedChanges=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.aggregatedRemovals=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.aggregateTimer=undefined;</span><span class="s1">this</span><span class="s0">._onTimeout=</span><span class="s1">this</span><span class="s0">._onTimeout.bind(</span><span class="s1">this</span><span class="s0">)}watch(e,t,i){</span><span class="s1">let </span><span class="s0">s,n,c,h;</span><span class="s1">if</span><span class="s0">(!t){({files:s=o,directories:n=o,missing:c=o,startTime:h}=e)}</span><span class="s1">else</span><span class="s0">{s=e;n=t;c=o;h=i}</span><span class="s1">this</span><span class="s0">.paused=</span><span class="s1">false</span><span class="s0">;</span><span class="s1">const </span><span class="s0">f=</span><span class="s1">this</span><span class="s0">.fileWatchers;</span><span class="s1">const </span><span class="s0">l=</span><span class="s1">this</span><span class="s0">.directoryWatchers;</span><span class="s1">const </span><span class="s0">u=</span><span class="s1">this</span><span class="s0">.watcherOptions.ignored;</span><span class="s1">const </span><span class="s0">filter=e=&gt;!u(e);</span><span class="s1">const </span><span class="s0">addToMap=(e,t,i)=&gt;{</span><span class="s1">const </span><span class="s0">s=e.get(t);</span><span class="s1">if</span><span class="s0">(s===undefined){e.set(t,i)}</span><span class="s1">else if</span><span class="s0">(Array.isArray(s)){s.push(i)}</span><span class="s1">else</span><span class="s0">{e.set(t,[s,i])}};</span><span class="s1">const </span><span class="s0">d=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">p=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">const </span><span class="s0">m=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.watcherOptions.followSymlinks){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">r;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of s){</span><span class="s1">if</span><span class="s0">(filter(t)){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of e.resolve(t)){</span><span class="s1">if</span><span class="s0">(t===i||filter(i)){addToMap(d,i,t)}}}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of c){</span><span class="s1">if</span><span class="s0">(filter(t)){</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of e.resolve(t)){</span><span class="s1">if</span><span class="s0">(t===i||filter(i)){m.add(t);addToMap(d,i,t)}}}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">t of n){</span><span class="s1">if</span><span class="s0">(filter(t)){</span><span class="s1">let </span><span class="s0">i=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">s of e.resolve(t)){</span><span class="s1">if</span><span class="s0">(filter(s)){addToMap(i?p:d,s,t)}i=</span><span class="s1">false</span><span class="s0">}}}}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of s){</span><span class="s1">if</span><span class="s0">(filter(e)){addToMap(d,e,e)}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of c){</span><span class="s1">if</span><span class="s0">(filter(e)){m.add(e);addToMap(d,e,e)}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of n){</span><span class="s1">if</span><span class="s0">(filter(e)){addToMap(p,e,e)}}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of f){</span><span class="s1">const </span><span class="s0">i=d.get(e);</span><span class="s1">if</span><span class="s0">(i===undefined){t.close();f.delete(e)}</span><span class="s1">else</span><span class="s0">{t.update(i);d.delete(e)}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of l){</span><span class="s1">const </span><span class="s0">i=p.get(e);</span><span class="s1">if</span><span class="s0">(i===undefined){t.close();l.delete(e)}</span><span class="s1">else</span><span class="s0">{t.update(i);p.delete(e)}}a.batch((()=&gt;{</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of d){</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.watcherManager.watchFile(e,h);</span><span class="s1">if</span><span class="s0">(i){f.set(e,</span><span class="s1">new </span><span class="s0">WatchpackFileWatcher(</span><span class="s1">this</span><span class="s0">,i,t))}}</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const</span><span class="s0">[e,t]of p){</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">this</span><span class="s0">.watcherManager.watchDirectory(e,h);</span><span class="s1">if</span><span class="s0">(i){l.set(e,</span><span class="s1">new </span><span class="s0">WatchpackDirectoryWatcher(</span><span class="s1">this</span><span class="s0">,i,t))}}}));</span><span class="s1">this</span><span class="s0">._missing=m;</span><span class="s1">this</span><span class="s0">.startTime=h}close(){</span><span class="s1">this</span><span class="s0">.paused=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.aggregateTimer)clearTimeout(</span><span class="s1">this</span><span class="s0">.aggregateTimer);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.fileWatchers.values())e.close();</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">e of </span><span class="s1">this</span><span class="s0">.directoryWatchers.values())e.close();</span><span class="s1">this</span><span class="s0">.fileWatchers.clear();</span><span class="s1">this</span><span class="s0">.directoryWatchers.clear()}pause(){</span><span class="s1">this</span><span class="s0">.paused=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.aggregateTimer)clearTimeout(</span><span class="s1">this</span><span class="s0">.aggregateTimer)}getTimes(){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Set;addWatchersToSet(</span><span class="s1">this</span><span class="s0">.fileWatchers.values(),e);addWatchersToSet(</span><span class="s1">this</span><span class="s0">.directoryWatchers.values(),e);</span><span class="s1">const </span><span class="s0">t=Object.create(</span><span class="s1">null</span><span class="s0">);</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of e){</span><span class="s1">const </span><span class="s0">e=i.getTimes();</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">i of Object.keys(e))t[i]=e[i]}</span><span class="s1">return </span><span class="s0">t}getTimeInfoEntries(){</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">new </span><span class="s0">Map;</span><span class="s1">this</span><span class="s0">.collectTimeInfoEntries(e,e);</span><span class="s1">return </span><span class="s0">e}collectTimeInfoEntries(e,t){</span><span class="s1">const </span><span class="s0">i=</span><span class="s1">new </span><span class="s0">Set;addWatchersToSet(</span><span class="s1">this</span><span class="s0">.fileWatchers.values(),i);addWatchersToSet(</span><span class="s1">this</span><span class="s0">.directoryWatchers.values(),i);</span><span class="s1">const </span><span class="s0">s={value:</span><span class="s2">0</span><span class="s0">};</span><span class="s1">for</span><span class="s0">(</span><span class="s1">const </span><span class="s0">r of i){r.collectTimeInfoEntries(e,t,s)}}getAggregated(){</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.aggregateTimer){clearTimeout(</span><span class="s1">this</span><span class="s0">.aggregateTimer);</span><span class="s1">this</span><span class="s0">.aggregateTimer=undefined}</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">this</span><span class="s0">.aggregatedChanges;</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.aggregatedRemovals;</span><span class="s1">this</span><span class="s0">.aggregatedChanges=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.aggregatedRemovals=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">return</span><span class="s0">{changes:e,removals:t}}_onChange(e,t,i,s){i=i||e;</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.paused){</span><span class="s1">this</span><span class="s0">.emit(</span><span class="s3">&quot;change&quot;</span><span class="s0">,i,t,s);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.aggregateTimer)clearTimeout(</span><span class="s1">this</span><span class="s0">.aggregateTimer);</span><span class="s1">this</span><span class="s0">.aggregateTimer=setTimeout(</span><span class="s1">this</span><span class="s0">._onTimeout,</span><span class="s1">this</span><span class="s0">.aggregateTimeout)}</span><span class="s1">this</span><span class="s0">.aggregatedRemovals.delete(e);</span><span class="s1">this</span><span class="s0">.aggregatedChanges.add(e)}_onRemove(e,t,i){t=t||e;</span><span class="s1">if</span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.paused){</span><span class="s1">this</span><span class="s0">.emit(</span><span class="s3">&quot;remove&quot;</span><span class="s0">,t,i);</span><span class="s1">if</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.aggregateTimer)clearTimeout(</span><span class="s1">this</span><span class="s0">.aggregateTimer);</span><span class="s1">this</span><span class="s0">.aggregateTimer=setTimeout(</span><span class="s1">this</span><span class="s0">._onTimeout,</span><span class="s1">this</span><span class="s0">.aggregateTimeout)}</span><span class="s1">this</span><span class="s0">.aggregatedChanges.delete(e);</span><span class="s1">this</span><span class="s0">.aggregatedRemovals.add(e)}_onTimeout(){</span><span class="s1">this</span><span class="s0">.aggregateTimer=undefined;</span><span class="s1">const </span><span class="s0">e=</span><span class="s1">this</span><span class="s0">.aggregatedChanges;</span><span class="s1">const </span><span class="s0">t=</span><span class="s1">this</span><span class="s0">.aggregatedRemovals;</span><span class="s1">this</span><span class="s0">.aggregatedChanges=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.aggregatedRemovals=</span><span class="s1">new </span><span class="s0">Set;</span><span class="s1">this</span><span class="s0">.emit(</span><span class="s3">&quot;aggregated&quot;</span><span class="s0">,e,t)}}e.exports=Watchpack},</span><span class="s2">491</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;assert&quot;</span><span class="s0">)},</span><span class="s2">57</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;constants&quot;</span><span class="s0">)},</span><span class="s2">361</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;events&quot;</span><span class="s0">)},</span><span class="s2">147</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;fs&quot;</span><span class="s0">)},</span><span class="s2">37</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;os&quot;</span><span class="s0">)},</span><span class="s2">17</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;path&quot;</span><span class="s0">)},</span><span class="s2">781</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;stream&quot;</span><span class="s0">)},</span><span class="s2">837</span><span class="s0">:e=&gt;{</span><span class="s3">&quot;use strict&quot;</span><span class="s0">;e.exports=require(</span><span class="s3">&quot;util&quot;</span><span class="s0">)}};</span><span class="s1">var </span><span class="s0">t={};</span><span class="s1">function </span><span class="s0">__nccwpck_require__(i){</span><span class="s1">var </span><span class="s0">s=t[i];</span><span class="s1">if</span><span class="s0">(s!==undefined){</span><span class="s1">return </span><span class="s0">s.exports}</span><span class="s1">var </span><span class="s0">r=t[i]={exports:{}};</span><span class="s1">var </span><span class="s0">n=</span><span class="s1">true</span><span class="s0">;</span><span class="s1">try</span><span class="s0">{e[i](r,r.exports,__nccwpck_require__);n=</span><span class="s1">false</span><span class="s0">}</span><span class="s1">finally</span><span class="s0">{</span><span class="s1">if</span><span class="s0">(n)</span><span class="s1">delete </span><span class="s0">t[i]}</span><span class="s1">return </span><span class="s0">r.exports}</span><span class="s1">if</span><span class="s0">(</span><span class="s1">typeof </span><span class="s0">__nccwpck_require__!==</span><span class="s3">&quot;undefined&quot;</span><span class="s0">)__nccwpck_require__.ab=__dirname+</span><span class="s3">&quot;/&quot;</span><span class="s0">;</span><span class="s1">var </span><span class="s0">i=__nccwpck_require__(</span><span class="s2">747</span><span class="s0">);module.exports=i})();</span></pre>
</body>
</html>