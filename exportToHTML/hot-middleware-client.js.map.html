<html>
<head>
<title>hot-middleware-client.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
hot-middleware-client.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/client/dev/hot-middleware-client.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">NextRouter,</span><span class="s3">\n  </span><span class="s1">PrivateRouteInfo,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/router/router'</span><span class="s3">\n</span><span class="s1">import connect from './hot-reloader/pages/hot-reloader-pages'</span><span class="s3">\n</span><span class="s1">import { sendMessage } from './hot-reloader/pages/websocket'</span><span class="s3">\n\n</span><span class="s1">// Define a local type for the window.next object</span><span class="s3">\n</span><span class="s1">interface NextWindow {</span><span class="s3">\n  </span><span class="s1">next?: {</span><span class="s3">\n    </span><span class="s1">router?: NextRouter &amp; {</span><span class="s3">\n      </span><span class="s1">components: { [pathname: string]: PrivateRouteInfo }</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">__nextDevClientId?: string</span><span class="s3">\n  </span><span class="s1">location: Location</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">declare const window: NextWindow</span><span class="s3">\n\n</span><span class="s1">let reloading = false</span><span class="s3">\n\n</span><span class="s1">export default () =&gt; {</span><span class="s3">\n  </span><span class="s1">const devClient = connect()</span><span class="s3">\n\n  </span><span class="s1">devClient.subscribeToHmrEvent((obj: any) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (reloading) return</span><span class="s3">\n\n    </span><span class="s1">// Retrieve the router if it's available</span><span class="s3">\n    </span><span class="s1">const router = window.next?.router</span><span class="s3">\n\n    </span><span class="s1">// Determine if we're on an error page or the router is not initialized</span><span class="s3">\n    </span><span class="s1">const isOnErrorPage =</span><span class="s3">\n      </span><span class="s1">!router || router.pathname === '/404' || router.pathname === '/_error'</span><span class="s3">\n\n    </span><span class="s1">switch (obj.action) {</span><span class="s3">\n      </span><span class="s1">case 'reloadPage': {</span><span class="s3">\n        </span><span class="s1">sendMessage(</span><span class="s3">\n          </span><span class="s1">JSON.stringify({</span><span class="s3">\n            </span><span class="s1">event: 'client-reload-page',</span><span class="s3">\n            </span><span class="s1">clientId: window.__nextDevClientId,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">reloading = true</span><span class="s3">\n        </span><span class="s1">return window.location.reload()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'removedPage': {</span><span class="s3">\n        </span><span class="s1">const [page] = obj.data</span><span class="s3">\n\n        </span><span class="s1">// Check if the removed page is the current page</span><span class="s3">\n        </span><span class="s1">const isCurrentPage = page === router?.pathname</span><span class="s3">\n\n        </span><span class="s1">// We enter here if the removed page is currently being viewed</span><span class="s3">\n        </span><span class="s1">// or if we happen to be on an error page.</span><span class="s3">\n        </span><span class="s1">if (isCurrentPage || isOnErrorPage) {</span><span class="s3">\n          </span><span class="s1">sendMessage(</span><span class="s3">\n            </span><span class="s1">JSON.stringify({</span><span class="s3">\n              </span><span class="s1">event: 'client-removed-page',</span><span class="s3">\n              </span><span class="s1">clientId: window.__nextDevClientId,</span><span class="s3">\n              </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return window.location.reload()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'addedPage': {</span><span class="s3">\n        </span><span class="s1">const [page] = obj.data</span><span class="s3">\n\n        </span><span class="s1">// Check if the added page is the current page</span><span class="s3">\n        </span><span class="s1">const isCurrentPage = page === router?.pathname</span><span class="s3">\n\n        </span><span class="s1">// Check if the page component is not yet loaded</span><span class="s3">\n        </span><span class="s1">const isPageNotLoaded =</span><span class="s3">\n          </span><span class="s1">typeof router?.components?.[page] === 'undefined'</span><span class="s3">\n\n        </span><span class="s1">// We enter this block if the newly added page is the one currently being viewed</span><span class="s3">\n        </span><span class="s1">// but hasn't been loaded yet, or if we're on an error page.</span><span class="s3">\n        </span><span class="s1">if ((isCurrentPage &amp;&amp; isPageNotLoaded) || isOnErrorPage) {</span><span class="s3">\n          </span><span class="s1">sendMessage(</span><span class="s3">\n            </span><span class="s1">JSON.stringify({</span><span class="s3">\n              </span><span class="s1">event: 'client-added-page',</span><span class="s3">\n              </span><span class="s1">clientId: window.__nextDevClientId,</span><span class="s3">\n              </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return window.location.reload()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'serverError':</span><span class="s3">\n      </span><span class="s1">case 'devPagesManifestUpdate':</span><span class="s3">\n      </span><span class="s1">case 'isrManifest':</span><span class="s3">\n      </span><span class="s1">case 'building':</span><span class="s3">\n      </span><span class="s1">case 'finishBuilding': {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">default: {</span><span class="s3">\n        </span><span class="s1">throw new Error('Unexpected action ' + obj.action)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return devClient</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;reloading&quot;</span><span class="s0">,</span><span class="s1">&quot;devClient&quot;</span><span class="s0">,</span><span class="s1">&quot;connect&quot;</span><span class="s0">,</span><span class="s1">&quot;subscribeToHmrEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;router&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;isOnErrorPage&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;sendMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;clientId&quot;</span><span class="s0">,</span><span class="s1">&quot;__nextDevClientId&quot;</span><span class="s0">,</span><span class="s1">&quot;location&quot;</span><span class="s0">,</span><span class="s1">&quot;reload&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;isCurrentPage&quot;</span><span class="s0">,</span><span class="s1">&quot;isPageNotLoaded&quot;</span><span class="s0">,</span><span class="s1">&quot;components&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAsBA;;;eAAA;;;;2EAlBoB;2BACQ;AAe5B,IAAIA,YAAY;MAEhB,WAAe;IACb,MAAMC,YAAYC,IAAAA,yBAAO;IAEzBD,UAAUE,mBAAmB,CAAC,CAACC;YAIdC;QAHf,IAAIL,WAAW;QAEf,wCAAwC;QACxC,MAAMM,UAASD,eAAAA,OAAOE,IAAI,qBAAXF,aAAaC,MAAM;QAElC,uEAAuE;QACvE,MAAME,gBACJ,CAACF,UAAUA,OAAOG,QAAQ,KAAK,UAAUH,OAAOG,QAAQ,KAAK;QAE/D,OAAQL,IAAIM,MAAM;YAChB,KAAK;gBAAc;oBACjBC,IAAAA,sBAAW,EACTC,KAAKC,SAAS,CAAC;wBACbC,OAAO;wBACPC,UAAUV,OAAOW,iBAAiB;oBACpC;oBAEFhB,YAAY;oBACZ,OAAOK,OAAOY,QAAQ,CAACC,MAAM;gBAC/B;YACA,KAAK;gBAAe;oBAClB,MAAM,CAACC,KAAK,GAAGf,IAAIgB,IAAI;oBAEvB,gDAAgD;oBAChD,MAAMC,gBAAgBF,UAASb,0BAAAA,OAAQG,QAAQ;oBAE/C,8DAA8D;oBAC9D,0CAA0C;oBAC1C,IAAIY,iBAAiBb,eAAe;wBAClCG,IAAAA,sBAAW,EACTC,KAAKC,SAAS,CAAC;4BACbC,OAAO;4BACPC,UAAUV,OAAOW,iBAAiB;4BAClCG;wBACF;wBAEF,OAAOd,OAAOY,QAAQ,CAACC,MAAM;oBAC/B;oBACA;gBACF;YACA,KAAK;gBAAa;wBAQPZ;oBAPT,MAAM,CAACa,KAAK,GAAGf,IAAIgB,IAAI;oBAEvB,8CAA8C;oBAC9C,MAAMC,gBAAgBF,UAASb,0BAAAA,OAAQG,QAAQ;oBAE/C,gDAAgD;oBAChD,MAAMa,kBACJ,QAAOhB,2BAAAA,qBAAAA,OAAQiB,UAAU,qBAAlBjB,kBAAoB,CAACa,KAAK,MAAK;oBAExC,gFAAgF;oBAChF,4DAA4D;oBAC5D,IAAI,AAACE,iBAAiBC,mBAAoBd,eAAe;wBACvDG,IAAAA,sBAAW,EACTC,KAAKC,SAAS,CAAC;4BACbC,OAAO;4BACPC,UAAUV,OAAOW,iBAAiB;4BAClCG;wBACF;wBAEF,OAAOd,OAAOY,QAAQ,CAACC,MAAM;oBAC/B;oBACA;gBACF;YACA,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBAAkB;oBACrB;gBACF;YACA;gBAAS;oBACP,MAAM,qBAA4C,CAA5C,IAAIM,MAAM,uBAAuBpB,IAAIM,MAAM,GAA3C,qBAAA;+BAAA;oCAAA;sCAAA;oBAA2C;gBACnD;QACF;IACF;IAEA,OAAOT;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>