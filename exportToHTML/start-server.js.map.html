<html>
<head>
<title>start-server.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
start-server.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/lib/start-server.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// Start CPU profile if it wasn't already started.</span><span class="s3">\n</span><span class="s1">import './cpu-profile'</span><span class="s3">\n</span><span class="s1">import { getNetworkHost } from '../../lib/get-network-host'</span><span class="s3">\n\n</span><span class="s1">if (performance.getEntriesByName('next-start').length === 0) {</span><span class="s3">\n  </span><span class="s1">performance.mark('next-start')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">import '../next'</span><span class="s3">\n</span><span class="s1">import '../require-hook'</span><span class="s3">\n\n</span><span class="s1">import type { IncomingMessage, ServerResponse } from 'http'</span><span class="s3">\n</span><span class="s1">import type { SelfSignedCertificate } from '../../lib/mkcert'</span><span class="s3">\n</span><span class="s1">import type { WorkerRequestHandler, WorkerUpgradeHandler } from './types'</span><span class="s3">\n\n</span><span class="s1">import fs from 'fs'</span><span class="s3">\n</span><span class="s1">import v8 from 'v8'</span><span class="s3">\n</span><span class="s1">import path from 'path'</span><span class="s3">\n</span><span class="s1">import http from 'http'</span><span class="s3">\n</span><span class="s1">import https from 'https'</span><span class="s3">\n</span><span class="s1">import os from 'os'</span><span class="s3">\n</span><span class="s1">import { exec } from 'child_process'</span><span class="s3">\n</span><span class="s1">import Watchpack from 'next/dist/compiled/watchpack'</span><span class="s3">\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import setupDebug from 'next/dist/compiled/debug'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">RESTART_EXIT_CODE,</span><span class="s3">\n  </span><span class="s1">getFormattedDebugAddress,</span><span class="s3">\n  </span><span class="s1">getNodeDebugType,</span><span class="s3">\n</span><span class="s1">} from './utils'</span><span class="s3">\n</span><span class="s1">import { formatHostname } from './format-hostname'</span><span class="s3">\n</span><span class="s1">import { initialize } from './router-server'</span><span class="s3">\n</span><span class="s1">import { CONFIG_FILES } from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { getStartServerInfo, logStartInfo } from './app-info-log'</span><span class="s3">\n</span><span class="s1">import { validateTurboNextConfig } from '../../lib/turbopack-warning'</span><span class="s3">\n</span><span class="s1">import { type Span, trace, flushAllTraces } from '../../trace'</span><span class="s3">\n</span><span class="s1">import { isIPv6 } from './is-ipv6'</span><span class="s3">\n</span><span class="s1">import { AsyncCallbackSet } from './async-callback-set'</span><span class="s3">\n</span><span class="s1">import type { NextServer } from '../next'</span><span class="s3">\n</span><span class="s1">import type { ConfiguredExperimentalFeature } from '../config'</span><span class="s3">\n\n</span><span class="s1">const debug = setupDebug('next:start-server')</span><span class="s3">\n</span><span class="s1">let startServerSpan: Span | undefined</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Get the process ID (PID) of the process using the specified port</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">async function getProcessIdUsingPort(port: number): Promise&lt;string | null&gt; {</span><span class="s3">\n  </span><span class="s1">const timeoutMs = 250</span><span class="s3">\n  </span><span class="s1">const processLookupController = new AbortController()</span><span class="s3">\n\n  </span><span class="s1">const pidPromise = new Promise&lt;string | null&gt;((resolve) =&gt; {</span><span class="s3">\n    </span><span class="s1">const handleError = (error: Error) =&gt; {</span><span class="s3">\n      </span><span class="s1">debug('Failed to get process ID for port', port, error)</span><span class="s3">\n      </span><span class="s1">resolve(null)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">// Use lsof on Unix-like systems (macOS, Linux)</span><span class="s3">\n      </span><span class="s1">if (process.platform !== 'win32') {</span><span class="s3">\n        </span><span class="s1">exec(</span><span class="s3">\n          </span><span class="s1">`lsof -ti:${port} -sTCP:LISTEN`,</span><span class="s3">\n          </span><span class="s1">{ signal: processLookupController.signal },</span><span class="s3">\n          </span><span class="s1">(error, stdout) =&gt; {</span><span class="s3">\n            </span><span class="s1">if (error) {</span><span class="s3">\n              </span><span class="s1">handleError(error)</span><span class="s3">\n              </span><span class="s1">return</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">// `-sTCP` will ensure there's only one port, clean up output</span><span class="s3">\n            </span><span class="s1">const pid = stdout.trim()</span><span class="s3">\n            </span><span class="s1">resolve(pid || null)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Use netstat on Windows</span><span class="s3">\n        </span><span class="s1">exec(</span><span class="s3">\n          </span><span class="s1">`netstat -ano | findstr /C:</span><span class="s3">\&quot;</span><span class="s1">:${port} </span><span class="s3">\&quot; </span><span class="s1">| findstr LISTENING`,</span><span class="s3">\n          </span><span class="s1">{ signal: processLookupController.signal },</span><span class="s3">\n          </span><span class="s1">(error, stdout) =&gt; {</span><span class="s3">\n            </span><span class="s1">if (error) {</span><span class="s3">\n              </span><span class="s1">handleError(error)</span><span class="s3">\n              </span><span class="s1">return</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">// Clean up output and extract PID</span><span class="s3">\n            </span><span class="s1">const cleanOutput = stdout.replace(/</span><span class="s3">\\</span><span class="s1">s+/g, ' ').trim()</span><span class="s3">\n            </span><span class="s1">if (cleanOutput) {</span><span class="s3">\n              </span><span class="s1">const lines = cleanOutput.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n              </span><span class="s1">const firstLine = lines[0].trim()</span><span class="s3">\n              </span><span class="s1">if (firstLine) {</span><span class="s3">\n                </span><span class="s1">const parts = firstLine.split(' ')</span><span class="s3">\n                </span><span class="s1">const pid = parts[parts.length - 1]</span><span class="s3">\n                </span><span class="s1">resolve(pid || null)</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">resolve(null)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">resolve(null)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (cause) {</span><span class="s3">\n      </span><span class="s1">handleError(</span><span class="s3">\n        </span><span class="s1">new Error('Unexpected error during process lookup', { cause })</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const timeoutId = setTimeout(() =&gt; {</span><span class="s3">\n    </span><span class="s1">processLookupController.abort(</span><span class="s3">\n      </span><span class="s1">`PID detection timed out after ${timeoutMs}ms for port ${port}.`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}, timeoutMs)</span><span class="s3">\n\n  </span><span class="s1">pidPromise.finally(() =&gt; clearTimeout(timeoutId))</span><span class="s3">\n\n  </span><span class="s1">return pidPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface StartServerOptions {</span><span class="s3">\n  </span><span class="s1">dir: string</span><span class="s3">\n  </span><span class="s1">port: number</span><span class="s3">\n  </span><span class="s1">isDev: boolean</span><span class="s3">\n  </span><span class="s1">hostname?: string</span><span class="s3">\n  </span><span class="s1">allowRetry?: boolean</span><span class="s3">\n  </span><span class="s1">customServer?: boolean</span><span class="s3">\n  </span><span class="s1">minimalMode?: boolean</span><span class="s3">\n  </span><span class="s1">keepAliveTimeout?: number</span><span class="s3">\n  </span><span class="s1">// this is dev-server only</span><span class="s3">\n  </span><span class="s1">selfSignedCertificate?: SelfSignedCertificate</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function getRequestHandlers({</span><span class="s3">\n  </span><span class="s1">dir,</span><span class="s3">\n  </span><span class="s1">port,</span><span class="s3">\n  </span><span class="s1">isDev,</span><span class="s3">\n  </span><span class="s1">onDevServerCleanup,</span><span class="s3">\n  </span><span class="s1">server,</span><span class="s3">\n  </span><span class="s1">hostname,</span><span class="s3">\n  </span><span class="s1">minimalMode,</span><span class="s3">\n  </span><span class="s1">keepAliveTimeout,</span><span class="s3">\n  </span><span class="s1">experimentalHttpsServer,</span><span class="s3">\n  </span><span class="s1">quiet,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">dir: string</span><span class="s3">\n  </span><span class="s1">port: number</span><span class="s3">\n  </span><span class="s1">isDev: boolean</span><span class="s3">\n  </span><span class="s1">onDevServerCleanup: ((listener: () =&gt; Promise&lt;void&gt;) =&gt; void) | undefined</span><span class="s3">\n  </span><span class="s1">server?: import('http').Server</span><span class="s3">\n  </span><span class="s1">hostname?: string</span><span class="s3">\n  </span><span class="s1">minimalMode?: boolean</span><span class="s3">\n  </span><span class="s1">keepAliveTimeout?: number</span><span class="s3">\n  </span><span class="s1">experimentalHttpsServer?: boolean</span><span class="s3">\n  </span><span class="s1">quiet?: boolean</span><span class="s3">\n</span><span class="s1">}): ReturnType&lt;typeof initialize&gt; {</span><span class="s3">\n  </span><span class="s1">return initialize({</span><span class="s3">\n    </span><span class="s1">dir,</span><span class="s3">\n    </span><span class="s1">port,</span><span class="s3">\n    </span><span class="s1">hostname,</span><span class="s3">\n    </span><span class="s1">onDevServerCleanup,</span><span class="s3">\n    </span><span class="s1">dev: isDev,</span><span class="s3">\n    </span><span class="s1">minimalMode,</span><span class="s3">\n    </span><span class="s1">server,</span><span class="s3">\n    </span><span class="s1">keepAliveTimeout,</span><span class="s3">\n    </span><span class="s1">experimentalHttpsServer,</span><span class="s3">\n    </span><span class="s1">startServerSpan,</span><span class="s3">\n    </span><span class="s1">quiet,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function startServer(</span><span class="s3">\n  </span><span class="s1">serverOptions: StartServerOptions</span><span class="s3">\n</span><span class="s1">): Promise&lt;void&gt; {</span><span class="s3">\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">dir,</span><span class="s3">\n    </span><span class="s1">isDev,</span><span class="s3">\n    </span><span class="s1">hostname,</span><span class="s3">\n    </span><span class="s1">minimalMode,</span><span class="s3">\n    </span><span class="s1">allowRetry,</span><span class="s3">\n    </span><span class="s1">keepAliveTimeout,</span><span class="s3">\n    </span><span class="s1">selfSignedCertificate,</span><span class="s3">\n  </span><span class="s1">} = serverOptions</span><span class="s3">\n  </span><span class="s1">let { port } = serverOptions</span><span class="s3">\n\n  </span><span class="s1">process.title = `next-server (v${process.env.__NEXT_VERSION})`</span><span class="s3">\n  </span><span class="s1">let handlersReady = () =&gt; {}</span><span class="s3">\n  </span><span class="s1">let handlersError = () =&gt; {}</span><span class="s3">\n\n  </span><span class="s1">let handlersPromise: Promise&lt;void&gt; | undefined = new Promise&lt;void&gt;(</span><span class="s3">\n    </span><span class="s1">(resolve, reject) =&gt; {</span><span class="s3">\n      </span><span class="s1">handlersReady = resolve</span><span class="s3">\n      </span><span class="s1">handlersError = reject</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">let requestHandler: WorkerRequestHandler = async (</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n    </span><span class="s1">res: ServerResponse</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; =&gt; {</span><span class="s3">\n    </span><span class="s1">if (handlersPromise) {</span><span class="s3">\n      </span><span class="s1">await handlersPromise</span><span class="s3">\n      </span><span class="s1">return requestHandler(req, res)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw new Error('Invariant request handler was not setup')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let upgradeHandler: WorkerUpgradeHandler = async (</span><span class="s3">\n    </span><span class="s1">req,</span><span class="s3">\n    </span><span class="s1">socket,</span><span class="s3">\n    </span><span class="s1">head</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt; =&gt; {</span><span class="s3">\n    </span><span class="s1">if (handlersPromise) {</span><span class="s3">\n      </span><span class="s1">await handlersPromise</span><span class="s3">\n      </span><span class="s1">return upgradeHandler(req, socket, head)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw new Error('Invariant upgrade handler was not setup')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let nextServer: NextServer | undefined</span><span class="s3">\n\n  </span><span class="s1">// setup server listener as fast as possible</span><span class="s3">\n  </span><span class="s1">if (selfSignedCertificate &amp;&amp; !isDev) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">'Using a self signed certificate is only supported with `next dev`.'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function requestListener(req: IncomingMessage, res: ServerResponse) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">if (handlersPromise) {</span><span class="s3">\n        </span><span class="s1">await handlersPromise</span><span class="s3">\n        </span><span class="s1">handlersPromise = undefined</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">await requestHandler(req, res)</span><span class="s3">\n    </span><span class="s1">} catch (err) {</span><span class="s3">\n      </span><span class="s1">res.statusCode = 500</span><span class="s3">\n      </span><span class="s1">res.end('Internal Server Error')</span><span class="s3">\n      </span><span class="s1">Log.error(`Failed to handle request for ${req.url}`)</span><span class="s3">\n      </span><span class="s1">console.error(err)</span><span class="s3">\n    </span><span class="s1">} finally {</span><span class="s3">\n      </span><span class="s1">if (isDev) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">v8.getHeapStatistics().used_heap_size &gt;</span><span class="s3">\n          </span><span class="s1">0.8 * v8.getHeapStatistics().heap_size_limit</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">Log.warn(</span><span class="s3">\n            </span><span class="s1">`Server is approaching the used memory threshold, restarting...`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">trace('server-restart-close-to-memory-threshold', undefined, {</span><span class="s3">\n            </span><span class="s1">'memory.heapSizeLimit': String(</span><span class="s3">\n              </span><span class="s1">v8.getHeapStatistics().heap_size_limit</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n            </span><span class="s1">'memory.heapUsed': String(v8.getHeapStatistics().used_heap_size),</span><span class="s3">\n          </span><span class="s1">}).stop()</span><span class="s3">\n          </span><span class="s1">await flushAllTraces()</span><span class="s3">\n          </span><span class="s1">process.exit(RESTART_EXIT_CODE)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const server = selfSignedCertificate</span><span class="s3">\n    </span><span class="s1">? https.createServer(</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">key: fs.readFileSync(selfSignedCertificate.key),</span><span class="s3">\n          </span><span class="s1">cert: fs.readFileSync(selfSignedCertificate.cert),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">requestListener</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">: http.createServer(requestListener)</span><span class="s3">\n\n  </span><span class="s1">if (keepAliveTimeout) {</span><span class="s3">\n    </span><span class="s1">server.keepAliveTimeout = keepAliveTimeout</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">server.on('upgrade', async (req, socket, head) =&gt; {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">await upgradeHandler(req, socket, head)</span><span class="s3">\n    </span><span class="s1">} catch (err) {</span><span class="s3">\n      </span><span class="s1">socket.destroy()</span><span class="s3">\n      </span><span class="s1">Log.error(`Failed to handle request for ${req.url}`)</span><span class="s3">\n      </span><span class="s1">console.error(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">let portRetryCount = 0</span><span class="s3">\n  </span><span class="s1">const originalPort = port</span><span class="s3">\n\n  </span><span class="s1">server.on('error', (err: NodeJS.ErrnoException) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">allowRetry &amp;&amp;</span><span class="s3">\n      </span><span class="s1">port &amp;&amp;</span><span class="s3">\n      </span><span class="s1">isDev &amp;&amp;</span><span class="s3">\n      </span><span class="s1">err.code === 'EADDRINUSE' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">portRetryCount &lt; 10</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">port += 1</span><span class="s3">\n      </span><span class="s1">portRetryCount += 1</span><span class="s3">\n      </span><span class="s1">server.listen(port, hostname)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">Log.error(`Failed to start server`)</span><span class="s3">\n      </span><span class="s1">console.error(err)</span><span class="s3">\n      </span><span class="s1">process.exit(1)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">let cleanupListeners = isDev ? new AsyncCallbackSet() : undefined</span><span class="s3">\n\n  </span><span class="s1">await new Promise&lt;void&gt;((resolve) =&gt; {</span><span class="s3">\n    </span><span class="s1">server.on('listening', async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const nodeDebugType = getNodeDebugType()</span><span class="s3">\n\n      </span><span class="s1">const addr = server.address()</span><span class="s3">\n      </span><span class="s1">const actualHostname = formatHostname(</span><span class="s3">\n        </span><span class="s1">typeof addr === 'object'</span><span class="s3">\n          </span><span class="s1">? addr?.address || hostname || 'localhost'</span><span class="s3">\n          </span><span class="s1">: addr</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">const formattedHostname =</span><span class="s3">\n        </span><span class="s1">!hostname || actualHostname === '0.0.0.0'</span><span class="s3">\n          </span><span class="s1">? 'localhost'</span><span class="s3">\n          </span><span class="s1">: actualHostname === '[::]'</span><span class="s3">\n            </span><span class="s1">? '[::1]'</span><span class="s3">\n            </span><span class="s1">: formatHostname(hostname)</span><span class="s3">\n\n      </span><span class="s1">port = typeof addr === 'object' ? addr?.port || port : port</span><span class="s3">\n\n      </span><span class="s1">if (portRetryCount) {</span><span class="s3">\n        </span><span class="s1">const pid = await getProcessIdUsingPort(originalPort)</span><span class="s3">\n        </span><span class="s1">if (pid) {</span><span class="s3">\n          </span><span class="s1">Log.warn(</span><span class="s3">\n            </span><span class="s1">`Port ${originalPort} is in use by process ${pid}, using available port ${port} instead.`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">Log.warn(</span><span class="s3">\n            </span><span class="s1">`Port ${originalPort} is in use by an unknown process, using available port ${port} instead.`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const networkHostname =</span><span class="s3">\n        </span><span class="s1">hostname ?? getNetworkHost(isIPv6(actualHostname) ? 'IPv6' : 'IPv4')</span><span class="s3">\n\n      </span><span class="s1">const protocol = selfSignedCertificate ? 'https' : 'http'</span><span class="s3">\n\n      </span><span class="s1">const networkUrl = networkHostname</span><span class="s3">\n        </span><span class="s1">? `${protocol}://${formatHostname(networkHostname)}:${port}`</span><span class="s3">\n        </span><span class="s1">: null</span><span class="s3">\n\n      </span><span class="s1">const appUrl = `${protocol}://${formattedHostname}:${port}`</span><span class="s3">\n\n      </span><span class="s1">if (nodeDebugType) {</span><span class="s3">\n        </span><span class="s1">const formattedDebugAddress = getFormattedDebugAddress()</span><span class="s3">\n        </span><span class="s1">Log.info(</span><span class="s3">\n          </span><span class="s1">`the --${nodeDebugType} option was detected, the Next.js router server should be inspected at ${formattedDebugAddress}.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Store the selected port to:</span><span class="s3">\n      </span><span class="s1">// - expose it to render workers</span><span class="s3">\n      </span><span class="s1">// - re-use it for automatic dev server restarts with a randomly selected port</span><span class="s3">\n      </span><span class="s1">process.env.PORT = port + ''</span><span class="s3">\n\n      </span><span class="s1">process.env.__NEXT_PRIVATE_ORIGIN = appUrl</span><span class="s3">\n\n      </span><span class="s1">// Set experimental HTTPS flag for metadata resolution</span><span class="s3">\n      </span><span class="s1">if (selfSignedCertificate) {</span><span class="s3">\n        </span><span class="s1">process.env.__NEXT_EXPERIMENTAL_HTTPS = '1'</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Only load env and config in dev to for logging purposes</span><span class="s3">\n      </span><span class="s1">let envInfo: string[] | undefined</span><span class="s3">\n      </span><span class="s1">let experimentalFeatures: ConfiguredExperimentalFeature[] | undefined</span><span class="s3">\n      </span><span class="s1">if (isDev) {</span><span class="s3">\n        </span><span class="s1">const startServerInfo = await getStartServerInfo({ dir, dev: isDev })</span><span class="s3">\n        </span><span class="s1">envInfo = startServerInfo.envInfo</span><span class="s3">\n        </span><span class="s1">experimentalFeatures = startServerInfo.experimentalFeatures</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">logStartInfo({</span><span class="s3">\n        </span><span class="s1">networkUrl,</span><span class="s3">\n        </span><span class="s1">appUrl,</span><span class="s3">\n        </span><span class="s1">envInfo,</span><span class="s3">\n        </span><span class="s1">experimentalFeatures,</span><span class="s3">\n        </span><span class="s1">maxExperimentalFeatures: 3,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">Log.event(`Starting...`)</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">let cleanupStarted = false</span><span class="s3">\n        </span><span class="s1">let closeUpgraded: (() =&gt; void) | null = null</span><span class="s3">\n        </span><span class="s1">const cleanup = () =&gt; {</span><span class="s3">\n          </span><span class="s1">if (cleanupStarted) {</span><span class="s3">\n            </span><span class="s1">// We can get duplicate signals, e.g. when `ctrl+c` is used in an</span><span class="s3">\n            </span><span class="s1">// interactive shell (i.e. bash, zsh), the shell will recursively</span><span class="s3">\n            </span><span class="s1">// send SIGINT to children. The parent `next-dev` process will also</span><span class="s3">\n            </span><span class="s1">// send us SIGINT.</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">cleanupStarted = true</span><span class="s3">\n          </span><span class="s1">;(async () =&gt; {</span><span class="s3">\n            </span><span class="s1">debug('start-server process cleanup')</span><span class="s3">\n\n            </span><span class="s1">// first, stop accepting new connections and finish pending requests,</span><span class="s3">\n            </span><span class="s1">// because they might affect `nextServer.close()` (e.g. by scheduling an `after`)</span><span class="s3">\n            </span><span class="s1">await new Promise&lt;void&gt;((res) =&gt; {</span><span class="s3">\n              </span><span class="s1">server.close((err) =&gt; {</span><span class="s3">\n                </span><span class="s1">if (err) console.error(err)</span><span class="s3">\n                </span><span class="s1">res()</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">if (isDev) {</span><span class="s3">\n                </span><span class="s1">server.closeAllConnections()</span><span class="s3">\n                </span><span class="s1">closeUpgraded?.()</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">// now that no new requests can come in, clean up the rest</span><span class="s3">\n            </span><span class="s1">await Promise.all([</span><span class="s3">\n              </span><span class="s1">nextServer?.close().catch(console.error),</span><span class="s3">\n              </span><span class="s1">cleanupListeners?.runAll().catch(console.error),</span><span class="s3">\n            </span><span class="s1">])</span><span class="s3">\n\n            </span><span class="s1">debug('start-server process cleanup finished')</span><span class="s3">\n            </span><span class="s1">process.exit(0)</span><span class="s3">\n          </span><span class="s1">})()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// Make sure commands gracefully respect termination signals (e.g. from Docker)</span><span class="s3">\n        </span><span class="s1">// Allow the graceful termination to be manually configurable</span><span class="s3">\n        </span><span class="s1">if (!process.env.NEXT_MANUAL_SIG_HANDLE) {</span><span class="s3">\n          </span><span class="s1">process.on('SIGINT', cleanup)</span><span class="s3">\n          </span><span class="s1">process.on('SIGTERM', cleanup)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const initResult = await getRequestHandlers({</span><span class="s3">\n          </span><span class="s1">dir,</span><span class="s3">\n          </span><span class="s1">port,</span><span class="s3">\n          </span><span class="s1">isDev,</span><span class="s3">\n          </span><span class="s1">onDevServerCleanup: cleanupListeners</span><span class="s3">\n            </span><span class="s1">? cleanupListeners.add.bind(cleanupListeners)</span><span class="s3">\n            </span><span class="s1">: undefined,</span><span class="s3">\n          </span><span class="s1">server,</span><span class="s3">\n          </span><span class="s1">hostname,</span><span class="s3">\n          </span><span class="s1">minimalMode,</span><span class="s3">\n          </span><span class="s1">keepAliveTimeout,</span><span class="s3">\n          </span><span class="s1">experimentalHttpsServer: !!selfSignedCertificate,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">requestHandler = initResult.requestHandler</span><span class="s3">\n        </span><span class="s1">upgradeHandler = initResult.upgradeHandler</span><span class="s3">\n        </span><span class="s1">nextServer = initResult.server</span><span class="s3">\n        </span><span class="s1">closeUpgraded = initResult.closeUpgraded</span><span class="s3">\n\n        </span><span class="s1">const startServerProcessDuration =</span><span class="s3">\n          </span><span class="s1">performance.mark('next-start-end') &amp;&amp;</span><span class="s3">\n          </span><span class="s1">performance.measure(</span><span class="s3">\n            </span><span class="s1">'next-start-duration',</span><span class="s3">\n            </span><span class="s1">'next-start',</span><span class="s3">\n            </span><span class="s1">'next-start-end'</span><span class="s3">\n          </span><span class="s1">).duration</span><span class="s3">\n\n        </span><span class="s1">handlersReady()</span><span class="s3">\n        </span><span class="s1">const formatDurationText =</span><span class="s3">\n          </span><span class="s1">startServerProcessDuration &gt; 2000</span><span class="s3">\n            </span><span class="s1">? `${Math.round(startServerProcessDuration / 100) / 10}s`</span><span class="s3">\n            </span><span class="s1">: `${Math.round(startServerProcessDuration)}ms`</span><span class="s3">\n\n        </span><span class="s1">Log.event(`Ready in ${formatDurationText}`)</span><span class="s3">\n\n        </span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n          </span><span class="s1">await validateTurboNextConfig({</span><span class="s3">\n            </span><span class="s1">dir: serverOptions.dir,</span><span class="s3">\n            </span><span class="s1">isDev: true,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} catch (err) {</span><span class="s3">\n        </span><span class="s1">// fatal error if we can't setup</span><span class="s3">\n        </span><span class="s1">handlersError()</span><span class="s3">\n        </span><span class="s1">console.error(err)</span><span class="s3">\n        </span><span class="s1">process.exit(1)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">resolve()</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">server.listen(port, hostname)</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">if (isDev) {</span><span class="s3">\n    </span><span class="s1">function watchConfigFiles(</span><span class="s3">\n      </span><span class="s1">dirToWatch: string,</span><span class="s3">\n      </span><span class="s1">onChange: (filename: string) =&gt; void</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">const wp = new Watchpack()</span><span class="s3">\n      </span><span class="s1">wp.watch({</span><span class="s3">\n        </span><span class="s1">files: CONFIG_FILES.map((file) =&gt; path.join(dirToWatch, file)),</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">wp.on('change', onChange)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">watchConfigFiles(dir, async (filename) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (process.env.__NEXT_DISABLE_MEMORY_WATCHER) {</span><span class="s3">\n        </span><span class="s1">Log.info(</span><span class="s3">\n          </span><span class="s1">`Detected change, manual restart required due to '__NEXT_DISABLE_MEMORY_WATCHER' usage`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">Log.warn(</span><span class="s3">\n        </span><span class="s1">`Found a change in ${path.basename(</span><span class="s3">\n          </span><span class="s1">filename</span><span class="s3">\n        </span><span class="s1">)}. Restarting the server to apply the changes...`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">process.exit(RESTART_EXIT_CODE)</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">if (process.env.NEXT_PRIVATE_WORKER &amp;&amp; process.send) {</span><span class="s3">\n  </span><span class="s1">process.addListener('message', async (msg: any) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">msg &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof msg === 'object' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">msg.nextWorkerOptions &amp;&amp;</span><span class="s3">\n      </span><span class="s1">process.send</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">startServerSpan = trace('start-dev-server', undefined, {</span><span class="s3">\n        </span><span class="s1">cpus: String(os.cpus().length),</span><span class="s3">\n        </span><span class="s1">platform: os.platform(),</span><span class="s3">\n        </span><span class="s1">'memory.freeMem': String(os.freemem()),</span><span class="s3">\n        </span><span class="s1">'memory.totalMem': String(os.totalmem()),</span><span class="s3">\n        </span><span class="s1">'memory.heapSizeLimit': String(v8.getHeapStatistics().heap_size_limit),</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">await startServerSpan.traceAsyncFn(() =&gt;</span><span class="s3">\n        </span><span class="s1">startServer(msg.nextWorkerOptions)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">const memoryUsage = process.memoryUsage()</span><span class="s3">\n      </span><span class="s1">startServerSpan.setAttribute('memory.rss', String(memoryUsage.rss))</span><span class="s3">\n      </span><span class="s1">startServerSpan.setAttribute(</span><span class="s3">\n        </span><span class="s1">'memory.heapTotal',</span><span class="s3">\n        </span><span class="s1">String(memoryUsage.heapTotal)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">startServerSpan.setAttribute(</span><span class="s3">\n        </span><span class="s1">'memory.heapUsed',</span><span class="s3">\n        </span><span class="s1">String(memoryUsage.heapUsed)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">process.send({ nextServerReady: true, port: process.env.PORT })</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">process.send({ nextWorkerReady: true })</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getRequestHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;startServer&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;getEntriesByName&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;mark&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;setupDebug&quot;</span><span class="s0">,</span><span class="s1">&quot;startServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getProcessIdUsingPort&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;timeoutMs&quot;</span><span class="s0">,</span><span class="s1">&quot;processLookupController&quot;</span><span class="s0">,</span><span class="s1">&quot;AbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;pidPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;handleError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;platform&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;pid&quot;</span><span class="s0">,</span><span class="s1">&quot;trim&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;lines&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;firstLine&quot;</span><span class="s0">,</span><span class="s1">&quot;parts&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;timeoutId&quot;</span><span class="s0">,</span><span class="s1">&quot;setTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;finally&quot;</span><span class="s0">,</span><span class="s1">&quot;clearTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;isDev&quot;</span><span class="s0">,</span><span class="s1">&quot;onDevServerCleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;server&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;minimalMode&quot;</span><span class="s0">,</span><span class="s1">&quot;keepAliveTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalHttpsServer&quot;</span><span class="s0">,</span><span class="s1">&quot;quiet&quot;</span><span class="s0">,</span><span class="s1">&quot;initialize&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;allowRetry&quot;</span><span class="s0">,</span><span class="s1">&quot;selfSignedCertificate&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_VERSION&quot;</span><span class="s0">,</span><span class="s1">&quot;handlersReady&quot;</span><span class="s0">,</span><span class="s1">&quot;handlersError&quot;</span><span class="s0">,</span><span class="s1">&quot;handlersPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;requestHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;upgradeHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;socket&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;nextServer&quot;</span><span class="s0">,</span><span class="s1">&quot;requestListener&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;v8&quot;</span><span class="s0">,</span><span class="s1">&quot;getHeapStatistics&quot;</span><span class="s0">,</span><span class="s1">&quot;used_heap_size&quot;</span><span class="s0">,</span><span class="s1">&quot;heap_size_limit&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;stop&quot;</span><span class="s0">,</span><span class="s1">&quot;flushAllTraces&quot;</span><span class="s0">,</span><span class="s1">&quot;exit&quot;</span><span class="s0">,</span><span class="s1">&quot;RESTART_EXIT_CODE&quot;</span><span class="s0">,</span><span class="s1">&quot;https&quot;</span><span class="s0">,</span><span class="s1">&quot;createServer&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;cert&quot;</span><span class="s0">,</span><span class="s1">&quot;http&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;destroy&quot;</span><span class="s0">,</span><span class="s1">&quot;portRetryCount&quot;</span><span class="s0">,</span><span class="s1">&quot;originalPort&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;listen&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanupListeners&quot;</span><span class="s0">,</span><span class="s1">&quot;AsyncCallbackSet&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;getNodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;addr&quot;</span><span class="s0">,</span><span class="s1">&quot;address&quot;</span><span class="s0">,</span><span class="s1">&quot;actualHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;formatHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;networkHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;getNetworkHost&quot;</span><span class="s0">,</span><span class="s1">&quot;isIPv6&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;networkUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;appUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedDebugAddress&quot;</span><span class="s0">,</span><span class="s1">&quot;getFormattedDebugAddress&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;PORT&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PRIVATE_ORIGIN&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_EXPERIMENTAL_HTTPS&quot;</span><span class="s0">,</span><span class="s1">&quot;envInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalFeatures&quot;</span><span class="s0">,</span><span class="s1">&quot;startServerInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getStartServerInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;logStartInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;maxExperimentalFeatures&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanupStarted&quot;</span><span class="s0">,</span><span class="s1">&quot;closeUpgraded&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;closeAllConnections&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;runAll&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_MANUAL_SIG_HANDLE&quot;</span><span class="s0">,</span><span class="s1">&quot;initResult&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;startServerProcessDuration&quot;</span><span class="s0">,</span><span class="s1">&quot;measure&quot;</span><span class="s0">,</span><span class="s1">&quot;duration&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDurationText&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;round&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;validateTurboNextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;watchConfigFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;dirToWatch&quot;</span><span class="s0">,</span><span class="s1">&quot;onChange&quot;</span><span class="s0">,</span><span class="s1">&quot;wp&quot;</span><span class="s0">,</span><span class="s1">&quot;Watchpack&quot;</span><span class="s0">,</span><span class="s1">&quot;watch&quot;</span><span class="s0">,</span><span class="s1">&quot;files&quot;</span><span class="s0">,</span><span class="s1">&quot;CONFIG_FILES&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_DISABLE_MEMORY_WATCHER&quot;</span><span class="s0">,</span><span class="s1">&quot;basename&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_PRIVATE_WORKER&quot;</span><span class="s0">,</span><span class="s1">&quot;send&quot;</span><span class="s0">,</span><span class="s1">&quot;addListener&quot;</span><span class="s0">,</span><span class="s1">&quot;msg&quot;</span><span class="s0">,</span><span class="s1">&quot;nextWorkerOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;cpus&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;freemem&quot;</span><span class="s0">,</span><span class="s1">&quot;totalmem&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;memoryUsage&quot;</span><span class="s0">,</span><span class="s1">&quot;setAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;rss&quot;</span><span class="s0">,</span><span class="s1">&quot;heapTotal&quot;</span><span class="s0">,</span><span class="s1">&quot;heapUsed&quot;</span><span class="s0">,</span><span class="s1">&quot;nextServerReady&quot;</span><span class="s0">,</span><span class="s1">&quot;nextWorkerReady&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>