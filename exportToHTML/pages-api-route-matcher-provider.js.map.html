<html>
<head>
<title>pages-api-route-matcher-provider.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
pages-api-route-matcher-provider.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/route-matcher-providers/pages-api-route-matcher-provider.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { isAPIRoute } from '../../lib/is-api-route'</span><span class="s3">\n</span><span class="s1">import { PAGES_MANIFEST } from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { RouteKind } from '../route-kind'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">PagesAPILocaleRouteMatcher,</span><span class="s3">\n  </span><span class="s1">PagesAPIRouteMatcher,</span><span class="s3">\n</span><span class="s1">} from '../route-matchers/pages-api-route-matcher'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Manifest,</span><span class="s3">\n  </span><span class="s1">ManifestLoader,</span><span class="s3">\n</span><span class="s1">} from './helpers/manifest-loaders/manifest-loader'</span><span class="s3">\n</span><span class="s1">import { ManifestRouteMatcherProvider } from './manifest-route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import type { I18NProvider } from '../lib/i18n-provider'</span><span class="s3">\n</span><span class="s1">import { PagesNormalizers } from '../normalizers/built/pages'</span><span class="s3">\n\n</span><span class="s1">export class PagesAPIRouteMatcherProvider extends ManifestRouteMatcherProvider&lt;PagesAPIRouteMatcher&gt; {</span><span class="s3">\n  </span><span class="s1">private readonly normalizers: PagesNormalizers</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">distDir: string,</span><span class="s3">\n    </span><span class="s1">manifestLoader: ManifestLoader,</span><span class="s3">\n    </span><span class="s1">private readonly i18nProvider?: I18NProvider</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">super(PAGES_MANIFEST, manifestLoader)</span><span class="s3">\n\n    </span><span class="s1">this.normalizers = new PagesNormalizers(distDir)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async transform(</span><span class="s3">\n    </span><span class="s1">manifest: Manifest</span><span class="s3">\n  </span><span class="s1">): Promise&lt;ReadonlyArray&lt;PagesAPIRouteMatcher&gt;&gt; {</span><span class="s3">\n    </span><span class="s1">// This matcher is only for Pages API routes.</span><span class="s3">\n    </span><span class="s1">const pathnames = Object.keys(manifest).filter((pathname) =&gt;</span><span class="s3">\n      </span><span class="s1">isAPIRoute(pathname)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const matchers: Array&lt;PagesAPIRouteMatcher&gt; = []</span><span class="s3">\n\n    </span><span class="s1">for (const page of pathnames) {</span><span class="s3">\n      </span><span class="s1">if (this.i18nProvider) {</span><span class="s3">\n        </span><span class="s1">// Match the locale on the page name, or default to the default locale.</span><span class="s3">\n        </span><span class="s1">const { detectedLocale, pathname } = this.i18nProvider.analyze(page)</span><span class="s3">\n\n        </span><span class="s1">matchers.push(</span><span class="s3">\n          </span><span class="s1">new PagesAPILocaleRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.PAGES_API,</span><span class="s3">\n            </span><span class="s1">pathname,</span><span class="s3">\n            </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">bundlePath: this.normalizers.bundlePath.normalize(page),</span><span class="s3">\n            </span><span class="s1">filename: this.normalizers.filename.normalize(manifest[page]),</span><span class="s3">\n            </span><span class="s1">i18n: {</span><span class="s3">\n              </span><span class="s1">locale: detectedLocale,</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">matchers.push(</span><span class="s3">\n          </span><span class="s1">new PagesAPIRouteMatcher({</span><span class="s3">\n            </span><span class="s1">kind: RouteKind.PAGES_API,</span><span class="s3">\n            </span><span class="s1">// In `pages/`, the page is the same as the pathname.</span><span class="s3">\n            </span><span class="s1">pathname: page,</span><span class="s3">\n            </span><span class="s1">page,</span><span class="s3">\n            </span><span class="s1">bundlePath: this.normalizers.bundlePath.normalize(page),</span><span class="s3">\n            </span><span class="s1">filename: this.normalizers.filename.normalize(manifest[page]),</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return matchers</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PagesAPIRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;ManifestRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;i18nProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesNormalizers&quot;</span><span class="s0">,</span><span class="s1">&quot;transform&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnames&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;isAPIRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;analyze&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesAPILocaleRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_API&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalize&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesAPIRouteMatcher&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAeaA;;;eAAAA;;;4BAfc;2BACI;2BACL;sCAInB;8CAKsC;uBAEZ;AAE1B,MAAMA,qCAAqCC,0DAA4B;IAG5EC,YACEC,OAAe,EACfC,cAA8B,EAC9B,AAAiBC,YAA2B,CAC5C;QACA,KAAK,CAACC,yBAAc,EAAEF,sBAFLC,eAAAA;QAIjB,IAAI,CAACE,WAAW,GAAG,IAAIC,uBAAgB,CAACL;IAC1C;IAEA,MAAgBM,UACdC,QAAkB,EAC4B;QAC9C,6CAA6C;QAC7C,MAAMC,YAAYC,OAAOC,IAAI,CAACH,UAAUI,MAAM,CAAC,CAACC,WAC9CC,IAAAA,sBAAU,EAACD;QAGb,MAAME,WAAwC,EAAE;QAEhD,KAAK,MAAMC,QAAQP,UAAW;YAC5B,IAAI,IAAI,CAACN,YAAY,EAAE;gBACrB,uEAAuE;gBACvE,MAAM,EAAEc,cAAc,EAAEJ,QAAQ,EAAE,GAAG,IAAI,CAACV,YAAY,CAACe,OAAO,CAACF;gBAE/DD,SAASI,IAAI,CACX,IAAIC,gDAA0B,CAAC;oBAC7BC,MAAMC,oBAAS,CAACC,SAAS;oBACzBV;oBACAG;oBACAQ,YAAY,IAAI,CAACnB,WAAW,CAACmB,UAAU,CAACC,SAAS,CAACT;oBAClDU,UAAU,IAAI,CAACrB,WAAW,CAACqB,QAAQ,CAACD,SAAS,CAACjB,QAAQ,CAACQ,KAAK;oBAC5DW,MAAM;wBACJC,QAAQX;oBACV;gBACF;YAEJ,OAAO;gBACLF,SAASI,IAAI,CACX,IAAIU,0CAAoB,CAAC;oBACvBR,MAAMC,oBAAS,CAACC,SAAS;oBACzB,qDAAqD;oBACrDV,UAAUG;oBACVA;oBACAQ,YAAY,IAAI,CAACnB,WAAW,CAACmB,UAAU,CAACC,SAAS,CAACT;oBAClDU,UAAU,IAAI,CAACrB,WAAW,CAACqB,QAAQ,CAACD,SAAS,CAACjB,QAAQ,CAACQ,KAAK;gBAC9D;YAEJ;QACF;QAEA,OAAOD;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>