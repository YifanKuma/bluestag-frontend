<html>
<head>
<title>webidl.d.ts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #067d17;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
webidl.d.ts</font>
</center></td></tr></table>
<pre><span class="s0">// These types are not exported, and are only used internally</span>

<span class="s0">/**</span>
 <span class="s0">* Take in an unknown value and return one that is of type T</span>
 <span class="s0">*/</span>
<span class="s1">type Converter&lt;T&gt; = (object: unknown) =&gt; T</span>

<span class="s1">type SequenceConverter&lt;T&gt; = (object: unknown, iterable?: IterableIterator&lt;T&gt;) =&gt; T[]</span>

<span class="s1">type RecordConverter&lt;K </span><span class="s2">extends </span><span class="s1">string, V&gt; = (object: unknown) =&gt; Record&lt;K, V&gt;</span>

<span class="s2">interface </span><span class="s1">ConvertToIntOpts {</span>
  <span class="s1">clamp?: boolean</span>
  <span class="s1">enforceRange?: boolean</span>
<span class="s1">}</span>

<span class="s2">interface </span><span class="s1">WebidlErrors {</span>
  <span class="s1">exception (opts: { header: string, message: string }): TypeError</span>
  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">Throw an error when conversion from one type to another has failed</span>
   <span class="s0">*/</span>
  <span class="s1">conversionFailed (opts: {</span>
    <span class="s1">prefix: string</span>
    <span class="s1">argument: string</span>
    <span class="s1">types: string[]</span>
  <span class="s1">}): TypeError</span>
  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">Throw an error when an invalid argument is provided</span>
   <span class="s0">*/</span>
  <span class="s1">invalidArgument (opts: {</span>
    <span class="s1">prefix: string</span>
    <span class="s1">value: string</span>
    <span class="s1">type: string</span>
  <span class="s1">}): TypeError</span>
<span class="s1">}</span>

<span class="s2">interface </span><span class="s1">WebidlUtil {</span>
  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values</span>
   <span class="s0">*/</span>
  <span class="s1">Type (object: unknown):</span>
    <span class="s1">| </span><span class="s4">'Undefined'</span>
    <span class="s1">| </span><span class="s4">'Boolean'</span>
    <span class="s1">| </span><span class="s4">'String'</span>
    <span class="s1">| </span><span class="s4">'Symbol'</span>
    <span class="s1">| </span><span class="s4">'Number'</span>
    <span class="s1">| </span><span class="s4">'BigInt'</span>
    <span class="s1">| </span><span class="s4">'Null'</span>
    <span class="s1">| </span><span class="s4">'Object'</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</span>
   <span class="s0">*/</span>
  <span class="s1">ConvertToInt (</span>
    <span class="s1">V: unknown,</span>
    <span class="s1">bitLength: number,</span>
    <span class="s1">signedness: </span><span class="s4">'signed' </span><span class="s1">| </span><span class="s4">'unsigned'</span><span class="s1">,</span>
    <span class="s1">opts?: ConvertToIntOpts</span>
  <span class="s1">): number</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#abstract-opdef-converttoint</span>
   <span class="s0">*/</span>
  <span class="s1">IntegerPart (N: number): number</span>

  <span class="s0">/**</span>
   <span class="s0">* Stringifies {</span><span class="s3">@param </span><span class="s0">V}</span>
   <span class="s0">*/</span>
  <span class="s1">Stringify (V: any): string</span>

  <span class="s0">/**</span>
   <span class="s0">* Mark a value as uncloneable for Node.js.</span>
   <span class="s0">* This is only effective in some newer Node.js versions.</span>
   <span class="s0">*/</span>
  <span class="s1">markAsUncloneable (V: any): </span><span class="s2">void</span>
<span class="s1">}</span>

<span class="s2">interface </span><span class="s1">WebidlConverters {</span>
  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-DOMString</span>
   <span class="s0">*/</span>
  <span class="s1">DOMString (V: unknown, prefix: string, argument: string, opts?: {</span>
    <span class="s1">legacyNullToEmptyString: boolean</span>
  <span class="s1">}): string</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-ByteString</span>
   <span class="s0">*/</span>
  <span class="s1">ByteString (V: unknown, prefix: string, argument: string): string</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-USVString</span>
   <span class="s0">*/</span>
  <span class="s1">USVString (V: unknown): string</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-boolean</span>
   <span class="s0">*/</span>
  <span class="s1">boolean (V: unknown): boolean</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-any</span>
   <span class="s0">*/</span>
  <span class="s1">any &lt;Value&gt;(V: Value): Value</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-long-long</span>
   <span class="s0">*/</span>
  <span class="s1">[</span><span class="s4">'long long'</span><span class="s1">] (V: unknown): number</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-unsigned-long-long</span>
   <span class="s0">*/</span>
  <span class="s1">[</span><span class="s4">'unsigned long long'</span><span class="s1">] (V: unknown): number</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-unsigned-long</span>
   <span class="s0">*/</span>
  <span class="s1">[</span><span class="s4">'unsigned long'</span><span class="s1">] (V: unknown): number</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-unsigned-short</span>
   <span class="s0">*/</span>
  <span class="s1">[</span><span class="s4">'unsigned short'</span><span class="s1">] (V: unknown, opts?: ConvertToIntOpts): number</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#idl-ArrayBuffer</span>
   <span class="s0">*/</span>
  <span class="s1">ArrayBuffer (V: unknown): ArrayBufferLike</span>
  <span class="s1">ArrayBuffer (V: unknown, opts: { allowShared: </span><span class="s2">false </span><span class="s1">}): ArrayBuffer</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-buffer-source-types</span>
   <span class="s0">*/</span>
  <span class="s1">TypedArray (</span>
    <span class="s1">V: unknown,</span>
    <span class="s1">TypedArray: NodeJS.TypedArray | ArrayBufferLike</span>
  <span class="s1">): NodeJS.TypedArray | ArrayBufferLike</span>
  <span class="s1">TypedArray (</span>
    <span class="s1">V: unknown,</span>
    <span class="s1">TypedArray: NodeJS.TypedArray | ArrayBufferLike,</span>
    <span class="s1">opts?: { allowShared: </span><span class="s2">false </span><span class="s1">}</span>
  <span class="s1">): NodeJS.TypedArray | ArrayBuffer</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-buffer-source-types</span>
   <span class="s0">*/</span>
  <span class="s1">DataView (V: unknown, opts?: { allowShared: boolean }): DataView</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#BufferSource</span>
   <span class="s0">*/</span>
  <span class="s1">BufferSource (</span>
    <span class="s1">V: unknown,</span>
    <span class="s1">opts?: { allowShared: boolean }</span>
  <span class="s1">): NodeJS.TypedArray | ArrayBufferLike | DataView</span>

  <span class="s1">[</span><span class="s4">'sequence&lt;ByteString&gt;'</span><span class="s1">]: SequenceConverter&lt;string&gt;</span>
  
  <span class="s1">[</span><span class="s4">'sequence&lt;sequence&lt;ByteString&gt;&gt;'</span><span class="s1">]: SequenceConverter&lt;string[]&gt;</span>

  <span class="s1">[</span><span class="s4">'record&lt;ByteString, ByteString&gt;'</span><span class="s1">]: RecordConverter&lt;string, string&gt;</span>

  <span class="s1">[Key: string]: (...args: any[]) =&gt; unknown</span>
<span class="s1">}</span>

<span class="s2">export interface </span><span class="s1">Webidl {</span>
  <span class="s1">errors: WebidlErrors</span>
  <span class="s1">util: WebidlUtil</span>
  <span class="s1">converters: WebidlConverters</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">Performs a brand-check on {</span><span class="s3">@param </span><span class="s0">V} to ensure it is a</span>
   <span class="s0">* {</span><span class="s3">@param </span><span class="s0">cls} object.</span>
   <span class="s0">*/</span>
  <span class="s1">brandCheck &lt;Interface&gt;(V: unknown, cls: Interface, opts?: { strict?: boolean }): asserts V is Interface</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-sequence</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">Convert a value, V, to a WebIDL sequence type.</span>
   <span class="s0">*/</span>
  <span class="s1">sequenceConverter &lt;Type&gt;(C: Converter&lt;Type&gt;): SequenceConverter&lt;Type&gt;</span>

  <span class="s1">illegalConstructor (): never</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#es-to-record</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">Convert a value, V, to a WebIDL record type.</span>
   <span class="s0">*/</span>
  <span class="s1">recordConverter &lt;K </span><span class="s2">extends </span><span class="s1">string, V&gt;(</span>
    <span class="s1">keyConverter: Converter&lt;K&gt;,</span>
    <span class="s1">valueConverter: Converter&lt;V&gt;</span>
  <span class="s1">): RecordConverter&lt;K, V&gt;</span>

  <span class="s0">/**</span>
   <span class="s0">* Similar to {</span><span class="s3">@link </span><span class="s0">Webidl.brandCheck} but allows skipping the check if third party</span>
   <span class="s0">* interfaces are allowed.</span>
   <span class="s0">*/</span>
  <span class="s1">interfaceConverter &lt;Interface&gt;(cls: Interface): (</span>
    <span class="s1">V: unknown,</span>
    <span class="s1">opts?: { strict: boolean }</span>
  <span class="s1">) =&gt; asserts V is </span><span class="s2">typeof </span><span class="s1">cls</span>

  <span class="s0">// TODO(@KhafraDev): a type could likely be implemented that can infer the return type</span>
  <span class="s0">// from the converters given?</span>
  <span class="s0">/**</span>
   <span class="s0">* Converts a value, V, to a WebIDL dictionary types. Allows limiting which keys are</span>
   <span class="s0">* allowed, values allowed, optional and required keys. Auto converts the value to</span>
   <span class="s0">* a type given a converter.</span>
   <span class="s0">*/</span>
  <span class="s1">dictionaryConverter (converters: {</span>
    <span class="s1">key: string,</span>
    <span class="s1">defaultValue?: () =&gt; unknown,</span>
    <span class="s1">required?: boolean,</span>
    <span class="s1">converter: (...args: unknown[]) =&gt; unknown,</span>
    <span class="s1">allowedValues?: unknown[]</span>
  <span class="s1">}[]): (V: unknown) =&gt; Record&lt;string, unknown&gt;</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s3">@see </span><span class="s0">https://webidl.spec.whatwg.org/#idl-nullable-type</span>
   <span class="s0">* </span><span class="s3">@description </span><span class="s0">allows a type, V, to be null</span>
   <span class="s0">*/</span>
  <span class="s1">nullableConverter &lt;T&gt;(</span>
    <span class="s1">converter: Converter&lt;T&gt;</span>
  <span class="s1">): (V: unknown) =&gt; ReturnType&lt;</span><span class="s2">typeof </span><span class="s1">converter&gt; | </span><span class="s2">null</span>

  <span class="s1">argumentLengthCheck (args: { length: number }, min: number, context: string): </span><span class="s2">void</span>
<span class="s1">}</span>
</pre>
</body>
</html>