<html>
<head>
<title>segment-explorer-node.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
segment-explorer-node.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/next-devtools/userspace/app/segment-explorer-node.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import type { ReactNode } from 'react'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">useState,</span><span class="s3">\n  </span><span class="s1">createContext,</span><span class="s3">\n  </span><span class="s1">useContext,</span><span class="s3">\n  </span><span class="s1">use,</span><span class="s3">\n  </span><span class="s1">useMemo,</span><span class="s3">\n  </span><span class="s1">useCallback,</span><span class="s3">\n</span><span class="s1">} from 'react'</span><span class="s3">\n</span><span class="s1">import { useLayoutEffect } from 'react'</span><span class="s3">\n</span><span class="s1">import { dispatcher } from 'next/dist/compiled/next-devtools'</span><span class="s3">\n</span><span class="s1">import { notFound } from '../../../client/components/not-found'</span><span class="s3">\n\n</span><span class="s1">export type SegmentBoundaryType =</span><span class="s3">\n  </span><span class="s1">| 'not-found'</span><span class="s3">\n  </span><span class="s1">| 'error'</span><span class="s3">\n  </span><span class="s1">| 'loading'</span><span class="s3">\n  </span><span class="s1">| 'global-error'</span><span class="s3">\n\n</span><span class="s1">export const SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE =</span><span class="s3">\n  </span><span class="s1">'NEXT_DEVTOOLS_SIMULATED_ERROR'</span><span class="s3">\n\n</span><span class="s1">export type SegmentNodeState = {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n  </span><span class="s1">boundaryType: string | null</span><span class="s3">\n  </span><span class="s1">setBoundaryType: (type: SegmentBoundaryType | null) =&gt; void</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function SegmentTrieNode({</span><span class="s3">\n  </span><span class="s1">type,</span><span class="s3">\n  </span><span class="s1">pagePath,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n</span><span class="s1">}): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">const { boundaryType, setBoundaryType } = useSegmentState()</span><span class="s3">\n  </span><span class="s1">const nodeState: SegmentNodeState = useMemo(() =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">type,</span><span class="s3">\n      </span><span class="s1">pagePath,</span><span class="s3">\n      </span><span class="s1">boundaryType,</span><span class="s3">\n      </span><span class="s1">setBoundaryType,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [type, pagePath, boundaryType, setBoundaryType])</span><span class="s3">\n\n  </span><span class="s1">// Use `useLayoutEffect` to ensure the state is updated during suspense.</span><span class="s3">\n  </span><span class="s1">// `useEffect` won't work as the state is preserved during suspense.</span><span class="s3">\n  </span><span class="s1">useLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">dispatcher.segmentExplorerNodeAdd(nodeState)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">dispatcher.segmentExplorerNodeRemove(nodeState)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [nodeState])</span><span class="s3">\n\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function NotFoundSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">notFound()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function ErrorSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">throw new Error(SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const forever = new Promise(() =&gt; {})</span><span class="s3">\n</span><span class="s1">function LoadingSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">use(forever)</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentViewStateNode({ page }: { page: string }) {</span><span class="s3">\n  </span><span class="s1">useLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">dispatcher.segmentExplorerUpdateRouteState(page)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">dispatcher.segmentExplorerUpdateRouteState('')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [page])</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentBoundaryTriggerNode() {</span><span class="s3">\n  </span><span class="s1">const { boundaryType } = useSegmentState()</span><span class="s3">\n  </span><span class="s1">let segmentNode: React.ReactNode = null</span><span class="s3">\n  </span><span class="s1">if (boundaryType === 'loading') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;LoadingSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">} else if (boundaryType === 'not-found') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;NotFoundSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">} else if (boundaryType === 'error') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;ErrorSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return segmentNode</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentViewNode({</span><span class="s3">\n  </span><span class="s1">type,</span><span class="s3">\n  </span><span class="s1">pagePath,</span><span class="s3">\n  </span><span class="s1">children,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n  </span><span class="s1">children?: ReactNode</span><span class="s3">\n</span><span class="s1">}): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">const segmentNode = (</span><span class="s3">\n    </span><span class="s1">&lt;SegmentTrieNode key={type} type={type} pagePath={pagePath} /&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;&gt;</span><span class="s3">\n      </span><span class="s1">{segmentNode}</span><span class="s3">\n      </span><span class="s1">{children}</span><span class="s3">\n    </span><span class="s1">&lt;/&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const SegmentStateContext = createContext&lt;{</span><span class="s3">\n  </span><span class="s1">boundaryType: SegmentBoundaryType | null</span><span class="s3">\n  </span><span class="s1">setBoundaryType: (type: SegmentBoundaryType | null) =&gt; void</span><span class="s3">\n</span><span class="s1">}&gt;({</span><span class="s3">\n  </span><span class="s1">boundaryType: null,</span><span class="s3">\n  </span><span class="s1">setBoundaryType: () =&gt; {},</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">export function SegmentStateProvider({ children }: { children: ReactNode }) {</span><span class="s3">\n  </span><span class="s1">const [boundaryType, setBoundaryType] = useState&lt;SegmentBoundaryType | null&gt;(</span><span class="s3">\n    </span><span class="s1">null</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const [errorBoundaryKey, setErrorBoundaryKey] = useState(0)</span><span class="s3">\n  </span><span class="s1">const reloadBoundary = useCallback(</span><span class="s3">\n    </span><span class="s1">() =&gt; setErrorBoundaryKey((prev) =&gt; prev + 1),</span><span class="s3">\n    </span><span class="s1">[]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const setBoundaryTypeAndReload = useCallback(</span><span class="s3">\n    </span><span class="s1">(type: SegmentBoundaryType | null) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (type === null) {</span><span class="s3">\n        </span><span class="s1">reloadBoundary()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">setBoundaryType(type)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">[reloadBoundary]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;SegmentStateContext.Provider</span><span class="s3">\n      </span><span class="s1">key={errorBoundaryKey}</span><span class="s3">\n      </span><span class="s1">value={{</span><span class="s3">\n        </span><span class="s1">boundaryType,</span><span class="s3">\n        </span><span class="s1">setBoundaryType: setBoundaryTypeAndReload,</span><span class="s3">\n      </span><span class="s1">}}</span><span class="s3">\n    </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">{children}</span><span class="s3">\n    </span><span class="s1">&lt;/SegmentStateContext.Provider&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function useSegmentState() {</span><span class="s3">\n  </span><span class="s1">return useContext(SegmentStateContext)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentBoundaryTriggerNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentStateProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewStateNode&quot;</span><span class="s0">,</span><span class="s1">&quot;useSegmentState&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentTrieNode&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;boundaryType&quot;</span><span class="s0">,</span><span class="s1">&quot;setBoundaryType&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeState&quot;</span><span class="s0">,</span><span class="s1">&quot;useMemo&quot;</span><span class="s0">,</span><span class="s1">&quot;useLayoutEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;dispatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerNodeAdd&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerNodeRemove&quot;</span><span class="s0">,</span><span class="s1">&quot;NotFoundSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;ErrorSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;forever&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;LoadingSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerUpdateRouteState&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentStateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;createContext&quot;</span><span class="s0">,</span><span class="s1">&quot;useState&quot;</span><span class="s0">,</span><span class="s1">&quot;errorBoundaryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;setErrorBoundaryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;reloadBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;useCallback&quot;</span><span class="s0">,</span><span class="s1">&quot;prev&quot;</span><span class="s0">,</span><span class="s1">&quot;setBoundaryTypeAndReload&quot;</span><span class="s0">,</span><span class="s1">&quot;Provider&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;useContext&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;;;;;;;;;;;;;;;;IAqBaA,wCAAwC;eAAxCA;;IA+DGC,0BAA0B;eAA1BA;;IA0CAC,oBAAoB;eAApBA;;IA7BAC,eAAe;eAAfA;;IAvBAC,oBAAoB;eAApBA;;IAsFAC,eAAe;eAAfA;;;;uBAtJT;8BAEoB;0BACF;AAQlB,MAAML,2CACX;AASF,SAASM,gBAAgB,KAMxB;IANwB,IAAA,EACvBC,IAAI,EACJC,QAAQ,EAIT,GANwB;IAOvB,MAAM,EAAEC,YAAY,EAAEC,eAAe,EAAE,GAAGL;IAC1C,MAAMM,YAA8BC,IAAAA,cAAO,EAAC;QAC1C,OAAO;YACLL;YACAC;YACAC;YACAC;QACF;IACF,GAAG;QAACH;QAAMC;QAAUC;QAAcC;KAAgB;IAElD,wEAAwE;IACxE,oEAAoE;IACpEG,IAAAA,sBAAe,EAAC;QACdC,wBAAU,CAACC,sBAAsB,CAACJ;QAClC,OAAO;YACLG,wBAAU,CAACE,yBAAyB,CAACL;QACvC;IACF,GAAG;QAACA;KAAU;IAEd,OAAO;AACT;AAEA,SAASM;IACPC,IAAAA,kBAAQ;AACV;AAEA,SAASC;IACP,MAAM,qBAAmD,CAAnD,IAAIC,MAAMpB,2CAAV,qBAAA;eAAA;oBAAA;sBAAA;IAAkD;AAC1D;AAEA,MAAMqB,UAAU,IAAIC,QAAQ,KAAO;AACnC,SAASC;IACPC,IAAAA,UAAG,EAACH;IACJ,OAAO;AACT;AAEO,SAASjB,qBAAqB,KAA0B;IAA1B,IAAA,EAAEqB,IAAI,EAAoB,GAA1B;IACnCZ,IAAAA,sBAAe,EAAC;QACdC,wBAAU,CAACY,+BAA+B,CAACD;QAC3C,OAAO;YACLX,wBAAU,CAACY,+BAA+B,CAAC;QAC7C;IACF,GAAG;QAACD;KAAK;IACT,OAAO;AACT;AAEO,SAASxB;IACd,MAAM,EAAEQ,YAAY,EAAE,GAAGJ;IACzB,IAAIsB,cAA+B;IACnC,IAAIlB,iBAAiB,WAAW;QAC9BkB,4BAAc,qBAACJ;IACjB,OAAO,IAAId,iBAAiB,aAAa;QACvCkB,4BAAc,qBAACV;IACjB,OAAO,IAAIR,iBAAiB,SAAS;QACnCkB,4BAAc,qBAACR;IACjB;IACA,OAAOQ;AACT;AAEO,SAASxB,gBAAgB,KAQ/B;IAR+B,IAAA,EAC9BI,IAAI,EACJC,QAAQ,EACRoB,QAAQ,EAKT,GAR+B;IAS9B,MAAMD,4BACJ,qBAACrB;QAA2BC,MAAMA;QAAMC,UAAUA;OAA5BD;IAGxB,qBACE;;YACGoB;YACAC;;;AAGP;AAEA,MAAMC,oCAAsBC,IAAAA,oBAAa,EAGtC;IACDrB,cAAc;IACdC,iBAAiB,KAAO;AAC1B;AAEO,SAASR,qBAAqB,KAAqC;IAArC,IAAA,EAAE0B,QAAQ,EAA2B,GAArC;IACnC,MAAM,CAACnB,cAAcC,gBAAgB,GAAGqB,IAAAA,eAAQ,EAC9C;IAGF,MAAM,CAACC,kBAAkBC,oBAAoB,GAAGF,IAAAA,eAAQ,EAAC;IACzD,MAAMG,iBAAiBC,IAAAA,kBAAW,EAChC,IAAMF,oBAAoB,CAACG,OAASA,OAAO,IAC3C,EAAE;IAGJ,MAAMC,2BAA2BF,IAAAA,kBAAW,EAC1C,CAAC5B;QACC,IAAIA,SAAS,MAAM;YACjB2B;QACF;QACAxB,gBAAgBH;IAClB,GACA;QAAC2B;KAAe;IAGlB,qBACE,qBAACL,oBAAoBS,QAAQ;QAE3BC,OAAO;YACL9B;YACAC,iBAAiB2B;QACnB;kBAECT;OANII;AASX;AAEO,SAAS3B;IACd,OAAOmC,IAAAA,iBAAU,EAACX;AACpB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>