<html>
<head>
<title>runLintCheck.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
runLintCheck.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/lib/eslint/runLintCheck.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { promises as fs, existsSync } from 'fs'</span><span class="s3">\n</span><span class="s1">import { bold, cyan, red, underline, yellow } from '../picocolors'</span><span class="s3">\n</span><span class="s1">import path from 'path'</span><span class="s3">\n\n</span><span class="s1">import findUp from 'next/dist/compiled/find-up'</span><span class="s3">\n</span><span class="s1">import semver from 'next/dist/compiled/semver'</span><span class="s3">\n</span><span class="s1">import * as CommentJson from 'next/dist/compiled/comment-json'</span><span class="s3">\n\n</span><span class="s1">import { formatResults } from './customFormatter'</span><span class="s3">\n</span><span class="s1">import type { LintResult } from './customFormatter'</span><span class="s3">\n</span><span class="s1">import { writeDefaultConfig } from './writeDefaultConfig'</span><span class="s3">\n</span><span class="s1">import { hasEslintConfiguration } from './hasEslintConfiguration'</span><span class="s3">\n</span><span class="s1">import { writeOutputFile } from './writeOutputFile'</span><span class="s3">\n\n</span><span class="s1">import { findPagesDir } from '../find-pages-dir'</span><span class="s3">\n</span><span class="s1">import { installDependencies } from '../install-dependencies'</span><span class="s3">\n</span><span class="s1">import { hasNecessaryDependencies } from '../has-necessary-dependencies'</span><span class="s3">\n\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import type { EventLintCheckCompleted } from '../../telemetry/events/build'</span><span class="s3">\n</span><span class="s1">import isError, { getProperError } from '../is-error'</span><span class="s3">\n</span><span class="s1">import { getPkgManager } from '../helpers/get-pkg-manager'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getESLintStrictValue,</span><span class="s3">\n  </span><span class="s1">getESLintPromptValues,</span><span class="s3">\n</span><span class="s1">} from './getESLintPromptValues'</span><span class="s3">\n\n</span><span class="s1">type Config = {</span><span class="s3">\n  </span><span class="s1">plugins: string[]</span><span class="s3">\n  </span><span class="s1">rules: { [key: string]: Array&lt;number | string&gt; }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// 0 is off, 1 is warn, 2 is error. See https://eslint.org/docs/user-guide/configuring/rules#configuring-rules</span><span class="s3">\n</span><span class="s1">const VALID_SEVERITY = ['off', 'warn', 'error'] as const</span><span class="s3">\n</span><span class="s1">type Severity = (typeof VALID_SEVERITY)[number]</span><span class="s3">\n\n</span><span class="s1">function isValidSeverity(severity: string): severity is Severity {</span><span class="s3">\n  </span><span class="s1">return VALID_SEVERITY.includes(severity as Severity)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const requiredPackages = [</span><span class="s3">\n  </span><span class="s1">{ file: 'eslint', pkg: 'eslint', exportsRestrict: false },</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">file: 'eslint-config-next',</span><span class="s3">\n    </span><span class="s1">pkg: 'eslint-config-next',</span><span class="s3">\n    </span><span class="s1">exportsRestrict: false,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">async function cliPrompt(cwd: string): Promise&lt;{ config?: any }&gt; {</span><span class="s3">\n  </span><span class="s1">console.log(</span><span class="s3">\n    </span><span class="s1">bold(</span><span class="s3">\n      </span><span class="s1">`${cyan(</span><span class="s3">\n        </span><span class="s1">'?'</span><span class="s3">\n      </span><span class="s1">)} How would you like to configure ESLint? https://nextjs.org/docs/app/api-reference/config/eslint`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const cliSelect = (</span><span class="s3">\n      </span><span class="s1">await Promise.resolve(</span><span class="s3">\n        </span><span class="s1">require('next/dist/compiled/cli-select') as typeof import('next/dist/compiled/cli-select')</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">).default</span><span class="s3">\n    </span><span class="s1">const { value } = await cliSelect({</span><span class="s3">\n      </span><span class="s1">values: await getESLintPromptValues(cwd),</span><span class="s3">\n      </span><span class="s1">valueRenderer: (</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">title,</span><span class="s3">\n          </span><span class="s1">recommended,</span><span class="s3">\n        </span><span class="s1">}: { title: string; recommended?: boolean; config: any },</span><span class="s3">\n        </span><span class="s1">selected: boolean</span><span class="s3">\n      </span><span class="s1">) =&gt; {</span><span class="s3">\n        </span><span class="s1">const name = selected ? bold(underline(cyan(title))) : title</span><span class="s3">\n        </span><span class="s1">return name + (recommended ? bold(yellow(' (recommended)')) : '')</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">selected: cyan('‚ùØ '),</span><span class="s3">\n      </span><span class="s1">unselected: '  ',</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">return { config: value?.config ?? null }</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">return { config: null }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function lint(</span><span class="s3">\n  </span><span class="s1">baseDir: string,</span><span class="s3">\n  </span><span class="s1">lintDirs: string[],</span><span class="s3">\n  </span><span class="s1">eslintrcFile: string | null,</span><span class="s3">\n  </span><span class="s1">pkgJsonPath: string | null,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">lintDuringBuild = false,</span><span class="s3">\n    </span><span class="s1">eslintOptions = null,</span><span class="s3">\n    </span><span class="s1">reportErrorsOnly = false,</span><span class="s3">\n    </span><span class="s1">maxWarnings = -1,</span><span class="s3">\n    </span><span class="s1">formatter = null,</span><span class="s3">\n    </span><span class="s1">outputFile = null,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">lintDuringBuild: boolean</span><span class="s3">\n    </span><span class="s1">eslintOptions: any</span><span class="s3">\n    </span><span class="s1">reportErrorsOnly: boolean</span><span class="s3">\n    </span><span class="s1">maxWarnings: number</span><span class="s3">\n    </span><span class="s1">formatter: string | null</span><span class="s3">\n    </span><span class="s1">outputFile: string | null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">): Promise&lt;</span><span class="s3">\n  </span><span class="s1">| string</span><span class="s3">\n  </span><span class="s1">| null</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">output: string | null</span><span class="s3">\n      </span><span class="s1">isError: boolean</span><span class="s3">\n      </span><span class="s1">eventInfo: EventLintCheckCompleted</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">// Load ESLint after we're sure it exists:</span><span class="s3">\n    </span><span class="s1">const deps = await hasNecessaryDependencies(baseDir, requiredPackages)</span><span class="s3">\n    </span><span class="s1">const packageManager = getPkgManager(baseDir)</span><span class="s3">\n\n    </span><span class="s1">if (deps.missing.some((dep) =&gt; dep.pkg === 'eslint')) {</span><span class="s3">\n      </span><span class="s1">Log.error(</span><span class="s3">\n        </span><span class="s1">`ESLint must be installed${</span><span class="s3">\n          </span><span class="s1">lintDuringBuild ? ' in order to run during builds:' : ':'</span><span class="s3">\n        </span><span class="s1">} ${bold(</span><span class="s3">\n          </span><span class="s1">cyan(</span><span class="s3">\n            </span><span class="s1">(packageManager === 'yarn'</span><span class="s3">\n              </span><span class="s1">? 'yarn add --dev'</span><span class="s3">\n              </span><span class="s1">: packageManager === 'pnpm'</span><span class="s3">\n                </span><span class="s1">? 'pnpm install --save-dev'</span><span class="s3">\n                </span><span class="s1">: 'npm install --save-dev') + ' eslint'</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const mod = await Promise.resolve(require(deps.resolved.get('eslint')!))</span><span class="s3">\n\n    </span><span class="s1">// If V9 config was found, use flat config, or else use legacy.</span><span class="s3">\n    </span><span class="s1">const useFlatConfig = eslintrcFile</span><span class="s3">\n      </span><span class="s1">? // eslintrcFile is absolute path</span><span class="s3">\n        </span><span class="s1">path.basename(eslintrcFile).startsWith('eslint.config.')</span><span class="s3">\n      </span><span class="s1">: false</span><span class="s3">\n\n    </span><span class="s1">let ESLint</span><span class="s3">\n    </span><span class="s1">// loadESLint is &gt;= 8.57.0</span><span class="s3">\n    </span><span class="s1">// PR https://github.com/eslint/eslint/pull/18098</span><span class="s3">\n    </span><span class="s1">// Release https://github.com/eslint/eslint/releases/tag/v8.57.0</span><span class="s3">\n    </span><span class="s1">if ('loadESLint' in mod) {</span><span class="s3">\n      </span><span class="s1">// By default, configType is `flat`. If `useFlatConfig` is false, the return value is `LegacyESLint`.</span><span class="s3">\n      </span><span class="s1">// https://github.com/eslint/eslint/blob/1def4cdfab1f067c5089df8b36242cdf912b0eb6/lib/types/index.d.ts#L1609-L1613</span><span class="s3">\n      </span><span class="s1">ESLint = await mod.loadESLint({</span><span class="s3">\n        </span><span class="s1">useFlatConfig,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// eslint &lt; 8.57.0, use legacy ESLint</span><span class="s3">\n      </span><span class="s1">ESLint = mod.ESLint</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let eslintVersion = ESLint?.version ?? mod.CLIEngine?.version</span><span class="s3">\n\n    </span><span class="s1">if (!eslintVersion || semver.lt(eslintVersion, '7.0.0')) {</span><span class="s3">\n      </span><span class="s1">return `${red(</span><span class="s3">\n        </span><span class="s1">'error'</span><span class="s3">\n      </span><span class="s1">)} - Your project has an older version of ESLint installed${</span><span class="s3">\n        </span><span class="s1">eslintVersion ? ' (' + eslintVersion + ')' : ''</span><span class="s3">\n      </span><span class="s1">}. Please upgrade to ESLint version 7 or above`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let options: any = {</span><span class="s3">\n      </span><span class="s1">useEslintrc: true,</span><span class="s3">\n      </span><span class="s1">baseConfig: {},</span><span class="s3">\n      </span><span class="s1">errorOnUnmatchedPattern: false,</span><span class="s3">\n      </span><span class="s1">extensions: ['.js', '.jsx', '.ts', '.tsx'],</span><span class="s3">\n      </span><span class="s1">cache: true,</span><span class="s3">\n      </span><span class="s1">...eslintOptions,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (semver.gte(eslintVersion, '9.0.0') &amp;&amp; useFlatConfig) {</span><span class="s3">\n      </span><span class="s1">for (const option of [</span><span class="s3">\n        </span><span class="s1">'useEslintrc',</span><span class="s3">\n        </span><span class="s1">'extensions',</span><span class="s3">\n        </span><span class="s1">'ignorePath',</span><span class="s3">\n        </span><span class="s1">'reportUnusedDisableDirectives',</span><span class="s3">\n        </span><span class="s1">'resolvePluginsRelativeTo',</span><span class="s3">\n        </span><span class="s1">'rulePaths',</span><span class="s3">\n        </span><span class="s1">'inlineConfig',</span><span class="s3">\n        </span><span class="s1">'maxWarnings',</span><span class="s3">\n      </span><span class="s1">]) {</span><span class="s3">\n        </span><span class="s1">if (option in options) {</span><span class="s3">\n          </span><span class="s1">delete options[option]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let eslint = new ESLint(options)</span><span class="s3">\n\n    </span><span class="s1">let nextEslintPluginIsEnabled = false</span><span class="s3">\n    </span><span class="s1">const nextRulesEnabled = new Map&lt;string, Severity&gt;()</span><span class="s3">\n\n    </span><span class="s1">for (const configFile of [eslintrcFile, pkgJsonPath]) {</span><span class="s3">\n      </span><span class="s1">if (!configFile) continue</span><span class="s3">\n\n      </span><span class="s1">const completeConfig: Config | undefined =</span><span class="s3">\n        </span><span class="s1">await eslint.calculateConfigForFile(configFile)</span><span class="s3">\n      </span><span class="s1">if (!completeConfig) continue</span><span class="s3">\n\n      </span><span class="s1">const plugins = completeConfig.plugins</span><span class="s3">\n\n      </span><span class="s1">const hasNextPlugin =</span><span class="s3">\n        </span><span class="s1">// in ESLint &lt; 9, `plugins` value is string[]</span><span class="s3">\n        </span><span class="s1">Array.isArray(plugins)</span><span class="s3">\n          </span><span class="s1">? plugins.includes('@next/next')</span><span class="s3">\n          </span><span class="s1">: // in ESLint &gt;= 9, `plugins` value is Record&lt;string, unknown&gt;</span><span class="s3">\n            </span><span class="s1">'@next/next' in plugins</span><span class="s3">\n\n      </span><span class="s1">if (hasNextPlugin) {</span><span class="s3">\n        </span><span class="s1">nextEslintPluginIsEnabled = true</span><span class="s3">\n        </span><span class="s1">for (const [name, [severity]] of Object.entries(completeConfig.rules)) {</span><span class="s3">\n          </span><span class="s1">if (!name.startsWith('@next/next/')) {</span><span class="s3">\n            </span><span class="s1">continue</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">typeof severity === 'number' &amp;&amp;</span><span class="s3">\n            </span><span class="s1">severity &gt;= 0 &amp;&amp;</span><span class="s3">\n            </span><span class="s1">severity &lt; VALID_SEVERITY.length</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">nextRulesEnabled.set(name, VALID_SEVERITY[severity])</span><span class="s3">\n          </span><span class="s1">} else if (</span><span class="s3">\n            </span><span class="s1">typeof severity === 'string' &amp;&amp;</span><span class="s3">\n            </span><span class="s1">isValidSeverity(severity)</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">nextRulesEnabled.set(name, severity)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const pagesDir = findPagesDir(baseDir).pagesDir</span><span class="s3">\n    </span><span class="s1">const pagesDirRules = pagesDir ? ['@next/next/no-html-link-for-pages'] : []</span><span class="s3">\n\n    </span><span class="s1">if (nextEslintPluginIsEnabled) {</span><span class="s3">\n      </span><span class="s1">let updatedPagesDir = false</span><span class="s3">\n\n      </span><span class="s1">for (const rule of pagesDirRules) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!options.baseConfig!.rules?.[rule] &amp;&amp;</span><span class="s3">\n          </span><span class="s1">!options.baseConfig!.rules?.[</span><span class="s3">\n            </span><span class="s1">rule.replace('@next/next', '@next/babel-plugin-next')</span><span class="s3">\n          </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">if (!options.baseConfig!.rules) {</span><span class="s3">\n            </span><span class="s1">options.baseConfig!.rules = {}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">options.baseConfig!.rules[rule] = [1, pagesDir]</span><span class="s3">\n          </span><span class="s1">updatedPagesDir = true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (updatedPagesDir) {</span><span class="s3">\n        </span><span class="s1">eslint = new ESLint(options)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">Log.warn('')</span><span class="s3">\n      </span><span class="s1">Log.warn(</span><span class="s3">\n        </span><span class="s1">'The Next.js plugin was not detected in your ESLint configuration. See https://nextjs.org/docs/app/api-reference/config/eslint#migrating-existing-config'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const lintStart = process.hrtime()</span><span class="s3">\n\n    </span><span class="s1">let results = await eslint.lintFiles(lintDirs)</span><span class="s3">\n    </span><span class="s1">let selectedFormatter = null</span><span class="s3">\n\n    </span><span class="s1">if (options.fix) await ESLint.outputFixes(results)</span><span class="s3">\n    </span><span class="s1">if (reportErrorsOnly) results = await ESLint.getErrorResults(results) // Only return errors if --quiet flag is used</span><span class="s3">\n\n    </span><span class="s1">if (formatter) selectedFormatter = await eslint.loadFormatter(formatter)</span><span class="s3">\n    </span><span class="s1">const formattedResult = await formatResults(</span><span class="s3">\n      </span><span class="s1">baseDir,</span><span class="s3">\n      </span><span class="s1">results,</span><span class="s3">\n      </span><span class="s1">selectedFormatter?.format</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const lintEnd = process.hrtime(lintStart)</span><span class="s3">\n    </span><span class="s1">const totalWarnings = results.reduce(</span><span class="s3">\n      </span><span class="s1">(sum: number, file: LintResult) =&gt; sum + file.warningCount,</span><span class="s3">\n      </span><span class="s1">0</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (outputFile) await writeOutputFile(outputFile, formattedResult.output)</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">output: formattedResult.outputWithMessages,</span><span class="s3">\n      </span><span class="s1">isError:</span><span class="s3">\n        </span><span class="s1">ESLint.getErrorResults(results)?.length &gt; 0 ||</span><span class="s3">\n        </span><span class="s1">(maxWarnings &gt;= 0 &amp;&amp; totalWarnings &gt; maxWarnings),</span><span class="s3">\n      </span><span class="s1">eventInfo: {</span><span class="s3">\n        </span><span class="s1">durationInSeconds: lintEnd[0],</span><span class="s3">\n        </span><span class="s1">eslintVersion: eslintVersion,</span><span class="s3">\n        </span><span class="s1">lintedFilesCount: results.length,</span><span class="s3">\n        </span><span class="s1">lintFix: !!options.fix,</span><span class="s3">\n        </span><span class="s1">nextEslintPluginVersion:</span><span class="s3">\n          </span><span class="s1">nextEslintPluginIsEnabled &amp;&amp; deps.resolved.has('eslint-config-next')</span><span class="s3">\n            </span><span class="s1">? require(</span><span class="s3">\n                </span><span class="s1">path.join(</span><span class="s3">\n                  </span><span class="s1">path.dirname(deps.resolved.get('eslint-config-next')!),</span><span class="s3">\n                  </span><span class="s1">'package.json'</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">).version</span><span class="s3">\n            </span><span class="s1">: null,</span><span class="s3">\n        </span><span class="s1">nextEslintPluginErrorsCount: formattedResult.totalNextPluginErrorCount,</span><span class="s3">\n        </span><span class="s1">nextEslintPluginWarningsCount:</span><span class="s3">\n          </span><span class="s1">formattedResult.totalNextPluginWarningCount,</span><span class="s3">\n        </span><span class="s1">nextRulesEnabled: Object.fromEntries(nextRulesEnabled),</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">if (lintDuringBuild) {</span><span class="s3">\n      </span><span class="s1">Log.error(</span><span class="s3">\n        </span><span class="s1">`ESLint: ${</span><span class="s3">\n          </span><span class="s1">isError(err) &amp;&amp; err.message ? err.message.replace(/</span><span class="s3">\\</span><span class="s1">n/g, ' ') : err</span><span class="s3">\n        </span><span class="s1">}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">throw getProperError(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function runLintCheck(</span><span class="s3">\n  </span><span class="s1">baseDir: string,</span><span class="s3">\n  </span><span class="s1">lintDirs: string[],</span><span class="s3">\n  </span><span class="s1">opts: {</span><span class="s3">\n    </span><span class="s1">lintDuringBuild?: boolean</span><span class="s3">\n    </span><span class="s1">eslintOptions?: any</span><span class="s3">\n    </span><span class="s1">reportErrorsOnly?: boolean</span><span class="s3">\n    </span><span class="s1">maxWarnings?: number</span><span class="s3">\n    </span><span class="s1">formatter?: string | null</span><span class="s3">\n    </span><span class="s1">outputFile?: string | null</span><span class="s3">\n    </span><span class="s1">strict?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">): ReturnType&lt;typeof lint&gt; {</span><span class="s3">\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">lintDuringBuild = false,</span><span class="s3">\n    </span><span class="s1">eslintOptions = null,</span><span class="s3">\n    </span><span class="s1">reportErrorsOnly = false,</span><span class="s3">\n    </span><span class="s1">maxWarnings = -1,</span><span class="s3">\n    </span><span class="s1">formatter = null,</span><span class="s3">\n    </span><span class="s1">outputFile = null,</span><span class="s3">\n    </span><span class="s1">strict = false,</span><span class="s3">\n  </span><span class="s1">} = opts</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">// Find user's .eslintrc file</span><span class="s3">\n    </span><span class="s1">// See: https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-file-formats</span><span class="s3">\n    </span><span class="s1">const eslintrcFile =</span><span class="s3">\n      </span><span class="s1">(await findUp(</span><span class="s3">\n        </span><span class="s1">[</span><span class="s3">\n          </span><span class="s1">// eslint v9</span><span class="s3">\n          </span><span class="s1">'eslint.config.js',</span><span class="s3">\n          </span><span class="s1">'eslint.config.mjs',</span><span class="s3">\n          </span><span class="s1">'eslint.config.cjs',</span><span class="s3">\n          </span><span class="s1">// TS extensions require to install a separate package `jiti`.</span><span class="s3">\n          </span><span class="s1">// https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files</span><span class="s3">\n          </span><span class="s1">'eslint.config.ts',</span><span class="s3">\n          </span><span class="s1">'eslint.config.mts',</span><span class="s3">\n          </span><span class="s1">'eslint.config.cts',</span><span class="s3">\n          </span><span class="s1">// eslint &lt;= v8</span><span class="s3">\n          </span><span class="s1">'.eslintrc.js',</span><span class="s3">\n          </span><span class="s1">'.eslintrc.cjs',</span><span class="s3">\n          </span><span class="s1">'.eslintrc.yaml',</span><span class="s3">\n          </span><span class="s1">'.eslintrc.yml',</span><span class="s3">\n          </span><span class="s1">'.eslintrc.json',</span><span class="s3">\n          </span><span class="s1">'.eslintrc',</span><span class="s3">\n        </span><span class="s1">],</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">cwd: baseDir,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)) ?? null</span><span class="s3">\n\n    </span><span class="s1">const pkgJsonPath = (await findUp('package.json', { cwd: baseDir })) ?? null</span><span class="s3">\n    </span><span class="s1">let packageJsonConfig = null</span><span class="s3">\n    </span><span class="s1">if (pkgJsonPath) {</span><span class="s3">\n      </span><span class="s1">const pkgJsonContent = await fs.readFile(pkgJsonPath, {</span><span class="s3">\n        </span><span class="s1">encoding: 'utf8',</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">packageJsonConfig = CommentJson.parse(pkgJsonContent)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const config = await hasEslintConfiguration(eslintrcFile, packageJsonConfig)</span><span class="s3">\n    </span><span class="s1">let deps</span><span class="s3">\n\n    </span><span class="s1">if (config.exists) {</span><span class="s3">\n      </span><span class="s1">// Run if ESLint config exists</span><span class="s3">\n      </span><span class="s1">return await lint(baseDir, lintDirs, eslintrcFile, pkgJsonPath, {</span><span class="s3">\n        </span><span class="s1">lintDuringBuild,</span><span class="s3">\n        </span><span class="s1">eslintOptions,</span><span class="s3">\n        </span><span class="s1">reportErrorsOnly,</span><span class="s3">\n        </span><span class="s1">maxWarnings,</span><span class="s3">\n        </span><span class="s1">formatter,</span><span class="s3">\n        </span><span class="s1">outputFile,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Display warning if no ESLint configuration is present inside</span><span class="s3">\n      </span><span class="s1">// config file during </span><span class="s3">\&quot;</span><span class="s1">next build</span><span class="s3">\&quot;</span><span class="s1">, no warning is shown when</span><span class="s3">\n      </span><span class="s1">// no eslintrc file is present</span><span class="s3">\n      </span><span class="s1">if (lintDuringBuild) {</span><span class="s3">\n        </span><span class="s1">if (config.emptyPkgJsonConfig || config.emptyEslintrc) {</span><span class="s3">\n          </span><span class="s1">Log.warn(</span><span class="s3">\n            </span><span class="s1">`No ESLint configuration detected. Run ${bold(</span><span class="s3">\n              </span><span class="s1">cyan('next lint')</span><span class="s3">\n            </span><span class="s1">)} to begin setup`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return null</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Ask user what config they would like to start with for first time </span><span class="s3">\&quot;</span><span class="s1">next lint</span><span class="s3">\&quot; </span><span class="s1">setup</span><span class="s3">\n        </span><span class="s1">const { config: selectedConfig } = strict</span><span class="s3">\n          </span><span class="s1">? await getESLintStrictValue(baseDir)</span><span class="s3">\n          </span><span class="s1">: await cliPrompt(baseDir)</span><span class="s3">\n\n        </span><span class="s1">if (selectedConfig == null) {</span><span class="s3">\n          </span><span class="s1">// Show a warning if no option is selected in prompt</span><span class="s3">\n          </span><span class="s1">Log.warn(</span><span class="s3">\n            </span><span class="s1">'If you set up ESLint yourself, we recommend adding the Next.js ESLint plugin. See https://nextjs.org/docs/app/api-reference/config/eslint#migrating-existing-config'</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return null</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// Check if necessary deps installed, and install any that are missing</span><span class="s3">\n          </span><span class="s1">deps = await hasNecessaryDependencies(baseDir, requiredPackages)</span><span class="s3">\n          </span><span class="s1">if (deps.missing.length &gt; 0) {</span><span class="s3">\n            </span><span class="s1">deps.missing.forEach((dep) =&gt; {</span><span class="s3">\n              </span><span class="s1">if (dep.pkg === 'eslint') {</span><span class="s3">\n                </span><span class="s1">// pin to v9 to avoid breaking changes</span><span class="s3">\n                </span><span class="s1">dep.pkg = 'eslint@^9'</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">await installDependencies(baseDir, deps.missing, true)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Write default ESLint config.</span><span class="s3">\n          </span><span class="s1">// Check for /pages and src/pages is to make sure this happens in Next.js folder</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">['app', 'src/app', 'pages', 'src/pages'].some((dir) =&gt;</span><span class="s3">\n              </span><span class="s1">existsSync(path.join(baseDir, dir))</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">await writeDefaultConfig(</span><span class="s3">\n              </span><span class="s1">baseDir,</span><span class="s3">\n              </span><span class="s1">config,</span><span class="s3">\n              </span><span class="s1">selectedConfig,</span><span class="s3">\n              </span><span class="s1">eslintrcFile,</span><span class="s3">\n              </span><span class="s1">pkgJsonPath,</span><span class="s3">\n              </span><span class="s1">packageJsonConfig</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">Log.ready(</span><span class="s3">\n          </span><span class="s1">`ESLint has successfully been configured. Run ${bold(</span><span class="s3">\n            </span><span class="s1">cyan('next lint')</span><span class="s3">\n          </span><span class="s1">)} again to view warnings and errors.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">return null</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">throw err</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;runLintCheck&quot;</span><span class="s0">,</span><span class="s1">&quot;VALID_SEVERITY&quot;</span><span class="s0">,</span><span class="s1">&quot;isValidSeverity&quot;</span><span class="s0">,</span><span class="s1">&quot;severity&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;requiredPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;pkg&quot;</span><span class="s0">,</span><span class="s1">&quot;exportsRestrict&quot;</span><span class="s0">,</span><span class="s1">&quot;cliPrompt&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;cyan&quot;</span><span class="s0">,</span><span class="s1">&quot;cliSelect&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;getESLintPromptValues&quot;</span><span class="s0">,</span><span class="s1">&quot;valueRenderer&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;recommended&quot;</span><span class="s0">,</span><span class="s1">&quot;selected&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;underline&quot;</span><span class="s0">,</span><span class="s1">&quot;yellow&quot;</span><span class="s0">,</span><span class="s1">&quot;unselected&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;lint&quot;</span><span class="s0">,</span><span class="s1">&quot;baseDir&quot;</span><span class="s0">,</span><span class="s1">&quot;lintDirs&quot;</span><span class="s0">,</span><span class="s1">&quot;eslintrcFile&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;lintDuringBuild&quot;</span><span class="s0">,</span><span class="s1">&quot;eslintOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;reportErrorsOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;maxWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;formatter&quot;</span><span class="s0">,</span><span class="s1">&quot;outputFile&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;ESLint&quot;</span><span class="s0">,</span><span class="s1">&quot;deps&quot;</span><span class="s0">,</span><span class="s1">&quot;hasNecessaryDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;packageManager&quot;</span><span class="s0">,</span><span class="s1">&quot;getPkgManager&quot;</span><span class="s0">,</span><span class="s1">&quot;missing&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;dep&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;useFlatConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;basename&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;loadESLint&quot;</span><span class="s0">,</span><span class="s1">&quot;eslintVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIEngine&quot;</span><span class="s0">,</span><span class="s1">&quot;semver&quot;</span><span class="s0">,</span><span class="s1">&quot;lt&quot;</span><span class="s0">,</span><span class="s1">&quot;red&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;useEslintrc&quot;</span><span class="s0">,</span><span class="s1">&quot;baseConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;errorOnUnmatchedPattern&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;gte&quot;</span><span class="s0">,</span><span class="s1">&quot;option&quot;</span><span class="s0">,</span><span class="s1">&quot;eslint&quot;</span><span class="s0">,</span><span class="s1">&quot;nextEslintPluginIsEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;nextRulesEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;configFile&quot;</span><span class="s0">,</span><span class="s1">&quot;completeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;calculateConfigForFile&quot;</span><span class="s0">,</span><span class="s1">&quot;plugins&quot;</span><span class="s0">,</span><span class="s1">&quot;hasNextPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;rules&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;findPagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirRules&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedPagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;rule&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;lintStart&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;hrtime&quot;</span><span class="s0">,</span><span class="s1">&quot;results&quot;</span><span class="s0">,</span><span class="s1">&quot;lintFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;selectedFormatter&quot;</span><span class="s0">,</span><span class="s1">&quot;fix&quot;</span><span class="s0">,</span><span class="s1">&quot;outputFixes&quot;</span><span class="s0">,</span><span class="s1">&quot;getErrorResults&quot;</span><span class="s0">,</span><span class="s1">&quot;loadFormatter&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedResult&quot;</span><span class="s0">,</span><span class="s1">&quot;formatResults&quot;</span><span class="s0">,</span><span class="s1">&quot;format&quot;</span><span class="s0">,</span><span class="s1">&quot;lintEnd&quot;</span><span class="s0">,</span><span class="s1">&quot;totalWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;sum&quot;</span><span class="s0">,</span><span class="s1">&quot;warningCount&quot;</span><span class="s0">,</span><span class="s1">&quot;writeOutputFile&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;outputWithMessages&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;eventInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;durationInSeconds&quot;</span><span class="s0">,</span><span class="s1">&quot;lintedFilesCount&quot;</span><span class="s0">,</span><span class="s1">&quot;lintFix&quot;</span><span class="s0">,</span><span class="s1">&quot;nextEslintPluginVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;nextEslintPluginErrorsCount&quot;</span><span class="s0">,</span><span class="s1">&quot;totalNextPluginErrorCount&quot;</span><span class="s0">,</span><span class="s1">&quot;nextEslintPluginWarningsCount&quot;</span><span class="s0">,</span><span class="s1">&quot;totalNextPluginWarningCount&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;getProperError&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;findUp&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJsonConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgJsonContent&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;encoding&quot;</span><span class="s0">,</span><span class="s1">&quot;CommentJson&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;hasEslintConfiguration&quot;</span><span class="s0">,</span><span class="s1">&quot;exists&quot;</span><span class="s0">,</span><span class="s1">&quot;emptyPkgJsonConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;emptyEslintrc&quot;</span><span class="s0">,</span><span class="s1">&quot;selectedConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getESLintStrictValue&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;installDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;writeDefaultConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;ready&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>