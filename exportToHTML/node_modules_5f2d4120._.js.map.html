<html>
<head>
<title>node_modules_5f2d4120._.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
.s4 { color: #0033b3;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
node_modules_5f2d4120._.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span>
  <span class="s1">&quot;version&quot;</span><span class="s0">: </span><span class="s2">3</span><span class="s0">,</span>
  <span class="s1">&quot;sources&quot;</span><span class="s0">: [],</span>
  <span class="s1">&quot;sections&quot;</span><span class="s0">: [</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/page-path/normalize-path-sep.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* For a given page path, this function ensures that there is no backslash</span><span class="s3">\n </span><span class="s1">* escaping slashes in the path. Example:</span><span class="s3">\n </span><span class="s1">*  - `foo</span><span class="s3">\\</span><span class="s1">/bar</span><span class="s3">\\</span><span class="s1">/baz` -&gt; `foo/bar/baz`</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizePathSep(path: string): string {</span><span class="s3">\n  </span><span class="s1">return path.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;normalizePathSep&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;CAIC;;;+BACeA,oBAAAA;;;eAAAA;;;AAAT,SAASA,iBAAiBC,IAAY;IAC3C,OAAOA,KAAKC,OAAO,CAAC,OAAO;AAC7B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">24</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/page-path/ensure-leading-slash.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* For a given page path, this function ensures that there is a leading slash.</span><span class="s3">\n </span><span class="s1">* If there is not a leading slash, one is added, otherwise it is noop.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function ensureLeadingSlash(path: string) {</span><span class="s3">\n  </span><span class="s1">return path.startsWith('/') ? path : `/${path}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ensureLeadingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;CAGC;;;+BACeA,sBAAAA;;;eAAAA;;;AAAT,SAASA,mBAAmBC,IAAY;IAC7C,OAAOA,KAAKC,UAAU,CAAC,OAAOD,OAAQ,MAAGA;AAC3C&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">43</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/segment.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Segment } from '../../server/app-render/types'</span><span class="s3">\n\n</span><span class="s1">export function isGroupSegment(segment: string) {</span><span class="s3">\n  </span><span class="s1">// Use array[0] for performant purpose</span><span class="s3">\n  </span><span class="s1">return segment[0] === '(' &amp;&amp; segment.endsWith(')')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isParallelRouteSegment(segment: string) {</span><span class="s3">\n  </span><span class="s1">return segment.startsWith('@') &amp;&amp; segment !== '@children'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function addSearchParamsIfPageSegment(</span><span class="s3">\n  </span><span class="s1">segment: Segment,</span><span class="s3">\n  </span><span class="s1">searchParams: Record&lt;string, string | string[] | undefined&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const isPageSegment = segment.includes(PAGE_SEGMENT_KEY)</span><span class="s3">\n\n  </span><span class="s1">if (isPageSegment) {</span><span class="s3">\n    </span><span class="s1">const stringifiedQuery = JSON.stringify(searchParams)</span><span class="s3">\n    </span><span class="s1">return stringifiedQuery !== '{}'</span><span class="s3">\n      </span><span class="s1">? PAGE_SEGMENT_KEY + '?' + stringifiedQuery</span><span class="s3">\n      </span><span class="s1">: PAGE_SEGMENT_KEY</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return segment</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const PAGE_SEGMENT_KEY = '__PAGE__'</span><span class="s3">\n</span><span class="s1">export const DEFAULT_SEGMENT_KEY = '__DEFAULT__'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DEFAULT_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGE_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;addSearchParamsIfPageSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;isGroupSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;isParallelRouteSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;isPageSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifiedQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;IA4BaA,mBAAmB,EAAA;eAAnBA;;IADAC,gBAAgB,EAAA;eAAhBA;;IAhBGC,4BAA4B,EAAA;eAA5BA;;IATAC,cAAc,EAAA;eAAdA;;IAKAC,sBAAsB,EAAA;eAAtBA;;;AALT,SAASD,eAAeE,OAAe;IAC5C,sCAAsC;IACtC,OAAOA,OAAO,CAAC,EAAE,KAAK,OAAOA,QAAQC,QAAQ,CAAC;AAChD;AAEO,SAASF,uBAAuBC,OAAe;IACpD,OAAOA,QAAQE,UAAU,CAAC,QAAQF,YAAY;AAChD;AAEO,SAASH,6BACdG,OAAgB,EAChBG,YAA2D;IAE3D,MAAMC,gBAAgBJ,QAAQK,QAAQ,CAACT;IAEvC,IAAIQ,eAAe;QACjB,MAAME,mBAAmBC,KAAKC,SAAS,CAACL;QACxC,OAAOG,qBAAqB,OACxBV,mBAAmB,MAAMU,mBACzBV;IACN;IAEA,OAAOI;AACT;AAEO,MAAMJ,mBAAmB;AACzB,MAAMD,sBAAsB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">97</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/app-paths.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { ensureLeadingSlash } from '../../page-path/ensure-leading-slash'</span><span class="s3">\n</span><span class="s1">import { isGroupSegment } from '../../segment'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Normalizes an app route so it represents the actual request path. Essentially</span><span class="s3">\n </span><span class="s1">* performing the following transformations:</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* - `/(dashboard)/user/[id]/page` to `/user/[id]`</span><span class="s3">\n </span><span class="s1">* - `/(dashboard)/account/page` to `/account`</span><span class="s3">\n </span><span class="s1">* - `/user/[id]/page` to `/user/[id]`</span><span class="s3">\n </span><span class="s1">* - `/account/page` to `/account`</span><span class="s3">\n </span><span class="s1">* - `/page` to `/`</span><span class="s3">\n </span><span class="s1">* - `/(dashboard)/user/[id]/route` to `/user/[id]`</span><span class="s3">\n </span><span class="s1">* - `/(dashboard)/account/route` to `/account`</span><span class="s3">\n </span><span class="s1">* - `/user/[id]/route` to `/user/[id]`</span><span class="s3">\n </span><span class="s1">* - `/account/route` to `/account`</span><span class="s3">\n </span><span class="s1">* - `/route` to `/`</span><span class="s3">\n </span><span class="s1">* - `/` to `/`</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param route the app route to normalize</span><span class="s3">\n </span><span class="s1">* @returns the normalized pathname</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeAppPath(route: string) {</span><span class="s3">\n  </span><span class="s1">return ensureLeadingSlash(</span><span class="s3">\n    </span><span class="s1">route.split('/').reduce((pathname, segment, index, segments) =&gt; {</span><span class="s3">\n      </span><span class="s1">// Empty segments are ignored.</span><span class="s3">\n      </span><span class="s1">if (!segment) {</span><span class="s3">\n        </span><span class="s1">return pathname</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Groups are ignored.</span><span class="s3">\n      </span><span class="s1">if (isGroupSegment(segment)) {</span><span class="s3">\n        </span><span class="s1">return pathname</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Parallel segments are ignored.</span><span class="s3">\n      </span><span class="s1">if (segment[0] === '@') {</span><span class="s3">\n        </span><span class="s1">return pathname</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// The last segment (if it's a leaf) should be ignored.</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">(segment === 'page' || segment === 'route') &amp;&amp;</span><span class="s3">\n        </span><span class="s1">index === segments.length - 1</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return pathname</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return `${pathname}/${segment}`</span><span class="s3">\n    </span><span class="s1">}, '')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Strips the `.rsc` extension if it's in the pathname.</span><span class="s3">\n </span><span class="s1">* Since this function is used on full urls it checks `?` for searchParams handling.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeRscURL(url: string) {</span><span class="s3">\n  </span><span class="s1">return url.replace(</span><span class="s3">\n    </span><span class="s1">/</span><span class="s3">\\</span><span class="s1">.rsc($|</span><span class="s3">\\</span><span class="s1">?)/,</span><span class="s3">\n    </span><span class="s1">// $1 ensures `?` is preserved</span><span class="s3">\n    </span><span class="s1">'$1'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRscURL&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;ensureLeadingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;isGroupSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;IAsBgBA,gBAAgB,EAAA;eAAhBA;;IAmCAC,eAAe,EAAA;eAAfA;;;oCAzDmB;yBACJ;AAqBxB,SAASD,iBAAiBE,KAAa;IAC5C,OAAOC,CAAAA,GAAAA,oBAAAA,kBAAkB,EACvBD,MAAME,KAAK,CAAC,KAAKC,MAAM,CAAC,CAACC,UAAUC,SAASC,OAAOC;QACjD,8BAA8B;QAC9B,IAAI,CAACF,SAAS;YACZ,OAAOD;QACT;QAEA,sBAAsB;QACtB,IAAII,CAAAA,GAAAA,SAAAA,cAAc,EAACH,UAAU;YAC3B,OAAOD;QACT;QAEA,iCAAiC;QACjC,IAAIC,OAAO,CAAC,EAAE,KAAK,KAAK;YACtB,OAAOD;QACT;QAEA,uDAAuD;QACvD,IACGC,CAAAA,YAAY,UAAUA,YAAY,OAAM,KACzCC,UAAUC,SAASE,MAAM,GAAG,GAC5B;YACA,OAAOL;QACT;QAEA,OAAUA,WAAS,MAAGC;IACxB,GAAG;AAEP;AAMO,SAASN,gBAAgBW,GAAW;IACzC,OAAOA,IAAIC,OAAO,CAChB,eACA,AACA,8BAD8B;AAGlC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">148</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/is-app-route-route.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export function isAppRouteRoute(route: string): boolean {</span><span class="s3">\n  </span><span class="s1">return route.endsWith('/route')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isAppRouteRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAAgBA,mBAAAA;;;eAAAA;;;AAAT,SAASA,gBAAgBC,KAAa;IAC3C,OAAOA,MAAMC,QAAQ,CAAC;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">164</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/metadata/is-metadata-route.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { PageExtensions } from '../../build/page-extensions-type'</span><span class="s3">\n</span><span class="s1">import { normalizePathSep } from '../../shared/lib/page-path/normalize-path-sep'</span><span class="s3">\n</span><span class="s1">import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'</span><span class="s3">\n</span><span class="s1">import { isAppRouteRoute } from '../is-app-route-route'</span><span class="s3">\n\n</span><span class="s1">export const STATIC_METADATA_IMAGES = {</span><span class="s3">\n  </span><span class="s1">icon: {</span><span class="s3">\n    </span><span class="s1">filename: 'icon',</span><span class="s3">\n    </span><span class="s1">extensions: ['ico', 'jpg', 'jpeg', 'png', 'svg'],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">apple: {</span><span class="s3">\n    </span><span class="s1">filename: 'apple-icon',</span><span class="s3">\n    </span><span class="s1">extensions: ['jpg', 'jpeg', 'png'],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">favicon: {</span><span class="s3">\n    </span><span class="s1">filename: 'favicon',</span><span class="s3">\n    </span><span class="s1">extensions: ['ico'],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">openGraph: {</span><span class="s3">\n    </span><span class="s1">filename: 'opengraph-image',</span><span class="s3">\n    </span><span class="s1">extensions: ['jpg', 'jpeg', 'png', 'gif'],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">twitter: {</span><span class="s3">\n    </span><span class="s1">filename: 'twitter-image',</span><span class="s3">\n    </span><span class="s1">extensions: ['jpg', 'jpeg', 'png', 'gif'],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">// Match routes that are metadata routes, e.g. /sitemap.xml, /favicon.&lt;ext&gt;, /&lt;icon&gt;.&lt;ext&gt;, etc.</span><span class="s3">\n</span><span class="s1">// TODO-METADATA: support more metadata routes with more extensions</span><span class="s3">\n</span><span class="s1">export const DEFAULT_METADATA_ROUTE_EXTENSIONS = ['js', 'jsx', 'ts', 'tsx']</span><span class="s3">\n\n</span><span class="s1">// Match the file extension with the dynamic multi-routes extensions</span><span class="s3">\n</span><span class="s1">// e.g. ([xml, js], null) -&gt; can match `/sitemap.xml/route`, `sitemap.js/route`</span><span class="s3">\n</span><span class="s1">// e.g. ([png], [ts]) -&gt; can match `/opengrapg-image.png`, `/opengraph-image.ts`</span><span class="s3">\n</span><span class="s1">export const getExtensionRegexString = (</span><span class="s3">\n  </span><span class="s1">staticExtensions: readonly string[],</span><span class="s3">\n  </span><span class="s1">dynamicExtensions: readonly string[] | null</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">// If there's no possible multi dynamic routes, will not match any &lt;name&gt;[].&lt;ext&gt; files</span><span class="s3">\n  </span><span class="s1">if (!dynamicExtensions || dynamicExtensions.length === 0) {</span><span class="s3">\n    </span><span class="s1">return `(</span><span class="s3">\\\\</span><span class="s1">.(?:${staticExtensions.join('|')}))`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return `(?:</span><span class="s3">\\\\</span><span class="s1">.(${staticExtensions.join('|')})|(</span><span class="s3">\\\\</span><span class="s1">.(${dynamicExtensions.join('|')})))`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Determine if the file is a metadata route file entry</span><span class="s3">\n </span><span class="s1">* @param appDirRelativePath the relative file path to app/</span><span class="s3">\n </span><span class="s1">* @param pageExtensions the js extensions, such as ['js', 'jsx', 'ts', 'tsx']</span><span class="s3">\n </span><span class="s1">* @param strictlyMatchExtensions if it's true, match the file with page extension, otherwise match the file with default corresponding extension</span><span class="s3">\n </span><span class="s1">* @returns if the file is a metadata route file</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isMetadataRouteFile(</span><span class="s3">\n  </span><span class="s1">appDirRelativePath: string,</span><span class="s3">\n  </span><span class="s1">pageExtensions: PageExtensions,</span><span class="s3">\n  </span><span class="s1">strictlyMatchExtensions: boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// End with the extension or optional to have the extension</span><span class="s3">\n  </span><span class="s1">// When strictlyMatchExtensions is true, it's used for match file path;</span><span class="s3">\n  </span><span class="s1">// When strictlyMatchExtensions, the dynamic extension is skipped but</span><span class="s3">\n  </span><span class="s1">// static extension is kept, which is usually used for matching route path.</span><span class="s3">\n  </span><span class="s1">const trailingMatcher = (strictlyMatchExtensions ? '' : '?') + '$'</span><span class="s3">\n  </span><span class="s1">// Match the optional variants like /opengraph-image2, /icon-a102f4.png, etc.</span><span class="s3">\n  </span><span class="s1">const variantsMatcher = '</span><span class="s3">\\\\</span><span class="s1">d?'</span><span class="s3">\n  </span><span class="s1">// The -</span><span class="s3">\\</span><span class="s1">w{6} is the suffix that normalized from group routes;</span><span class="s3">\n  </span><span class="s1">const groupSuffix = strictlyMatchExtensions ? '' : '(-</span><span class="s3">\\\\</span><span class="s1">w{6})?'</span><span class="s3">\n\n  </span><span class="s1">const suffixMatcher = `${variantsMatcher}${groupSuffix}`</span><span class="s3">\n\n  </span><span class="s1">const metadataRouteFilesRegex = [</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`^[</span><span class="s3">\\\\\\\\</span><span class="s1">/]robots${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">pageExtensions.concat('txt'),</span><span class="s3">\n        </span><span class="s1">null</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`^[</span><span class="s3">\\\\\\\\</span><span class="s1">/]manifest${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">pageExtensions.concat('webmanifest', 'json'),</span><span class="s3">\n        </span><span class="s1">null</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(`^[</span><span class="s3">\\\\\\\\</span><span class="s1">/]favicon</span><span class="s3">\\\\</span><span class="s1">.ico$`),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`[</span><span class="s3">\\\\\\\\</span><span class="s1">/]sitemap${getExtensionRegexString(['xml'], pageExtensions)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`[</span><span class="s3">\\\\\\\\</span><span class="s1">/]${STATIC_METADATA_IMAGES.icon.filename}${suffixMatcher}${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">STATIC_METADATA_IMAGES.icon.extensions,</span><span class="s3">\n        </span><span class="s1">pageExtensions</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`[</span><span class="s3">\\\\\\\\</span><span class="s1">/]${STATIC_METADATA_IMAGES.apple.filename}${suffixMatcher}${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">STATIC_METADATA_IMAGES.apple.extensions,</span><span class="s3">\n        </span><span class="s1">pageExtensions</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`[</span><span class="s3">\\\\\\\\</span><span class="s1">/]${STATIC_METADATA_IMAGES.openGraph.filename}${suffixMatcher}${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">STATIC_METADATA_IMAGES.openGraph.extensions,</span><span class="s3">\n        </span><span class="s1">pageExtensions</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">new RegExp(</span><span class="s3">\n      </span><span class="s1">`[</span><span class="s3">\\\\\\\\</span><span class="s1">/]${STATIC_METADATA_IMAGES.twitter.filename}${suffixMatcher}${getExtensionRegexString(</span><span class="s3">\n        </span><span class="s1">STATIC_METADATA_IMAGES.twitter.extensions,</span><span class="s3">\n        </span><span class="s1">pageExtensions</span><span class="s3">\n      </span><span class="s1">)}${trailingMatcher}`</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n\n  </span><span class="s1">const normalizedAppDirRelativePath = normalizePathSep(appDirRelativePath)</span><span class="s3">\n  </span><span class="s1">const matched = metadataRouteFilesRegex.some((r) =&gt;</span><span class="s3">\n    </span><span class="s1">r.test(normalizedAppDirRelativePath)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return matched</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Check if the route is a static metadata route, with /route suffix</span><span class="s3">\n</span><span class="s1">// e.g. /favicon.ico/route, /icon.png/route, etc.</span><span class="s3">\n</span><span class="s1">// But skip the text routes like robots.txt since they might also be dynamic.</span><span class="s3">\n</span><span class="s1">// Checking route path is not enough to determine if text routes is dynamic.</span><span class="s3">\n</span><span class="s1">export function isStaticMetadataRoute(route: string) {</span><span class="s3">\n  </span><span class="s1">// extract ext with regex</span><span class="s3">\n  </span><span class="s1">const pathname = route.replace(/</span><span class="s3">\\</span><span class="s1">/route$/, '')</span><span class="s3">\n\n  </span><span class="s1">const matched =</span><span class="s3">\n    </span><span class="s1">isAppRouteRoute(route) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">isMetadataRouteFile(pathname, [], true) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">// These routes can either be built by static or dynamic entrypoints,</span><span class="s3">\n    </span><span class="s1">// so we assume they're dynamic</span><span class="s3">\n    </span><span class="s1">pathname !== '/robots.txt' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">pathname !== '/manifest.webmanifest' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!pathname.endsWith('/sitemap.xml')</span><span class="s3">\n\n  </span><span class="s1">return matched</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Determine if a page or pathname is a metadata page.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* The input is a page or pathname, which can be with or without page suffix /foo/page or /foo.</span><span class="s3">\n </span><span class="s1">* But it will not contain the /route suffix.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* .e.g</span><span class="s3">\n </span><span class="s1">* /robots -&gt; true</span><span class="s3">\n </span><span class="s1">* /sitemap -&gt; true</span><span class="s3">\n </span><span class="s1">* /foo -&gt; false</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isMetadataPage(page: string) {</span><span class="s3">\n  </span><span class="s1">const matched = !isAppRouteRoute(page) &amp;&amp; isMetadataRouteFile(page, [], false)</span><span class="s3">\n\n  </span><span class="s1">return matched</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n </span><span class="s1">* Determine if a Next.js route is a metadata route.</span><span class="s3">\n </span><span class="s1">* `route` will has a route suffix.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* e.g.</span><span class="s3">\n </span><span class="s1">* /app/robots/route -&gt; true</span><span class="s3">\n </span><span class="s1">* /robots/route -&gt; true</span><span class="s3">\n </span><span class="s1">* /sitemap/[__metadata_id__]/route -&gt; true</span><span class="s3">\n </span><span class="s1">* /app/sitemap/page -&gt; false</span><span class="s3">\n </span><span class="s1">* /icon-a102f4/route -&gt; true</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isMetadataRoute(route: string): boolean {</span><span class="s3">\n  </span><span class="s1">let page = normalizeAppPath(route)</span><span class="s3">\n    </span><span class="s1">.replace(/^</span><span class="s3">\\</span><span class="s1">/?app</span><span class="s3">\\</span><span class="s1">//, '')</span><span class="s3">\n    </span><span class="s1">// Remove the dynamic route id</span><span class="s3">\n    </span><span class="s1">.replace('/[__metadata_id__]', '')</span><span class="s3">\n    </span><span class="s1">// Remove the /route suffix</span><span class="s3">\n    </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">/route$/, '')</span><span class="s3">\n\n  </span><span class="s1">if (page[0] !== '/') page = '/' + page</span><span class="s3">\n\n  </span><span class="s1">const matched = isAppRouteRoute(route) &amp;&amp; isMetadataRouteFile(page, [], false)</span><span class="s3">\n\n  </span><span class="s1">return matched</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DEFAULT_METADATA_ROUTE_EXTENSIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_METADATA_IMAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;getExtensionRegexString&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataPage&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;icon&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;apple&quot;</span><span class="s0">,</span><span class="s1">&quot;favicon&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;staticExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirRelativePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;strictlyMatchExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;variantsMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;groupSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;suffixMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataRouteFilesRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedAppDirRelativePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePathSep&quot;</span><span class="s0">,</span><span class="s1">&quot;matched&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppRouteRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">316</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/isomorphic/path.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* This module is for next.js server internal usage of path module.</span><span class="s3">\n </span><span class="s1">* It will use native path module for nodejs runtime.</span><span class="s3">\n </span><span class="s1">* It will use path-browserify polyfill for edge runtime.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">let path</span><span class="s3">\n\n</span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n  </span><span class="s1">path = require('next/dist/compiled/path-browserify')</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">path = require('path')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">module.exports = path</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;CAIC,GACD,IAAIA;AAEJ,IAAIC,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACLH,OAAOI,QAAQ;AACjB;AAEAC,OAAOC,OAAO,GAAGN&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">331</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/i18n/normalize-locale-path.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export interface PathLocale {</span><span class="s3">\n  </span><span class="s1">detectedLocale?: string</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* A cache of lowercased locales for each list of locales. This is stored as a</span><span class="s3">\n </span><span class="s1">* WeakMap so if the locales are garbage collected, the cache entry will be</span><span class="s3">\n </span><span class="s1">* removed as well.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const cache = new WeakMap&lt;readonly string[], readonly string[]&gt;()</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* For a pathname that may include a locale from a list of locales, it</span><span class="s3">\n </span><span class="s1">* removes the locale from the pathname returning it alongside with the</span><span class="s3">\n </span><span class="s1">* detected locale.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param pathname A pathname that may include a locale.</span><span class="s3">\n </span><span class="s1">* @param locales A list of locales.</span><span class="s3">\n </span><span class="s1">* @returns The detected locale and pathname without locale</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeLocalePath(</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n</span><span class="s1">): PathLocale {</span><span class="s3">\n  </span><span class="s1">// If locales is undefined, return the pathname as is.</span><span class="s3">\n  </span><span class="s1">if (!locales) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// Get the cached lowercased locales or create a new cache entry.</span><span class="s3">\n  </span><span class="s1">let lowercasedLocales = cache.get(locales)</span><span class="s3">\n  </span><span class="s1">if (!lowercasedLocales) {</span><span class="s3">\n    </span><span class="s1">lowercasedLocales = locales.map((locale) =&gt; locale.toLowerCase())</span><span class="s3">\n    </span><span class="s1">cache.set(locales, lowercasedLocales)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let detectedLocale: string | undefined</span><span class="s3">\n\n  </span><span class="s1">// The first segment will be empty, because it has a leading `/`. If</span><span class="s3">\n  </span><span class="s1">// there is no further segment, there is no locale (or it's the default).</span><span class="s3">\n  </span><span class="s1">const segments = pathname.split('/', 2)</span><span class="s3">\n\n  </span><span class="s1">// If there's no second segment (ie, the pathname is just `/`), there's no</span><span class="s3">\n  </span><span class="s1">// locale.</span><span class="s3">\n  </span><span class="s1">if (!segments[1]) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// The second segment will contain the locale part if any.</span><span class="s3">\n  </span><span class="s1">const segment = segments[1].toLowerCase()</span><span class="s3">\n\n  </span><span class="s1">// See if the segment matches one of the locales. If it doesn't, there is</span><span class="s3">\n  </span><span class="s1">// no locale (or it's the default).</span><span class="s3">\n  </span><span class="s1">const index = lowercasedLocales.indexOf(segment)</span><span class="s3">\n  </span><span class="s1">if (index &lt; 0) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// Return the case-sensitive locale.</span><span class="s3">\n  </span><span class="s1">detectedLocale = locales[index]</span><span class="s3">\n\n  </span><span class="s1">// Remove the `/${locale}` part of the pathname.</span><span class="s3">\n  </span><span class="s1">pathname = pathname.slice(detectedLocale.length + 1) || '/'</span><span class="s3">\n\n  </span><span class="s1">return { pathname, detectedLocale }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;lowercasedLocales&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAqBgBA,uBAAAA;;;eAAAA;;;AAhBhB;;;;CAIC,GACD,MAAMC,QAAQ,IAAIC;AAWX,SAASF,oBACdG,QAAgB,EAChBC,OAA2B;IAE3B,sDAAsD;IACtD,IAAI,CAACA,SAAS,OAAO;QAAED;IAAS;IAEhC,iEAAiE;IACjE,IAAIE,oBAAoBJ,MAAMK,GAAG,CAACF;IAClC,IAAI,CAACC,mBAAmB;QACtBA,oBAAoBD,QAAQG,GAAG,CAAC,CAACC,SAAWA,OAAOC,WAAW;QAC9DR,MAAMS,GAAG,CAACN,SAASC;IACrB;IAEA,IAAIM;IAEJ,oEAAoE;IACpE,yEAAyE;IACzE,MAAMC,WAAWT,SAASU,KAAK,CAAC,KAAK;IAErC,0EAA0E;IAC1E,UAAU;IACV,IAAI,CAACD,QAAQ,CAAC,EAAE,EAAE,OAAO;QAAET;IAAS;IAEpC,0DAA0D;IAC1D,MAAMW,UAAUF,QAAQ,CAAC,EAAE,CAACH,WAAW;IAEvC,yEAAyE;IACzE,mCAAmC;IACnC,MAAMM,QAAQV,kBAAkBW,OAAO,CAACF;IACxC,IAAIC,QAAQ,GAAG,OAAO;QAAEZ;IAAS;IAEjC,oCAAoC;IACpCQ,iBAAiBP,OAAO,CAACW,MAAM;IAE/B,gDAAgD;IAChDZ,WAAWA,SAASc,KAAK,CAACN,eAAeO,MAAM,GAAG,MAAM;IAExD,OAAO;QAAEf;QAAUQ;IAAe;AACpC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">385</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/path-to-regexp/index.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;(()=&gt;{</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;if(typeof __nccwpck_require__!==</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">)__nccwpck_require__.ab=__dirname+</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;var e={};(()=&gt;{var n=e;Object.defineProperty(n,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});n.pathToRegexp=n.tokensToRegexp=n.regexpToFunction=n.match=n.tokensToFunction=n.compile=n.parse=void 0;function lexer(e){var n=[];var r=0;while(r&lt;e.length){var t=e[r];if(t===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">||t===</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">||t===</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">){n.push({type:</span><span class="s3">\&quot;</span><span class="s1">MODIFIER</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:e[r++]});continue}if(t===</span><span class="s3">\&quot;\\\\\&quot;</span><span class="s1">){n.push({type:</span><span class="s3">\&quot;</span><span class="s1">ESCAPED_CHAR</span><span class="s3">\&quot;</span><span class="s1">,index:r++,value:e[r++]});continue}if(t===</span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">){n.push({type:</span><span class="s3">\&quot;</span><span class="s1">OPEN</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:e[r++]});continue}if(t===</span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">){n.push({type:</span><span class="s3">\&quot;</span><span class="s1">CLOSE</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:e[r++]});continue}if(t===</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">){var a=</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var i=r+1;while(i&lt;e.length){var o=e.charCodeAt(i);if(o&gt;=48&amp;&amp;o&lt;=57||o&gt;=65&amp;&amp;o&lt;=90||o&gt;=97&amp;&amp;o&lt;=122||o===95){a+=e[i++];continue}break}if(!a)throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">Missing parameter name at </span><span class="s3">\&quot;</span><span class="s1">.concat(r));n.push({type:</span><span class="s3">\&quot;</span><span class="s1">NAME</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:a});r=i;continue}if(t===</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">){var c=1;var f=</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var i=r+1;if(e[i]===</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError('Pattern cannot start with </span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">at '.concat(i))}while(i&lt;e.length){if(e[i]===</span><span class="s3">\&quot;\\\\\&quot;</span><span class="s1">){f+=e[i++]+e[i++];continue}if(e[i]===</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">){c--;if(c===0){i++;break}}else if(e[i]===</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">){c++;if(e[i+1]!==</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">Capturing groups are not allowed at </span><span class="s3">\&quot;</span><span class="s1">.concat(i))}}f+=e[i++]}if(c)throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">Unbalanced pattern at </span><span class="s3">\&quot;</span><span class="s1">.concat(r));if(!f)throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">Missing pattern at </span><span class="s3">\&quot;</span><span class="s1">.concat(r));n.push({type:</span><span class="s3">\&quot;</span><span class="s1">PATTERN</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:f});r=i;continue}n.push({type:</span><span class="s3">\&quot;</span><span class="s1">CHAR</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:e[r++]})}n.push({type:</span><span class="s3">\&quot;</span><span class="s1">END</span><span class="s3">\&quot;</span><span class="s1">,index:r,value:</span><span class="s3">\&quot;\&quot;</span><span class="s1">});return n}function parse(e,n){if(n===void 0){n={}}var r=lexer(e);var t=n.prefixes,a=t===void 0?</span><span class="s3">\&quot;</span><span class="s1">./</span><span class="s3">\&quot;</span><span class="s1">:t,i=n.delimiter,o=i===void 0?</span><span class="s3">\&quot;</span><span class="s1">/#?</span><span class="s3">\&quot;</span><span class="s1">:i;var c=[];var f=0;var u=0;var p=</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var tryConsume=function(e){if(u&lt;r.length&amp;&amp;r[u].type===e)return r[u++].value};var mustConsume=function(e){var n=tryConsume(e);if(n!==undefined)return n;var t=r[u],a=t.type,i=t.index;throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">Unexpected </span><span class="s3">\&quot;</span><span class="s1">.concat(a,</span><span class="s3">\&quot; </span><span class="s1">at </span><span class="s3">\&quot;</span><span class="s1">).concat(i,</span><span class="s3">\&quot;</span><span class="s1">, expected </span><span class="s3">\&quot;</span><span class="s1">).concat(e))};var consumeText=function(){var e=</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var n;while(n=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">CHAR</span><span class="s3">\&quot;</span><span class="s1">)||tryConsume(</span><span class="s3">\&quot;</span><span class="s1">ESCAPED_CHAR</span><span class="s3">\&quot;</span><span class="s1">)){e+=n}return e};var isSafe=function(e){for(var n=0,r=o;n&lt;r.length;n++){var t=r[n];if(e.indexOf(t)&gt;-1)return true}return false};var safePattern=function(e){var n=c[c.length-1];var r=e||(n&amp;&amp;typeof n===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">?n:</span><span class="s3">\&quot;\&quot;</span><span class="s1">);if(n&amp;&amp;!r){throw new TypeError('Must have text between two parameters, missing text after </span><span class="s3">\&quot;</span><span class="s1">'.concat(n.name,'</span><span class="s3">\&quot;</span><span class="s1">'))}if(!r||isSafe(r))return</span><span class="s3">\&quot;</span><span class="s1">[^</span><span class="s3">\&quot;</span><span class="s1">.concat(escapeString(o),</span><span class="s3">\&quot;</span><span class="s1">]+?</span><span class="s3">\&quot;</span><span class="s1">);return</span><span class="s3">\&quot;</span><span class="s1">(?:(?!</span><span class="s3">\&quot;</span><span class="s1">.concat(escapeString(r),</span><span class="s3">\&quot;</span><span class="s1">)[^</span><span class="s3">\&quot;</span><span class="s1">).concat(escapeString(o),</span><span class="s3">\&quot;</span><span class="s1">])+?</span><span class="s3">\&quot;</span><span class="s1">)};while(u&lt;r.length){var v=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">CHAR</span><span class="s3">\&quot;</span><span class="s1">);var s=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">NAME</span><span class="s3">\&quot;</span><span class="s1">);var d=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">PATTERN</span><span class="s3">\&quot;</span><span class="s1">);if(s||d){var g=v||</span><span class="s3">\&quot;\&quot;</span><span class="s1">;if(a.indexOf(g)===-1){p+=g;g=</span><span class="s3">\&quot;\&quot;</span><span class="s1">}if(p){c.push(p);p=</span><span class="s3">\&quot;\&quot;</span><span class="s1">}c.push({name:s||f++,prefix:g,suffix:</span><span class="s3">\&quot;\&quot;</span><span class="s1">,pattern:d||safePattern(g),modifier:tryConsume(</span><span class="s3">\&quot;</span><span class="s1">MODIFIER</span><span class="s3">\&quot;</span><span class="s1">)||</span><span class="s3">\&quot;\&quot;</span><span class="s1">});continue}var x=v||tryConsume(</span><span class="s3">\&quot;</span><span class="s1">ESCAPED_CHAR</span><span class="s3">\&quot;</span><span class="s1">);if(x){p+=x;continue}if(p){c.push(p);p=</span><span class="s3">\&quot;\&quot;</span><span class="s1">}var h=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">OPEN</span><span class="s3">\&quot;</span><span class="s1">);if(h){var g=consumeText();var l=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">NAME</span><span class="s3">\&quot;</span><span class="s1">)||</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var m=tryConsume(</span><span class="s3">\&quot;</span><span class="s1">PATTERN</span><span class="s3">\&quot;</span><span class="s1">)||</span><span class="s3">\&quot;\&quot;</span><span class="s1">;var T=consumeText();mustConsume(</span><span class="s3">\&quot;</span><span class="s1">CLOSE</span><span class="s3">\&quot;</span><span class="s1">);c.push({name:l||(m?f++:</span><span class="s3">\&quot;\&quot;</span><span class="s1">),pattern:l&amp;&amp;!m?safePattern(g):m,prefix:g,suffix:T,modifier:tryConsume(</span><span class="s3">\&quot;</span><span class="s1">MODIFIER</span><span class="s3">\&quot;</span><span class="s1">)||</span><span class="s3">\&quot;\&quot;</span><span class="s1">});continue}mustConsume(</span><span class="s3">\&quot;</span><span class="s1">END</span><span class="s3">\&quot;</span><span class="s1">)}return c}n.parse=parse;function compile(e,n){return tokensToFunction(parse(e,n),n)}n.compile=compile;function tokensToFunction(e,n){if(n===void 0){n={}}var r=flags(n);var t=n.encode,a=t===void 0?function(e){return e}:t,i=n.validate,o=i===void 0?true:i;var c=e.map((function(e){if(typeof e===</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">){return new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(e.pattern,</span><span class="s3">\&quot;</span><span class="s1">)$</span><span class="s3">\&quot;</span><span class="s1">),r)}}));return function(n){var r=</span><span class="s3">\&quot;\&quot;</span><span class="s1">;for(var t=0;t&lt;e.length;t++){var i=e[t];if(typeof i===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">){r+=i;continue}var f=n?n[i.name]:undefined;var u=i.modifier===</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">||i.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">;var p=i.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">||i.modifier===</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">;if(Array.isArray(f)){if(!p){throw new TypeError('Expected </span><span class="s3">\&quot;</span><span class="s1">'.concat(i.name,'</span><span class="s3">\&quot; </span><span class="s1">to not repeat, but got an array'))}if(f.length===0){if(u)continue;throw new TypeError('Expected </span><span class="s3">\&quot;</span><span class="s1">'.concat(i.name,'</span><span class="s3">\&quot; </span><span class="s1">to not be empty'))}for(var v=0;v&lt;f.length;v++){var s=a(f[v],i);if(o&amp;&amp;!c[t].test(s)){throw new TypeError('Expected all </span><span class="s3">\&quot;</span><span class="s1">'.concat(i.name,'</span><span class="s3">\&quot; </span><span class="s1">to match </span><span class="s3">\&quot;</span><span class="s1">').concat(i.pattern,'</span><span class="s3">\&quot;</span><span class="s1">, but got </span><span class="s3">\&quot;</span><span class="s1">').concat(s,'</span><span class="s3">\&quot;</span><span class="s1">'))}r+=i.prefix+s+i.suffix}continue}if(typeof f===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">||typeof f===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">){var s=a(String(f),i);if(o&amp;&amp;!c[t].test(s)){throw new TypeError('Expected </span><span class="s3">\&quot;</span><span class="s1">'.concat(i.name,'</span><span class="s3">\&quot; </span><span class="s1">to match </span><span class="s3">\&quot;</span><span class="s1">').concat(i.pattern,'</span><span class="s3">\&quot;</span><span class="s1">, but got </span><span class="s3">\&quot;</span><span class="s1">').concat(s,'</span><span class="s3">\&quot;</span><span class="s1">'))}r+=i.prefix+s+i.suffix;continue}if(u)continue;var d=p?</span><span class="s3">\&quot;</span><span class="s1">an array</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">a string</span><span class="s3">\&quot;</span><span class="s1">;throw new TypeError('Expected </span><span class="s3">\&quot;</span><span class="s1">'.concat(i.name,'</span><span class="s3">\&quot; </span><span class="s1">to be ').concat(d))}return r}}n.tokensToFunction=tokensToFunction;function match(e,n){var r=[];var t=pathToRegexp(e,r,n);return regexpToFunction(t,r,n)}n.match=match;function regexpToFunction(e,n,r){if(r===void 0){r={}}var t=r.decode,a=t===void 0?function(e){return e}:t;return function(r){var t=e.exec(r);if(!t)return false;var i=t[0],o=t.index;var c=Object.create(null);var _loop_1=function(e){if(t[e]===undefined)return</span><span class="s3">\&quot;</span><span class="s1">continue</span><span class="s3">\&quot;</span><span class="s1">;var r=n[e-1];if(r.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">||r.modifier===</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">){c[r.name]=t[e].split(r.prefix+r.suffix).map((function(e){return a(e,r)}))}else{c[r.name]=a(t[e],r)}};for(var f=1;f&lt;t.length;f++){_loop_1(f)}return{path:i,index:o,params:c}}}n.regexpToFunction=regexpToFunction;function escapeString(e){return e.replace(/([.+*?=^!:${}()[</span><span class="s3">\\</span><span class="s1">]|/</span><span class="s3">\\\\</span><span class="s1">])/g,</span><span class="s3">\&quot;\\\\</span><span class="s1">$1</span><span class="s3">\&quot;</span><span class="s1">)}function flags(e){return e&amp;&amp;e.sensitive?</span><span class="s3">\&quot;\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">i</span><span class="s3">\&quot;</span><span class="s1">}function regexpToRegexp(e,n){if(!n)return e;var r=/</span><span class="s3">\\</span><span class="s1">((?:</span><span class="s3">\\</span><span class="s1">?&lt;(.*?)&gt;)?(?!</span><span class="s3">\\</span><span class="s1">?)/g;var t=0;var a=r.exec(e.source);while(a){n.push({name:a[1]||t++,prefix:</span><span class="s3">\&quot;\&quot;</span><span class="s1">,suffix:</span><span class="s3">\&quot;\&quot;</span><span class="s1">,modifier:</span><span class="s3">\&quot;\&quot;</span><span class="s1">,pattern:</span><span class="s3">\&quot;\&quot;</span><span class="s1">});a=r.exec(e.source)}return e}function arrayToRegexp(e,n,r){var t=e.map((function(e){return pathToRegexp(e,n,r).source}));return new RegExp(</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(t.join(</span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">),flags(r))}function stringToRegexp(e,n,r){return tokensToRegexp(parse(e,r),n,r)}function tokensToRegexp(e,n,r){if(r===void 0){r={}}var t=r.strict,a=t===void 0?false:t,i=r.start,o=i===void 0?true:i,c=r.end,f=c===void 0?true:c,u=r.encode,p=u===void 0?function(e){return e}:u,v=r.delimiter,s=v===void 0?</span><span class="s3">\&quot;</span><span class="s1">/#?</span><span class="s3">\&quot;</span><span class="s1">:v,d=r.endsWith,g=d===void 0?</span><span class="s3">\&quot;\&quot;</span><span class="s1">:d;var x=</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">.concat(escapeString(g),</span><span class="s3">\&quot;</span><span class="s1">]|$</span><span class="s3">\&quot;</span><span class="s1">);var h=</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">.concat(escapeString(s),</span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">);var l=o?</span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;\&quot;</span><span class="s1">;for(var m=0,T=e;m&lt;T.length;m++){var E=T[m];if(typeof E===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">){l+=escapeString(p(E))}else{var w=escapeString(p(E.prefix));var y=escapeString(p(E.suffix));if(E.pattern){if(n)n.push(E);if(w||y){if(E.modifier===</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">||E.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">){var R=E.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;\&quot;</span><span class="s1">;l+=</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(w,</span><span class="s3">\&quot;</span><span class="s1">((?:</span><span class="s3">\&quot;</span><span class="s1">).concat(E.pattern,</span><span class="s3">\&quot;</span><span class="s1">)(?:</span><span class="s3">\&quot;</span><span class="s1">).concat(y).concat(w,</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">).concat(E.pattern,</span><span class="s3">\&quot;</span><span class="s1">))*)</span><span class="s3">\&quot;</span><span class="s1">).concat(y,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">).concat(R)}else{l+=</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(w,</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">).concat(E.pattern,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">).concat(y,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">).concat(E.modifier)}}else{if(E.modifier===</span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">||E.modifier===</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError('Can not repeat </span><span class="s3">\&quot;</span><span class="s1">'.concat(E.name,'</span><span class="s3">\&quot; </span><span class="s1">without a prefix and suffix'))}l+=</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">.concat(E.pattern,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">).concat(E.modifier)}}else{l+=</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(w).concat(y,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">).concat(E.modifier)}}}if(f){if(!a)l+=</span><span class="s3">\&quot;\&quot;</span><span class="s1">.concat(h,</span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot;</span><span class="s1">);l+=!r.endsWith?</span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">(?=</span><span class="s3">\&quot;</span><span class="s1">.concat(x,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">)}else{var A=e[e.length-1];var _=typeof A===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">?h.indexOf(A[A.length-1])&gt;-1:A===undefined;if(!a){l+=</span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\&quot;</span><span class="s1">.concat(h,</span><span class="s3">\&quot;</span><span class="s1">(?=</span><span class="s3">\&quot;</span><span class="s1">).concat(x,</span><span class="s3">\&quot;</span><span class="s1">))?</span><span class="s3">\&quot;</span><span class="s1">)}if(!_){l+=</span><span class="s3">\&quot;</span><span class="s1">(?=</span><span class="s3">\&quot;</span><span class="s1">.concat(h,</span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;</span><span class="s1">).concat(x,</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot;</span><span class="s1">)}}return new RegExp(l,flags(r))}n.tokensToRegexp=tokensToRegexp;function pathToRegexp(e,n,r){if(e instanceof RegExp)return regexpToRegexp(e,n);if(Array.isArray(e))return arrayToRegexp(e,n,r);return stringToRegexp(e,n,r)}n.pathToRegexp=pathToRegexp})();module.exports=e})();&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">796</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/path-match.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Key } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n</span><span class="s1">import { regexpToFunction } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n</span><span class="s1">import { pathToRegexp } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n\n</span><span class="s1">interface Options {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A transformer function that will be applied to the regexp generated</span><span class="s3">\n   </span><span class="s1">* from the provided path and path-to-regexp.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">regexModifier?: (regex: string) =&gt; string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true the function will remove all unnamed parameters</span><span class="s3">\n   </span><span class="s1">* from the matched parameters.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">removeUnnamedParams?: boolean</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true the regexp won't allow an optional trailing delimiter</span><span class="s3">\n   </span><span class="s1">* to match.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">strict?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true the matcher will be case-sensitive, defaults to false</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">sensitive?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type PatchMatcher = (</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">params?: Record&lt;string, any&gt;</span><span class="s3">\n</span><span class="s1">) =&gt; Record&lt;string, any&gt; | false</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Generates a path matcher function for a given path and options based on</span><span class="s3">\n </span><span class="s1">* path-to-regexp. By default the match will be case insensitive, non strict</span><span class="s3">\n </span><span class="s1">* and delimited by `/`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getPathMatch(path: string, options?: Options): PatchMatcher {</span><span class="s3">\n  </span><span class="s1">const keys: Key[] = []</span><span class="s3">\n  </span><span class="s1">const regexp = pathToRegexp(path, keys, {</span><span class="s3">\n    </span><span class="s1">delimiter: '/',</span><span class="s3">\n    </span><span class="s1">sensitive:</span><span class="s3">\n      </span><span class="s1">typeof options?.sensitive === 'boolean' ? options.sensitive : false,</span><span class="s3">\n    </span><span class="s1">strict: options?.strict,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const matcher = regexpToFunction&lt;Record&lt;string, any&gt;&gt;(</span><span class="s3">\n    </span><span class="s1">options?.regexModifier</span><span class="s3">\n      </span><span class="s1">? new RegExp(options.regexModifier(regexp.source), regexp.flags)</span><span class="s3">\n      </span><span class="s1">: regexp,</span><span class="s3">\n    </span><span class="s1">keys</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A matcher function that will check if a given pathname matches the path</span><span class="s3">\n   </span><span class="s1">* given in the builder function. When the path does not match it will return</span><span class="s3">\n   </span><span class="s1">* `false` but if it does it will return an object with the matched params</span><span class="s3">\n   </span><span class="s1">* merged with the params provided in the second argument.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">return (pathname, params) =&gt; {</span><span class="s3">\n    </span><span class="s1">// If no pathname is provided it's not a match.</span><span class="s3">\n    </span><span class="s1">if (typeof pathname !== 'string') return false</span><span class="s3">\n\n    </span><span class="s1">const match = matcher(pathname)</span><span class="s3">\n\n    </span><span class="s1">// If the path did not match `false` will be returned.</span><span class="s3">\n    </span><span class="s1">if (!match) return false</span><span class="s3">\n\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* If unnamed params are not allowed they must be removed from</span><span class="s3">\n     </span><span class="s1">* the matched parameters. path-to-regexp uses </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">for named and</span><span class="s3">\n     </span><span class="s1">* </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">for unnamed parameters.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">if (options?.removeUnnamedParams) {</span><span class="s3">\n      </span><span class="s1">for (const key of keys) {</span><span class="s3">\n        </span><span class="s1">if (typeof key.name === 'number') {</span><span class="s3">\n          </span><span class="s1">delete match.params[key.name]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return { ...params, ...match.params }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getPathMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;regexp&quot;</span><span class="s0">,</span><span class="s1">&quot;pathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;delimiter&quot;</span><span class="s0">,</span><span class="s1">&quot;sensitive&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;regexpToFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;regexModifier&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;flags&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;removeUnnamedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAqCgBA,gBAAAA;;;eAAAA;;;8BApCiB;AAoC1B,SAASA,aAAaC,IAAY,EAAEC,OAAiB;IAC1D,MAAMC,OAAc,EAAE;IACtB,MAAMC,SAASC,CAAAA,GAAAA,cAAAA,YAAY,EAACJ,MAAME,MAAM;QACtCG,WAAW;QACXC,WACE,OAAA,CAAOL,WAAAA,OAAAA,KAAAA,IAAAA,QAASK,SAAS,MAAK,YAAYL,QAAQK,SAAS,GAAG;QAChEC,MAAM,EAAEN,WAAAA,OAAAA,KAAAA,IAAAA,QAASM,MAAM;IACzB;IAEA,MAAMC,UAAUC,CAAAA,GAAAA,cAAAA,gBAAgB,EAC9BR,CAAAA,WAAAA,OAAAA,KAAAA,IAAAA,QAASS,aAAa,IAClB,IAAIC,OAAOV,QAAQS,aAAa,CAACP,OAAOS,MAAM,GAAGT,OAAOU,KAAK,IAC7DV,QACJD;IAGF;;;;;GAKC,GACD,OAAO,CAACY,UAAUC;QAChB,+CAA+C;QAC/C,IAAI,OAAOD,aAAa,UAAU,OAAO;QAEzC,MAAME,QAAQR,QAAQM;QAEtB,sDAAsD;QACtD,IAAI,CAACE,OAAO,OAAO;QAEnB;;;;KAIC,GACD,IAAIf,WAAAA,OAAAA,KAAAA,IAAAA,QAASgB,mBAAmB,EAAE;YAChC,KAAK,MAAMC,OAAOhB,KAAM;gBACtB,IAAI,OAAOgB,IAAIC,IAAI,KAAK,UAAU;oBAChC,OAAOH,MAAMD,MAAM,CAACG,IAAIC,IAAI,CAAC;gBAC/B;YACF;QACF;QAEA,OAAO;YAAE,GAAGJ,MAAM;YAAE,GAAGC,MAAMD,MAAM;QAAC;IACtC;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">846</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/constants.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ServerRuntime } from '../types'</span><span class="s3">\n\n</span><span class="s1">export const TEXT_PLAIN_CONTENT_TYPE_HEADER = 'text/plain'</span><span class="s3">\n</span><span class="s1">export const HTML_CONTENT_TYPE_HEADER = 'text/html; charset=utf-8'</span><span class="s3">\n</span><span class="s1">export const JSON_CONTENT_TYPE_HEADER = 'application/json; charset=utf-8'</span><span class="s3">\n</span><span class="s1">export const NEXT_QUERY_PARAM_PREFIX = 'nxtP'</span><span class="s3">\n</span><span class="s1">export const NEXT_INTERCEPTION_MARKER_PREFIX = 'nxtI'</span><span class="s3">\n\n</span><span class="s1">export const MATCHED_PATH_HEADER = 'x-matched-path'</span><span class="s3">\n</span><span class="s1">export const PRERENDER_REVALIDATE_HEADER = 'x-prerender-revalidate'</span><span class="s3">\n</span><span class="s1">export const PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER =</span><span class="s3">\n  </span><span class="s1">'x-prerender-revalidate-if-generated'</span><span class="s3">\n\n</span><span class="s1">export const RSC_PREFETCH_SUFFIX = '.prefetch.rsc'</span><span class="s3">\n</span><span class="s1">export const RSC_SEGMENTS_DIR_SUFFIX = '.segments'</span><span class="s3">\n</span><span class="s1">export const RSC_SEGMENT_SUFFIX = '.segment.rsc'</span><span class="s3">\n</span><span class="s1">export const RSC_SUFFIX = '.rsc'</span><span class="s3">\n</span><span class="s1">export const ACTION_SUFFIX = '.action'</span><span class="s3">\n</span><span class="s1">export const NEXT_DATA_SUFFIX = '.json'</span><span class="s3">\n</span><span class="s1">export const NEXT_META_SUFFIX = '.meta'</span><span class="s3">\n</span><span class="s1">export const NEXT_BODY_SUFFIX = '.body'</span><span class="s3">\n\n</span><span class="s1">export const NEXT_CACHE_TAGS_HEADER = 'x-next-cache-tags'</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_REVALIDATED_TAGS_HEADER = 'x-next-revalidated-tags'</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER =</span><span class="s3">\n  </span><span class="s1">'x-next-revalidate-tag-token'</span><span class="s3">\n\n</span><span class="s1">export const NEXT_RESUME_HEADER = 'next-resume'</span><span class="s3">\n\n</span><span class="s1">// if these change make sure we update the related</span><span class="s3">\n</span><span class="s1">// documentation as well</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_TAG_MAX_ITEMS = 128</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_TAG_MAX_LENGTH = 256</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_SOFT_TAG_MAX_LENGTH = 1024</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_IMPLICIT_TAG_ID = '_N_T_'</span><span class="s3">\n\n</span><span class="s1">// in seconds</span><span class="s3">\n</span><span class="s1">export const CACHE_ONE_YEAR = 31536000</span><span class="s3">\n\n</span><span class="s1">// in seconds, represents revalidate=false. I.e. never revaliate.</span><span class="s3">\n</span><span class="s1">// We use this value since it can be represented as a V8 SMI for optimal performance.</span><span class="s3">\n</span><span class="s1">// It can also be serialized as JSON if it ever leaks accidentally as an actual value.</span><span class="s3">\n</span><span class="s1">export const INFINITE_CACHE = 0xfffffffe</span><span class="s3">\n\n</span><span class="s1">// Patterns to detect middleware files</span><span class="s3">\n</span><span class="s1">export const MIDDLEWARE_FILENAME = 'middleware'</span><span class="s3">\n</span><span class="s1">export const MIDDLEWARE_LOCATION_REGEXP = `(?:src/)?${MIDDLEWARE_FILENAME}`</span><span class="s3">\n\n</span><span class="s1">// Pattern to detect instrumentation hooks file</span><span class="s3">\n</span><span class="s1">export const INSTRUMENTATION_HOOK_FILENAME = 'instrumentation'</span><span class="s3">\n\n</span><span class="s1">// Because on Windows absolute paths in the generated code can break because of numbers, eg 1 in the path,</span><span class="s3">\n</span><span class="s1">// we have to use a private alias</span><span class="s3">\n</span><span class="s1">export const PAGES_DIR_ALIAS = 'private-next-pages'</span><span class="s3">\n</span><span class="s1">export const DOT_NEXT_ALIAS = 'private-dot-next'</span><span class="s3">\n</span><span class="s1">export const ROOT_DIR_ALIAS = 'private-next-root-dir'</span><span class="s3">\n</span><span class="s1">export const APP_DIR_ALIAS = 'private-next-app-dir'</span><span class="s3">\n</span><span class="s1">export const RSC_MOD_REF_PROXY_ALIAS = 'private-next-rsc-mod-ref-proxy'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_VALIDATE_ALIAS = 'private-next-rsc-action-validate'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_PROXY_ALIAS = 'private-next-rsc-server-reference'</span><span class="s3">\n</span><span class="s1">export const RSC_CACHE_WRAPPER_ALIAS = 'private-next-rsc-cache-wrapper'</span><span class="s3">\n</span><span class="s1">export const RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS =</span><span class="s3">\n  </span><span class="s1">'private-next-rsc-track-dynamic-import'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_ENCRYPTION_ALIAS = 'private-next-rsc-action-encryption'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_CLIENT_WRAPPER_ALIAS =</span><span class="s3">\n  </span><span class="s1">'private-next-rsc-action-client-wrapper'</span><span class="s3">\n\n</span><span class="s1">export const PUBLIC_DIR_MIDDLEWARE_CONFLICT = `You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict`</span><span class="s3">\n\n</span><span class="s1">export const SSG_GET_INITIAL_PROPS_CONFLICT = `You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_GET_INIT_PROPS_CONFLICT = `You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_SSG_CONFLICT = `You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps`</span><span class="s3">\n\n</span><span class="s1">export const STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR = `can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_EXPORT_ERROR = `pages with </span><span class="s3">\\</span><span class="s1">`getServerSideProps</span><span class="s3">\\</span><span class="s1">` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export`</span><span class="s3">\n\n</span><span class="s1">export const GSP_NO_RETURNED_VALUE =</span><span class="s3">\n  </span><span class="s1">'Your `getStaticProps` function did not return an object. Did you forget to add a `return`?'</span><span class="s3">\n</span><span class="s1">export const GSSP_NO_RETURNED_VALUE =</span><span class="s3">\n  </span><span class="s1">'Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?'</span><span class="s3">\n\n</span><span class="s1">export const UNSTABLE_REVALIDATE_RENAME_ERROR =</span><span class="s3">\n  </span><span class="s1">'The `unstable_revalidate` property is available for general use.</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n  </span><span class="s1">'Please use `revalidate` instead.'</span><span class="s3">\n\n</span><span class="s1">export const GSSP_COMPONENT_MEMBER_ERROR = `can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member`</span><span class="s3">\n\n</span><span class="s1">export const NON_STANDARD_NODE_ENV = `You are using a non-standard </span><span class="s3">\&quot;</span><span class="s1">NODE_ENV</span><span class="s3">\&quot; </span><span class="s1">value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env`</span><span class="s3">\n\n</span><span class="s1">export const SSG_FALLBACK_EXPORT_ERROR = `Pages with </span><span class="s3">\\</span><span class="s1">`fallback</span><span class="s3">\\</span><span class="s1">` enabled in </span><span class="s3">\\</span><span class="s1">`getStaticPaths</span><span class="s3">\\</span><span class="s1">` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export`</span><span class="s3">\n\n</span><span class="s1">export const ESLINT_DEFAULT_DIRS = ['app', 'pages', 'components', 'lib', 'src']</span><span class="s3">\n\n</span><span class="s1">export const SERVER_RUNTIME: Record&lt;string, ServerRuntime&gt; = {</span><span class="s3">\n  </span><span class="s1">edge: 'edge',</span><span class="s3">\n  </span><span class="s1">experimentalEdge: 'experimental-edge',</span><span class="s3">\n  </span><span class="s1">nodejs: 'nodejs',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The names of the webpack layers. These layers are the primitives for the</span><span class="s3">\n </span><span class="s1">* webpack chunks.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const WEBPACK_LAYERS_NAMES = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the shared code between the client and server bundles.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">shared: 'shared',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for server-only runtime and picking up `react-server` export conditions.</span><span class="s3">\n   </span><span class="s1">* Including app router RSC pages and app router custom routes and metadata routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">reactServerComponents: 'rsc',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Server Side Rendering layer for app (ssr).</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">serverSideRendering: 'ssr',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for actions.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">actionBrowser: 'action-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Node.js bundle layer for the API routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">apiNode: 'api-node',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Edge Lite bundle layer for the API routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">apiEdge: 'api-edge',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the middleware code.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">middleware: 'middleware',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the instrumentation hooks.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">instrument: 'instrument',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for assets on the edge.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">edgeAsset: 'edge-asset',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for App directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">appPagesBrowser: 'app-pages-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirBrowser: 'pages-dir-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Edge Lite bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirEdge: 'pages-dir-edge',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Node.js bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirNode: 'pages-dir-node',</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">export type WebpackLayerName =</span><span class="s3">\n  </span><span class="s1">(typeof WEBPACK_LAYERS_NAMES)[keyof typeof WEBPACK_LAYERS_NAMES]</span><span class="s3">\n\n</span><span class="s1">const WEBPACK_LAYERS = {</span><span class="s3">\n  </span><span class="s1">...WEBPACK_LAYERS_NAMES,</span><span class="s3">\n  </span><span class="s1">GROUP: {</span><span class="s3">\n    </span><span class="s1">builtinReact: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">serverOnly: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.instrument,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.middleware,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">neutralTarget: [</span><span class="s3">\n      </span><span class="s1">// pages api</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.apiNode,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.apiEdge,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">clientOnly: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">bundled: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.shared,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.instrument,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.middleware,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">appPages: [</span><span class="s3">\n      </span><span class="s1">// app router pages and layouts</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const WEBPACK_RESOURCE_QUERIES = {</span><span class="s3">\n  </span><span class="s1">edgeSSREntry: '__next_edge_ssr_entry__',</span><span class="s3">\n  </span><span class="s1">metadata: '__next_metadata__',</span><span class="s3">\n  </span><span class="s1">metadataRoute: '__next_metadata_route__',</span><span class="s3">\n  </span><span class="s1">metadataImageMeta: '__next_metadata_image_meta__',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { WEBPACK_LAYERS, WEBPACK_RESOURCE_QUERIES }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ACTION_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;CACHE_ONE_YEAR&quot;</span><span class="s0">,</span><span class="s1">&quot;DOT_NEXT_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;ESLINT_DEFAULT_DIRS&quot;</span><span class="s0">,</span><span class="s1">&quot;GSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_COMPONENT_MEMBER_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;INFINITE_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;INSTRUMENTATION_HOOK_FILENAME&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;MATCHED_PATH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_FILENAME&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_LOCATION_REGEXP&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_BODY_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_IMPLICIT_TAG_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATED_TAGS_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_SOFT_TAG_MAX_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAGS_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_ITEMS&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_DATA_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_META_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RESUME_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NON_STANDARD_NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_REVALIDATE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;PUBLIC_DIR_MIDDLEWARE_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_CLIENT_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_ENCRYPTION_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_PROXY_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_VALIDATE_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_CACHE_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_MOD_REF_PROXY_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_PREFETCH_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SEGMENTS_DIR_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SEGMENT_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_EXPORT_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_GET_INIT_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_SSG_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;SSG_FALLBACK_EXPORT_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;SSG_GET_INITIAL_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;TEXT_PLAIN_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;UNSTABLE_REVALIDATE_RENAME_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_RESOURCE_QUERIES&quot;</span><span class="s0">,</span><span class="s1">&quot;edge&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;nodejs&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;shared&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;serverSideRendering&quot;</span><span class="s0">,</span><span class="s1">&quot;actionBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;apiNode&quot;</span><span class="s0">,</span><span class="s1">&quot;apiEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;instrument&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;appPagesBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirNode&quot;</span><span class="s0">,</span><span class="s1">&quot;GROUP&quot;</span><span class="s0">,</span><span class="s1">&quot;builtinReact&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;neutralTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;clientOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;bundled&quot;</span><span class="s0">,</span><span class="s1">&quot;appPages&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeSSREntry&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataImageMeta&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1242</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/interception-routes.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { normalizeAppPath } from './app-paths'</span><span class="s3">\n\n</span><span class="s1">// order matters here, the first match will be used</span><span class="s3">\n</span><span class="s1">export const INTERCEPTION_ROUTE_MARKERS = [</span><span class="s3">\n  </span><span class="s1">'(..)(..)',</span><span class="s3">\n  </span><span class="s1">'(.)',</span><span class="s3">\n  </span><span class="s1">'(..)',</span><span class="s3">\n  </span><span class="s1">'(...)',</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n\n</span><span class="s1">export function isInterceptionRouteAppPath(path: string): boolean {</span><span class="s3">\n  </span><span class="s1">// TODO-APP: add more serious validation</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">path</span><span class="s3">\n      </span><span class="s1">.split('/')</span><span class="s3">\n      </span><span class="s1">.find((segment) =&gt;</span><span class="s3">\n        </span><span class="s1">INTERCEPTION_ROUTE_MARKERS.find((m) =&gt; segment.startsWith(m))</span><span class="s3">\n      </span><span class="s1">) !== undefined</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function extractInterceptionRouteInformation(path: string) {</span><span class="s3">\n  </span><span class="s1">let interceptingRoute: string | undefined,</span><span class="s3">\n    </span><span class="s1">marker: (typeof INTERCEPTION_ROUTE_MARKERS)[number] | undefined,</span><span class="s3">\n    </span><span class="s1">interceptedRoute: string | undefined</span><span class="s3">\n\n  </span><span class="s1">for (const segment of path.split('/')) {</span><span class="s3">\n    </span><span class="s1">marker = INTERCEPTION_ROUTE_MARKERS.find((m) =&gt; segment.startsWith(m))</span><span class="s3">\n    </span><span class="s1">if (marker) {</span><span class="s3">\n      </span><span class="s1">;[interceptingRoute, interceptedRoute] = path.split(marker, 2)</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!interceptingRoute || !marker || !interceptedRoute) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Invalid interception route: ${path}. Must be in the format /&lt;intercepting route&gt;/(..|...|..)(..)/&lt;intercepted route&gt;`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">interceptingRoute = normalizeAppPath(interceptingRoute) // normalize the path, e.g. /(blog)/feed -&gt; /feed</span><span class="s3">\n\n  </span><span class="s1">switch (marker) {</span><span class="s3">\n    </span><span class="s1">case '(.)':</span><span class="s3">\n      </span><span class="s1">// (.) indicates that we should match with sibling routes, so we just need to append the intercepted route to the intercepting route</span><span class="s3">\n      </span><span class="s1">if (interceptingRoute === '/') {</span><span class="s3">\n        </span><span class="s1">interceptedRoute = `/${interceptedRoute}`</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">interceptedRoute = interceptingRoute + '/' + interceptedRoute</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">case '(..)':</span><span class="s3">\n      </span><span class="s1">// (..) indicates that we should match at one level up, so we need to remove the last segment of the intercepting route</span><span class="s3">\n      </span><span class="s1">if (interceptingRoute === '/') {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`Invalid interception route: ${path}. Cannot use (..) marker at the root level, use (.) instead.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">interceptedRoute = interceptingRoute</span><span class="s3">\n        </span><span class="s1">.split('/')</span><span class="s3">\n        </span><span class="s1">.slice(0, -1)</span><span class="s3">\n        </span><span class="s1">.concat(interceptedRoute)</span><span class="s3">\n        </span><span class="s1">.join('/')</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">case '(...)':</span><span class="s3">\n      </span><span class="s1">// (...) will match the route segment in the root directory, so we need to use the root directory to prepend the intercepted route</span><span class="s3">\n      </span><span class="s1">interceptedRoute = '/' + interceptedRoute</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">case '(..)(..)':</span><span class="s3">\n      </span><span class="s1">// (..)(..) indicates that we should match at two levels up, so we need to remove the last two segments of the intercepting route</span><span class="s3">\n\n      </span><span class="s1">const splitInterceptingRoute = interceptingRoute.split('/')</span><span class="s3">\n      </span><span class="s1">if (splitInterceptingRoute.length &lt;= 2) {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`Invalid interception route: ${path}. Cannot use (..)(..) marker at the root level or one level up.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">interceptedRoute = splitInterceptingRoute</span><span class="s3">\n        </span><span class="s1">.slice(0, -2)</span><span class="s3">\n        </span><span class="s1">.concat(interceptedRoute)</span><span class="s3">\n        </span><span class="s1">.join('/')</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">throw new Error('Invariant: unexpected marker')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return { interceptingRoute, interceptedRoute }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;INTERCEPTION_ROUTE_MARKERS&quot;</span><span class="s0">,</span><span class="s1">&quot;extractInterceptionRouteInformation&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptingRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;marker&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;splitInterceptingRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;IAGaA,0BAA0B,EAAA;eAA1BA;;IAkBGC,mCAAmC,EAAA;eAAnCA;;IAXAC,0BAA0B,EAAA;eAA1BA;;;0BAViB;AAG1B,MAAMF,6BAA6B;IACxC;IACA;IACA;IACA;CACD;AAEM,SAASE,2BAA2BC,IAAY;IACrD,wCAAwC;IACxC,OACEA,KACGC,KAAK,CAAC,KACNC,IAAI,CAAC,CAACC,UACLN,2BAA2BK,IAAI,CAAC,CAACE,IAAMD,QAAQE,UAAU,CAACD,SACtDE;AAEZ;AAEO,SAASR,oCAAoCE,IAAY;IAC9D,IAAIO,mBACFC,QACAC;IAEF,KAAK,MAAMN,WAAWH,KAAKC,KAAK,CAAC,KAAM;QACrCO,SAASX,2BAA2BK,IAAI,CAAC,CAACE,IAAMD,QAAQE,UAAU,CAACD;QACnE,IAAII,QAAQ;;YACT,CAACD,mBAAmBE,iBAAiB,GAAGT,KAAKC,KAAK,CAACO,QAAQ;YAC5D;QACF;IACF;IAEA,IAAI,CAACD,qBAAqB,CAACC,UAAU,CAACC,kBAAkB;QACtD,MAAM,OAAA,cAEL,CAFK,IAAIC,MACP,iCAA8BV,OAAK,sFADhC,qBAAA;mBAAA;wBAAA;0BAAA;QAEN;IACF;IAEAO,oBAAoBI,CAAAA,GAAAA,UAAAA,gBAAgB,EAACJ,mBAAmB,iDAAiD;;IAEzG,OAAQC;QACN,KAAK;YACH,oIAAoI;YACpI,IAAID,sBAAsB,KAAK;gBAC7BE,mBAAoB,MAAGA;YACzB,OAAO;gBACLA,mBAAmBF,oBAAoB,MAAME;YAC/C;YACA;QACF,KAAK;YACH,uHAAuH;YACvH,IAAIF,sBAAsB,KAAK;gBAC7B,MAAM,OAAA,cAEL,CAFK,IAAIG,MACP,iCAA8BV,OAAK,iEADhC,qBAAA;2BAAA;gCAAA;kCAAA;gBAEN;YACF;YACAS,mBAAmBF,kBAChBN,KAAK,CAAC,KACNW,KAAK,CAAC,GAAG,CAAC,GACVC,MAAM,CAACJ,kBACPK,IAAI,CAAC;YACR;QACF,KAAK;YACH,kIAAkI;YAClIL,mBAAmB,MAAMA;YACzB;QACF,KAAK;YACH,iIAAiI;YAEjI,MAAMM,yBAAyBR,kBAAkBN,KAAK,CAAC;YACvD,IAAIc,uBAAuBC,MAAM,IAAI,GAAG;gBACtC,MAAM,OAAA,cAEL,CAFK,IAAIN,MACP,iCAA8BV,OAAK,oEADhC,qBAAA;2BAAA;gCAAA;kCAAA;gBAEN;YACF;YAEAS,mBAAmBM,uBAChBH,KAAK,CAAC,GAAG,CAAC,GACVC,MAAM,CAACJ,kBACPK,IAAI,CAAC;YACR;QACF;YACE,MAAM,OAAA,cAAyC,CAAzC,IAAIJ,MAAM,iCAAV,qBAAA;uBAAA;4BAAA;8BAAA;YAAwC;IAClD;IAEA,OAAO;QAAEH;QAAmBE;IAAiB;AAC/C&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1349</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/escape-regexp.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// regexp is based on https://github.com/sindresorhus/escape-string-regexp</span><span class="s3">\n</span><span class="s1">const reHasRegExp = /[|</span><span class="s3">\\\\</span><span class="s1">{}()[</span><span class="s3">\\</span><span class="s1">]^$+*?.-]/</span><span class="s3">\n</span><span class="s1">const reReplaceRegExp = /[|</span><span class="s3">\\\\</span><span class="s1">{}()[</span><span class="s3">\\</span><span class="s1">]^$+*?.-]/g</span><span class="s3">\n\n</span><span class="s1">export function escapeStringRegexp(str: string) {</span><span class="s3">\n  </span><span class="s1">// see also: https://github.com/lodash/lodash/blob/2da024c3b4f9947a48517639de7560457cd4ec6c/escapeRegExp.js#L23</span><span class="s3">\n  </span><span class="s1">if (reHasRegExp.test(str)) {</span><span class="s3">\n    </span><span class="s1">return str.replace(reReplaceRegExp, '</span><span class="s3">\\\\</span><span class="s1">$&amp;')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return str</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;escapeStringRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;reHasRegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;reReplaceRegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,0EAA0E;;;;+BAI1DA,sBAAAA;;;eAAAA;;;AAHhB,MAAMC,cAAc;AACpB,MAAMC,kBAAkB;AAEjB,SAASF,mBAAmBG,GAAW;IAC5C,+GAA+G;IAC/G,IAAIF,YAAYG,IAAI,CAACD,MAAM;QACzB,OAAOA,IAAIE,OAAO,CAACH,iBAAiB;IACtC;IACA,OAAOC;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1372</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/remove-trailing-slash.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Removes the trailing slash for a given route or page path. Preserves the</span><span class="s3">\n </span><span class="s1">* root page. Examples:</span><span class="s3">\n </span><span class="s1">*   - `/foo/bar/` -&gt; `/foo/bar`</span><span class="s3">\n </span><span class="s1">*   - `/foo/bar` -&gt; `/foo/bar`</span><span class="s3">\n </span><span class="s1">*   - `/` -&gt; `/`</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function removeTrailingSlash(route: string) {</span><span class="s3">\n  </span><span class="s1">return route.replace(/</span><span class="s3">\\</span><span class="s1">/$/, '') || '/'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;;CAMC;;;+BACeA,uBAAAA;;;eAAAA;;;AAAT,SAASA,oBAAoBC,KAAa;IAC/C,OAAOA,MAAMC,OAAO,CAAC,OAAO,OAAO;AACrC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1394</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/get-dynamic-param.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { DynamicParam } from '../../../../server/app-render/app-render'</span><span class="s3">\n</span><span class="s1">import type { DynamicParamTypesShort } from '../../../../server/app-render/types'</span><span class="s3">\n</span><span class="s1">import type { FallbackRouteParams } from '../../../../server/request/fallback-params'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Shared logic on client and server for creating a dynamic param value.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This code needs to be shared with the client so it can extract dynamic route</span><span class="s3">\n </span><span class="s1">* params from the URL without a server request.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Because everything in this module is sent to the client, we should aim to</span><span class="s3">\n </span><span class="s1">* keep this code as simple as possible. The special case handling for catchall</span><span class="s3">\n </span><span class="s1">* and optional is, alas, unfortunate.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getDynamicParam(</span><span class="s3">\n  </span><span class="s1">params: { [key: string]: any },</span><span class="s3">\n  </span><span class="s1">segmentKey: string,</span><span class="s3">\n  </span><span class="s1">dynamicParamType: DynamicParamTypesShort,</span><span class="s3">\n  </span><span class="s1">pagePath: string,</span><span class="s3">\n  </span><span class="s1">fallbackRouteParams: FallbackRouteParams | null</span><span class="s3">\n</span><span class="s1">): DynamicParam {</span><span class="s3">\n  </span><span class="s1">let value = params[segmentKey]</span><span class="s3">\n\n  </span><span class="s1">if (fallbackRouteParams &amp;&amp; fallbackRouteParams.has(segmentKey)) {</span><span class="s3">\n    </span><span class="s1">value = fallbackRouteParams.get(segmentKey)</span><span class="s3">\n  </span><span class="s1">} else if (Array.isArray(value)) {</span><span class="s3">\n    </span><span class="s1">value = value.map((i) =&gt; encodeURIComponent(i))</span><span class="s3">\n  </span><span class="s1">} else if (typeof value === 'string') {</span><span class="s3">\n    </span><span class="s1">value = encodeURIComponent(value)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!value) {</span><span class="s3">\n    </span><span class="s1">const isCatchall = dynamicParamType === 'c'</span><span class="s3">\n    </span><span class="s1">const isOptionalCatchall = dynamicParamType === 'oc'</span><span class="s3">\n\n    </span><span class="s1">if (isCatchall || isOptionalCatchall) {</span><span class="s3">\n      </span><span class="s1">// handle the case where an optional catchall does not have a value,</span><span class="s3">\n      </span><span class="s1">// e.g. `/dashboard/[[...slug]]` when requesting `/dashboard`</span><span class="s3">\n      </span><span class="s1">if (isOptionalCatchall) {</span><span class="s3">\n        </span><span class="s1">return {</span><span class="s3">\n          </span><span class="s1">param: segmentKey,</span><span class="s3">\n          </span><span class="s1">value: null,</span><span class="s3">\n          </span><span class="s1">type: dynamicParamType,</span><span class="s3">\n          </span><span class="s1">treeSegment: [segmentKey, '', dynamicParamType],</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// handle the case where a catchall or optional catchall does not have a value,</span><span class="s3">\n      </span><span class="s1">// e.g. `/foo/bar/hello` and `@slot/[...catchall]` or `@slot/[[...catchall]]` is matched</span><span class="s3">\n      </span><span class="s1">value = pagePath</span><span class="s3">\n        </span><span class="s1">.split('/')</span><span class="s3">\n        </span><span class="s1">// remove the first empty string</span><span class="s3">\n        </span><span class="s1">.slice(1)</span><span class="s3">\n        </span><span class="s1">// replace any dynamic params with the actual values</span><span class="s3">\n        </span><span class="s1">.flatMap((pathSegment) =&gt; {</span><span class="s3">\n          </span><span class="s1">const param = parseParameter(pathSegment)</span><span class="s3">\n          </span><span class="s1">// if the segment matches a param, return the param value</span><span class="s3">\n          </span><span class="s1">// otherwise, it's a static segment, so just return that</span><span class="s3">\n          </span><span class="s1">return params[param.key] ?? param.key</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">param: segmentKey,</span><span class="s3">\n        </span><span class="s1">value,</span><span class="s3">\n        </span><span class="s1">type: dynamicParamType,</span><span class="s3">\n        </span><span class="s1">// This value always has to be a string.</span><span class="s3">\n        </span><span class="s1">treeSegment: [segmentKey, value.join('/'), dynamicParamType],</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">param: segmentKey,</span><span class="s3">\n    </span><span class="s1">// The value that is passed to user code.</span><span class="s3">\n    </span><span class="s1">value: value,</span><span class="s3">\n    </span><span class="s1">// The value that is rendered in the router tree.</span><span class="s3">\n    </span><span class="s1">treeSegment: [</span><span class="s3">\n      </span><span class="s1">segmentKey,</span><span class="s3">\n      </span><span class="s1">Array.isArray(value) ? value.join('/') : value,</span><span class="s3">\n      </span><span class="s1">dynamicParamType,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">type: dynamicParamType,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Regular expression pattern used to match route parameters.</span><span class="s3">\n </span><span class="s1">* Matches both single parameters and parameter groups.</span><span class="s3">\n </span><span class="s1">* Examples:</span><span class="s3">\n </span><span class="s1">*   - `[[...slug]]` matches parameter group with key 'slug', repeat: true, optional: true</span><span class="s3">\n </span><span class="s1">*   - `[...slug]` matches parameter group with key 'slug', repeat: true, optional: false</span><span class="s3">\n </span><span class="s1">*   - `[[foo]]` matches parameter with key 'foo', repeat: false, optional: true</span><span class="s3">\n </span><span class="s1">*   - `[bar]` matches parameter with key 'bar', repeat: false, optional: false</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const PARAMETER_PATTERN = /^([^[]*)</span><span class="s3">\\</span><span class="s1">[((?:</span><span class="s3">\\</span><span class="s1">[[^</span><span class="s3">\\</span><span class="s1">]]*</span><span class="s3">\\</span><span class="s1">])|[^</span><span class="s3">\\</span><span class="s1">]]+)</span><span class="s3">\\</span><span class="s1">](.*)$/</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Parses a given parameter from a route to a data structure that can be used</span><span class="s3">\n </span><span class="s1">* to generate the parametrized route.</span><span class="s3">\n </span><span class="s1">* Examples:</span><span class="s3">\n </span><span class="s1">*   - `[[...slug]]` -&gt; `{ key: 'slug', repeat: true, optional: true }`</span><span class="s3">\n </span><span class="s1">*   - `[...slug]` -&gt; `{ key: 'slug', repeat: true, optional: false }`</span><span class="s3">\n </span><span class="s1">*   - `[[foo]]` -&gt; `{ key: 'foo', repeat: false, optional: true }`</span><span class="s3">\n </span><span class="s1">*   - `[bar]` -&gt; `{ key: 'bar', repeat: false, optional: false }`</span><span class="s3">\n </span><span class="s1">*   - `fizz` -&gt; `{ key: 'fizz', repeat: false, optional: false }`</span><span class="s3">\n </span><span class="s1">* @param param - The parameter to parse.</span><span class="s3">\n </span><span class="s1">* @returns The parsed parameter as a data structure.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function parseParameter(param: string) {</span><span class="s3">\n  </span><span class="s1">const match = param.match(PARAMETER_PATTERN)</span><span class="s3">\n\n  </span><span class="s1">if (!match) {</span><span class="s3">\n    </span><span class="s1">return parseMatchedParameter(param)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return parseMatchedParameter(match[2])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Parses a matched parameter from the PARAMETER_PATTERN regex to a data structure that can be used</span><span class="s3">\n </span><span class="s1">* to generate the parametrized route.</span><span class="s3">\n </span><span class="s1">* Examples:</span><span class="s3">\n </span><span class="s1">*   - `[...slug]` -&gt; `{ key: 'slug', repeat: true, optional: true }`</span><span class="s3">\n </span><span class="s1">*   - `...slug` -&gt; `{ key: 'slug', repeat: true, optional: false }`</span><span class="s3">\n </span><span class="s1">*   - `[foo]` -&gt; `{ key: 'foo', repeat: false, optional: true }`</span><span class="s3">\n </span><span class="s1">*   - `bar` -&gt; `{ key: 'bar', repeat: false, optional: false }`</span><span class="s3">\n </span><span class="s1">* @param param - The matched parameter to parse.</span><span class="s3">\n </span><span class="s1">* @returns The parsed parameter as a data structure.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function parseMatchedParameter(param: string) {</span><span class="s3">\n  </span><span class="s1">const optional = param.startsWith('[') &amp;&amp; param.endsWith(']')</span><span class="s3">\n  </span><span class="s1">if (optional) {</span><span class="s3">\n    </span><span class="s1">param = param.slice(1, -1)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const repeat = param.startsWith('...')</span><span class="s3">\n  </span><span class="s1">if (repeat) {</span><span class="s3">\n    </span><span class="s1">param = param.slice(3)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { key: param, repeat, optional }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PARAMETER_PATTERN&quot;</span><span class="s0">,</span><span class="s1">&quot;getDynamicParam&quot;</span><span class="s0">,</span><span class="s1">&quot;parseMatchedParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;parseParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentKey&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicParamType&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;encodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;isCatchall&quot;</span><span class="s0">,</span><span class="s1">&quot;isOptionalCatchall&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;treeSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;flatMap&quot;</span><span class="s0">,</span><span class="s1">&quot;pathSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;optional&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;repeat&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;IA+FaA,iBAAiB,EAAA;eAAjBA;;IAhFGC,eAAe,EAAA;eAAfA;;IAmHAC,qBAAqB,EAAA;eAArBA;;IArBAC,cAAc,EAAA;eAAdA;;;AA9FT,SAASF,gBACdG,MAA8B,EAC9BC,UAAkB,EAClBC,gBAAwC,EACxCC,QAAgB,EAChBC,mBAA+C;IAE/C,IAAIC,QAAQL,MAAM,CAACC,WAAW;IAE9B,IAAIG,uBAAuBA,oBAAoBE,GAAG,CAACL,aAAa;QAC9DI,QAAQD,oBAAoBG,GAAG,CAACN;IAClC,OAAO,IAAIO,MAAMC,OAAO,CAACJ,QAAQ;QAC/BA,QAAQA,MAAMK,GAAG,CAAC,CAACC,IAAMC,mBAAmBD;IAC9C,OAAO,IAAI,OAAON,UAAU,UAAU;QACpCA,QAAQO,mBAAmBP;IAC7B;IAEA,IAAI,CAACA,OAAO;QACV,MAAMQ,aAAaX,qBAAqB;QACxC,MAAMY,qBAAqBZ,qBAAqB;QAEhD,IAAIW,cAAcC,oBAAoB;YACpC,oEAAoE;YACpE,6DAA6D;YAC7D,IAAIA,oBAAoB;gBACtB,OAAO;oBACLC,OAAOd;oBACPI,OAAO;oBACPW,MAAMd;oBACNe,aAAa;wBAAChB;wBAAY;wBAAIC;qBAAiB;gBACjD;YACF;YAEA,+EAA+E;YAC/E,wFAAwF;YACxFG,QAAQF,SACLe,KAAK,CAAC,KACP,gCAAgC;aAC/BC,KAAK,CAAC,GACP,oDAAoD;aACnDC,OAAO,CAAC,CAACC;gBACR,MAAMN,QAAQhB,eAAesB;oBAGtBrB;gBAFP,yDAAyD;gBACzD,wDAAwD;gBACxD,OAAOA,CAAAA,oBAAAA,MAAM,CAACe,MAAMO,GAAG,CAAC,KAAA,OAAjBtB,oBAAqBe,MAAMO,GAAG;YACvC;YAEF,OAAO;gBACLP,OAAOd;gBACPI;gBACAW,MAAMd;gBACN,wCAAwC;gBACxCe,aAAa;oBAAChB;oBAAYI,MAAMkB,IAAI,CAAC;oBAAMrB;iBAAiB;YAC9D;QACF;IACF;IAEA,OAAO;QACLa,OAAOd;QACP,yCAAyC;QACzCI,OAAOA;QACP,iDAAiD;QACjDY,aAAa;YACXhB;YACAO,MAAMC,OAAO,CAACJ,SAASA,MAAMkB,IAAI,CAAC,OAAOlB;YACzCH;SACD;QACDc,MAAMd;IACR;AACF;AAWO,MAAMN,oBAAoB;AAc1B,SAASG,eAAegB,KAAa;IAC1C,MAAMS,QAAQT,MAAMS,KAAK,CAAC5B;IAE1B,IAAI,CAAC4B,OAAO;QACV,OAAO1B,sBAAsBiB;IAC/B;IAEA,OAAOjB,sBAAsB0B,KAAK,CAAC,EAAE;AACvC;AAaO,SAAS1B,sBAAsBiB,KAAa;IACjD,MAAMU,WAAWV,MAAMW,UAAU,CAAC,QAAQX,MAAMY,QAAQ,CAAC;IACzD,IAAIF,UAAU;QACZV,QAAQA,MAAMI,KAAK,CAAC,GAAG,CAAC;IAC1B;IACA,MAAMS,SAASb,MAAMW,UAAU,CAAC;IAChC,IAAIE,QAAQ;QACVb,QAAQA,MAAMI,KAAK,CAAC;IACtB;IACA,OAAO;QAAEG,KAAKP;QAAOa;QAAQH;IAAS;AACxC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1514</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/route-regex.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">NEXT_INTERCEPTION_MARKER_PREFIX,</span><span class="s3">\n  </span><span class="s1">NEXT_QUERY_PARAM_PREFIX,</span><span class="s3">\n</span><span class="s1">} from '../../../../lib/constants'</span><span class="s3">\n</span><span class="s1">import { INTERCEPTION_ROUTE_MARKERS } from './interception-routes'</span><span class="s3">\n</span><span class="s1">import { escapeStringRegexp } from '../../escape-regexp'</span><span class="s3">\n</span><span class="s1">import { removeTrailingSlash } from './remove-trailing-slash'</span><span class="s3">\n</span><span class="s1">import { PARAMETER_PATTERN, parseMatchedParameter } from './get-dynamic-param'</span><span class="s3">\n\n</span><span class="s1">export interface Group {</span><span class="s3">\n  </span><span class="s1">pos: number</span><span class="s3">\n  </span><span class="s1">repeat: boolean</span><span class="s3">\n  </span><span class="s1">optional: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface RouteRegex {</span><span class="s3">\n  </span><span class="s1">groups: { [groupName: string]: Group }</span><span class="s3">\n  </span><span class="s1">re: RegExp</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type GetNamedRouteRegexOptions = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to prefix the route keys with the NEXT_INTERCEPTION_MARKER_PREFIX</span><span class="s3">\n   </span><span class="s1">* or NEXT_QUERY_PARAM_PREFIX. This is only relevant when creating the</span><span class="s3">\n   </span><span class="s1">* routes-manifest during the build.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">prefixRouteKeys: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to include the suffix in the route regex. This means that when you</span><span class="s3">\n   </span><span class="s1">* have something like `/[...slug].json` the `.json` part will be included</span><span class="s3">\n   </span><span class="s1">* in the regex, yielding `/(.*).json` as the regex.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">includeSuffix?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to include the prefix in the route regex. This means that when you</span><span class="s3">\n   </span><span class="s1">* have something like `/[...slug].json` the `/` part will be included</span><span class="s3">\n   </span><span class="s1">* in the regex, yielding `^/(.*).json$` as the regex.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Note that interception markers will already be included without the need</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">includePrefix?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to exclude the optional trailing slash from the route regex.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">excludeOptionalTrailingSlash?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to backtrack duplicate keys. This is only relevant when creating</span><span class="s3">\n   </span><span class="s1">* the routes-manifest during the build.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">backreferenceDuplicateKeys?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type GetRouteRegexOptions = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to include extra parts in the route regex. This means that when you</span><span class="s3">\n   </span><span class="s1">* have something like `/[...slug].json` the `.json` part will be included</span><span class="s3">\n   </span><span class="s1">* in the regex, yielding `/(.*).json` as the regex.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">includeSuffix?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to include the prefix in the route regex. This means that when you</span><span class="s3">\n   </span><span class="s1">* have something like `/[...slug].json` the `/` part will be included</span><span class="s3">\n   </span><span class="s1">* in the regex, yielding `^/(.*).json$` as the regex.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Note that interception markers will already be included without the need</span><span class="s3">\n   </span><span class="s1">* of adding this option.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">includePrefix?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to exclude the optional trailing slash from the route regex.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">excludeOptionalTrailingSlash?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getParametrizedRoute(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">includeSuffix: boolean,</span><span class="s3">\n  </span><span class="s1">includePrefix: boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const groups: { [groupName: string]: Group } = {}</span><span class="s3">\n  </span><span class="s1">let groupIndex = 1</span><span class="s3">\n\n  </span><span class="s1">const segments: string[] = []</span><span class="s3">\n  </span><span class="s1">for (const segment of removeTrailingSlash(route).slice(1).split('/')) {</span><span class="s3">\n    </span><span class="s1">const markerMatch = INTERCEPTION_ROUTE_MARKERS.find((m) =&gt;</span><span class="s3">\n      </span><span class="s1">segment.startsWith(m)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const paramMatches = segment.match(PARAMETER_PATTERN) // Check for parameters</span><span class="s3">\n\n    </span><span class="s1">if (markerMatch &amp;&amp; paramMatches &amp;&amp; paramMatches[2]) {</span><span class="s3">\n      </span><span class="s1">const { key, optional, repeat } = parseMatchedParameter(paramMatches[2])</span><span class="s3">\n      </span><span class="s1">groups[key] = { pos: groupIndex++, repeat, optional }</span><span class="s3">\n      </span><span class="s1">segments.push(`/${escapeStringRegexp(markerMatch)}([^/]+?)`)</span><span class="s3">\n    </span><span class="s1">} else if (paramMatches &amp;&amp; paramMatches[2]) {</span><span class="s3">\n      </span><span class="s1">const { key, repeat, optional } = parseMatchedParameter(paramMatches[2])</span><span class="s3">\n      </span><span class="s1">groups[key] = { pos: groupIndex++, repeat, optional }</span><span class="s3">\n\n      </span><span class="s1">if (includePrefix &amp;&amp; paramMatches[1]) {</span><span class="s3">\n        </span><span class="s1">segments.push(`/${escapeStringRegexp(paramMatches[1])}`)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">let s = repeat ? (optional ? '(?:/(.+?))?' : '/(.+?)') : '/([^/]+?)'</span><span class="s3">\n\n      </span><span class="s1">// Remove the leading slash if includePrefix already added it.</span><span class="s3">\n      </span><span class="s1">if (includePrefix &amp;&amp; paramMatches[1]) {</span><span class="s3">\n        </span><span class="s1">s = s.substring(1)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">segments.push(s)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">segments.push(`/${escapeStringRegexp(segment)}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If there's a suffix, add it to the segments if it's enabled.</span><span class="s3">\n    </span><span class="s1">if (includeSuffix &amp;&amp; paramMatches &amp;&amp; paramMatches[3]) {</span><span class="s3">\n      </span><span class="s1">segments.push(escapeStringRegexp(paramMatches[3]))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">parameterizedRoute: segments.join(''),</span><span class="s3">\n    </span><span class="s1">groups,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* From a normalized route this function generates a regular expression and</span><span class="s3">\n </span><span class="s1">* a corresponding groups object intended to be used to store matching groups</span><span class="s3">\n </span><span class="s1">* from the regular expression.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getRouteRegex(</span><span class="s3">\n  </span><span class="s1">normalizedRoute: string,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">includeSuffix = false,</span><span class="s3">\n    </span><span class="s1">includePrefix = false,</span><span class="s3">\n    </span><span class="s1">excludeOptionalTrailingSlash = false,</span><span class="s3">\n  </span><span class="s1">}: GetRouteRegexOptions = {}</span><span class="s3">\n</span><span class="s1">): RouteRegex {</span><span class="s3">\n  </span><span class="s1">const { parameterizedRoute, groups } = getParametrizedRoute(</span><span class="s3">\n    </span><span class="s1">normalizedRoute,</span><span class="s3">\n    </span><span class="s1">includeSuffix,</span><span class="s3">\n    </span><span class="s1">includePrefix</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let re = parameterizedRoute</span><span class="s3">\n  </span><span class="s1">if (!excludeOptionalTrailingSlash) {</span><span class="s3">\n    </span><span class="s1">re += '(?:/)?'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">re: new RegExp(`^${re}$`),</span><span class="s3">\n    </span><span class="s1">groups: groups,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Builds a function to generate a minimal routeKey using only a-z and minimal</span><span class="s3">\n </span><span class="s1">* number of characters.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function buildGetSafeRouteKey() {</span><span class="s3">\n  </span><span class="s1">let i = 0</span><span class="s3">\n\n  </span><span class="s1">return () =&gt; {</span><span class="s3">\n    </span><span class="s1">let routeKey = ''</span><span class="s3">\n    </span><span class="s1">let j = ++i</span><span class="s3">\n    </span><span class="s1">while (j &gt; 0) {</span><span class="s3">\n      </span><span class="s1">routeKey += String.fromCharCode(97 + ((j - 1) % 26))</span><span class="s3">\n      </span><span class="s1">j = Math.floor((j - 1) / 26)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return routeKey</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getSafeKeyFromSegment({</span><span class="s3">\n  </span><span class="s1">interceptionMarker,</span><span class="s3">\n  </span><span class="s1">getSafeRouteKey,</span><span class="s3">\n  </span><span class="s1">segment,</span><span class="s3">\n  </span><span class="s1">routeKeys,</span><span class="s3">\n  </span><span class="s1">keyPrefix,</span><span class="s3">\n  </span><span class="s1">backreferenceDuplicateKeys,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">interceptionMarker?: string</span><span class="s3">\n  </span><span class="s1">getSafeRouteKey: () =&gt; string</span><span class="s3">\n  </span><span class="s1">segment: string</span><span class="s3">\n  </span><span class="s1">routeKeys: Record&lt;string, string&gt;</span><span class="s3">\n  </span><span class="s1">keyPrefix?: string</span><span class="s3">\n  </span><span class="s1">backreferenceDuplicateKeys: boolean</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const { key, optional, repeat } = parseMatchedParameter(segment)</span><span class="s3">\n\n  </span><span class="s1">// replace any non-word characters since they can break</span><span class="s3">\n  </span><span class="s1">// the named regex</span><span class="s3">\n  </span><span class="s1">let cleanedKey = key.replace(/</span><span class="s3">\\</span><span class="s1">W/g, '')</span><span class="s3">\n\n  </span><span class="s1">if (keyPrefix) {</span><span class="s3">\n    </span><span class="s1">cleanedKey = `${keyPrefix}${cleanedKey}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let invalidKey = false</span><span class="s3">\n\n  </span><span class="s1">// check if the key is still invalid and fallback to using a known</span><span class="s3">\n  </span><span class="s1">// safe key</span><span class="s3">\n  </span><span class="s1">if (cleanedKey.length === 0 || cleanedKey.length &gt; 30) {</span><span class="s3">\n    </span><span class="s1">invalidKey = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (!isNaN(parseInt(cleanedKey.slice(0, 1)))) {</span><span class="s3">\n    </span><span class="s1">invalidKey = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (invalidKey) {</span><span class="s3">\n    </span><span class="s1">cleanedKey = getSafeRouteKey()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const duplicateKey = cleanedKey in routeKeys</span><span class="s3">\n\n  </span><span class="s1">if (keyPrefix) {</span><span class="s3">\n    </span><span class="s1">routeKeys[cleanedKey] = `${keyPrefix}${key}`</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">routeKeys[cleanedKey] = key</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// if the segment has an interception marker, make sure that's part of the regex pattern</span><span class="s3">\n  </span><span class="s1">// this is to ensure that the route with the interception marker doesn't incorrectly match</span><span class="s3">\n  </span><span class="s1">// the non-intercepted route (ie /app/(.)[username] should not match /app/[username])</span><span class="s3">\n  </span><span class="s1">const interceptionPrefix = interceptionMarker</span><span class="s3">\n    </span><span class="s1">? escapeStringRegexp(interceptionMarker)</span><span class="s3">\n    </span><span class="s1">: ''</span><span class="s3">\n\n  </span><span class="s1">let pattern: string</span><span class="s3">\n  </span><span class="s1">if (duplicateKey &amp;&amp; backreferenceDuplicateKeys) {</span><span class="s3">\n    </span><span class="s1">// Use a backreference to the key to ensure that the key is the same value</span><span class="s3">\n    </span><span class="s1">// in each of the placeholders.</span><span class="s3">\n    </span><span class="s1">pattern = `</span><span class="s3">\\\\</span><span class="s1">k&lt;${cleanedKey}&gt;`</span><span class="s3">\n  </span><span class="s1">} else if (repeat) {</span><span class="s3">\n    </span><span class="s1">pattern = `(?&lt;${cleanedKey}&gt;.+?)`</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">pattern = `(?&lt;${cleanedKey}&gt;[^/]+?)`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return optional</span><span class="s3">\n    </span><span class="s1">? `(?:/${interceptionPrefix}${pattern})?`</span><span class="s3">\n    </span><span class="s1">: `/${interceptionPrefix}${pattern}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getNamedParametrizedRoute(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">prefixRouteKeys: boolean,</span><span class="s3">\n  </span><span class="s1">includeSuffix: boolean,</span><span class="s3">\n  </span><span class="s1">includePrefix: boolean,</span><span class="s3">\n  </span><span class="s1">backreferenceDuplicateKeys: boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const getSafeRouteKey = buildGetSafeRouteKey()</span><span class="s3">\n  </span><span class="s1">const routeKeys: { [named: string]: string } = {}</span><span class="s3">\n\n  </span><span class="s1">const segments: string[] = []</span><span class="s3">\n  </span><span class="s1">for (const segment of removeTrailingSlash(route).slice(1).split('/')) {</span><span class="s3">\n    </span><span class="s1">const hasInterceptionMarker = INTERCEPTION_ROUTE_MARKERS.some((m) =&gt;</span><span class="s3">\n      </span><span class="s1">segment.startsWith(m)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const paramMatches = segment.match(PARAMETER_PATTERN) // Check for parameters</span><span class="s3">\n\n    </span><span class="s1">if (hasInterceptionMarker &amp;&amp; paramMatches &amp;&amp; paramMatches[2]) {</span><span class="s3">\n      </span><span class="s1">// If there's an interception marker, add it to the segments.</span><span class="s3">\n      </span><span class="s1">segments.push(</span><span class="s3">\n        </span><span class="s1">getSafeKeyFromSegment({</span><span class="s3">\n          </span><span class="s1">getSafeRouteKey,</span><span class="s3">\n          </span><span class="s1">interceptionMarker: paramMatches[1],</span><span class="s3">\n          </span><span class="s1">segment: paramMatches[2],</span><span class="s3">\n          </span><span class="s1">routeKeys,</span><span class="s3">\n          </span><span class="s1">keyPrefix: prefixRouteKeys</span><span class="s3">\n            </span><span class="s1">? NEXT_INTERCEPTION_MARKER_PREFIX</span><span class="s3">\n            </span><span class="s1">: undefined,</span><span class="s3">\n          </span><span class="s1">backreferenceDuplicateKeys,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else if (paramMatches &amp;&amp; paramMatches[2]) {</span><span class="s3">\n      </span><span class="s1">// If there's a prefix, add it to the segments if it's enabled.</span><span class="s3">\n      </span><span class="s1">if (includePrefix &amp;&amp; paramMatches[1]) {</span><span class="s3">\n        </span><span class="s1">segments.push(`/${escapeStringRegexp(paramMatches[1])}`)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">let s = getSafeKeyFromSegment({</span><span class="s3">\n        </span><span class="s1">getSafeRouteKey,</span><span class="s3">\n        </span><span class="s1">segment: paramMatches[2],</span><span class="s3">\n        </span><span class="s1">routeKeys,</span><span class="s3">\n        </span><span class="s1">keyPrefix: prefixRouteKeys ? NEXT_QUERY_PARAM_PREFIX : undefined,</span><span class="s3">\n        </span><span class="s1">backreferenceDuplicateKeys,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">// Remove the leading slash if includePrefix already added it.</span><span class="s3">\n      </span><span class="s1">if (includePrefix &amp;&amp; paramMatches[1]) {</span><span class="s3">\n        </span><span class="s1">s = s.substring(1)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">segments.push(s)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">segments.push(`/${escapeStringRegexp(segment)}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If there's a suffix, add it to the segments if it's enabled.</span><span class="s3">\n    </span><span class="s1">if (includeSuffix &amp;&amp; paramMatches &amp;&amp; paramMatches[3]) {</span><span class="s3">\n      </span><span class="s1">segments.push(escapeStringRegexp(paramMatches[3]))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">namedParameterizedRoute: segments.join(''),</span><span class="s3">\n    </span><span class="s1">routeKeys,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function extends `getRouteRegex` generating also a named regexp where</span><span class="s3">\n </span><span class="s1">* each group is named along with a routeKeys object that indexes the assigned</span><span class="s3">\n </span><span class="s1">* named group with its corresponding key. When the routeKeys need to be</span><span class="s3">\n </span><span class="s1">* prefixed to uniquely identify internally the </span><span class="s3">\&quot;</span><span class="s1">prefixRouteKey</span><span class="s3">\&quot; </span><span class="s1">arg should</span><span class="s3">\n </span><span class="s1">* be </span><span class="s3">\&quot;</span><span class="s1">true</span><span class="s3">\&quot; </span><span class="s1">currently this is only the case when creating the routes-manifest</span><span class="s3">\n </span><span class="s1">* during the build</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getNamedRouteRegex(</span><span class="s3">\n  </span><span class="s1">normalizedRoute: string,</span><span class="s3">\n  </span><span class="s1">options: GetNamedRouteRegexOptions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const result = getNamedParametrizedRoute(</span><span class="s3">\n    </span><span class="s1">normalizedRoute,</span><span class="s3">\n    </span><span class="s1">options.prefixRouteKeys,</span><span class="s3">\n    </span><span class="s1">options.includeSuffix ?? false,</span><span class="s3">\n    </span><span class="s1">options.includePrefix ?? false,</span><span class="s3">\n    </span><span class="s1">options.backreferenceDuplicateKeys ?? false</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let namedRegex = result.namedParameterizedRoute</span><span class="s3">\n  </span><span class="s1">if (!options.excludeOptionalTrailingSlash) {</span><span class="s3">\n    </span><span class="s1">namedRegex += '(?:/)?'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">...getRouteRegex(normalizedRoute, options),</span><span class="s3">\n    </span><span class="s1">namedRegex: `^${namedRegex}$`,</span><span class="s3">\n    </span><span class="s1">routeKeys: result.routeKeys,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Generates a named regexp.</span><span class="s3">\n </span><span class="s1">* This is intended to be using for build time only.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getNamedMiddlewareRegex(</span><span class="s3">\n  </span><span class="s1">normalizedRoute: string,</span><span class="s3">\n  </span><span class="s1">options: {</span><span class="s3">\n    </span><span class="s1">catchAll?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const { parameterizedRoute } = getParametrizedRoute(</span><span class="s3">\n    </span><span class="s1">normalizedRoute,</span><span class="s3">\n    </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">false</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const { catchAll = true } = options</span><span class="s3">\n  </span><span class="s1">if (parameterizedRoute === '/') {</span><span class="s3">\n    </span><span class="s1">let catchAllRegex = catchAll ? '.*' : ''</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">namedRegex: `^/${catchAllRegex}$`,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { namedParameterizedRoute } = getNamedParametrizedRoute(</span><span class="s3">\n    </span><span class="s1">normalizedRoute,</span><span class="s3">\n    </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">false</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">let catchAllGroupedRegex = catchAll ? '(?:(/.*)?)' : ''</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">namedRegex: `^${namedParameterizedRoute}${catchAllGroupedRegex}$`,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getNamedMiddlewareRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;getNamedRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;getParametrizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;includeSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;includePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;groups&quot;</span><span class="s0">,</span><span class="s1">&quot;groupIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;markerMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;INTERCEPTION_ROUTE_MARKERS&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;paramMatches&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;PARAMETER_PATTERN&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;optional&quot;</span><span class="s0">,</span><span class="s1">&quot;repeat&quot;</span><span class="s0">,</span><span class="s1">&quot;parseMatchedParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeStringRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;s&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;parameterizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;excludeOptionalTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;buildGetSafeRouteKey&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKey&quot;</span><span class="s0">,</span><span class="s1">&quot;j&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;fromCharCode&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;floor&quot;</span><span class="s0">,</span><span class="s1">&quot;getSafeKeyFromSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionMarker&quot;</span><span class="s0">,</span><span class="s1">&quot;getSafeRouteKey&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;keyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;backreferenceDuplicateKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanedKey&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidKey&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;isNaN&quot;</span><span class="s0">,</span><span class="s1">&quot;parseInt&quot;</span><span class="s0">,</span><span class="s1">&quot;duplicateKey&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;pattern&quot;</span><span class="s0">,</span><span class="s1">&quot;getNamedParametrizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixRouteKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;hasInterceptionMarker&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;namedParameterizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;namedRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;catchAll&quot;</span><span class="s0">,</span><span class="s1">&quot;catchAllRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;catchAllGroupedRegex&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1739</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { HtmlProps } from './html-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import type { ComponentType, JSX } from 'react'</span><span class="s3">\n</span><span class="s1">import type { DomainLocale } from '../../server/config'</span><span class="s3">\n</span><span class="s1">import type { Env } from '@next/env'</span><span class="s3">\n</span><span class="s1">import type { IncomingMessage, ServerResponse } from 'http'</span><span class="s3">\n</span><span class="s1">import type { NextRouter } from './router/router'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { PreviewData } from '../../types'</span><span class="s3">\n</span><span class="s1">import type { COMPILER_NAMES } from './constants'</span><span class="s3">\n</span><span class="s1">import type fs from 'fs'</span><span class="s3">\n\n</span><span class="s1">export type NextComponentType&lt;</span><span class="s3">\n  </span><span class="s1">Context extends BaseContext = NextPageContext,</span><span class="s3">\n  </span><span class="s1">InitialProps = {},</span><span class="s3">\n  </span><span class="s1">Props = {},</span><span class="s3">\n</span><span class="s1">&gt; = ComponentType&lt;Props&gt; &amp; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Used for initial page load data population. Data returned from `getInitialProps` is serialized when server rendered.</span><span class="s3">\n   </span><span class="s1">* Make sure to return plain `Object` without using `Date`, `Map`, `Set`.</span><span class="s3">\n   </span><span class="s1">* @param context Context of `page`</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">getInitialProps?(context: Context): InitialProps | Promise&lt;InitialProps&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type DocumentType = NextComponentType&lt;</span><span class="s3">\n  </span><span class="s1">DocumentContext,</span><span class="s3">\n  </span><span class="s1">DocumentInitialProps,</span><span class="s3">\n  </span><span class="s1">DocumentProps</span><span class="s3">\n</span><span class="s1">&gt;</span><span class="s3">\n\n</span><span class="s1">export type AppType&lt;P = {}&gt; = NextComponentType&lt;</span><span class="s3">\n  </span><span class="s1">AppContextType,</span><span class="s3">\n  </span><span class="s1">P,</span><span class="s3">\n  </span><span class="s1">AppPropsType&lt;any, P&gt;</span><span class="s3">\n</span><span class="s1">&gt;</span><span class="s3">\n\n</span><span class="s1">export type AppTreeType = ComponentType&lt;</span><span class="s3">\n  </span><span class="s1">AppInitialProps &amp; { [name: string]: any }</span><span class="s3">\n</span><span class="s1">&gt;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Web vitals provided to _app.reportWebVitals by Core Web Vitals plugin developed by Google Chrome team.</span><span class="s3">\n </span><span class="s1">* https://nextjs.org/blog/next-9-4#integrated-web-vitals-reporting</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const WEB_VITALS = ['CLS', 'FCP', 'FID', 'INP', 'LCP', 'TTFB'] as const</span><span class="s3">\n</span><span class="s1">export type NextWebVitalsMetric = {</span><span class="s3">\n  </span><span class="s1">id: string</span><span class="s3">\n  </span><span class="s1">startTime: number</span><span class="s3">\n  </span><span class="s1">value: number</span><span class="s3">\n  </span><span class="s1">attribution?: { [key: string]: unknown }</span><span class="s3">\n</span><span class="s1">} &amp; (</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">label: 'web-vital'</span><span class="s3">\n      </span><span class="s1">name: (typeof WEB_VITALS)[number]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">label: 'custom'</span><span class="s3">\n      </span><span class="s1">name:</span><span class="s3">\n        </span><span class="s1">| 'Next.js-hydration'</span><span class="s3">\n        </span><span class="s1">| 'Next.js-route-change-to-render'</span><span class="s3">\n        </span><span class="s1">| 'Next.js-render'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">export type Enhancer&lt;C&gt; = (Component: C) =&gt; C</span><span class="s3">\n\n</span><span class="s1">export type ComponentsEnhancer =</span><span class="s3">\n  </span><span class="s1">| {</span><span class="s3">\n      </span><span class="s1">enhanceApp?: Enhancer&lt;AppType&gt;</span><span class="s3">\n      </span><span class="s1">enhanceComponent?: Enhancer&lt;NextComponentType&gt;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">| Enhancer&lt;NextComponentType&gt;</span><span class="s3">\n\n</span><span class="s1">export type RenderPageResult = {</span><span class="s3">\n  </span><span class="s1">html: string</span><span class="s3">\n  </span><span class="s1">head?: Array&lt;JSX.Element | null&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RenderPage = (</span><span class="s3">\n  </span><span class="s1">options?: ComponentsEnhancer</span><span class="s3">\n</span><span class="s1">) =&gt; DocumentInitialProps | Promise&lt;DocumentInitialProps&gt;</span><span class="s3">\n\n</span><span class="s1">export type BaseContext = {</span><span class="s3">\n  </span><span class="s1">res?: ServerResponse</span><span class="s3">\n  </span><span class="s1">[k: string]: any</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type NEXT_DATA = {</span><span class="s3">\n  </span><span class="s1">props: Record&lt;string, any&gt;</span><span class="s3">\n  </span><span class="s1">page: string</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n  </span><span class="s1">assetPrefix?: string</span><span class="s3">\n  </span><span class="s1">runtimeConfig?: { [key: string]: any }</span><span class="s3">\n  </span><span class="s1">nextExport?: boolean</span><span class="s3">\n  </span><span class="s1">autoExport?: boolean</span><span class="s3">\n  </span><span class="s1">isFallback?: boolean</span><span class="s3">\n  </span><span class="s1">isExperimentalCompile?: boolean</span><span class="s3">\n  </span><span class="s1">dynamicIds?: (string | number)[]</span><span class="s3">\n  </span><span class="s1">err?: Error &amp; {</span><span class="s3">\n    </span><span class="s1">statusCode?: number</span><span class="s3">\n    </span><span class="s1">source?: typeof COMPILER_NAMES.server | typeof COMPILER_NAMES.edgeServer</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">gsp?: boolean</span><span class="s3">\n  </span><span class="s1">gssp?: boolean</span><span class="s3">\n  </span><span class="s1">customServer?: boolean</span><span class="s3">\n  </span><span class="s1">gip?: boolean</span><span class="s3">\n  </span><span class="s1">appGip?: boolean</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n  </span><span class="s1">domainLocales?: readonly DomainLocale[]</span><span class="s3">\n  </span><span class="s1">scriptLoader?: any[]</span><span class="s3">\n  </span><span class="s1">isPreview?: boolean</span><span class="s3">\n  </span><span class="s1">notFoundSrcPage?: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* `Next` context</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export interface NextPageContext {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Error object if encountered during rendering</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">err?: (Error &amp; { statusCode?: number }) | null</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `HTTP` request object.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">req?: IncomingMessage</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `HTTP` response object.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">res?: ServerResponse</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Path section of `URL`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Query string section of `URL` parsed as an object.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `String` of the actual path including query.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">asPath?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The currently active locale</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* All configured locales</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The configured default locale</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `Component` the tree of the App to use if needing to render separately</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">AppTree: AppTreeType</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type AppContextType&lt;Router extends NextRouter = NextRouter&gt; = {</span><span class="s3">\n  </span><span class="s1">Component: NextComponentType&lt;NextPageContext&gt;</span><span class="s3">\n  </span><span class="s1">AppTree: AppTreeType</span><span class="s3">\n  </span><span class="s1">ctx: NextPageContext</span><span class="s3">\n  </span><span class="s1">router: Router</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type AppInitialProps&lt;PageProps = any&gt; = {</span><span class="s3">\n  </span><span class="s1">pageProps: PageProps</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type AppPropsType&lt;</span><span class="s3">\n  </span><span class="s1">Router extends NextRouter = NextRouter,</span><span class="s3">\n  </span><span class="s1">PageProps = {},</span><span class="s3">\n</span><span class="s1">&gt; = AppInitialProps&lt;PageProps&gt; &amp; {</span><span class="s3">\n  </span><span class="s1">Component: NextComponentType&lt;NextPageContext, any, any&gt;</span><span class="s3">\n  </span><span class="s1">router: Router</span><span class="s3">\n  </span><span class="s1">__N_SSG?: boolean</span><span class="s3">\n  </span><span class="s1">__N_SSP?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type DocumentContext = NextPageContext &amp; {</span><span class="s3">\n  </span><span class="s1">renderPage: RenderPage</span><span class="s3">\n  </span><span class="s1">defaultGetInitialProps(</span><span class="s3">\n    </span><span class="s1">ctx: DocumentContext,</span><span class="s3">\n    </span><span class="s1">options?: { nonce?: string }</span><span class="s3">\n  </span><span class="s1">): Promise&lt;DocumentInitialProps&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type DocumentInitialProps = RenderPageResult &amp; {</span><span class="s3">\n  </span><span class="s1">styles?: React.ReactElement[] | Iterable&lt;React.ReactNode&gt; | JSX.Element</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type DocumentProps = DocumentInitialProps &amp; HtmlProps</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Next `API` route request</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export interface NextApiRequest extends IncomingMessage {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Object of `query` values from url</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">query: Partial&lt;{</span><span class="s3">\n    </span><span class="s1">[key: string]: string | string[]</span><span class="s3">\n  </span><span class="s1">}&gt;</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Object of `cookies` from header</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">cookies: Partial&lt;{</span><span class="s3">\n    </span><span class="s1">[key: string]: string</span><span class="s3">\n  </span><span class="s1">}&gt;</span><span class="s3">\n\n  </span><span class="s1">body: any</span><span class="s3">\n\n  </span><span class="s1">env: Env</span><span class="s3">\n\n  </span><span class="s1">draftMode?: boolean</span><span class="s3">\n\n  </span><span class="s1">preview?: boolean</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Preview data set on the request, if any</span><span class="s3">\n   </span><span class="s1">* */</span><span class="s3">\n  </span><span class="s1">previewData?: PreviewData</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Send body of response</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">type Send&lt;T&gt; = (body: T) =&gt; void</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Next `API` route response</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type NextApiResponse&lt;Data = any&gt; = ServerResponse &amp; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Send data `any` data in response</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">send: Send&lt;Data&gt;</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Send data `json` data in response</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">json: Send&lt;Data&gt;</span><span class="s3">\n  </span><span class="s1">status: (statusCode: number) =&gt; NextApiResponse&lt;Data&gt;</span><span class="s3">\n  </span><span class="s1">redirect(url: string): NextApiResponse&lt;Data&gt;</span><span class="s3">\n  </span><span class="s1">redirect(status: number, url: string): NextApiResponse&lt;Data&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Set draft mode</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">setDraftMode: (options: { enable: boolean }) =&gt; NextApiResponse&lt;Data&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Set preview data for Next.js' prerender mode</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">setPreviewData: (</span><span class="s3">\n    </span><span class="s1">data: object | string,</span><span class="s3">\n    </span><span class="s1">options?: {</span><span class="s3">\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* Specifies the number (in seconds) for the preview session to last for.</span><span class="s3">\n       </span><span class="s1">* The given number will be converted to an integer by rounding down.</span><span class="s3">\n       </span><span class="s1">* By default, no maximum age is set and the preview session finishes</span><span class="s3">\n       </span><span class="s1">* when the client shuts down (browser is closed).</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">maxAge?: number</span><span class="s3">\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* Specifies the path for the preview session to work under. By default,</span><span class="s3">\n       </span><span class="s1">* the path is considered the </span><span class="s3">\&quot;</span><span class="s1">default path</span><span class="s3">\&quot;</span><span class="s1">, i.e., any pages under </span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">path?: string</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">) =&gt; NextApiResponse&lt;Data&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Clear preview data for Next.js' prerender mode</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">clearPreviewData: (options?: { path?: string }) =&gt; NextApiResponse&lt;Data&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Revalidate a specific page and regenerate it using On-Demand Incremental</span><span class="s3">\n   </span><span class="s1">* Static Regeneration.</span><span class="s3">\n   </span><span class="s1">* The path should be an actual path, not a rewritten path. E.g. for</span><span class="s3">\n   </span><span class="s1">* </span><span class="s3">\&quot;</span><span class="s1">/blog/[slug]</span><span class="s3">\&quot; </span><span class="s1">this should be </span><span class="s3">\&quot;</span><span class="s1">/blog/post-1</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n   </span><span class="s1">* @link https://nextjs.org/docs/app/building-your-application/data-fetching/incremental-static-regeneration#on-demand-revalidation-with-revalidatepath</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">revalidate: (</span><span class="s3">\n    </span><span class="s1">urlPath: string,</span><span class="s3">\n    </span><span class="s1">opts?: {</span><span class="s3">\n      </span><span class="s1">unstable_onlyGenerated?: boolean</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">) =&gt; Promise&lt;void&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Next `API` route handler</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type NextApiHandler&lt;T = any&gt; = (</span><span class="s3">\n  </span><span class="s1">req: NextApiRequest,</span><span class="s3">\n  </span><span class="s1">res: NextApiResponse&lt;T&gt;</span><span class="s3">\n</span><span class="s1">) =&gt; unknown | Promise&lt;unknown&gt;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Utils</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function execOnce&lt;T extends (...args: any[]) =&gt; ReturnType&lt;T&gt;&gt;(</span><span class="s3">\n  </span><span class="s1">fn: T</span><span class="s3">\n</span><span class="s1">): T {</span><span class="s3">\n  </span><span class="s1">let used = false</span><span class="s3">\n  </span><span class="s1">let result: ReturnType&lt;T&gt;</span><span class="s3">\n\n  </span><span class="s1">return ((...args: any[]) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (!used) {</span><span class="s3">\n      </span><span class="s1">used = true</span><span class="s3">\n      </span><span class="s1">result = fn(...args)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return result</span><span class="s3">\n  </span><span class="s1">}) as T</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1</span><span class="s3">\n</span><span class="s1">// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3</span><span class="s3">\n</span><span class="s1">const ABSOLUTE_URL_REGEX = /^[a-zA-Z][a-zA-Z</span><span class="s3">\\</span><span class="s1">d+</span><span class="s3">\\</span><span class="s1">-.]*?:/</span><span class="s3">\n</span><span class="s1">export const isAbsoluteUrl = (url: string) =&gt; ABSOLUTE_URL_REGEX.test(url)</span><span class="s3">\n\n</span><span class="s1">export function getLocationOrigin() {</span><span class="s3">\n  </span><span class="s1">const { protocol, hostname, port } = window.location</span><span class="s3">\n  </span><span class="s1">return `${protocol}//${hostname}${port ? ':' + port : ''}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getURL() {</span><span class="s3">\n  </span><span class="s1">const { href } = window.location</span><span class="s3">\n  </span><span class="s1">const origin = getLocationOrigin()</span><span class="s3">\n  </span><span class="s1">return href.substring(origin.length)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getDisplayName&lt;P&gt;(Component: ComponentType&lt;P&gt;) {</span><span class="s3">\n  </span><span class="s1">return typeof Component === 'string'</span><span class="s3">\n    </span><span class="s1">? Component</span><span class="s3">\n    </span><span class="s1">: Component.displayName || Component.name || 'Unknown'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isResSent(res: ServerResponse) {</span><span class="s3">\n  </span><span class="s1">return res.finished || res.headersSent</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function normalizeRepeatedSlashes(url: string) {</span><span class="s3">\n  </span><span class="s1">const urlParts = url.split('?')</span><span class="s3">\n  </span><span class="s1">const urlNoQuery = urlParts[0]</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">urlNoQuery</span><span class="s3">\n      </span><span class="s1">// first we replace any non-encoded backslashes with forward</span><span class="s3">\n      </span><span class="s1">// then normalize repeated forward slashes</span><span class="s3">\n      </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n      </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/+/g, '/') +</span><span class="s3">\n    </span><span class="s1">(urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function loadGetInitialProps&lt;</span><span class="s3">\n  </span><span class="s1">C extends BaseContext,</span><span class="s3">\n  </span><span class="s1">IP = {},</span><span class="s3">\n  </span><span class="s1">P = {},</span><span class="s3">\n</span><span class="s1">&gt;(App: NextComponentType&lt;C, IP, P&gt;, ctx: C): Promise&lt;IP&gt; {</span><span class="s3">\n  </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n    </span><span class="s1">if (App.prototype?.getInitialProps) {</span><span class="s3">\n      </span><span class="s1">const message = `</span><span class="s3">\&quot;</span><span class="s1">${getDisplayName(</span><span class="s3">\n        </span><span class="s1">App</span><span class="s3">\n      </span><span class="s1">)}.getInitialProps()</span><span class="s3">\&quot; </span><span class="s1">is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`</span><span class="s3">\n      </span><span class="s1">throw new Error(message)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// when called from _app `ctx` is nested in `ctx`</span><span class="s3">\n  </span><span class="s1">const res = ctx.res || (ctx.ctx &amp;&amp; ctx.ctx.res)</span><span class="s3">\n\n  </span><span class="s1">if (!App.getInitialProps) {</span><span class="s3">\n    </span><span class="s1">if (ctx.ctx &amp;&amp; ctx.Component) {</span><span class="s3">\n      </span><span class="s1">// @ts-ignore pageProps default</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return {} as IP</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const props = await App.getInitialProps(ctx)</span><span class="s3">\n\n  </span><span class="s1">if (res &amp;&amp; isResSent(res)) {</span><span class="s3">\n    </span><span class="s1">return props</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!props) {</span><span class="s3">\n    </span><span class="s1">const message = `</span><span class="s3">\&quot;</span><span class="s1">${getDisplayName(</span><span class="s3">\n      </span><span class="s1">App</span><span class="s3">\n    </span><span class="s1">)}.getInitialProps()</span><span class="s3">\&quot; </span><span class="s1">should resolve to an object. But found </span><span class="s3">\&quot;</span><span class="s1">${props}</span><span class="s3">\&quot; </span><span class="s1">instead.`</span><span class="s3">\n    </span><span class="s1">throw new Error(message)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n    </span><span class="s1">if (Object.keys(props).length === 0 &amp;&amp; !ctx.ctx) {</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">`${getDisplayName(</span><span class="s3">\n          </span><span class="s1">App</span><span class="s3">\n        </span><span class="s1">)} returned an empty object from </span><span class="s3">\\</span><span class="s1">`getInitialProps</span><span class="s3">\\</span><span class="s1">`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return props</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const SP = typeof performance !== 'undefined'</span><span class="s3">\n</span><span class="s1">export const ST =</span><span class="s3">\n  </span><span class="s1">SP &amp;&amp;</span><span class="s3">\n  </span><span class="s1">(['mark', 'measure', 'getEntriesByName'] as const).every(</span><span class="s3">\n    </span><span class="s1">(method) =&gt; typeof performance[method] === 'function'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">export class DecodeError extends Error {}</span><span class="s3">\n</span><span class="s1">export class NormalizeError extends Error {}</span><span class="s3">\n</span><span class="s1">export class PageNotFoundError extends Error {</span><span class="s3">\n  </span><span class="s1">code: string</span><span class="s3">\n\n  </span><span class="s1">constructor(page: string) {</span><span class="s3">\n    </span><span class="s1">super()</span><span class="s3">\n    </span><span class="s1">this.code = 'ENOENT'</span><span class="s3">\n    </span><span class="s1">this.name = 'PageNotFoundError'</span><span class="s3">\n    </span><span class="s1">this.message = `Cannot find module for page: ${page}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class MissingStaticPage extends Error {</span><span class="s3">\n  </span><span class="s1">constructor(page: string, message: string) {</span><span class="s3">\n    </span><span class="s1">super()</span><span class="s3">\n    </span><span class="s1">this.message = `Failed to load static file for page: ${page} ${message}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class MiddlewareNotFoundError extends Error {</span><span class="s3">\n  </span><span class="s1">code: string</span><span class="s3">\n  </span><span class="s1">constructor() {</span><span class="s3">\n    </span><span class="s1">super()</span><span class="s3">\n    </span><span class="s1">this.code = 'ENOENT'</span><span class="s3">\n    </span><span class="s1">this.message = `Cannot find the middleware module`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CacheFs {</span><span class="s3">\n  </span><span class="s1">existsSync: typeof fs.existsSync</span><span class="s3">\n  </span><span class="s1">readFile: typeof fs.promises.readFile</span><span class="s3">\n  </span><span class="s1">readFileSync: typeof fs.readFileSync</span><span class="s3">\n  </span><span class="s1">writeFile(f: string, d: any): Promise&lt;void&gt;</span><span class="s3">\n  </span><span class="s1">mkdir(dir: string): Promise&lt;void | string&gt;</span><span class="s3">\n  </span><span class="s1">stat(f: string): Promise&lt;{ mtime: Date }&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function stringifyError(error: Error) {</span><span class="s3">\n  </span><span class="s1">return JSON.stringify({ message: error.message, stack: error.stack })</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DecodeError&quot;</span><span class="s0">,</span><span class="s1">&quot;MiddlewareNotFoundError&quot;</span><span class="s0">,</span><span class="s1">&quot;MissingStaticPage&quot;</span><span class="s0">,</span><span class="s1">&quot;NormalizeError&quot;</span><span class="s0">,</span><span class="s1">&quot;PageNotFoundError&quot;</span><span class="s0">,</span><span class="s1">&quot;SP&quot;</span><span class="s0">,</span><span class="s1">&quot;ST&quot;</span><span class="s0">,</span><span class="s1">&quot;WEB_VITALS&quot;</span><span class="s0">,</span><span class="s1">&quot;execOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;getDisplayName&quot;</span><span class="s0">,</span><span class="s1">&quot;getLocationOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;getURL&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbsoluteUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;isResSent&quot;</span><span class="s0">,</span><span class="s1">&quot;loadGetInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRepeatedSlashes&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifyError&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;used&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;ABSOLUTE_URL_REGEX&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;location&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;displayName&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;headersSent&quot;</span><span class="s0">,</span><span class="s1">&quot;urlParts&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;urlNoQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;App&quot;</span><span class="s0">,</span><span class="s1">&quot;ctx&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;prototype&quot;</span><span class="s0">,</span><span class="s1">&quot;getInitialProps&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;pageProps&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">1951</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/route-pattern-normalizer.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Token } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Route pattern normalization utilities for path-to-regexp compatibility.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* path-to-regexp 6.3.0+ introduced stricter validation that rejects certain</span><span class="s3">\n </span><span class="s1">* patterns commonly used in Next.js interception routes. This module provides</span><span class="s3">\n </span><span class="s1">* normalization functions to make Next.js route patterns compatible with the</span><span class="s3">\n </span><span class="s1">* updated library while preserving all functionality.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Internal separator used to normalize adjacent parameter patterns.</span><span class="s3">\n </span><span class="s1">* This unique marker is inserted between adjacent parameters and stripped out</span><span class="s3">\n </span><span class="s1">* during parameter extraction to avoid conflicts with real URL content.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const PARAM_SEPARATOR = '_NEXTSEP_'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Detects if a route pattern needs normalization for path-to-regexp compatibility.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function hasAdjacentParameterIssues(route: string): boolean {</span><span class="s3">\n  </span><span class="s1">if (typeof route !== 'string') return false</span><span class="s3">\n\n  </span><span class="s1">// Check for interception route markers followed immediately by parameters</span><span class="s3">\n  </span><span class="s1">// Pattern: /(.):param, /(..):param, /(...):param, /(.)(.):param etc.</span><span class="s3">\n  </span><span class="s1">// These patterns cause </span><span class="s3">\&quot;</span><span class="s1">Must have text between two parameters</span><span class="s3">\&quot; </span><span class="s1">errors</span><span class="s3">\n  </span><span class="s1">if (/</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">(</span><span class="s3">\\</span><span class="s1">.{1,3}</span><span class="s3">\\</span><span class="s1">):[^/</span><span class="s3">\\</span><span class="s1">s]+/.test(route)) {</span><span class="s3">\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Check for basic adjacent parameters without separators</span><span class="s3">\n  </span><span class="s1">// Pattern: :param1:param2 (but not :param* or other URL patterns)</span><span class="s3">\n  </span><span class="s1">if (/:[a-zA-Z_][a-zA-Z0-9_]*:[a-zA-Z_][a-zA-Z0-9_]*/.test(route)) {</span><span class="s3">\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return false</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Normalizes route patterns that have adjacent parameters without text between them.</span><span class="s3">\n </span><span class="s1">* Inserts a unique separator that can be safely stripped out later.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeAdjacentParameters(route: string): string {</span><span class="s3">\n  </span><span class="s1">let normalized = route</span><span class="s3">\n\n  </span><span class="s1">// Handle interception route patterns: (.):param -&gt; (.)_NEXTSEP_:param</span><span class="s3">\n  </span><span class="s1">normalized = normalized.replace(</span><span class="s3">\n    </span><span class="s1">/(</span><span class="s3">\\</span><span class="s1">([^)]*</span><span class="s3">\\</span><span class="s1">)):([^/</span><span class="s3">\\</span><span class="s1">s]+)/g,</span><span class="s3">\n    </span><span class="s1">`$1${PARAM_SEPARATOR}:$2`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">// Handle other adjacent parameter patterns: :param1:param2 -&gt; :param1_NEXTSEP_:param2</span><span class="s3">\n  </span><span class="s1">normalized = normalized.replace(/:([^:/</span><span class="s3">\\</span><span class="s1">s)]+)(?=:)/g, `:$1${PARAM_SEPARATOR}`)</span><span class="s3">\n\n  </span><span class="s1">return normalized</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Normalizes tokens that have repeating modifiers (* or +) but empty prefix and suffix.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* path-to-regexp 6.3.0+ introduced validation that throws:</span><span class="s3">\n </span><span class="s1">* </span><span class="s3">\&quot;</span><span class="s1">Can not repeat without prefix/suffix</span><span class="s3">\&quot;\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This occurs when a token has modifier: '*' or '+' with both prefix: '' and suffix: ''</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeTokensForRegexp(tokens: Token[]): Token[] {</span><span class="s3">\n  </span><span class="s1">return tokens.map((token) =&gt; {</span><span class="s3">\n    </span><span class="s1">// Token union type: Token = string | TokenObject</span><span class="s3">\n    </span><span class="s1">// Literal path segments are strings, parameters/wildcards are objects</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">typeof token === 'object' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">token !== null &amp;&amp;</span><span class="s3">\n      </span><span class="s1">// Not all token objects have 'modifier' property (e.g., simple text tokens)</span><span class="s3">\n      </span><span class="s1">'modifier' in token &amp;&amp;</span><span class="s3">\n      </span><span class="s1">// Only repeating modifiers (* or +) cause the validation error</span><span class="s3">\n      </span><span class="s1">// Other modifiers like '?' (optional) are fine</span><span class="s3">\n      </span><span class="s1">(token.modifier === '*' || token.modifier === '+') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">// Token objects can have different shapes depending on route pattern</span><span class="s3">\n      </span><span class="s1">'prefix' in token &amp;&amp;</span><span class="s3">\n      </span><span class="s1">'suffix' in token &amp;&amp;</span><span class="s3">\n      </span><span class="s1">// Both prefix and suffix must be empty strings</span><span class="s3">\n      </span><span class="s1">// This is what causes the validation error in path-to-regexp</span><span class="s3">\n      </span><span class="s1">token.prefix === '' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">token.suffix === ''</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// Add minimal prefix to satisfy path-to-regexp validation</span><span class="s3">\n      </span><span class="s1">// We use '/' as it's the most common path delimiter and won't break route matching</span><span class="s3">\n      </span><span class="s1">// The prefix gets used in regex generation but doesn't affect parameter extraction</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">...token,</span><span class="s3">\n        </span><span class="s1">prefix: '/',</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return token</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Strips normalization separators from extracted route parameters.</span><span class="s3">\n </span><span class="s1">* Used by both server and client code to clean up parameters after route matching.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function stripParameterSeparators(</span><span class="s3">\n  </span><span class="s1">params: Record&lt;string, any&gt;</span><span class="s3">\n</span><span class="s1">): Record&lt;string, any&gt; {</span><span class="s3">\n  </span><span class="s1">const cleaned: Record&lt;string, any&gt; = {}</span><span class="s3">\n\n  </span><span class="s1">for (const [key, value] of Object.entries(params)) {</span><span class="s3">\n    </span><span class="s1">if (typeof value === 'string') {</span><span class="s3">\n      </span><span class="s1">// Remove the separator if it appears at the start of parameter values</span><span class="s3">\n      </span><span class="s1">cleaned[key] = value.replace(new RegExp(`^${PARAM_SEPARATOR}`), '')</span><span class="s3">\n    </span><span class="s1">} else if (Array.isArray(value)) {</span><span class="s3">\n      </span><span class="s1">// Handle array parameters (from repeated route segments)</span><span class="s3">\n      </span><span class="s1">cleaned[key] = value.map((item) =&gt;</span><span class="s3">\n        </span><span class="s1">typeof item === 'string'</span><span class="s3">\n          </span><span class="s1">? item.replace(new RegExp(`^${PARAM_SEPARATOR}`), '')</span><span class="s3">\n          </span><span class="s1">: item</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">cleaned[key] = value</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return cleaned</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;hasAdjacentParameterIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAdjacentParameters&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeTokensForRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;stripParameterSeparators&quot;</span><span class="s0">,</span><span class="s1">&quot;PARAM_SEPARATOR&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;normalized&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;tokens&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;token&quot;</span><span class="s0">,</span><span class="s1">&quot;modifier&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;suffix&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;cleaned&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;IAqBgBA,0BAA0B,EAAA;eAA1BA;;IAuBAC,2BAA2B,EAAA;eAA3BA;;IAuBAC,wBAAwB,EAAA;eAAxBA;;IAoCAC,wBAAwB,EAAA;eAAxBA;;;AArGhB;;;;;;;CAOC,GAED;;;;CAIC,GACD,MAAMC,kBAAkB;AAKjB,SAASJ,2BAA2BK,KAAa;IACtD,IAAI,OAAOA,UAAU,UAAU,OAAO;IAEtC,0EAA0E;IAC1E,qEAAqE;IACrE,sEAAsE;IACtE,IAAI,wBAAwBC,IAAI,CAACD,QAAQ;QACvC,OAAO;IACT;IAEA,yDAAyD;IACzD,kEAAkE;IAClE,IAAI,iDAAiDC,IAAI,CAACD,QAAQ;QAChE,OAAO;IACT;IAEA,OAAO;AACT;AAMO,SAASJ,4BAA4BI,KAAa;IACvD,IAAIE,aAAaF;IAEjB,sEAAsE;IACtEE,aAAaA,WAAWC,OAAO,CAC7B,0BACA,CAAC,EAAE,EAAEJ,gBAAgB,GAAG,CAAC;IAG3B,sFAAsF;IACtFG,aAAaA,WAAWC,OAAO,CAAC,sBAAsB,CAAC,GAAG,EAAEJ,iBAAiB;IAE7E,OAAOG;AACT;AAUO,SAASL,yBAAyBO,MAAe;IACtD,OAAOA,OAAOC,GAAG,CAAC,CAACC;QACjB,iDAAiD;QACjD,sEAAsE;QACtE,IACE,OAAOA,UAAU,YACjBA,UAAU,QACV,4EAA4E;QAC5E,cAAcA,SACd,+DAA+D;QAC/D,+CAA+C;QAC9CA,CAAAA,MAAMC,QAAQ,KAAK,OAAOD,MAAMC,QAAQ,KAAK,GAAE,KAChD,qEAAqE;QACrE,YAAYD,SACZ,YAAYA,SACZ,+CAA+C;QAC/C,6DAA6D;QAC7DA,MAAME,MAAM,KAAK,MACjBF,MAAMG,MAAM,KAAK,IACjB;YACA,0DAA0D;YAC1D,mFAAmF;YACnF,mFAAmF;YACnF,OAAO;gBACL,GAAGH,KAAK;gBACRE,QAAQ;YACV;QACF;QACA,OAAOF;IACT;AACF;AAMO,SAASR,yBACdY,MAA2B;IAE3B,MAAMC,UAA+B,CAAC;IAEtC,KAAK,MAAM,CAACC,KAAKC,MAAM,IAAIC,OAAOC,OAAO,CAACL,QAAS;QACjD,IAAI,OAAOG,UAAU,UAAU;YAC7B,sEAAsE;YACtEF,OAAO,CAACC,IAAI,GAAGC,MAAMV,OAAO,CAAC,IAAIa,OAAO,CAAC,CAAC,EAAEjB,iBAAiB,GAAG;QAClE,OAAO,IAAIkB,MAAMC,OAAO,CAACL,QAAQ;YAC/B,yDAAyD;YACzDF,OAAO,CAACC,IAAI,GAAGC,MAAMR,GAAG,CAAC,CAACc,OACxB,OAAOA,SAAS,WACZA,KAAKhB,OAAO,CAAC,IAAIa,OAAO,CAAC,CAAC,EAAEjB,iBAAiB,GAAG,MAChDoB;QAER,OAAO;YACLR,OAAO,CAACC,IAAI,GAAGC;QACjB;IACF;IAEA,OAAOF;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2056</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/route-match-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Client-safe utilities for route matching that don't import server-side</span><span class="s3">\n </span><span class="s1">* utilities to avoid bundling issues with Turbopack</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Key,</span><span class="s3">\n  </span><span class="s1">TokensToRegexpOptions,</span><span class="s3">\n  </span><span class="s1">ParseOptions,</span><span class="s3">\n  </span><span class="s1">TokensToFunctionOptions,</span><span class="s3">\n</span><span class="s1">} from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">pathToRegexp,</span><span class="s3">\n  </span><span class="s1">compile,</span><span class="s3">\n  </span><span class="s1">regexpToFunction,</span><span class="s3">\n</span><span class="s1">} from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">hasAdjacentParameterIssues,</span><span class="s3">\n  </span><span class="s1">normalizeAdjacentParameters,</span><span class="s3">\n  </span><span class="s1">stripParameterSeparators,</span><span class="s3">\n</span><span class="s1">} from '../../../../lib/route-pattern-normalizer'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Client-safe wrapper around pathToRegexp that handles path-to-regexp 6.3.0+ validation errors.</span><span class="s3">\n </span><span class="s1">* This includes both </span><span class="s3">\&quot;</span><span class="s1">Can not repeat without prefix/suffix</span><span class="s3">\&quot; </span><span class="s1">and </span><span class="s3">\&quot;</span><span class="s1">Must have text between parameters</span><span class="s3">\&quot; </span><span class="s1">errors.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function safePathToRegexp(</span><span class="s3">\n  </span><span class="s1">route: string | RegExp | Array&lt;string | RegExp&gt;,</span><span class="s3">\n  </span><span class="s1">keys?: Key[],</span><span class="s3">\n  </span><span class="s1">options?: TokensToRegexpOptions &amp; ParseOptions</span><span class="s3">\n</span><span class="s1">): RegExp {</span><span class="s3">\n  </span><span class="s1">if (typeof route !== 'string') {</span><span class="s3">\n    </span><span class="s1">return pathToRegexp(route, keys, options)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Check if normalization is needed and cache the result</span><span class="s3">\n  </span><span class="s1">const needsNormalization = hasAdjacentParameterIssues(route)</span><span class="s3">\n  </span><span class="s1">const routeToUse = needsNormalization</span><span class="s3">\n    </span><span class="s1">? normalizeAdjacentParameters(route)</span><span class="s3">\n    </span><span class="s1">: route</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return pathToRegexp(routeToUse, keys, options)</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">// Only try normalization if we haven't already normalized</span><span class="s3">\n    </span><span class="s1">if (!needsNormalization) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const normalizedRoute = normalizeAdjacentParameters(route)</span><span class="s3">\n        </span><span class="s1">return pathToRegexp(normalizedRoute, keys, options)</span><span class="s3">\n      </span><span class="s1">} catch (retryError) {</span><span class="s3">\n        </span><span class="s1">// If that doesn't work, fall back to original error</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Client-safe wrapper around compile that handles path-to-regexp 6.3.0+ validation errors.</span><span class="s3">\n </span><span class="s1">* No server-side error reporting to avoid bundling issues.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function safeCompile(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">options?: TokensToFunctionOptions &amp; ParseOptions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// Check if normalization is needed and cache the result</span><span class="s3">\n  </span><span class="s1">const needsNormalization = hasAdjacentParameterIssues(route)</span><span class="s3">\n  </span><span class="s1">const routeToUse = needsNormalization</span><span class="s3">\n    </span><span class="s1">? normalizeAdjacentParameters(route)</span><span class="s3">\n    </span><span class="s1">: route</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return compile(routeToUse, options)</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">// Only try normalization if we haven't already normalized</span><span class="s3">\n    </span><span class="s1">if (!needsNormalization) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const normalizedRoute = normalizeAdjacentParameters(route)</span><span class="s3">\n        </span><span class="s1">return compile(normalizedRoute, options)</span><span class="s3">\n      </span><span class="s1">} catch (retryError) {</span><span class="s3">\n        </span><span class="s1">// If that doesn't work, fall back to original error</span><span class="s3">\n        </span><span class="s1">throw error</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Client-safe wrapper around regexpToFunction that automatically cleans parameters.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function safeRegexpToFunction&lt;</span><span class="s3">\n  </span><span class="s1">T extends Record&lt;string, any&gt; = Record&lt;string, any&gt;,</span><span class="s3">\n</span><span class="s1">&gt;(regexp: RegExp, keys?: Key[]): (pathname: string) =&gt; { params: T } | false {</span><span class="s3">\n  </span><span class="s1">const originalMatcher = regexpToFunction&lt;T&gt;(regexp, keys || [])</span><span class="s3">\n\n  </span><span class="s1">return (pathname: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">const result = originalMatcher(pathname)</span><span class="s3">\n    </span><span class="s1">if (!result) return false</span><span class="s3">\n\n    </span><span class="s1">// Clean parameters before returning</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">...result,</span><span class="s3">\n      </span><span class="s1">params: stripParameterSeparators(result.params as any) as T,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Safe wrapper for route matcher functions that automatically cleans parameters.</span><span class="s3">\n </span><span class="s1">* This is client-safe and doesn't import path-to-regexp.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function safeRouteMatcher&lt;T extends Record&lt;string, any&gt;&gt;(</span><span class="s3">\n  </span><span class="s1">matcherFn: (pathname: string) =&gt; false | T</span><span class="s3">\n</span><span class="s1">): (pathname: string) =&gt; false | T {</span><span class="s3">\n  </span><span class="s1">return (pathname: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">const result = matcherFn(pathname)</span><span class="s3">\n    </span><span class="s1">if (!result) return false</span><span class="s3">\n\n    </span><span class="s1">// Clean parameters before returning</span><span class="s3">\n    </span><span class="s1">return stripParameterSeparators(result) as T</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;safeCompile&quot;</span><span class="s0">,</span><span class="s1">&quot;safePathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;safeRegexpToFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;safeRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;pathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;needsNormalization&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAdjacentParameterIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;routeToUse&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAdjacentParameters&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;retryError&quot;</span><span class="s0">,</span><span class="s1">&quot;compile&quot;</span><span class="s0">,</span><span class="s1">&quot;regexp&quot;</span><span class="s0">,</span><span class="s1">&quot;originalMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;regexpToFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;stripParameterSeparators&quot;</span><span class="s0">,</span><span class="s1">&quot;matcherFn&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;CAGC;;;;;;;;;;;;;;;;IA2DeA,WAAW,EAAA;eAAXA;;IApCAC,gBAAgB,EAAA;eAAhBA;;IAkEAC,oBAAoB,EAAA;eAApBA;;IAqBAC,gBAAgB,EAAA;eAAhBA;;;8BAlGT;wCAKA;AAMA,SAASF,iBACdG,KAA+C,EAC/CC,IAAY,EACZC,OAA8C;IAE9C,IAAI,OAAOF,UAAU,UAAU;QAC7B,OAAOG,CAAAA,GAAAA,cAAAA,YAAY,EAACH,OAAOC,MAAMC;IACnC;IAEA,wDAAwD;IACxD,MAAME,qBAAqBC,CAAAA,GAAAA,wBAAAA,0BAA0B,EAACL;IACtD,MAAMM,aAAaF,qBACfG,CAAAA,GAAAA,wBAAAA,2BAA2B,EAACP,SAC5BA;IAEJ,IAAI;QACF,OAAOG,CAAAA,GAAAA,cAAAA,YAAY,EAACG,YAAYL,MAAMC;IACxC,EAAE,OAAOM,OAAO;QACd,0DAA0D;QAC1D,IAAI,CAACJ,oBAAoB;YACvB,IAAI;gBACF,MAAMK,kBAAkBF,CAAAA,GAAAA,wBAAAA,2BAA2B,EAACP;gBACpD,OAAOG,CAAAA,GAAAA,cAAAA,YAAY,EAACM,iBAAiBR,MAAMC;YAC7C,EAAE,OAAOQ,YAAY;gBACnB,oDAAoD;gBACpD,MAAMF;YACR;QACF;QACA,MAAMA;IACR;AACF;AAMO,SAASZ,YACdI,KAAa,EACbE,OAAgD;IAEhD,wDAAwD;IACxD,MAAME,qBAAqBC,CAAAA,GAAAA,wBAAAA,0BAA0B,EAACL;IACtD,MAAMM,aAAaF,qBACfG,CAAAA,GAAAA,wBAAAA,2BAA2B,EAACP,SAC5BA;IAEJ,IAAI;QACF,OAAOW,CAAAA,GAAAA,cAAAA,OAAO,EAACL,YAAYJ;IAC7B,EAAE,OAAOM,OAAO;QACd,0DAA0D;QAC1D,IAAI,CAACJ,oBAAoB;YACvB,IAAI;gBACF,MAAMK,kBAAkBF,CAAAA,GAAAA,wBAAAA,2BAA2B,EAACP;gBACpD,OAAOW,CAAAA,GAAAA,cAAAA,OAAO,EAACF,iBAAiBP;YAClC,EAAE,OAAOQ,YAAY;gBACnB,oDAAoD;gBACpD,MAAMF;YACR;QACF;QACA,MAAMA;IACR;AACF;AAKO,SAASV,qBAEdc,MAAc,EAAEX,IAAY;IAC5B,MAAMY,kBAAkBC,CAAAA,GAAAA,cAAAA,gBAAgB,EAAIF,QAAQX,QAAQ,EAAE;IAE9D,OAAO,CAACc;QACN,MAAMC,SAASH,gBAAgBE;QAC/B,IAAI,CAACC,QAAQ,OAAO;QAEpB,oCAAoC;QACpC,OAAO;YACL,GAAGA,MAAM;YACTC,QAAQC,CAAAA,GAAAA,wBAAAA,wBAAwB,EAACF,OAAOC,MAAM;QAChD;IACF;AACF;AAMO,SAASlB,iBACdoB,SAA0C;IAE1C,OAAO,CAACJ;QACN,MAAMC,SAASG,UAAUJ;QACzB,IAAI,CAACC,QAAQ,OAAO;QAEpB,oCAAoC;QACpC,OAAOE,CAAAA,GAAAA,wBAAAA,wBAAwB,EAACF;IAClC;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2157</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/route-matcher.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Group } from './route-regex'</span><span class="s3">\n</span><span class="s1">import { DecodeError } from '../../utils'</span><span class="s3">\n</span><span class="s1">import type { Params } from '../../../../server/request/params'</span><span class="s3">\n</span><span class="s1">import { safeRouteMatcher } from './route-match-utils'</span><span class="s3">\n\n</span><span class="s1">export interface RouteMatchFn {</span><span class="s3">\n  </span><span class="s1">(pathname: string): false | Params</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type RouteMatcherOptions = {</span><span class="s3">\n  </span><span class="s1">// We only use the exec method of the RegExp object. This helps us avoid using</span><span class="s3">\n  </span><span class="s1">// type assertions that the passed in properties are of the correct type.</span><span class="s3">\n  </span><span class="s1">re: Pick&lt;RegExp, 'exec'&gt;</span><span class="s3">\n  </span><span class="s1">groups: Record&lt;string, Group&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getRouteMatcher({</span><span class="s3">\n  </span><span class="s1">re,</span><span class="s3">\n  </span><span class="s1">groups,</span><span class="s3">\n</span><span class="s1">}: RouteMatcherOptions): RouteMatchFn {</span><span class="s3">\n  </span><span class="s1">const rawMatcher = (pathname: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">const routeMatch = re.exec(pathname)</span><span class="s3">\n    </span><span class="s1">if (!routeMatch) return false</span><span class="s3">\n\n    </span><span class="s1">const decode = (param: string) =&gt; {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">return decodeURIComponent(param)</span><span class="s3">\n      </span><span class="s1">} catch {</span><span class="s3">\n        </span><span class="s1">throw new DecodeError('failed to decode param')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const params: Params = {}</span><span class="s3">\n    </span><span class="s1">for (const [key, group] of Object.entries(groups)) {</span><span class="s3">\n      </span><span class="s1">const match = routeMatch[group.pos]</span><span class="s3">\n      </span><span class="s1">if (match !== undefined) {</span><span class="s3">\n        </span><span class="s1">if (group.repeat) {</span><span class="s3">\n          </span><span class="s1">params[key] = match.split('/').map((entry) =&gt; decode(entry))</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">params[key] = decode(match)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return params</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Wrap with safe matcher to handle parameter cleaning</span><span class="s3">\n  </span><span class="s1">return safeRouteMatcher(rawMatcher)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;groups&quot;</span><span class="s0">,</span><span class="s1">&quot;rawMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;routeMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;decode&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;DecodeError&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;group&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;repeat&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;safeRouteMatcher&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAgBgBA,mBAAAA;;;eAAAA;;;uBAfY;iCAEK;AAa1B,SAASA,gBAAgB,KAGV;IAHU,IAAA,EAC9BC,EAAE,EACFC,MAAM,EACc,GAHU;IAI9B,MAAMC,aAAa,CAACC;QAClB,MAAMC,aAAaJ,GAAGK,IAAI,CAACF;QAC3B,IAAI,CAACC,YAAY,OAAO;QAExB,MAAME,SAAS,CAACC;YACd,IAAI;gBACF,OAAOC,mBAAmBD;YAC5B,EAAE,OAAA,GAAM;gBACN,MAAM,OAAA,cAAyC,CAAzC,IAAIE,OAAAA,WAAW,CAAC,2BAAhB,qBAAA;2BAAA;gCAAA;kCAAA;gBAAwC;YAChD;QACF;QAEA,MAAMC,SAAiB,CAAC;QACxB,KAAK,MAAM,CAACC,KAAKC,MAAM,IAAIC,OAAOC,OAAO,CAACb,QAAS;YACjD,MAAMc,QAAQX,UAAU,CAACQ,MAAMI,GAAG,CAAC;YACnC,IAAID,UAAUE,WAAW;gBACvB,IAAIL,MAAMM,MAAM,EAAE;oBAChBR,MAAM,CAACC,IAAI,GAAGI,MAAMI,KAAK,CAAC,KAAKC,GAAG,CAAC,CAACC,QAAUf,OAAOe;gBACvD,OAAO;oBACLX,MAAM,CAACC,IAAI,GAAGL,OAAOS;gBACvB;YACF;QACF;QAEA,OAAOL;IACT;IAEA,sDAAsD;IACtD,OAAOY,CAAAA,GAAAA,iBAAAA,gBAAgB,EAACpB;AAC1B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2204</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/querystring.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n\n</span><span class="s1">export function searchParamsToUrlQuery(</span><span class="s3">\n  </span><span class="s1">searchParams: URLSearchParams</span><span class="s3">\n</span><span class="s1">): ParsedUrlQuery {</span><span class="s3">\n  </span><span class="s1">const query: ParsedUrlQuery = {}</span><span class="s3">\n  </span><span class="s1">for (const [key, value] of searchParams.entries()) {</span><span class="s3">\n    </span><span class="s1">const existing = query[key]</span><span class="s3">\n    </span><span class="s1">if (typeof existing === 'undefined') {</span><span class="s3">\n      </span><span class="s1">query[key] = value</span><span class="s3">\n    </span><span class="s1">} else if (Array.isArray(existing)) {</span><span class="s3">\n      </span><span class="s1">existing.push(value)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">query[key] = [existing, value]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return query</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function stringifyUrlQueryParam(param: unknown): string {</span><span class="s3">\n  </span><span class="s1">if (typeof param === 'string') {</span><span class="s3">\n    </span><span class="s1">return param</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">(typeof param === 'number' &amp;&amp; !isNaN(param)) ||</span><span class="s3">\n    </span><span class="s1">typeof param === 'boolean'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return String(param)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function urlQueryToSearchParams(query: ParsedUrlQuery): URLSearchParams {</span><span class="s3">\n  </span><span class="s1">const searchParams = new URLSearchParams()</span><span class="s3">\n  </span><span class="s1">for (const [key, value] of Object.entries(query)) {</span><span class="s3">\n    </span><span class="s1">if (Array.isArray(value)) {</span><span class="s3">\n      </span><span class="s1">for (const item of value) {</span><span class="s3">\n        </span><span class="s1">searchParams.append(key, stringifyUrlQueryParam(item))</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">searchParams.set(key, stringifyUrlQueryParam(value))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return searchParams</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function assign(</span><span class="s3">\n  </span><span class="s1">target: URLSearchParams,</span><span class="s3">\n  </span><span class="s1">...searchParamsList: URLSearchParams[]</span><span class="s3">\n</span><span class="s1">): URLSearchParams {</span><span class="s3">\n  </span><span class="s1">for (const searchParams of searchParamsList) {</span><span class="s3">\n    </span><span class="s1">for (const key of searchParams.keys()) {</span><span class="s3">\n      </span><span class="s1">target.delete(key)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">for (const [key, value] of searchParams.entries()) {</span><span class="s3">\n      </span><span class="s1">target.append(key, value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return target</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParamsToUrlQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;urlQueryToSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;existing&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifyUrlQueryParam&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;isNaN&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;URLSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;append&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParamsList&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;IAgDgBA,MAAM,EAAA;eAANA;;IA9CAC,sBAAsB,EAAA;eAAtBA;;IAgCAC,sBAAsB,EAAA;eAAtBA;;;AAhCT,SAASD,uBACdE,YAA6B;IAE7B,MAAMC,QAAwB,CAAC;IAC/B,KAAK,MAAM,CAACC,KAAKC,MAAM,IAAIH,aAAaI,OAAO,GAAI;QACjD,MAAMC,WAAWJ,KAAK,CAACC,IAAI;QAC3B,IAAI,OAAOG,aAAa,aAAa;YACnCJ,KAAK,CAACC,IAAI,GAAGC;QACf,OAAO,IAAIG,MAAMC,OAAO,CAACF,WAAW;YAClCA,SAASG,IAAI,CAACL;QAChB,OAAO;YACLF,KAAK,CAACC,IAAI,GAAG;gBAACG;gBAAUF;aAAM;QAChC;IACF;IACA,OAAOF;AACT;AAEA,SAASQ,uBAAuBC,KAAc;IAC5C,IAAI,OAAOA,UAAU,UAAU;QAC7B,OAAOA;IACT;IAEA,IACG,OAAOA,UAAU,YAAY,CAACC,MAAMD,UACrC,OAAOA,UAAU,WACjB;QACA,OAAOE,OAAOF;IAChB,OAAO;QACL,OAAO;IACT;AACF;AAEO,SAASX,uBAAuBE,KAAqB;IAC1D,MAAMD,eAAe,IAAIa;IACzB,KAAK,MAAM,CAACX,KAAKC,MAAM,IAAIW,OAAOV,OAAO,CAACH,OAAQ;QAChD,IAAIK,MAAMC,OAAO,CAACJ,QAAQ;YACxB,KAAK,MAAMY,QAAQZ,MAAO;gBACxBH,aAAagB,MAAM,CAACd,KAAKO,uBAAuBM;YAClD;QACF,OAAO;YACLf,aAAaiB,GAAG,CAACf,KAAKO,uBAAuBN;QAC/C;IACF;IACA,OAAOH;AACT;AAEO,SAASH,OACdqB,MAAuB;IACvB,IAAA,IAAA,OAAA,UAAA,MAAA,EAAGC,mBAAH,IAAA,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,OAAA;QAAGA,gBAAAA,CAAH,OAAA,EAAA,GAAA,SAAA,CAAA,KAAsC;;IAEtC,KAAK,MAAMnB,gBAAgBmB,iBAAkB;QAC3C,KAAK,MAAMjB,OAAOF,aAAaoB,IAAI,GAAI;YACrCF,OAAOG,MAAM,CAACnB;QAChB;QAEA,KAAK,MAAM,CAACA,KAAKC,MAAM,IAAIH,aAAaI,OAAO,GAAI;YACjDc,OAAOF,MAAM,CAACd,KAAKC;QACrB;IACF;IAEA,OAAOe;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2287</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/parse-relative-url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import { getLocationOrigin } from '../../utils'</span><span class="s3">\n</span><span class="s1">import { searchParamsToUrlQuery } from './querystring'</span><span class="s3">\n\n</span><span class="s1">export interface ParsedRelativeUrl {</span><span class="s3">\n  </span><span class="s1">hash: string</span><span class="s3">\n  </span><span class="s1">href: string</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">search: string</span><span class="s3">\n  </span><span class="s1">slashes: undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Parses path-relative urls (e.g. `/hello/world?foo=bar`). If url isn't path-relative</span><span class="s3">\n </span><span class="s1">* (e.g. `./hello`) then at least base must be.</span><span class="s3">\n </span><span class="s1">* Absolute urls are rejected with one exception, in the browser, absolute urls that are on</span><span class="s3">\n </span><span class="s1">* the current origin will be parsed as relative</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function parseRelativeUrl(</span><span class="s3">\n  </span><span class="s1">url: string,</span><span class="s3">\n  </span><span class="s1">base?: string,</span><span class="s3">\n  </span><span class="s1">parseQuery?: true</span><span class="s3">\n</span><span class="s1">): ParsedRelativeUrl</span><span class="s3">\n</span><span class="s1">export function parseRelativeUrl(</span><span class="s3">\n  </span><span class="s1">url: string,</span><span class="s3">\n  </span><span class="s1">base: string | undefined,</span><span class="s3">\n  </span><span class="s1">parseQuery: false</span><span class="s3">\n</span><span class="s1">): Omit&lt;ParsedRelativeUrl, 'query'&gt;</span><span class="s3">\n</span><span class="s1">export function parseRelativeUrl(</span><span class="s3">\n  </span><span class="s1">url: string,</span><span class="s3">\n  </span><span class="s1">base?: string,</span><span class="s3">\n  </span><span class="s1">parseQuery = true</span><span class="s3">\n</span><span class="s1">): ParsedRelativeUrl | Omit&lt;ParsedRelativeUrl, 'query'&gt; {</span><span class="s3">\n  </span><span class="s1">const globalBase = new URL(</span><span class="s3">\n    </span><span class="s1">typeof window === 'undefined' ? 'http://n' : getLocationOrigin()</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const resolvedBase = base</span><span class="s3">\n    </span><span class="s1">? new URL(base, globalBase)</span><span class="s3">\n    </span><span class="s1">: url.startsWith('.')</span><span class="s3">\n      </span><span class="s1">? new URL(</span><span class="s3">\n          </span><span class="s1">typeof window === 'undefined' ? 'http://n' : window.location.href</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: globalBase</span><span class="s3">\n\n  </span><span class="s1">const { pathname, searchParams, search, hash, href, origin } = new URL(</span><span class="s3">\n    </span><span class="s1">url,</span><span class="s3">\n    </span><span class="s1">resolvedBase</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (origin !== globalBase.origin) {</span><span class="s3">\n    </span><span class="s1">throw new Error(`invariant: invalid relative URL, router received ${url}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">query: parseQuery ? searchParamsToUrlQuery(searchParams) : undefined,</span><span class="s3">\n    </span><span class="s1">search,</span><span class="s3">\n    </span><span class="s1">hash,</span><span class="s3">\n    </span><span class="s1">href: href.slice(origin.length),</span><span class="s3">\n    </span><span class="s1">// We don't know for relative URLs at this point since we set a custom, internal</span><span class="s3">\n    </span><span class="s1">// base that isn't surfaced to users.</span><span class="s3">\n    </span><span class="s1">slashes: undefined,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parseRelativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;parseQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;globalBase&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;getLocationOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedBase&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;location&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParamsToUrlQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;slashes&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BA6BgBA,oBAAAA;;;eAAAA;;;uBA5BkB;6BACK;AA2BhC,SAASA,iBACdC,GAAW,EACXC,IAAa,EACbC,UAAiB;IAAjBA,IAAAA,eAAAA,KAAAA,GAAAA,aAAa;IAEb,MAAMC,aAAa,IAAIC,IACrB,OAAOC,WAAW,qBAAc,aAAaC,IAAAA,wBAAiB;IAGhE,MAAMC,eAAeN,OACjB,IAAIG,IAAIH,MAAME,cACdH,IAAIQ,UAAU,CAAC,OACb,IAAIJ,IACF,OAAOC,WAAW,qBAAc,aAAaA,OAAOI,QAAQ,CAACC,IAAI,OAEnEP;IAEN,MAAM,EAAEQ,QAAQ,EAAEC,YAAY,EAAEC,MAAM,EAAEC,IAAI,EAAEJ,IAAI,EAAEK,MAAM,EAAE,GAAG,IAAIX,IACjEJ,KACAO;IAGF,IAAIQ,WAAWZ,WAAWY,MAAM,EAAE;QAChC,MAAM,OAAA,cAAoE,CAApE,IAAIC,MAAO,sDAAmDhB,MAA9D,qBAAA;mBAAA;wBAAA;0BAAA;QAAmE;IAC3E;IAEA,OAAO;QACLW;QACAM,OAAOf,aAAagB,CAAAA,GAAAA,aAAAA,sBAAsB,EAACN,gBAAgBO;QAC3DN;QACAC;QACAJ,MAAMA,KAAKU,KAAK,CAACL,OAAOM,MAAM;QAC9B,gFAAgF;QAChF,qCAAqC;QACrCC,SAASH;IACX;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2325</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/parse-url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n\n</span><span class="s1">import { searchParamsToUrlQuery } from './querystring'</span><span class="s3">\n</span><span class="s1">import { parseRelativeUrl } from './parse-relative-url'</span><span class="s3">\n\n</span><span class="s1">export interface ParsedUrl {</span><span class="s3">\n  </span><span class="s1">hash: string</span><span class="s3">\n  </span><span class="s1">hostname?: string | null</span><span class="s3">\n  </span><span class="s1">href: string</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">port?: string | null</span><span class="s3">\n  </span><span class="s1">protocol?: string | null</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">search: string</span><span class="s3">\n  </span><span class="s1">slashes: boolean | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseUrl(url: string): ParsedUrl {</span><span class="s3">\n  </span><span class="s1">if (url.startsWith('/')) {</span><span class="s3">\n    </span><span class="s1">return parseRelativeUrl(url)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const parsedURL = new URL(url)</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">hash: parsedURL.hash,</span><span class="s3">\n    </span><span class="s1">hostname: parsedURL.hostname,</span><span class="s3">\n    </span><span class="s1">href: parsedURL.href,</span><span class="s3">\n    </span><span class="s1">pathname: parsedURL.pathname,</span><span class="s3">\n    </span><span class="s1">port: parsedURL.port,</span><span class="s3">\n    </span><span class="s1">protocol: parsedURL.protocol,</span><span class="s3">\n    </span><span class="s1">query: searchParamsToUrlQuery(parsedURL.searchParams),</span><span class="s3">\n    </span><span class="s1">search: parsedURL.search,</span><span class="s3">\n    </span><span class="s1">slashes:</span><span class="s3">\n      </span><span class="s1">parsedURL.href.slice(</span><span class="s3">\n        </span><span class="s1">parsedURL.protocol.length,</span><span class="s3">\n        </span><span class="s1">parsedURL.protocol.length + 2</span><span class="s3">\n      </span><span class="s1">) === '//',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;parseRelativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedURL&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParamsToUrlQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;slashes&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAiBgBA,YAAAA;;;eAAAA;;;6BAfuB;kCACN;AAc1B,SAASA,SAASC,GAAW;IAClC,IAAIA,IAAIC,UAAU,CAAC,MAAM;QACvB,OAAOC,CAAAA,GAAAA,kBAAAA,gBAAgB,EAACF;IAC1B;IAEA,MAAMG,YAAY,IAAIC,IAAIJ;IAC1B,OAAO;QACLK,MAAMF,UAAUE,IAAI;QACpBC,UAAUH,UAAUG,QAAQ;QAC5BC,MAAMJ,UAAUI,IAAI;QACpBC,UAAUL,UAAUK,QAAQ;QAC5BC,MAAMN,UAAUM,IAAI;QACpBC,UAAUP,UAAUO,QAAQ;QAC5BC,OAAOC,CAAAA,GAAAA,aAAAA,sBAAsB,EAACT,UAAUU,YAAY;QACpDC,QAAQX,UAAUW,MAAM;QACxBC,SACEZ,UAAUI,IAAI,CAACS,KAAK,CAClBb,UAAUO,QAAQ,CAACO,MAAM,EACzBd,UAAUO,QAAQ,CAACO,MAAM,GAAG,OACxB;IACV;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2356</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/cookie/index.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;(()=&gt;{</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;if(typeof __nccwpck_require__!==</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">)__nccwpck_require__.ab=__dirname+</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;var e={};(()=&gt;{var r=e;</span><span class="s3">\n</span><span class="s1">/*!</span><span class="s3">\n </span><span class="s1">* cookie</span><span class="s3">\n </span><span class="s1">* Copyright(c) 2012-2014 Roman Shtylman</span><span class="s3">\n </span><span class="s1">* Copyright(c) 2015 Douglas Christopher Wilson</span><span class="s3">\n </span><span class="s1">* MIT Licensed</span><span class="s3">\n </span><span class="s1">*/r.parse=parse;r.serialize=serialize;var i=decodeURIComponent;var t=encodeURIComponent;var a=/; */;var n=/^[</span><span class="s3">\\</span><span class="s1">u0009</span><span class="s3">\\</span><span class="s1">u0020-</span><span class="s3">\\</span><span class="s1">u007e</span><span class="s3">\\</span><span class="s1">u0080-</span><span class="s3">\\</span><span class="s1">u00ff]+$/;function parse(e,r){if(typeof e!==</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">argument str must be a string</span><span class="s3">\&quot;</span><span class="s1">)}var t={};var n=r||{};var o=e.split(a);var s=n.decode||i;for(var p=0;p&lt;o.length;p++){var f=o[p];var u=f.indexOf(</span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">);if(u&lt;0){continue}var v=f.substr(0,u).trim();var c=f.substr(++u,f.length).trim();if('</span><span class="s3">\&quot;</span><span class="s1">'==c[0]){c=c.slice(1,-1)}if(undefined==t[v]){t[v]=tryDecode(c,s)}}return t}function serialize(e,r,i){var a=i||{};var o=a.encode||t;if(typeof o!==</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option encode is invalid</span><span class="s3">\&quot;</span><span class="s1">)}if(!n.test(e)){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">argument name is invalid</span><span class="s3">\&quot;</span><span class="s1">)}var s=o(r);if(s&amp;&amp;!n.test(s)){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">argument val is invalid</span><span class="s3">\&quot;</span><span class="s1">)}var p=e+</span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">+s;if(null!=a.maxAge){var f=a.maxAge-0;if(isNaN(f)||!isFinite(f)){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option maxAge is invalid</span><span class="s3">\&quot;</span><span class="s1">)}p+=</span><span class="s3">\&quot;</span><span class="s1">; Max-Age=</span><span class="s3">\&quot;</span><span class="s1">+Math.floor(f)}if(a.domain){if(!n.test(a.domain)){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option domain is invalid</span><span class="s3">\&quot;</span><span class="s1">)}p+=</span><span class="s3">\&quot;</span><span class="s1">; Domain=</span><span class="s3">\&quot;</span><span class="s1">+a.domain}if(a.path){if(!n.test(a.path)){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option path is invalid</span><span class="s3">\&quot;</span><span class="s1">)}p+=</span><span class="s3">\&quot;</span><span class="s1">; Path=</span><span class="s3">\&quot;</span><span class="s1">+a.path}if(a.expires){if(typeof a.expires.toUTCString!==</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">){throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option expires is invalid</span><span class="s3">\&quot;</span><span class="s1">)}p+=</span><span class="s3">\&quot;</span><span class="s1">; Expires=</span><span class="s3">\&quot;</span><span class="s1">+a.expires.toUTCString()}if(a.httpOnly){p+=</span><span class="s3">\&quot;</span><span class="s1">; HttpOnly</span><span class="s3">\&quot;</span><span class="s1">}if(a.secure){p+=</span><span class="s3">\&quot;</span><span class="s1">; Secure</span><span class="s3">\&quot;</span><span class="s1">}if(a.sameSite){var u=typeof a.sameSite===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">?a.sameSite.toLowerCase():a.sameSite;switch(u){case true:p+=</span><span class="s3">\&quot;</span><span class="s1">; SameSite=Strict</span><span class="s3">\&quot;</span><span class="s1">;break;case</span><span class="s3">\&quot;</span><span class="s1">lax</span><span class="s3">\&quot;</span><span class="s1">:p+=</span><span class="s3">\&quot;</span><span class="s1">; SameSite=Lax</span><span class="s3">\&quot;</span><span class="s1">;break;case</span><span class="s3">\&quot;</span><span class="s1">strict</span><span class="s3">\&quot;</span><span class="s1">:p+=</span><span class="s3">\&quot;</span><span class="s1">; SameSite=Strict</span><span class="s3">\&quot;</span><span class="s1">;break;case</span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">:p+=</span><span class="s3">\&quot;</span><span class="s1">; SameSite=None</span><span class="s3">\&quot;</span><span class="s1">;break;default:throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">option sameSite is invalid</span><span class="s3">\&quot;</span><span class="s1">)}}return p}function tryDecode(e,r){try{return r(e)}catch(r){return e}}})();module.exports=e})();&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2478</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/api-utils/get-cookie-parser.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextApiRequestCookies } from '.'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Parse cookies from the `headers` of request</span><span class="s3">\n </span><span class="s1">* @param req request object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">export function getCookieParser(headers: {</span><span class="s3">\n  </span><span class="s1">[key: string]: string | string[] | null | undefined</span><span class="s3">\n</span><span class="s1">}): () =&gt; NextApiRequestCookies {</span><span class="s3">\n  </span><span class="s1">return function parseCookie(): NextApiRequestCookies {</span><span class="s3">\n    </span><span class="s1">const { cookie } = headers</span><span class="s3">\n\n    </span><span class="s1">if (!cookie) {</span><span class="s3">\n      </span><span class="s1">return {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { parse: parseCookieFn } =</span><span class="s3">\n      </span><span class="s1">require('next/dist/compiled/cookie') as typeof import('next/dist/compiled/cookie')</span><span class="s3">\n    </span><span class="s1">return parseCookieFn(Array.isArray(cookie) ? cookie.join('; ') : cookie)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getCookieParser&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;parseCookie&quot;</span><span class="s0">,</span><span class="s1">&quot;cookie&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;parseCookieFn&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAOgBA,mBAAAA;;;eAAAA;;;AAAT,SAASA,gBAAgBC,OAE/B;IACC,OAAO,SAASC;QACd,MAAM,EAAEC,MAAM,EAAE,GAAGF;QAEnB,IAAI,CAACE,QAAQ;YACX,OAAO,CAAC;QACV;QAEA,MAAM,EAAEC,OAAOC,aAAa,EAAE,GAC5BC,QAAQ;QACV,OAAOD,cAAcE,MAAMC,OAAO,CAACL,UAAUA,OAAOM,IAAI,CAAC,QAAQN;IACnE;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2501</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/prepare-destination.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { IncomingMessage } from 'http'</span><span class="s3">\n</span><span class="s1">import type { Key } from 'next/dist/compiled/path-to-regexp'</span><span class="s3">\n</span><span class="s1">import type { NextParsedUrlQuery } from '../../../../server/request-meta'</span><span class="s3">\n</span><span class="s1">import type { RouteHas } from '../../../../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import type { BaseNextRequest } from '../../../../server/base-http'</span><span class="s3">\n\n</span><span class="s1">import { escapeStringRegexp } from '../../escape-regexp'</span><span class="s3">\n</span><span class="s1">import { parseUrl } from './parse-url'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">INTERCEPTION_ROUTE_MARKERS,</span><span class="s3">\n  </span><span class="s1">isInterceptionRouteAppPath,</span><span class="s3">\n</span><span class="s1">} from './interception-routes'</span><span class="s3">\n</span><span class="s1">import { getCookieParser } from '../../../../server/api-utils/get-cookie-parser'</span><span class="s3">\n</span><span class="s1">import type { Params } from '../../../../server/request/params'</span><span class="s3">\n</span><span class="s1">import { safePathToRegexp, safeCompile } from './route-match-utils'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Ensure only a-zA-Z are used for param names for proper interpolating</span><span class="s3">\n </span><span class="s1">* with path-to-regexp</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getSafeParamName(paramName: string) {</span><span class="s3">\n  </span><span class="s1">let newParamName = ''</span><span class="s3">\n\n  </span><span class="s1">for (let i = 0; i &lt; paramName.length; i++) {</span><span class="s3">\n    </span><span class="s1">const charCode = paramName.charCodeAt(i)</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(charCode &gt; 64 &amp;&amp; charCode &lt; 91) || // A-Z</span><span class="s3">\n      </span><span class="s1">(charCode &gt; 96 &amp;&amp; charCode &lt; 123) // a-z</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">newParamName += paramName[i]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return newParamName</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function escapeSegment(str: string, segmentName: string) {</span><span class="s3">\n  </span><span class="s1">return str.replace(</span><span class="s3">\n    </span><span class="s1">new RegExp(`:${escapeStringRegexp(segmentName)}`, 'g'),</span><span class="s3">\n    </span><span class="s1">`__ESC_COLON_${segmentName}`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function unescapeSegments(str: string) {</span><span class="s3">\n  </span><span class="s1">return str.replace(/__ESC_COLON_/gi, ':')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function matchHas(</span><span class="s3">\n  </span><span class="s1">req: BaseNextRequest | IncomingMessage,</span><span class="s3">\n  </span><span class="s1">query: Params,</span><span class="s3">\n  </span><span class="s1">has: RouteHas[] = [],</span><span class="s3">\n  </span><span class="s1">missing: RouteHas[] = []</span><span class="s3">\n</span><span class="s1">): false | Params {</span><span class="s3">\n  </span><span class="s1">const params: Params = {}</span><span class="s3">\n\n  </span><span class="s1">const hasMatch = (hasItem: RouteHas) =&gt; {</span><span class="s3">\n    </span><span class="s1">let value</span><span class="s3">\n    </span><span class="s1">let key = hasItem.key</span><span class="s3">\n\n    </span><span class="s1">switch (hasItem.type) {</span><span class="s3">\n      </span><span class="s1">case 'header': {</span><span class="s3">\n        </span><span class="s1">key = key!.toLowerCase()</span><span class="s3">\n        </span><span class="s1">value = req.headers[key] as string</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'cookie': {</span><span class="s3">\n        </span><span class="s1">if ('cookies' in req) {</span><span class="s3">\n          </span><span class="s1">value = req.cookies[hasItem.key]</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">const cookies = getCookieParser(req.headers)()</span><span class="s3">\n          </span><span class="s1">value = cookies[hasItem.key]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'query': {</span><span class="s3">\n        </span><span class="s1">value = query[key!]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'host': {</span><span class="s3">\n        </span><span class="s1">const { host } = req?.headers || {}</span><span class="s3">\n        </span><span class="s1">// remove port from host if present</span><span class="s3">\n        </span><span class="s1">const hostname = host?.split(':', 1)[0].toLowerCase()</span><span class="s3">\n        </span><span class="s1">value = hostname</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">default: {</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!hasItem.value &amp;&amp; value) {</span><span class="s3">\n      </span><span class="s1">params[getSafeParamName(key!)] = value</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">} else if (value) {</span><span class="s3">\n      </span><span class="s1">const matcher = new RegExp(`^${hasItem.value}$`)</span><span class="s3">\n      </span><span class="s1">const matches = Array.isArray(value)</span><span class="s3">\n        </span><span class="s1">? value.slice(-1)[0].match(matcher)</span><span class="s3">\n        </span><span class="s1">: value.match(matcher)</span><span class="s3">\n\n      </span><span class="s1">if (matches) {</span><span class="s3">\n        </span><span class="s1">if (Array.isArray(matches)) {</span><span class="s3">\n          </span><span class="s1">if (matches.groups) {</span><span class="s3">\n            </span><span class="s1">Object.keys(matches.groups).forEach((groupKey) =&gt; {</span><span class="s3">\n              </span><span class="s1">params[groupKey] = matches.groups![groupKey]</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">} else if (hasItem.type === 'host' &amp;&amp; matches[0]) {</span><span class="s3">\n            </span><span class="s1">params.host = matches[0]</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const allMatch =</span><span class="s3">\n    </span><span class="s1">has.every((item) =&gt; hasMatch(item)) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!missing.some((item) =&gt; hasMatch(item))</span><span class="s3">\n\n  </span><span class="s1">if (allMatch) {</span><span class="s3">\n    </span><span class="s1">return params</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function compileNonPath(value: string, params: Params): string {</span><span class="s3">\n  </span><span class="s1">if (!value.includes(':')) {</span><span class="s3">\n    </span><span class="s1">return value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const key of Object.keys(params)) {</span><span class="s3">\n    </span><span class="s1">if (value.includes(`:${key}`)) {</span><span class="s3">\n      </span><span class="s1">value = value</span><span class="s3">\n        </span><span class="s1">.replace(</span><span class="s3">\n          </span><span class="s1">new RegExp(`:${key}</span><span class="s3">\\\\</span><span class="s1">*`, 'g'),</span><span class="s3">\n          </span><span class="s1">`:${key}--ESCAPED_PARAM_ASTERISKS`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">.replace(</span><span class="s3">\n          </span><span class="s1">new RegExp(`:${key}</span><span class="s3">\\\\</span><span class="s1">?`, 'g'),</span><span class="s3">\n          </span><span class="s1">`:${key}--ESCAPED_PARAM_QUESTION`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">.replace(new RegExp(`:${key}</span><span class="s3">\\\\</span><span class="s1">+`, 'g'), `:${key}--ESCAPED_PARAM_PLUS`)</span><span class="s3">\n        </span><span class="s1">.replace(</span><span class="s3">\n          </span><span class="s1">new RegExp(`:${key}(?!</span><span class="s3">\\\\</span><span class="s1">w)`, 'g'),</span><span class="s3">\n          </span><span class="s1">`--ESCAPED_PARAM_COLON${key}`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">value = value</span><span class="s3">\n    </span><span class="s1">.replace(/(:|</span><span class="s3">\\</span><span class="s1">*|</span><span class="s3">\\</span><span class="s1">?|</span><span class="s3">\\</span><span class="s1">+|</span><span class="s3">\\</span><span class="s1">(|</span><span class="s3">\\</span><span class="s1">)|</span><span class="s3">\\</span><span class="s1">{|</span><span class="s3">\\</span><span class="s1">})/g, '</span><span class="s3">\\\\</span><span class="s1">$1')</span><span class="s3">\n    </span><span class="s1">.replace(/--ESCAPED_PARAM_PLUS/g, '+')</span><span class="s3">\n    </span><span class="s1">.replace(/--ESCAPED_PARAM_COLON/g, ':')</span><span class="s3">\n    </span><span class="s1">.replace(/--ESCAPED_PARAM_QUESTION/g, '?')</span><span class="s3">\n    </span><span class="s1">.replace(/--ESCAPED_PARAM_ASTERISKS/g, '*')</span><span class="s3">\n\n  </span><span class="s1">// the value needs to start with a forward-slash to be compiled</span><span class="s3">\n  </span><span class="s1">// correctly</span><span class="s3">\n  </span><span class="s1">return safeCompile(`/${value}`, { validate: false })(params).slice(1)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseDestination(args: {</span><span class="s3">\n  </span><span class="s1">destination: string</span><span class="s3">\n  </span><span class="s1">params: Readonly&lt;Params&gt;</span><span class="s3">\n  </span><span class="s1">query: Readonly&lt;NextParsedUrlQuery&gt;</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">let escaped = args.destination</span><span class="s3">\n  </span><span class="s1">for (const param of Object.keys({ ...args.params, ...args.query })) {</span><span class="s3">\n    </span><span class="s1">if (!param) continue</span><span class="s3">\n\n    </span><span class="s1">escaped = escapeSegment(escaped, param)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const parsed = parseUrl(escaped)</span><span class="s3">\n\n  </span><span class="s1">let pathname = parsed.pathname</span><span class="s3">\n  </span><span class="s1">if (pathname) {</span><span class="s3">\n    </span><span class="s1">pathname = unescapeSegments(pathname)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let href = parsed.href</span><span class="s3">\n  </span><span class="s1">if (href) {</span><span class="s3">\n    </span><span class="s1">href = unescapeSegments(href)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let hostname = parsed.hostname</span><span class="s3">\n  </span><span class="s1">if (hostname) {</span><span class="s3">\n    </span><span class="s1">hostname = unescapeSegments(hostname)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let hash = parsed.hash</span><span class="s3">\n  </span><span class="s1">if (hash) {</span><span class="s3">\n    </span><span class="s1">hash = unescapeSegments(hash)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let search = parsed.search</span><span class="s3">\n  </span><span class="s1">if (search) {</span><span class="s3">\n    </span><span class="s1">search = unescapeSegments(search)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">...parsed,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">hostname,</span><span class="s3">\n    </span><span class="s1">href,</span><span class="s3">\n    </span><span class="s1">hash,</span><span class="s3">\n    </span><span class="s1">search,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function prepareDestination(args: {</span><span class="s3">\n  </span><span class="s1">appendParamsToQuery: boolean</span><span class="s3">\n  </span><span class="s1">destination: string</span><span class="s3">\n  </span><span class="s1">params: Params</span><span class="s3">\n  </span><span class="s1">query: NextParsedUrlQuery</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const parsedDestination = parseDestination(args)</span><span class="s3">\n\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">hostname: destHostname,</span><span class="s3">\n    </span><span class="s1">query: destQuery,</span><span class="s3">\n    </span><span class="s1">search: destSearch,</span><span class="s3">\n  </span><span class="s1">} = parsedDestination</span><span class="s3">\n\n  </span><span class="s1">// The following code assumes that the pathname here includes the hash if it's</span><span class="s3">\n  </span><span class="s1">// present.</span><span class="s3">\n  </span><span class="s1">let destPath = parsedDestination.pathname</span><span class="s3">\n  </span><span class="s1">if (parsedDestination.hash) {</span><span class="s3">\n    </span><span class="s1">destPath = `${destPath}${parsedDestination.hash}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const destParams: (string | number)[] = []</span><span class="s3">\n\n  </span><span class="s1">const destPathParamKeys: Key[] = []</span><span class="s3">\n  </span><span class="s1">safePathToRegexp(destPath, destPathParamKeys)</span><span class="s3">\n  </span><span class="s1">for (const key of destPathParamKeys) {</span><span class="s3">\n    </span><span class="s1">destParams.push(key.name)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (destHostname) {</span><span class="s3">\n    </span><span class="s1">const destHostnameParamKeys: Key[] = []</span><span class="s3">\n    </span><span class="s1">safePathToRegexp(destHostname, destHostnameParamKeys)</span><span class="s3">\n    </span><span class="s1">for (const key of destHostnameParamKeys) {</span><span class="s3">\n      </span><span class="s1">destParams.push(key.name)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const destPathCompiler = safeCompile(</span><span class="s3">\n    </span><span class="s1">destPath,</span><span class="s3">\n    </span><span class="s1">// we don't validate while compiling the destination since we should</span><span class="s3">\n    </span><span class="s1">// have already validated before we got to this point and validating</span><span class="s3">\n    </span><span class="s1">// breaks compiling destinations with named pattern params from the source</span><span class="s3">\n    </span><span class="s1">// e.g. /something:hello(.*) -&gt; /another/:hello is broken with validation</span><span class="s3">\n    </span><span class="s1">// since compile validation is meant for reversing and not for inserting</span><span class="s3">\n    </span><span class="s1">// params from a separate path-regex into another</span><span class="s3">\n    </span><span class="s1">{ validate: false }</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let destHostnameCompiler</span><span class="s3">\n  </span><span class="s1">if (destHostname) {</span><span class="s3">\n    </span><span class="s1">destHostnameCompiler = safeCompile(destHostname, { validate: false })</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// update any params in query values</span><span class="s3">\n  </span><span class="s1">for (const [key, strOrArray] of Object.entries(destQuery)) {</span><span class="s3">\n    </span><span class="s1">// the value needs to start with a forward-slash to be compiled</span><span class="s3">\n    </span><span class="s1">// correctly</span><span class="s3">\n    </span><span class="s1">if (Array.isArray(strOrArray)) {</span><span class="s3">\n      </span><span class="s1">destQuery[key] = strOrArray.map((value) =&gt;</span><span class="s3">\n        </span><span class="s1">compileNonPath(unescapeSegments(value), args.params)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else if (typeof strOrArray === 'string') {</span><span class="s3">\n      </span><span class="s1">destQuery[key] = compileNonPath(unescapeSegments(strOrArray), args.params)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// add path params to query if it's not a redirect and not</span><span class="s3">\n  </span><span class="s1">// already defined in destination query or path</span><span class="s3">\n  </span><span class="s1">let paramKeys = Object.keys(args.params).filter(</span><span class="s3">\n    </span><span class="s1">(name) =&gt; name !== 'nextInternalLocale'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">args.appendParamsToQuery &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!paramKeys.some((key) =&gt; destParams.includes(key))</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">for (const key of paramKeys) {</span><span class="s3">\n      </span><span class="s1">if (!(key in destQuery)) {</span><span class="s3">\n        </span><span class="s1">destQuery[key] = args.params[key]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let newUrl</span><span class="s3">\n\n  </span><span class="s1">// The compiler also that the interception route marker is an unnamed param, hence '0',</span><span class="s3">\n  </span><span class="s1">// so we need to add it to the params object.</span><span class="s3">\n  </span><span class="s1">if (isInterceptionRouteAppPath(destPath)) {</span><span class="s3">\n    </span><span class="s1">for (const segment of destPath.split('/')) {</span><span class="s3">\n      </span><span class="s1">const marker = INTERCEPTION_ROUTE_MARKERS.find((m) =&gt;</span><span class="s3">\n        </span><span class="s1">segment.startsWith(m)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">if (marker) {</span><span class="s3">\n        </span><span class="s1">if (marker === '(..)(..)') {</span><span class="s3">\n          </span><span class="s1">args.params['0'] = '(..)'</span><span class="s3">\n          </span><span class="s1">args.params['1'] = '(..)'</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">args.params['0'] = marker</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">newUrl = destPathCompiler(args.params)</span><span class="s3">\n\n    </span><span class="s1">const [pathname, hash] = newUrl.split('#', 2)</span><span class="s3">\n    </span><span class="s1">if (destHostnameCompiler) {</span><span class="s3">\n      </span><span class="s1">parsedDestination.hostname = destHostnameCompiler(args.params)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">parsedDestination.pathname = pathname</span><span class="s3">\n    </span><span class="s1">parsedDestination.hash = `${hash ? '#' : ''}${hash || ''}`</span><span class="s3">\n    </span><span class="s1">parsedDestination.search = destSearch</span><span class="s3">\n      </span><span class="s1">? compileNonPath(destSearch, args.params)</span><span class="s3">\n      </span><span class="s1">: ''</span><span class="s3">\n  </span><span class="s1">} catch (err: any) {</span><span class="s3">\n    </span><span class="s1">if (err.message.match(/Expected .*? to not repeat, but got an array/)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`To use a multi-match in the destination you must add </span><span class="s3">\\</span><span class="s1">`*</span><span class="s3">\\</span><span class="s1">` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw err</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Query merge order lowest priority to highest</span><span class="s3">\n  </span><span class="s1">// 1. initial URL query values</span><span class="s3">\n  </span><span class="s1">// 2. path segment values</span><span class="s3">\n  </span><span class="s1">// 3. destination specified query values</span><span class="s3">\n  </span><span class="s1">parsedDestination.query = {</span><span class="s3">\n    </span><span class="s1">...args.query,</span><span class="s3">\n    </span><span class="s1">...parsedDestination.query,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">newUrl,</span><span class="s3">\n    </span><span class="s1">destQuery,</span><span class="s3">\n    </span><span class="s1">parsedDestination,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;compileNonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;matchHas&quot;</span><span class="s0">,</span><span class="s1">&quot;parseDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;prepareDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;getSafeParamName&quot;</span><span class="s0">,</span><span class="s1">&quot;paramName&quot;</span><span class="s0">,</span><span class="s1">&quot;newParamName&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;charCode&quot;</span><span class="s0">,</span><span class="s1">&quot;charCodeAt&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentName&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeStringRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;unescapeSegments&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;missing&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;hasMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;hasItem&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;getCookieParser&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;matches&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;groups&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;groupKey&quot;</span><span class="s0">,</span><span class="s1">&quot;allMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;safeCompile&quot;</span><span class="s0">,</span><span class="s1">&quot;validate&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;escaped&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;parsed&quot;</span><span class="s0">,</span><span class="s1">&quot;parseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;destHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;destQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;destSearch&quot;</span><span class="s0">,</span><span class="s1">&quot;destPath&quot;</span><span class="s0">,</span><span class="s1">&quot;destParams&quot;</span><span class="s0">,</span><span class="s1">&quot;destPathParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;safePathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;destHostnameParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;destPathCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;destHostnameCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;strOrArray&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;paramKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;appendParamsToQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;newUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;marker&quot;</span><span class="s0">,</span><span class="s1">&quot;INTERCEPTION_ROUTE_MARKERS&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2790</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/web/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders } from 'http'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NEXT_INTERCEPTION_MARKER_PREFIX,</span><span class="s3">\n  </span><span class="s1">NEXT_QUERY_PARAM_PREFIX,</span><span class="s3">\n</span><span class="s1">} from '../../lib/constants'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Converts a Node.js IncomingHttpHeaders object to a Headers object. Any</span><span class="s3">\n </span><span class="s1">* headers with multiple values will be joined with a comma and space. Any</span><span class="s3">\n </span><span class="s1">* headers that have an undefined value will be ignored and others will be</span><span class="s3">\n </span><span class="s1">* coerced to strings.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param nodeHeaders the headers object to convert</span><span class="s3">\n </span><span class="s1">* @returns the converted headers object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function fromNodeOutgoingHttpHeaders(</span><span class="s3">\n  </span><span class="s1">nodeHeaders: OutgoingHttpHeaders</span><span class="s3">\n</span><span class="s1">): Headers {</span><span class="s3">\n  </span><span class="s1">const headers = new Headers()</span><span class="s3">\n  </span><span class="s1">for (let [key, value] of Object.entries(nodeHeaders)) {</span><span class="s3">\n    </span><span class="s1">const values = Array.isArray(value) ? value : [value]</span><span class="s3">\n    </span><span class="s1">for (let v of values) {</span><span class="s3">\n      </span><span class="s1">if (typeof v === 'undefined') continue</span><span class="s3">\n      </span><span class="s1">if (typeof v === 'number') {</span><span class="s3">\n        </span><span class="s1">v = v.toString()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">headers.append(key, v)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return headers</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n  </span><span class="s1">Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas</span><span class="s3">\n  </span><span class="s1">that are within a single set-cookie field-value, such as in the Expires portion.</span><span class="s3">\n  </span><span class="s1">This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2</span><span class="s3">\n  </span><span class="s1">Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128</span><span class="s3">\n  </span><span class="s1">React Native's fetch does this for *every* header, including set-cookie.</span><span class="s3">\n  \n  </span><span class="s1">Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25</span><span class="s3">\n  </span><span class="s1">Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation</span><span class="s3">\n</span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function splitCookiesString(cookiesString: string) {</span><span class="s3">\n  </span><span class="s1">var cookiesStrings = []</span><span class="s3">\n  </span><span class="s1">var pos = 0</span><span class="s3">\n  </span><span class="s1">var start</span><span class="s3">\n  </span><span class="s1">var ch</span><span class="s3">\n  </span><span class="s1">var lastComma</span><span class="s3">\n  </span><span class="s1">var nextStart</span><span class="s3">\n  </span><span class="s1">var cookiesSeparatorFound</span><span class="s3">\n\n  </span><span class="s1">function skipWhitespace() {</span><span class="s3">\n    </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; /</span><span class="s3">\\</span><span class="s1">s/.test(cookiesString.charAt(pos))) {</span><span class="s3">\n      </span><span class="s1">pos += 1</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return pos &lt; cookiesString.length</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function notSpecialChar() {</span><span class="s3">\n    </span><span class="s1">ch = cookiesString.charAt(pos)</span><span class="s3">\n\n    </span><span class="s1">return ch !== '=' &amp;&amp; ch !== ';' &amp;&amp; ch !== ','</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">while (pos &lt; cookiesString.length) {</span><span class="s3">\n    </span><span class="s1">start = pos</span><span class="s3">\n    </span><span class="s1">cookiesSeparatorFound = false</span><span class="s3">\n\n    </span><span class="s1">while (skipWhitespace()) {</span><span class="s3">\n      </span><span class="s1">ch = cookiesString.charAt(pos)</span><span class="s3">\n      </span><span class="s1">if (ch === ',') {</span><span class="s3">\n        </span><span class="s1">// ',' is a cookie separator if we have later first '=', not ';' or ','</span><span class="s3">\n        </span><span class="s1">lastComma = pos</span><span class="s3">\n        </span><span class="s1">pos += 1</span><span class="s3">\n\n        </span><span class="s1">skipWhitespace()</span><span class="s3">\n        </span><span class="s1">nextStart = pos</span><span class="s3">\n\n        </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; notSpecialChar()) {</span><span class="s3">\n          </span><span class="s1">pos += 1</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// currently special character</span><span class="s3">\n        </span><span class="s1">if (pos &lt; cookiesString.length &amp;&amp; cookiesString.charAt(pos) === '=') {</span><span class="s3">\n          </span><span class="s1">// we found cookies separator</span><span class="s3">\n          </span><span class="s1">cookiesSeparatorFound = true</span><span class="s3">\n          </span><span class="s1">// pos is inside the next cookie, so back up and return it.</span><span class="s3">\n          </span><span class="s1">pos = nextStart</span><span class="s3">\n          </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, lastComma))</span><span class="s3">\n          </span><span class="s1">start = pos</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// in param ',' or param separator ';',</span><span class="s3">\n          </span><span class="s1">// we continue from that comma</span><span class="s3">\n          </span><span class="s1">pos = lastComma + 1</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">pos += 1</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!cookiesSeparatorFound || pos &gt;= cookiesString.length) {</span><span class="s3">\n      </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, cookiesString.length))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return cookiesStrings</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Converts a Headers object to a Node.js OutgoingHttpHeaders object. This is</span><span class="s3">\n </span><span class="s1">* required to support the set-cookie header, which may have multiple values.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param headers the headers object to convert</span><span class="s3">\n </span><span class="s1">* @returns the converted headers object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function toNodeOutgoingHttpHeaders(</span><span class="s3">\n  </span><span class="s1">headers: Headers</span><span class="s3">\n</span><span class="s1">): OutgoingHttpHeaders {</span><span class="s3">\n  </span><span class="s1">const nodeHeaders: OutgoingHttpHeaders = {}</span><span class="s3">\n  </span><span class="s1">const cookies: string[] = []</span><span class="s3">\n  </span><span class="s1">if (headers) {</span><span class="s3">\n    </span><span class="s1">for (const [key, value] of headers.entries()) {</span><span class="s3">\n      </span><span class="s1">if (key.toLowerCase() === 'set-cookie') {</span><span class="s3">\n        </span><span class="s1">// We may have gotten a comma joined string of cookies, or multiple</span><span class="s3">\n        </span><span class="s1">// set-cookie headers. We need to merge them into one header array</span><span class="s3">\n        </span><span class="s1">// to represent all the cookies.</span><span class="s3">\n        </span><span class="s1">cookies.push(...splitCookiesString(value))</span><span class="s3">\n        </span><span class="s1">nodeHeaders[key] = cookies.length === 1 ? cookies[0] : cookies</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">nodeHeaders[key] = value</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return nodeHeaders</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Validate the correctness of a user-provided URL.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function validateURL(url: string | URL): string {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return String(new URL(String(url)))</span><span class="s3">\n  </span><span class="s1">} catch (error: any) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`URL is malformed </span><span class="s3">\&quot;</span><span class="s1">${String(</span><span class="s3">\n        </span><span class="s1">url</span><span class="s3">\n      </span><span class="s1">)}</span><span class="s3">\&quot;</span><span class="s1">. Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,</span><span class="s3">\n      </span><span class="s1">{ cause: error }</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Normalizes `nxtP` and `nxtI` query param values to remove the prefix.</span><span class="s3">\n </span><span class="s1">* This function does not mutate the input key.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeNextQueryParam(key: string): null | string {</span><span class="s3">\n  </span><span class="s1">const prefixes = [NEXT_QUERY_PARAM_PREFIX, NEXT_INTERCEPTION_MARKER_PREFIX]</span><span class="s3">\n  </span><span class="s1">for (const prefix of prefixes) {</span><span class="s3">\n    </span><span class="s1">if (key !== prefix &amp;&amp; key.startsWith(prefix)) {</span><span class="s3">\n      </span><span class="s1">return key.substring(prefix.length)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;fromNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeNextQueryParam&quot;</span><span class="s0">,</span><span class="s1">&quot;splitCookiesString&quot;</span><span class="s0">,</span><span class="s1">&quot;toNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;validateURL&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;Headers&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;append&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesString&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesStrings&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;ch&quot;</span><span class="s0">,</span><span class="s1">&quot;lastComma&quot;</span><span class="s0">,</span><span class="s1">&quot;nextStart&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesSeparatorFound&quot;</span><span class="s0">,</span><span class="s1">&quot;skipWhitespace&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;charAt&quot;</span><span class="s0">,</span><span class="s1">&quot;notSpecialChar&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixes&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2942</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/lib/decode-query-path-parameter.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Decodes a query path parameter.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param value - The value to decode.</span><span class="s3">\n </span><span class="s1">* @returns The decoded value.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function decodeQueryPathParameter(value: string) {</span><span class="s3">\n  </span><span class="s1">// When deployed to Vercel, the value may be encoded, so this attempts to</span><span class="s3">\n  </span><span class="s1">// decode it and returns the original value if it fails.</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return decodeURIComponent(value)</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">return value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;decodeQueryPathParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURIComponent&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;CAKC;;;+BACeA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,KAAa;IACpD,yEAAyE;IACzE,wDAAwD;IACxD,IAAI;QACF,OAAOC,mBAAmBD;IAC5B,EAAE,OAAM;QACN,OAAOA;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">2969</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/client/components/app-router-headers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const RSC_HEADER = 'rsc' as const</span><span class="s3">\n</span><span class="s1">export const ACTION_HEADER = 'next-action' as const</span><span class="s3">\n</span><span class="s1">// TODO: Instead of sending the full router state, we only need to send the</span><span class="s3">\n</span><span class="s1">// segment path. Saves bytes. Then we could also use this field for segment</span><span class="s3">\n</span><span class="s1">// prefetches, which also need to specify a particular segment.</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_STATE_TREE_HEADER = 'next-router-state-tree' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_PREFETCH_HEADER = 'next-router-prefetch' as const</span><span class="s3">\n</span><span class="s1">// This contains the path to the segment being prefetched.</span><span class="s3">\n</span><span class="s1">// TODO: If we change next-router-state-tree to be a segment path, we can use</span><span class="s3">\n</span><span class="s1">// that instead. Then next-router-prefetch and next-router-segment-prefetch can</span><span class="s3">\n</span><span class="s1">// be merged into a single enum.</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_SEGMENT_PREFETCH_HEADER =</span><span class="s3">\n  </span><span class="s1">'next-router-segment-prefetch' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_HMR_REFRESH_HEADER = 'next-hmr-refresh' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_URL = 'next-url' as const</span><span class="s3">\n</span><span class="s1">export const RSC_CONTENT_TYPE_HEADER = 'text/x-component' as const</span><span class="s3">\n\n</span><span class="s1">export const FLIGHT_HEADERS = [</span><span class="s3">\n  </span><span class="s1">RSC_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_STATE_TREE_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_PREFETCH_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_HMR_REFRESH_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n\n</span><span class="s1">export const NEXT_RSC_UNION_QUERY = '_rsc' as const</span><span class="s3">\n\n</span><span class="s1">export const NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_ACTION_NOT_FOUND_HEADER = 'x-nextjs-action-not-found' as const</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ACTION_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;FLIGHT_HEADERS&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ACTION_NOT_FOUND_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_DID_POSTPONE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_HMR_REFRESH_HASH_COOKIE&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_HMR_REFRESH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_IS_PRERENDER_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_REWRITTEN_PATH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_REWRITTEN_QUERY_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_PREFETCH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_SEGMENT_PREFETCH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_STALE_TIME_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_STATE_TREE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RSC_UNION_QUERY&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_HEADER&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACaA,aAAa,EAAA;eAAbA;;IAiBAC,cAAc,EAAA;eAAdA;;IAeAC,4BAA4B,EAAA;eAA5BA;;IAJAC,wBAAwB,EAAA;eAAxBA;;IAfAC,4BAA4B,EAAA;eAA5BA;;IADAC,uBAAuB,EAAA;eAAvBA;;IAmBAC,wBAAwB,EAAA;eAAxBA;;IAFAC,0BAA0B,EAAA;eAA1BA;;IACAC,2BAA2B,EAAA;eAA3BA;;IAzBAC,2BAA2B,EAAA;eAA3BA;;IAKAC,mCAAmC,EAAA;eAAnCA;;IAiBAC,6BAA6B,EAAA;eAA7BA;;IAvBAC,6BAA6B,EAAA;eAA7BA;;IAqBAC,oBAAoB,EAAA;eAApBA;;IAXAC,QAAQ,EAAA;eAARA;;IACAC,uBAAuB,EAAA;eAAvBA;;IAhBAC,UAAU,EAAA;eAAVA;;;AAAN,MAAMA,aAAa;AACnB,MAAMhB,gBAAgB;AAItB,MAAMY,gCAAgC;AACtC,MAAMH,8BAA8B;AAKpC,MAAMC,sCACX;AACK,MAAML,0BAA0B;AAChC,MAAMD,+BAA+B;AACrC,MAAMU,WAAW;AACjB,MAAMC,0BAA0B;AAEhC,MAAMd,iBAAiB;IAC5Be;IACAJ;IACAH;IACAJ;IACAK;CACD;AAEM,MAAMG,uBAAuB;AAE7B,MAAMF,gCAAgC;AACtC,MAAMR,2BAA2B;AACjC,MAAMI,6BAA6B;AACnC,MAAMC,8BAA8B;AACpC,MAAMF,2BAA2B;AACjC,MAAMJ,+BAA+B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">3084</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { UrlWithParsedQuery } from 'url'</span><span class="s3">\n</span><span class="s1">import { NEXT_RSC_UNION_QUERY } from '../client/components/app-router-headers'</span><span class="s3">\n\n</span><span class="s1">const DUMMY_ORIGIN = 'http://n'</span><span class="s3">\n\n</span><span class="s1">export function isFullStringUrl(url: string) {</span><span class="s3">\n  </span><span class="s1">return /https?:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">//.test(url)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseUrl(url: string): URL | undefined {</span><span class="s3">\n  </span><span class="s1">let parsed: URL | undefined = undefined</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">parsed = new URL(url, DUMMY_ORIGIN)</span><span class="s3">\n  </span><span class="s1">} catch {}</span><span class="s3">\n  </span><span class="s1">return parsed</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseReqUrl(url: string): UrlWithParsedQuery | undefined {</span><span class="s3">\n  </span><span class="s1">const parsedUrl: URL | undefined = parseUrl(url)</span><span class="s3">\n\n  </span><span class="s1">if (!parsedUrl) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const query: Record&lt;string, string | string[]&gt; = {}</span><span class="s3">\n\n  </span><span class="s1">for (const key of parsedUrl.searchParams.keys()) {</span><span class="s3">\n    </span><span class="s1">const values = parsedUrl.searchParams.getAll(key)</span><span class="s3">\n    </span><span class="s1">query[key] = values.length &gt; 1 ? values : values[0]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const legacyUrl: UrlWithParsedQuery = {</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">hash: parsedUrl.hash,</span><span class="s3">\n    </span><span class="s1">search: parsedUrl.search,</span><span class="s3">\n    </span><span class="s1">path: parsedUrl.pathname,</span><span class="s3">\n    </span><span class="s1">pathname: parsedUrl.pathname,</span><span class="s3">\n    </span><span class="s1">href: `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`,</span><span class="s3">\n    </span><span class="s1">host: '',</span><span class="s3">\n    </span><span class="s1">hostname: '',</span><span class="s3">\n    </span><span class="s1">auth: '',</span><span class="s3">\n    </span><span class="s1">protocol: '',</span><span class="s3">\n    </span><span class="s1">slashes: null,</span><span class="s3">\n    </span><span class="s1">port: '',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return legacyUrl</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function stripNextRscUnionQuery(relativeUrl: string): string {</span><span class="s3">\n  </span><span class="s1">const urlInstance = new URL(relativeUrl, DUMMY_ORIGIN)</span><span class="s3">\n  </span><span class="s1">urlInstance.searchParams.delete(NEXT_RSC_UNION_QUERY)</span><span class="s3">\n\n  </span><span class="s1">return urlInstance.pathname + urlInstance.search</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isFullStringUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parseReqUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;stripNextRscUnionQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;DUMMY_ORIGIN&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;parsed&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;getAll&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;legacyUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;auth&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;slashes&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;urlInstance&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RSC_UNION_QUERY&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;IAKgBA,eAAe,EAAA;eAAfA;;IAYAC,WAAW,EAAA;eAAXA;;IARAC,QAAQ,EAAA;eAARA;;IAuCAC,sBAAsB,EAAA;eAAtBA;;;kCA/CqB;AAErC,MAAMC,eAAe;AAEd,SAASJ,gBAAgBK,GAAW;IACzC,OAAO,cAAcC,IAAI,CAACD;AAC5B;AAEO,SAASH,SAASG,GAAW;IAClC,IAAIE,SAA0BC;IAC9B,IAAI;QACFD,SAAS,IAAIE,IAAIJ,KAAKD;IACxB,EAAE,OAAM,CAAC;IACT,OAAOG;AACT;AAEO,SAASN,YAAYI,GAAW;IACrC,MAAMK,YAA6BR,SAASG;IAE5C,IAAI,CAACK,WAAW;QACd;IACF;IAEA,MAAMC,QAA2C,CAAC;IAElD,KAAK,MAAMC,OAAOF,UAAUG,YAAY,CAACC,IAAI,GAAI;QAC/C,MAAMC,SAASL,UAAUG,YAAY,CAACG,MAAM,CAACJ;QAC7CD,KAAK,CAACC,IAAI,GAAGG,OAAOE,MAAM,GAAG,IAAIF,SAASA,MAAM,CAAC,EAAE;IACrD;IAEA,MAAMG,YAAgC;QACpCP;QACAQ,MAAMT,UAAUS,IAAI;QACpBC,QAAQV,UAAUU,MAAM;QACxBC,MAAMX,UAAUY,QAAQ;QACxBA,UAAUZ,UAAUY,QAAQ;QAC5BC,MAAM,GAAGb,UAAUY,QAAQ,GAAGZ,UAAUU,MAAM,GAAGV,UAAUS,IAAI,EAAE;QACjEK,MAAM;QACNC,UAAU;QACVC,MAAM;QACNC,UAAU;QACVC,SAAS;QACTC,MAAM;IACR;IACA,OAAOX;AACT;AAEO,SAASf,uBAAuB2B,WAAmB;IACxD,MAAMC,cAAc,IAAItB,IAAIqB,aAAa1B;IACzC2B,YAAYlB,YAAY,CAACmB,MAAM,CAACC,kBAAAA,oBAAoB;IAEpD,OAAOF,YAAYT,QAAQ,GAAGS,YAAYX,MAAM;AAClD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">3160</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">function _getRequireWildcardCache(nodeInterop) {</span><span class="s3">\n    </span><span class="s1">if (typeof WeakMap !== </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) return null;</span><span class="s3">\n\n    </span><span class="s1">var cacheBabelInterop = new WeakMap();</span><span class="s3">\n    </span><span class="s1">var cacheNodeInterop = new WeakMap();</span><span class="s3">\n\n    </span><span class="s1">return (_getRequireWildcardCache = function(nodeInterop) {</span><span class="s3">\n        </span><span class="s1">return nodeInterop ? cacheNodeInterop : cacheBabelInterop;</span><span class="s3">\n    </span><span class="s1">})(nodeInterop);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function _interop_require_wildcard(obj, nodeInterop) {</span><span class="s3">\n    </span><span class="s1">if (!nodeInterop &amp;&amp; obj &amp;&amp; obj.__esModule) return obj;</span><span class="s3">\n    </span><span class="s1">if (obj === null || typeof obj !== </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; typeof obj !== </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) return { default: obj };</span><span class="s3">\n\n    </span><span class="s1">var cache = _getRequireWildcardCache(nodeInterop);</span><span class="s3">\n\n    </span><span class="s1">if (cache &amp;&amp; cache.has(obj)) return cache.get(obj);</span><span class="s3">\n\n    </span><span class="s1">var newObj = { __proto__: null };</span><span class="s3">\n    </span><span class="s1">var hasPropertyDescriptor = Object.defineProperty &amp;&amp; Object.getOwnPropertyDescriptor;</span><span class="s3">\n\n    </span><span class="s1">for (var key in obj) {</span><span class="s3">\n        </span><span class="s1">if (key !== </span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; Object.prototype.hasOwnProperty.call(obj, key)) {</span><span class="s3">\n            </span><span class="s1">var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;</span><span class="s3">\n            </span><span class="s1">if (desc &amp;&amp; (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);</span><span class="s3">\n            </span><span class="s1">else newObj[key] = obj[key];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">newObj.default = obj;</span><span class="s3">\n\n    </span><span class="s1">if (cache) cache.set(obj, newObj);</span><span class="s3">\n\n    </span><span class="s1">return newObj;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">exports._ = _interop_require_wildcard;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAEA,SAAS,yBAAyB,WAAW;IACzC,IAAI,OAAO,YAAY,YAAY,OAAO;IAE1C,IAAI,oBAAoB,IAAI;IAC5B,IAAI,mBAAmB,IAAI;IAE3B,OAAO,CAAC,2BAA2B,SAAS,WAAW;QACnD,OAAO,cAAc,mBAAmB;IAC5C,CAAC,EAAE;AACP;AACA,SAAS,0BAA0B,GAAG,EAAE,WAAW;IAC/C,IAAI,CAAC,eAAe,OAAO,IAAI,UAAU,EAAE,OAAO;IAClD,IAAI,QAAQ,QAAQ,OAAO,QAAQ,YAAY,OAAO,QAAQ,YAAY,OAAO;QAAE,SAAS;IAAI;IAEhG,IAAI,QAAQ,yBAAyB;IAErC,IAAI,SAAS,MAAM,GAAG,CAAC,MAAM,OAAO,MAAM,GAAG,CAAC;IAE9C,IAAI,SAAS;QAAE,WAAW;IAAK;IAC/B,IAAI,wBAAwB,OAAO,cAAc,IAAI,OAAO,wBAAwB;IAEpF,IAAK,IAAI,OAAO,IAAK;QACjB,IAAI,QAAQ,aAAa,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,MAAM;YACrE,IAAI,OAAO,wBAAwB,OAAO,wBAAwB,CAAC,KAAK,OAAO;YAC/E,IAAI,QAAQ,CAAC,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,OAAO,cAAc,CAAC,QAAQ,KAAK;iBAClE,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;QAC/B;IACJ;IAEA,OAAO,OAAO,GAAG;IAEjB,IAAI,OAAO,MAAM,GAAG,CAAC,KAAK;IAE1B,OAAO;AACX;AACA,QAAQ,CAAC,GAAG&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">3195</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/router/utils/format-url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// Format function modified from nodejs</span><span class="s3">\n</span><span class="s1">// Copyright Joyent, Inc. and other Node contributors.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// Permission is hereby granted, free of charge, to any person obtaining a</span><span class="s3">\n</span><span class="s1">// copy of this software and associated documentation files (the</span><span class="s3">\n</span><span class="s1">// </span><span class="s3">\&quot;</span><span class="s1">Software</span><span class="s3">\&quot;</span><span class="s1">), to deal in the Software without restriction, including</span><span class="s3">\n</span><span class="s1">// without limitation the rights to use, copy, modify, merge, publish,</span><span class="s3">\n</span><span class="s1">// distribute, sublicense, and/or sell copies of the Software, and to permit</span><span class="s3">\n</span><span class="s1">// persons to whom the Software is furnished to do so, subject to the</span><span class="s3">\n</span><span class="s1">// following conditions:</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// The above copyright notice and this permission notice shall be included</span><span class="s3">\n</span><span class="s1">// in all copies or substantial portions of the Software.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// THE SOFTWARE IS PROVIDED </span><span class="s3">\&quot;</span><span class="s1">AS IS</span><span class="s3">\&quot;</span><span class="s1">, WITHOUT WARRANTY OF ANY KIND, EXPRESS</span><span class="s3">\n</span><span class="s1">// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span><span class="s3">\n</span><span class="s1">// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN</span><span class="s3">\n</span><span class="s1">// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,</span><span class="s3">\n</span><span class="s1">// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR</span><span class="s3">\n</span><span class="s1">// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE</span><span class="s3">\n</span><span class="s1">// USE OR OTHER DEALINGS IN THE SOFTWARE.</span><span class="s3">\n\n</span><span class="s1">import type { UrlObject } from 'url'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import * as querystring from './querystring'</span><span class="s3">\n\n</span><span class="s1">const slashedProtocols = /https?|ftp|gopher|file/</span><span class="s3">\n\n</span><span class="s1">export function formatUrl(urlObj: UrlObject) {</span><span class="s3">\n  </span><span class="s1">let { auth, hostname } = urlObj</span><span class="s3">\n  </span><span class="s1">let protocol = urlObj.protocol || ''</span><span class="s3">\n  </span><span class="s1">let pathname = urlObj.pathname || ''</span><span class="s3">\n  </span><span class="s1">let hash = urlObj.hash || ''</span><span class="s3">\n  </span><span class="s1">let query = urlObj.query || ''</span><span class="s3">\n  </span><span class="s1">let host: string | false = false</span><span class="s3">\n\n  </span><span class="s1">auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : ''</span><span class="s3">\n\n  </span><span class="s1">if (urlObj.host) {</span><span class="s3">\n    </span><span class="s1">host = auth + urlObj.host</span><span class="s3">\n  </span><span class="s1">} else if (hostname) {</span><span class="s3">\n    </span><span class="s1">host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname)</span><span class="s3">\n    </span><span class="s1">if (urlObj.port) {</span><span class="s3">\n      </span><span class="s1">host += ':' + urlObj.port</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (query &amp;&amp; typeof query === 'object') {</span><span class="s3">\n    </span><span class="s1">query = String(querystring.urlQueryToSearchParams(query as ParsedUrlQuery))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let search = urlObj.search || (query &amp;&amp; `?${query}`) || ''</span><span class="s3">\n\n  </span><span class="s1">if (protocol &amp;&amp; !protocol.endsWith(':')) protocol += ':'</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">urlObj.slashes ||</span><span class="s3">\n    </span><span class="s1">((!protocol || slashedProtocols.test(protocol)) &amp;&amp; host !== false)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">host = '//' + (host || '')</span><span class="s3">\n    </span><span class="s1">if (pathname &amp;&amp; pathname[0] !== '/') pathname = '/' + pathname</span><span class="s3">\n  </span><span class="s1">} else if (!host) {</span><span class="s3">\n    </span><span class="s1">host = ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (hash &amp;&amp; hash[0] !== '#') hash = '#' + hash</span><span class="s3">\n  </span><span class="s1">if (search &amp;&amp; search[0] !== '?') search = '?' + search</span><span class="s3">\n\n  </span><span class="s1">pathname = pathname.replace(/[?#]/g, encodeURIComponent)</span><span class="s3">\n  </span><span class="s1">search = search.replace('#', '%23')</span><span class="s3">\n\n  </span><span class="s1">return `${protocol}${host}${pathname}${search}${hash}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const urlObjectKeys = [</span><span class="s3">\n  </span><span class="s1">'auth',</span><span class="s3">\n  </span><span class="s1">'hash',</span><span class="s3">\n  </span><span class="s1">'host',</span><span class="s3">\n  </span><span class="s1">'hostname',</span><span class="s3">\n  </span><span class="s1">'href',</span><span class="s3">\n  </span><span class="s1">'path',</span><span class="s3">\n  </span><span class="s1">'pathname',</span><span class="s3">\n  </span><span class="s1">'port',</span><span class="s3">\n  </span><span class="s1">'protocol',</span><span class="s3">\n  </span><span class="s1">'query',</span><span class="s3">\n  </span><span class="s1">'search',</span><span class="s3">\n  </span><span class="s1">'slashes',</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export function formatWithValidation(url: UrlObject): string {</span><span class="s3">\n  </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n    </span><span class="s1">if (url !== null &amp;&amp; typeof url === 'object') {</span><span class="s3">\n      </span><span class="s1">Object.keys(url).forEach((key) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (!urlObjectKeys.includes(key)) {</span><span class="s3">\n          </span><span class="s1">console.warn(</span><span class="s3">\n            </span><span class="s1">`Unknown key passed via urlObject into url.format: ${key}`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return formatUrl(url)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;formatUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;formatWithValidation&quot;</span><span class="s0">,</span><span class="s1">&quot;urlObjectKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;slashedProtocols&quot;</span><span class="s0">,</span><span class="s1">&quot;urlObj&quot;</span><span class="s0">,</span><span class="s1">&quot;auth&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;encodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;querystring&quot;</span><span class="s0">,</span><span class="s1">&quot;urlQueryToSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;slashes&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uCAAuC;AACvC,sDAAsD;AACtD,EAAE;AACF,0EAA0E;AAC1E,gEAAgE;AAChE,sEAAsE;AACtE,sEAAsE;AACtE,4EAA4E;AAC5E,qEAAqE;AACrE,wBAAwB;AACxB,EAAE;AACF,0EAA0E;AAC1E,yDAAyD;AACzD,EAAE;AACF,0EAA0E;AAC1E,6DAA6D;AAC7D,4EAA4E;AAC5E,2EAA2E;AAC3E,wEAAwE;AACxE,4EAA4E;AAC5E,yCAAyC;;;;;;;;;;;;;;;;IAQzBA,SAAS,EAAA;eAATA;;IA6DAC,oBAAoB,EAAA;eAApBA;;IAfHC,aAAa,EAAA;eAAbA;;;;uEAlDgB;AAE7B,MAAMC,mBAAmB;AAElB,SAASH,UAAUI,MAAiB;IACzC,IAAI,EAAEC,IAAI,EAAEC,QAAQ,EAAE,GAAGF;IACzB,IAAIG,WAAWH,OAAOG,QAAQ,IAAI;IAClC,IAAIC,WAAWJ,OAAOI,QAAQ,IAAI;IAClC,IAAIC,OAAOL,OAAOK,IAAI,IAAI;IAC1B,IAAIC,QAAQN,OAAOM,KAAK,IAAI;IAC5B,IAAIC,OAAuB;IAE3BN,OAAOA,OAAOO,mBAAmBP,MAAMQ,OAAO,CAAC,QAAQ,OAAO,MAAM;IAEpE,IAAIT,OAAOO,IAAI,EAAE;QACfA,OAAON,OAAOD,OAAOO,IAAI;IAC3B,OAAO,IAAIL,UAAU;QACnBK,OAAON,OAAQ,CAAA,CAACC,SAASQ,OAAO,CAAC,OAAQ,MAAGR,WAAS,MAAKA,QAAO;QACjE,IAAIF,OAAOW,IAAI,EAAE;YACfJ,QAAQ,MAAMP,OAAOW,IAAI;QAC3B;IACF;IAEA,IAAIL,SAAS,OAAOA,UAAU,UAAU;QACtCA,QAAQM,OAAOC,aAAYC,sBAAsB,CAACR;IACpD;IAEA,IAAIS,SAASf,OAAOe,MAAM,IAAKT,SAAU,MAAGA,SAAY;IAExD,IAAIH,YAAY,CAACA,SAASa,QAAQ,CAAC,MAAMb,YAAY;IAErD,IACEH,OAAOiB,OAAO,IACZ,CAAA,CAACd,YAAYJ,iBAAiBmB,IAAI,CAACf,SAAQ,KAAMI,SAAS,OAC5D;QACAA,OAAO,OAAQA,CAAAA,QAAQ,EAAC;QACxB,IAAIH,YAAYA,QAAQ,CAAC,EAAE,KAAK,KAAKA,WAAW,MAAMA;IACxD,OAAO,IAAI,CAACG,MAAM;QAChBA,OAAO;IACT;IAEA,IAAIF,QAAQA,IAAI,CAAC,EAAE,KAAK,KAAKA,OAAO,MAAMA;IAC1C,IAAIU,UAAUA,MAAM,CAAC,EAAE,KAAK,KAAKA,SAAS,MAAMA;IAEhDX,WAAWA,SAASK,OAAO,CAAC,SAASD;IACrCO,SAASA,OAAON,OAAO,CAAC,KAAK;IAE7B,OAAQ,KAAEN,WAAWI,OAAOH,WAAWW,SAASV;AAClD;AAEO,MAAMP,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,SAASD,qBAAqBsB,GAAc;IACjD,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,WAAe;QAC1C,IAAIH,QAAQ,QAAQ,OAAOA,QAAQ,UAAU;YAC3CI,OAAOC,IAAI,CAACL,KAAKM,OAAO,CAAC,CAACC;gBACxB,IAAI,CAAC5B,cAAc6B,QAAQ,CAACD,MAAM;oBAChCE,QAAQC,IAAI,CACT,uDAAoDH;gBAEzD;YACF;QACF;IACF;IAEA,OAAO9B,UAAUuB;AACnB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">3306</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/superstruct/index.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;(()=&gt;{var e={318:function(e,t){(function(e,n){true?n(t):0})(this,(function(e){</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;class StructError extends TypeError{constructor(e,t){let n;const{message:r,explanation:i,...c}=e;const{path:o}=e;const a=o.length===0?r:`At path: ${o.join(</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\&quot;</span><span class="s1">)} -- ${r}`;super(i??a);if(i!=null)this.cause=a;Object.assign(this,c);this.name=this.constructor.name;this.failures=()=&gt;n??(n=[e,...t()])}}function isIterable(e){return isObject(e)&amp;&amp;typeof e[Symbol.iterator]===</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">}function isObject(e){return typeof e===</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;e!=null}function isPlainObject(e){if(Object.prototype.toString.call(e)!==</span><span class="s3">\&quot;</span><span class="s1">[object Object]</span><span class="s3">\&quot;</span><span class="s1">){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function print(e){if(typeof e===</span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">){return e.toString()}return typeof e===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">?JSON.stringify(e):`${e}`}function shiftIterator(e){const{done:t,value:n}=e.next();return t?undefined:n}function toFailure(e,t,n,r){if(e===true){return}else if(e===false){e={}}else if(typeof e===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">){e={message:e}}const{path:i,branch:c}=t;const{type:o}=n;const{refinement:a,message:s=`Expected a value of type </span><span class="s3">\\</span><span class="s1">`${o}</span><span class="s3">\\</span><span class="s1">`${a?` with refinement </span><span class="s3">\\</span><span class="s1">`${a}</span><span class="s3">\\</span><span class="s1">``:</span><span class="s3">\&quot;\&quot;</span><span class="s1">}, but received: </span><span class="s3">\\</span><span class="s1">`${print(r)}</span><span class="s3">\\</span><span class="s1">``}=e;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:c,...e,message:s}}function*toFailures(e,t,n,r){if(!isIterable(e)){e=[e]}for(const i of e){const e=toFailure(i,t,n,r);if(e){yield e}}}function*run(e,t,n={}){const{path:r=[],branch:i=[e],coerce:c=false,mask:o=false}=n;const a={path:r,branch:i};if(c){e=t.coercer(e,a);if(o&amp;&amp;t.type!==</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;isObject(t.schema)&amp;&amp;isObject(e)&amp;&amp;!Array.isArray(e)){for(const n in e){if(t.schema[n]===undefined){delete e[n]}}}}let s=</span><span class="s3">\&quot;</span><span class="s1">valid</span><span class="s3">\&quot;</span><span class="s1">;for(const r of t.validator(e,a)){r.explanation=n.message;s=</span><span class="s3">\&quot;</span><span class="s1">not_valid</span><span class="s3">\&quot;</span><span class="s1">;yield[r,undefined]}for(let[u,f,l]of t.entries(e,a)){const t=run(f,l,{path:u===undefined?r:[...r,u],branch:u===undefined?i:[...i,f],coerce:c,mask:o,message:n.message});for(const n of t){if(n[0]){s=n[0].refinement!=null?</span><span class="s3">\&quot;</span><span class="s1">not_refined</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">not_valid</span><span class="s3">\&quot;</span><span class="s1">;yield[n[0],undefined]}else if(c){f=n[1];if(u===undefined){e=f}else if(e instanceof Map){e.set(u,f)}else if(e instanceof Set){e.add(f)}else if(isObject(e)){if(f!==undefined||u in e)e[u]=f}}}}if(s!==</span><span class="s3">\&quot;</span><span class="s1">not_valid</span><span class="s3">\&quot;</span><span class="s1">){for(const r of t.refiner(e,a)){r.explanation=n.message;s=</span><span class="s3">\&quot;</span><span class="s1">not_refined</span><span class="s3">\&quot;</span><span class="s1">;yield[r,undefined]}}if(s===</span><span class="s3">\&quot;</span><span class="s1">valid</span><span class="s3">\&quot;</span><span class="s1">){yield[undefined,e]}}class Struct{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:c=(e=&gt;e),entries:o=function*(){}}=e;this.type=t;this.schema=n;this.entries=o;this.coercer=c;if(r){this.validator=(e,t)=&gt;{const n=r(e,t);return toFailures(n,t,this,e)}}else{this.validator=()=&gt;[]}if(i){this.refiner=(e,t)=&gt;{const n=i(e,t);return toFailures(n,t,this,e)}}else{this.refiner=()=&gt;[]}}assert(e,t){return assert(e,this,t)}create(e,t){return create(e,this,t)}is(e){return is(e,this)}mask(e,t){return mask(e,this,t)}validate(e,t={}){return validate(e,this,t)}}function assert(e,t,n){const r=validate(e,t,{message:n});if(r[0]){throw r[0]}}function create(e,t,n){const r=validate(e,t,{coerce:true,message:n});if(r[0]){throw r[0]}else{return r[1]}}function mask(e,t,n){const r=validate(e,t,{coerce:true,mask:true,message:n});if(r[0]){throw r[0]}else{return r[1]}}function is(e,t){const n=validate(e,t);return!n[0]}function validate(e,t,n={}){const r=run(e,t,n);const i=shiftIterator(r);if(i[0]){const e=new StructError(i[0],(function*(){for(const e of r){if(e[0]){yield e[0]}}}));return[e,undefined]}else{const e=i[1];return[undefined,e]}}function assign(...e){const t=e[0].type===</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">;const n=e.map((e=&gt;e.schema));const r=Object.assign({},...n);return t?type(r):object(r)}function define(e,t){return new Struct({type:e,schema:null,validator:t})}function deprecated(e,t){return new Struct({...e,refiner:(t,n)=&gt;t===undefined||e.refiner(t,n),validator(n,r){if(n===undefined){return true}else{t(n,r);return e.validator(n,r)}}})}function dynamic(e){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">dynamic</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(t,n){const r=e(t,n);yield*r.entries(t,n)},validator(t,n){const r=e(t,n);return r.validator(t,n)},coercer(t,n){const r=e(t,n);return r.coercer(t,n)},refiner(t,n){const r=e(t,n);return r.refiner(t,n)}})}function lazy(e){let t;return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">lazy</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(n,r){t??(t=e());yield*t.entries(n,r)},validator(n,r){t??(t=e());return t.validator(n,r)},coercer(n,r){t??(t=e());return t.coercer(n,r)},refiner(n,r){t??(t=e());return t.refiner(n,r)}})}function omit(e,t){const{schema:n}=e;const r={...n};for(const e of t){delete r[e]}switch(e.type){case</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">:return type(r);default:return object(r)}}function partial(e){const t=e instanceof Struct?{...e.schema}:{...e};for(const e in t){t[e]=optional(t[e])}return object(t)}function pick(e,t){const{schema:n}=e;const r={};for(const e of t){r[e]=n[e]}return object(r)}function struct(e,t){console.warn(</span><span class="s3">\&quot;</span><span class="s1">superstruct@0.11 - The `struct` helper has been renamed to `define`.</span><span class="s3">\&quot;</span><span class="s1">);return define(e,t)}function any(){return define(</span><span class="s3">\&quot;</span><span class="s1">any</span><span class="s3">\&quot;</span><span class="s1">,(()=&gt;true))}function array(e){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">array</span><span class="s3">\&quot;</span><span class="s1">,schema:e,*entries(t){if(e&amp;&amp;Array.isArray(t)){for(const[n,r]of t.entries()){yield[n,r,e]}}},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${print(e)}`}})}function bigint(){return define(</span><span class="s3">\&quot;</span><span class="s1">bigint</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">bigint</span><span class="s3">\&quot;</span><span class="s1">))}function boolean(){return define(</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">))}function date(){return define(</span><span class="s3">\&quot;</span><span class="s1">date</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;e instanceof Date&amp;&amp;!isNaN(e.getTime())||`Expected a valid </span><span class="s3">\\</span><span class="s1">`Date</span><span class="s3">\\</span><span class="s1">` object, but received: ${print(e)}`))}function enums(e){const t={};const n=e.map((e=&gt;print(e))).join();for(const n of e){t[n]=n}return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">enums</span><span class="s3">\&quot;</span><span class="s1">,schema:t,validator(t){return e.includes(t)||`Expected one of </span><span class="s3">\\</span><span class="s1">`${n}</span><span class="s3">\\</span><span class="s1">`, but received: ${print(t)}`}})}function func(){return define(</span><span class="s3">\&quot;</span><span class="s1">func</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">||`Expected a function, but received: ${print(e)}`))}function instance(e){return define(</span><span class="s3">\&quot;</span><span class="s1">instance</span><span class="s3">\&quot;</span><span class="s1">,(t=&gt;t instanceof e||`Expected a </span><span class="s3">\\</span><span class="s1">`${e.name}</span><span class="s3">\\</span><span class="s1">` instance, but received: ${print(t)}`))}function integer(){return define(</span><span class="s3">\&quot;</span><span class="s1">integer</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;!isNaN(e)&amp;&amp;Number.isInteger(e)||`Expected an integer, but received: ${print(e)}`))}function intersection(e){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">intersection</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(t,n){for(const r of e){yield*r.entries(t,n)}},*validator(t,n){for(const r of e){yield*r.validator(t,n)}},*refiner(t,n){for(const r of e){yield*r.refiner(t,n)}}})}function literal(e){const t=print(e);const n=typeof e;return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">literal</span><span class="s3">\&quot;</span><span class="s1">,schema:n===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">||n===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">||n===</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">?e:null,validator(n){return n===e||`Expected the literal </span><span class="s3">\\</span><span class="s1">`${t}</span><span class="s3">\\</span><span class="s1">`, but received: ${print(n)}`}})}function map(e,t){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">map</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(n){if(e&amp;&amp;t&amp;&amp;n instanceof Map){for(const[r,i]of n.entries()){yield[r,r,e];yield[r,i,t]}}},coercer(e){return e instanceof Map?new Map(e):e},validator(e){return e instanceof Map||`Expected a </span><span class="s3">\\</span><span class="s1">`Map</span><span class="s3">\\</span><span class="s1">` object, but received: ${print(e)}`}})}function never(){return define(</span><span class="s3">\&quot;</span><span class="s1">never</span><span class="s3">\&quot;</span><span class="s1">,(()=&gt;false))}function nullable(e){return new Struct({...e,validator:(t,n)=&gt;t===null||e.validator(t,n),refiner:(t,n)=&gt;t===null||e.refiner(t,n)})}function number(){return define(</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;!isNaN(e)||`Expected a number, but received: ${print(e)}`))}function object(e){const t=e?Object.keys(e):[];const n=never();return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">,schema:e?e:null,*entries(r){if(e&amp;&amp;isObject(r)){const i=new Set(Object.keys(r));for(const n of t){i.delete(n);yield[n,r[n],e[n]]}for(const e of i){yield[e,r[e],n]}}},validator(e){return isObject(e)||`Expected an object, but received: ${print(e)}`},coercer(e){return isObject(e)?{...e}:e}})}function optional(e){return new Struct({...e,validator:(t,n)=&gt;t===undefined||e.validator(t,n),refiner:(t,n)=&gt;t===undefined||e.refiner(t,n)})}function record(e,t){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">record</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(n){if(isObject(n)){for(const r in n){const i=n[r];yield[r,r,e];yield[r,i,t]}}},validator(e){return isObject(e)||`Expected an object, but received: ${print(e)}`}})}function regexp(){return define(</span><span class="s3">\&quot;</span><span class="s1">regexp</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;e instanceof RegExp))}function set(e){return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">set</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(t){if(e&amp;&amp;t instanceof Set){for(const n of t){yield[n,n,e]}}},coercer(e){return e instanceof Set?new Set(e):e},validator(e){return e instanceof Set||`Expected a </span><span class="s3">\\</span><span class="s1">`Set</span><span class="s3">\\</span><span class="s1">` object, but received: ${print(e)}`}})}function string(){return define(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;typeof e===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">||`Expected a string, but received: ${print(e)}`))}function tuple(e){const t=never();return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">tuple</span><span class="s3">\&quot;</span><span class="s1">,schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i&lt;r;i++){yield[i,n[i],e[i]||t]}}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${print(e)}`}})}function type(e){const t=Object.keys(e);return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">,schema:e,*entries(n){if(isObject(n)){for(const r of t){yield[r,n[r],e[r]]}}},validator(e){return isObject(e)||`Expected an object, but received: ${print(e)}`},coercer(e){return isObject(e)?{...e}:e}})}function union(e){const t=e.map((e=&gt;e.type)).join(</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">);return new Struct({type:</span><span class="s3">\&quot;</span><span class="s1">union</span><span class="s3">\&quot;</span><span class="s1">,schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:true});if(!e){return r}}return t},validator(n,r){const i=[];for(const t of e){const[...e]=run(n,t,r);const[c]=e;if(!c[0]){return[]}else{for(const[t]of e){if(t){i.push(t)}}}}return[`Expected the value to satisfy a union of </span><span class="s3">\\</span><span class="s1">`${t}</span><span class="s3">\\</span><span class="s1">`, but received: ${print(n)}`,...i]}})}function unknown(){return define(</span><span class="s3">\&quot;</span><span class="s1">unknown</span><span class="s3">\&quot;</span><span class="s1">,(()=&gt;true))}function coerce(e,t,n){return new Struct({...e,coercer:(r,i)=&gt;is(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}function defaulted(e,t,n={}){return coerce(e,unknown(),(e=&gt;{const r=typeof t===</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">?t():t;if(e===undefined){return r}if(!n.strict&amp;&amp;isPlainObject(e)&amp;&amp;isPlainObject(r)){const t={...e};let n=false;for(const e in r){if(t[e]===undefined){t[e]=r[e];n=true}}if(n){return t}}return e}))}function trimmed(e){return coerce(e,string(),(e=&gt;e.trim()))}function empty(e){return refine(e,</span><span class="s3">\&quot;</span><span class="s1">empty</span><span class="s3">\&quot;</span><span class="s1">,(t=&gt;{const n=getSize(t);return n===0||`Expected an empty ${e.type} but received one with a size of </span><span class="s3">\\</span><span class="s1">`${n}</span><span class="s3">\\</span><span class="s1">``}))}function getSize(e){if(e instanceof Map||e instanceof Set){return e.size}else{return e.length}}function max(e,t,n={}){const{exclusive:r}=n;return refine(e,</span><span class="s3">\&quot;</span><span class="s1">max</span><span class="s3">\&quot;</span><span class="s1">,(n=&gt;r?n&lt;t:n&lt;=t||`Expected a ${e.type} less than ${r?</span><span class="s3">\&quot;\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">or equal to </span><span class="s3">\&quot;</span><span class="s1">}${t} but received </span><span class="s3">\\</span><span class="s1">`${n}</span><span class="s3">\\</span><span class="s1">``))}function min(e,t,n={}){const{exclusive:r}=n;return refine(e,</span><span class="s3">\&quot;</span><span class="s1">min</span><span class="s3">\&quot;</span><span class="s1">,(n=&gt;r?n&gt;t:n&gt;=t||`Expected a ${e.type} greater than ${r?</span><span class="s3">\&quot;\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">or equal to </span><span class="s3">\&quot;</span><span class="s1">}${t} but received </span><span class="s3">\\</span><span class="s1">`${n}</span><span class="s3">\\</span><span class="s1">``))}function nonempty(e){return refine(e,</span><span class="s3">\&quot;</span><span class="s1">nonempty</span><span class="s3">\&quot;</span><span class="s1">,(t=&gt;{const n=getSize(t);return n&gt;0||`Expected a nonempty ${e.type} but received an empty one`}))}function pattern(e,t){return refine(e,</span><span class="s3">\&quot;</span><span class="s1">pattern</span><span class="s3">\&quot;</span><span class="s1">,(n=&gt;t.test(n)||`Expected a ${e.type} matching </span><span class="s3">\\</span><span class="s1">`/${t.source}/</span><span class="s3">\\</span><span class="s1">` but received </span><span class="s3">\&quot;</span><span class="s1">${n}</span><span class="s3">\&quot;</span><span class="s1">`))}function size(e,t,n=t){const r=`Expected a ${e.type}`;const i=t===n?`of </span><span class="s3">\\</span><span class="s1">`${t}</span><span class="s3">\\</span><span class="s1">``:`between </span><span class="s3">\\</span><span class="s1">`${t}</span><span class="s3">\\</span><span class="s1">` and </span><span class="s3">\\</span><span class="s1">`${n}</span><span class="s3">\\</span><span class="s1">``;return refine(e,</span><span class="s3">\&quot;</span><span class="s1">size</span><span class="s3">\&quot;</span><span class="s1">,(e=&gt;{if(typeof e===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">||e instanceof Date){return t&lt;=e&amp;&amp;e&lt;=n||`${r} ${i} but received </span><span class="s3">\\</span><span class="s1">`${e}</span><span class="s3">\\</span><span class="s1">``}else if(e instanceof Map||e instanceof Set){const{size:c}=e;return t&lt;=c&amp;&amp;c&lt;=n||`${r} with a size ${i} but received one with a size of </span><span class="s3">\\</span><span class="s1">`${c}</span><span class="s3">\\</span><span class="s1">``}else{const{length:c}=e;return t&lt;=c&amp;&amp;c&lt;=n||`${r} with a length ${i} but received one with a length of </span><span class="s3">\\</span><span class="s1">`${c}</span><span class="s3">\\</span><span class="s1">``}}))}function refine(e,t,n){return new Struct({...e,*refiner(r,i){yield*e.refiner(r,i);const c=n(r,i);const o=toFailures(c,i,e,r);for(const e of o){yield{...e,refinement:t}}}})}e.Struct=Struct;e.StructError=StructError;e.any=any;e.array=array;e.assert=assert;e.assign=assign;e.bigint=bigint;e.boolean=boolean;e.coerce=coerce;e.create=create;e.date=date;e.defaulted=defaulted;e.define=define;e.deprecated=deprecated;e.dynamic=dynamic;e.empty=empty;e.enums=enums;e.func=func;e.instance=instance;e.integer=integer;e.intersection=intersection;e.is=is;e.lazy=lazy;e.literal=literal;e.map=map;e.mask=mask;e.max=max;e.min=min;e.never=never;e.nonempty=nonempty;e.nullable=nullable;e.number=number;e.object=object;e.omit=omit;e.optional=optional;e.partial=partial;e.pattern=pattern;e.pick=pick;e.record=record;e.refine=refine;e.regexp=regexp;e.set=set;e.size=size;e.string=string;e.struct=struct;e.trimmed=trimmed;e.tuple=tuple;e.type=type;e.union=union;e.unknown=unknown;e.validate=validate}))}};if(typeof __nccwpck_require__!==</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">)__nccwpck_require__.ab=__dirname+</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;var t={};e[318](0,t);module.exports=t})();&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4151</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/app-render/types.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { LoadComponentsReturnType } from '../load-components'</span><span class="s3">\n</span><span class="s1">import type { ServerRuntime, SizeLimit } from '../../types'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">ExperimentalConfig,</span><span class="s3">\n  </span><span class="s1">NextConfigComplete,</span><span class="s3">\n</span><span class="s1">} from '../../server/config-shared'</span><span class="s3">\n</span><span class="s1">import type { ClientReferenceManifest } from '../../build/webpack/plugins/flight-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { NextFontManifest } from '../../build/webpack/plugins/next-font-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { AppPageModule } from '../route-modules/app-page/module'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">HeadData,</span><span class="s3">\n  </span><span class="s1">LoadingModuleData,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../../shared/lib/deep-readonly'</span><span class="s3">\n</span><span class="s1">import type { __ApiPreviewProps } from '../api-utils'</span><span class="s3">\n\n</span><span class="s1">import s from 'next/dist/compiled/superstruct'</span><span class="s3">\n</span><span class="s1">import type { RequestLifecycleOpts } from '../base-server'</span><span class="s3">\n</span><span class="s1">import type { InstrumentationOnRequestError } from '../instrumentation/types'</span><span class="s3">\n</span><span class="s1">import type { NextRequestHint } from '../web/adapter'</span><span class="s3">\n</span><span class="s1">import type { BaseNextRequest } from '../base-http'</span><span class="s3">\n</span><span class="s1">import type { IncomingMessage } from 'http'</span><span class="s3">\n</span><span class="s1">import type { RenderResumeDataCache } from '../resume-data-cache/resume-data-cache'</span><span class="s3">\n\n</span><span class="s1">export type DynamicParamTypes =</span><span class="s3">\n  </span><span class="s1">| 'catchall'</span><span class="s3">\n  </span><span class="s1">| 'catchall-intercepted'</span><span class="s3">\n  </span><span class="s1">| 'optional-catchall'</span><span class="s3">\n  </span><span class="s1">| 'dynamic'</span><span class="s3">\n  </span><span class="s1">| 'dynamic-intercepted'</span><span class="s3">\n\n</span><span class="s1">const dynamicParamTypesSchema = s.enums(['c', 'ci', 'oc', 'd', 'di'])</span><span class="s3">\n\n</span><span class="s1">export type DynamicParamTypesShort = s.Infer&lt;typeof dynamicParamTypesSchema&gt;</span><span class="s3">\n\n</span><span class="s1">const segmentSchema = s.union([</span><span class="s3">\n  </span><span class="s1">s.string(),</span><span class="s3">\n\n  </span><span class="s1">s.tuple([</span><span class="s3">\n    </span><span class="s1">// Param name</span><span class="s3">\n    </span><span class="s1">s.string(),</span><span class="s3">\n    </span><span class="s1">// Param cache key (almost the same as the value, but arrays are</span><span class="s3">\n    </span><span class="s1">// concatenated into strings)</span><span class="s3">\n    </span><span class="s1">// TODO: We should change this to just be the value. Currently we convert</span><span class="s3">\n    </span><span class="s1">// it back to a value when passing to useParams. It only needs to be</span><span class="s3">\n    </span><span class="s1">// a string when converted to a a cache key, but that doesn't mean we</span><span class="s3">\n    </span><span class="s1">// need to store it as that representation.</span><span class="s3">\n    </span><span class="s1">s.string(),</span><span class="s3">\n    </span><span class="s1">// Dynamic param type</span><span class="s3">\n    </span><span class="s1">dynamicParamTypesSchema,</span><span class="s3">\n  </span><span class="s1">]),</span><span class="s3">\n</span><span class="s1">])</span><span class="s3">\n\n</span><span class="s1">export type Segment = s.Infer&lt;typeof segmentSchema&gt;</span><span class="s3">\n\n</span><span class="s1">// unfortunately the tuple is not understood well by Describe so we have to</span><span class="s3">\n</span><span class="s1">// use any here. This does not have any impact on the runtime type since the validation</span><span class="s3">\n</span><span class="s1">// does work correctly.</span><span class="s3">\n</span><span class="s1">export const flightRouterStateSchema: s.Describe&lt;any&gt; = s.tuple([</span><span class="s3">\n  </span><span class="s1">segmentSchema,</span><span class="s3">\n  </span><span class="s1">s.record(</span><span class="s3">\n    </span><span class="s1">s.string(),</span><span class="s3">\n    </span><span class="s1">s.lazy(() =&gt; flightRouterStateSchema)</span><span class="s3">\n  </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">s.optional(s.nullable(s.string())),</span><span class="s3">\n  </span><span class="s1">s.optional(</span><span class="s3">\n    </span><span class="s1">s.nullable(</span><span class="s3">\n      </span><span class="s1">s.union([</span><span class="s3">\n        </span><span class="s1">s.literal('refetch'),</span><span class="s3">\n        </span><span class="s1">s.literal('refresh'),</span><span class="s3">\n        </span><span class="s1">s.literal('inside-shared-layout'),</span><span class="s3">\n        </span><span class="s1">s.literal('metadata-only'),</span><span class="s3">\n      </span><span class="s1">])</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">s.optional(s.boolean()),</span><span class="s3">\n</span><span class="s1">])</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Router state</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type FlightRouterState = [</span><span class="s3">\n  </span><span class="s1">segment: Segment,</span><span class="s3">\n  </span><span class="s1">parallelRoutes: { [parallelRouterKey: string]: FlightRouterState },</span><span class="s3">\n  </span><span class="s1">url?: string | null,</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* </span><span class="s3">\&quot;</span><span class="s1">refresh</span><span class="s3">\&quot; </span><span class="s1">and </span><span class="s3">\&quot;</span><span class="s1">refetch</span><span class="s3">\&quot;</span><span class="s1">, despite being similarly named, have different</span><span class="s3">\n   </span><span class="s1">* semantics:</span><span class="s3">\n   </span><span class="s1">* - </span><span class="s3">\&quot;</span><span class="s1">refetch</span><span class="s3">\&quot; </span><span class="s1">is used during a request to inform the server where rendering</span><span class="s3">\n   </span><span class="s1">*   should start from.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* - </span><span class="s3">\&quot;</span><span class="s1">refresh</span><span class="s3">\&quot; </span><span class="s1">is used by the client to mark that a segment should re-fetch the</span><span class="s3">\n   </span><span class="s1">*   data from the server for the current segment. It uses the </span><span class="s3">\&quot;</span><span class="s1">url</span><span class="s3">\&quot; </span><span class="s1">property</span><span class="s3">\n   </span><span class="s1">*   above to determine where to fetch from.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* - </span><span class="s3">\&quot;</span><span class="s1">inside-shared-layout</span><span class="s3">\&quot; </span><span class="s1">is used during a prefetch request to inform the</span><span class="s3">\n   </span><span class="s1">*   server that even if the segment matches, it should be treated as if it's</span><span class="s3">\n   </span><span class="s1">*   within the </span><span class="s3">\&quot;</span><span class="s1">new</span><span class="s3">\&quot; </span><span class="s1">part of a navigation  inside the shared layout. If</span><span class="s3">\n   </span><span class="s1">*   the segment doesn't match, then it has no effect, since it would be</span><span class="s3">\n   </span><span class="s1">*   treated as new regardless. If it does match, though, the server does not</span><span class="s3">\n   </span><span class="s1">*   need to render it, because the client already has it.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* - </span><span class="s3">\&quot;</span><span class="s1">metadata-only</span><span class="s3">\&quot; </span><span class="s1">instructs the server to skip rendering the segments and</span><span class="s3">\n   </span><span class="s1">*   only send the head data.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">*   A bit confusing, but that's because it has only one extremely narrow use</span><span class="s3">\n   </span><span class="s1">*   case  during a non-PPR prefetch, the server uses it to find the first</span><span class="s3">\n   </span><span class="s1">*   loading boundary beneath a shared layout.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">*   TODO: We should rethink the protocol for dynamic requests. It might not</span><span class="s3">\n   </span><span class="s1">*   make sense for the client to send a FlightRouterState, since this type is</span><span class="s3">\n   </span><span class="s1">*   overloaded with concerns.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">refresh?:</span><span class="s3">\n    </span><span class="s1">| 'refetch'</span><span class="s3">\n    </span><span class="s1">| 'refresh'</span><span class="s3">\n    </span><span class="s1">| 'inside-shared-layout'</span><span class="s3">\n    </span><span class="s1">| 'metadata-only'</span><span class="s3">\n    </span><span class="s1">| null,</span><span class="s3">\n  </span><span class="s1">isRootLayout?: boolean,</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Only present when responding to a tree prefetch request. Indicates whether</span><span class="s3">\n   </span><span class="s1">* there is a loading boundary somewhere in the tree. The client cache uses</span><span class="s3">\n   </span><span class="s1">* this to determine if it can skip the data prefetch request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">hasLoadingBoundary?: HasLoadingBoundary,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export const enum HasLoadingBoundary {</span><span class="s3">\n  </span><span class="s1">// There is a loading boundary in this particular segment</span><span class="s3">\n  </span><span class="s1">SegmentHasLoadingBoundary = 1,</span><span class="s3">\n  </span><span class="s1">// There is a loading boundary somewhere in the subtree (but not in</span><span class="s3">\n  </span><span class="s1">// this segment)</span><span class="s3">\n  </span><span class="s1">SubtreeHasLoadingBoundary = 2,</span><span class="s3">\n  </span><span class="s1">// There is no loading boundary in this segment or any of its descendants</span><span class="s3">\n  </span><span class="s1">SubtreeHasNoLoadingBoundary = 3,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Individual Flight response path</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type FlightSegmentPath =</span><span class="s3">\n  </span><span class="s1">// Uses `any` as repeating pattern can't be typed.</span><span class="s3">\n  </span><span class="s1">| any[]</span><span class="s3">\n  </span><span class="s1">// Looks somewhat like this</span><span class="s3">\n  </span><span class="s1">| [</span><span class="s3">\n      </span><span class="s1">segment: Segment,</span><span class="s3">\n      </span><span class="s1">parallelRouterKey: string,</span><span class="s3">\n      </span><span class="s1">segment: Segment,</span><span class="s3">\n      </span><span class="s1">parallelRouterKey: string,</span><span class="s3">\n      </span><span class="s1">segment: Segment,</span><span class="s3">\n      </span><span class="s1">parallelRouterKey: string,</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Represents a tree of segments and the Flight data (i.e. React nodes) that</span><span class="s3">\n </span><span class="s1">* correspond to each one. The tree is isomorphic to the FlightRouterState;</span><span class="s3">\n </span><span class="s1">* however in the future we want to be able to fetch arbitrary partial segments</span><span class="s3">\n </span><span class="s1">* without having to fetch all its children. So this response format will</span><span class="s3">\n </span><span class="s1">* likely change.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type CacheNodeSeedData = [</span><span class="s3">\n  </span><span class="s1">segment: Segment,</span><span class="s3">\n  </span><span class="s1">node: React.ReactNode | null,</span><span class="s3">\n  </span><span class="s1">parallelRoutes: {</span><span class="s3">\n    </span><span class="s1">[parallelRouterKey: string]: CacheNodeSeedData | null</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">loading: LoadingModuleData | Promise&lt;LoadingModuleData&gt;,</span><span class="s3">\n  </span><span class="s1">isPartial: boolean,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export type FlightDataSegment = [</span><span class="s3">\n  </span><span class="s1">/* segment of the rendered slice: */ Segment,</span><span class="s3">\n  </span><span class="s1">/* treePatch */ FlightRouterState,</span><span class="s3">\n  </span><span class="s1">/* cacheNodeSeedData */ CacheNodeSeedData | null, // Can be null during prefetch if there's no loading component</span><span class="s3">\n  </span><span class="s1">/* head: viewport */ HeadData,</span><span class="s3">\n  </span><span class="s1">/* isHeadPartial */ boolean,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export type FlightDataPath =</span><span class="s3">\n  </span><span class="s1">// Uses `any` as repeating pattern can't be typed.</span><span class="s3">\n  </span><span class="s1">| any[]</span><span class="s3">\n  </span><span class="s1">// Looks somewhat like this</span><span class="s3">\n  </span><span class="s1">| [</span><span class="s3">\n      </span><span class="s1">// Holds full path to the segment.</span><span class="s3">\n      </span><span class="s1">...FlightSegmentPath[],</span><span class="s3">\n      </span><span class="s1">...FlightDataSegment,</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The Flight response data</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type FlightData = Array&lt;FlightDataPath&gt; | string</span><span class="s3">\n\n</span><span class="s1">export type ActionResult = Promise&lt;any&gt;</span><span class="s3">\n\n</span><span class="s1">export type ServerOnInstrumentationRequestError = (</span><span class="s3">\n  </span><span class="s1">error: unknown,</span><span class="s3">\n  </span><span class="s1">// The request could be middleware, node server or web server request,</span><span class="s3">\n  </span><span class="s1">// we normalized them into an aligned format to `onRequestError` API later.</span><span class="s3">\n  </span><span class="s1">request: NextRequestHint | BaseNextRequest | IncomingMessage,</span><span class="s3">\n  </span><span class="s1">errorContext: Parameters&lt;InstrumentationOnRequestError&gt;[2]</span><span class="s3">\n</span><span class="s1">) =&gt; void | Promise&lt;void&gt;</span><span class="s3">\n\n</span><span class="s1">export interface RenderOptsPartial {</span><span class="s3">\n  </span><span class="s1">dir?: string</span><span class="s3">\n  </span><span class="s1">previewProps: __ApiPreviewProps | undefined</span><span class="s3">\n  </span><span class="s1">err?: Error | null</span><span class="s3">\n  </span><span class="s1">dev?: boolean</span><span class="s3">\n  </span><span class="s1">basePath: string</span><span class="s3">\n  </span><span class="s1">trailingSlash: boolean</span><span class="s3">\n  </span><span class="s1">clientReferenceManifest?: DeepReadonly&lt;ClientReferenceManifest&gt;</span><span class="s3">\n  </span><span class="s1">supportsDynamicResponse: boolean</span><span class="s3">\n  </span><span class="s1">runtime?: ServerRuntime</span><span class="s3">\n  </span><span class="s1">serverComponents?: boolean</span><span class="s3">\n  </span><span class="s1">enableTainting?: boolean</span><span class="s3">\n  </span><span class="s1">assetPrefix?: string</span><span class="s3">\n  </span><span class="s1">crossOrigin?: '' | 'anonymous' | 'use-credentials' | undefined</span><span class="s3">\n  </span><span class="s1">nextFontManifest?: DeepReadonly&lt;NextFontManifest&gt;</span><span class="s3">\n  </span><span class="s1">botType?: 'dom' | 'html' | undefined</span><span class="s3">\n  </span><span class="s1">serveStreamingMetadata?: boolean</span><span class="s3">\n  </span><span class="s1">incrementalCache?: import('../lib/incremental-cache').IncrementalCache</span><span class="s3">\n  </span><span class="s1">cacheLifeProfiles?: {</span><span class="s3">\n    </span><span class="s1">[profile: string]: import('../use-cache/cache-life').CacheLife</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">isOnDemandRevalidate?: boolean</span><span class="s3">\n  </span><span class="s1">isPossibleServerAction?: boolean</span><span class="s3">\n  </span><span class="s1">setIsrStatus?: (key: string, value: boolean | null) =&gt; void</span><span class="s3">\n  </span><span class="s1">isRevalidate?: boolean</span><span class="s3">\n  </span><span class="s1">nextExport?: boolean</span><span class="s3">\n  </span><span class="s1">nextConfigOutput?: 'standalone' | 'export'</span><span class="s3">\n  </span><span class="s1">onInstrumentationRequestError?: ServerOnInstrumentationRequestError</span><span class="s3">\n  </span><span class="s1">isDraftMode?: boolean</span><span class="s3">\n  </span><span class="s1">deploymentId?: string</span><span class="s3">\n  </span><span class="s1">onUpdateCookies?: (cookies: string[]) =&gt; void</span><span class="s3">\n  </span><span class="s1">loadConfig?: (</span><span class="s3">\n    </span><span class="s1">phase: string,</span><span class="s3">\n    </span><span class="s1">dir: string,</span><span class="s3">\n    </span><span class="s1">customConfig?: object | null,</span><span class="s3">\n    </span><span class="s1">rawConfig?: boolean,</span><span class="s3">\n    </span><span class="s1">silent?: boolean</span><span class="s3">\n  </span><span class="s1">) =&gt; Promise&lt;NextConfigComplete&gt;</span><span class="s3">\n  </span><span class="s1">serverActions?: {</span><span class="s3">\n    </span><span class="s1">bodySizeLimit?: SizeLimit</span><span class="s3">\n    </span><span class="s1">allowedOrigins?: string[]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">params?: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">isPrefetch?: boolean</span><span class="s3">\n  </span><span class="s1">htmlLimitedBots: string | undefined</span><span class="s3">\n  </span><span class="s1">experimental: {</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* When true, it indicates that the current page supports partial</span><span class="s3">\n     </span><span class="s1">* prerendering.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n    </span><span class="s1">expireTime: number | undefined</span><span class="s3">\n    </span><span class="s1">staleTimes: ExperimentalConfig['staleTimes'] | undefined</span><span class="s3">\n    </span><span class="s1">clientTraceMetadata: string[] | undefined</span><span class="s3">\n    </span><span class="s1">cacheComponents: boolean</span><span class="s3">\n    </span><span class="s1">clientSegmentCache: boolean | 'client-only'</span><span class="s3">\n    </span><span class="s1">clientParamParsing: boolean</span><span class="s3">\n    </span><span class="s1">dynamicOnHover: boolean</span><span class="s3">\n    </span><span class="s1">inlineCss: boolean</span><span class="s3">\n    </span><span class="s1">authInterrupts: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">postponed?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Should wait for react stream allReady to resolve all suspense boundaries,</span><span class="s3">\n   </span><span class="s1">* in order to perform a full page render.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">shouldWaitOnAllReady?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A prefilled resume data cache. This was either generated for this page</span><span class="s3">\n   </span><span class="s1">* during dev warmup, or when a page with defined params was previously</span><span class="s3">\n   </span><span class="s1">* prerendered, and now its matching optional fallback shell is prerendered.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">renderResumeDataCache?: RenderResumeDataCache</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true, the page will be rendered using the static rendering to detect</span><span class="s3">\n   </span><span class="s1">* any dynamic API's that would have stopped the page from being fully</span><span class="s3">\n   </span><span class="s1">* statically generated.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isDebugDynamicAccesses?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* This is true when:</span><span class="s3">\n   </span><span class="s1">* - source maps are generated</span><span class="s3">\n   </span><span class="s1">* - source maps are applied</span><span class="s3">\n   </span><span class="s1">* - minification is disabled</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">hasReadableErrorStacks?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The maximum length of the headers that are emitted by React and added to</span><span class="s3">\n   </span><span class="s1">* the response.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">reactMaxHeadersLength: number | undefined</span><span class="s3">\n\n  </span><span class="s1">isStaticGeneration?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true, the page is prerendered as a fallback shell, while allowing any</span><span class="s3">\n   </span><span class="s1">* dynamic accesses to result in an empty shell. This is the case when there</span><span class="s3">\n   </span><span class="s1">* are also routes prerendered with a more complete set of params.</span><span class="s3">\n   </span><span class="s1">* Prerendering those routes would catch any invalid dynamic accesses.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">allowEmptyStaticShell?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* next config experimental.devtoolSegmentExplorer</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">devtoolSegmentExplorer?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RenderOpts = LoadComponentsReturnType&lt;AppPageModule&gt; &amp;</span><span class="s3">\n  </span><span class="s1">RenderOptsPartial &amp;</span><span class="s3">\n  </span><span class="s1">RequestLifecycleOpts</span><span class="s3">\n\n</span><span class="s1">export type PreloadCallbacks = (() =&gt; void)[]</span><span class="s3">\n\n</span><span class="s1">export type InitialRSCPayload = {</span><span class="s3">\n  </span><span class="s1">/** buildId */</span><span class="s3">\n  </span><span class="s1">b: string</span><span class="s3">\n  </span><span class="s1">/** assetPrefix */</span><span class="s3">\n  </span><span class="s1">p: string</span><span class="s3">\n  </span><span class="s1">/** initialCanonicalUrlParts */</span><span class="s3">\n  </span><span class="s1">c: string[]</span><span class="s3">\n  </span><span class="s1">/** couldBeIntercepted */</span><span class="s3">\n  </span><span class="s1">i: boolean</span><span class="s3">\n  </span><span class="s1">/** initialFlightData */</span><span class="s3">\n  </span><span class="s1">f: FlightDataPath[]</span><span class="s3">\n  </span><span class="s1">/** missingSlots */</span><span class="s3">\n  </span><span class="s1">m: Set&lt;string&gt; | undefined</span><span class="s3">\n  </span><span class="s1">/** GlobalError */</span><span class="s3">\n  </span><span class="s1">G: [React.ComponentType&lt;any&gt;, React.ReactNode | undefined]</span><span class="s3">\n  </span><span class="s1">/** postponed */</span><span class="s3">\n  </span><span class="s1">s: boolean</span><span class="s3">\n  </span><span class="s1">/** prerendered */</span><span class="s3">\n  </span><span class="s1">S: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Response from `createFromFetch` for normal rendering</span><span class="s3">\n</span><span class="s1">export type NavigationFlightResponse = {</span><span class="s3">\n  </span><span class="s1">/** buildId */</span><span class="s3">\n  </span><span class="s1">b: string</span><span class="s3">\n  </span><span class="s1">/** flightData */</span><span class="s3">\n  </span><span class="s1">f: FlightData</span><span class="s3">\n  </span><span class="s1">/** prerendered */</span><span class="s3">\n  </span><span class="s1">S: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Response from `createFromFetch` for server actions. Action's flight data can be null</span><span class="s3">\n</span><span class="s1">export type ActionFlightResponse = {</span><span class="s3">\n  </span><span class="s1">/** actionResult */</span><span class="s3">\n  </span><span class="s1">a: ActionResult</span><span class="s3">\n  </span><span class="s1">/** buildId */</span><span class="s3">\n  </span><span class="s1">b: string</span><span class="s3">\n  </span><span class="s1">/** flightData */</span><span class="s3">\n  </span><span class="s1">f: FlightData</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RSCPayload =</span><span class="s3">\n  </span><span class="s1">| InitialRSCPayload</span><span class="s3">\n  </span><span class="s1">| NavigationFlightResponse</span><span class="s3">\n  </span><span class="s1">| ActionFlightResponse</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;HasLoadingBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;flightRouterStateSchema&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicParamTypesSchema&quot;</span><span class="s0">,</span><span class="s1">&quot;s&quot;</span><span class="s0">,</span><span class="s1">&quot;enums&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentSchema&quot;</span><span class="s0">,</span><span class="s1">&quot;union&quot;</span><span class="s0">,</span><span class="s1">&quot;string&quot;</span><span class="s0">,</span><span class="s1">&quot;tuple&quot;</span><span class="s0">,</span><span class="s1">&quot;record&quot;</span><span class="s0">,</span><span class="s1">&quot;lazy&quot;</span><span class="s0">,</span><span class="s1">&quot;optional&quot;</span><span class="s0">,</span><span class="s1">&quot;nullable&quot;</span><span class="s0">,</span><span class="s1">&quot;literal&quot;</span><span class="s0">,</span><span class="s1">&quot;boolean&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;IAiIkBA,kBAAkB,EAAA;eAAlBA;;IAtELC,uBAAuB,EAAA;eAAvBA;;;oEA1CC;;;;;;AAed,MAAMC,0BAA0BC,aAAAA,OAAC,CAACC,KAAK,CAAC;IAAC;IAAK;IAAM;IAAM;IAAK;CAAK;AAIpE,MAAMC,gBAAgBF,aAAAA,OAAC,CAACG,KAAK,CAAC;IAC5BH,aAAAA,OAAC,CAACI,MAAM;IAERJ,aAAAA,OAAC,CAACK,KAAK,CAAC;QACN,aAAa;QACbL,aAAAA,OAAC,CAACI,MAAM;QACR,gEAAgE;QAChE,6BAA6B;QAC7B,yEAAyE;QACzE,oEAAoE;QACpE,qEAAqE;QACrE,2CAA2C;QAC3CJ,aAAAA,OAAC,CAACI,MAAM;QACR,qBAAqB;QACrBL;KACD;CACF;AAOM,MAAMD,0BAA2CE,aAAAA,OAAC,CAACK,KAAK,CAAC;IAC9DH;IACAF,aAAAA,OAAC,CAACM,MAAM,CACNN,aAAAA,OAAC,CAACI,MAAM,IACRJ,aAAAA,OAAC,CAACO,IAAI,CAAC,IAAMT;IAEfE,aAAAA,OAAC,CAACQ,QAAQ,CAACR,aAAAA,OAAC,CAACS,QAAQ,CAACT,aAAAA,OAAC,CAACI,MAAM;IAC9BJ,aAAAA,OAAC,CAACQ,QAAQ,CACRR,aAAAA,OAAC,CAACS,QAAQ,CACRT,aAAAA,OAAC,CAACG,KAAK,CAAC;QACNH,aAAAA,OAAC,CAACU,OAAO,CAAC;QACVV,aAAAA,OAAC,CAACU,OAAO,CAAC;QACVV,aAAAA,OAAC,CAACU,OAAO,CAAC;QACVV,aAAAA,OAAC,CAACU,OAAO,CAAC;KACX;IAGLV,aAAAA,OAAC,CAACQ,QAAQ,CAACR,aAAAA,OAAC,CAACW,OAAO;CACrB;AAoDM,IAAWd,qBAAAA,WAAAA,GAAAA,SAAAA,kBAAAA;IAChB,yDAAyD;;IAEzD,mEAAmE;IACnE,gBAAgB;;IAEhB,yEAAyE;;WANzDA&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4227</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/app-render/parse-and-validate-flight-router-state.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { FlightRouterState } from './types'</span><span class="s3">\n</span><span class="s1">import { flightRouterStateSchema } from './types'</span><span class="s3">\n</span><span class="s1">import { assert } from 'next/dist/compiled/superstruct'</span><span class="s3">\n\n</span><span class="s1">export function parseAndValidateFlightRouterState(</span><span class="s3">\n  </span><span class="s1">stateHeader: string | string[]</span><span class="s3">\n</span><span class="s1">): FlightRouterState</span><span class="s3">\n</span><span class="s1">export function parseAndValidateFlightRouterState(</span><span class="s3">\n  </span><span class="s1">stateHeader: undefined</span><span class="s3">\n</span><span class="s1">): undefined</span><span class="s3">\n</span><span class="s1">export function parseAndValidateFlightRouterState(</span><span class="s3">\n  </span><span class="s1">stateHeader: string | string[] | undefined</span><span class="s3">\n</span><span class="s1">): FlightRouterState | undefined</span><span class="s3">\n</span><span class="s1">export function parseAndValidateFlightRouterState(</span><span class="s3">\n  </span><span class="s1">stateHeader: string | string[] | undefined</span><span class="s3">\n</span><span class="s1">): FlightRouterState | undefined {</span><span class="s3">\n  </span><span class="s1">if (typeof stateHeader === 'undefined') {</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(stateHeader)) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">'Multiple router state headers were sent. This is not allowed.'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We limit the size of the router state header to ~40kb. This is to prevent</span><span class="s3">\n  </span><span class="s1">// a malicious user from sending a very large header and slowing down the</span><span class="s3">\n  </span><span class="s1">// resolving of the router state.</span><span class="s3">\n  </span><span class="s1">// This is around 2,000 nested or parallel route segment states:</span><span class="s3">\n  </span><span class="s1">// '{</span><span class="s3">\&quot;</span><span class="s1">children</span><span class="s3">\&quot;</span><span class="s1">:[</span><span class="s3">\&quot;\&quot;</span><span class="s1">,{}]}'.length === 20.</span><span class="s3">\n  </span><span class="s1">if (stateHeader.length &gt; 20 * 2000) {</span><span class="s3">\n    </span><span class="s1">throw new Error('The router state header was too large.')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const state = JSON.parse(decodeURIComponent(stateHeader))</span><span class="s3">\n    </span><span class="s1">assert(state, flightRouterStateSchema)</span><span class="s3">\n    </span><span class="s1">return state</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">throw new Error('The router state header was sent but could not be parsed.')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parseAndValidateFlightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;stateHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;assert&quot;</span><span class="s0">,</span><span class="s1">&quot;flightRouterStateSchema&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAagBA,qCAAAA;;;eAAAA;;;uBAZwB;6BACjB;AAWhB,SAASA,kCACdC,WAA0C;IAE1C,IAAI,OAAOA,gBAAgB,aAAa;QACtC,OAAOC;IACT;IACA,IAAIC,MAAMC,OAAO,CAACH,cAAc;QAC9B,MAAM,OAAA,cAEL,CAFK,IAAII,MACR,kEADI,qBAAA;mBAAA;wBAAA;0BAAA;QAEN;IACF;IAEA,4EAA4E;IAC5E,yEAAyE;IACzE,iCAAiC;IACjC,gEAAgE;IAChE,wCAAwC;IACxC,IAAIJ,YAAYK,MAAM,GAAG,KAAK,MAAM;QAClC,MAAM,OAAA,cAAmD,CAAnD,IAAID,MAAM,2CAAV,qBAAA;mBAAA;wBAAA;0BAAA;QAAkD;IAC1D;IAEA,IAAI;QACF,MAAME,QAAQC,KAAKC,KAAK,CAACC,mBAAmBT;QAC5CU,CAAAA,GAAAA,aAAAA,MAAM,EAACJ,OAAOK,OAAAA,uBAAuB;QACrC,OAAOL;IACT,EAAE,OAAM;QACN,MAAM,OAAA,cAAsE,CAAtE,IAAIF,MAAM,8DAAV,qBAAA;mBAAA;wBAAA;0BAAA;QAAqE;IAC7E;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4277</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/generate-interception-routes-rewrites.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { NEXT_URL } from '../client/components/app-router-headers'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">extractInterceptionRouteInformation,</span><span class="s3">\n  </span><span class="s1">isInterceptionRouteAppPath,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/router/utils/interception-routes'</span><span class="s3">\n</span><span class="s1">import type { Rewrite } from './load-custom-routes'</span><span class="s3">\n</span><span class="s1">import { safePathToRegexp } from '../shared/lib/router/utils/route-match-utils'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../shared/lib/deep-readonly'</span><span class="s3">\n\n</span><span class="s1">// a function that converts normalised paths (e.g. /foo/[bar]/[baz]) to the format expected by pathToRegexp (e.g. /foo/:bar/:baz)</span><span class="s3">\n</span><span class="s1">function toPathToRegexpPath(path: string): string {</span><span class="s3">\n  </span><span class="s1">return path.replace(/</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">[?([^</span><span class="s3">\\</span><span class="s1">]]+)</span><span class="s3">\\</span><span class="s1">]</span><span class="s3">\\</span><span class="s1">]?/g, (_, capture) =&gt; {</span><span class="s3">\n    </span><span class="s1">// path-to-regexp only supports word characters, so we replace any non-word characters with underscores</span><span class="s3">\n    </span><span class="s1">const paramName = capture.replace(/</span><span class="s3">\\</span><span class="s1">W+/g, '_')</span><span class="s3">\n\n    </span><span class="s1">// handle catch-all segments (e.g. /foo/bar/[...baz] or /foo/bar/[[...baz]])</span><span class="s3">\n    </span><span class="s1">if (capture.startsWith('...')) {</span><span class="s3">\n      </span><span class="s1">return `:${capture.slice(3)}*`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return ':' + paramName</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function generateInterceptionRoutesRewrites(</span><span class="s3">\n  </span><span class="s1">appPaths: string[],</span><span class="s3">\n  </span><span class="s1">basePath = ''</span><span class="s3">\n</span><span class="s1">): Rewrite[] {</span><span class="s3">\n  </span><span class="s1">const rewrites: Rewrite[] = []</span><span class="s3">\n\n  </span><span class="s1">for (const appPath of appPaths) {</span><span class="s3">\n    </span><span class="s1">if (isInterceptionRouteAppPath(appPath)) {</span><span class="s3">\n      </span><span class="s1">const { interceptingRoute, interceptedRoute } =</span><span class="s3">\n        </span><span class="s1">extractInterceptionRouteInformation(appPath)</span><span class="s3">\n\n      </span><span class="s1">const normalizedInterceptingRoute = `${</span><span class="s3">\n        </span><span class="s1">interceptingRoute !== '/' ? toPathToRegexpPath(interceptingRoute) : ''</span><span class="s3">\n      </span><span class="s1">}/(.*)?`</span><span class="s3">\n\n      </span><span class="s1">const normalizedInterceptedRoute = toPathToRegexpPath(interceptedRoute)</span><span class="s3">\n      </span><span class="s1">const normalizedAppPath = toPathToRegexpPath(appPath)</span><span class="s3">\n\n      </span><span class="s1">// pathToRegexp returns a regex that matches the path, but we need to</span><span class="s3">\n      </span><span class="s1">// convert it to a string that can be used in a header value</span><span class="s3">\n      </span><span class="s1">// to the format that Next/the proxy expects</span><span class="s3">\n      </span><span class="s1">let interceptingRouteRegex = safePathToRegexp(normalizedInterceptingRoute)</span><span class="s3">\n        </span><span class="s1">.toString()</span><span class="s3">\n        </span><span class="s1">.slice(2, -3)</span><span class="s3">\n\n      </span><span class="s1">rewrites.push({</span><span class="s3">\n        </span><span class="s1">source: `${basePath}${normalizedInterceptedRoute}`,</span><span class="s3">\n        </span><span class="s1">destination: `${basePath}${normalizedAppPath}`,</span><span class="s3">\n        </span><span class="s1">has: [</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">type: 'header',</span><span class="s3">\n            </span><span class="s1">key: NEXT_URL,</span><span class="s3">\n            </span><span class="s1">value: interceptingRouteRegex,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">],</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return rewrites</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isInterceptionRouteRewrite(route: DeepReadonly&lt;Rewrite&gt;) {</span><span class="s3">\n  </span><span class="s1">// When we generate interception rewrites in the above implementation, we always do so with only a single `has` condition.</span><span class="s3">\n  </span><span class="s1">return route.has?.[0]?.key === NEXT_URL</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;generateInterceptionRoutesRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;toPathToRegexpPath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;capture&quot;</span><span class="s0">,</span><span class="s1">&quot;paramName&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;appPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;appPath&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptingRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;extractInterceptionRouteInformation&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedInterceptingRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedInterceptedRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptingRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;safePathToRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;IAuBgBA,kCAAkC,EAAA;eAAlCA;;IA0CAC,0BAA0B,EAAA;eAA1BA;;;kCAjES;oCAIlB;iCAE0B;AAGjC,iIAAiI;AACjI,SAASC,mBAAmBC,IAAY;IACtC,OAAOA,KAAKC,OAAO,CAAC,uBAAuB,CAACC,GAAGC;QAC7C,uGAAuG;QACvG,MAAMC,YAAYD,QAAQF,OAAO,CAAC,QAAQ;QAE1C,4EAA4E;QAC5E,IAAIE,QAAQE,UAAU,CAAC,QAAQ;YAC7B,OAAO,CAAC,CAAC,EAAEF,QAAQG,KAAK,CAAC,GAAG,CAAC,CAAC;QAChC;QACA,OAAO,MAAMF;IACf;AACF;AAEO,SAASP,mCACdU,QAAkB,EAClBC,WAAW,EAAE;IAEb,MAAMC,WAAsB,EAAE;IAE9B,KAAK,MAAMC,WAAWH,SAAU;QAC9B,IAAII,CAAAA,GAAAA,oBAAAA,0BAA0B,EAACD,UAAU;YACvC,MAAM,EAAEE,iBAAiB,EAAEC,gBAAgB,EAAE,GAC3CC,CAAAA,GAAAA,oBAAAA,mCAAmC,EAACJ;YAEtC,MAAMK,8BAA8B,GAClCH,sBAAsB,MAAMb,mBAAmBa,qBAAqB,GACrE,MAAM,CAAC;YAER,MAAMI,6BAA6BjB,mBAAmBc;YACtD,MAAMI,oBAAoBlB,mBAAmBW;YAE7C,qEAAqE;YACrE,4DAA4D;YAC5D,4CAA4C;YAC5C,IAAIQ,yBAAyBC,CAAAA,GAAAA,iBAAAA,gBAAgB,EAACJ,6BAC3CK,QAAQ,GACRd,KAAK,CAAC,GAAG,CAAC;YAEbG,SAASY,IAAI,CAAC;gBACZC,QAAQ,GAAGd,WAAWQ,4BAA4B;gBAClDO,aAAa,GAAGf,WAAWS,mBAAmB;gBAC9CO,KAAK;oBACH;wBACEC,MAAM;wBACNC,KAAKC,kBAAAA,QAAQ;wBACbC,OAAOV;oBACT;iBACD;YACH;QACF;IACF;IAEA,OAAOT;AACT;AAEO,SAASX,2BAA2B+B,KAA4B;QAE9DA,aAAAA;IADP,0HAA0H;IAC1H,OAAOA,CAAAA,CAAAA,aAAAA,MAAML,GAAG,KAAA,OAAA,KAAA,IAAA,CAATK,cAAAA,UAAW,CAAC,EAAE,KAAA,OAAA,KAAA,IAAdA,YAAgBH,GAAG,MAAKC,kBAAAA,QAAQ;AACzC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4349</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/client/components/match-segments.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Segment } from '../../server/app-render/types'</span><span class="s3">\n\n</span><span class="s1">export const matchSegment = (</span><span class="s3">\n  </span><span class="s1">existingSegment: Segment,</span><span class="s3">\n  </span><span class="s1">segment: Segment</span><span class="s3">\n</span><span class="s1">): boolean =&gt; {</span><span class="s3">\n  </span><span class="s1">// segment is either Array or string</span><span class="s3">\n  </span><span class="s1">if (typeof existingSegment === 'string') {</span><span class="s3">\n    </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n      </span><span class="s1">// Common case: segment is just a string</span><span class="s3">\n      </span><span class="s1">return existingSegment === segment</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return existingSegment[0] === segment[0] &amp;&amp; existingSegment[1] === segment[1]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;matchSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;existingSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;+BAEaA,gBAAAA;;;eAAAA;;;AAAN,MAAMA,eAAe,CAC1BC,iBACAC;IAEA,oCAAoC;IACpC,IAAI,OAAOD,oBAAoB,UAAU;QACvC,IAAI,OAAOC,YAAY,UAAU;YAC/B,wCAAwC;YACxC,OAAOD,oBAAoBC;QAC7B;QACA,OAAO;IACT;IAEA,IAAI,OAAOA,YAAY,UAAU;QAC/B,OAAO;IACT;IACA,OAAOD,eAAe,CAAC,EAAE,KAAKC,OAAO,CAAC,EAAE,IAAID,eAAe,CAAC,EAAE,KAAKC,OAAO,CAAC,EAAE;AAC/E&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4383</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/client/components/router-reducer/compute-changed-path.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">FlightRouterState,</span><span class="s3">\n  </span><span class="s1">Segment,</span><span class="s3">\n</span><span class="s1">} from '../../../server/app-render/types'</span><span class="s3">\n</span><span class="s1">import { INTERCEPTION_ROUTE_MARKERS } from '../../../shared/lib/router/utils/interception-routes'</span><span class="s3">\n</span><span class="s1">import type { Params } from '../../../server/request/params'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">isGroupSegment,</span><span class="s3">\n  </span><span class="s1">DEFAULT_SEGMENT_KEY,</span><span class="s3">\n  </span><span class="s1">PAGE_SEGMENT_KEY,</span><span class="s3">\n</span><span class="s1">} from '../../../shared/lib/segment'</span><span class="s3">\n</span><span class="s1">import { matchSegment } from '../match-segments'</span><span class="s3">\n\n</span><span class="s1">const removeLeadingSlash = (segment: string): string =&gt; {</span><span class="s3">\n  </span><span class="s1">return segment[0] === '/' ? segment.slice(1) : segment</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const segmentToPathname = (segment: Segment): string =&gt; {</span><span class="s3">\n  </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n    </span><span class="s1">// 'children' is not a valid path -- it's technically a parallel route that corresponds with the current segment's page</span><span class="s3">\n    </span><span class="s1">// if we don't skip it, then the computed pathname might be something like `/children` which doesn't make sense.</span><span class="s3">\n    </span><span class="s1">if (segment === 'children') return ''</span><span class="s3">\n\n    </span><span class="s1">return segment</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return segment[1]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function normalizeSegments(segments: string[]): string {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">segments.reduce((acc, segment) =&gt; {</span><span class="s3">\n      </span><span class="s1">segment = removeLeadingSlash(segment)</span><span class="s3">\n      </span><span class="s1">if (segment === '' || isGroupSegment(segment)) {</span><span class="s3">\n        </span><span class="s1">return acc</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return `${acc}/${segment}`</span><span class="s3">\n    </span><span class="s1">}, '') || '/'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function extractPathFromFlightRouterState(</span><span class="s3">\n  </span><span class="s1">flightRouterState: FlightRouterState</span><span class="s3">\n</span><span class="s1">): string | undefined {</span><span class="s3">\n  </span><span class="s1">const segment = Array.isArray(flightRouterState[0])</span><span class="s3">\n    </span><span class="s1">? flightRouterState[0][1]</span><span class="s3">\n    </span><span class="s1">: flightRouterState[0]</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">segment === DEFAULT_SEGMENT_KEY ||</span><span class="s3">\n    </span><span class="s1">INTERCEPTION_ROUTE_MARKERS.some((m) =&gt; segment.startsWith(m))</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n\n  </span><span class="s1">if (segment.startsWith(PAGE_SEGMENT_KEY)) return ''</span><span class="s3">\n\n  </span><span class="s1">const segments = [segmentToPathname(segment)]</span><span class="s3">\n  </span><span class="s1">const parallelRoutes = flightRouterState[1] ?? {}</span><span class="s3">\n\n  </span><span class="s1">const childrenPath = parallelRoutes.children</span><span class="s3">\n    </span><span class="s1">? extractPathFromFlightRouterState(parallelRoutes.children)</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n\n  </span><span class="s1">if (childrenPath !== undefined) {</span><span class="s3">\n    </span><span class="s1">segments.push(childrenPath)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">for (const [key, value] of Object.entries(parallelRoutes)) {</span><span class="s3">\n      </span><span class="s1">if (key === 'children') continue</span><span class="s3">\n\n      </span><span class="s1">const childPath = extractPathFromFlightRouterState(value)</span><span class="s3">\n\n      </span><span class="s1">if (childPath !== undefined) {</span><span class="s3">\n        </span><span class="s1">segments.push(childPath)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return normalizeSegments(segments)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function computeChangedPathImpl(</span><span class="s3">\n  </span><span class="s1">treeA: FlightRouterState,</span><span class="s3">\n  </span><span class="s1">treeB: FlightRouterState</span><span class="s3">\n</span><span class="s1">): string | null {</span><span class="s3">\n  </span><span class="s1">const [segmentA, parallelRoutesA] = treeA</span><span class="s3">\n  </span><span class="s1">const [segmentB, parallelRoutesB] = treeB</span><span class="s3">\n\n  </span><span class="s1">const normalizedSegmentA = segmentToPathname(segmentA)</span><span class="s3">\n  </span><span class="s1">const normalizedSegmentB = segmentToPathname(segmentB)</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">INTERCEPTION_ROUTE_MARKERS.some(</span><span class="s3">\n      </span><span class="s1">(m) =&gt;</span><span class="s3">\n        </span><span class="s1">normalizedSegmentA.startsWith(m) || normalizedSegmentB.startsWith(m)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!matchSegment(segmentA, segmentB)) {</span><span class="s3">\n    </span><span class="s1">// once we find where the tree changed, we compute the rest of the path by traversing the tree</span><span class="s3">\n    </span><span class="s1">return extractPathFromFlightRouterState(treeB) ?? ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const parallelRouterKey in parallelRoutesA) {</span><span class="s3">\n    </span><span class="s1">if (parallelRoutesB[parallelRouterKey]) {</span><span class="s3">\n      </span><span class="s1">const changedPath = computeChangedPathImpl(</span><span class="s3">\n        </span><span class="s1">parallelRoutesA[parallelRouterKey],</span><span class="s3">\n        </span><span class="s1">parallelRoutesB[parallelRouterKey]</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">if (changedPath !== null) {</span><span class="s3">\n        </span><span class="s1">return `${segmentToPathname(segmentB)}/${changedPath}`</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function computeChangedPath(</span><span class="s3">\n  </span><span class="s1">treeA: FlightRouterState,</span><span class="s3">\n  </span><span class="s1">treeB: FlightRouterState</span><span class="s3">\n</span><span class="s1">): string | null {</span><span class="s3">\n  </span><span class="s1">const changedPath = computeChangedPathImpl(treeA, treeB)</span><span class="s3">\n\n  </span><span class="s1">if (changedPath == null || changedPath === '/') {</span><span class="s3">\n    </span><span class="s1">return changedPath</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// lightweight normalization to remove route groups</span><span class="s3">\n  </span><span class="s1">return normalizeSegments(changedPath.split('/'))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Recursively extracts dynamic parameters from FlightRouterState.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getSelectedParams(</span><span class="s3">\n  </span><span class="s1">currentTree: FlightRouterState,</span><span class="s3">\n  </span><span class="s1">params: Params = {}</span><span class="s3">\n</span><span class="s1">): Params {</span><span class="s3">\n  </span><span class="s1">const parallelRoutes = currentTree[1]</span><span class="s3">\n\n  </span><span class="s1">for (const parallelRoute of Object.values(parallelRoutes)) {</span><span class="s3">\n    </span><span class="s1">const segment = parallelRoute[0]</span><span class="s3">\n    </span><span class="s1">const isDynamicParameter = Array.isArray(segment)</span><span class="s3">\n    </span><span class="s1">const segmentValue = isDynamicParameter ? segment[1] : segment</span><span class="s3">\n    </span><span class="s1">if (!segmentValue || segmentValue.startsWith(PAGE_SEGMENT_KEY)) continue</span><span class="s3">\n\n    </span><span class="s1">// Ensure catchAll and optional catchall are turned into an array</span><span class="s3">\n    </span><span class="s1">const isCatchAll =</span><span class="s3">\n      </span><span class="s1">isDynamicParameter &amp;&amp; (segment[2] === 'c' || segment[2] === 'oc')</span><span class="s3">\n\n    </span><span class="s1">if (isCatchAll) {</span><span class="s3">\n      </span><span class="s1">params[segment[0]] = segment[1].split('/')</span><span class="s3">\n    </span><span class="s1">} else if (isDynamicParameter) {</span><span class="s3">\n      </span><span class="s1">params[segment[0]] = segment[1]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">params = getSelectedParams(parallelRoute, params)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return params</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;computeChangedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;extractPathFromFlightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;getSelectedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;removeLeadingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentToPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeSegments&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">,</span><span class="s1">&quot;isGroupSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;flightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;INTERCEPTION_ROUTE_MARKERS&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGE_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;childrenPath&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;childPath&quot;</span><span class="s0">,</span><span class="s1">&quot;computeChangedPathImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;treeA&quot;</span><span class="s0">,</span><span class="s1">&quot;treeB&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentA&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoutesA&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentB&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoutesB&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedSegmentA&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedSegmentB&quot;</span><span class="s0">,</span><span class="s1">&quot;matchSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRouterKey&quot;</span><span class="s0">,</span><span class="s1">&quot;changedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;currentTree&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentValue&quot;</span><span class="s0">,</span><span class="s1">&quot;isCatchAll&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4516</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/server-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Rewrite } from '../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import type { RouteMatchFn } from '../shared/lib/router/utils/route-matcher'</span><span class="s3">\n</span><span class="s1">import type { NextConfig } from './config'</span><span class="s3">\n</span><span class="s1">import type { BaseNextRequest } from './base-http'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { UrlWithParsedQuery } from 'url'</span><span class="s3">\n\n</span><span class="s1">import { normalizeLocalePath } from '../shared/lib/i18n/normalize-locale-path'</span><span class="s3">\n</span><span class="s1">import { getPathMatch } from '../shared/lib/router/utils/path-match'</span><span class="s3">\n</span><span class="s1">import { getNamedRouteRegex } from '../shared/lib/router/utils/route-regex'</span><span class="s3">\n</span><span class="s1">import { getRouteMatcher } from '../shared/lib/router/utils/route-matcher'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">matchHas,</span><span class="s3">\n  </span><span class="s1">prepareDestination,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/router/utils/prepare-destination'</span><span class="s3">\n</span><span class="s1">import { removeTrailingSlash } from '../shared/lib/router/utils/remove-trailing-slash'</span><span class="s3">\n</span><span class="s1">import { normalizeRscURL } from '../shared/lib/router/utils/app-paths'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_CACHE_REVALIDATED_TAGS_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_INTERCEPTION_MARKER_PREFIX,</span><span class="s3">\n  </span><span class="s1">NEXT_QUERY_PARAM_PREFIX,</span><span class="s3">\n</span><span class="s1">} from '../lib/constants'</span><span class="s3">\n</span><span class="s1">import { normalizeNextQueryParam } from './web/utils'</span><span class="s3">\n</span><span class="s1">import type { IncomingHttpHeaders, IncomingMessage } from 'http'</span><span class="s3">\n</span><span class="s1">import { decodeQueryPathParameter } from './lib/decode-query-path-parameter'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../shared/lib/deep-readonly'</span><span class="s3">\n</span><span class="s1">import { parseReqUrl } from '../lib/url'</span><span class="s3">\n</span><span class="s1">import { formatUrl } from '../shared/lib/router/utils/format-url'</span><span class="s3">\n</span><span class="s1">import { parseAndValidateFlightRouterState } from './app-render/parse-and-validate-flight-router-state'</span><span class="s3">\n</span><span class="s1">import { isInterceptionRouteRewrite } from '../lib/generate-interception-routes-rewrites'</span><span class="s3">\n</span><span class="s1">import { NEXT_ROUTER_STATE_TREE_HEADER } from '../client/components/app-router-headers'</span><span class="s3">\n</span><span class="s1">import { getSelectedParams } from '../client/components/router-reducer/compute-changed-path'</span><span class="s3">\n\n</span><span class="s1">function filterInternalQuery(</span><span class="s3">\n  </span><span class="s1">query: Record&lt;string, undefined | string | string[]&gt;,</span><span class="s3">\n  </span><span class="s1">paramKeys: string[]</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// this is used to pass query information in rewrites</span><span class="s3">\n  </span><span class="s1">// but should not be exposed in final query</span><span class="s3">\n  </span><span class="s1">delete query['nextInternalLocale']</span><span class="s3">\n\n  </span><span class="s1">for (const key in query) {</span><span class="s3">\n    </span><span class="s1">const isNextQueryPrefix =</span><span class="s3">\n      </span><span class="s1">key !== NEXT_QUERY_PARAM_PREFIX &amp;&amp; key.startsWith(NEXT_QUERY_PARAM_PREFIX)</span><span class="s3">\n\n    </span><span class="s1">const isNextInterceptionMarkerPrefix =</span><span class="s3">\n      </span><span class="s1">key !== NEXT_INTERCEPTION_MARKER_PREFIX &amp;&amp;</span><span class="s3">\n      </span><span class="s1">key.startsWith(NEXT_INTERCEPTION_MARKER_PREFIX)</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">isNextQueryPrefix ||</span><span class="s3">\n      </span><span class="s1">isNextInterceptionMarkerPrefix ||</span><span class="s3">\n      </span><span class="s1">paramKeys.includes(key)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">delete query[key]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function normalizeCdnUrl(</span><span class="s3">\n  </span><span class="s1">req: BaseNextRequest | IncomingMessage,</span><span class="s3">\n  </span><span class="s1">paramKeys: string[]</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// make sure to normalize req.url from CDNs to strip dynamic and rewrite</span><span class="s3">\n  </span><span class="s1">// params from the query which are added during routing</span><span class="s3">\n  </span><span class="s1">const _parsedUrl = parseReqUrl(req.url!)</span><span class="s3">\n\n  </span><span class="s1">// we can't normalize if we can't parse</span><span class="s3">\n  </span><span class="s1">if (!_parsedUrl) {</span><span class="s3">\n    </span><span class="s1">return req.url</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">delete (_parsedUrl as any).search</span><span class="s3">\n  </span><span class="s1">filterInternalQuery(_parsedUrl.query, paramKeys)</span><span class="s3">\n\n  </span><span class="s1">req.url = formatUrl(_parsedUrl)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function interpolateDynamicPath(</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">params: ParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">defaultRouteRegex?: ReturnType&lt;typeof getNamedRouteRegex&gt; | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (!defaultRouteRegex) return pathname</span><span class="s3">\n\n  </span><span class="s1">for (const param of Object.keys(defaultRouteRegex.groups)) {</span><span class="s3">\n    </span><span class="s1">const { optional, repeat } = defaultRouteRegex.groups[param]</span><span class="s3">\n    </span><span class="s1">let builtParam = `[${repeat ? '...' : ''}${param}]`</span><span class="s3">\n\n    </span><span class="s1">if (optional) {</span><span class="s3">\n      </span><span class="s1">builtParam = `[${builtParam}]`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let paramValue: string</span><span class="s3">\n    </span><span class="s1">const value = params[param]</span><span class="s3">\n\n    </span><span class="s1">if (Array.isArray(value)) {</span><span class="s3">\n      </span><span class="s1">paramValue = value.map((v) =&gt; v &amp;&amp; encodeURIComponent(v)).join('/')</span><span class="s3">\n    </span><span class="s1">} else if (value) {</span><span class="s3">\n      </span><span class="s1">paramValue = encodeURIComponent(value)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">paramValue = ''</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (paramValue || optional) {</span><span class="s3">\n      </span><span class="s1">pathname = pathname.replaceAll(builtParam, paramValue)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return pathname</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function normalizeDynamicRouteParams(</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">defaultRouteRegex: ReturnType&lt;typeof getNamedRouteRegex&gt;,</span><span class="s3">\n  </span><span class="s1">defaultRouteMatches: ParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">ignoreMissingOptional: boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let hasValidParams = true</span><span class="s3">\n  </span><span class="s1">let params: ParsedUrlQuery = {}</span><span class="s3">\n\n  </span><span class="s1">for (const key of Object.keys(defaultRouteRegex.groups)) {</span><span class="s3">\n    </span><span class="s1">let value: string | string[] | undefined = query[key]</span><span class="s3">\n\n    </span><span class="s1">if (typeof value === 'string') {</span><span class="s3">\n      </span><span class="s1">value = normalizeRscURL(value)</span><span class="s3">\n    </span><span class="s1">} else if (Array.isArray(value)) {</span><span class="s3">\n      </span><span class="s1">value = value.map(normalizeRscURL)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// if the value matches the default value we can't rely</span><span class="s3">\n    </span><span class="s1">// on the parsed params, this is used to signal if we need</span><span class="s3">\n    </span><span class="s1">// to parse x-now-route-matches or not</span><span class="s3">\n    </span><span class="s1">const defaultValue = defaultRouteMatches![key]</span><span class="s3">\n    </span><span class="s1">const isOptional = defaultRouteRegex!.groups[key].optional</span><span class="s3">\n\n    </span><span class="s1">const isDefaultValue = Array.isArray(defaultValue)</span><span class="s3">\n      </span><span class="s1">? defaultValue.some((defaultVal) =&gt; {</span><span class="s3">\n          </span><span class="s1">return Array.isArray(value)</span><span class="s3">\n            </span><span class="s1">? value.some((val) =&gt; val.includes(defaultVal))</span><span class="s3">\n            </span><span class="s1">: value?.includes(defaultVal)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">: value?.includes(defaultValue as string)</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">isDefaultValue ||</span><span class="s3">\n      </span><span class="s1">(typeof value === 'undefined' &amp;&amp; !(isOptional &amp;&amp; ignoreMissingOptional))</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return { params: {}, hasValidParams: false }</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// non-provided optional values should be undefined so normalize</span><span class="s3">\n    </span><span class="s1">// them to undefined</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">isOptional &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(!value ||</span><span class="s3">\n        </span><span class="s1">(Array.isArray(value) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">value.length === 1 &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// fallback optional catch-all SSG pages have</span><span class="s3">\n          </span><span class="s1">// [[...paramName]] for the root path on Vercel</span><span class="s3">\n          </span><span class="s1">(value[0] === 'index' || value[0] === `[[...${key}]]`)))</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">value = undefined</span><span class="s3">\n      </span><span class="s1">delete query[key]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// query values from the proxy aren't already split into arrays</span><span class="s3">\n    </span><span class="s1">// so make sure to normalize catch-all values</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">value &amp;&amp;</span><span class="s3">\n      </span><span class="s1">typeof value === 'string' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">defaultRouteRegex!.groups[key].repeat</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">value = value.split('/')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (value) {</span><span class="s3">\n      </span><span class="s1">params[key] = value</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">params,</span><span class="s3">\n    </span><span class="s1">hasValidParams,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getServerUtils({</span><span class="s3">\n  </span><span class="s1">page,</span><span class="s3">\n  </span><span class="s1">i18n,</span><span class="s3">\n  </span><span class="s1">basePath,</span><span class="s3">\n  </span><span class="s1">rewrites,</span><span class="s3">\n  </span><span class="s1">pageIsDynamic,</span><span class="s3">\n  </span><span class="s1">trailingSlash,</span><span class="s3">\n  </span><span class="s1">caseSensitive,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">page: string</span><span class="s3">\n  </span><span class="s1">i18n?: NextConfig['i18n']</span><span class="s3">\n  </span><span class="s1">basePath: string</span><span class="s3">\n  </span><span class="s1">rewrites: DeepReadonly&lt;{</span><span class="s3">\n    </span><span class="s1">fallback?: ReadonlyArray&lt;Rewrite&gt;</span><span class="s3">\n    </span><span class="s1">afterFiles?: ReadonlyArray&lt;Rewrite&gt;</span><span class="s3">\n    </span><span class="s1">beforeFiles?: ReadonlyArray&lt;Rewrite&gt;</span><span class="s3">\n  </span><span class="s1">}&gt;</span><span class="s3">\n  </span><span class="s1">pageIsDynamic: boolean</span><span class="s3">\n  </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n  </span><span class="s1">caseSensitive: boolean</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">let defaultRouteRegex: ReturnType&lt;typeof getNamedRouteRegex&gt; | undefined</span><span class="s3">\n  </span><span class="s1">let dynamicRouteMatcher: RouteMatchFn | undefined</span><span class="s3">\n  </span><span class="s1">let defaultRouteMatches: ParsedUrlQuery | undefined</span><span class="s3">\n\n  </span><span class="s1">if (pageIsDynamic) {</span><span class="s3">\n    </span><span class="s1">defaultRouteRegex = getNamedRouteRegex(page, {</span><span class="s3">\n      </span><span class="s1">prefixRouteKeys: false,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">dynamicRouteMatcher = getRouteMatcher(defaultRouteRegex)</span><span class="s3">\n    </span><span class="s1">defaultRouteMatches = dynamicRouteMatcher(page) as ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function handleRewrites(</span><span class="s3">\n    </span><span class="s1">req: BaseNextRequest | IncomingMessage,</span><span class="s3">\n    </span><span class="s1">parsedUrl: UrlWithParsedQuery</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const rewriteParams: Record&lt;string, string&gt; = {}</span><span class="s3">\n    </span><span class="s1">let fsPathname = parsedUrl.pathname</span><span class="s3">\n\n    </span><span class="s1">const matchesPage = () =&gt; {</span><span class="s3">\n      </span><span class="s1">const fsPathnameNoSlash = removeTrailingSlash(fsPathname || '')</span><span class="s3">\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">fsPathnameNoSlash === removeTrailingSlash(page) ||</span><span class="s3">\n        </span><span class="s1">dynamicRouteMatcher?.(fsPathnameNoSlash)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const checkRewrite = (rewrite: DeepReadonly&lt;Rewrite&gt;): boolean =&gt; {</span><span class="s3">\n      </span><span class="s1">const matcher = getPathMatch(</span><span class="s3">\n        </span><span class="s1">rewrite.source + (trailingSlash ? '(/)?' : ''),</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">removeUnnamedParams: true,</span><span class="s3">\n          </span><span class="s1">strict: true,</span><span class="s3">\n          </span><span class="s1">sensitive: !!caseSensitive,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (!parsedUrl.pathname) return false</span><span class="s3">\n\n      </span><span class="s1">let params = matcher(parsedUrl.pathname)</span><span class="s3">\n\n      </span><span class="s1">if ((rewrite.has || rewrite.missing) &amp;&amp; params) {</span><span class="s3">\n        </span><span class="s1">const hasParams = matchHas(</span><span class="s3">\n          </span><span class="s1">req,</span><span class="s3">\n          </span><span class="s1">parsedUrl.query,</span><span class="s3">\n          </span><span class="s1">rewrite.has as Rewrite['has'],</span><span class="s3">\n          </span><span class="s1">rewrite.missing as Rewrite['missing']</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">if (hasParams) {</span><span class="s3">\n          </span><span class="s1">Object.assign(params, hasParams)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">params = false</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (params) {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">// An interception rewrite might reference a dynamic param for a route the user</span><span class="s3">\n          </span><span class="s1">// is currently on, which wouldn't be extractable from the matched route params.</span><span class="s3">\n          </span><span class="s1">// This attempts to extract the dynamic params from the provided router state.</span><span class="s3">\n          </span><span class="s1">if (isInterceptionRouteRewrite(rewrite as Rewrite)) {</span><span class="s3">\n            </span><span class="s1">const stateHeader = req.headers[NEXT_ROUTER_STATE_TREE_HEADER]</span><span class="s3">\n\n            </span><span class="s1">if (stateHeader) {</span><span class="s3">\n              </span><span class="s1">params = {</span><span class="s3">\n                </span><span class="s1">...getSelectedParams(</span><span class="s3">\n                  </span><span class="s1">parseAndValidateFlightRouterState(stateHeader)</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">...params,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} catch (err) {</span><span class="s3">\n          </span><span class="s1">// this is a no-op -- we couldn't extract dynamic params from the provided router state,</span><span class="s3">\n          </span><span class="s1">// so we'll just use the params from the route matcher</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const { parsedDestination, destQuery } = prepareDestination({</span><span class="s3">\n          </span><span class="s1">appendParamsToQuery: true,</span><span class="s3">\n          </span><span class="s1">destination: rewrite.destination,</span><span class="s3">\n          </span><span class="s1">params: params,</span><span class="s3">\n          </span><span class="s1">query: parsedUrl.query,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">// if the rewrite destination is external break rewrite chain</span><span class="s3">\n        </span><span class="s1">if (parsedDestination.protocol) {</span><span class="s3">\n          </span><span class="s1">return true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">Object.assign(rewriteParams, destQuery, params)</span><span class="s3">\n        </span><span class="s1">Object.assign(parsedUrl.query, parsedDestination.query)</span><span class="s3">\n        </span><span class="s1">delete (parsedDestination as any).query</span><span class="s3">\n\n        </span><span class="s1">// for each property in parsedUrl.query, if the value is parametrized (eg :foo), look up the value</span><span class="s3">\n        </span><span class="s1">// in rewriteParams and replace the parametrized value with the actual value</span><span class="s3">\n        </span><span class="s1">// this is used when the rewrite destination does not contain the original source param</span><span class="s3">\n        </span><span class="s1">// and so the value is still parametrized and needs to be replaced with the actual rewrite param</span><span class="s3">\n        </span><span class="s1">Object.entries(parsedUrl.query).forEach(([key, value]) =&gt; {</span><span class="s3">\n          </span><span class="s1">if (value &amp;&amp; typeof value === 'string' &amp;&amp; value.startsWith(':')) {</span><span class="s3">\n            </span><span class="s1">const paramName = value.slice(1)</span><span class="s3">\n            </span><span class="s1">const actualValue = rewriteParams[paramName]</span><span class="s3">\n            </span><span class="s1">if (actualValue) {</span><span class="s3">\n              </span><span class="s1">parsedUrl.query[key] = actualValue</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">Object.assign(parsedUrl, parsedDestination)</span><span class="s3">\n\n        </span><span class="s1">fsPathname = parsedUrl.pathname</span><span class="s3">\n        </span><span class="s1">if (!fsPathname) return false</span><span class="s3">\n\n        </span><span class="s1">if (basePath) {</span><span class="s3">\n          </span><span class="s1">fsPathname = fsPathname.replace(new RegExp(`^${basePath}`), '') || '/'</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (i18n) {</span><span class="s3">\n          </span><span class="s1">const result = normalizeLocalePath(fsPathname, i18n.locales)</span><span class="s3">\n          </span><span class="s1">fsPathname = result.pathname</span><span class="s3">\n          </span><span class="s1">parsedUrl.query.nextInternalLocale =</span><span class="s3">\n            </span><span class="s1">result.detectedLocale || params.nextInternalLocale</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (fsPathname === page) {</span><span class="s3">\n          </span><span class="s1">return true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (pageIsDynamic &amp;&amp; dynamicRouteMatcher) {</span><span class="s3">\n          </span><span class="s1">const dynamicParams = dynamicRouteMatcher(fsPathname)</span><span class="s3">\n          </span><span class="s1">if (dynamicParams) {</span><span class="s3">\n            </span><span class="s1">parsedUrl.query = {</span><span class="s3">\n              </span><span class="s1">...parsedUrl.query,</span><span class="s3">\n              </span><span class="s1">...dynamicParams,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">return true</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">for (const rewrite of rewrites.beforeFiles || []) {</span><span class="s3">\n      </span><span class="s1">checkRewrite(rewrite)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (fsPathname !== page) {</span><span class="s3">\n      </span><span class="s1">let finished = false</span><span class="s3">\n\n      </span><span class="s1">for (const rewrite of rewrites.afterFiles || []) {</span><span class="s3">\n        </span><span class="s1">finished = checkRewrite(rewrite)</span><span class="s3">\n        </span><span class="s1">if (finished) break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (!finished &amp;&amp; !matchesPage()) {</span><span class="s3">\n        </span><span class="s1">for (const rewrite of rewrites.fallback || []) {</span><span class="s3">\n          </span><span class="s1">finished = checkRewrite(rewrite)</span><span class="s3">\n          </span><span class="s1">if (finished) break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return rewriteParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function getParamsFromRouteMatches(routeMatchesHeader: string) {</span><span class="s3">\n    </span><span class="s1">// If we don't have a default route regex, we can't get params from route</span><span class="s3">\n    </span><span class="s1">// matches</span><span class="s3">\n    </span><span class="s1">if (!defaultRouteRegex) return null</span><span class="s3">\n\n    </span><span class="s1">const { groups, routeKeys } = defaultRouteRegex</span><span class="s3">\n\n    </span><span class="s1">const matcher = getRouteMatcher({</span><span class="s3">\n      </span><span class="s1">re: {</span><span class="s3">\n        </span><span class="s1">// Simulate a RegExp match from the </span><span class="s3">\\</span><span class="s1">`req.url</span><span class="s3">\\</span><span class="s1">` input</span><span class="s3">\n        </span><span class="s1">exec: (str: string) =&gt; {</span><span class="s3">\n          </span><span class="s1">// Normalize all the prefixed query params.</span><span class="s3">\n          </span><span class="s1">const obj: Record&lt;string, string&gt; = Object.fromEntries(</span><span class="s3">\n            </span><span class="s1">new URLSearchParams(str)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">for (const [key, value] of Object.entries(obj)) {</span><span class="s3">\n            </span><span class="s1">const normalizedKey = normalizeNextQueryParam(key)</span><span class="s3">\n            </span><span class="s1">if (!normalizedKey) continue</span><span class="s3">\n\n            </span><span class="s1">obj[normalizedKey] = value</span><span class="s3">\n            </span><span class="s1">delete obj[key]</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Use all the named route keys.</span><span class="s3">\n          </span><span class="s1">const result = {} as RegExpExecArray</span><span class="s3">\n          </span><span class="s1">for (const keyName of Object.keys(routeKeys)) {</span><span class="s3">\n            </span><span class="s1">const paramName = routeKeys[keyName]</span><span class="s3">\n\n            </span><span class="s1">// If this param name is not a valid parameter name, then skip it.</span><span class="s3">\n            </span><span class="s1">if (!paramName) continue</span><span class="s3">\n\n            </span><span class="s1">const group = groups[paramName]</span><span class="s3">\n            </span><span class="s1">const value = obj[keyName]</span><span class="s3">\n\n            </span><span class="s1">// When we're missing a required param, we can't match the route.</span><span class="s3">\n            </span><span class="s1">if (!group.optional &amp;&amp; !value) return null</span><span class="s3">\n\n            </span><span class="s1">result[group.pos] = value</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return result</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">groups,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const routeMatches = matcher(routeMatchesHeader)</span><span class="s3">\n    </span><span class="s1">if (!routeMatches) return null</span><span class="s3">\n\n    </span><span class="s1">return routeMatches</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function normalizeQueryParams(</span><span class="s3">\n    </span><span class="s1">query: Record&lt;string, string | string[] | undefined&gt;,</span><span class="s3">\n    </span><span class="s1">routeParamKeys: Set&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// this is used to pass query information in rewrites</span><span class="s3">\n    </span><span class="s1">// but should not be exposed in final query</span><span class="s3">\n    </span><span class="s1">delete query['nextInternalLocale']</span><span class="s3">\n\n    </span><span class="s1">for (const [key, value] of Object.entries(query)) {</span><span class="s3">\n      </span><span class="s1">const normalizedKey = normalizeNextQueryParam(key)</span><span class="s3">\n      </span><span class="s1">if (!normalizedKey) continue</span><span class="s3">\n\n      </span><span class="s1">// Remove the prefixed key from the query params because we want</span><span class="s3">\n      </span><span class="s1">// to consume it for the dynamic route matcher.</span><span class="s3">\n      </span><span class="s1">delete query[key]</span><span class="s3">\n      </span><span class="s1">routeParamKeys.add(normalizedKey)</span><span class="s3">\n\n      </span><span class="s1">if (typeof value === 'undefined') continue</span><span class="s3">\n\n      </span><span class="s1">query[normalizedKey] = Array.isArray(value)</span><span class="s3">\n        </span><span class="s1">? value.map((v) =&gt; decodeQueryPathParameter(v))</span><span class="s3">\n        </span><span class="s1">: decodeQueryPathParameter(value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">handleRewrites,</span><span class="s3">\n    </span><span class="s1">defaultRouteRegex,</span><span class="s3">\n    </span><span class="s1">dynamicRouteMatcher,</span><span class="s3">\n    </span><span class="s1">defaultRouteMatches,</span><span class="s3">\n    </span><span class="s1">normalizeQueryParams,</span><span class="s3">\n    </span><span class="s1">getParamsFromRouteMatches,</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Normalize dynamic route params.</span><span class="s3">\n     </span><span class="s1">*</span><span class="s3">\n     </span><span class="s1">* @param query - The query params to normalize.</span><span class="s3">\n     </span><span class="s1">* @param ignoreMissingOptional - Whether to ignore missing optional params.</span><span class="s3">\n     </span><span class="s1">* @returns The normalized params and whether they are valid.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">normalizeDynamicRouteParams: (</span><span class="s3">\n      </span><span class="s1">query: ParsedUrlQuery,</span><span class="s3">\n      </span><span class="s1">ignoreMissingOptional: boolean</span><span class="s3">\n    </span><span class="s1">) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (!defaultRouteRegex || !defaultRouteMatches) {</span><span class="s3">\n        </span><span class="s1">return { params: {}, hasValidParams: false }</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return normalizeDynamicRouteParams(</span><span class="s3">\n        </span><span class="s1">query,</span><span class="s3">\n        </span><span class="s1">defaultRouteRegex,</span><span class="s3">\n        </span><span class="s1">defaultRouteMatches,</span><span class="s3">\n        </span><span class="s1">ignoreMissingOptional</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n\n    </span><span class="s1">normalizeCdnUrl: (</span><span class="s3">\n      </span><span class="s1">req: BaseNextRequest | IncomingMessage,</span><span class="s3">\n      </span><span class="s1">paramKeys: string[]</span><span class="s3">\n    </span><span class="s1">) =&gt; normalizeCdnUrl(req, paramKeys),</span><span class="s3">\n\n    </span><span class="s1">interpolateDynamicPath: (</span><span class="s3">\n      </span><span class="s1">pathname: string,</span><span class="s3">\n      </span><span class="s1">params: Record&lt;string, undefined | string | string[]&gt;</span><span class="s3">\n    </span><span class="s1">) =&gt; interpolateDynamicPath(pathname, params, defaultRouteRegex),</span><span class="s3">\n\n    </span><span class="s1">filterInternalQuery: (query: ParsedUrlQuery, paramKeys: string[]) =&gt;</span><span class="s3">\n      </span><span class="s1">filterInternalQuery(query, paramKeys),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getPreviouslyRevalidatedTags(</span><span class="s3">\n  </span><span class="s1">headers: IncomingHttpHeaders,</span><span class="s3">\n  </span><span class="s1">previewModeId: string | undefined</span><span class="s3">\n</span><span class="s1">): string[] {</span><span class="s3">\n  </span><span class="s1">return typeof headers[NEXT_CACHE_REVALIDATED_TAGS_HEADER] === 'string' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">headers[NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER] === previewModeId</span><span class="s3">\n    </span><span class="s1">? headers[NEXT_CACHE_REVALIDATED_TAGS_HEADER].split(',')</span><span class="s3">\n    </span><span class="s1">: []</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getPreviouslyRevalidatedTags&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerUtils&quot;</span><span class="s0">,</span><span class="s1">&quot;interpolateDynamicPath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeCdnUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeDynamicRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;filterInternalQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;paramKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextQueryPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextInterceptionMarkerPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;_parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parseReqUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;formatUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;groups&quot;</span><span class="s0">,</span><span class="s1">&quot;optional&quot;</span><span class="s0">,</span><span class="s1">&quot;repeat&quot;</span><span class="s0">,</span><span class="s1">&quot;builtParam&quot;</span><span class="s0">,</span><span class="s1">&quot;paramValue&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;encodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;replaceAll&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultRouteMatches&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreMissingOptional&quot;</span><span class="s0">,</span><span class="s1">&quot;hasValidParams&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeRscURL&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultValue&quot;</span><span class="s0">,</span><span class="s1">&quot;isOptional&quot;</span><span class="s0">,</span><span class="s1">&quot;isDefaultValue&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultVal&quot;</span><span class="s0">,</span><span class="s1">&quot;val&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;pageIsDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;caseSensitive&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getNamedRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixRouteKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;handleRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;rewriteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fsPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;matchesPage&quot;</span><span class="s0">,</span><span class="s1">&quot;fsPathnameNoSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;checkRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getPathMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;removeUnnamedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;sensitive&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;missing&quot;</span><span class="s0">,</span><span class="s1">&quot;hasParams&quot;</span><span class="s0">,</span><span class="s1">&quot;matchHas&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;stateHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_STATE_TREE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;getSelectedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;parseAndValidateFlightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;destQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;prepareDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;appendParamsToQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;paramName&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;actualValue&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;nextInternalLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicParams&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;getParamsFromRouteMatches&quot;</span><span class="s0">,</span><span class="s1">&quot;routeMatchesHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;URLSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedKey&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeNextQueryParam&quot;</span><span class="s0">,</span><span class="s1">&quot;keyName&quot;</span><span class="s0">,</span><span class="s1">&quot;group&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;routeMatches&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeQueryParams&quot;</span><span class="s0">,</span><span class="s1">&quot;routeParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeQueryPathParameter&quot;</span><span class="s0">,</span><span class="s1">&quot;previewModeId&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATED_TAGS_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4868</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/shared/lib/hash.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// http://www.cse.yorku.ca/~oz/hash.html</span><span class="s3">\n</span><span class="s1">// More specifically, 32-bit hash via djbxor</span><span class="s3">\n</span><span class="s1">// (ref: https://gist.github.com/eplawless/52813b1d8ad9af510d85?permalink_comment_id=3367765#gistcomment-3367765)</span><span class="s3">\n</span><span class="s1">// This is due to number type differences between rust for turbopack to js number types,</span><span class="s3">\n</span><span class="s1">// where rust does not have easy way to repreesnt js's 53-bit float number type for the matching</span><span class="s3">\n</span><span class="s1">// overflow behavior. This is more `correct` in terms of having canonical hash across different runtime / implementation</span><span class="s3">\n</span><span class="s1">// as can gaurantee determinstic output from 32bit hash.</span><span class="s3">\n</span><span class="s1">export function djb2Hash(str: string) {</span><span class="s3">\n  </span><span class="s1">let hash = 5381</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt; str.length; i++) {</span><span class="s3">\n    </span><span class="s1">const char = str.charCodeAt(i)</span><span class="s3">\n    </span><span class="s1">hash = ((hash &lt;&lt; 5) + hash + char) &amp; 0xffffffff</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return hash &gt;&gt;&gt; 0</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function hexHash(str: string) {</span><span class="s3">\n  </span><span class="s1">return djb2Hash(str).toString(36).slice(0, 5)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;djb2Hash&quot;</span><span class="s0">,</span><span class="s1">&quot;hexHash&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;char&quot;</span><span class="s0">,</span><span class="s1">&quot;charCodeAt&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,wCAAwC;AACxC,4CAA4C;AAC5C,iHAAiH;AACjH,wFAAwF;AACxF,gGAAgG;AAChG,wHAAwH;AACxH,wDAAwD;;;;;;;;;;;;;;;IACxCA,QAAQ,EAAA;eAARA;;IASAC,OAAO,EAAA;eAAPA;;;AATT,SAASD,SAASE,GAAW;IAClC,IAAIC,OAAO;IACX,IAAK,IAAIC,IAAI,GAAGA,IAAIF,IAAIG,MAAM,EAAED,IAAK;QACnC,MAAME,OAAOJ,IAAIK,UAAU,CAACH;QAC5BD,OAASA,CAAAA,QAAQ,CAAA,IAAKA,OAAOG,OAAQ;IACvC;IACA,OAAOH,SAAS;AAClB;AAEO,SAASF,QAAQC,GAAW;IACjC,OAAOF,SAASE,KAAKM,QAAQ,CAAC,IAAIC,KAAK,CAAC,GAAG;AAC7C&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">4911</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/lib/metadata/get-metadata-route.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { isMetadataPage } from './is-metadata-route'</span><span class="s3">\n</span><span class="s1">import path from '../../shared/lib/isomorphic/path'</span><span class="s3">\n</span><span class="s1">import { interpolateDynamicPath } from '../../server/server-utils'</span><span class="s3">\n</span><span class="s1">import { getNamedRouteRegex } from '../../shared/lib/router/utils/route-regex'</span><span class="s3">\n</span><span class="s1">import { djb2Hash } from '../../shared/lib/hash'</span><span class="s3">\n</span><span class="s1">import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'</span><span class="s3">\n</span><span class="s1">import { normalizePathSep } from '../../shared/lib/page-path/normalize-path-sep'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">isGroupSegment,</span><span class="s3">\n  </span><span class="s1">isParallelRouteSegment,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/segment'</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n </span><span class="s1">* If there's special convention like (...) or @ in the page path,</span><span class="s3">\n </span><span class="s1">* Give it a unique hash suffix to avoid conflicts</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* e.g.</span><span class="s3">\n </span><span class="s1">* /opengraph-image -&gt; /opengraph-image</span><span class="s3">\n </span><span class="s1">* /(post)/opengraph-image.tsx -&gt; /opengraph-image-[0-9a-z]{6}</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Sitemap is an exception, it should not have a suffix.</span><span class="s3">\n </span><span class="s1">* Each sitemap contains all the urls of sub routes, we don't have the case of duplicates `/(group)/sitemap.[ext]` and `/sitemap.[ext]` since they should be the same.</span><span class="s3">\n </span><span class="s1">* Hence we always normalize the urls for sitemap and do not append hash suffix, and ensure user-land only contains one sitemap per pathname.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* /sitemap -&gt; /sitemap</span><span class="s3">\n </span><span class="s1">* /(post)/sitemap -&gt; /sitemap</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getMetadataRouteSuffix(page: string) {</span><span class="s3">\n  </span><span class="s1">// Remove the last segment and get the parent pathname</span><span class="s3">\n  </span><span class="s1">// e.g. /parent/a/b/c -&gt; /parent/a/b</span><span class="s3">\n  </span><span class="s1">// e.g. /parent/opengraph-image -&gt; /parent</span><span class="s3">\n  </span><span class="s1">const parentPathname = path.dirname(page)</span><span class="s3">\n  </span><span class="s1">// Only apply suffix to metadata routes except for sitemaps</span><span class="s3">\n  </span><span class="s1">if (page.endsWith('/sitemap')) {</span><span class="s3">\n    </span><span class="s1">return ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Calculate the hash suffix based on the parent path</span><span class="s3">\n  </span><span class="s1">let suffix = ''</span><span class="s3">\n  </span><span class="s1">// Check if there's any special characters in the parent pathname.</span><span class="s3">\n  </span><span class="s1">const segments = parentPathname.split('/')</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">segments.some((seg) =&gt; isGroupSegment(seg) || isParallelRouteSegment(seg))</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// Hash the parent path to get a unique suffix</span><span class="s3">\n    </span><span class="s1">suffix = djb2Hash(parentPathname).toString(36).slice(0, 6)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return suffix</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Fill the dynamic segment in the metadata route</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Example:</span><span class="s3">\n </span><span class="s1">* fillMetadataSegment('/a/[slug]', { params: { slug: 'b' } }, 'open-graph') -&gt; '/a/b/open-graph'</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function fillMetadataSegment(</span><span class="s3">\n  </span><span class="s1">segment: string,</span><span class="s3">\n  </span><span class="s1">params: any,</span><span class="s3">\n  </span><span class="s1">lastSegment: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const pathname = normalizeAppPath(segment)</span><span class="s3">\n  </span><span class="s1">const routeRegex = getNamedRouteRegex(pathname, {</span><span class="s3">\n    </span><span class="s1">prefixRouteKeys: false,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">const route = interpolateDynamicPath(pathname, params, routeRegex)</span><span class="s3">\n  </span><span class="s1">const { name, ext } = path.parse(lastSegment)</span><span class="s3">\n  </span><span class="s1">const pagePath = path.posix.join(segment, name)</span><span class="s3">\n  </span><span class="s1">const suffix = getMetadataRouteSuffix(pagePath)</span><span class="s3">\n  </span><span class="s1">const routeSuffix = suffix ? `-${suffix}` : ''</span><span class="s3">\n\n  </span><span class="s1">return normalizePathSep(path.join(route, `${name}${routeSuffix}${ext}`))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Map metadata page key to the corresponding route</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* static file page key:    /app/robots.txt -&gt; /robots.xml -&gt; /robots.txt/route</span><span class="s3">\n </span><span class="s1">* dynamic route page key:  /app/robots.tsx -&gt; /robots -&gt; /robots.txt/route</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param page</span><span class="s3">\n </span><span class="s1">* @returns</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeMetadataRoute(page: string) {</span><span class="s3">\n  </span><span class="s1">if (!isMetadataPage(page)) {</span><span class="s3">\n    </span><span class="s1">return page</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let route = page</span><span class="s3">\n  </span><span class="s1">let suffix = ''</span><span class="s3">\n  </span><span class="s1">if (page === '/robots') {</span><span class="s3">\n    </span><span class="s1">route += '.txt'</span><span class="s3">\n  </span><span class="s1">} else if (page === '/manifest') {</span><span class="s3">\n    </span><span class="s1">route += '.webmanifest'</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">suffix = getMetadataRouteSuffix(page)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// Support both /&lt;metadata-route.ext&gt; and custom routes /&lt;metadata-route&gt;/route.ts.</span><span class="s3">\n  </span><span class="s1">// If it's a metadata file route, we need to append /[id]/route to the page.</span><span class="s3">\n  </span><span class="s1">if (!route.endsWith('/route')) {</span><span class="s3">\n    </span><span class="s1">const { dir, name: baseName, ext } = path.parse(route)</span><span class="s3">\n    </span><span class="s1">route = path.posix.join(</span><span class="s3">\n      </span><span class="s1">dir,</span><span class="s3">\n      </span><span class="s1">`${baseName}${suffix ? `-${suffix}` : ''}${ext}`,</span><span class="s3">\n      </span><span class="s1">'route'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return route</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Normalize metadata route page to either a single route or a dynamic route.</span><span class="s3">\n</span><span class="s1">// e.g. Input: /sitemap/route</span><span class="s3">\n</span><span class="s1">// when isDynamic is false, single route -&gt; /sitemap.xml/route</span><span class="s3">\n</span><span class="s1">// when isDynamic is false, dynamic route -&gt; /sitemap/[__metadata_id__]/route</span><span class="s3">\n</span><span class="s1">// also works for pathname such as /sitemap -&gt; /sitemap.xml, but will not append /route suffix</span><span class="s3">\n</span><span class="s1">export function normalizeMetadataPageToRoute(page: string, isDynamic: boolean) {</span><span class="s3">\n  </span><span class="s1">const isRoute = page.endsWith('/route')</span><span class="s3">\n  </span><span class="s1">const routePagePath = isRoute ? page.slice(0, -'/route'.length) : page</span><span class="s3">\n  </span><span class="s1">const metadataRouteExtension = routePagePath.endsWith('/sitemap')</span><span class="s3">\n    </span><span class="s1">? '.xml'</span><span class="s3">\n    </span><span class="s1">: ''</span><span class="s3">\n  </span><span class="s1">const mapped = isDynamic</span><span class="s3">\n    </span><span class="s1">? `${routePagePath}/[__metadata_id__]`</span><span class="s3">\n    </span><span class="s1">: `${routePagePath}${metadataRouteExtension}`</span><span class="s3">\n\n  </span><span class="s1">return mapped + (isRoute ? '/route' : '')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;fillMetadataSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeMetadataPageToRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;getMetadataRouteSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;parentPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;suffix&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;seg&quot;</span><span class="s0">,</span><span class="s1">&quot;isGroupSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;isParallelRouteSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;djb2Hash&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;lastSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;routeRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;getNamedRouteRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixRouteKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;interpolateDynamicPath&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;ext&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;posix&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;routeSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePathSep&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataPage&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;baseName&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;isRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;routePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataRouteExtension&quot;</span><span class="s0">,</span><span class="s1">&quot;mapped&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5026</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/route-kind.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const enum RouteKind {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `PAGES` represents all the React pages that are under `pages/`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">PAGES = 'PAGES',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `PAGES_API` represents all the API routes under `pages/api/`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">PAGES_API = 'PAGES_API',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `APP_PAGE` represents all the React pages that are under `app/` with the</span><span class="s3">\n   </span><span class="s1">* filename of `page.{j,t}s{,x}`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">APP_PAGE = 'APP_PAGE',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `APP_ROUTE` represents all the API routes and metadata routes that are under `app/` with the</span><span class="s3">\n   </span><span class="s1">* filename of `route.{j,t}s{,x}`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">APP_ROUTE = 'APP_ROUTE',</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `IMAGE` represents all the images that are generated by `next/image`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">IMAGE = 'IMAGE',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,IAAWA,YAAAA,WAAAA,GAAAA,SAAAA,SAAAA;IAChB;;GAEC,GAAA,SAAA,CAAA,QAAA,GAAA;IAED;;GAEC,GAAA,SAAA,CAAA,YAAA,GAAA;IAED;;;GAGC,GAAA,SAAA,CAAA,WAAA,GAAA;IAED;;;GAGC,GAAA,SAAA,CAAA,YAAA,GAAA;IAGD;;GAEC,GAAA,SAAA,CAAA,QAAA,GAAA;WAtBeA;MAwBjB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5054</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/module.compiled.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n  </span><span class="s1">module.exports = require('next/dist/server/route-modules/app-page/module.js')</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">if (process.env.__NEXT_EXPERIMENTAL_REACT) {</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n      </span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n      </span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_EXPERIMENTAL_REACT&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5073</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;module.exports = (</span><span class="s3">\n  </span><span class="s1">require('../../module.compiled') as typeof import('../../module.compiled')</span><span class="s3">\n</span><span class="s1">).vendored['react-rsc']!.ReactServerDOMTurbopackServer</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;vendored&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactServerDOMTurbopackServer&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,6BAA6B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5078</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-static.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;module.exports = (</span><span class="s3">\n  </span><span class="s1">require('../../module.compiled') as typeof import('../../module.compiled')</span><span class="s3">\n</span><span class="s1">).vendored['react-rsc']!.ReactServerDOMTurbopackStatic</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;vendored&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactServerDOMTurbopackStatic&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,6BAA6B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5083</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/vendored/rsc/react.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;module.exports = (</span><span class="s3">\n  </span><span class="s1">require('../../module.compiled') as typeof import('../../module.compiled')</span><span class="s3">\n</span><span class="s1">).vendored['react-rsc']!.React</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;vendored&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5087</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/layout-router.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/layout-router.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5093</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/layout-router.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/layout-router.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5100</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/layout-router.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">CacheNode,</span><span class="s3">\n  </span><span class="s1">LazyCacheNode,</span><span class="s3">\n  </span><span class="s1">LoadingModuleData,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">FlightRouterState,</span><span class="s3">\n  </span><span class="s1">FlightSegmentPath,</span><span class="s3">\n</span><span class="s1">} from '../../server/app-render/types'</span><span class="s3">\n</span><span class="s1">import type { ErrorComponent } from './error-boundary'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ACTION_SERVER_PATCH,</span><span class="s3">\n  </span><span class="s1">type FocusAndScrollRef,</span><span class="s3">\n</span><span class="s1">} from './router-reducer/router-reducer-types'</span><span class="s3">\n\n</span><span class="s1">import React, {</span><span class="s3">\n  </span><span class="s1">useContext,</span><span class="s3">\n  </span><span class="s1">use,</span><span class="s3">\n  </span><span class="s1">startTransition,</span><span class="s3">\n  </span><span class="s1">Suspense,</span><span class="s3">\n  </span><span class="s1">useDeferredValue,</span><span class="s3">\n  </span><span class="s1">type JSX,</span><span class="s3">\n</span><span class="s1">} from 'react'</span><span class="s3">\n</span><span class="s1">import ReactDOM from 'react-dom'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">LayoutRouterContext,</span><span class="s3">\n  </span><span class="s1">GlobalLayoutRouterContext,</span><span class="s3">\n  </span><span class="s1">TemplateContext,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import { fetchServerResponse } from './router-reducer/fetch-server-response'</span><span class="s3">\n</span><span class="s1">import { unresolvedThenable } from './unresolved-thenable'</span><span class="s3">\n</span><span class="s1">import { ErrorBoundary } from './error-boundary'</span><span class="s3">\n</span><span class="s1">import { matchSegment } from './match-segments'</span><span class="s3">\n</span><span class="s1">import { disableSmoothScrollDuringRouteTransition } from '../../shared/lib/router/utils/disable-smooth-scroll'</span><span class="s3">\n</span><span class="s1">import { RedirectBoundary } from './redirect-boundary'</span><span class="s3">\n</span><span class="s1">import { HTTPAccessFallbackBoundary } from './http-access-fallback/error-boundary'</span><span class="s3">\n</span><span class="s1">import { createRouterCacheKey } from './router-reducer/create-router-cache-key'</span><span class="s3">\n</span><span class="s1">import { hasInterceptionRouteInCurrentTree } from './router-reducer/reducers/has-interception-route-in-current-tree'</span><span class="s3">\n</span><span class="s1">import { dispatchAppRouterAction } from './use-action-queue'</span><span class="s3">\n</span><span class="s1">import { useRouterBFCache, type RouterBFCacheEntry } from './bfcache'</span><span class="s3">\n</span><span class="s1">import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'</span><span class="s3">\n\n</span><span class="s1">const Activity = process.env.__NEXT_ROUTER_BF_CACHE</span><span class="s3">\n  </span><span class="s1">? (require('react') as typeof import('react')).unstable_Activity</span><span class="s3">\n  </span><span class="s1">: null!</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Add refetch marker to router state at the point of the current layout segment.</span><span class="s3">\n </span><span class="s1">* This ensures the response returned is not further down than the current layout segment.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function walkAddRefetch(</span><span class="s3">\n  </span><span class="s1">segmentPathToWalk: FlightSegmentPath | undefined,</span><span class="s3">\n  </span><span class="s1">treeToRecreate: FlightRouterState</span><span class="s3">\n</span><span class="s1">): FlightRouterState {</span><span class="s3">\n  </span><span class="s1">if (segmentPathToWalk) {</span><span class="s3">\n    </span><span class="s1">const [segment, parallelRouteKey] = segmentPathToWalk</span><span class="s3">\n    </span><span class="s1">const isLast = segmentPathToWalk.length === 2</span><span class="s3">\n\n    </span><span class="s1">if (matchSegment(treeToRecreate[0], segment)) {</span><span class="s3">\n      </span><span class="s1">if (treeToRecreate[1].hasOwnProperty(parallelRouteKey)) {</span><span class="s3">\n        </span><span class="s1">if (isLast) {</span><span class="s3">\n          </span><span class="s1">const subTree = walkAddRefetch(</span><span class="s3">\n            </span><span class="s1">undefined,</span><span class="s3">\n            </span><span class="s1">treeToRecreate[1][parallelRouteKey]</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return [</span><span class="s3">\n            </span><span class="s1">treeToRecreate[0],</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">...treeToRecreate[1],</span><span class="s3">\n              </span><span class="s1">[parallelRouteKey]: [</span><span class="s3">\n                </span><span class="s1">subTree[0],</span><span class="s3">\n                </span><span class="s1">subTree[1],</span><span class="s3">\n                </span><span class="s1">subTree[2],</span><span class="s3">\n                </span><span class="s1">'refetch',</span><span class="s3">\n              </span><span class="s1">],</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">return [</span><span class="s3">\n          </span><span class="s1">treeToRecreate[0],</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">...treeToRecreate[1],</span><span class="s3">\n            </span><span class="s1">[parallelRouteKey]: walkAddRefetch(</span><span class="s3">\n              </span><span class="s1">segmentPathToWalk.slice(2),</span><span class="s3">\n              </span><span class="s1">treeToRecreate[1][parallelRouteKey]</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return treeToRecreate</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const __DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = (</span><span class="s3">\n  </span><span class="s1">ReactDOM as any</span><span class="s3">\n</span><span class="s1">).__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE</span><span class="s3">\n\n</span><span class="s1">// TODO-APP: Replace with new React API for finding dom nodes without a `ref` when available</span><span class="s3">\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Wraps ReactDOM.findDOMNode with additional logic to hide React Strict Mode warning</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function findDOMNode(</span><span class="s3">\n  </span><span class="s1">instance: React.ReactInstance | null | undefined</span><span class="s3">\n</span><span class="s1">): Element | Text | null {</span><span class="s3">\n  </span><span class="s1">// Tree-shake for server bundle</span><span class="s3">\n  </span><span class="s1">if (typeof window === 'undefined') return null</span><span class="s3">\n\n  </span><span class="s1">// __DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE.findDOMNode is null during module init.</span><span class="s3">\n  </span><span class="s1">// We need to lazily reference it.</span><span class="s3">\n  </span><span class="s1">const internal_reactDOMfindDOMNode =</span><span class="s3">\n    </span><span class="s1">__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE.findDOMNode</span><span class="s3">\n  </span><span class="s1">return internal_reactDOMfindDOMNode(instance)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const rectProperties = [</span><span class="s3">\n  </span><span class="s1">'bottom',</span><span class="s3">\n  </span><span class="s1">'height',</span><span class="s3">\n  </span><span class="s1">'left',</span><span class="s3">\n  </span><span class="s1">'right',</span><span class="s3">\n  </span><span class="s1">'top',</span><span class="s3">\n  </span><span class="s1">'width',</span><span class="s3">\n  </span><span class="s1">'x',</span><span class="s3">\n  </span><span class="s1">'y',</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Check if a HTMLElement is hidden or fixed/sticky position</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function shouldSkipElement(element: HTMLElement) {</span><span class="s3">\n  </span><span class="s1">// we ignore fixed or sticky positioned elements since they'll likely pass the </span><span class="s3">\&quot;</span><span class="s1">in-viewport</span><span class="s3">\&quot; </span><span class="s1">check</span><span class="s3">\n  </span><span class="s1">// and will result in a situation we bail on scroll because of something like a fixed nav,</span><span class="s3">\n  </span><span class="s1">// even though the actual page content is offscreen</span><span class="s3">\n  </span><span class="s1">if (['sticky', 'fixed'].includes(getComputedStyle(element).position)) {</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">'Skipping auto-scroll behavior due to `position: sticky` or `position: fixed` on element:',</span><span class="s3">\n        </span><span class="s1">element</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Uses `getBoundingClientRect` to check if the element is hidden instead of `offsetParent`</span><span class="s3">\n  </span><span class="s1">// because `offsetParent` doesn't consider document/body</span><span class="s3">\n  </span><span class="s1">const rect = element.getBoundingClientRect()</span><span class="s3">\n  </span><span class="s1">return rectProperties.every((item) =&gt; rect[item] === 0)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Check if the top corner of the HTMLElement is in the viewport.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function topOfElementInViewport(element: HTMLElement, viewportHeight: number) {</span><span class="s3">\n  </span><span class="s1">const rect = element.getBoundingClientRect()</span><span class="s3">\n  </span><span class="s1">return rect.top &gt;= 0 &amp;&amp; rect.top &lt;= viewportHeight</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Find the DOM node for a hash fragment.</span><span class="s3">\n </span><span class="s1">* If `top` the page has to scroll to the top of the page. This mirrors the browser's behavior.</span><span class="s3">\n </span><span class="s1">* If the hash fragment is an id, the page has to scroll to the element with that id.</span><span class="s3">\n </span><span class="s1">* If the hash fragment is a name, the page has to scroll to the first element with that name.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getHashFragmentDomNode(hashFragment: string) {</span><span class="s3">\n  </span><span class="s1">// If the hash fragment is `top` the page has to scroll to the top of the page.</span><span class="s3">\n  </span><span class="s1">if (hashFragment === 'top') {</span><span class="s3">\n    </span><span class="s1">return document.body</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If the hash fragment is an id, the page has to scroll to the element with that id.</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">document.getElementById(hashFragment) ??</span><span class="s3">\n    </span><span class="s1">// If the hash fragment is a name, the page has to scroll to the first element with that name.</span><span class="s3">\n    </span><span class="s1">document.getElementsByName(hashFragment)[0]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">interface ScrollAndFocusHandlerProps {</span><span class="s3">\n  </span><span class="s1">focusAndScrollRef: FocusAndScrollRef</span><span class="s3">\n  </span><span class="s1">children: React.ReactNode</span><span class="s3">\n  </span><span class="s1">segmentPath: FlightSegmentPath</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">class InnerScrollAndFocusHandler extends React.Component&lt;ScrollAndFocusHandlerProps&gt; {</span><span class="s3">\n  </span><span class="s1">handlePotentialScroll = () =&gt; {</span><span class="s3">\n    </span><span class="s1">// Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.</span><span class="s3">\n    </span><span class="s1">const { focusAndScrollRef, segmentPath } = this.props</span><span class="s3">\n\n    </span><span class="s1">if (focusAndScrollRef.apply) {</span><span class="s3">\n      </span><span class="s1">// segmentPaths is an array of segment paths that should be scrolled to</span><span class="s3">\n      </span><span class="s1">// if the current segment path is not in the array, the scroll is not applied</span><span class="s3">\n      </span><span class="s1">// unless the array is empty, in which case the scroll is always applied</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">focusAndScrollRef.segmentPaths.length !== 0 &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!focusAndScrollRef.segmentPaths.some((scrollRefSegmentPath) =&gt;</span><span class="s3">\n          </span><span class="s1">segmentPath.every((segment, index) =&gt;</span><span class="s3">\n            </span><span class="s1">matchSegment(segment, scrollRefSegmentPath[index])</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">let domNode:</span><span class="s3">\n        </span><span class="s1">| ReturnType&lt;typeof getHashFragmentDomNode&gt;</span><span class="s3">\n        </span><span class="s1">| ReturnType&lt;typeof findDOMNode&gt; = null</span><span class="s3">\n      </span><span class="s1">const hashFragment = focusAndScrollRef.hashFragment</span><span class="s3">\n\n      </span><span class="s1">if (hashFragment) {</span><span class="s3">\n        </span><span class="s1">domNode = getHashFragmentDomNode(hashFragment)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// `findDOMNode` is tricky because it returns just the first child if the component is a fragment.</span><span class="s3">\n      </span><span class="s1">// This already caused a bug where the first child was a &lt;link/&gt; in head.</span><span class="s3">\n      </span><span class="s1">if (!domNode) {</span><span class="s3">\n        </span><span class="s1">domNode = findDOMNode(this)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// If there is no DOM node this layout-router level is skipped. It'll be handled higher-up in the tree.</span><span class="s3">\n      </span><span class="s1">if (!(domNode instanceof Element)) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Verify if the element is a HTMLElement and if we want to consider it for scroll behavior.</span><span class="s3">\n      </span><span class="s1">// If the element is skipped, try to select the next sibling and try again.</span><span class="s3">\n      </span><span class="s1">while (!(domNode instanceof HTMLElement) || shouldSkipElement(domNode)) {</span><span class="s3">\n        </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n          </span><span class="s1">if (domNode.parentElement?.localName === 'head') {</span><span class="s3">\n            </span><span class="s1">// TODO: We enter this state when metadata was rendered as part of the page or via Next.js.</span><span class="s3">\n            </span><span class="s1">// This is always a bug in Next.js and caused by React hoisting metadata.</span><span class="s3">\n            </span><span class="s1">// We need to replace `findDOMNode` in favor of Fragment Refs (when available) so that we can skip over metadata.</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// No siblings found that match the criteria are found, so handle scroll higher up in the tree instead.</span><span class="s3">\n        </span><span class="s1">if (domNode.nextElementSibling === null) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">domNode = domNode.nextElementSibling</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// State is mutated to ensure that the focus and scroll is applied only once.</span><span class="s3">\n      </span><span class="s1">focusAndScrollRef.apply = false</span><span class="s3">\n      </span><span class="s1">focusAndScrollRef.hashFragment = null</span><span class="s3">\n      </span><span class="s1">focusAndScrollRef.segmentPaths = []</span><span class="s3">\n\n      </span><span class="s1">disableSmoothScrollDuringRouteTransition(</span><span class="s3">\n        </span><span class="s1">() =&gt; {</span><span class="s3">\n          </span><span class="s1">// In case of hash scroll, we only need to scroll the element into view</span><span class="s3">\n          </span><span class="s1">if (hashFragment) {</span><span class="s3">\n            </span><span class="s1">;(domNode as HTMLElement).scrollIntoView()</span><span class="s3">\n\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">// Store the current viewport height because reading `clientHeight` causes a reflow,</span><span class="s3">\n          </span><span class="s1">// and it won't change during this function.</span><span class="s3">\n          </span><span class="s1">const htmlElement = document.documentElement</span><span class="s3">\n          </span><span class="s1">const viewportHeight = htmlElement.clientHeight</span><span class="s3">\n\n          </span><span class="s1">// If the element's top edge is already in the viewport, exit early.</span><span class="s3">\n          </span><span class="s1">if (topOfElementInViewport(domNode as HTMLElement, viewportHeight)) {</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Otherwise, try scrolling go the top of the document to be backward compatible with pages</span><span class="s3">\n          </span><span class="s1">// scrollIntoView() called on `&lt;html/&gt;` element scrolls horizontally on chrome and firefox (that shouldn't happen)</span><span class="s3">\n          </span><span class="s1">// We could use it to scroll horizontally following RTL but that also seems to be broken - it will always scroll left</span><span class="s3">\n          </span><span class="s1">// scrollLeft = 0 also seems to ignore RTL and manually checking for RTL is too much hassle so we will scroll just vertically</span><span class="s3">\n          </span><span class="s1">htmlElement.scrollTop = 0</span><span class="s3">\n\n          </span><span class="s1">// Scroll to domNode if domNode is not in viewport when scrolled to top of document</span><span class="s3">\n          </span><span class="s1">if (!topOfElementInViewport(domNode as HTMLElement, viewportHeight)) {</span><span class="s3">\n            </span><span class="s1">// Scroll into view doesn't scroll horizontally by default when not needed</span><span class="s3">\n            </span><span class="s1">;(domNode as HTMLElement).scrollIntoView()</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">// We will force layout by querying domNode position</span><span class="s3">\n          </span><span class="s1">dontForceLayout: true,</span><span class="s3">\n          </span><span class="s1">onlyHashChange: focusAndScrollRef.onlyHashChange,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">// Mutate after scrolling so that it can be read by `disableSmoothScrollDuringRouteTransition`</span><span class="s3">\n      </span><span class="s1">focusAndScrollRef.onlyHashChange = false</span><span class="s3">\n\n      </span><span class="s1">// Set focus on the element</span><span class="s3">\n      </span><span class="s1">domNode.focus()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">componentDidMount() {</span><span class="s3">\n    </span><span class="s1">this.handlePotentialScroll()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">componentDidUpdate() {</span><span class="s3">\n    </span><span class="s1">// Because this property is overwritten in handlePotentialScroll it's fine to always run it when true as it'll be set to false for subsequent renders.</span><span class="s3">\n    </span><span class="s1">if (this.props.focusAndScrollRef.apply) {</span><span class="s3">\n      </span><span class="s1">this.handlePotentialScroll()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">render() {</span><span class="s3">\n    </span><span class="s1">return this.props.children</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function ScrollAndFocusHandler({</span><span class="s3">\n  </span><span class="s1">segmentPath,</span><span class="s3">\n  </span><span class="s1">children,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">segmentPath: FlightSegmentPath</span><span class="s3">\n  </span><span class="s1">children: React.ReactNode</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const context = useContext(GlobalLayoutRouterContext)</span><span class="s3">\n  </span><span class="s1">if (!context) {</span><span class="s3">\n    </span><span class="s1">throw new Error('invariant global layout router not mounted')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;InnerScrollAndFocusHandler</span><span class="s3">\n      </span><span class="s1">segmentPath={segmentPath}</span><span class="s3">\n      </span><span class="s1">focusAndScrollRef={context.focusAndScrollRef}</span><span class="s3">\n    </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">{children}</span><span class="s3">\n    </span><span class="s1">&lt;/InnerScrollAndFocusHandler&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* InnerLayoutRouter handles rendering the provided segment based on the cache.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function InnerLayoutRouter({</span><span class="s3">\n  </span><span class="s1">tree,</span><span class="s3">\n  </span><span class="s1">segmentPath,</span><span class="s3">\n  </span><span class="s1">cacheNode,</span><span class="s3">\n  </span><span class="s1">url,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">tree: FlightRouterState</span><span class="s3">\n  </span><span class="s1">segmentPath: FlightSegmentPath</span><span class="s3">\n  </span><span class="s1">cacheNode: CacheNode</span><span class="s3">\n  </span><span class="s1">url: string</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const context = useContext(GlobalLayoutRouterContext)</span><span class="s3">\n  </span><span class="s1">if (!context) {</span><span class="s3">\n    </span><span class="s1">throw new Error('invariant global layout router not mounted')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { tree: fullTree } = context</span><span class="s3">\n\n  </span><span class="s1">// `rsc` represents the renderable node for this segment.</span><span class="s3">\n\n  </span><span class="s1">// If this segment has a `prefetchRsc`, it's the statically prefetched data.</span><span class="s3">\n  </span><span class="s1">// We should use that on initial render instead of `rsc`. Then we'll switch</span><span class="s3">\n  </span><span class="s1">// to `rsc` when the dynamic response streams in.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// If no prefetch data is available, then we go straight to rendering `rsc`.</span><span class="s3">\n  </span><span class="s1">const resolvedPrefetchRsc =</span><span class="s3">\n    </span><span class="s1">cacheNode.prefetchRsc !== null ? cacheNode.prefetchRsc : cacheNode.rsc</span><span class="s3">\n\n  </span><span class="s1">// We use `useDeferredValue` to handle switching between the prefetched and</span><span class="s3">\n  </span><span class="s1">// final values. The second argument is returned on initial render, then it</span><span class="s3">\n  </span><span class="s1">// re-renders with the first argument.</span><span class="s3">\n  </span><span class="s1">const rsc: any = useDeferredValue(cacheNode.rsc, resolvedPrefetchRsc)</span><span class="s3">\n\n  </span><span class="s1">// `rsc` is either a React node or a promise for a React node, except we</span><span class="s3">\n  </span><span class="s1">// special case `null` to represent that this segment's data is missing. If</span><span class="s3">\n  </span><span class="s1">// it's a promise, we need to unwrap it so we can determine whether or not the</span><span class="s3">\n  </span><span class="s1">// data is missing.</span><span class="s3">\n  </span><span class="s1">const resolvedRsc: React.ReactNode =</span><span class="s3">\n    </span><span class="s1">typeof rsc === 'object' &amp;&amp; rsc !== null &amp;&amp; typeof rsc.then === 'function'</span><span class="s3">\n      </span><span class="s1">? use(rsc)</span><span class="s3">\n      </span><span class="s1">: rsc</span><span class="s3">\n\n  </span><span class="s1">if (!resolvedRsc) {</span><span class="s3">\n    </span><span class="s1">// The data for this segment is not available, and there's no pending</span><span class="s3">\n    </span><span class="s1">// navigation that will be able to fulfill it. We need to fetch more from</span><span class="s3">\n    </span><span class="s1">// the server and patch the cache.</span><span class="s3">\n\n    </span><span class="s1">// Check if there's already a pending request.</span><span class="s3">\n    </span><span class="s1">let lazyData = cacheNode.lazyData</span><span class="s3">\n    </span><span class="s1">if (lazyData === null) {</span><span class="s3">\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* Router state with refetch marker added</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">// TODO-APP: remove ''</span><span class="s3">\n      </span><span class="s1">const refetchTree = walkAddRefetch(['', ...segmentPath], fullTree)</span><span class="s3">\n      </span><span class="s1">const includeNextUrl = hasInterceptionRouteInCurrentTree(fullTree)</span><span class="s3">\n      </span><span class="s1">const navigatedAt = Date.now()</span><span class="s3">\n      </span><span class="s1">cacheNode.lazyData = lazyData = fetchServerResponse(</span><span class="s3">\n        </span><span class="s1">new URL(url, location.origin),</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">flightRouterState: refetchTree,</span><span class="s3">\n          </span><span class="s1">nextUrl: includeNextUrl ? context.nextUrl : null,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">).then((serverResponse) =&gt; {</span><span class="s3">\n        </span><span class="s1">startTransition(() =&gt; {</span><span class="s3">\n          </span><span class="s1">dispatchAppRouterAction({</span><span class="s3">\n            </span><span class="s1">type: ACTION_SERVER_PATCH,</span><span class="s3">\n            </span><span class="s1">previousTree: fullTree,</span><span class="s3">\n            </span><span class="s1">serverResponse,</span><span class="s3">\n            </span><span class="s1">navigatedAt,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">return serverResponse</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">// Suspend while waiting for lazyData to resolve</span><span class="s3">\n      </span><span class="s1">use(lazyData)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Suspend infinitely as `changeByServerResponse` will cause a different part of the tree to be rendered.</span><span class="s3">\n    </span><span class="s1">// A falsey `resolvedRsc` indicates missing data -- we should not commit that branch, and we need to wait for the data to arrive.</span><span class="s3">\n    </span><span class="s1">use(unresolvedThenable) as never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If we get to this point, then we know we have something we can render.</span><span class="s3">\n  </span><span class="s1">const subtree = (</span><span class="s3">\n    </span><span class="s1">// The layout router context narrows down tree and childNodes at each level.</span><span class="s3">\n    </span><span class="s1">&lt;LayoutRouterContext.Provider</span><span class="s3">\n      </span><span class="s1">value={{</span><span class="s3">\n        </span><span class="s1">parentTree: tree,</span><span class="s3">\n        </span><span class="s1">parentCacheNode: cacheNode,</span><span class="s3">\n        </span><span class="s1">parentSegmentPath: segmentPath,</span><span class="s3">\n\n        </span><span class="s1">// TODO-APP: overriding of url for parallel routes</span><span class="s3">\n        </span><span class="s1">url: url,</span><span class="s3">\n      </span><span class="s1">}}</span><span class="s3">\n    </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">{resolvedRsc}</span><span class="s3">\n    </span><span class="s1">&lt;/LayoutRouterContext.Provider&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">// Ensure root layout is not wrapped in a div as the root layout renders `&lt;html&gt;`</span><span class="s3">\n  </span><span class="s1">return subtree</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Renders suspense boundary with the provided </span><span class="s3">\&quot;</span><span class="s1">loading</span><span class="s3">\&quot; </span><span class="s1">property as the fallback.</span><span class="s3">\n </span><span class="s1">* If no loading property is provided it renders the children without a suspense boundary.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function LoadingBoundary({</span><span class="s3">\n  </span><span class="s1">loading,</span><span class="s3">\n  </span><span class="s1">children,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">loading: LoadingModuleData | Promise&lt;LoadingModuleData&gt;</span><span class="s3">\n  </span><span class="s1">children: React.ReactNode</span><span class="s3">\n</span><span class="s1">}): JSX.Element {</span><span class="s3">\n  </span><span class="s1">// If loading is a promise, unwrap it. This happens in cases where we haven't</span><span class="s3">\n  </span><span class="s1">// yet received the loading data from the server  which includes whether or</span><span class="s3">\n  </span><span class="s1">// not this layout has a loading component at all.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// It's OK to suspend here instead of inside the fallback because this</span><span class="s3">\n  </span><span class="s1">// promise will resolve simultaneously with the data for the segment itself.</span><span class="s3">\n  </span><span class="s1">// So it will never suspend for longer than it would have if we didn't use</span><span class="s3">\n  </span><span class="s1">// a Suspense fallback at all.</span><span class="s3">\n  </span><span class="s1">let loadingModuleData</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof loading === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">loading !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof (loading as any).then === 'function'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const promiseForLoading = loading as Promise&lt;LoadingModuleData&gt;</span><span class="s3">\n    </span><span class="s1">loadingModuleData = use(promiseForLoading)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">loadingModuleData = loading as LoadingModuleData</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (loadingModuleData) {</span><span class="s3">\n    </span><span class="s1">const loadingRsc = loadingModuleData[0]</span><span class="s3">\n    </span><span class="s1">const loadingStyles = loadingModuleData[1]</span><span class="s3">\n    </span><span class="s1">const loadingScripts = loadingModuleData[2]</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;Suspense</span><span class="s3">\n        </span><span class="s1">fallback={</span><span class="s3">\n          </span><span class="s1">&lt;&gt;</span><span class="s3">\n            </span><span class="s1">{loadingStyles}</span><span class="s3">\n            </span><span class="s1">{loadingScripts}</span><span class="s3">\n            </span><span class="s1">{loadingRsc}</span><span class="s3">\n          </span><span class="s1">&lt;/&gt;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n        </span><span class="s1">{children}</span><span class="s3">\n      </span><span class="s1">&lt;/Suspense&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return &lt;&gt;{children}&lt;/&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* OuterLayoutRouter handles the current segment as well as &lt;Offscreen&gt; rendering of other segments.</span><span class="s3">\n </span><span class="s1">* It can be rendered next to each other with a different `parallelRouterKey`, allowing for Parallel routes.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export default function OuterLayoutRouter({</span><span class="s3">\n  </span><span class="s1">parallelRouterKey,</span><span class="s3">\n  </span><span class="s1">error,</span><span class="s3">\n  </span><span class="s1">errorStyles,</span><span class="s3">\n  </span><span class="s1">errorScripts,</span><span class="s3">\n  </span><span class="s1">templateStyles,</span><span class="s3">\n  </span><span class="s1">templateScripts,</span><span class="s3">\n  </span><span class="s1">template,</span><span class="s3">\n  </span><span class="s1">notFound,</span><span class="s3">\n  </span><span class="s1">forbidden,</span><span class="s3">\n  </span><span class="s1">unauthorized,</span><span class="s3">\n  </span><span class="s1">segmentViewBoundaries,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">parallelRouterKey: string</span><span class="s3">\n  </span><span class="s1">error: ErrorComponent | undefined</span><span class="s3">\n  </span><span class="s1">errorStyles: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">errorScripts: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">templateStyles: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">templateScripts: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">template: React.ReactNode</span><span class="s3">\n  </span><span class="s1">notFound: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">forbidden: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">unauthorized: React.ReactNode | undefined</span><span class="s3">\n  </span><span class="s1">segmentViewBoundaries?: React.ReactNode</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const context = useContext(LayoutRouterContext)</span><span class="s3">\n  </span><span class="s1">if (!context) {</span><span class="s3">\n    </span><span class="s1">throw new Error('invariant expected layout router to be mounted')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { parentTree, parentCacheNode, parentSegmentPath, url } = context</span><span class="s3">\n\n  </span><span class="s1">// Get the CacheNode for this segment by reading it from the parent segment's</span><span class="s3">\n  </span><span class="s1">// child map.</span><span class="s3">\n  </span><span class="s1">const parentParallelRoutes = parentCacheNode.parallelRoutes</span><span class="s3">\n  </span><span class="s1">let segmentMap = parentParallelRoutes.get(parallelRouterKey)</span><span class="s3">\n  </span><span class="s1">// If the parallel router cache node does not exist yet, create it.</span><span class="s3">\n  </span><span class="s1">// This writes to the cache when there is no item in the cache yet. It never *overwrites* existing cache items which is why it's safe in concurrent mode.</span><span class="s3">\n  </span><span class="s1">if (!segmentMap) {</span><span class="s3">\n    </span><span class="s1">segmentMap = new Map()</span><span class="s3">\n    </span><span class="s1">parentParallelRoutes.set(parallelRouterKey, segmentMap)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const parentTreeSegment = parentTree[0]</span><span class="s3">\n  </span><span class="s1">const segmentPath =</span><span class="s3">\n    </span><span class="s1">parentSegmentPath === null</span><span class="s3">\n      </span><span class="s1">? // TODO: The root segment value is currently omitted from the segment</span><span class="s3">\n        </span><span class="s1">// path. This has led to a bunch of special cases scattered throughout</span><span class="s3">\n        </span><span class="s1">// the code. We should clean this up.</span><span class="s3">\n        </span><span class="s1">[parallelRouterKey]</span><span class="s3">\n      </span><span class="s1">: parentSegmentPath.concat([parentTreeSegment, parallelRouterKey])</span><span class="s3">\n\n  </span><span class="s1">// The </span><span class="s3">\&quot;</span><span class="s1">state</span><span class="s3">\&quot; </span><span class="s1">key of a segment is the one passed to React  it represents the</span><span class="s3">\n  </span><span class="s1">// identity of the UI tree. Whenever the state key changes, the tree is</span><span class="s3">\n  </span><span class="s1">// recreated and the state is reset. In the App Router model, search params do</span><span class="s3">\n  </span><span class="s1">// not cause state to be lost, so two segments with the same segment path but</span><span class="s3">\n  </span><span class="s1">// different search params should have the same state key.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// The </span><span class="s3">\&quot;</span><span class="s1">cache</span><span class="s3">\&quot; </span><span class="s1">key of a segment, however, *does* include the search params, if</span><span class="s3">\n  </span><span class="s1">// it's possible that the segment accessed the search params on the server.</span><span class="s3">\n  </span><span class="s1">// (This only applies to page segments; layout segments cannot access search</span><span class="s3">\n  </span><span class="s1">// params on the server.)</span><span class="s3">\n  </span><span class="s1">const activeTree = parentTree[1][parallelRouterKey]</span><span class="s3">\n  </span><span class="s1">const activeSegment = activeTree[0]</span><span class="s3">\n  </span><span class="s1">const activeStateKey = createRouterCacheKey(activeSegment, true) // no search params</span><span class="s3">\n\n  </span><span class="s1">// At each level of the route tree, not only do we render the currently</span><span class="s3">\n  </span><span class="s1">// active segment  we also render the last N segments that were active at</span><span class="s3">\n  </span><span class="s1">// this level inside a hidden &lt;Activity&gt; boundary, to preserve their state</span><span class="s3">\n  </span><span class="s1">// if or when the user navigates to them again.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// bfcacheEntry is a linked list of FlightRouterStates.</span><span class="s3">\n  </span><span class="s1">let bfcacheEntry: RouterBFCacheEntry | null = useRouterBFCache(</span><span class="s3">\n    </span><span class="s1">activeTree,</span><span class="s3">\n    </span><span class="s1">activeStateKey</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">let children: Array&lt;React.ReactNode&gt; = []</span><span class="s3">\n  </span><span class="s1">do {</span><span class="s3">\n    </span><span class="s1">const tree = bfcacheEntry.tree</span><span class="s3">\n    </span><span class="s1">const stateKey = bfcacheEntry.stateKey</span><span class="s3">\n    </span><span class="s1">const segment = tree[0]</span><span class="s3">\n    </span><span class="s1">const cacheKey = createRouterCacheKey(segment)</span><span class="s3">\n\n    </span><span class="s1">// Read segment path from the parallel router cache node.</span><span class="s3">\n    </span><span class="s1">let cacheNode = segmentMap.get(cacheKey)</span><span class="s3">\n    </span><span class="s1">if (cacheNode === undefined) {</span><span class="s3">\n      </span><span class="s1">// When data is not available during rendering client-side we need to fetch</span><span class="s3">\n      </span><span class="s1">// it from the server.</span><span class="s3">\n      </span><span class="s1">const newLazyCacheNode: LazyCacheNode = {</span><span class="s3">\n        </span><span class="s1">lazyData: null,</span><span class="s3">\n        </span><span class="s1">rsc: null,</span><span class="s3">\n        </span><span class="s1">prefetchRsc: null,</span><span class="s3">\n        </span><span class="s1">head: null,</span><span class="s3">\n        </span><span class="s1">prefetchHead: null,</span><span class="s3">\n        </span><span class="s1">parallelRoutes: new Map(),</span><span class="s3">\n        </span><span class="s1">loading: null,</span><span class="s3">\n        </span><span class="s1">navigatedAt: -1,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Flight data fetch kicked off during render and put into the cache.</span><span class="s3">\n      </span><span class="s1">cacheNode = newLazyCacheNode</span><span class="s3">\n      </span><span class="s1">segmentMap.set(cacheKey, newLazyCacheNode)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">/*</span><span class="s3">\n    </span><span class="s1">- Error boundary</span><span class="s3">\n      </span><span class="s1">- Only renders error boundary if error component is provided.</span><span class="s3">\n      </span><span class="s1">- Rendered for each segment to ensure they have their own error state.</span><span class="s3">\n      </span><span class="s1">- When gracefully degrade for bots, skip rendering error boundary.</span><span class="s3">\n    </span><span class="s1">- Loading boundary</span><span class="s3">\n      </span><span class="s1">- Only renders suspense boundary if loading components is provided.</span><span class="s3">\n      </span><span class="s1">- Rendered for each segment to ensure they have their own loading state.</span><span class="s3">\n      </span><span class="s1">- Passed to the router during rendering to ensure it can be immediately rendered when suspending on a Flight fetch.</span><span class="s3">\n  </span><span class="s1">*/</span><span class="s3">\n\n    </span><span class="s1">let segmentBoundaryTriggerNode: React.ReactNode = null</span><span class="s3">\n    </span><span class="s1">let segmentViewStateNode: React.ReactNode = null</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">process.env.NODE_ENV !== 'production' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">const { SegmentBoundaryTriggerNode, SegmentViewStateNode } =</span><span class="s3">\n        </span><span class="s1">require('../../next-devtools/userspace/app/segment-explorer-node') as typeof import('../../next-devtools/userspace/app/segment-explorer-node')</span><span class="s3">\n\n      </span><span class="s1">const pagePrefix = normalizeAppPath(url)</span><span class="s3">\n      </span><span class="s1">segmentViewStateNode = (</span><span class="s3">\n        </span><span class="s1">&lt;SegmentViewStateNode key={pagePrefix} page={pagePrefix} /&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">segmentBoundaryTriggerNode = (</span><span class="s3">\n        </span><span class="s1">&lt;&gt;</span><span class="s3">\n          </span><span class="s1">&lt;SegmentBoundaryTriggerNode /&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// TODO: The loading module data for a segment is stored on the parent, then</span><span class="s3">\n    </span><span class="s1">// applied to each of that parent segment's parallel route slots. In the</span><span class="s3">\n    </span><span class="s1">// simple case where there's only one parallel route (the `children` slot),</span><span class="s3">\n    </span><span class="s1">// this is no different from if the loading module data where stored on the</span><span class="s3">\n    </span><span class="s1">// child directly. But I'm not sure this actually makes sense when there are</span><span class="s3">\n    </span><span class="s1">// multiple parallel routes. It's not a huge issue because you always have</span><span class="s3">\n    </span><span class="s1">// the option to define a narrower loading boundary for a particular slot. But</span><span class="s3">\n    </span><span class="s1">// this sort of smells like an implementation accident to me.</span><span class="s3">\n    </span><span class="s1">const loadingModuleData = parentCacheNode.loading</span><span class="s3">\n    </span><span class="s1">let child = (</span><span class="s3">\n      </span><span class="s1">&lt;TemplateContext.Provider</span><span class="s3">\n        </span><span class="s1">key={stateKey}</span><span class="s3">\n        </span><span class="s1">value={</span><span class="s3">\n          </span><span class="s1">&lt;ScrollAndFocusHandler segmentPath={segmentPath}&gt;</span><span class="s3">\n            </span><span class="s1">&lt;ErrorBoundary</span><span class="s3">\n              </span><span class="s1">errorComponent={error}</span><span class="s3">\n              </span><span class="s1">errorStyles={errorStyles}</span><span class="s3">\n              </span><span class="s1">errorScripts={errorScripts}</span><span class="s3">\n            </span><span class="s1">&gt;</span><span class="s3">\n              </span><span class="s1">&lt;LoadingBoundary loading={loadingModuleData}&gt;</span><span class="s3">\n                </span><span class="s1">&lt;HTTPAccessFallbackBoundary</span><span class="s3">\n                  </span><span class="s1">notFound={notFound}</span><span class="s3">\n                  </span><span class="s1">forbidden={forbidden}</span><span class="s3">\n                  </span><span class="s1">unauthorized={unauthorized}</span><span class="s3">\n                </span><span class="s1">&gt;</span><span class="s3">\n                  </span><span class="s1">&lt;RedirectBoundary&gt;</span><span class="s3">\n                    </span><span class="s1">&lt;InnerLayoutRouter</span><span class="s3">\n                      </span><span class="s1">url={url}</span><span class="s3">\n                      </span><span class="s1">tree={tree}</span><span class="s3">\n                      </span><span class="s1">cacheNode={cacheNode}</span><span class="s3">\n                      </span><span class="s1">segmentPath={segmentPath}</span><span class="s3">\n                    </span><span class="s1">/&gt;</span><span class="s3">\n                    </span><span class="s1">{segmentBoundaryTriggerNode}</span><span class="s3">\n                  </span><span class="s1">&lt;/RedirectBoundary&gt;</span><span class="s3">\n                </span><span class="s1">&lt;/HTTPAccessFallbackBoundary&gt;</span><span class="s3">\n              </span><span class="s1">&lt;/LoadingBoundary&gt;</span><span class="s3">\n            </span><span class="s1">&lt;/ErrorBoundary&gt;</span><span class="s3">\n            </span><span class="s1">{segmentViewStateNode}</span><span class="s3">\n          </span><span class="s1">&lt;/ScrollAndFocusHandler&gt;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n        </span><span class="s1">{templateStyles}</span><span class="s3">\n        </span><span class="s1">{templateScripts}</span><span class="s3">\n        </span><span class="s1">{template}</span><span class="s3">\n      </span><span class="s1">&lt;/TemplateContext.Provider&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">const { SegmentStateProvider } =</span><span class="s3">\n        </span><span class="s1">require('../../next-devtools/userspace/app/segment-explorer-node') as typeof import('../../next-devtools/userspace/app/segment-explorer-node')</span><span class="s3">\n\n      </span><span class="s1">child = (</span><span class="s3">\n        </span><span class="s1">&lt;SegmentStateProvider key={stateKey}&gt;</span><span class="s3">\n          </span><span class="s1">{child}</span><span class="s3">\n          </span><span class="s1">{segmentViewBoundaries}</span><span class="s3">\n        </span><span class="s1">&lt;/SegmentStateProvider&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (process.env.__NEXT_ROUTER_BF_CACHE) {</span><span class="s3">\n      </span><span class="s1">child = (</span><span class="s3">\n        </span><span class="s1">&lt;Activity</span><span class="s3">\n          </span><span class="s1">key={stateKey}</span><span class="s3">\n          </span><span class="s1">mode={stateKey === activeStateKey ? 'visible' : 'hidden'}</span><span class="s3">\n        </span><span class="s1">&gt;</span><span class="s3">\n          </span><span class="s1">{child}</span><span class="s3">\n        </span><span class="s1">&lt;/Activity&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">children.push(child)</span><span class="s3">\n\n    </span><span class="s1">bfcacheEntry = bfcacheEntry.next</span><span class="s3">\n  </span><span class="s1">} while (bfcacheEntry !== null)</span><span class="s3">\n\n  </span><span class="s1">return children</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ACTION_SERVER_PATCH&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;useContext&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;startTransition&quot;</span><span class="s0">,</span><span class="s1">&quot;Suspense&quot;</span><span class="s0">,</span><span class="s1">&quot;useDeferredValue&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDOM&quot;</span><span class="s0">,</span><span class="s1">&quot;LayoutRouterContext&quot;</span><span class="s0">,</span><span class="s1">&quot;GlobalLayoutRouterContext&quot;</span><span class="s0">,</span><span class="s1">&quot;TemplateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchServerResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;unresolvedThenable&quot;</span><span class="s0">,</span><span class="s1">&quot;ErrorBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;matchSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;disableSmoothScrollDuringRouteTransition&quot;</span><span class="s0">,</span><span class="s1">&quot;RedirectBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTPAccessFallbackBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;createRouterCacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;hasInterceptionRouteInCurrentTree&quot;</span><span class="s0">,</span><span class="s1">&quot;dispatchAppRouterAction&quot;</span><span class="s0">,</span><span class="s1">&quot;useRouterBFCache&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;Activity&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_ROUTER_BF_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_Activity&quot;</span><span class="s0">,</span><span class="s1">&quot;walkAddRefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPathToWalk&quot;</span><span class="s0">,</span><span class="s1">&quot;treeToRecreate&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRouteKey&quot;</span><span class="s0">,</span><span class="s1">&quot;isLast&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwnProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;subTree&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE&quot;</span><span class="s0">,</span><span class="s1">&quot;findDOMNode&quot;</span><span class="s0">,</span><span class="s1">&quot;instance&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;internal_reactDOMfindDOMNode&quot;</span><span class="s0">,</span><span class="s1">&quot;rectProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldSkipElement&quot;</span><span class="s0">,</span><span class="s1">&quot;element&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;getComputedStyle&quot;</span><span class="s0">,</span><span class="s1">&quot;position&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;rect&quot;</span><span class="s0">,</span><span class="s1">&quot;getBoundingClientRect&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;topOfElementInViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportHeight&quot;</span><span class="s0">,</span><span class="s1">&quot;top&quot;</span><span class="s0">,</span><span class="s1">&quot;getHashFragmentDomNode&quot;</span><span class="s0">,</span><span class="s1">&quot;hashFragment&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;getElementById&quot;</span><span class="s0">,</span><span class="s1">&quot;getElementsByName&quot;</span><span class="s0">,</span><span class="s1">&quot;InnerScrollAndFocusHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;componentDidMount&quot;</span><span class="s0">,</span><span class="s1">&quot;handlePotentialScroll&quot;</span><span class="s0">,</span><span class="s1">&quot;componentDidUpdate&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;focusAndScrollRef&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;render&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPath&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;scrollRefSegmentPath&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;domNode&quot;</span><span class="s0">,</span><span class="s1">&quot;Element&quot;</span><span class="s0">,</span><span class="s1">&quot;HTMLElement&quot;</span><span class="s0">,</span><span class="s1">&quot;parentElement&quot;</span><span class="s0">,</span><span class="s1">&quot;localName&quot;</span><span class="s0">,</span><span class="s1">&quot;nextElementSibling&quot;</span><span class="s0">,</span><span class="s1">&quot;scrollIntoView&quot;</span><span class="s0">,</span><span class="s1">&quot;htmlElement&quot;</span><span class="s0">,</span><span class="s1">&quot;documentElement&quot;</span><span class="s0">,</span><span class="s1">&quot;clientHeight&quot;</span><span class="s0">,</span><span class="s1">&quot;scrollTop&quot;</span><span class="s0">,</span><span class="s1">&quot;dontForceLayout&quot;</span><span class="s0">,</span><span class="s1">&quot;onlyHashChange&quot;</span><span class="s0">,</span><span class="s1">&quot;focus&quot;</span><span class="s0">,</span><span class="s1">&quot;ScrollAndFocusHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;InnerLayoutRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheNode&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;fullTree&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedPrefetchRsc&quot;</span><span class="s0">,</span><span class="s1">&quot;prefetchRsc&quot;</span><span class="s0">,</span><span class="s1">&quot;rsc&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedRsc&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;lazyData&quot;</span><span class="s0">,</span><span class="s1">&quot;refetchTree&quot;</span><span class="s0">,</span><span class="s1">&quot;includeNextUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;navigatedAt&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;location&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;flightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;nextUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;serverResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;previousTree&quot;</span><span class="s0">,</span><span class="s1">&quot;subtree&quot;</span><span class="s0">,</span><span class="s1">&quot;Provider&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;parentTree&quot;</span><span class="s0">,</span><span class="s1">&quot;parentCacheNode&quot;</span><span class="s0">,</span><span class="s1">&quot;parentSegmentPath&quot;</span><span class="s0">,</span><span class="s1">&quot;LoadingBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;loading&quot;</span><span class="s0">,</span><span class="s1">&quot;loadingModuleData&quot;</span><span class="s0">,</span><span class="s1">&quot;promiseForLoading&quot;</span><span class="s0">,</span><span class="s1">&quot;loadingRsc&quot;</span><span class="s0">,</span><span class="s1">&quot;loadingStyles&quot;</span><span class="s0">,</span><span class="s1">&quot;loadingScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;OuterLayoutRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRouterKey&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;errorStyles&quot;</span><span class="s0">,</span><span class="s1">&quot;errorScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;templateStyles&quot;</span><span class="s0">,</span><span class="s1">&quot;templateScripts&quot;</span><span class="s0">,</span><span class="s1">&quot;template&quot;</span><span class="s0">,</span><span class="s1">&quot;notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;forbidden&quot;</span><span class="s0">,</span><span class="s1">&quot;unauthorized&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentViewBoundaries&quot;</span><span class="s0">,</span><span class="s1">&quot;parentParallelRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentMap&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;parentTreeSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;activeTree&quot;</span><span class="s0">,</span><span class="s1">&quot;activeSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;activeStateKey&quot;</span><span class="s0">,</span><span class="s1">&quot;bfcacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;stateKey&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;newLazyCacheNode&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;prefetchHead&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentBoundaryTriggerNode&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentViewStateNode&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_DEVTOOL_SEGMENT_EXPLORER&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentBoundaryTriggerNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewStateNode&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;child&quot;</span><span class="s0">,</span><span class="s1">&quot;errorComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentStateProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5107</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/render-from-template-context.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5113</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/render-from-template-context.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5120</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/render-from-template-context.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import React, { useContext, type JSX } from 'react'</span><span class="s3">\n</span><span class="s1">import { TemplateContext } from '../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n\n</span><span class="s1">export default function RenderFromTemplateContext(): JSX.Element {</span><span class="s3">\n  </span><span class="s1">const children = useContext(TemplateContext)</span><span class="s3">\n  </span><span class="s1">return &lt;&gt;{children}&lt;/&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;useContext&quot;</span><span class="s0">,</span><span class="s1">&quot;TemplateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderFromTemplateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5127</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/client-page.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/client-page.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5133</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/client-page.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/client-page.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5140</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/client-page.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n\n</span><span class="s1">import type { Params } from '../../server/request/params'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* When the Page is a client component we send the params and searchParams to this client wrapper</span><span class="s3">\n </span><span class="s1">* where they are turned into dynamically tracked values before being passed to the actual Page component.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* additionally we may send promises representing the params and searchParams. We don't ever use these passed</span><span class="s3">\n </span><span class="s1">* values but it can be necessary for the sender to send a Promise that doesn't resolve in certain situations.</span><span class="s3">\n </span><span class="s1">* It is up to the caller to decide if the promises are needed.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function ClientPageRoot({</span><span class="s3">\n  </span><span class="s1">Component,</span><span class="s3">\n  </span><span class="s1">searchParams,</span><span class="s3">\n  </span><span class="s1">params,</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars</span><span class="s3">\n  </span><span class="s1">promises,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">Component: React.ComponentType&lt;any&gt;</span><span class="s3">\n  </span><span class="s1">searchParams: ParsedUrlQuery</span><span class="s3">\n  </span><span class="s1">params: Params</span><span class="s3">\n  </span><span class="s1">promises?: Array&lt;Promise&lt;any&gt;&gt;</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (typeof window === 'undefined') {</span><span class="s3">\n    </span><span class="s1">const { workAsyncStorage } =</span><span class="s3">\n      </span><span class="s1">require('../../server/app-render/work-async-storage.external') as typeof import('../../server/app-render/work-async-storage.external')</span><span class="s3">\n\n    </span><span class="s1">let clientSearchParams: Promise&lt;ParsedUrlQuery&gt;</span><span class="s3">\n    </span><span class="s1">let clientParams: Promise&lt;Params&gt;</span><span class="s3">\n    </span><span class="s1">// We are going to instrument the searchParams prop with tracking for the</span><span class="s3">\n    </span><span class="s1">// appropriate context. We wrap differently in prerendering vs rendering</span><span class="s3">\n    </span><span class="s1">const store = workAsyncStorage.getStore()</span><span class="s3">\n    </span><span class="s1">if (!store) {</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">'Expected workStore to exist when handling searchParams in a client Page.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { createSearchParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../../server/request/search-params') as typeof import('../../server/request/search-params')</span><span class="s3">\n    </span><span class="s1">clientSearchParams = createSearchParamsFromClient(searchParams, store)</span><span class="s3">\n\n    </span><span class="s1">const { createParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../../server/request/params') as typeof import('../../server/request/params')</span><span class="s3">\n    </span><span class="s1">clientParams = createParamsFromClient(params, store)</span><span class="s3">\n\n    </span><span class="s1">return &lt;Component params={clientParams} searchParams={clientSearchParams} /&gt;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const { createRenderSearchParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../request/search-params.browser') as typeof import('../request/search-params.browser')</span><span class="s3">\n    </span><span class="s1">const clientSearchParams = createRenderSearchParamsFromClient(searchParams)</span><span class="s3">\n    </span><span class="s1">const { createRenderParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../request/params.browser') as typeof import('../request/params.browser')</span><span class="s3">\n    </span><span class="s1">const clientParams = createRenderParamsFromClient(params)</span><span class="s3">\n\n    </span><span class="s1">return &lt;Component params={clientParams} searchParams={clientSearchParams} /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;ClientPageRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;promises&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;clientSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;clientParams&quot;</span><span class="s0">,</span><span class="s1">&quot;store&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;createSearchParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;createParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderSearchParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderParamsFromClient&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5147</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/client-segment.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/client-segment.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5153</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/client-segment.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/client-segment.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5160</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/client-segment.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n\n</span><span class="s1">import type { Params } from '../../server/request/params'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* When the Page is a client component we send the params to this client wrapper</span><span class="s3">\n </span><span class="s1">* where they are turned into dynamically tracked values before being passed to the actual Segment component.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* additionally we may send a promise representing params. We don't ever use this passed</span><span class="s3">\n </span><span class="s1">* value but it can be necessary for the sender to send a Promise that doesn't resolve in certain situations</span><span class="s3">\n </span><span class="s1">* such as when cacheComponents is enabled. It is up to the caller to decide if the promises are needed.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function ClientSegmentRoot({</span><span class="s3">\n  </span><span class="s1">Component,</span><span class="s3">\n  </span><span class="s1">slots,</span><span class="s3">\n  </span><span class="s1">params,</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars</span><span class="s3">\n  </span><span class="s1">promise,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">Component: React.ComponentType&lt;any&gt;</span><span class="s3">\n  </span><span class="s1">slots: { [key: string]: React.ReactNode }</span><span class="s3">\n  </span><span class="s1">params: Params</span><span class="s3">\n  </span><span class="s1">promise?: Promise&lt;any&gt;</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (typeof window === 'undefined') {</span><span class="s3">\n    </span><span class="s1">const { workAsyncStorage } =</span><span class="s3">\n      </span><span class="s1">require('../../server/app-render/work-async-storage.external') as typeof import('../../server/app-render/work-async-storage.external')</span><span class="s3">\n\n    </span><span class="s1">let clientParams: Promise&lt;Params&gt;</span><span class="s3">\n    </span><span class="s1">// We are going to instrument the searchParams prop with tracking for the</span><span class="s3">\n    </span><span class="s1">// appropriate context. We wrap differently in prerendering vs rendering</span><span class="s3">\n    </span><span class="s1">const store = workAsyncStorage.getStore()</span><span class="s3">\n    </span><span class="s1">if (!store) {</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">'Expected workStore to exist when handling params in a client segment such as a Layout or Template.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { createParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../../server/request/params') as typeof import('../../server/request/params')</span><span class="s3">\n    </span><span class="s1">clientParams = createParamsFromClient(params, store)</span><span class="s3">\n\n    </span><span class="s1">return &lt;Component {...slots} params={clientParams} /&gt;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const { createRenderParamsFromClient } =</span><span class="s3">\n      </span><span class="s1">require('../request/params.browser') as typeof import('../request/params.browser')</span><span class="s3">\n    </span><span class="s1">const clientParams = createRenderParamsFromClient(params)</span><span class="s3">\n    </span><span class="s1">return &lt;Component {...slots} params={clientParams} /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;ClientSegmentRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;slots&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;clientParams&quot;</span><span class="s0">,</span><span class="s1">&quot;store&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;createParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderParamsFromClient&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5168</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/spec-extension/adapters/reflect.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export class ReflectAdapter {</span><span class="s3">\n  </span><span class="s1">static get&lt;T extends object&gt;(</span><span class="s3">\n    </span><span class="s1">target: T,</span><span class="s3">\n    </span><span class="s1">prop: string | symbol,</span><span class="s3">\n    </span><span class="s1">receiver: unknown</span><span class="s3">\n  </span><span class="s1">): any {</span><span class="s3">\n    </span><span class="s1">const value = Reflect.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">if (typeof value === 'function') {</span><span class="s3">\n      </span><span class="s1">return value.bind(target)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static set&lt;T extends object&gt;(</span><span class="s3">\n    </span><span class="s1">target: T,</span><span class="s3">\n    </span><span class="s1">prop: string | symbol,</span><span class="s3">\n    </span><span class="s1">value: any,</span><span class="s3">\n    </span><span class="s1">receiver: any</span><span class="s3">\n  </span><span class="s1">): boolean {</span><span class="s3">\n    </span><span class="s1">return Reflect.set(target, prop, value, receiver)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static has&lt;T extends object&gt;(target: T, prop: string | symbol): boolean {</span><span class="s3">\n    </span><span class="s1">return Reflect.has(target, prop)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static deleteProperty&lt;T extends object&gt;(</span><span class="s3">\n    </span><span class="s1">target: T,</span><span class="s3">\n    </span><span class="s1">prop: string | symbol</span><span class="s3">\n  </span><span class="s1">): boolean {</span><span class="s3">\n    </span><span class="s1">return Reflect.deleteProperty(target, prop)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ReflectAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;receiver&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Reflect&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;deleteProperty&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,MAAMA;IACX,OAAOC,IACLC,MAAS,EACTC,IAAqB,EACrBC,QAAiB,EACZ;QACL,MAAMC,QAAQC,QAAQL,GAAG,CAACC,QAAQC,MAAMC;QACxC,IAAI,OAAOC,UAAU,YAAY;YAC/B,OAAOA,MAAME,IAAI,CAACL;QACpB;QAEA,OAAOG;IACT;IAEA,OAAOG,IACLN,MAAS,EACTC,IAAqB,EACrBE,KAAU,EACVD,QAAa,EACJ;QACT,OAAOE,QAAQE,GAAG,CAACN,QAAQC,MAAME,OAAOD;IAC1C;IAEA,OAAOK,IAAsBP,MAAS,EAAEC,IAAqB,EAAW;QACtE,OAAOG,QAAQG,GAAG,CAACP,QAAQC;IAC7B;IAEA,OAAOO,eACLR,MAAS,EACTC,IAAqB,EACZ;QACT,OAAOG,QAAQI,cAAc,CAACR,QAAQC;IACxC;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5194</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/hooks-server-context.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const DYNAMIC_ERROR_CODE = 'DYNAMIC_SERVER_USAGE'</span><span class="s3">\n\n</span><span class="s1">export class DynamicServerError extends Error {</span><span class="s3">\n  </span><span class="s1">digest: typeof DYNAMIC_ERROR_CODE = DYNAMIC_ERROR_CODE</span><span class="s3">\n\n  </span><span class="s1">constructor(public readonly description: string) {</span><span class="s3">\n    </span><span class="s1">super(`Dynamic server usage: ${description}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isDynamicServerError(err: unknown): err is DynamicServerError {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof err !== 'object' ||</span><span class="s3">\n    </span><span class="s1">err === null ||</span><span class="s3">\n    </span><span class="s1">!('digest' in err) ||</span><span class="s3">\n    </span><span class="s1">typeof err.digest !== 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return err.digest === DYNAMIC_ERROR_CODE</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DYNAMIC_ERROR_CODE&quot;</span><span class="s0">,</span><span class="s1">&quot;DynamicServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,MAAMA,qBAAqB;AAEpB,MAAMC,2BAA2BC;IAGtCC,YAA4BC,WAAmB,CAAE;QAC/C,KAAK,CAAE,2BAAwBA,cAAAA,IAAAA,CADLA,WAAAA,GAAAA,aAAAA,IAAAA,CAF5BC,MAAAA,GAAoCL;IAIpC;AACF;AAEO,SAASM,qBAAqBC,GAAY;IAC/C,IACE,OAAOA,QAAQ,YACfA,QAAQ,QACR,CAAE,CAAA,YAAYA,GAAE,KAChB,OAAOA,IAAIF,MAAM,KAAK,UACtB;QACA,OAAO;IACT;IAEA,OAAOE,IAAIF,MAAM,KAAKL;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5216</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/static-generation-bailout.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const NEXT_STATIC_GEN_BAILOUT = 'NEXT_STATIC_GEN_BAILOUT'</span><span class="s3">\n\n</span><span class="s1">export class StaticGenBailoutError extends Error {</span><span class="s3">\n  </span><span class="s1">public readonly code = NEXT_STATIC_GEN_BAILOUT</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isStaticGenBailoutError(</span><span class="s3">\n  </span><span class="s1">error: unknown</span><span class="s3">\n</span><span class="s1">): error is StaticGenBailoutError {</span><span class="s3">\n  </span><span class="s1">if (typeof error !== 'object' || error === null || !('code' in error)) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return error.code === NEXT_STATIC_GEN_BAILOUT</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NEXT_STATIC_GEN_BAILOUT&quot;</span><span class="s0">,</span><span class="s1">&quot;StaticGenBailoutError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticGenBailoutError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,MAAMA,0BAA0B;AAEzB,MAAMC,8BAA8BC;;QAApC,KAAA,IAAA,OAAA,IAAA,CACWC,IAAAA,GAAOH;;AACzB;AAEO,SAASI,wBACdC,KAAc;IAEd,IAAI,OAAOA,UAAU,YAAYA,UAAU,QAAQ,CAAE,CAAA,UAAUA,KAAI,GAAI;QACrE,OAAO;IACT;IAEA,OAAOA,MAAMF,IAAI,KAAKH;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5238</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/dynamic-rendering-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export function isHangingPromiseRejectionError(</span><span class="s3">\n  </span><span class="s1">err: unknown</span><span class="s3">\n</span><span class="s1">): err is HangingPromiseRejectionError {</span><span class="s3">\n  </span><span class="s1">if (typeof err !== 'object' || err === null || !('digest' in err)) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return err.digest === HANGING_PROMISE_REJECTION</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const HANGING_PROMISE_REJECTION = 'HANGING_PROMISE_REJECTION'</span><span class="s3">\n\n</span><span class="s1">class HangingPromiseRejectionError extends Error {</span><span class="s3">\n  </span><span class="s1">public readonly digest = HANGING_PROMISE_REJECTION</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">public readonly route: string,</span><span class="s3">\n    </span><span class="s1">public readonly expression: string</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">super(</span><span class="s3">\n      </span><span class="s1">`During prerendering, ${expression} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${expression} to a different context by using </span><span class="s3">\\</span><span class="s1">`setTimeout</span><span class="s3">\\</span><span class="s1">`, </span><span class="s3">\\</span><span class="s1">`after</span><span class="s3">\\</span><span class="s1">`, or similar functions you may observe this error and you should handle it in that context. This occurred at route </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot;</span><span class="s1">.`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type AbortListeners = Array&lt;(err: unknown) =&gt; void&gt;</span><span class="s3">\n</span><span class="s1">const abortListenersBySignal = new WeakMap&lt;AbortSignal, AbortListeners&gt;()</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function constructs a promise that will never resolve. This is primarily</span><span class="s3">\n </span><span class="s1">* useful for cacheComponents where we use promise resolution timing to determine which</span><span class="s3">\n </span><span class="s1">* parts of a render can be included in a prerender.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function makeHangingPromise&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">signal: AbortSignal,</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">): Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">if (signal.aborted) {</span><span class="s3">\n    </span><span class="s1">return Promise.reject(new HangingPromiseRejectionError(route, expression))</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const hangingPromise = new Promise&lt;T&gt;((_, reject) =&gt; {</span><span class="s3">\n      </span><span class="s1">const boundRejection = reject.bind(</span><span class="s3">\n        </span><span class="s1">null,</span><span class="s3">\n        </span><span class="s1">new HangingPromiseRejectionError(route, expression)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">let currentListeners = abortListenersBySignal.get(signal)</span><span class="s3">\n      </span><span class="s1">if (currentListeners) {</span><span class="s3">\n        </span><span class="s1">currentListeners.push(boundRejection)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">const listeners = [boundRejection]</span><span class="s3">\n        </span><span class="s1">abortListenersBySignal.set(signal, listeners)</span><span class="s3">\n        </span><span class="s1">signal.addEventListener(</span><span class="s3">\n          </span><span class="s1">'abort',</span><span class="s3">\n          </span><span class="s1">() =&gt; {</span><span class="s3">\n            </span><span class="s1">for (let i = 0; i &lt; listeners.length; i++) {</span><span class="s3">\n              </span><span class="s1">listeners[i]()</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">{ once: true }</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">// We are fine if no one actually awaits this promise. We shouldn't consider this an unhandled rejection so</span><span class="s3">\n    </span><span class="s1">// we attach a noop catch handler here to suppress this warning. If you actually await somewhere or construct</span><span class="s3">\n    </span><span class="s1">// your own promise out of it you'll need to ensure you handle the error when it rejects.</span><span class="s3">\n    </span><span class="s1">hangingPromise.catch(ignoreReject)</span><span class="s3">\n    </span><span class="s1">return hangingPromise</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function ignoreReject() {}</span><span class="s3">\n\n</span><span class="s1">export function makeDevtoolsIOAwarePromise&lt;T&gt;(underlying: T): Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">// in React DevTools if we resolve in a setTimeout we will observe</span><span class="s3">\n  </span><span class="s1">// the promise resolution as something that can suspend a boundary or root.</span><span class="s3">\n  </span><span class="s1">return new Promise&lt;T&gt;((resolve) =&gt; {</span><span class="s3">\n    </span><span class="s1">// Must use setTimeout to be considered IO React DevTools. setImmediate will not work.</span><span class="s3">\n    </span><span class="s1">setTimeout(() =&gt; {</span><span class="s3">\n      </span><span class="s1">resolve(underlying)</span><span class="s3">\n    </span><span class="s1">}, 0)</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isHangingPromiseRejectionError&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;HANGING_PROMISE_REJECTION&quot;</span><span class="s0">,</span><span class="s1">&quot;HangingPromiseRejectionError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;abortListenersBySignal&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;aborted&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;hangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;boundRejection&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;currentListeners&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;listeners&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;addEventListener&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;once&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreReject&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDevtoolsIOAwarePromise&quot;</span><span class="s0">,</span><span class="s1">&quot;underlying&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;setTimeout&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;AAAO,SAASA,+BACdC,GAAY;IAEZ,IAAI,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,CAAE,CAAA,YAAYA,GAAE,GAAI;QACjE,OAAO;IACT;IAEA,OAAOA,IAAIC,MAAM,KAAKC;AACxB;AAEA,MAAMA,4BAA4B;AAElC,MAAMC,qCAAqCC;IAGzCC,YACkBC,KAAa,EACbC,UAAkB,CAClC;QACA,KAAK,CACH,CAAC,qBAAqB,EAAEA,WAAW,qGAAqG,EAAEA,WAAW,8KAA8K,EAAED,MAAM,EAAE,CAAC,GAAA,IAAA,CAJhUA,KAAAA,GAAAA,OAAAA,IAAAA,CACAC,UAAAA,GAAAA,YAAAA,IAAAA,CAJFN,MAAAA,GAASC;IASzB;AACF;AAGA,MAAMM,yBAAyB,IAAIC;AAS5B,SAASC,mBACdC,MAAmB,EACnBL,KAAa,EACbC,UAAkB;IAElB,IAAII,OAAOC,OAAO,EAAE;QAClB,OAAOC,QAAQC,MAAM,CAAC,IAAIX,6BAA6BG,OAAOC;IAChE,OAAO;QACL,MAAMQ,iBAAiB,IAAIF,QAAW,CAACG,GAAGF;YACxC,MAAMG,iBAAiBH,OAAOI,IAAI,CAChC,MACA,IAAIf,6BAA6BG,OAAOC;YAE1C,IAAIY,mBAAmBX,uBAAuBY,GAAG,CAACT;YAClD,IAAIQ,kBAAkB;gBACpBA,iBAAiBE,IAAI,CAACJ;YACxB,OAAO;gBACL,MAAMK,YAAY;oBAACL;iBAAe;gBAClCT,uBAAuBe,GAAG,CAACZ,QAAQW;gBACnCX,OAAOa,gBAAgB,CACrB,SACA;oBACE,IAAK,IAAIC,IAAI,GAAGA,IAAIH,UAAUI,MAAM,EAAED,IAAK;wBACzCH,SAAS,CAACG,EAAE;oBACd;gBACF,GACA;oBAAEE,MAAM;gBAAK;YAEjB;QACF;QACA,2GAA2G;QAC3G,6GAA6G;QAC7G,yFAAyF;QACzFZ,eAAea,KAAK,CAACC;QACrB,OAAOd;IACT;AACF;AAEA,SAASc,gBAAgB;AAElB,SAASC,2BAA8BC,UAAa;IACzD,kEAAkE;IAClE,2EAA2E;IAC3E,OAAO,IAAIlB,QAAW,CAACmB;QACrB,sFAAsF;QACtFC,WAAW;YACTD,QAAQD;QACV,GAAG;IACL;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5304</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/framework/boundary-constants.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const METADATA_BOUNDARY_NAME = '__next_metadata_boundary__'</span><span class="s3">\n</span><span class="s1">export const VIEWPORT_BOUNDARY_NAME = '__next_viewport_boundary__'</span><span class="s3">\n</span><span class="s1">export const OUTLET_BOUNDARY_NAME = '__next_outlet_boundary__'</span><span class="s3">\n</span><span class="s1">export const ROOT_LAYOUT_BOUNDARY_NAME = '__next_root_layout_boundary__'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;METADATA_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;VIEWPORT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;OUTLET_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_LAYOUT_BOUNDARY_NAME&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AAAO,MAAMA,yBAAyB,6BAA4B;AAC3D,MAAMC,yBAAyB,6BAA4B;AAC3D,MAAMC,uBAAuB,2BAA0B;AACvD,MAAMC,4BAA4B,gCAA+B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5322</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/scheduler.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export type ScheduledFn&lt;T = void&gt; = () =&gt; T | PromiseLike&lt;T&gt;</span><span class="s3">\n</span><span class="s1">export type SchedulerFn&lt;T = void&gt; = (cb: ScheduledFn&lt;T&gt;) =&gt; void</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Schedules a function to be called on the next tick after the other promises</span><span class="s3">\n </span><span class="s1">* have been resolved.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param cb the function to schedule</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const scheduleOnNextTick = (cb: ScheduledFn&lt;void&gt;) =&gt; {</span><span class="s3">\n  </span><span class="s1">// We use Promise.resolve().then() here so that the operation is scheduled at</span><span class="s3">\n  </span><span class="s1">// the end of the promise job queue, we then add it to the next process tick</span><span class="s3">\n  </span><span class="s1">// to ensure it's evaluated afterwards.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// This was inspired by the implementation of the DataLoader interface: https://github.com/graphql/dataloader/blob/d336bd15282664e0be4b4a657cb796f09bafbc6b/src/index.js#L213-L255</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">Promise.resolve().then(() =&gt; {</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n      </span><span class="s1">setTimeout(cb, 0)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">process.nextTick(cb)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Schedules a function to be called using `setImmediate` or `setTimeout` if</span><span class="s3">\n </span><span class="s1">* `setImmediate` is not available (like in the Edge runtime).</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param cb the function to schedule</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const scheduleImmediate = (cb: ScheduledFn&lt;void&gt;): void =&gt; {</span><span class="s3">\n  </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n    </span><span class="s1">setTimeout(cb, 0)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">setImmediate(cb)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* returns a promise than resolves in a future task. There is no guarantee that the task it resolves in</span><span class="s3">\n </span><span class="s1">* will be the next task but if you await it you can at least be sure that the current task is over and</span><span class="s3">\n </span><span class="s1">* most usefully that the entire microtask queue of the current task has been emptied.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function atLeastOneTask() {</span><span class="s3">\n  </span><span class="s1">return new Promise&lt;void&gt;((resolve) =&gt; scheduleImmediate(resolve))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This utility function is extracted to make it easier to find places where we are doing</span><span class="s3">\n </span><span class="s1">* specific timing tricks to try to schedule work after React has rendered. This is especially</span><span class="s3">\n </span><span class="s1">* important at the moment because Next.js uses the edge builds of React which use setTimeout to</span><span class="s3">\n </span><span class="s1">* schedule work when you might expect that something like setImmediate would do the trick.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Long term we should switch to the node versions of React rendering when possible and then</span><span class="s3">\n </span><span class="s1">* update this to use setImmediate rather than setTimeout</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function waitAtLeastOneReactRenderTask(): Promise&lt;void&gt; {</span><span class="s3">\n  </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n    </span><span class="s1">return new Promise((r) =&gt; setTimeout(r, 0))</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return new Promise((r) =&gt; setImmediate(r))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;scheduleOnNextTick&quot;</span><span class="s0">,</span><span class="s1">&quot;cb&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;setTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;nextTick&quot;</span><span class="s0">,</span><span class="s1">&quot;scheduleImmediate&quot;</span><span class="s0">,</span><span class="s1">&quot;setImmediate&quot;</span><span class="s0">,</span><span class="s1">&quot;atLeastOneTask&quot;</span><span class="s0">,</span><span class="s1">&quot;waitAtLeastOneReactRenderTask&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAGA;;;;;CAKC,GACD;;;;;;;;;;AAAO,MAAMA,qBAAqB,CAACC;IACjC,6EAA6E;IAC7E,4EAA4E;IAC5E,uCAAuC;IACvC,EAAE;IACF,kLAAkL;IAClL,EAAE;IACFC,QAAQC,OAAO,GAAGC,IAAI,CAAC;QACrB,IAAIC,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;aAElC;YACLF,QAAQI,QAAQ,CAACR;QACnB;IACF;AACF,EAAC;AAQM,MAAMS,oBAAoB,CAACT;IAChC,IAAII,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;SAElC;QACLI,aAAaV;IACf;AACF,EAAC;AAOM,SAASW;IACd,OAAO,IAAIV,QAAc,CAACC,UAAYO,kBAAkBP;AAC1D;AAWO,SAASU;IACd,IAAIR,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;SAElC;QACL,OAAO,IAAIL,QAAQ,CAACY,IAAMH,aAAaG;IACzC;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5373</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/lazy-dynamic/bailout-to-csr.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This has to be a shared module which is shared between client component error boundary and dynamic component</span><span class="s3">\n</span><span class="s1">const BAILOUT_TO_CSR = 'BAILOUT_TO_CLIENT_SIDE_RENDERING'</span><span class="s3">\n\n</span><span class="s1">/** An error that should be thrown when we want to bail out to client-side rendering. */</span><span class="s3">\n</span><span class="s1">export class BailoutToCSRError extends Error {</span><span class="s3">\n  </span><span class="s1">public readonly digest = BAILOUT_TO_CSR</span><span class="s3">\n\n  </span><span class="s1">constructor(public readonly reason: string) {</span><span class="s3">\n    </span><span class="s1">super(`Bail out to client-side rendering: ${reason}`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/** Checks if a passed argument is an error that is thrown if we want to bail out to client-side rendering. */</span><span class="s3">\n</span><span class="s1">export function isBailoutToCSRError(err: unknown): err is BailoutToCSRError {</span><span class="s3">\n  </span><span class="s1">if (typeof err !== 'object' || err === null || !('digest' in err)) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return err.digest === BAILOUT_TO_CSR</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;BAILOUT_TO_CSR&quot;</span><span class="s0">,</span><span class="s1">&quot;BailoutToCSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;isBailoutToCSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,+GAA+G;;;;;;;AAC/G,MAAMA,iBAAiB;AAGhB,MAAMC,0BAA0BC;IAGrCC,YAA4BC,MAAc,CAAE;QAC1C,KAAK,CAAE,wCAAqCA,SAAAA,IAAAA,CADlBA,MAAAA,GAAAA,QAAAA,IAAAA,CAFZC,MAAAA,GAASL;IAIzB;AACF;AAGO,SAASM,oBAAoBC,GAAY;IAC9C,IAAI,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,CAAE,CAAA,YAAYA,GAAE,GAAI;QACjE,OAAO;IACT;IAEA,OAAOA,IAAIF,MAAM,KAAKL;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5396</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/invariant-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export class InvariantError extends Error {</span><span class="s3">\n  </span><span class="s1">constructor(message: string, options?: ErrorOptions) {</span><span class="s3">\n    </span><span class="s1">super(</span><span class="s3">\n      </span><span class="s1">`Invariant: ${message.endsWith('.') ? message : message + '.'} This is a bug in Next.js.`,</span><span class="s3">\n      </span><span class="s1">options</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.name = 'InvariantError'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,MAAMA,uBAAuBC;IAClCC,YAAYC,OAAe,EAAEC,OAAsB,CAAE;QACnD,KAAK,CACF,gBAAaD,CAAAA,QAAQE,QAAQ,CAAC,OAAOF,UAAUA,UAAU,GAAE,IAAE,8BAC9DC;QAEF,IAAI,CAACE,IAAI,GAAG;IACd;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">5410</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/dynamic-rendering.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* The functions provided by this module are used to communicate certain properties</span><span class="s3">\n </span><span class="s1">* about the currently running code so that Next.js can make decisions on how to handle</span><span class="s3">\n </span><span class="s1">* the current execution in different rendering modes such as pre-rendering, resuming, and SSR.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Today Next.js treats all code as potentially static. Certain APIs may only make sense when dynamically rendering.</span><span class="s3">\n </span><span class="s1">* Traditionally this meant deopting the entire render to dynamic however with PPR we can now deopt parts</span><span class="s3">\n </span><span class="s1">* of a React tree as dynamic while still keeping other parts static. There are really two different kinds of</span><span class="s3">\n </span><span class="s1">* Dynamic indications.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* The first is simply an intention to be dynamic. unstable_noStore is an example of this where</span><span class="s3">\n </span><span class="s1">* the currently executing code simply declares that the current scope is dynamic but if you use it</span><span class="s3">\n </span><span class="s1">* inside unstable_cache it can still be cached. This type of indication can be removed if we ever</span><span class="s3">\n </span><span class="s1">* make the default dynamic to begin with because the only way you would ever be static is inside</span><span class="s3">\n </span><span class="s1">* a cache scope which this indication does not affect.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* The second is an indication that a dynamic data source was read. This is a stronger form of dynamic</span><span class="s3">\n </span><span class="s1">* because it means that it is inappropriate to cache this at all. using a dynamic data source inside</span><span class="s3">\n </span><span class="s1">* unstable_cache should error. If you want to use some dynamic data inside unstable_cache you should</span><span class="s3">\n </span><span class="s1">* read that data outside the cache and pass it in as an argument to the cached function.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import type { WorkStore } from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">WorkUnitStore,</span><span class="s3">\n  </span><span class="s1">RequestStore,</span><span class="s3">\n  </span><span class="s1">PrerenderStoreLegacy,</span><span class="s3">\n  </span><span class="s1">PrerenderStoreModern,</span><span class="s3">\n  </span><span class="s1">PrerenderStoreModernRuntime,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">// Once postpone is in stable we should switch to importing the postpone export directly</span><span class="s3">\n</span><span class="s1">import React from 'react'</span><span class="s3">\n\n</span><span class="s1">import { DynamicServerError } from '../../client/components/hooks-server-context'</span><span class="s3">\n</span><span class="s1">import { StaticGenBailoutError } from '../../client/components/static-generation-bailout'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getRuntimeStagePromise,</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n</span><span class="s1">} from './work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { workAsyncStorage } from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { makeHangingPromise } from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">METADATA_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">VIEWPORT_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">OUTLET_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">ROOT_LAYOUT_BOUNDARY_NAME,</span><span class="s3">\n</span><span class="s1">} from '../../lib/framework/boundary-constants'</span><span class="s3">\n</span><span class="s1">import { scheduleOnNextTick } from '../../lib/scheduler'</span><span class="s3">\n</span><span class="s1">import { BailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n\n</span><span class="s1">const hasPostpone = typeof React.unstable_postpone === 'function'</span><span class="s3">\n\n</span><span class="s1">export type DynamicAccess = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* If debugging, this will contain the stack trace of where the dynamic access</span><span class="s3">\n   </span><span class="s1">* occurred. This is used to provide more information to the user about why</span><span class="s3">\n   </span><span class="s1">* their page is being rendered dynamically.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">stack?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The expression that was accessed dynamically.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Stores dynamic reasons used during an RSC render.</span><span class="s3">\n</span><span class="s1">export type DynamicTrackingState = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When true, stack information will also be tracked during dynamic access.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">readonly isDebugDynamicAccesses: boolean | undefined</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The dynamic accesses that occurred during the render.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">readonly dynamicAccesses: Array&lt;DynamicAccess&gt;</span><span class="s3">\n\n  </span><span class="s1">syncDynamicErrorWithStack: null | Error</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Stores dynamic reasons used during an SSR render.</span><span class="s3">\n</span><span class="s1">export type DynamicValidationState = {</span><span class="s3">\n  </span><span class="s1">hasSuspenseAboveBody: boolean</span><span class="s3">\n  </span><span class="s1">hasDynamicMetadata: boolean</span><span class="s3">\n  </span><span class="s1">hasDynamicViewport: boolean</span><span class="s3">\n  </span><span class="s1">hasAllowedDynamic: boolean</span><span class="s3">\n  </span><span class="s1">dynamicErrors: Array&lt;Error&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createDynamicTrackingState(</span><span class="s3">\n  </span><span class="s1">isDebugDynamicAccesses: boolean | undefined</span><span class="s3">\n</span><span class="s1">): DynamicTrackingState {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">isDebugDynamicAccesses,</span><span class="s3">\n    </span><span class="s1">dynamicAccesses: [],</span><span class="s3">\n    </span><span class="s1">syncDynamicErrorWithStack: null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createDynamicValidationState(): DynamicValidationState {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">hasSuspenseAboveBody: false,</span><span class="s3">\n    </span><span class="s1">hasDynamicMetadata: false,</span><span class="s3">\n    </span><span class="s1">hasDynamicViewport: false,</span><span class="s3">\n    </span><span class="s1">hasAllowedDynamic: false,</span><span class="s3">\n    </span><span class="s1">dynamicErrors: [],</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getFirstDynamicReason(</span><span class="s3">\n  </span><span class="s1">trackingState: DynamicTrackingState</span><span class="s3">\n</span><span class="s1">): undefined | string {</span><span class="s3">\n  </span><span class="s1">return trackingState.dynamicAccesses[0]?.expression</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function communicates that the current scope should be treated as dynamic.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* In most cases this function is a no-op but if called during</span><span class="s3">\n </span><span class="s1">* a PPR prerender it will postpone the current sub-tree and calling</span><span class="s3">\n </span><span class="s1">* it during a normal prerender will cause the entire prerender to abort</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function markCurrentScopeAsDynamic(</span><span class="s3">\n  </span><span class="s1">store: WorkStore,</span><span class="s3">\n  </span><span class="s1">workUnitStore: undefined | Exclude&lt;WorkUnitStore, PrerenderStoreModern&gt;,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">// Inside cache scopes, marking a scope as dynamic has no effect,</span><span class="s3">\n        </span><span class="s1">// because the outer cache scope creates a cache boundary. This is</span><span class="s3">\n        </span><span class="s1">// subtly different from reading a dynamic data source, which is</span><span class="s3">\n        </span><span class="s1">// forbidden inside a cache scope.</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n        </span><span class="s1">// A private cache scope is already dynamic by definition.</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If we're forcing dynamic rendering or we're forcing static rendering, we</span><span class="s3">\n  </span><span class="s1">// don't need to do anything here because the entire page is already dynamic</span><span class="s3">\n  </span><span class="s1">// or it's static and it should not throw or postpone here.</span><span class="s3">\n  </span><span class="s1">if (store.forceDynamic || store.forceStatic) return</span><span class="s3">\n\n  </span><span class="s1">if (store.dynamicShouldError) {</span><span class="s3">\n    </span><span class="s1">throw new StaticGenBailoutError(</span><span class="s3">\n      </span><span class="s1">`Route ${store.route} with </span><span class="s3">\\</span><span class="s1">`dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;\\</span><span class="s1">` couldn't be rendered statically because it used </span><span class="s3">\\</span><span class="s1">`${expression}</span><span class="s3">\\</span><span class="s1">`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n        </span><span class="s1">return postponeWithTracking(</span><span class="s3">\n          </span><span class="s1">store.route,</span><span class="s3">\n          </span><span class="s1">expression,</span><span class="s3">\n          </span><span class="s1">workUnitStore.dynamicTracking</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">workUnitStore.revalidate = 0</span><span class="s3">\n\n        </span><span class="s1">// We aren't prerendering, but we are generating a static page. We need</span><span class="s3">\n        </span><span class="s1">// to bail out of static generation.</span><span class="s3">\n        </span><span class="s1">const err = new DynamicServerError(</span><span class="s3">\n          </span><span class="s1">`Route ${store.route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">store.dynamicUsageDescription = expression</span><span class="s3">\n        </span><span class="s1">store.dynamicUsageStack = err.stack</span><span class="s3">\n\n        </span><span class="s1">throw err</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n          </span><span class="s1">workUnitStore.usedDynamic = true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function is meant to be used when prerendering without cacheComponents or PPR.</span><span class="s3">\n </span><span class="s1">* When called during a build it will cause Next.js to consider the route as dynamic.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function throwToInterruptStaticGeneration(</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">store: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreLegacy</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">// We aren't prerendering but we are generating a static page. We need to bail out of static generation</span><span class="s3">\n  </span><span class="s1">const err = new DynamicServerError(</span><span class="s3">\n    </span><span class="s1">`Route ${store.route} couldn't be rendered statically because it used </span><span class="s3">\\</span><span class="s1">`${expression}</span><span class="s3">\\</span><span class="s1">`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">prerenderStore.revalidate = 0</span><span class="s3">\n\n  </span><span class="s1">store.dynamicUsageDescription = expression</span><span class="s3">\n  </span><span class="s1">store.dynamicUsageStack = err.stack</span><span class="s3">\n\n  </span><span class="s1">throw err</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This function should be used to track whether something dynamic happened even when</span><span class="s3">\n </span><span class="s1">* we are in a dynamic render. This is useful for Dev where all renders are dynamic but</span><span class="s3">\n </span><span class="s1">* we still track whether dynamic APIs were accessed for helpful messaging</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function trackDynamicDataInDynamicRender(workUnitStore: WorkUnitStore) {</span><span class="s3">\n  </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'cache':</span><span class="s3">\n    </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n      </span><span class="s1">// Inside cache scopes, marking a scope as dynamic has no effect,</span><span class="s3">\n      </span><span class="s1">// because the outer cache scope creates a cache boundary. This is</span><span class="s3">\n      </span><span class="s1">// subtly different from reading a dynamic data source, which is</span><span class="s3">\n      </span><span class="s1">// forbidden inside a cache scope.</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">// A private cache scope is already dynamic by definition.</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">case 'request':</span><span class="s3">\n      </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n        </span><span class="s1">workUnitStore.usedDynamic = true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function abortOnSynchronousDynamicDataAccess(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModern</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">const reason = `Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`</span><span class="s3">\n\n  </span><span class="s1">const error = createPrerenderInterruptedError(reason)</span><span class="s3">\n\n  </span><span class="s1">prerenderStore.controller.abort(error)</span><span class="s3">\n\n  </span><span class="s1">const dynamicTracking = prerenderStore.dynamicTracking</span><span class="s3">\n  </span><span class="s1">if (dynamicTracking) {</span><span class="s3">\n    </span><span class="s1">dynamicTracking.dynamicAccesses.push({</span><span class="s3">\n      </span><span class="s1">// When we aren't debugging, we don't need to create another error for the</span><span class="s3">\n      </span><span class="s1">// stack trace.</span><span class="s3">\n      </span><span class="s1">stack: dynamicTracking.isDebugDynamicAccesses</span><span class="s3">\n        </span><span class="s1">? new Error().stack</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">expression,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function abortOnSynchronousPlatformIOAccess(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">errorWithStack: Error,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModern</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">const dynamicTracking = prerenderStore.dynamicTracking</span><span class="s3">\n  </span><span class="s1">abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore)</span><span class="s3">\n  </span><span class="s1">// It is important that we set this tracking value after aborting. Aborts are executed</span><span class="s3">\n  </span><span class="s1">// synchronously except for the case where you abort during render itself. By setting this</span><span class="s3">\n  </span><span class="s1">// value late we can use it to determine if any of the aborted tasks are the task that</span><span class="s3">\n  </span><span class="s1">// called the sync IO expression in the first place.</span><span class="s3">\n  </span><span class="s1">if (dynamicTracking) {</span><span class="s3">\n    </span><span class="s1">if (dynamicTracking.syncDynamicErrorWithStack === null) {</span><span class="s3">\n      </span><span class="s1">dynamicTracking.syncDynamicErrorWithStack = errorWithStack</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function trackSynchronousPlatformIOAccessInDev(</span><span class="s3">\n  </span><span class="s1">requestStore: RequestStore</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">// We don't actually have a controller to abort but we do the semantic equivalent by</span><span class="s3">\n  </span><span class="s1">// advancing the request store out of prerender mode</span><span class="s3">\n  </span><span class="s1">requestStore.prerenderPhase = false</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* use this function when prerendering with cacheComponents. If we are doing a</span><span class="s3">\n </span><span class="s1">* prospective prerender we don't actually abort because we want to discover</span><span class="s3">\n </span><span class="s1">* all caches for the shell. If this is the actual prerender we do abort.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This function accepts a prerenderStore but the caller should ensure we're</span><span class="s3">\n </span><span class="s1">* actually running in cacheComponents mode.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function abortAndThrowOnSynchronousRequestDataAccess(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">errorWithStack: Error,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModern</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">const prerenderSignal = prerenderStore.controller.signal</span><span class="s3">\n  </span><span class="s1">if (prerenderSignal.aborted === false) {</span><span class="s3">\n    </span><span class="s1">// TODO it would be better to move this aborted check into the callsite so we can avoid making</span><span class="s3">\n    </span><span class="s1">// the error object when it isn't relevant to the aborting of the prerender however</span><span class="s3">\n    </span><span class="s1">// since we need the throw semantics regardless of whether we abort it is easier to land</span><span class="s3">\n    </span><span class="s1">// this way. See how this was handled with `abortOnSynchronousPlatformIOAccess` for a closer</span><span class="s3">\n    </span><span class="s1">// to ideal implementation</span><span class="s3">\n    </span><span class="s1">abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore)</span><span class="s3">\n    </span><span class="s1">// It is important that we set this tracking value after aborting. Aborts are executed</span><span class="s3">\n    </span><span class="s1">// synchronously except for the case where you abort during render itself. By setting this</span><span class="s3">\n    </span><span class="s1">// value late we can use it to determine if any of the aborted tasks are the task that</span><span class="s3">\n    </span><span class="s1">// called the sync IO expression in the first place.</span><span class="s3">\n    </span><span class="s1">const dynamicTracking = prerenderStore.dynamicTracking</span><span class="s3">\n    </span><span class="s1">if (dynamicTracking) {</span><span class="s3">\n      </span><span class="s1">if (dynamicTracking.syncDynamicErrorWithStack === null) {</span><span class="s3">\n        </span><span class="s1">dynamicTracking.syncDynamicErrorWithStack = errorWithStack</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throw createPrerenderInterruptedError(</span><span class="s3">\n    </span><span class="s1">`Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Use this function when dynamically prerendering with dynamicIO.</span><span class="s3">\n </span><span class="s1">* We don't want to error, because it's better to return something</span><span class="s3">\n </span><span class="s1">* (and we've already aborted the render at the point where the sync dynamic error occured),</span><span class="s3">\n </span><span class="s1">* but we should log an error server-side.</span><span class="s3">\n </span><span class="s1">* @internal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function warnOnSyncDynamicError(dynamicTracking: DynamicTrackingState) {</span><span class="s3">\n  </span><span class="s1">if (dynamicTracking.syncDynamicErrorWithStack) {</span><span class="s3">\n    </span><span class="s1">// the server did something sync dynamic, likely</span><span class="s3">\n    </span><span class="s1">// leading to an early termination of the prerender.</span><span class="s3">\n    </span><span class="s1">console.error(dynamicTracking.syncDynamicErrorWithStack)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// For now these implementations are the same so we just reexport</span><span class="s3">\n</span><span class="s1">export const trackSynchronousRequestDataAccessInDev =</span><span class="s3">\n  </span><span class="s1">trackSynchronousPlatformIOAccessInDev</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This component will call `React.postpone` that throws the postponed error.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">type PostponeProps = {</span><span class="s3">\n  </span><span class="s1">reason: string</span><span class="s3">\n  </span><span class="s1">route: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">export function Postpone({ reason, route }: PostponeProps): never {</span><span class="s3">\n  </span><span class="s1">const prerenderStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">const dynamicTracking =</span><span class="s3">\n    </span><span class="s1">prerenderStore &amp;&amp; prerenderStore.type === 'prerender-ppr'</span><span class="s3">\n      </span><span class="s1">? prerenderStore.dynamicTracking</span><span class="s3">\n      </span><span class="s1">: null</span><span class="s3">\n  </span><span class="s1">postponeWithTracking(route, reason, dynamicTracking)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function postponeWithTracking(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">dynamicTracking: null | DynamicTrackingState</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">assertPostpone()</span><span class="s3">\n  </span><span class="s1">if (dynamicTracking) {</span><span class="s3">\n    </span><span class="s1">dynamicTracking.dynamicAccesses.push({</span><span class="s3">\n      </span><span class="s1">// When we aren't debugging, we don't need to create another error for the</span><span class="s3">\n      </span><span class="s1">// stack trace.</span><span class="s3">\n      </span><span class="s1">stack: dynamicTracking.isDebugDynamicAccesses</span><span class="s3">\n        </span><span class="s1">? new Error().stack</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">expression,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">React.unstable_postpone(createPostponeReason(route, expression))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createPostponeReason(route: string, expression: string) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">`Route ${route} needs to bail out of prerendering at this point because it used ${expression}. ` +</span><span class="s3">\n    </span><span class="s1">`React throws this special object to indicate where. It should not be caught by ` +</span><span class="s3">\n    </span><span class="s1">`your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isDynamicPostpone(err: unknown) {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof err === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">err !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof (err as any).message === 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return isDynamicPostponeReason((err as any).message)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return false</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isDynamicPostponeReason(reason: string) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">reason.includes(</span><span class="s3">\n      </span><span class="s1">'needs to bail out of prerendering at this point because it used'</span><span class="s3">\n    </span><span class="s1">) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">reason.includes(</span><span class="s3">\n      </span><span class="s1">'Learn more: https://nextjs.org/docs/messages/ppr-caught-error'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">if (isDynamicPostponeReason(createPostponeReason('%%%', '^^^')) === false) {</span><span class="s3">\n  </span><span class="s1">throw new Error(</span><span class="s3">\n    </span><span class="s1">'Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const NEXT_PRERENDER_INTERRUPTED = 'NEXT_PRERENDER_INTERRUPTED'</span><span class="s3">\n\n</span><span class="s1">function createPrerenderInterruptedError(message: string): Error {</span><span class="s3">\n  </span><span class="s1">const error = new Error(message)</span><span class="s3">\n  </span><span class="s1">;(error as any).digest = NEXT_PRERENDER_INTERRUPTED</span><span class="s3">\n  </span><span class="s1">return error</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type DigestError = Error &amp; {</span><span class="s3">\n  </span><span class="s1">digest: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isPrerenderInterruptedError(</span><span class="s3">\n  </span><span class="s1">error: unknown</span><span class="s3">\n</span><span class="s1">): error is DigestError {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">typeof error === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">(error as any).digest === NEXT_PRERENDER_INTERRUPTED &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'name' in error &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'message' in error &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error instanceof Error</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function accessedDynamicData(</span><span class="s3">\n  </span><span class="s1">dynamicAccesses: Array&lt;DynamicAccess&gt;</span><span class="s3">\n</span><span class="s1">): boolean {</span><span class="s3">\n  </span><span class="s1">return dynamicAccesses.length &gt; 0</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function consumeDynamicAccess(</span><span class="s3">\n  </span><span class="s1">serverDynamic: DynamicTrackingState,</span><span class="s3">\n  </span><span class="s1">clientDynamic: DynamicTrackingState</span><span class="s3">\n</span><span class="s1">): DynamicTrackingState['dynamicAccesses'] {</span><span class="s3">\n  </span><span class="s1">// We mutate because we only call this once we are no longer writing</span><span class="s3">\n  </span><span class="s1">// to the dynamicTrackingState and it's more efficient than creating a new</span><span class="s3">\n  </span><span class="s1">// array.</span><span class="s3">\n  </span><span class="s1">serverDynamic.dynamicAccesses.push(...clientDynamic.dynamicAccesses)</span><span class="s3">\n  </span><span class="s1">return serverDynamic.dynamicAccesses</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function formatDynamicAPIAccesses(</span><span class="s3">\n  </span><span class="s1">dynamicAccesses: Array&lt;DynamicAccess&gt;</span><span class="s3">\n</span><span class="s1">): string[] {</span><span class="s3">\n  </span><span class="s1">return dynamicAccesses</span><span class="s3">\n    </span><span class="s1">.filter(</span><span class="s3">\n      </span><span class="s1">(access): access is Required&lt;DynamicAccess&gt; =&gt;</span><span class="s3">\n        </span><span class="s1">typeof access.stack === 'string' &amp;&amp; access.stack.length &gt; 0</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">.map(({ expression, stack }) =&gt; {</span><span class="s3">\n      </span><span class="s1">stack = stack</span><span class="s3">\n        </span><span class="s1">.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n        </span><span class="s1">// Remove the </span><span class="s3">\&quot;</span><span class="s1">Error: </span><span class="s3">\&quot; </span><span class="s1">prefix from the first line of the stack trace as</span><span class="s3">\n        </span><span class="s1">// well as the first 4 lines of the stack trace which is the distance</span><span class="s3">\n        </span><span class="s1">// from the user code and the `new Error().stack` call.</span><span class="s3">\n        </span><span class="s1">.slice(4)</span><span class="s3">\n        </span><span class="s1">.filter((line) =&gt; {</span><span class="s3">\n          </span><span class="s1">// Exclude Next.js internals from the stack trace.</span><span class="s3">\n          </span><span class="s1">if (line.includes('node_modules/next/')) {</span><span class="s3">\n            </span><span class="s1">return false</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Exclude anonymous functions from the stack trace.</span><span class="s3">\n          </span><span class="s1">if (line.includes(' (&lt;anonymous&gt;)')) {</span><span class="s3">\n            </span><span class="s1">return false</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Exclude Node.js internals from the stack trace.</span><span class="s3">\n          </span><span class="s1">if (line.includes(' (node:')) {</span><span class="s3">\n            </span><span class="s1">return false</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return true</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">.join('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n      </span><span class="s1">return `Dynamic API Usage Debug - ${expression}:</span><span class="s3">\\</span><span class="s1">n${stack}`</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function assertPostpone() {</span><span class="s3">\n  </span><span class="s1">if (!hasPostpone) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This is a bit of a hack to allow us to abort a render using a Postpone instance instead of an Error which changes React's</span><span class="s3">\n </span><span class="s1">* abort semantics slightly.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createRenderInBrowserAbortSignal(): AbortSignal {</span><span class="s3">\n  </span><span class="s1">const controller = new AbortController()</span><span class="s3">\n  </span><span class="s1">controller.abort(new BailoutToCSRError('Render in Browser'))</span><span class="s3">\n  </span><span class="s1">return controller.signal</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* In a prerender, we may end up with hanging Promises as inputs due them</span><span class="s3">\n </span><span class="s1">* stalling on connection() or because they're loading dynamic data. In that</span><span class="s3">\n </span><span class="s1">* case we need to abort the encoding of arguments since they'll never complete.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createHangingInputAbortSignal(</span><span class="s3">\n  </span><span class="s1">workUnitStore: WorkUnitStore</span><span class="s3">\n</span><span class="s1">): AbortSignal | undefined {</span><span class="s3">\n  </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n      </span><span class="s1">const controller = new AbortController()</span><span class="s3">\n\n      </span><span class="s1">if (workUnitStore.cacheSignal) {</span><span class="s3">\n        </span><span class="s1">// If we have a cacheSignal it means we're in a prospective render. If</span><span class="s3">\n        </span><span class="s1">// the input we're waiting on is coming from another cache, we do want</span><span class="s3">\n        </span><span class="s1">// to wait for it so that we can resolve this cache entry too.</span><span class="s3">\n        </span><span class="s1">workUnitStore.cacheSignal.inputReady().then(() =&gt; {</span><span class="s3">\n          </span><span class="s1">controller.abort()</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Otherwise we're in the final render and we should already have all</span><span class="s3">\n        </span><span class="s1">// our caches filled.</span><span class="s3">\n        </span><span class="s1">// If the prerender uses stages, we have wait until the runtime stage,</span><span class="s3">\n        </span><span class="s1">// at which point all runtime inputs will be resolved.</span><span class="s3">\n        </span><span class="s1">// (otherwise, a runtime prerender might consider `cookies()` hanging</span><span class="s3">\n        </span><span class="s1">//  even though they'd resolve in the next task.)</span><span class="s3">\n        </span><span class="s1">//</span><span class="s3">\n        </span><span class="s1">// We might still be waiting on some microtasks so we</span><span class="s3">\n        </span><span class="s1">// wait one tick before giving up. When we give up, we still want to</span><span class="s3">\n        </span><span class="s1">// render the content of this cache as deeply as we can so that we can</span><span class="s3">\n        </span><span class="s1">// suspend as deeply as possible in the tree or not at all if we don't</span><span class="s3">\n        </span><span class="s1">// end up waiting for the input.</span><span class="s3">\n        </span><span class="s1">const runtimeStagePromise = getRuntimeStagePromise(workUnitStore)</span><span class="s3">\n        </span><span class="s1">if (runtimeStagePromise) {</span><span class="s3">\n          </span><span class="s1">runtimeStagePromise.then(() =&gt;</span><span class="s3">\n            </span><span class="s1">scheduleOnNextTick(() =&gt; controller.abort())</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">scheduleOnNextTick(() =&gt; controller.abort())</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return controller.signal</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n    </span><span class="s1">case 'request':</span><span class="s3">\n    </span><span class="s1">case 'cache':</span><span class="s3">\n    </span><span class="s1">case 'private-cache':</span><span class="s3">\n    </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n      </span><span class="s1">return undefined</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function annotateDynamicAccess(</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModern</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const dynamicTracking = prerenderStore.dynamicTracking</span><span class="s3">\n  </span><span class="s1">if (dynamicTracking) {</span><span class="s3">\n    </span><span class="s1">dynamicTracking.dynamicAccesses.push({</span><span class="s3">\n      </span><span class="s1">stack: dynamicTracking.isDebugDynamicAccesses</span><span class="s3">\n        </span><span class="s1">? new Error().stack</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">expression,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function useDynamicRouteParams(expression: string) {</span><span class="s3">\n  </span><span class="s1">const workStore = workAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workStore &amp;&amp; workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender': {</span><span class="s3">\n        </span><span class="s1">const fallbackParams = workUnitStore.fallbackRouteParams</span><span class="s3">\n        </span><span class="s1">if (fallbackParams &amp;&amp; fallbackParams.size &gt; 0) {</span><span class="s3">\n          </span><span class="s1">// We are in a prerender with cacheComponents semantics. We are going to</span><span class="s3">\n          </span><span class="s1">// hang here and never resolve. This will cause the currently</span><span class="s3">\n          </span><span class="s1">// rendering component to effectively be a dynamic hole.</span><span class="s3">\n          </span><span class="s1">React.use(</span><span class="s3">\n            </span><span class="s1">makeHangingPromise(</span><span class="s3">\n              </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">expression</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n        </span><span class="s1">const fallbackParams = workUnitStore.fallbackRouteParams</span><span class="s3">\n        </span><span class="s1">if (fallbackParams &amp;&amp; fallbackParams.size &gt; 0) {</span><span class="s3">\n          </span><span class="s1">return postponeWithTracking(</span><span class="s3">\n            </span><span class="s1">workStore.route,</span><span class="s3">\n            </span><span class="s1">expression,</span><span class="s3">\n            </span><span class="s1">workUnitStore.dynamicTracking</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`${expression}</span><span class="s3">\\</span><span class="s1">` was called during a runtime prerender. Next.js should be preventing ${expression} from being included in server components statically, but did not in this case.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`${expression}</span><span class="s3">\\</span><span class="s1">` was called inside a cache scope. Next.js should be preventing ${expression} from being included in server components statically, but did not in this case.`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const hasSuspenseRegex = /</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">s+at Suspense </span><span class="s3">\\</span><span class="s1">(&lt;anonymous&gt;</span><span class="s3">\\</span><span class="s1">)/</span><span class="s3">\n\n</span><span class="s1">// Common implicit body tags that React will treat as body when placed directly in html</span><span class="s3">\n</span><span class="s1">const bodyAndImplicitTags =</span><span class="s3">\n  </span><span class="s1">'body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6'</span><span class="s3">\n\n</span><span class="s1">// Detects when RootLayoutBoundary (our framework marker component) appears</span><span class="s3">\n</span><span class="s1">// after Suspense in the component stack, indicating the root layout is wrapped</span><span class="s3">\n</span><span class="s1">// within a Suspense boundary. Ensures no body/html/implicit-body components are in between.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// Example matches:</span><span class="s3">\n</span><span class="s1">//   at Suspense (&lt;anonymous&gt;)</span><span class="s3">\n</span><span class="s1">//   at __next_root_layout_boundary__ (&lt;anonymous&gt;)</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// Or with other components in between (but not body/html/implicit-body):</span><span class="s3">\n</span><span class="s1">//   at Suspense (&lt;anonymous&gt;)</span><span class="s3">\n</span><span class="s1">//   at SomeComponent (&lt;anonymous&gt;)</span><span class="s3">\n</span><span class="s1">//   at __next_root_layout_boundary__ (&lt;anonymous&gt;)</span><span class="s3">\n</span><span class="s1">const hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex = new RegExp(</span><span class="s3">\n  </span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at Suspense </span><span class="s3">\\\\</span><span class="s1">(&lt;anonymous&gt;</span><span class="s3">\\\\</span><span class="s1">)(?:(?!</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at (?:${bodyAndImplicitTags}) </span><span class="s3">\\\\</span><span class="s1">(&lt;anonymous&gt;</span><span class="s3">\\\\</span><span class="s1">))[</span><span class="s3">\\\\</span><span class="s1">s</span><span class="s3">\\\\</span><span class="s1">S])*?</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at ${ROOT_LAYOUT_BOUNDARY_NAME} </span><span class="s3">\\\\</span><span class="s1">([^</span><span class="s3">\\\\</span><span class="s1">n]*</span><span class="s3">\\\\</span><span class="s1">)`</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">const hasMetadataRegex = new RegExp(</span><span class="s3">\n  </span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at ${METADATA_BOUNDARY_NAME}[</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s]`</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">const hasViewportRegex = new RegExp(</span><span class="s3">\n  </span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at ${VIEWPORT_BOUNDARY_NAME}[</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s]`</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">const hasOutletRegex = new RegExp(`</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s+at ${OUTLET_BOUNDARY_NAME}[</span><span class="s3">\\\\</span><span class="s1">n</span><span class="s3">\\\\</span><span class="s1">s]`)</span><span class="s3">\n\n</span><span class="s1">export function trackAllowedDynamicAccess(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">componentStack: string,</span><span class="s3">\n  </span><span class="s1">dynamicValidation: DynamicValidationState,</span><span class="s3">\n  </span><span class="s1">clientDynamic: DynamicTrackingState</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (hasOutletRegex.test(componentStack)) {</span><span class="s3">\n    </span><span class="s1">// We don't need to track that this is dynamic. It is only so when something else is also dynamic.</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else if (hasMetadataRegex.test(componentStack)) {</span><span class="s3">\n    </span><span class="s1">dynamicValidation.hasDynamicMetadata = true</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else if (hasViewportRegex.test(componentStack)) {</span><span class="s3">\n    </span><span class="s1">dynamicValidation.hasDynamicViewport = true</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else if (</span><span class="s3">\n    </span><span class="s1">hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex.test(</span><span class="s3">\n      </span><span class="s1">componentStack</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// For Suspense within body, the prelude wouldn't be empty so it wouldn't violate the empty static shells rule.</span><span class="s3">\n    </span><span class="s1">// But if you have Suspense above body, the prelude is empty but we allow that because having Suspense</span><span class="s3">\n    </span><span class="s1">// is an explicit signal from the user that they acknowledge the empty shell and want dynamic rendering.</span><span class="s3">\n    </span><span class="s1">dynamicValidation.hasAllowedDynamic = true</span><span class="s3">\n    </span><span class="s1">dynamicValidation.hasSuspenseAboveBody = true</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else if (hasSuspenseRegex.test(componentStack)) {</span><span class="s3">\n    </span><span class="s1">// this error had a Suspense boundary above it so we don't need to report it as a source</span><span class="s3">\n    </span><span class="s1">// of disallowed</span><span class="s3">\n    </span><span class="s1">dynamicValidation.hasAllowedDynamic = true</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else if (clientDynamic.syncDynamicErrorWithStack) {</span><span class="s3">\n    </span><span class="s1">// This task was the task that called the sync error.</span><span class="s3">\n    </span><span class="s1">dynamicValidation.dynamicErrors.push(</span><span class="s3">\n      </span><span class="s1">clientDynamic.syncDynamicErrorWithStack</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const message = `Route </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot;</span><span class="s1">: A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a </span><span class="s3">\&quot;</span><span class="s1">use cache</span><span class="s3">\&quot; </span><span class="s1">above it. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`</span><span class="s3">\n    </span><span class="s1">const error = createErrorWithComponentOrOwnerStack(message, componentStack)</span><span class="s3">\n    </span><span class="s1">dynamicValidation.dynamicErrors.push(error)</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* In dev mode, we prefer using the owner stack, otherwise the provided</span><span class="s3">\n </span><span class="s1">* component stack is used.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function createErrorWithComponentOrOwnerStack(</span><span class="s3">\n  </span><span class="s1">message: string,</span><span class="s3">\n  </span><span class="s1">componentStack: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const ownerStack =</span><span class="s3">\n    </span><span class="s1">process.env.NODE_ENV !== 'production' &amp;&amp; React.captureOwnerStack</span><span class="s3">\n      </span><span class="s1">? React.captureOwnerStack()</span><span class="s3">\n      </span><span class="s1">: null</span><span class="s3">\n\n  </span><span class="s1">const error = new Error(message)</span><span class="s3">\n  </span><span class="s1">error.stack = error.name + ': ' + message + (ownerStack ?? componentStack)</span><span class="s3">\n  </span><span class="s1">return error</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export enum PreludeState {</span><span class="s3">\n  </span><span class="s1">Full = 0,</span><span class="s3">\n  </span><span class="s1">Empty = 1,</span><span class="s3">\n  </span><span class="s1">Errored = 2,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function logDisallowedDynamicError(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">error: Error</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">console.error(error)</span><span class="s3">\n\n  </span><span class="s1">if (!workStore.dev) {</span><span class="s3">\n    </span><span class="s1">if (workStore.hasReadableErrorStacks) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running </span><span class="s3">\\</span><span class="s1">`next dev</span><span class="s3">\\</span><span class="s1">`, then open </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot; </span><span class="s1">in your browser to investigate the error.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:</span><span class="s3">\n  </span><span class="s1">- Start the app in development mode by running </span><span class="s3">\\</span><span class="s1">`next dev</span><span class="s3">\\</span><span class="s1">`, then open </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot; </span><span class="s1">in your browser to investigate the error.</span><span class="s3">\n  </span><span class="s1">- Rerun the production build with </span><span class="s3">\\</span><span class="s1">`next build --debug-prerender</span><span class="s3">\\</span><span class="s1">` to generate better stack traces.`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function throwIfDisallowedDynamic(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prelude: PreludeState,</span><span class="s3">\n  </span><span class="s1">dynamicValidation: DynamicValidationState,</span><span class="s3">\n  </span><span class="s1">serverDynamic: DynamicTrackingState</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">if (prelude !== PreludeState.Full) {</span><span class="s3">\n    </span><span class="s1">if (dynamicValidation.hasSuspenseAboveBody) {</span><span class="s3">\n      </span><span class="s1">// This route has opted into allowing fully dynamic rendering</span><span class="s3">\n      </span><span class="s1">// by including a Suspense boundary above the body. In this case</span><span class="s3">\n      </span><span class="s1">// a lack of a shell is not considered disallowed so we simply return</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (serverDynamic.syncDynamicErrorWithStack) {</span><span class="s3">\n      </span><span class="s1">// There is no shell and the server did something sync dynamic likely</span><span class="s3">\n      </span><span class="s1">// leading to an early termination of the prerender before the shell</span><span class="s3">\n      </span><span class="s1">// could be completed. We terminate the build/validating render.</span><span class="s3">\n      </span><span class="s1">logDisallowedDynamicError(</span><span class="s3">\n        </span><span class="s1">workStore,</span><span class="s3">\n        </span><span class="s1">serverDynamic.syncDynamicErrorWithStack</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">throw new StaticGenBailoutError()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// We didn't have any sync bailouts but there may be user code which</span><span class="s3">\n    </span><span class="s1">// blocked the root. We would have captured these during the prerender</span><span class="s3">\n    </span><span class="s1">// and can log them here and then terminate the build/validating render</span><span class="s3">\n    </span><span class="s1">const dynamicErrors = dynamicValidation.dynamicErrors</span><span class="s3">\n    </span><span class="s1">if (dynamicErrors.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">for (let i = 0; i &lt; dynamicErrors.length; i++) {</span><span class="s3">\n        </span><span class="s1">logDisallowedDynamicError(workStore, dynamicErrors[i])</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">throw new StaticGenBailoutError()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If we got this far then the only other thing that could be blocking</span><span class="s3">\n    </span><span class="s1">// the root is dynamic Viewport. If this is dynamic then</span><span class="s3">\n    </span><span class="s1">// you need to opt into that by adding a Suspense boundary above the body</span><span class="s3">\n    </span><span class="s1">// to indicate your are ok with fully dynamic rendering.</span><span class="s3">\n    </span><span class="s1">if (dynamicValidation.hasDynamicViewport) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`Route </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot; </span><span class="s1">has a </span><span class="s3">\\</span><span class="s1">`generateViewport</span><span class="s3">\\</span><span class="s1">` that depends on Request data (</span><span class="s3">\\</span><span class="s1">`cookies()</span><span class="s3">\\</span><span class="s1">`, etc...) or uncached external data (</span><span class="s3">\\</span><span class="s1">`fetch(...)</span><span class="s3">\\</span><span class="s1">`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">throw new StaticGenBailoutError()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (prelude === PreludeState.Empty) {</span><span class="s3">\n      </span><span class="s1">// If we ever get this far then we messed up the tracking of invalid dynamic.</span><span class="s3">\n      </span><span class="s1">// We still adhere to the constraint that you must produce a shell but invite the</span><span class="s3">\n      </span><span class="s1">// user to report this as a bug in Next.js.</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`Route </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot; </span><span class="s1">did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">throw new StaticGenBailoutError()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">dynamicValidation.hasAllowedDynamic === false &amp;&amp;</span><span class="s3">\n      </span><span class="s1">dynamicValidation.hasDynamicMetadata</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`Route </span><span class="s3">\&quot;</span><span class="s1">${workStore.route}</span><span class="s3">\&quot; </span><span class="s1">has a </span><span class="s3">\\</span><span class="s1">`generateMetadata</span><span class="s3">\\</span><span class="s1">` that depends on Request data (</span><span class="s3">\\</span><span class="s1">`cookies()</span><span class="s3">\\</span><span class="s1">`, etc...) or uncached external data (</span><span class="s3">\\</span><span class="s1">`fetch(...)</span><span class="s3">\\</span><span class="s1">`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">throw new StaticGenBailoutError()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function delayUntilRuntimeStage&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModernRuntime,</span><span class="s3">\n  </span><span class="s1">result: Promise&lt;T&gt;</span><span class="s3">\n</span><span class="s1">): Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">if (prerenderStore.runtimeStagePromise) {</span><span class="s3">\n    </span><span class="s1">return prerenderStore.runtimeStagePromise.then(() =&gt; result)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return result</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;DynamicServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;StaticGenBailoutError&quot;</span><span class="s0">,</span><span class="s1">&quot;getRuntimeStagePromise&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;METADATA_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;VIEWPORT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;OUTLET_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_LAYOUT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;scheduleOnNextTick&quot;</span><span class="s0">,</span><span class="s1">&quot;BailoutToCSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_postpone&quot;</span><span class="s0">,</span><span class="s1">&quot;createDynamicTrackingState&quot;</span><span class="s0">,</span><span class="s1">&quot;isDebugDynamicAccesses&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicAccesses&quot;</span><span class="s0">,</span><span class="s1">&quot;syncDynamicErrorWithStack&quot;</span><span class="s0">,</span><span class="s1">&quot;createDynamicValidationState&quot;</span><span class="s0">,</span><span class="s1">&quot;hasSuspenseAboveBody&quot;</span><span class="s0">,</span><span class="s1">&quot;hasDynamicMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;hasDynamicViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAllowedDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;getFirstDynamicReason&quot;</span><span class="s0">,</span><span class="s1">&quot;trackingState&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;markCurrentScopeAsDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;store&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;forceDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;forceStatic&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicShouldError&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;postponeWithTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicUsageDescription&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicUsageStack&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;usedDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;throwToInterruptStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStore&quot;</span><span class="s0">,</span><span class="s1">&quot;trackDynamicDataInDynamicRender&quot;</span><span class="s0">,</span><span class="s1">&quot;abortOnSynchronousDynamicDataAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderInterruptedError&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;abortOnSynchronousPlatformIOAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;errorWithStack&quot;</span><span class="s0">,</span><span class="s1">&quot;trackSynchronousPlatformIOAccessInDev&quot;</span><span class="s0">,</span><span class="s1">&quot;requestStore&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderPhase&quot;</span><span class="s0">,</span><span class="s1">&quot;abortAndThrowOnSynchronousRequestDataAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;aborted&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnSyncDynamicError&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;trackSynchronousRequestDataAccessInDev&quot;</span><span class="s0">,</span><span class="s1">&quot;Postpone&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;assertPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;createPostponeReason&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicPostponeReason&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_PRERENDER_INTERRUPTED&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;isPrerenderInterruptedError&quot;</span><span class="s0">,</span><span class="s1">&quot;accessedDynamicData&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;consumeDynamicAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;serverDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;clientDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDynamicAPIAccesses&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;access&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;line&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderInBrowserAbortSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;AbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;createHangingInputAbortSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;inputReady&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;runtimeStagePromise&quot;</span><span class="s0">,</span><span class="s1">&quot;annotateDynamicAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;useDynamicRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;hasSuspenseRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;bodyAndImplicitTags&quot;</span><span class="s0">,</span><span class="s1">&quot;hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;hasMetadataRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;hasViewportRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOutletRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;trackAllowedDynamicAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;componentStack&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicValidation&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;createErrorWithComponentOrOwnerStack&quot;</span><span class="s0">,</span><span class="s1">&quot;ownerStack&quot;</span><span class="s0">,</span><span class="s1">&quot;captureOwnerStack&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;PreludeState&quot;</span><span class="s0">,</span><span class="s1">&quot;logDisallowedDynamicError&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;hasReadableErrorStacks&quot;</span><span class="s0">,</span><span class="s1">&quot;throwIfDisallowedDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;prelude&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;delayUntilRuntimeStage&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">6028</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/create-deduped-by-callsite-server-error-logger.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import * as React from 'react'</span><span class="s3">\n\n</span><span class="s1">const errorRef: { current: null | Error } = { current: null }</span><span class="s3">\n\n</span><span class="s1">// React.cache is currently only available in canary/experimental React channels.</span><span class="s3">\n</span><span class="s1">const cache =</span><span class="s3">\n  </span><span class="s1">typeof React.cache === 'function'</span><span class="s3">\n    </span><span class="s1">? React.cache</span><span class="s3">\n    </span><span class="s1">: (fn: (key: unknown) =&gt; void) =&gt; fn</span><span class="s3">\n\n</span><span class="s1">// When Cache Components is enabled, we record these as errors so that they</span><span class="s3">\n</span><span class="s1">// are captured by the dev overlay as it's more critical to fix these</span><span class="s3">\n</span><span class="s1">// when enabled.</span><span class="s3">\n</span><span class="s1">const logErrorOrWarn = process.env.__NEXT_CACHE_COMPONENTS</span><span class="s3">\n  </span><span class="s1">? console.error</span><span class="s3">\n  </span><span class="s1">: console.warn</span><span class="s3">\n\n</span><span class="s1">// We don't want to dedupe across requests.</span><span class="s3">\n</span><span class="s1">// The developer might've just attempted to fix the warning so we should warn again if it still happens.</span><span class="s3">\n</span><span class="s1">const flushCurrentErrorIfNew = cache(</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars -- cache key</span><span class="s3">\n  </span><span class="s1">(key: unknown) =&gt; {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">logErrorOrWarn(errorRef.current)</span><span class="s3">\n    </span><span class="s1">} finally {</span><span class="s3">\n      </span><span class="s1">errorRef.current = null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates a function that logs an error message that is deduped by the userland</span><span class="s3">\n </span><span class="s1">* callsite.</span><span class="s3">\n </span><span class="s1">* This requires no indirection between the call of this function and the userland</span><span class="s3">\n </span><span class="s1">* callsite i.e. there's only a single library frame above this.</span><span class="s3">\n </span><span class="s1">* Do not use on the Client where sourcemaps and ignore listing might be enabled.</span><span class="s3">\n </span><span class="s1">* Only use that for warnings need a fix independent of the callstack.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param getMessage</span><span class="s3">\n </span><span class="s1">* @returns</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createDedupedByCallsiteServerErrorLoggerDev&lt;Args extends any[]&gt;(</span><span class="s3">\n  </span><span class="s1">getMessage: (...args: Args) =&gt; Error</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return function logDedupedError(...args: Args) {</span><span class="s3">\n    </span><span class="s1">const message = getMessage(...args)</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">const callStackFrames = new Error().stack?.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n      </span><span class="s1">if (callStackFrames === undefined || callStackFrames.length &lt; 4) {</span><span class="s3">\n        </span><span class="s1">logErrorOrWarn(message)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Error:</span><span class="s3">\n        </span><span class="s1">//   logDedupedError</span><span class="s3">\n        </span><span class="s1">//   asyncApiBeingAccessedSynchronously</span><span class="s3">\n        </span><span class="s1">//   &lt;userland callsite&gt;</span><span class="s3">\n        </span><span class="s1">// TODO: This breaks if sourcemaps with ignore lists are enabled.</span><span class="s3">\n        </span><span class="s1">const key = callStackFrames[4]</span><span class="s3">\n        </span><span class="s1">errorRef.current = message</span><span class="s3">\n        </span><span class="s1">flushCurrentErrorIfNew(key)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">logErrorOrWarn(message)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;errorRef&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;logErrorOrWarn&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_CACHE_COMPONENTS&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;flushCurrentErrorIfNew&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;createDedupedByCallsiteServerErrorLoggerDev&quot;</span><span class="s0">,</span><span class="s1">&quot;getMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;logDedupedError&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;callStackFrames&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,YAAYA,WAAW,QAAO;;AAE9B,MAAMC,WAAsC;IAAEC,SAAS;AAAK;AAE5D,iFAAiF;AACjF,MAAMC,QACJ,OAAOH,MAAMG,wMAAK,KAAK,aACnBH,MAAMG,wMAAK,GACX,CAACC,KAA+BA;AAEtC,2EAA2E;AAC3E,qEAAqE;AACrE,gBAAgB;AAChB,MAAMC,iBAAiBC,QAAQC,GAAG,CAACC,uBAAuB,GACtDC,QAAQC,KAAK,aACbD,QAAQE,IAAI;AAEhB,2CAA2C;AAC3C,wGAAwG;AACxG,MAAMC,yBAAyBT,MAC7B,AACA,CAACU,yEADyE;IAExE,IAAI;QACFR,eAAeJ,SAASC,OAAO;IACjC,SAAU;QACRD,SAASC,OAAO,GAAG;IACrB;AACF;AAcK,SAASY,4CACdC,UAAoC;IAEpC,OAAO,SAASC,gBAAgB,GAAGC,IAAU;QAC3C,MAAMC,UAAUH,cAAcE;QAE9B,IAAIX,QAAQC,GAAG,CAACY,QAAQ,KAAK,WAAc;gBACjB;YAAxB,MAAMC,kBAAAA,CAAkB,SAAA,IAAIC,QAAQC,KAAK,KAAA,OAAA,KAAA,IAAjB,OAAmBC,KAAK,CAAC;YACjD,IAAIH,oBAAoBI,aAAaJ,gBAAgBK,MAAM,GAAG,GAAG;gBAC/DpB,eAAea;YACjB,OAAO;gBACL,SAAS;gBACT,oBAAoB;gBACpB,uCAAuC;gBACvC,wBAAwB;gBACxB,iEAAiE;gBACjE,MAAML,MAAMO,eAAe,CAAC,EAAE;gBAC9BnB,SAASC,OAAO,GAAGgB;gBACnBN,uBAAuBC;YACzB;QACF,OAAO;;IAGT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">6078</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/utils/reflect-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This regex will have fast negatives meaning valid identifiers may not pass</span><span class="s3">\n</span><span class="s1">// this test. However this is only used during static generation to provide hints</span><span class="s3">\n</span><span class="s1">// about why a page bailed out of some or all prerendering and we can use bracket notation</span><span class="s3">\n</span><span class="s1">// for example while `_` is a valid identifier it's ok to print `searchParams['_']`</span><span class="s3">\n</span><span class="s1">// even if this would have been fine too `searchParams._`</span><span class="s3">\n</span><span class="s1">const isDefinitelyAValidIdentifier = /^[A-Za-z_$][A-Za-z0-9_$]*$/</span><span class="s3">\n\n</span><span class="s1">export function describeStringPropertyAccess(target: string, prop: string) {</span><span class="s3">\n  </span><span class="s1">if (isDefinitelyAValidIdentifier.test(prop)) {</span><span class="s3">\n    </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${target}.${prop}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${target}[${JSON.stringify(prop)}]</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function describeHasCheckingStringProperty(</span><span class="s3">\n  </span><span class="s1">target: string,</span><span class="s3">\n  </span><span class="s1">prop: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const stringifiedProp = JSON.stringify(prop)</span><span class="s3">\n  </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`Reflect.has(${target}, ${stringifiedProp})</span><span class="s3">\\</span><span class="s1">`, </span><span class="s3">\\</span><span class="s1">`${stringifiedProp} in ${target}</span><span class="s3">\\</span><span class="s1">`, or similar`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const wellKnownProperties = new Set([</span><span class="s3">\n  </span><span class="s1">'hasOwnProperty',</span><span class="s3">\n  </span><span class="s1">'isPrototypeOf',</span><span class="s3">\n  </span><span class="s1">'propertyIsEnumerable',</span><span class="s3">\n  </span><span class="s1">'toString',</span><span class="s3">\n  </span><span class="s1">'valueOf',</span><span class="s3">\n  </span><span class="s1">'toLocaleString',</span><span class="s3">\n\n  </span><span class="s1">// Promise prototype</span><span class="s3">\n  </span><span class="s1">// fallthrough</span><span class="s3">\n  </span><span class="s1">'then',</span><span class="s3">\n  </span><span class="s1">'catch',</span><span class="s3">\n  </span><span class="s1">'finally',</span><span class="s3">\n\n  </span><span class="s1">// React Promise extension</span><span class="s3">\n  </span><span class="s1">// fallthrough</span><span class="s3">\n  </span><span class="s1">'status',</span><span class="s3">\n\n  </span><span class="s1">// React introspection</span><span class="s3">\n  </span><span class="s1">'displayName',</span><span class="s3">\n  </span><span class="s1">'_debugInfo',</span><span class="s3">\n\n  </span><span class="s1">// Common tested properties</span><span class="s3">\n  </span><span class="s1">// fallthrough</span><span class="s3">\n  </span><span class="s1">'toJSON',</span><span class="s3">\n  </span><span class="s1">'$$typeof',</span><span class="s3">\n  </span><span class="s1">'__esModule',</span><span class="s3">\n</span><span class="s1">])</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isDefinitelyAValidIdentifier&quot;</span><span class="s0">,</span><span class="s1">&quot;describeStringPropertyAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;describeHasCheckingStringProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifiedProp&quot;</span><span class="s0">,</span><span class="s1">&quot;wellKnownProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,6EAA6E;AAC7E,iFAAiF;AACjF,0FAA0F;AAC1F,uFAAuF;AACvF,2DAA2D;;;;;;;;;AAC3D,MAAMA,+BAA+B;AAE9B,SAASC,6BAA6BC,MAAc,EAAEC,IAAY;IACvE,IAAIH,6BAA6BI,IAAI,CAACD,OAAO;QAC3C,OAAQ,MAAID,SAAO,MAAGC,OAAK;IAC7B;IACA,OAAQ,MAAID,SAAO,MAAGG,KAAKC,SAAS,CAACH,QAAM;AAC7C;AAEO,SAASI,kCACdL,MAAc,EACdC,IAAY;IAEZ,MAAMK,kBAAkBH,KAAKC,SAAS,CAACH;IACvC,OAAQ,kBAAgBD,SAAO,OAAIM,kBAAgB,UAASA,kBAAgB,SAAMN,SAAO;AAC3F;AAEO,MAAMO,sBAAsB,IAAIC,IAAI;IACzC;IACA;IACA;IACA;IACA;IACA;IAEA,oBAAoB;IACpB,cAAc;IACd;IACA;IACA;IAEA,0BAA0B;IAC1B,cAAc;IACd;IAEA,sBAAsB;IACtB;IACA;IAEA,2BAA2B;IAC3B,cAAc;IACd;IACA;IACA;CACD,EAAC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">6130</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/request/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { StaticGenBailoutError } from '../../client/components/static-generation-bailout'</span><span class="s3">\n</span><span class="s1">import { afterTaskAsyncStorage } from '../app-render/after-task-async-storage.external'</span><span class="s3">\n</span><span class="s1">import type { WorkStore } from '../app-render/work-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">export function throwWithStaticGenerationBailoutError(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">throw new StaticGenBailoutError(</span><span class="s3">\n    </span><span class="s1">`Route ${route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">throw new StaticGenBailoutError(</span><span class="s3">\n    </span><span class="s1">`Route ${route} with </span><span class="s3">\\</span><span class="s1">`dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;\\</span><span class="s1">` couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function throwForSearchParamsAccessInUseCache(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">constructorOpt: Function</span><span class="s3">\n</span><span class="s1">): never {</span><span class="s3">\n  </span><span class="s1">const error = new Error(</span><span class="s3">\n    </span><span class="s1">`Route ${workStore.route} used </span><span class="s3">\&quot;</span><span class="s1">searchParams</span><span class="s3">\&quot; </span><span class="s1">inside </span><span class="s3">\&quot;</span><span class="s1">use cache</span><span class="s3">\&quot;</span><span class="s1">. Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await </span><span class="s3">\&quot;</span><span class="s1">searchParams</span><span class="s3">\&quot; </span><span class="s1">outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">Error.captureStackTrace(error, constructorOpt)</span><span class="s3">\n  </span><span class="s1">workStore.invalidDynamicUsageError ??= error</span><span class="s3">\n\n  </span><span class="s1">throw error</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isRequestAPICallableInsideAfter() {</span><span class="s3">\n  </span><span class="s1">const afterTaskStore = afterTaskAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">return afterTaskStore?.rootTaskSpawnPhase === 'action'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;StaticGenBailoutError&quot;</span><span class="s0">,</span><span class="s1">&quot;afterTaskAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;throwWithStaticGenerationBailoutError&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;throwWithStaticGenerationBailoutErrorWithDynamicError&quot;</span><span class="s0">,</span><span class="s1">&quot;throwForSearchParamsAccessInUseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;constructorOpt&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;captureStackTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidDynamicUsageError&quot;</span><span class="s0">,</span><span class="s1">&quot;isRequestAPICallableInsideAfter&quot;</span><span class="s0">,</span><span class="s1">&quot;afterTaskStore&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;rootTaskSpawnPhase&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AAAA,SAASA,qBAAqB,QAAQ,oDAAmD;AACzF,SAASC,qBAAqB,QAAQ,kDAAiD;;;AAGhF,SAASC,sCACdC,KAAa,EACbC,UAAkB;IAElB,MAAM,OAAA,cAEL,CAFK,IAAIJ,uNAAAA,CACR,CAAC,MAAM,EAAEG,MAAM,iDAAiD,EAAEC,WAAW,0HAA0H,CAAC,GADpM,qBAAA;eAAA;oBAAA;sBAAA;IAEN;AACF;AAEO,SAASC,sDACdF,KAAa,EACbC,UAAkB;IAElB,MAAM,OAAA,cAEL,CAFK,IAAIJ,uNAAAA,CACR,CAAC,MAAM,EAAEG,MAAM,4EAA4E,EAAEC,WAAW,0HAA0H,CAAC,GAD/N,qBAAA;eAAA;oBAAA;sBAAA;IAEN;AACF;AAEO,SAASE,qCACdC,SAAoB,EACpBC,cAAwB;IAExB,MAAMC,QAAQ,OAAA,cAEb,CAFa,IAAIC,MAChB,CAAC,MAAM,EAAEH,UAAUJ,KAAK,CAAC,uXAAuX,CAAC,GADrY,qBAAA;eAAA;oBAAA;sBAAA;IAEd;IAEAO,MAAMC,iBAAiB,CAACF,OAAOD;IAC/BD,UAAUK,wBAAwB,KAAKH;IAEvC,MAAMA;AACR;AAEO,SAASI;IACd,MAAMC,iBAAiBb,8SAAAA,CAAsBc,QAAQ;IACrD,OAAOD,CAAAA,kBAAAA,OAAAA,KAAAA,IAAAA,eAAgBE,kBAAkB,MAAK;AAChD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">6176</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/request/search-params.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { WorkStore } from '../app-render/work-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">throwToInterruptStaticGeneration,</span><span class="s3">\n  </span><span class="s1">postponeWithTracking,</span><span class="s3">\n  </span><span class="s1">trackDynamicDataInDynamicRender,</span><span class="s3">\n  </span><span class="s1">annotateDynamicAccess,</span><span class="s3">\n  </span><span class="s1">trackSynchronousRequestDataAccessInDev,</span><span class="s3">\n  </span><span class="s1">delayUntilRuntimeStage,</span><span class="s3">\n</span><span class="s1">} from '../app-render/dynamic-rendering'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreLegacy,</span><span class="s3">\n  </span><span class="s1">type PrerenderStorePPR,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreModern,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreModernRuntime,</span><span class="s3">\n  </span><span class="s1">type StaticPrerenderStore,</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">makeDevtoolsIOAwarePromise,</span><span class="s3">\n  </span><span class="s1">makeHangingPromise,</span><span class="s3">\n</span><span class="s1">} from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import { createDedupedByCallsiteServerErrorLoggerDev } from '../create-deduped-by-callsite-server-error-logger'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">describeStringPropertyAccess,</span><span class="s3">\n  </span><span class="s1">describeHasCheckingStringProperty,</span><span class="s3">\n  </span><span class="s1">wellKnownProperties,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/utils/reflect-utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError,</span><span class="s3">\n  </span><span class="s1">throwForSearchParamsAccessInUseCache,</span><span class="s3">\n</span><span class="s1">} from './utils'</span><span class="s3">\n\n</span><span class="s1">export type SearchParams = { [key: string]: string | string[] | undefined }</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* In this version of Next.js the `params` prop passed to Layouts, Pages, and other Segments is a Promise.</span><span class="s3">\n </span><span class="s1">* However to facilitate migration to this new Promise type you can currently still access params directly on the Promise instance passed to these Segments.</span><span class="s3">\n </span><span class="s1">* The `UnsafeUnwrappedSearchParams` type is available if you need to temporarily access the underlying params without first awaiting or `use`ing the Promise.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* In a future version of Next.js the `params` prop will be a plain Promise and this type will be removed.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Typically instances of `params` can be updated automatically to be treated as a Promise by a codemod published alongside this Next.js version however if you</span><span class="s3">\n </span><span class="s1">* have not yet run the codemod of the codemod cannot detect certain instances of `params` usage you should first try to refactor your code to await `params`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* If refactoring is not possible but you still want to be able to access params directly without typescript errors you can cast the params Promise to this type</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* ```tsx</span><span class="s3">\n </span><span class="s1">* type Props = { searchParams: Promise&lt;{ foo: string }&gt; }</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* export default async function Page(props: Props) {</span><span class="s3">\n </span><span class="s1">*  const { searchParams } = (props.searchParams as unknown as UnsafeUnwrappedSearchParams&lt;typeof props.searchParams&gt;)</span><span class="s3">\n </span><span class="s1">*  return ...</span><span class="s3">\n </span><span class="s1">* }</span><span class="s3">\n </span><span class="s1">* ```</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This type is marked deprecated to help identify it as target for refactoring away.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @deprecated</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type UnsafeUnwrappedSearchParams&lt;P&gt; =</span><span class="s3">\n  </span><span class="s1">P extends Promise&lt;infer U&gt; ? Omit&lt;U, 'then' | 'status' | 'value'&gt; : never</span><span class="s3">\n\n</span><span class="s1">export function createSearchParamsFromClient(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">return createStaticPrerenderSearchParams(workStore, workUnitStore)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createSearchParamsFromClient should not be called in a runtime prerender.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createSearchParamsFromClient should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">return createRenderSearchParams(underlyingSearchParams, workStore)</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// generateMetadata always runs in RSC context so it is equivalent to a Server Page Component</span><span class="s3">\n</span><span class="s1">export const createServerSearchParamsForMetadata =</span><span class="s3">\n  </span><span class="s1">createServerSearchParamsForServerPage</span><span class="s3">\n\n</span><span class="s1">export function createServerSearchParamsForServerPage(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">return createStaticPrerenderSearchParams(workStore, workUnitStore)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createServerSearchParamsForServerPage should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">return createRuntimePrerenderSearchParams(</span><span class="s3">\n          </span><span class="s1">underlyingSearchParams,</span><span class="s3">\n          </span><span class="s1">workUnitStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">return createRenderSearchParams(underlyingSearchParams, workStore)</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createPrerenderSearchParamsForClientPage(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">if (workStore.forceStatic) {</span><span class="s3">\n    </span><span class="s1">// When using forceStatic we override all other logic and always just return an empty</span><span class="s3">\n    </span><span class="s1">// dictionary object.</span><span class="s3">\n    </span><span class="s1">return Promise.resolve({})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n        </span><span class="s1">// We're prerendering in a mode that aborts (cacheComponents) and should stall</span><span class="s3">\n        </span><span class="s1">// the promise to ensure the RSC side is considered dynamic</span><span class="s3">\n        </span><span class="s1">return makeHangingPromise(</span><span class="s3">\n          </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">'`searchParams`'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createPrerenderSearchParamsForClientPage should not be called in a runtime prerender.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createPrerenderSearchParamsForClientPage should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">return Promise.resolve({})</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createStaticPrerenderSearchParams(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">if (workStore.forceStatic) {</span><span class="s3">\n    </span><span class="s1">// When using forceStatic we override all other logic and always just return an empty</span><span class="s3">\n    </span><span class="s1">// dictionary object.</span><span class="s3">\n    </span><span class="s1">return Promise.resolve({})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">// We are in a cacheComponents (PPR or otherwise) prerender</span><span class="s3">\n      </span><span class="s1">return makeHangingSearchParams(workStore, prerenderStore)</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">// We are in a legacy static generation and need to interrupt the</span><span class="s3">\n      </span><span class="s1">// prerender when search params are accessed.</span><span class="s3">\n      </span><span class="s1">return makeErroringExoticSearchParams(workStore, prerenderStore)</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return prerenderStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRuntimePrerenderSearchParams(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">workUnitStore: PrerenderStoreModernRuntime</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">return delayUntilRuntimeStage(</span><span class="s3">\n    </span><span class="s1">workUnitStore,</span><span class="s3">\n    </span><span class="s1">process.env.__NEXT_CACHE_COMPONENTS</span><span class="s3">\n      </span><span class="s1">? makeUntrackedSearchParams(underlyingSearchParams)</span><span class="s3">\n      </span><span class="s1">: makeUntrackedExoticSearchParams(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRenderSearchParams(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">if (workStore.forceStatic) {</span><span class="s3">\n    </span><span class="s1">// When using forceStatic we override all other logic and always just return an empty</span><span class="s3">\n    </span><span class="s1">// dictionary object.</span><span class="s3">\n    </span><span class="s1">return Promise.resolve({})</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n      </span><span class="s1">// Semantically we only need the dev tracking when running in `next dev`</span><span class="s3">\n      </span><span class="s1">// but since you would never use next dev with production NODE_ENV we use this</span><span class="s3">\n      </span><span class="s1">// as a proxy so we can statically exclude this code from production builds.</span><span class="s3">\n      </span><span class="s1">if (process.env.__NEXT_CACHE_COMPONENTS) {</span><span class="s3">\n        </span><span class="s1">return makeUntrackedSearchParamsWithDevWarnings(</span><span class="s3">\n          </span><span class="s1">underlyingSearchParams,</span><span class="s3">\n          </span><span class="s1">workStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return makeDynamicallyTrackedExoticSearchParamsWithDevWarnings(</span><span class="s3">\n        </span><span class="s1">underlyingSearchParams,</span><span class="s3">\n        </span><span class="s1">workStore</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (process.env.__NEXT_CACHE_COMPONENTS) {</span><span class="s3">\n        </span><span class="s1">return makeUntrackedSearchParams(underlyingSearchParams)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return makeUntrackedExoticSearchParams(underlyingSearchParams)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface CacheLifetime {}</span><span class="s3">\n</span><span class="s1">const CachedSearchParams = new WeakMap&lt;CacheLifetime, Promise&lt;SearchParams&gt;&gt;()</span><span class="s3">\n\n</span><span class="s1">const CachedSearchParamsForUseCache = new WeakMap&lt;</span><span class="s3">\n  </span><span class="s1">CacheLifetime,</span><span class="s3">\n  </span><span class="s1">Promise&lt;SearchParams&gt;</span><span class="s3">\n</span><span class="s1">&gt;()</span><span class="s3">\n\n</span><span class="s1">function makeHangingSearchParams(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreModern</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(prerenderStore)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const promise = makeHangingPromise&lt;SearchParams&gt;(</span><span class="s3">\n    </span><span class="s1">prerenderStore.renderSignal,</span><span class="s3">\n    </span><span class="s1">workStore.route,</span><span class="s3">\n    </span><span class="s1">'`searchParams`'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (Object.hasOwn(promise, prop)) {</span><span class="s3">\n        </span><span class="s1">// The promise has this property directly. we must return it.</span><span class="s3">\n        </span><span class="s1">// We know it isn't a dynamic access because it can only be something</span><span class="s3">\n        </span><span class="s1">// that was previously written to the promise and thus not an underlying searchParam value</span><span class="s3">\n        </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">switch (prop) {</span><span class="s3">\n        </span><span class="s1">case 'then': {</span><span class="s3">\n          </span><span class="s1">const expression =</span><span class="s3">\n            </span><span class="s1">'`await searchParams`, `searchParams.then`, or similar'</span><span class="s3">\n          </span><span class="s1">annotateDynamicAccess(expression, prerenderStore)</span><span class="s3">\n          </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">case 'status': {</span><span class="s3">\n          </span><span class="s1">const expression =</span><span class="s3">\n            </span><span class="s1">'`use(searchParams)`, `searchParams.status`, or similar'</span><span class="s3">\n          </span><span class="s1">annotateDynamicAccess(expression, prerenderStore)</span><span class="s3">\n          </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">default: {</span><span class="s3">\n          </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedSearchParams.set(prerenderStore, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeErroringExoticSearchParams(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStoreLegacy | PrerenderStorePPR</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(workStore)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const underlyingSearchParams = {}</span><span class="s3">\n  </span><span class="s1">// For search params we don't construct a ReactPromise because we want to interrupt</span><span class="s3">\n  </span><span class="s1">// rendering on any property access that was not set from outside and so we only want</span><span class="s3">\n  </span><span class="s1">// to have properties like value and status if React sets them.</span><span class="s3">\n  </span><span class="s1">const promise = Promise.resolve(underlyingSearchParams)</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (Object.hasOwn(promise, prop)) {</span><span class="s3">\n        </span><span class="s1">// The promise has this property directly. we must return it.</span><span class="s3">\n        </span><span class="s1">// We know it isn't a dynamic access because it can only be something</span><span class="s3">\n        </span><span class="s1">// that was previously written to the promise and thus not an underlying searchParam value</span><span class="s3">\n        </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">switch (prop) {</span><span class="s3">\n        </span><span class="s1">case 'then': {</span><span class="s3">\n          </span><span class="s1">const expression =</span><span class="s3">\n            </span><span class="s1">'`await searchParams`, `searchParams.then`, or similar'</span><span class="s3">\n          </span><span class="s1">if (workStore.dynamicShouldError) {</span><span class="s3">\n            </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">expression</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n            </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n            </span><span class="s1">postponeWithTracking(</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">expression,</span><span class="s3">\n              </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">// Legacy Prerender</span><span class="s3">\n            </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n              </span><span class="s1">expression,</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">prerenderStore</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">case 'status': {</span><span class="s3">\n          </span><span class="s1">const expression =</span><span class="s3">\n            </span><span class="s1">'`use(searchParams)`, `searchParams.status`, or similar'</span><span class="s3">\n          </span><span class="s1">if (workStore.dynamicShouldError) {</span><span class="s3">\n            </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">expression</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n            </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n            </span><span class="s1">postponeWithTracking(</span><span class="s3">\n              </span><span class="s1">workStore.route,</span><span class="s3">\n              </span><span class="s1">expression,</span><span class="s3">\n              </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">// Legacy Prerender</span><span class="s3">\n            </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n              </span><span class="s1">expression,</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">prerenderStore</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">default: {</span><span class="s3">\n          </span><span class="s1">if (typeof prop === 'string' &amp;&amp; !wellKnownProperties.has(prop)) {</span><span class="s3">\n            </span><span class="s1">const expression = describeStringPropertyAccess(</span><span class="s3">\n              </span><span class="s1">'searchParams',</span><span class="s3">\n              </span><span class="s1">prop</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">if (workStore.dynamicShouldError) {</span><span class="s3">\n              </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">expression</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">} else if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n              </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n              </span><span class="s1">postponeWithTracking(</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">// Legacy Prerender</span><span class="s3">\n              </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">workStore,</span><span class="s3">\n                </span><span class="s1">prerenderStore</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">has(target, prop) {</span><span class="s3">\n      </span><span class="s1">// We don't expect key checking to be used except for testing the existence of</span><span class="s3">\n      </span><span class="s1">// searchParams so we make all has tests trigger dynamic. this means that `promise.then`</span><span class="s3">\n      </span><span class="s1">// can resolve to the then function on the Promise prototype but 'then' in promise will assume</span><span class="s3">\n      </span><span class="s1">// you are testing whether the searchParams has a 'then' property.</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">const expression = describeHasCheckingStringProperty(</span><span class="s3">\n          </span><span class="s1">'searchParams',</span><span class="s3">\n          </span><span class="s1">prop</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">if (workStore.dynamicShouldError) {</span><span class="s3">\n          </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n            </span><span class="s1">workStore.route,</span><span class="s3">\n            </span><span class="s1">expression</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n          </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n          </span><span class="s1">postponeWithTracking(</span><span class="s3">\n            </span><span class="s1">workStore.route,</span><span class="s3">\n            </span><span class="s1">expression,</span><span class="s3">\n            </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// Legacy Prerender</span><span class="s3">\n          </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n            </span><span class="s1">expression,</span><span class="s3">\n            </span><span class="s1">workStore,</span><span class="s3">\n            </span><span class="s1">prerenderStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return false</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.has(target, prop)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys() {</span><span class="s3">\n      </span><span class="s1">const expression =</span><span class="s3">\n        </span><span class="s1">'`{...searchParams}`, `Object.keys(searchParams)`, or similar'</span><span class="s3">\n      </span><span class="s1">if (workStore.dynamicShouldError) {</span><span class="s3">\n        </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">expression</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} else if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n        </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n        </span><span class="s1">postponeWithTracking(</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">expression,</span><span class="s3">\n          </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Legacy Prerender</span><span class="s3">\n        </span><span class="s1">throwToInterruptStaticGeneration(expression, workStore, prerenderStore)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedSearchParams.set(workStore, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This is a variation of `makeErroringExoticSearchParams` that always throws an</span><span class="s3">\n </span><span class="s1">* error on access, because accessing searchParams inside of `</span><span class="s3">\&quot;</span><span class="s1">use cache</span><span class="s3">\&quot;</span><span class="s1">` is</span><span class="s3">\n </span><span class="s1">* not allowed.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function makeErroringSearchParamsForUseCache(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParamsForUseCache.get(workStore)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const promise = Promise.resolve({})</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get: function get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (Object.hasOwn(promise, prop)) {</span><span class="s3">\n        </span><span class="s1">// The promise has this property directly. we must return it. We know it</span><span class="s3">\n        </span><span class="s1">// isn't a dynamic access because it can only be something that was</span><span class="s3">\n        </span><span class="s1">// previously written to the promise and thus not an underlying</span><span class="s3">\n        </span><span class="s1">// searchParam value</span><span class="s3">\n        </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">typeof prop === 'string' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(prop === 'then' || !wellKnownProperties.has(prop))</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">throwForSearchParamsAccessInUseCache(workStore, get)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">has: function has(target, prop) {</span><span class="s3">\n      </span><span class="s1">// We don't expect key checking to be used except for testing the existence of</span><span class="s3">\n      </span><span class="s1">// searchParams so we make all has tests throw an error. this means that `promise.then`</span><span class="s3">\n      </span><span class="s1">// can resolve to the then function on the Promise prototype but 'then' in promise will assume</span><span class="s3">\n      </span><span class="s1">// you are testing whether the searchParams has a 'then' property.</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">typeof prop === 'string' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(prop === 'then' || !wellKnownProperties.has(prop))</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">throwForSearchParamsAccessInUseCache(workStore, has)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return ReflectAdapter.has(target, prop)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys: function ownKeys() {</span><span class="s3">\n      </span><span class="s1">throwForSearchParamsAccessInUseCache(workStore, ownKeys)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedSearchParamsForUseCache.set(workStore, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeUntrackedExoticSearchParams(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because searchParams</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = Promise.resolve(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">CachedSearchParams.set(underlyingSearchParams, promise)</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingSearchParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (!wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n        </span><span class="s1">get() {</span><span class="s3">\n          </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n          </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n            </span><span class="s1">trackDynamicDataInDynamicRender(workUnitStore)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return underlyingSearchParams[prop]</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">set(value) {</span><span class="s3">\n          </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n            </span><span class="s1">value,</span><span class="s3">\n            </span><span class="s1">writable: true,</span><span class="s3">\n            </span><span class="s1">enumerable: true,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">enumerable: true,</span><span class="s3">\n        </span><span class="s1">configurable: true,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeUntrackedSearchParams(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const promise = Promise.resolve(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">CachedSearchParams.set(underlyingSearchParams, promise)</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeDynamicallyTrackedExoticSearchParamsWithDevWarnings(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">store: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const proxiedProperties = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">const unproxiedProperties: Array&lt;string&gt; = []</span><span class="s3">\n\n  </span><span class="s1">// We have an unfortunate sequence of events that requires this initialization logic. We want to instrument the underlying</span><span class="s3">\n  </span><span class="s1">// searchParams object to detect if you are accessing values in dev. This is used for warnings and for things like the static prerender</span><span class="s3">\n  </span><span class="s1">// indicator. However when we pass this proxy to our Promise.resolve() below the VM checks if the resolved value is a promise by looking</span><span class="s3">\n  </span><span class="s1">// at the `.then` property. To our dynamic tracking logic this is indistinguishable from a `then` searchParam and so we would normally trigger</span><span class="s3">\n  </span><span class="s1">// dynamic tracking. However we know that this .then is not real dynamic access, it's just how thenables resolve in sequence. So we introduce</span><span class="s3">\n  </span><span class="s1">// this initialization concept so we omit the dynamic check until after we've constructed our resolved promise.</span><span class="s3">\n  </span><span class="s1">let promiseInitialized = false</span><span class="s3">\n  </span><span class="s1">const proxiedUnderlying = new Proxy(underlyingSearchParams, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string' &amp;&amp; promiseInitialized) {</span><span class="s3">\n        </span><span class="s1">if (store.dynamicShouldError) {</span><span class="s3">\n          </span><span class="s1">const expression = describeStringPropertyAccess('searchParams', prop)</span><span class="s3">\n          </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n            </span><span class="s1">store.route,</span><span class="s3">\n            </span><span class="s1">expression</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n        </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n          </span><span class="s1">trackDynamicDataInDynamicRender(workUnitStore)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">has(target, prop) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (store.dynamicShouldError) {</span><span class="s3">\n          </span><span class="s1">const expression = describeHasCheckingStringProperty(</span><span class="s3">\n            </span><span class="s1">'searchParams',</span><span class="s3">\n            </span><span class="s1">prop</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n            </span><span class="s1">store.route,</span><span class="s3">\n            </span><span class="s1">expression</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.has(target, prop)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys(target) {</span><span class="s3">\n      </span><span class="s1">if (store.dynamicShouldError) {</span><span class="s3">\n        </span><span class="s1">const expression =</span><span class="s3">\n          </span><span class="s1">'`{...searchParams}`, `Object.keys(searchParams)`, or similar'</span><span class="s3">\n        </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n          </span><span class="s1">store.route,</span><span class="s3">\n          </span><span class="s1">expression</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.ownKeys(target)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because searchParams</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = makeDevtoolsIOAwarePromise(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">promise.then(() =&gt; {</span><span class="s3">\n    </span><span class="s1">promiseInitialized = true</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingSearchParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n      </span><span class="s1">unproxiedProperties.push(prop)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">proxiedProperties.add(prop)</span><span class="s3">\n      </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n        </span><span class="s1">get() {</span><span class="s3">\n          </span><span class="s1">return proxiedUnderlying[prop]</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">set(newValue) {</span><span class="s3">\n          </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n            </span><span class="s1">value: newValue,</span><span class="s3">\n            </span><span class="s1">writable: true,</span><span class="s3">\n            </span><span class="s1">enumerable: true,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">enumerable: true,</span><span class="s3">\n        </span><span class="s1">configurable: true,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (prop === 'then' &amp;&amp; store.dynamicShouldError) {</span><span class="s3">\n        </span><span class="s1">const expression = '`searchParams.then`'</span><span class="s3">\n        </span><span class="s1">throwWithStaticGenerationBailoutErrorWithDynamicError(</span><span class="s3">\n          </span><span class="s1">store.route,</span><span class="s3">\n          </span><span class="s1">expression</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!wellKnownProperties.has(prop) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(proxiedProperties.has(prop) ||</span><span class="s3">\n            </span><span class="s1">// We are accessing a property that doesn't exist on the promise nor</span><span class="s3">\n            </span><span class="s1">// the underlying searchParams.</span><span class="s3">\n            </span><span class="s1">Reflect.has(target, prop) === false)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeStringPropertyAccess('searchParams', prop)</span><span class="s3">\n          </span><span class="s1">syncIODev(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">set(target, prop, value, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">proxiedProperties.delete(prop)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.set(target, prop, value, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">has(target, prop) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!wellKnownProperties.has(prop) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(proxiedProperties.has(prop) ||</span><span class="s3">\n            </span><span class="s1">// We are accessing a property that doesn't exist on the promise nor</span><span class="s3">\n            </span><span class="s1">// the underlying searchParams.</span><span class="s3">\n            </span><span class="s1">Reflect.has(target, prop) === false)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeHasCheckingStringProperty(</span><span class="s3">\n            </span><span class="s1">'searchParams',</span><span class="s3">\n            </span><span class="s1">prop</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">syncIODev(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.has(target, prop)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys(target) {</span><span class="s3">\n      </span><span class="s1">const expression = '`Object.keys(searchParams)` or similar'</span><span class="s3">\n      </span><span class="s1">syncIODev(store.route, expression, unproxiedProperties)</span><span class="s3">\n      </span><span class="s1">return Reflect.ownKeys(target)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedSearchParams.set(underlyingSearchParams, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Similar to `makeDynamicallyTrackedExoticSearchParamsWithDevWarnings`, but</span><span class="s3">\n</span><span class="s1">// just logging the sync access without actually defining the search params on</span><span class="s3">\n</span><span class="s1">// the promise.</span><span class="s3">\n</span><span class="s1">function makeUntrackedSearchParamsWithDevWarnings(</span><span class="s3">\n  </span><span class="s1">underlyingSearchParams: SearchParams,</span><span class="s3">\n  </span><span class="s1">store: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;SearchParams&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)</span><span class="s3">\n  </span><span class="s1">if (cachedSearchParams) {</span><span class="s3">\n    </span><span class="s1">return cachedSearchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const proxiedProperties = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">const unproxiedProperties: Array&lt;string&gt; = []</span><span class="s3">\n  </span><span class="s1">const promise = makeDevtoolsIOAwarePromise(underlyingSearchParams)</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingSearchParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n      </span><span class="s1">unproxiedProperties.push(prop)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">proxiedProperties.add(prop)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!wellKnownProperties.has(prop) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(proxiedProperties.has(prop) ||</span><span class="s3">\n            </span><span class="s1">// We are accessing a property that doesn't exist on the promise nor</span><span class="s3">\n            </span><span class="s1">// the underlying searchParams.</span><span class="s3">\n            </span><span class="s1">Reflect.has(target, prop) === false)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeStringPropertyAccess('searchParams', prop)</span><span class="s3">\n          </span><span class="s1">warnForSyncAccess(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">set(target, prop, value, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">proxiedProperties.delete(prop)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.set(target, prop, value, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">has(target, prop) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!wellKnownProperties.has(prop) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(proxiedProperties.has(prop) ||</span><span class="s3">\n            </span><span class="s1">// We are accessing a property that doesn't exist on the promise nor</span><span class="s3">\n            </span><span class="s1">// the underlying searchParams.</span><span class="s3">\n            </span><span class="s1">Reflect.has(target, prop) === false)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeHasCheckingStringProperty(</span><span class="s3">\n            </span><span class="s1">'searchParams',</span><span class="s3">\n            </span><span class="s1">prop</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">warnForSyncAccess(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return Reflect.has(target, prop)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys(target) {</span><span class="s3">\n      </span><span class="s1">const expression = '`Object.keys(searchParams)` or similar'</span><span class="s3">\n      </span><span class="s1">warnForIncompleteEnumeration(store.route, expression, unproxiedProperties)</span><span class="s3">\n      </span><span class="s1">return Reflect.ownKeys(target)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedSearchParams.set(underlyingSearchParams, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function syncIODev(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">missingProperties?: Array&lt;string&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// In all cases we warn normally</span><span class="s3">\n  </span><span class="s1">if (missingProperties &amp;&amp; missingProperties.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">warnForIncompleteEnumeration(route, expression, missingProperties)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">warnForSyncAccess(route, expression)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (workUnitStore.prerenderPhase === true) {</span><span class="s3">\n          </span><span class="s1">// When we're rendering dynamically in dev, we need to advance out of</span><span class="s3">\n          </span><span class="s1">// the Prerender environment when we read Request data synchronously.</span><span class="s3">\n          </span><span class="s1">trackSynchronousRequestDataAccessInDev(workUnitStore)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const warnForSyncAccess = createDedupedByCallsiteServerErrorLoggerDev(</span><span class="s3">\n  </span><span class="s1">createSearchAccessError</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">const warnForIncompleteEnumeration =</span><span class="s3">\n  </span><span class="s1">createDedupedByCallsiteServerErrorLoggerDev(createIncompleteEnumerationError)</span><span class="s3">\n\n</span><span class="s1">function createSearchAccessError(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const prefix = route ? `Route </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot; </span><span class="s1">` : 'This route '</span><span class="s3">\n  </span><span class="s1">return new Error(</span><span class="s3">\n    </span><span class="s1">`${prefix}used ${expression}. ` +</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`searchParams</span><span class="s3">\\</span><span class="s1">` should be awaited before using its properties. ` +</span><span class="s3">\n      </span><span class="s1">`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createIncompleteEnumerationError(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">missingProperties: Array&lt;string&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const prefix = route ? `Route </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot; </span><span class="s1">` : 'This route '</span><span class="s3">\n  </span><span class="s1">return new Error(</span><span class="s3">\n    </span><span class="s1">`${prefix}used ${expression}. ` +</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`searchParams</span><span class="s3">\\</span><span class="s1">` should be awaited before using its properties. ` +</span><span class="s3">\n      </span><span class="s1">`The following properties were not available through enumeration ` +</span><span class="s3">\n      </span><span class="s1">`because they conflict with builtin or well-known property names: ` +</span><span class="s3">\n      </span><span class="s1">`${describeListOfPropertyNames(missingProperties)}. ` +</span><span class="s3">\n      </span><span class="s1">`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function describeListOfPropertyNames(properties: Array&lt;string&gt;) {</span><span class="s3">\n  </span><span class="s1">switch (properties.length) {</span><span class="s3">\n    </span><span class="s1">case 0:</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">'Expected describeListOfPropertyNames to be called with a non-empty list of strings.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">case 1:</span><span class="s3">\n      </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${properties[0]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n    </span><span class="s1">case 2:</span><span class="s3">\n      </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${properties[0]}</span><span class="s3">\\</span><span class="s1">` and </span><span class="s3">\\</span><span class="s1">`${properties[1]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n    </span><span class="s1">default: {</span><span class="s3">\n      </span><span class="s1">let description = ''</span><span class="s3">\n      </span><span class="s1">for (let i = 0; i &lt; properties.length - 1; i++) {</span><span class="s3">\n        </span><span class="s1">description += `</span><span class="s3">\\</span><span class="s1">`${properties[i]}</span><span class="s3">\\</span><span class="s1">`, `</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">description += `, and </span><span class="s3">\\</span><span class="s1">`${properties[properties.length - 1]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n      </span><span class="s1">return description</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ReflectAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;throwToInterruptStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;postponeWithTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;trackDynamicDataInDynamicRender&quot;</span><span class="s0">,</span><span class="s1">&quot;annotateDynamicAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;trackSynchronousRequestDataAccessInDev&quot;</span><span class="s0">,</span><span class="s1">&quot;delayUntilRuntimeStage&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;throwInvariantForMissingStore&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDevtoolsIOAwarePromise&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;createDedupedByCallsiteServerErrorLoggerDev&quot;</span><span class="s0">,</span><span class="s1">&quot;describeStringPropertyAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;describeHasCheckingStringProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;wellKnownProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;throwWithStaticGenerationBailoutErrorWithDynamicError&quot;</span><span class="s0">,</span><span class="s1">&quot;throwForSearchParamsAccessInUseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;createSearchParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;underlyingSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;createStaticPrerenderSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerSearchParamsForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerSearchParamsForServerPage&quot;</span><span class="s0">,</span><span class="s1">&quot;createRuntimePrerenderSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderSearchParamsForClientPage&quot;</span><span class="s0">,</span><span class="s1">&quot;forceStatic&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStore&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringExoticSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_CACHE_COMPONENTS&quot;</span><span class="s0">,</span><span class="s1">&quot;makeUntrackedSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;makeUntrackedExoticSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;makeUntrackedSearchParamsWithDevWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDynamicallyTrackedExoticSearchParamsWithDevWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;CachedSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;CachedSearchParamsForUseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;proxiedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;Proxy&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;receiver&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwn&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicShouldError&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;ownKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringSearchParamsForUseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;enumerable&quot;</span><span class="s0">,</span><span class="s1">&quot;configurable&quot;</span><span class="s0">,</span><span class="s1">&quot;store&quot;</span><span class="s0">,</span><span class="s1">&quot;proxiedProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;unproxiedProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;promiseInitialized&quot;</span><span class="s0">,</span><span class="s1">&quot;proxiedUnderlying&quot;</span><span class="s0">,</span><span class="s1">&quot;Reflect&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;newValue&quot;</span><span class="s0">,</span><span class="s1">&quot;syncIODev&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;warnForSyncAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;warnForIncompleteEnumeration&quot;</span><span class="s0">,</span><span class="s1">&quot;missingProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderPhase&quot;</span><span class="s0">,</span><span class="s1">&quot;createSearchAccessError&quot;</span><span class="s0">,</span><span class="s1">&quot;createIncompleteEnumerationError&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;describeListOfPropertyNames&quot;</span><span class="s0">,</span><span class="s1">&quot;properties&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">6812</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/request/params.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">workAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type WorkStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import type { FallbackRouteParams } from './fallback-params'</span><span class="s3">\n\n</span><span class="s1">import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">throwToInterruptStaticGeneration,</span><span class="s3">\n  </span><span class="s1">postponeWithTracking,</span><span class="s3">\n  </span><span class="s1">trackSynchronousRequestDataAccessInDev,</span><span class="s3">\n  </span><span class="s1">delayUntilRuntimeStage,</span><span class="s3">\n</span><span class="s1">} from '../app-render/dynamic-rendering'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type PrerenderStorePPR,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreLegacy,</span><span class="s3">\n  </span><span class="s1">type StaticPrerenderStoreModern,</span><span class="s3">\n  </span><span class="s1">type StaticPrerenderStore,</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore,</span><span class="s3">\n  </span><span class="s1">type PrerenderStoreModernRuntime,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">describeStringPropertyAccess,</span><span class="s3">\n  </span><span class="s1">wellKnownProperties,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/utils/reflect-utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">makeDevtoolsIOAwarePromise,</span><span class="s3">\n  </span><span class="s1">makeHangingPromise,</span><span class="s3">\n</span><span class="s1">} from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import { createDedupedByCallsiteServerErrorLoggerDev } from '../create-deduped-by-callsite-server-error-logger'</span><span class="s3">\n</span><span class="s1">import { dynamicAccessAsyncStorage } from '../app-render/dynamic-access-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">export type ParamValue = string | Array&lt;string&gt; | undefined</span><span class="s3">\n</span><span class="s1">export type Params = Record&lt;string, ParamValue&gt;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* In this version of Next.js the `params` prop passed to Layouts, Pages, and other Segments is a Promise.</span><span class="s3">\n </span><span class="s1">* However to facilitate migration to this new Promise type you can currently still access params directly on the Promise instance passed to these Segments.</span><span class="s3">\n </span><span class="s1">* The `UnsafeUnwrappedParams` type is available if you need to temporarily access the underlying params without first awaiting or `use`ing the Promise.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* In a future version of Next.js the `params` prop will be a plain Promise and this type will be removed.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Typically instances of `params` can be updated automatically to be treated as a Promise by a codemod published alongside this Next.js version however if you</span><span class="s3">\n </span><span class="s1">* have not yet run the codemod of the codemod cannot detect certain instances of `params` usage you should first try to refactor your code to await `params`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* If refactoring is not possible but you still want to be able to access params directly without typescript errors you can cast the params Promise to this type</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* ```tsx</span><span class="s3">\n </span><span class="s1">* type Props = { params: Promise&lt;{ id: string }&gt;}</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* export default async function Layout(props: Props) {</span><span class="s3">\n </span><span class="s1">*  const directParams = (props.params as unknown as UnsafeUnwrappedParams&lt;typeof props.params&gt;)</span><span class="s3">\n </span><span class="s1">*  return ...</span><span class="s3">\n </span><span class="s1">* }</span><span class="s3">\n </span><span class="s1">* ```</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This type is marked deprecated to help identify it as target for refactoring away.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @deprecated</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type UnsafeUnwrappedParams&lt;P&gt; =</span><span class="s3">\n  </span><span class="s1">P extends Promise&lt;infer U&gt; ? Omit&lt;U, 'then' | 'status' | 'value'&gt; : never</span><span class="s3">\n\n</span><span class="s1">export function createParamsFromClient(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">return createStaticPrerenderParams(</span><span class="s3">\n          </span><span class="s1">underlyingParams,</span><span class="s3">\n          </span><span class="s1">workStore,</span><span class="s3">\n          </span><span class="s1">workUnitStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createParamsFromClient should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createParamsFromClient should not be called in a runtime prerender.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n          </span><span class="s1">// Semantically we only need the dev tracking when running in `next dev`</span><span class="s3">\n          </span><span class="s1">// but since you would never use next dev with production NODE_ENV we use this</span><span class="s3">\n          </span><span class="s1">// as a proxy so we can statically exclude this code from production builds.</span><span class="s3">\n          </span><span class="s1">const devFallbackParams = workUnitStore.devFallbackParams</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInDev(</span><span class="s3">\n            </span><span class="s1">underlyingParams,</span><span class="s3">\n            </span><span class="s1">devFallbackParams,</span><span class="s3">\n            </span><span class="s1">workStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInProd(underlyingParams)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// generateMetadata always runs in RSC context so it is equivalent to a Server Page Component</span><span class="s3">\n</span><span class="s1">export type CreateServerParamsForMetadata = typeof createServerParamsForMetadata</span><span class="s3">\n</span><span class="s1">export const createServerParamsForMetadata = createServerParamsForServerSegment</span><span class="s3">\n\n</span><span class="s1">// routes always runs in RSC context so it is equivalent to a Server Page Component</span><span class="s3">\n</span><span class="s1">export function createServerParamsForRoute(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">return createStaticPrerenderParams(</span><span class="s3">\n          </span><span class="s1">underlyingParams,</span><span class="s3">\n          </span><span class="s1">workStore,</span><span class="s3">\n          </span><span class="s1">workUnitStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createServerParamsForRoute should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">return createRuntimePrerenderParams(underlyingParams, workUnitStore)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n          </span><span class="s1">// Semantically we only need the dev tracking when running in `next dev`</span><span class="s3">\n          </span><span class="s1">// but since you would never use next dev with production NODE_ENV we use this</span><span class="s3">\n          </span><span class="s1">// as a proxy so we can statically exclude this code from production builds.</span><span class="s3">\n          </span><span class="s1">const devFallbackParams = workUnitStore.devFallbackParams</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInDev(</span><span class="s3">\n            </span><span class="s1">underlyingParams,</span><span class="s3">\n            </span><span class="s1">devFallbackParams,</span><span class="s3">\n            </span><span class="s1">workStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInProd(underlyingParams)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createServerParamsForServerSegment(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n        </span><span class="s1">return createStaticPrerenderParams(</span><span class="s3">\n          </span><span class="s1">underlyingParams,</span><span class="s3">\n          </span><span class="s1">workStore,</span><span class="s3">\n          </span><span class="s1">workUnitStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createServerParamsForServerSegment should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">return createRuntimePrerenderParams(underlyingParams, workUnitStore)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n          </span><span class="s1">// Semantically we only need the dev tracking when running in `next dev`</span><span class="s3">\n          </span><span class="s1">// but since you would never use next dev with production NODE_ENV we use this</span><span class="s3">\n          </span><span class="s1">// as a proxy so we can statically exclude this code from production builds.</span><span class="s3">\n          </span><span class="s1">const devFallbackParams = workUnitStore.devFallbackParams</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInDev(</span><span class="s3">\n            </span><span class="s1">underlyingParams,</span><span class="s3">\n            </span><span class="s1">devFallbackParams,</span><span class="s3">\n            </span><span class="s1">workStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return createRenderParamsInProd(underlyingParams)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createPrerenderParamsForClientSegment(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const workStore = workAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (!workStore) {</span><span class="s3">\n    </span><span class="s1">throw new InvariantError(</span><span class="s3">\n      </span><span class="s1">'Missing workStore in createPrerenderParamsForClientSegment'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n        </span><span class="s1">const fallbackParams = workUnitStore.fallbackRouteParams</span><span class="s3">\n        </span><span class="s1">if (fallbackParams) {</span><span class="s3">\n          </span><span class="s1">for (let key in underlyingParams) {</span><span class="s3">\n            </span><span class="s1">if (fallbackParams.has(key)) {</span><span class="s3">\n              </span><span class="s1">// This params object has one or more fallback params, so we need</span><span class="s3">\n              </span><span class="s1">// to consider the awaiting of this params object </span><span class="s3">\&quot;</span><span class="s1">dynamic</span><span class="s3">\&quot;</span><span class="s1">. Since</span><span class="s3">\n              </span><span class="s1">// we are in cacheComponents mode we encode this as a promise that never</span><span class="s3">\n              </span><span class="s1">// resolves.</span><span class="s3">\n              </span><span class="s1">return makeHangingPromise(</span><span class="s3">\n                </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">'`params`'</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createPrerenderParamsForClientSegment should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// We're prerendering in a mode that does not abort. We resolve the promise without</span><span class="s3">\n  </span><span class="s1">// any tracking because we're just transporting a value from server to client where the tracking</span><span class="s3">\n  </span><span class="s1">// will be applied.</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(underlyingParams)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createStaticPrerenderParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender':</span><span class="s3">\n    </span><span class="s1">case 'prerender-client': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams) {</span><span class="s3">\n        </span><span class="s1">for (const key in underlyingParams) {</span><span class="s3">\n          </span><span class="s1">if (fallbackParams.has(key)) {</span><span class="s3">\n            </span><span class="s1">// This params object has one or more fallback params, so we need</span><span class="s3">\n            </span><span class="s1">// to consider the awaiting of this params object </span><span class="s3">\&quot;</span><span class="s1">dynamic</span><span class="s3">\&quot;</span><span class="s1">. Since</span><span class="s3">\n            </span><span class="s1">// we are in cacheComponents mode we encode this as a promise that never</span><span class="s3">\n            </span><span class="s1">// resolves.</span><span class="s3">\n            </span><span class="s1">return makeHangingParams(</span><span class="s3">\n              </span><span class="s1">underlyingParams,</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">prerenderStore</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams) {</span><span class="s3">\n        </span><span class="s1">for (const key in underlyingParams) {</span><span class="s3">\n          </span><span class="s1">if (fallbackParams.has(key)) {</span><span class="s3">\n            </span><span class="s1">return makeErroringExoticParams(</span><span class="s3">\n              </span><span class="s1">underlyingParams,</span><span class="s3">\n              </span><span class="s1">fallbackParams,</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">prerenderStore</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">prerenderStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (process.env.__NEXT_CACHE_COMPONENTS) {</span><span class="s3">\n    </span><span class="s1">return makeUntrackedParams(underlyingParams)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return makeUntrackedExoticParams(underlyingParams)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRuntimePrerenderParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workUnitStore: PrerenderStoreModernRuntime</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">return delayUntilRuntimeStage(</span><span class="s3">\n    </span><span class="s1">workUnitStore,</span><span class="s3">\n    </span><span class="s1">process.env.__NEXT_CACHE_COMPONENTS</span><span class="s3">\n      </span><span class="s1">? makeUntrackedParams(underlyingParams)</span><span class="s3">\n      </span><span class="s1">: makeUntrackedExoticParams(underlyingParams)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRenderParamsInProd(underlyingParams: Params): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">if (process.env.__NEXT_CACHE_COMPONENTS) {</span><span class="s3">\n    </span><span class="s1">return makeUntrackedParams(underlyingParams)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return makeUntrackedExoticParams(underlyingParams)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRenderParamsInDev(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">devFallbackParams: FallbackRouteParams | null | undefined,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">let hasFallbackParams = false</span><span class="s3">\n  </span><span class="s1">if (devFallbackParams) {</span><span class="s3">\n    </span><span class="s1">for (let key in underlyingParams) {</span><span class="s3">\n      </span><span class="s1">if (devFallbackParams.has(key)) {</span><span class="s3">\n        </span><span class="s1">hasFallbackParams = true</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (process.env.__NEXT_CACHE_COMPONENTS) {</span><span class="s3">\n    </span><span class="s1">return makeDynamicallyTrackedParamsWithDevWarnings(</span><span class="s3">\n      </span><span class="s1">underlyingParams,</span><span class="s3">\n      </span><span class="s1">hasFallbackParams,</span><span class="s3">\n      </span><span class="s1">workStore</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return makeDynamicallyTrackedExoticParamsWithDevWarnings(</span><span class="s3">\n    </span><span class="s1">underlyingParams,</span><span class="s3">\n    </span><span class="s1">hasFallbackParams,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface CacheLifetime {}</span><span class="s3">\n</span><span class="s1">const CachedParams = new WeakMap&lt;CacheLifetime, Promise&lt;Params&gt;&gt;()</span><span class="s3">\n\n</span><span class="s1">const fallbackParamsProxyHandler: ProxyHandler&lt;Promise&lt;Params&gt;&gt; = {</span><span class="s3">\n  </span><span class="s1">get: function get(target, prop, receiver) {</span><span class="s3">\n    </span><span class="s1">if (prop === 'then' || prop === 'catch' || prop === 'finally') {</span><span class="s3">\n      </span><span class="s1">const originalMethod = ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">[prop]: (...args: unknown[]) =&gt; {</span><span class="s3">\n          </span><span class="s1">const store = dynamicAccessAsyncStorage.getStore()</span><span class="s3">\n\n          </span><span class="s1">if (store) {</span><span class="s3">\n            </span><span class="s1">store.abortController.abort(</span><span class="s3">\n              </span><span class="s1">new Error(`Accessed fallback </span><span class="s3">\\</span><span class="s1">`params</span><span class="s3">\\</span><span class="s1">` during prerendering.`)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return new Proxy(</span><span class="s3">\n            </span><span class="s1">originalMethod.apply(target, args),</span><span class="s3">\n            </span><span class="s1">fallbackParamsProxyHandler</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">}[prop]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeHangingParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStoreModern</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const promise = new Proxy(</span><span class="s3">\n    </span><span class="s1">makeHangingPromise&lt;Params&gt;(</span><span class="s3">\n      </span><span class="s1">prerenderStore.renderSignal,</span><span class="s3">\n      </span><span class="s1">workStore.route,</span><span class="s3">\n      </span><span class="s1">'`params`'</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">fallbackParamsProxyHandler</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeErroringExoticParams(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">fallbackParams: FallbackRouteParams,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: PrerenderStorePPR | PrerenderStoreLegacy</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const augmentedUnderlying = { ...underlyingParams }</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because params</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = Promise.resolve(augmentedUnderlying)</span><span class="s3">\n  </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (fallbackParams.has(prop)) {</span><span class="s3">\n        </span><span class="s1">Object.defineProperty(augmentedUnderlying, prop, {</span><span class="s3">\n          </span><span class="s1">get() {</span><span class="s3">\n            </span><span class="s1">const expression = describeStringPropertyAccess('params', prop)</span><span class="s3">\n            </span><span class="s1">// In most dynamic APIs we also throw if `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` however</span><span class="s3">\n            </span><span class="s1">// for params is only dynamic when we're generating a fallback shell</span><span class="s3">\n            </span><span class="s1">// and even when `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` we still support generating dynamic</span><span class="s3">\n            </span><span class="s1">// fallback shells</span><span class="s3">\n            </span><span class="s1">// TODO remove this comment when cacheComponents is the default since there</span><span class="s3">\n            </span><span class="s1">// will be no `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n            </span><span class="s1">if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n              </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n              </span><span class="s1">postponeWithTracking(</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">// Legacy Prerender</span><span class="s3">\n              </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">workStore,</span><span class="s3">\n                </span><span class="s1">prerenderStore</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">enumerable: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n          </span><span class="s1">get() {</span><span class="s3">\n            </span><span class="s1">const expression = describeStringPropertyAccess('params', prop)</span><span class="s3">\n            </span><span class="s1">// In most dynamic APIs we also throw if `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` however</span><span class="s3">\n            </span><span class="s1">// for params is only dynamic when we're generating a fallback shell</span><span class="s3">\n            </span><span class="s1">// and even when `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">` we still support generating dynamic</span><span class="s3">\n            </span><span class="s1">// fallback shells</span><span class="s3">\n            </span><span class="s1">// TODO remove this comment when cacheComponents is the default since there</span><span class="s3">\n            </span><span class="s1">// will be no `dynamic = </span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n            </span><span class="s1">if (prerenderStore.type === 'prerender-ppr') {</span><span class="s3">\n              </span><span class="s1">// PPR Prerender (no cacheComponents)</span><span class="s3">\n              </span><span class="s1">postponeWithTracking(</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">prerenderStore.dynamicTracking</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">// Legacy Prerender</span><span class="s3">\n              </span><span class="s1">throwToInterruptStaticGeneration(</span><span class="s3">\n                </span><span class="s1">expression,</span><span class="s3">\n                </span><span class="s1">workStore,</span><span class="s3">\n                </span><span class="s1">prerenderStore</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">set(newValue) {</span><span class="s3">\n            </span><span class="s1">Object.defineProperty(promise, prop, {</span><span class="s3">\n              </span><span class="s1">value: newValue,</span><span class="s3">\n              </span><span class="s1">writable: true,</span><span class="s3">\n              </span><span class="s1">enumerable: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">enumerable: true,</span><span class="s3">\n          </span><span class="s1">configurable: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">;(promise as any)[prop] = underlyingParams[prop]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeUntrackedExoticParams(underlyingParams: Params): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because params</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = Promise.resolve(underlyingParams)</span><span class="s3">\n  </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">;(promise as any)[prop] = underlyingParams[prop]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeUntrackedParams(underlyingParams: Params): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const promise = Promise.resolve(underlyingParams)</span><span class="s3">\n  </span><span class="s1">CachedParams.set(underlyingParams, promise)</span><span class="s3">\n\n  </span><span class="s1">return promise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeDynamicallyTrackedExoticParamsWithDevWarnings(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">hasFallbackParams: boolean,</span><span class="s3">\n  </span><span class="s1">store: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because params</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = hasFallbackParams</span><span class="s3">\n    </span><span class="s1">? makeDevtoolsIOAwarePromise(underlyingParams)</span><span class="s3">\n    </span><span class="s1">: // We don't want to force an environment transition when this params is not part of the fallback params set</span><span class="s3">\n      </span><span class="s1">Promise.resolve(underlyingParams)</span><span class="s3">\n\n  </span><span class="s1">const proxiedProperties = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">const unproxiedProperties: Array&lt;string&gt; = []</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n      </span><span class="s1">unproxiedProperties.push(prop)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">proxiedProperties.add(prop)</span><span class="s3">\n      </span><span class="s1">;(promise as any)[prop] = underlyingParams[prop]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">// We are accessing a property that was proxied to the promise instance</span><span class="s3">\n          </span><span class="s1">proxiedProperties.has(prop)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeStringPropertyAccess('params', prop)</span><span class="s3">\n          </span><span class="s1">syncIODev(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">set(target, prop, value, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">proxiedProperties.delete(prop)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.set(target, prop, value, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys(target) {</span><span class="s3">\n      </span><span class="s1">const expression = '`...params` or similar expression'</span><span class="s3">\n      </span><span class="s1">syncIODev(store.route, expression, unproxiedProperties)</span><span class="s3">\n      </span><span class="s1">return Reflect.ownKeys(target)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedParams.set(underlyingParams, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Similar to `makeDynamicallyTrackedExoticParamsWithDevWarnings`, but just</span><span class="s3">\n</span><span class="s1">// logging the sync access without actually defining the params on the promise.</span><span class="s3">\n</span><span class="s1">function makeDynamicallyTrackedParamsWithDevWarnings(</span><span class="s3">\n  </span><span class="s1">underlyingParams: Params,</span><span class="s3">\n  </span><span class="s1">hasFallbackParams: boolean,</span><span class="s3">\n  </span><span class="s1">store: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;Params&gt; {</span><span class="s3">\n  </span><span class="s1">const cachedParams = CachedParams.get(underlyingParams)</span><span class="s3">\n  </span><span class="s1">if (cachedParams) {</span><span class="s3">\n    </span><span class="s1">return cachedParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't use makeResolvedReactPromise here because params</span><span class="s3">\n  </span><span class="s1">// supports copying with spread and we don't want to unnecessarily</span><span class="s3">\n  </span><span class="s1">// instrument the promise with spreadable properties of ReactPromise.</span><span class="s3">\n  </span><span class="s1">const promise = hasFallbackParams</span><span class="s3">\n    </span><span class="s1">? makeDevtoolsIOAwarePromise(underlyingParams)</span><span class="s3">\n    </span><span class="s1">: // We don't want to force an environment transition when this params is not part of the fallback params set</span><span class="s3">\n      </span><span class="s1">Promise.resolve(underlyingParams)</span><span class="s3">\n\n  </span><span class="s1">const proxiedProperties = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">const unproxiedProperties: Array&lt;string&gt; = []</span><span class="s3">\n\n  </span><span class="s1">Object.keys(underlyingParams).forEach((prop) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (wellKnownProperties.has(prop)) {</span><span class="s3">\n      </span><span class="s1">// These properties cannot be shadowed because they need to be the</span><span class="s3">\n      </span><span class="s1">// true underlying value for Promises to work correctly at runtime</span><span class="s3">\n      </span><span class="s1">unproxiedProperties.push(prop)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">proxiedProperties.add(prop)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const proxiedPromise = new Proxy(promise, {</span><span class="s3">\n    </span><span class="s1">get(target, prop, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">// We are accessing a property that was proxied to the promise instance</span><span class="s3">\n          </span><span class="s1">proxiedProperties.has(prop)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const expression = describeStringPropertyAccess('params', prop)</span><span class="s3">\n          </span><span class="s1">warnForSyncAccess(store.route, expression)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.get(target, prop, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">set(target, prop, value, receiver) {</span><span class="s3">\n      </span><span class="s1">if (typeof prop === 'string') {</span><span class="s3">\n        </span><span class="s1">proxiedProperties.delete(prop)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return ReflectAdapter.set(target, prop, value, receiver)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">ownKeys(target) {</span><span class="s3">\n      </span><span class="s1">const expression = '`...params` or similar expression'</span><span class="s3">\n      </span><span class="s1">warnForIncompleteEnumeration(store.route, expression, unproxiedProperties)</span><span class="s3">\n      </span><span class="s1">return Reflect.ownKeys(target)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">CachedParams.set(underlyingParams, proxiedPromise)</span><span class="s3">\n  </span><span class="s1">return proxiedPromise</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function syncIODev(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">missingProperties?: Array&lt;string&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">if (workUnitStore.prerenderPhase === true) {</span><span class="s3">\n          </span><span class="s1">// When we're rendering dynamically in dev, we need to advance out of</span><span class="s3">\n          </span><span class="s1">// the Prerender environment when we read Request data synchronously.</span><span class="s3">\n          </span><span class="s1">trackSynchronousRequestDataAccessInDev(workUnitStore)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// In all cases we warn normally</span><span class="s3">\n  </span><span class="s1">if (missingProperties &amp;&amp; missingProperties.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">warnForIncompleteEnumeration(route, expression, missingProperties)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">warnForSyncAccess(route, expression)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const warnForSyncAccess = createDedupedByCallsiteServerErrorLoggerDev(</span><span class="s3">\n  </span><span class="s1">createParamsAccessError</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">const warnForIncompleteEnumeration =</span><span class="s3">\n  </span><span class="s1">createDedupedByCallsiteServerErrorLoggerDev(createIncompleteEnumerationError)</span><span class="s3">\n\n</span><span class="s1">function createParamsAccessError(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const prefix = route ? `Route </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot; </span><span class="s1">` : 'This route '</span><span class="s3">\n  </span><span class="s1">return new Error(</span><span class="s3">\n    </span><span class="s1">`${prefix}used ${expression}. ` +</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`params</span><span class="s3">\\</span><span class="s1">` should be awaited before using its properties. ` +</span><span class="s3">\n      </span><span class="s1">`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createIncompleteEnumerationError(</span><span class="s3">\n  </span><span class="s1">route: string | undefined,</span><span class="s3">\n  </span><span class="s1">expression: string,</span><span class="s3">\n  </span><span class="s1">missingProperties: Array&lt;string&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const prefix = route ? `Route </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot; </span><span class="s1">` : 'This route '</span><span class="s3">\n  </span><span class="s1">return new Error(</span><span class="s3">\n    </span><span class="s1">`${prefix}used ${expression}. ` +</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`params</span><span class="s3">\\</span><span class="s1">` should be awaited before using its properties. ` +</span><span class="s3">\n      </span><span class="s1">`The following properties were not available through enumeration ` +</span><span class="s3">\n      </span><span class="s1">`because they conflict with builtin property names: ` +</span><span class="s3">\n      </span><span class="s1">`${describeListOfPropertyNames(missingProperties)}. ` +</span><span class="s3">\n      </span><span class="s1">`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function describeListOfPropertyNames(properties: Array&lt;string&gt;) {</span><span class="s3">\n  </span><span class="s1">switch (properties.length) {</span><span class="s3">\n    </span><span class="s1">case 0:</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">'Expected describeListOfPropertyNames to be called with a non-empty list of strings.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">case 1:</span><span class="s3">\n      </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${properties[0]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n    </span><span class="s1">case 2:</span><span class="s3">\n      </span><span class="s1">return `</span><span class="s3">\\</span><span class="s1">`${properties[0]}</span><span class="s3">\\</span><span class="s1">` and </span><span class="s3">\\</span><span class="s1">`${properties[1]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n    </span><span class="s1">default: {</span><span class="s3">\n      </span><span class="s1">let description = ''</span><span class="s3">\n      </span><span class="s1">for (let i = 0; i &lt; properties.length - 1; i++) {</span><span class="s3">\n        </span><span class="s1">description += `</span><span class="s3">\\</span><span class="s1">`${properties[i]}</span><span class="s3">\\</span><span class="s1">`, `</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">description += `, and </span><span class="s3">\\</span><span class="s1">`${properties[properties.length - 1]}</span><span class="s3">\\</span><span class="s1">``</span><span class="s3">\n      </span><span class="s1">return description</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;ReflectAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;throwToInterruptStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;postponeWithTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;trackSynchronousRequestDataAccessInDev&quot;</span><span class="s0">,</span><span class="s1">&quot;delayUntilRuntimeStage&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;throwInvariantForMissingStore&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;describeStringPropertyAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;wellKnownProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDevtoolsIOAwarePromise&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;createDedupedByCallsiteServerErrorLoggerDev&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicAccessAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;createParamsFromClient&quot;</span><span class="s0">,</span><span class="s1">&quot;underlyingParams&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;createStaticPrerenderParams&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;devFallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderParamsInDev&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderParamsInProd&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerParamsForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerParamsForServerSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerParamsForRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;createRuntimePrerenderParams&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderParamsForClientSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStore&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingParams&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringExoticParams&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_CACHE_COMPONENTS&quot;</span><span class="s0">,</span><span class="s1">&quot;makeUntrackedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;makeUntrackedExoticParams&quot;</span><span class="s0">,</span><span class="s1">&quot;hasFallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDynamicallyTrackedParamsWithDevWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDynamicallyTrackedExoticParamsWithDevWarnings&quot;</span><span class="s0">,</span><span class="s1">&quot;CachedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackParamsProxyHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;prop&quot;</span><span class="s0">,</span><span class="s1">&quot;receiver&quot;</span><span class="s0">,</span><span class="s1">&quot;originalMethod&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;store&quot;</span><span class="s0">,</span><span class="s1">&quot;abortController&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;Proxy&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;augmentedUnderlying&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;expression&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;enumerable&quot;</span><span class="s0">,</span><span class="s1">&quot;newValue&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;configurable&quot;</span><span class="s0">,</span><span class="s1">&quot;proxiedProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;unproxiedProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;proxiedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;syncIODev&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;ownKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;Reflect&quot;</span><span class="s0">,</span><span class="s1">&quot;warnForSyncAccess&quot;</span><span class="s0">,</span><span class="s1">&quot;warnForIncompleteEnumeration&quot;</span><span class="s0">,</span><span class="s1">&quot;missingProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderPhase&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;createParamsAccessError&quot;</span><span class="s0">,</span><span class="s1">&quot;createIncompleteEnumerationError&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;describeListOfPropertyNames&quot;</span><span class="s0">,</span><span class="s1">&quot;properties&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7364</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7370</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7377</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/http-access-fallback/error-boundary.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* HTTPAccessFallbackBoundary is a boundary that catches errors and renders a</span><span class="s3">\n </span><span class="s1">* fallback component for HTTP errors.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* It receives the status code, and determine if it should render fallbacks for few HTTP 4xx errors.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* e.g. 404</span><span class="s3">\n </span><span class="s1">* 404 represents not found, and the fallback component pair contains the component and its styles.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import React, { useContext } from 'react'</span><span class="s3">\n</span><span class="s1">import { useUntrackedPathname } from '../navigation-untracked'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">HTTPAccessErrorStatus,</span><span class="s3">\n  </span><span class="s1">getAccessFallbackHTTPStatus,</span><span class="s3">\n  </span><span class="s1">getAccessFallbackErrorTypeByStatus,</span><span class="s3">\n  </span><span class="s1">isHTTPAccessFallbackError,</span><span class="s3">\n</span><span class="s1">} from './http-access-fallback'</span><span class="s3">\n</span><span class="s1">import { warnOnce } from '../../../shared/lib/utils/warn-once'</span><span class="s3">\n</span><span class="s1">import { MissingSlotContext } from '../../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n\n</span><span class="s1">interface HTTPAccessFallbackBoundaryProps {</span><span class="s3">\n  </span><span class="s1">notFound?: React.ReactNode</span><span class="s3">\n  </span><span class="s1">forbidden?: React.ReactNode</span><span class="s3">\n  </span><span class="s1">unauthorized?: React.ReactNode</span><span class="s3">\n  </span><span class="s1">children: React.ReactNode</span><span class="s3">\n  </span><span class="s1">missingSlots?: Set&lt;string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface HTTPAccessFallbackErrorBoundaryProps</span><span class="s3">\n  </span><span class="s1">extends HTTPAccessFallbackBoundaryProps {</span><span class="s3">\n  </span><span class="s1">pathname: string | null</span><span class="s3">\n  </span><span class="s1">missingSlots?: Set&lt;string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface HTTPAccessBoundaryState {</span><span class="s3">\n  </span><span class="s1">triggeredStatus: number | undefined</span><span class="s3">\n  </span><span class="s1">previousPathname: string | null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">class HTTPAccessFallbackErrorBoundary extends React.Component&lt;</span><span class="s3">\n  </span><span class="s1">HTTPAccessFallbackErrorBoundaryProps,</span><span class="s3">\n  </span><span class="s1">HTTPAccessBoundaryState</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">constructor(props: HTTPAccessFallbackErrorBoundaryProps) {</span><span class="s3">\n    </span><span class="s1">super(props)</span><span class="s3">\n    </span><span class="s1">this.state = {</span><span class="s3">\n      </span><span class="s1">triggeredStatus: undefined,</span><span class="s3">\n      </span><span class="s1">previousPathname: props.pathname,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">componentDidCatch(): void {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">process.env.NODE_ENV === 'development' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">this.props.missingSlots &amp;&amp;</span><span class="s3">\n      </span><span class="s1">this.props.missingSlots.size &gt; 0 &amp;&amp;</span><span class="s3">\n      </span><span class="s1">// A missing children slot is the typical not-found case, so no need to warn</span><span class="s3">\n      </span><span class="s1">!this.props.missingSlots.has('children')</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">let warningMessage =</span><span class="s3">\n        </span><span class="s1">'No default component was found for a parallel route rendered on this page. Falling back to nearest NotFound boundary.</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n        </span><span class="s1">'Learn more: https://nextjs.org/docs/app/building-your-application/routing/parallel-routes#defaultjs</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n\n      </span><span class="s1">const formattedSlots = Array.from(this.props.missingSlots)</span><span class="s3">\n        </span><span class="s1">.sort((a, b) =&gt; a.localeCompare(b))</span><span class="s3">\n        </span><span class="s1">.map((slot) =&gt; `@${slot}`)</span><span class="s3">\n        </span><span class="s1">.join(', ')</span><span class="s3">\n\n      </span><span class="s1">warningMessage += 'Missing slots: ' + formattedSlots</span><span class="s3">\n\n      </span><span class="s1">warnOnce(warningMessage)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static getDerivedStateFromError(error: any) {</span><span class="s3">\n    </span><span class="s1">if (isHTTPAccessFallbackError(error)) {</span><span class="s3">\n      </span><span class="s1">const httpStatus = getAccessFallbackHTTPStatus(error)</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">triggeredStatus: httpStatus,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Re-throw if error is not for 404</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">static getDerivedStateFromProps(</span><span class="s3">\n    </span><span class="s1">props: HTTPAccessFallbackErrorBoundaryProps,</span><span class="s3">\n    </span><span class="s1">state: HTTPAccessBoundaryState</span><span class="s3">\n  </span><span class="s1">): HTTPAccessBoundaryState | null {</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Handles reset of the error boundary when a navigation happens.</span><span class="s3">\n     </span><span class="s1">* Ensures the error boundary does not stay enabled when navigating to a new page.</span><span class="s3">\n     </span><span class="s1">* Approach of setState in render is safe as it checks the previous pathname and then overrides</span><span class="s3">\n     </span><span class="s1">* it as outlined in https://react.dev/reference/react/useState#storing-information-from-previous-renders</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">if (props.pathname !== state.previousPathname &amp;&amp; state.triggeredStatus) {</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">triggeredStatus: undefined,</span><span class="s3">\n        </span><span class="s1">previousPathname: props.pathname,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">triggeredStatus: state.triggeredStatus,</span><span class="s3">\n      </span><span class="s1">previousPathname: props.pathname,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">render() {</span><span class="s3">\n    </span><span class="s1">const { notFound, forbidden, unauthorized, children } = this.props</span><span class="s3">\n    </span><span class="s1">const { triggeredStatus } = this.state</span><span class="s3">\n    </span><span class="s1">const errorComponents = {</span><span class="s3">\n      </span><span class="s1">[HTTPAccessErrorStatus.NOT_FOUND]: notFound,</span><span class="s3">\n      </span><span class="s1">[HTTPAccessErrorStatus.FORBIDDEN]: forbidden,</span><span class="s3">\n      </span><span class="s1">[HTTPAccessErrorStatus.UNAUTHORIZED]: unauthorized,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (triggeredStatus) {</span><span class="s3">\n      </span><span class="s1">const isNotFound =</span><span class="s3">\n        </span><span class="s1">triggeredStatus === HTTPAccessErrorStatus.NOT_FOUND &amp;&amp; notFound</span><span class="s3">\n      </span><span class="s1">const isForbidden =</span><span class="s3">\n        </span><span class="s1">triggeredStatus === HTTPAccessErrorStatus.FORBIDDEN &amp;&amp; forbidden</span><span class="s3">\n      </span><span class="s1">const isUnauthorized =</span><span class="s3">\n        </span><span class="s1">triggeredStatus === HTTPAccessErrorStatus.UNAUTHORIZED &amp;&amp; unauthorized</span><span class="s3">\n\n      </span><span class="s1">// If there's no matched boundary in this layer, keep throwing the error by rendering the children</span><span class="s3">\n      </span><span class="s1">if (!(isNotFound || isForbidden || isUnauthorized)) {</span><span class="s3">\n        </span><span class="s1">return children</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">&lt;&gt;</span><span class="s3">\n          </span><span class="s1">&lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">robots</span><span class="s3">\&quot; </span><span class="s1">content=</span><span class="s3">\&quot;</span><span class="s1">noindex</span><span class="s3">\&quot; </span><span class="s1">/&gt;</span><span class="s3">\n          </span><span class="s1">{process.env.NODE_ENV === 'development' &amp;&amp; (</span><span class="s3">\n            </span><span class="s1">&lt;meta</span><span class="s3">\n              </span><span class="s1">name=</span><span class="s3">\&quot;</span><span class="s1">boundary-next-error</span><span class="s3">\&quot;\n              </span><span class="s1">content={getAccessFallbackErrorTypeByStatus(triggeredStatus)}</span><span class="s3">\n            </span><span class="s1">/&gt;</span><span class="s3">\n          </span><span class="s1">)}</span><span class="s3">\n          </span><span class="s1">{errorComponents[triggeredStatus]}</span><span class="s3">\n        </span><span class="s1">&lt;/&gt;</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return children</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function HTTPAccessFallbackBoundary({</span><span class="s3">\n  </span><span class="s1">notFound,</span><span class="s3">\n  </span><span class="s1">forbidden,</span><span class="s3">\n  </span><span class="s1">unauthorized,</span><span class="s3">\n  </span><span class="s1">children,</span><span class="s3">\n</span><span class="s1">}: HTTPAccessFallbackBoundaryProps) {</span><span class="s3">\n  </span><span class="s1">// When we're rendering the missing params shell, this will return null. This</span><span class="s3">\n  </span><span class="s1">// is because we won't be rendering any not found boundaries or error</span><span class="s3">\n  </span><span class="s1">// boundaries for the missing params shell. When this runs on the client</span><span class="s3">\n  </span><span class="s1">// (where these error can occur), we will get the correct pathname.</span><span class="s3">\n  </span><span class="s1">const pathname = useUntrackedPathname()</span><span class="s3">\n  </span><span class="s1">const missingSlots = useContext(MissingSlotContext)</span><span class="s3">\n  </span><span class="s1">const hasErrorFallback = !!(notFound || forbidden || unauthorized)</span><span class="s3">\n\n  </span><span class="s1">if (hasErrorFallback) {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;HTTPAccessFallbackErrorBoundary</span><span class="s3">\n        </span><span class="s1">pathname={pathname}</span><span class="s3">\n        </span><span class="s1">notFound={notFound}</span><span class="s3">\n        </span><span class="s1">forbidden={forbidden}</span><span class="s3">\n        </span><span class="s1">unauthorized={unauthorized}</span><span class="s3">\n        </span><span class="s1">missingSlots={missingSlots}</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n        </span><span class="s1">{children}</span><span class="s3">\n      </span><span class="s1">&lt;/HTTPAccessFallbackErrorBoundary&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return &lt;&gt;{children}&lt;/&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;useContext&quot;</span><span class="s0">,</span><span class="s1">&quot;useUntrackedPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTPAccessErrorStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;getAccessFallbackHTTPStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;getAccessFallbackErrorTypeByStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;isHTTPAccessFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;MissingSlotContext&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTPAccessFallbackErrorBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;Component&quot;</span><span class="s0">,</span><span class="s1">&quot;componentDidCatch&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;missingSlots&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;warningMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedSlots&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;sort&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;localeCompare&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;slot&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;getDerivedStateFromError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;httpStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;triggeredStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;getDerivedStateFromProps&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;previousPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;render&quot;</span><span class="s0">,</span><span class="s1">&quot;notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;forbidden&quot;</span><span class="s0">,</span><span class="s1">&quot;unauthorized&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;errorComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;NOT_FOUND&quot;</span><span class="s0">,</span><span class="s1">&quot;FORBIDDEN&quot;</span><span class="s0">,</span><span class="s1">&quot;UNAUTHORIZED&quot;</span><span class="s0">,</span><span class="s1">&quot;isNotFound&quot;</span><span class="s0">,</span><span class="s1">&quot;isForbidden&quot;</span><span class="s0">,</span><span class="s1">&quot;isUnauthorized&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTPAccessFallbackBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;hasErrorFallback&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7385</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/vendored/rsc/react-jsx-runtime.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;module.exports = (</span><span class="s3">\n  </span><span class="s1">require('../../module.compiled') as typeof import('../../module.compiled')</span><span class="s3">\n</span><span class="s1">).vendored['react-rsc']!.ReactJsxRuntime</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;vendored&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactJsxRuntime&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,eAAe&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7390</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/non-nullable.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export function nonNullable&lt;T&gt;(value: T): value is NonNullable&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">return value !== null &amp;&amp; value !== undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;nonNullable&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,SAASA,YAAeC,KAAQ;IACrC,OAAOA,UAAU,QAAQA,UAAUC;AACrC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7401</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/meta.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import React from 'react'</span><span class="s3">\n</span><span class="s1">import { nonNullable } from '../../non-nullable'</span><span class="s3">\n\n</span><span class="s1">export function Meta({</span><span class="s3">\n  </span><span class="s1">name,</span><span class="s3">\n  </span><span class="s1">property,</span><span class="s3">\n  </span><span class="s1">content,</span><span class="s3">\n  </span><span class="s1">media,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">name?: string</span><span class="s3">\n  </span><span class="s1">property?: string</span><span class="s3">\n  </span><span class="s1">media?: string</span><span class="s3">\n  </span><span class="s1">content: string | number | URL | null | undefined</span><span class="s3">\n</span><span class="s1">}): React.ReactElement | null {</span><span class="s3">\n  </span><span class="s1">if (typeof content !== 'undefined' &amp;&amp; content !== null &amp;&amp; content !== '') {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;meta</span><span class="s3">\n        </span><span class="s1">{...(name ? { name } : { property })}</span><span class="s3">\n        </span><span class="s1">{...(media ? { media } : undefined)}</span><span class="s3">\n        </span><span class="s1">content={typeof content === 'string' ? content : content.toString()}</span><span class="s3">\n      </span><span class="s1">/&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function MetaFilter&lt;T extends {} | {}[]&gt;(</span><span class="s3">\n  </span><span class="s1">items: (T | null)[]</span><span class="s3">\n</span><span class="s1">): NonNullable&lt;T&gt;[] {</span><span class="s3">\n  </span><span class="s1">const acc: NonNullable&lt;T&gt;[] = []</span><span class="s3">\n  </span><span class="s1">for (const item of items) {</span><span class="s3">\n    </span><span class="s1">if (Array.isArray(item)) {</span><span class="s3">\n      </span><span class="s1">acc.push(...item.filter(nonNullable))</span><span class="s3">\n    </span><span class="s1">} else if (nonNullable(item)) {</span><span class="s3">\n      </span><span class="s1">acc.push(item)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return acc</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ExtendMetaContent = Record&lt;</span><span class="s3">\n  </span><span class="s1">string,</span><span class="s3">\n  </span><span class="s1">undefined | string | URL | number | boolean | null | undefined</span><span class="s3">\n</span><span class="s1">&gt;</span><span class="s3">\n</span><span class="s1">type MultiMetaContent =</span><span class="s3">\n  </span><span class="s1">| (ExtendMetaContent | string | URL | number)[]</span><span class="s3">\n  </span><span class="s1">| null</span><span class="s3">\n  </span><span class="s1">| undefined</span><span class="s3">\n\n</span><span class="s1">function camelToSnake(camelCaseStr: string) {</span><span class="s3">\n  </span><span class="s1">return camelCaseStr.replace(/([A-Z])/g, function (match) {</span><span class="s3">\n    </span><span class="s1">return '_' + match.toLowerCase()</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const aliasPropPrefixes = new Set([</span><span class="s3">\n  </span><span class="s1">'og:image',</span><span class="s3">\n  </span><span class="s1">'twitter:image',</span><span class="s3">\n  </span><span class="s1">'og:video',</span><span class="s3">\n  </span><span class="s1">'og:audio',</span><span class="s3">\n</span><span class="s1">])</span><span class="s3">\n</span><span class="s1">function getMetaKey(prefix: string, key: string) {</span><span class="s3">\n  </span><span class="s1">// Use `twitter:image` and `og:image` instead of `twitter:image:url` and `og:image:url`</span><span class="s3">\n  </span><span class="s1">// to be more compatible as it's a more common format.</span><span class="s3">\n  </span><span class="s1">// `og:video` &amp; `og:audio` do not have a `:url` suffix alias</span><span class="s3">\n  </span><span class="s1">if (aliasPropPrefixes.has(prefix) &amp;&amp; key === 'url') {</span><span class="s3">\n    </span><span class="s1">return prefix</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (prefix.startsWith('og:') || prefix.startsWith('twitter:')) {</span><span class="s3">\n    </span><span class="s1">key = camelToSnake(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return prefix + ':' + key</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function ExtendMeta({</span><span class="s3">\n  </span><span class="s1">content,</span><span class="s3">\n  </span><span class="s1">namePrefix,</span><span class="s3">\n  </span><span class="s1">propertyPrefix,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">content?: ExtendMetaContent</span><span class="s3">\n  </span><span class="s1">namePrefix?: string</span><span class="s3">\n  </span><span class="s1">propertyPrefix?: string</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!content) return null</span><span class="s3">\n  </span><span class="s1">return MetaFilter(</span><span class="s3">\n    </span><span class="s1">Object.entries(content).map(([k, v]) =&gt; {</span><span class="s3">\n      </span><span class="s1">return typeof v === 'undefined'</span><span class="s3">\n        </span><span class="s1">? null</span><span class="s3">\n        </span><span class="s1">: Meta({</span><span class="s3">\n            </span><span class="s1">...(propertyPrefix &amp;&amp; { property: getMetaKey(propertyPrefix, k) }),</span><span class="s3">\n            </span><span class="s1">...(namePrefix &amp;&amp; { name: getMetaKey(namePrefix, k) }),</span><span class="s3">\n            </span><span class="s1">content: typeof v === 'string' ? v : v?.toString(),</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function MultiMeta({</span><span class="s3">\n  </span><span class="s1">propertyPrefix,</span><span class="s3">\n  </span><span class="s1">namePrefix,</span><span class="s3">\n  </span><span class="s1">contents,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">propertyPrefix?: string</span><span class="s3">\n  </span><span class="s1">namePrefix?: string</span><span class="s3">\n  </span><span class="s1">contents?: MultiMetaContent | null</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (typeof contents === 'undefined' || contents === null) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter(</span><span class="s3">\n    </span><span class="s1">contents.map((content) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">typeof content === 'string' ||</span><span class="s3">\n        </span><span class="s1">typeof content === 'number' ||</span><span class="s3">\n        </span><span class="s1">content instanceof URL</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return Meta({</span><span class="s3">\n          </span><span class="s1">...(propertyPrefix</span><span class="s3">\n            </span><span class="s1">? { property: propertyPrefix }</span><span class="s3">\n            </span><span class="s1">: { name: namePrefix }),</span><span class="s3">\n          </span><span class="s1">content,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">return ExtendMeta({</span><span class="s3">\n          </span><span class="s1">namePrefix,</span><span class="s3">\n          </span><span class="s1">propertyPrefix,</span><span class="s3">\n          </span><span class="s1">content,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;nonNullable&quot;</span><span class="s0">,</span><span class="s1">&quot;Meta&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;property&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;media&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;items&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;camelToSnake&quot;</span><span class="s0">,</span><span class="s1">&quot;camelCaseStr&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;aliasPropPrefixes&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;getMetaKey&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;ExtendMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;namePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;propertyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;k&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;MultiMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;contents&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;AAAA,OAAOA,WAAW,QAAO;AACzB,SAASC,WAAW,QAAQ,qBAAoB;;;;AAEzC,SAASC,KAAK,EACnBC,IAAI,EACJC,QAAQ,EACRC,OAAO,EACPC,KAAK,EAMN;IACC,IAAI,OAAOD,YAAY,eAAeA,YAAY,QAAQA,YAAY,IAAI;QACxE,OAAA,WAAA,OACE,8NAAA,EAACE,QAAAA;YACE,GAAIJ,OAAO;gBAAEA;YAAK,IAAI;gBAAEC;YAAS,CAAC;YAClC,GAAIE,QAAQ;gBAAEA;YAAM,IAAIE,SAAS;YAClCH,SAAS,OAAOA,YAAY,WAAWA,UAAUA,QAAQI,QAAQ;;IAGvE;IACA,OAAO;AACT;AAEO,SAASC,WACdC,KAAmB;IAEnB,MAAMC,MAAwB,EAAE;IAChC,KAAK,MAAMC,QAAQF,MAAO;QACxB,IAAIG,MAAMC,OAAO,CAACF,OAAO;YACvBD,IAAII,IAAI,IAAIH,KAAKI,MAAM,CAAChB,4KAAAA;QAC1B,OAAO,QAAIA,4KAAAA,EAAYY,OAAO;YAC5BD,IAAII,IAAI,CAACH;QACX;IACF;IACA,OAAOD;AACT;AAWA,SAASM,aAAaC,YAAoB;IACxC,OAAOA,aAAaC,OAAO,CAAC,YAAY,SAAUC,KAAK;QACrD,OAAO,MAAMA,MAAMC,WAAW;IAChC;AACF;AAEA,MAAMC,oBAAoB,IAAIC,IAAI;IAChC;IACA;IACA;IACA;CACD;AACD,SAASC,WAAWC,MAAc,EAAEC,GAAW;IAC7C,uFAAuF;IACvF,sDAAsD;IACtD,4DAA4D;IAC5D,IAAIJ,kBAAkBK,GAAG,CAACF,WAAWC,QAAQ,OAAO;QAClD,OAAOD;IACT;IACA,IAAIA,OAAOG,UAAU,CAAC,UAAUH,OAAOG,UAAU,CAAC,aAAa;QAC7DF,MAAMT,aAAaS;IACrB;IACA,OAAOD,SAAS,MAAMC;AACxB;AAEA,SAASG,WAAW,EAClBzB,OAAO,EACP0B,UAAU,EACVC,cAAc,EAKf;IACC,IAAI,CAAC3B,SAAS,OAAO;IACrB,OAAOK,WACLuB,OAAOC,OAAO,CAAC7B,SAAS8B,GAAG,CAAC,CAAC,CAACC,GAAGC,EAAE;QACjC,OAAO,OAAOA,MAAM,cAChB,OACAnC,KAAK;YACH,GAAI8B,kBAAkB;gBAAE5B,UAAUqB,WAAWO,gBAAgBI;YAAG,CAAC;YACjE,GAAIL,cAAc;gBAAE5B,MAAMsB,WAAWM,YAAYK;YAAG,CAAC;YACrD/B,SAAS,OAAOgC,MAAM,WAAWA,IAAIA,KAAAA,OAAAA,KAAAA,IAAAA,EAAG5B,QAAQ;QAClD;IACN;AAEJ;AAEO,SAAS6B,UAAU,EACxBN,cAAc,EACdD,UAAU,EACVQ,QAAQ,EAKT;IACC,IAAI,OAAOA,aAAa,eAAeA,aAAa,MAAM;QACxD,OAAO;IACT;IAEA,OAAO7B,WACL6B,SAASJ,GAAG,CAAC,CAAC9B;QACZ,IACE,OAAOA,YAAY,YACnB,OAAOA,YAAY,YACnBA,mBAAmBmC,KACnB;YACA,OAAOtC,KAAK;gBACV,GAAI8B,iBACA;oBAAE5B,UAAU4B;gBAAe,IAC3B;oBAAE7B,MAAM4B;gBAAW,CAAC;gBACxB1B;YACF;QACF,OAAO;YACL,OAAOyB,WAAW;gBAChBC;gBACAC;gBACA3B;YACF;QACF;IACF;AAEJ&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7506</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/constants.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ViewportLayout } from './types/extra-types'</span><span class="s3">\n</span><span class="s1">import type { Icons } from './types/metadata-types'</span><span class="s3">\n\n</span><span class="s1">export const ViewportMetaKeys: { [k in keyof ViewportLayout]: string } = {</span><span class="s3">\n  </span><span class="s1">width: 'width',</span><span class="s3">\n  </span><span class="s1">height: 'height',</span><span class="s3">\n  </span><span class="s1">initialScale: 'initial-scale',</span><span class="s3">\n  </span><span class="s1">minimumScale: 'minimum-scale',</span><span class="s3">\n  </span><span class="s1">maximumScale: 'maximum-scale',</span><span class="s3">\n  </span><span class="s1">viewportFit: 'viewport-fit',</span><span class="s3">\n  </span><span class="s1">userScalable: 'user-scalable',</span><span class="s3">\n  </span><span class="s1">interactiveWidget: 'interactive-widget',</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">export const IconKeys: (keyof Icons)[] = ['icon', 'shortcut', 'apple', 'other']</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ViewportMetaKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;width&quot;</span><span class="s0">,</span><span class="s1">&quot;height&quot;</span><span class="s0">,</span><span class="s1">&quot;initialScale&quot;</span><span class="s0">,</span><span class="s1">&quot;minimumScale&quot;</span><span class="s0">,</span><span class="s1">&quot;maximumScale&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportFit&quot;</span><span class="s0">,</span><span class="s1">&quot;userScalable&quot;</span><span class="s0">,</span><span class="s1">&quot;interactiveWidget&quot;</span><span class="s0">,</span><span class="s1">&quot;IconKeys&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAGO,MAAMA,mBAA4D;IACvEC,OAAO;IACPC,QAAQ;IACRC,cAAc;IACdC,cAAc;IACdC,cAAc;IACdC,aAAa;IACbC,cAAc;IACdC,mBAAmB;AACrB,EAAU;AAEH,MAAMC,WAA4B;IAAC;IAAQ;IAAY;IAAS;CAAQ,CAAA&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7532</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;function resolveArray&lt;T&gt;(value: T | T[]): T[] {</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(value)) {</span><span class="s3">\n    </span><span class="s1">return value as any</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return [value] as any</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function resolveAsArrayOrUndefined&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">value: T | T[] | undefined | null</span><span class="s3">\n</span><span class="s1">): T extends undefined | null ? undefined : T[] {</span><span class="s3">\n  </span><span class="s1">if (typeof value === 'undefined' || value === null) {</span><span class="s3">\n    </span><span class="s1">return undefined as any</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolveArray(value) as any</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getOrigin(url: string | URL): string | undefined {</span><span class="s3">\n  </span><span class="s1">let origin = undefined</span><span class="s3">\n  </span><span class="s1">if (typeof url === 'string') {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">url = new URL(url)</span><span class="s3">\n      </span><span class="s1">origin = url.origin</span><span class="s3">\n    </span><span class="s1">} catch {}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return origin</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { resolveAsArrayOrUndefined, resolveArray, getOrigin }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveArray&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAsArrayOrUndefined&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;getOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;AAAA,SAASA,aAAgBC,KAAc;IACrC,IAAIC,MAAMC,OAAO,CAACF,QAAQ;QACxB,OAAOA;IACT;IACA,OAAO;QAACA;KAAM;AAChB;AAEA,SAASG,0BACPH,KAAiC;IAEjC,IAAI,OAAOA,UAAU,eAAeA,UAAU,MAAM;QAClD,OAAOI;IACT;IACA,OAAOL,aAAaC;AACtB;AAEA,SAASK,UAAUC,GAAiB;IAClC,IAAIC,SAASH;IACb,IAAI,OAAOE,QAAQ,UAAU;QAC3B,IAAI;YACFA,MAAM,IAAIE,IAAIF;YACdC,SAASD,IAAIC,MAAM;QACrB,EAAE,OAAM,CAAC;IACX;IACA,OAAOA;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7570</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/basic.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvedViewport,</span><span class="s3">\n  </span><span class="s1">Viewport,</span><span class="s3">\n</span><span class="s1">} from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { ViewportLayout } from '../types/extra-types'</span><span class="s3">\n\n</span><span class="s1">import { Meta, MetaFilter, MultiMeta } from './meta'</span><span class="s3">\n</span><span class="s1">import { ViewportMetaKeys } from '../constants'</span><span class="s3">\n</span><span class="s1">import { getOrigin } from './utils'</span><span class="s3">\n\n</span><span class="s1">// convert viewport object to string for viewport meta tag</span><span class="s3">\n</span><span class="s1">function resolveViewportLayout(viewport: Viewport) {</span><span class="s3">\n  </span><span class="s1">let resolved: string | null = null</span><span class="s3">\n\n  </span><span class="s1">if (viewport &amp;&amp; typeof viewport === 'object') {</span><span class="s3">\n    </span><span class="s1">resolved = ''</span><span class="s3">\n    </span><span class="s1">for (const viewportKey_ in ViewportMetaKeys) {</span><span class="s3">\n      </span><span class="s1">const viewportKey = viewportKey_ as keyof ViewportLayout</span><span class="s3">\n      </span><span class="s1">if (viewportKey in viewport) {</span><span class="s3">\n        </span><span class="s1">let value = viewport[viewportKey]</span><span class="s3">\n        </span><span class="s1">if (typeof value === 'boolean') {</span><span class="s3">\n          </span><span class="s1">value = value ? 'yes' : 'no'</span><span class="s3">\n        </span><span class="s1">} else if (!value &amp;&amp; viewportKey === 'initialScale') {</span><span class="s3">\n          </span><span class="s1">value = undefined</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (value) {</span><span class="s3">\n          </span><span class="s1">if (resolved) resolved += ', '</span><span class="s3">\n          </span><span class="s1">resolved += `${ViewportMetaKeys[viewportKey]}=${value}`</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolved</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function ViewportMeta({ viewport }: { viewport: ResolvedViewport }) {</span><span class="s3">\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">&lt;meta charSet=</span><span class="s3">\&quot;</span><span class="s1">utf-8</span><span class="s3">\&quot; </span><span class="s1">/&gt;,</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'viewport', content: resolveViewportLayout(viewport) }),</span><span class="s3">\n    </span><span class="s1">...(viewport.themeColor</span><span class="s3">\n      </span><span class="s1">? viewport.themeColor.map((themeColor) =&gt;</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">name: 'theme-color',</span><span class="s3">\n            </span><span class="s1">content: themeColor.color,</span><span class="s3">\n            </span><span class="s1">media: themeColor.media,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'color-scheme', content: viewport.colorScheme }),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function BasicMeta({ metadata }: { metadata: ResolvedMetadata }) {</span><span class="s3">\n  </span><span class="s1">const manifestOrigin = metadata.manifest</span><span class="s3">\n    </span><span class="s1">? getOrigin(metadata.manifest)</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">metadata.title !== null &amp;&amp; metadata.title.absolute ? (</span><span class="s3">\n      </span><span class="s1">&lt;title&gt;{metadata.title.absolute}&lt;/title&gt;</span><span class="s3">\n    </span><span class="s1">) : null,</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'description', content: metadata.description }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'application-name', content: metadata.applicationName }),</span><span class="s3">\n    </span><span class="s1">...(metadata.authors</span><span class="s3">\n      </span><span class="s1">? metadata.authors.map((author) =&gt; [</span><span class="s3">\n          </span><span class="s1">author.url ? (</span><span class="s3">\n            </span><span class="s1">&lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">author</span><span class="s3">\&quot; </span><span class="s1">href={author.url.toString()} /&gt;</span><span class="s3">\n          </span><span class="s1">) : null,</span><span class="s3">\n          </span><span class="s1">Meta({ name: 'author', content: author.name }),</span><span class="s3">\n        </span><span class="s1">])</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">metadata.manifest ? (</span><span class="s3">\n      </span><span class="s1">&lt;link</span><span class="s3">\n        </span><span class="s1">rel=</span><span class="s3">\&quot;</span><span class="s1">manifest</span><span class="s3">\&quot;\n        </span><span class="s1">href={metadata.manifest.toString()}</span><span class="s3">\n        </span><span class="s1">// If it's same origin, and it's a preview deployment,</span><span class="s3">\n        </span><span class="s1">// including credentials for manifest request.</span><span class="s3">\n        </span><span class="s1">crossOrigin={</span><span class="s3">\n          </span><span class="s1">!manifestOrigin &amp;&amp; process.env.VERCEL_ENV === 'preview'</span><span class="s3">\n            </span><span class="s1">? 'use-credentials'</span><span class="s3">\n            </span><span class="s1">: undefined</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">/&gt;</span><span class="s3">\n    </span><span class="s1">) : null,</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'generator', content: metadata.generator }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'keywords', content: metadata.keywords?.join(',') }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'referrer', content: metadata.referrer }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'creator', content: metadata.creator }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'publisher', content: metadata.publisher }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'robots', content: metadata.robots?.basic }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'googlebot', content: metadata.robots?.googleBot }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'abstract', content: metadata.abstract }),</span><span class="s3">\n    </span><span class="s1">...(metadata.archives</span><span class="s3">\n      </span><span class="s1">? metadata.archives.map((archive) =&gt; (</span><span class="s3">\n          </span><span class="s1">&lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">archives</span><span class="s3">\&quot; </span><span class="s1">href={archive} /&gt;</span><span class="s3">\n        </span><span class="s1">))</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">...(metadata.assets</span><span class="s3">\n      </span><span class="s1">? metadata.assets.map((asset) =&gt; &lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">assets</span><span class="s3">\&quot; </span><span class="s1">href={asset} /&gt;)</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">...(metadata.bookmarks</span><span class="s3">\n      </span><span class="s1">? metadata.bookmarks.map((bookmark) =&gt; (</span><span class="s3">\n          </span><span class="s1">&lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">bookmarks</span><span class="s3">\&quot; </span><span class="s1">href={bookmark} /&gt;</span><span class="s3">\n        </span><span class="s1">))</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">...(metadata.pagination</span><span class="s3">\n      </span><span class="s1">? [</span><span class="s3">\n          </span><span class="s1">metadata.pagination.previous ? (</span><span class="s3">\n            </span><span class="s1">&lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">prev</span><span class="s3">\&quot; </span><span class="s1">href={metadata.pagination.previous} /&gt;</span><span class="s3">\n          </span><span class="s1">) : null,</span><span class="s3">\n          </span><span class="s1">metadata.pagination.next ? (</span><span class="s3">\n            </span><span class="s1">&lt;link rel=</span><span class="s3">\&quot;</span><span class="s1">next</span><span class="s3">\&quot; </span><span class="s1">href={metadata.pagination.next} /&gt;</span><span class="s3">\n          </span><span class="s1">) : null,</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'category', content: metadata.category }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'classification', content: metadata.classification }),</span><span class="s3">\n    </span><span class="s1">...(metadata.other</span><span class="s3">\n      </span><span class="s1">? Object.entries(metadata.other).map(([name, content]) =&gt; {</span><span class="s3">\n          </span><span class="s1">if (Array.isArray(content)) {</span><span class="s3">\n            </span><span class="s1">return content.map((contentItem) =&gt;</span><span class="s3">\n              </span><span class="s1">Meta({ name, content: contentItem })</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">return Meta({ name, content })</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function ItunesMeta({ itunes }: { itunes: ResolvedMetadata['itunes'] }) {</span><span class="s3">\n  </span><span class="s1">if (!itunes) return null</span><span class="s3">\n  </span><span class="s1">const { appId, appArgument } = itunes</span><span class="s3">\n  </span><span class="s1">let content = `app-id=${appId}`</span><span class="s3">\n  </span><span class="s1">if (appArgument) {</span><span class="s3">\n    </span><span class="s1">content += `, app-argument=${appArgument}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return &lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">apple-itunes-app</span><span class="s3">\&quot; </span><span class="s1">content={content} /&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function FacebookMeta({</span><span class="s3">\n  </span><span class="s1">facebook,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">facebook: ResolvedMetadata['facebook']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!facebook) return null</span><span class="s3">\n\n  </span><span class="s1">const { appId, admins } = facebook</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">appId ? &lt;meta property=</span><span class="s3">\&quot;</span><span class="s1">fb:app_id</span><span class="s3">\&quot; </span><span class="s1">content={appId} /&gt; : null,</span><span class="s3">\n    </span><span class="s1">...(admins</span><span class="s3">\n      </span><span class="s1">? admins.map((admin) =&gt; &lt;meta property=</span><span class="s3">\&quot;</span><span class="s1">fb:admins</span><span class="s3">\&quot; </span><span class="s1">content={admin} /&gt;)</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function PinterestMeta({</span><span class="s3">\n  </span><span class="s1">pinterest,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">pinterest: ResolvedMetadata['pinterest']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!pinterest || !pinterest.richPin) return null</span><span class="s3">\n\n  </span><span class="s1">const { richPin } = pinterest</span><span class="s3">\n\n  </span><span class="s1">return &lt;meta property=</span><span class="s3">\&quot;</span><span class="s1">pinterest-rich-pin</span><span class="s3">\&quot; </span><span class="s1">content={richPin.toString()} /&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const formatDetectionKeys = [</span><span class="s3">\n  </span><span class="s1">'telephone',</span><span class="s3">\n  </span><span class="s1">'date',</span><span class="s3">\n  </span><span class="s1">'address',</span><span class="s3">\n  </span><span class="s1">'email',</span><span class="s3">\n  </span><span class="s1">'url',</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n</span><span class="s1">export function FormatDetectionMeta({</span><span class="s3">\n  </span><span class="s1">formatDetection,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">formatDetection: ResolvedMetadata['formatDetection']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!formatDetection) return null</span><span class="s3">\n  </span><span class="s1">let content = ''</span><span class="s3">\n  </span><span class="s1">for (const key of formatDetectionKeys) {</span><span class="s3">\n    </span><span class="s1">if (key in formatDetection) {</span><span class="s3">\n      </span><span class="s1">if (content) content += ', '</span><span class="s3">\n      </span><span class="s1">content += `${key}=no`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return &lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">format-detection</span><span class="s3">\&quot; </span><span class="s1">content={content} /&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function AppleWebAppMeta({</span><span class="s3">\n  </span><span class="s1">appleWebApp,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">appleWebApp: ResolvedMetadata['appleWebApp']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!appleWebApp) return null</span><span class="s3">\n\n  </span><span class="s1">const { capable, title, startupImage, statusBarStyle } = appleWebApp</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">capable ? Meta({ name: 'mobile-web-app-capable', content: 'yes' }) : null,</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'apple-mobile-web-app-title', content: title }),</span><span class="s3">\n    </span><span class="s1">startupImage</span><span class="s3">\n      </span><span class="s1">? startupImage.map((image) =&gt; (</span><span class="s3">\n          </span><span class="s1">&lt;link</span><span class="s3">\n            </span><span class="s1">href={image.url}</span><span class="s3">\n            </span><span class="s1">media={image.media}</span><span class="s3">\n            </span><span class="s1">rel=</span><span class="s3">\&quot;</span><span class="s1">apple-touch-startup-image</span><span class="s3">\&quot;\n          </span><span class="s1">/&gt;</span><span class="s3">\n        </span><span class="s1">))</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">statusBarStyle</span><span class="s3">\n      </span><span class="s1">? Meta({</span><span class="s3">\n          </span><span class="s1">name: 'apple-mobile-web-app-status-bar-style',</span><span class="s3">\n          </span><span class="s1">content: statusBarStyle,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function VerificationMeta({</span><span class="s3">\n  </span><span class="s1">verification,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">verification: ResolvedMetadata['verification']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!verification) return null</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">namePrefix: 'google-site-verification',</span><span class="s3">\n      </span><span class="s1">contents: verification.google,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ namePrefix: 'y_key', contents: verification.yahoo }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">namePrefix: 'yandex-verification',</span><span class="s3">\n      </span><span class="s1">contents: verification.yandex,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ namePrefix: 'me', contents: verification.me }),</span><span class="s3">\n    </span><span class="s1">...(verification.other</span><span class="s3">\n      </span><span class="s1">? Object.entries(verification.other).map(([key, value]) =&gt;</span><span class="s3">\n          </span><span class="s1">MultiMeta({ namePrefix: key, contents: value })</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;Meta&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;MultiMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportMetaKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;getOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveViewportLayout&quot;</span><span class="s0">,</span><span class="s1">&quot;viewport&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportKey_&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportKey&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;charSet&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;themeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;color&quot;</span><span class="s0">,</span><span class="s1">&quot;media&quot;</span><span class="s0">,</span><span class="s1">&quot;colorScheme&quot;</span><span class="s0">,</span><span class="s1">&quot;BasicMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;absolute&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;applicationName&quot;</span><span class="s0">,</span><span class="s1">&quot;authors&quot;</span><span class="s0">,</span><span class="s1">&quot;author&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;link&quot;</span><span class="s0">,</span><span class="s1">&quot;rel&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;crossOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;generator&quot;</span><span class="s0">,</span><span class="s1">&quot;keywords&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;referrer&quot;</span><span class="s0">,</span><span class="s1">&quot;creator&quot;</span><span class="s0">,</span><span class="s1">&quot;publisher&quot;</span><span class="s0">,</span><span class="s1">&quot;robots&quot;</span><span class="s0">,</span><span class="s1">&quot;basic&quot;</span><span class="s0">,</span><span class="s1">&quot;googleBot&quot;</span><span class="s0">,</span><span class="s1">&quot;abstract&quot;</span><span class="s0">,</span><span class="s1">&quot;archives&quot;</span><span class="s0">,</span><span class="s1">&quot;archive&quot;</span><span class="s0">,</span><span class="s1">&quot;assets&quot;</span><span class="s0">,</span><span class="s1">&quot;asset&quot;</span><span class="s0">,</span><span class="s1">&quot;bookmarks&quot;</span><span class="s0">,</span><span class="s1">&quot;bookmark&quot;</span><span class="s0">,</span><span class="s1">&quot;pagination&quot;</span><span class="s0">,</span><span class="s1">&quot;previous&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;category&quot;</span><span class="s0">,</span><span class="s1">&quot;classification&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;contentItem&quot;</span><span class="s0">,</span><span class="s1">&quot;ItunesMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;itunes&quot;</span><span class="s0">,</span><span class="s1">&quot;appId&quot;</span><span class="s0">,</span><span class="s1">&quot;appArgument&quot;</span><span class="s0">,</span><span class="s1">&quot;FacebookMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;facebook&quot;</span><span class="s0">,</span><span class="s1">&quot;admins&quot;</span><span class="s0">,</span><span class="s1">&quot;property&quot;</span><span class="s0">,</span><span class="s1">&quot;admin&quot;</span><span class="s0">,</span><span class="s1">&quot;PinterestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;pinterest&quot;</span><span class="s0">,</span><span class="s1">&quot;richPin&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDetectionKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;FormatDetectionMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;AppleWebAppMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;appleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;capable&quot;</span><span class="s0">,</span><span class="s1">&quot;startupImage&quot;</span><span class="s0">,</span><span class="s1">&quot;statusBarStyle&quot;</span><span class="s0">,</span><span class="s1">&quot;image&quot;</span><span class="s0">,</span><span class="s1">&quot;VerificationMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;verification&quot;</span><span class="s0">,</span><span class="s1">&quot;namePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;contents&quot;</span><span class="s0">,</span><span class="s1">&quot;google&quot;</span><span class="s0">,</span><span class="s1">&quot;yahoo&quot;</span><span class="s0">,</span><span class="s1">&quot;yandex&quot;</span><span class="s0">,</span><span class="s1">&quot;me&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7855</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/alternate.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ResolvedMetadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { AlternateLinkDescriptor } from '../types/alternative-urls-types'</span><span class="s3">\n\n</span><span class="s1">import React from 'react'</span><span class="s3">\n</span><span class="s1">import { MetaFilter } from './meta'</span><span class="s3">\n\n</span><span class="s1">function AlternateLink({</span><span class="s3">\n  </span><span class="s1">descriptor,</span><span class="s3">\n  </span><span class="s1">...props</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">descriptor: AlternateLinkDescriptor</span><span class="s3">\n</span><span class="s1">} &amp; React.LinkHTMLAttributes&lt;HTMLLinkElement&gt;) {</span><span class="s3">\n  </span><span class="s1">if (!descriptor.url) return null</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;link</span><span class="s3">\n      </span><span class="s1">{...props}</span><span class="s3">\n      </span><span class="s1">{...(descriptor.title &amp;&amp; { title: descriptor.title })}</span><span class="s3">\n      </span><span class="s1">href={descriptor.url.toString()}</span><span class="s3">\n    </span><span class="s1">/&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function AlternatesMetadata({</span><span class="s3">\n  </span><span class="s1">alternates,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">alternates: ResolvedMetadata['alternates']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!alternates) return null</span><span class="s3">\n\n  </span><span class="s1">const { canonical, languages, media, types } = alternates</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">canonical</span><span class="s3">\n      </span><span class="s1">? AlternateLink({ rel: 'canonical', descriptor: canonical })</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">languages</span><span class="s3">\n      </span><span class="s1">? Object.entries(languages).flatMap(([locale, descriptors]) =&gt;</span><span class="s3">\n          </span><span class="s1">descriptors?.map((descriptor) =&gt;</span><span class="s3">\n            </span><span class="s1">AlternateLink({ rel: 'alternate', hrefLang: locale, descriptor })</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">media</span><span class="s3">\n      </span><span class="s1">? Object.entries(media).flatMap(([mediaName, descriptors]) =&gt;</span><span class="s3">\n          </span><span class="s1">descriptors?.map((descriptor) =&gt;</span><span class="s3">\n            </span><span class="s1">AlternateLink({ rel: 'alternate', media: mediaName, descriptor })</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">types</span><span class="s3">\n      </span><span class="s1">? Object.entries(types).flatMap(([type, descriptors]) =&gt;</span><span class="s3">\n          </span><span class="s1">descriptors?.map((descriptor) =&gt;</span><span class="s3">\n            </span><span class="s1">AlternateLink({ rel: 'alternate', type, descriptor })</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;AlternateLink&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;link&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;AlternatesMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;alternates&quot;</span><span class="s0">,</span><span class="s1">&quot;canonical&quot;</span><span class="s0">,</span><span class="s1">&quot;languages&quot;</span><span class="s0">,</span><span class="s1">&quot;media&quot;</span><span class="s0">,</span><span class="s1">&quot;types&quot;</span><span class="s0">,</span><span class="s1">&quot;rel&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;flatMap&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;hrefLang&quot;</span><span class="s0">,</span><span class="s1">&quot;mediaName&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;AAGA,OAAOA,WAAW,QAAO;AACzB,SAASC,UAAU,QAAQ,SAAQ;;;;AAEnC,SAASC,cAAc,EACrBC,UAAU,EACV,GAAGC,OAGwC;IAC3C,IAAI,CAACD,WAAWE,GAAG,EAAE,OAAO;IAC5B,OAAA,WAAA,OACE,8NAAA,EAACC,QAAAA;QACE,GAAGF,KAAK;QACR,GAAID,WAAWI,KAAK,IAAI;YAAEA,OAAOJ,WAAWI,KAAK;QAAC,CAAC;QACpDC,MAAML,WAAWE,GAAG,CAACI,QAAQ;;AAGnC;AAEO,SAASC,mBAAmB,EACjCC,UAAU,EAGX;IACC,IAAI,CAACA,YAAY,OAAO;IAExB,MAAM,EAAEC,SAAS,EAAEC,SAAS,EAAEC,KAAK,EAAEC,KAAK,EAAE,GAAGJ;IAE/C,WAAOV,wLAAAA,EAAW;QAChBW,YACIV,cAAc;YAAEc,KAAK;YAAab,YAAYS;QAAU,KACxD;QACJC,YACII,OAAOC,OAAO,CAACL,WAAWM,OAAO,CAAC,CAAC,CAACC,QAAQC,YAAY,GACtDA,eAAAA,OAAAA,KAAAA,IAAAA,YAAaC,GAAG,CAAC,CAACnB,aAChBD,cAAc;oBAAEc,KAAK;oBAAaO,UAAUH;oBAAQjB;gBAAW,OAGnE;QACJW,QACIG,OAAOC,OAAO,CAACJ,OAAOK,OAAO,CAAC,CAAC,CAACK,WAAWH,YAAY,GACrDA,eAAAA,OAAAA,KAAAA,IAAAA,YAAaC,GAAG,CAAC,CAACnB,aAChBD,cAAc;oBAAEc,KAAK;oBAAaF,OAAOU;oBAAWrB;gBAAW,OAGnE;QACJY,QACIE,OAAOC,OAAO,CAACH,OAAOI,OAAO,CAAC,CAAC,CAACM,MAAMJ,YAAY,GAChDA,eAAAA,OAAAA,KAAAA,IAAAA,YAAaC,GAAG,CAAC,CAACnB,aAChBD,cAAc;oBAAEc,KAAK;oBAAaS;oBAAMtB;gBAAW,OAGvD;KACL;AACH&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">7904</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/opengraph.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ResolvedMetadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { TwitterAppDescriptor } from '../types/twitter-types'</span><span class="s3">\n\n</span><span class="s1">import { Meta, MetaFilter, MultiMeta } from './meta'</span><span class="s3">\n\n</span><span class="s1">export function OpenGraphMetadata({</span><span class="s3">\n  </span><span class="s1">openGraph,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">openGraph: ResolvedMetadata['openGraph']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!openGraph) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let typedOpenGraph</span><span class="s3">\n  </span><span class="s1">if ('type' in openGraph) {</span><span class="s3">\n    </span><span class="s1">const openGraphType = openGraph.type</span><span class="s3">\n    </span><span class="s1">switch (openGraphType) {</span><span class="s3">\n      </span><span class="s1">case 'website':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [Meta({ property: 'og:type', content: 'website' })]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'article':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'article' }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'article:published_time',</span><span class="s3">\n            </span><span class="s1">content: openGraph.publishedTime?.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'article:modified_time',</span><span class="s3">\n            </span><span class="s1">content: openGraph.modifiedTime?.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'article:expiration_time',</span><span class="s3">\n            </span><span class="s1">content: openGraph.expirationTime?.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'article:author',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.authors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'article:section', content: openGraph.section }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'article:tag',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.tags,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'book':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'book' }),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'book:isbn', content: openGraph.isbn }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'book:release_date',</span><span class="s3">\n            </span><span class="s1">content: openGraph.releaseDate,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'book:author',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.authors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({ propertyPrefix: 'book:tag', contents: openGraph.tags }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'profile':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'profile' }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'profile:first_name',</span><span class="s3">\n            </span><span class="s1">content: openGraph.firstName,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'profile:last_name', content: openGraph.lastName }),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'profile:username', content: openGraph.username }),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'profile:gender', content: openGraph.gender }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'music.song':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'music.song' }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'music:duration',</span><span class="s3">\n            </span><span class="s1">content: openGraph.duration?.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:album',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.albums,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:musician',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.musicians,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'music.album':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'music.album' }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:song',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.songs,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:musician',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.musicians,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'music:release_date',</span><span class="s3">\n            </span><span class="s1">content: openGraph.releaseDate,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'music.playlist':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'music.playlist' }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:song',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.songs,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:creator',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.creators,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'music.radio_station':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'music.radio_station' }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'music:creator',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.creators,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">case 'video.movie':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'video.movie' }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:actor',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.actors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:director',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.directors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:writer',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.writers,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'video:duration', content: openGraph.duration }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'video:release_date',</span><span class="s3">\n            </span><span class="s1">content: openGraph.releaseDate,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({ propertyPrefix: 'video:tag', contents: openGraph.tags }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'video.episode':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'video.episode' }),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:actor',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.actors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:director',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.directors,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({</span><span class="s3">\n            </span><span class="s1">propertyPrefix: 'video:writer',</span><span class="s3">\n            </span><span class="s1">contents: openGraph.writers,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'video:duration', content: openGraph.duration }),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">property: 'video:release_date',</span><span class="s3">\n            </span><span class="s1">content: openGraph.releaseDate,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">MultiMeta({ propertyPrefix: 'video:tag', contents: openGraph.tags }),</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'video:series', content: openGraph.series }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'video.tv_show':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [</span><span class="s3">\n          </span><span class="s1">Meta({ property: 'og:type', content: 'video.tv_show' }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'video.other':</span><span class="s3">\n        </span><span class="s1">typedOpenGraph = [Meta({ property: 'og:type', content: 'video.other' })]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">const _exhaustiveCheck: never = openGraphType</span><span class="s3">\n        </span><span class="s1">throw new Error(`Invalid OpenGraph type: ${_exhaustiveCheck}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:determiner', content: openGraph.determiner }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:title', content: openGraph.title?.absolute }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:description', content: openGraph.description }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:url', content: openGraph.url?.toString() }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:site_name', content: openGraph.siteName }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:locale', content: openGraph.locale }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:country_name', content: openGraph.countryName }),</span><span class="s3">\n    </span><span class="s1">Meta({ property: 'og:ttl', content: openGraph.ttl?.toString() }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'og:image', contents: openGraph.images }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'og:video', contents: openGraph.videos }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'og:audio', contents: openGraph.audio }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'og:email', contents: openGraph.emails }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">propertyPrefix: 'og:phone_number',</span><span class="s3">\n      </span><span class="s1">contents: openGraph.phoneNumbers,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">propertyPrefix: 'og:fax_number',</span><span class="s3">\n      </span><span class="s1">contents: openGraph.faxNumbers,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">propertyPrefix: 'og:locale:alternate',</span><span class="s3">\n      </span><span class="s1">contents: openGraph.alternateLocale,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">...(typedOpenGraph ? typedOpenGraph : []),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function TwitterAppItem({</span><span class="s3">\n  </span><span class="s1">app,</span><span class="s3">\n  </span><span class="s1">type,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">app: TwitterAppDescriptor</span><span class="s3">\n  </span><span class="s1">type: 'iphone' | 'ipad' | 'googleplay'</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">return [</span><span class="s3">\n    </span><span class="s1">Meta({ name: `twitter:app:name:${type}`, content: app.name }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: `twitter:app:id:${type}`, content: app.id[type] }),</span><span class="s3">\n    </span><span class="s1">Meta({</span><span class="s3">\n      </span><span class="s1">name: `twitter:app:url:${type}`,</span><span class="s3">\n      </span><span class="s1">content: app.url?.[type]?.toString(),</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function TwitterMetadata({</span><span class="s3">\n  </span><span class="s1">twitter,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">twitter: ResolvedMetadata['twitter']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!twitter) return null</span><span class="s3">\n  </span><span class="s1">const { card } = twitter</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:card', content: card }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:site', content: twitter.site }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:site:id', content: twitter.siteId }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:creator', content: twitter.creator }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:creator:id', content: twitter.creatorId }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:title', content: twitter.title?.absolute }),</span><span class="s3">\n    </span><span class="s1">Meta({ name: 'twitter:description', content: twitter.description }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ namePrefix: 'twitter:image', contents: twitter.images }),</span><span class="s3">\n    </span><span class="s1">...(card === 'player'</span><span class="s3">\n      </span><span class="s1">? twitter.players.flatMap((player) =&gt; [</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">name: 'twitter:player',</span><span class="s3">\n            </span><span class="s1">content: player.playerUrl.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({</span><span class="s3">\n            </span><span class="s1">name: 'twitter:player:stream',</span><span class="s3">\n            </span><span class="s1">content: player.streamUrl.toString(),</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">Meta({ name: 'twitter:player:width', content: player.width }),</span><span class="s3">\n          </span><span class="s1">Meta({ name: 'twitter:player:height', content: player.height }),</span><span class="s3">\n        </span><span class="s1">])</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">...(card === 'app'</span><span class="s3">\n      </span><span class="s1">? [</span><span class="s3">\n          </span><span class="s1">TwitterAppItem({ app: twitter.app, type: 'iphone' }),</span><span class="s3">\n          </span><span class="s1">TwitterAppItem({ app: twitter.app, type: 'ipad' }),</span><span class="s3">\n          </span><span class="s1">TwitterAppItem({ app: twitter.app, type: 'googleplay' }),</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function AppLinksMeta({</span><span class="s3">\n  </span><span class="s1">appLinks,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">appLinks: ResolvedMetadata['appLinks']</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (!appLinks) return null</span><span class="s3">\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:ios', contents: appLinks.ios }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:iphone', contents: appLinks.iphone }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:ipad', contents: appLinks.ipad }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:android', contents: appLinks.android }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">propertyPrefix: 'al:windows_phone',</span><span class="s3">\n      </span><span class="s1">contents: appLinks.windows_phone,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:windows', contents: appLinks.windows }),</span><span class="s3">\n    </span><span class="s1">MultiMeta({</span><span class="s3">\n      </span><span class="s1">propertyPrefix: 'al:windows_universal',</span><span class="s3">\n      </span><span class="s1">contents: appLinks.windows_universal,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">MultiMeta({ propertyPrefix: 'al:web', contents: appLinks.web }),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;Meta&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;MultiMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;OpenGraphMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;typedOpenGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraphType&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;property&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;publishedTime&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;modifiedTime&quot;</span><span class="s0">,</span><span class="s1">&quot;expirationTime&quot;</span><span class="s0">,</span><span class="s1">&quot;propertyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;contents&quot;</span><span class="s0">,</span><span class="s1">&quot;authors&quot;</span><span class="s0">,</span><span class="s1">&quot;section&quot;</span><span class="s0">,</span><span class="s1">&quot;tags&quot;</span><span class="s0">,</span><span class="s1">&quot;isbn&quot;</span><span class="s0">,</span><span class="s1">&quot;releaseDate&quot;</span><span class="s0">,</span><span class="s1">&quot;firstName&quot;</span><span class="s0">,</span><span class="s1">&quot;lastName&quot;</span><span class="s0">,</span><span class="s1">&quot;username&quot;</span><span class="s0">,</span><span class="s1">&quot;gender&quot;</span><span class="s0">,</span><span class="s1">&quot;duration&quot;</span><span class="s0">,</span><span class="s1">&quot;albums&quot;</span><span class="s0">,</span><span class="s1">&quot;musicians&quot;</span><span class="s0">,</span><span class="s1">&quot;songs&quot;</span><span class="s0">,</span><span class="s1">&quot;creators&quot;</span><span class="s0">,</span><span class="s1">&quot;actors&quot;</span><span class="s0">,</span><span class="s1">&quot;directors&quot;</span><span class="s0">,</span><span class="s1">&quot;writers&quot;</span><span class="s0">,</span><span class="s1">&quot;series&quot;</span><span class="s0">,</span><span class="s1">&quot;_exhaustiveCheck&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;determiner&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;absolute&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;siteName&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;countryName&quot;</span><span class="s0">,</span><span class="s1">&quot;ttl&quot;</span><span class="s0">,</span><span class="s1">&quot;images&quot;</span><span class="s0">,</span><span class="s1">&quot;videos&quot;</span><span class="s0">,</span><span class="s1">&quot;audio&quot;</span><span class="s0">,</span><span class="s1">&quot;emails&quot;</span><span class="s0">,</span><span class="s1">&quot;phoneNumbers&quot;</span><span class="s0">,</span><span class="s1">&quot;faxNumbers&quot;</span><span class="s0">,</span><span class="s1">&quot;alternateLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;TwitterAppItem&quot;</span><span class="s0">,</span><span class="s1">&quot;app&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;TwitterMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;card&quot;</span><span class="s0">,</span><span class="s1">&quot;site&quot;</span><span class="s0">,</span><span class="s1">&quot;siteId&quot;</span><span class="s0">,</span><span class="s1">&quot;creator&quot;</span><span class="s0">,</span><span class="s1">&quot;creatorId&quot;</span><span class="s0">,</span><span class="s1">&quot;namePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;players&quot;</span><span class="s0">,</span><span class="s1">&quot;flatMap&quot;</span><span class="s0">,</span><span class="s1">&quot;player&quot;</span><span class="s0">,</span><span class="s1">&quot;playerUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;streamUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;width&quot;</span><span class="s0">,</span><span class="s1">&quot;height&quot;</span><span class="s0">,</span><span class="s1">&quot;AppLinksMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;appLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;ios&quot;</span><span class="s0">,</span><span class="s1">&quot;iphone&quot;</span><span class="s0">,</span><span class="s1">&quot;ipad&quot;</span><span class="s0">,</span><span class="s1">&quot;android&quot;</span><span class="s0">,</span><span class="s1">&quot;windows_phone&quot;</span><span class="s0">,</span><span class="s1">&quot;windows&quot;</span><span class="s0">,</span><span class="s1">&quot;windows_universal&quot;</span><span class="s0">,</span><span class="s1">&quot;web&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8366</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8372</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8379</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/icon-mark.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">// This is a client component that only renders during SSR,</span><span class="s3">\n</span><span class="s1">// but will be replaced during streaming with an icon insertion script tag.</span><span class="s3">\n</span><span class="s1">// We don't want it to be presented anywhere so it's only visible during streaming,</span><span class="s3">\n</span><span class="s1">// right after the icon meta tags so that browser can pick it up as soon as it's rendered.</span><span class="s3">\n</span><span class="s1">// Note: we don't just emit the script here because we only need the script if it's not in the head,</span><span class="s3">\n</span><span class="s1">// and we need it to be hoistable alongside the other metadata but sync scripts are not hoistable.</span><span class="s3">\n</span><span class="s1">export const IconMark = () =&gt; {</span><span class="s3">\n  </span><span class="s1">if (typeof window !== 'undefined') {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return &lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">nxt-icon</span><span class="s3">\&quot; </span><span class="s1">/&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;IconMark&quot;</span><span class="s0">,</span><span class="s1">&quot;window&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8387</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/generate/icons.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ResolvedMetadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { Icon, IconDescriptor } from '../types/metadata-types'</span><span class="s3">\n</span><span class="s1">import { IconMark } from './icon-mark'</span><span class="s3">\n\n</span><span class="s1">import { MetaFilter } from './meta'</span><span class="s3">\n\n</span><span class="s1">function IconDescriptorLink({ icon }: { icon: IconDescriptor }) {</span><span class="s3">\n  </span><span class="s1">const { url, rel = 'icon', ...props } = icon</span><span class="s3">\n\n  </span><span class="s1">return &lt;link rel={rel} href={url.toString()} {...props} /&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function IconLink({ rel, icon }: { rel?: string; icon: Icon }) {</span><span class="s3">\n  </span><span class="s1">if (typeof icon === 'object' &amp;&amp; !(icon instanceof URL)) {</span><span class="s3">\n    </span><span class="s1">if (!icon.rel &amp;&amp; rel) icon.rel = rel</span><span class="s3">\n    </span><span class="s1">return IconDescriptorLink({ icon })</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const href = icon.toString()</span><span class="s3">\n    </span><span class="s1">return &lt;link rel={rel} href={href} /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function IconsMetadata({ icons }: { icons: ResolvedMetadata['icons'] }) {</span><span class="s3">\n  </span><span class="s1">if (!icons) return null</span><span class="s3">\n\n  </span><span class="s1">const shortcutList = icons.shortcut</span><span class="s3">\n  </span><span class="s1">const iconList = icons.icon</span><span class="s3">\n  </span><span class="s1">const appleList = icons.apple</span><span class="s3">\n  </span><span class="s1">const otherList = icons.other</span><span class="s3">\n\n  </span><span class="s1">const hasIcon = Boolean(</span><span class="s3">\n    </span><span class="s1">shortcutList?.length ||</span><span class="s3">\n      </span><span class="s1">iconList?.length ||</span><span class="s3">\n      </span><span class="s1">appleList?.length ||</span><span class="s3">\n      </span><span class="s1">otherList?.length</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">if (!hasIcon) return null</span><span class="s3">\n\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">shortcutList</span><span class="s3">\n      </span><span class="s1">? shortcutList.map((icon) =&gt; IconLink({ rel: 'shortcut icon', icon }))</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">iconList ? iconList.map((icon) =&gt; IconLink({ rel: 'icon', icon })) : null,</span><span class="s3">\n    </span><span class="s1">appleList</span><span class="s3">\n      </span><span class="s1">? appleList.map((icon) =&gt; IconLink({ rel: 'apple-touch-icon', icon }))</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">otherList ? otherList.map((icon) =&gt; IconDescriptorLink({ icon })) : null,</span><span class="s3">\n    </span><span class="s1">hasIcon ? &lt;IconMark /&gt; : null,</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;IconMark&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;IconDescriptorLink&quot;</span><span class="s0">,</span><span class="s1">&quot;icon&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;rel&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;link&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;IconLink&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;IconsMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;icons&quot;</span><span class="s0">,</span><span class="s1">&quot;shortcutList&quot;</span><span class="s0">,</span><span class="s1">&quot;shortcut&quot;</span><span class="s0">,</span><span class="s1">&quot;iconList&quot;</span><span class="s0">,</span><span class="s1">&quot;appleList&quot;</span><span class="s0">,</span><span class="s1">&quot;apple&quot;</span><span class="s0">,</span><span class="s1">&quot;otherList&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;hasIcon&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;AAEA,SAASA,QAAQ,QAAQ,cAAa;AAEtC,SAASC,UAAU,QAAQ,SAAQ;;;;AAEnC,SAASC,mBAAmB,EAAEC,IAAI,EAA4B;IAC5D,MAAM,EAAEC,GAAG,EAAEC,MAAM,MAAM,EAAE,GAAGC,OAAO,GAAGH;IAExC,OAAA,WAAA,OAAO,8NAAA,EAACI,QAAAA;QAAKF,KAAKA;QAAKG,MAAMJ,IAAIK,QAAQ;QAAK,GAAGH,KAAK;;AACxD;AAEA,SAASI,SAAS,EAAEL,GAAG,EAAEF,IAAI,EAAgC;IAC3D,IAAI,OAAOA,SAAS,YAAY,CAAEA,CAAAA,gBAAgBQ,GAAE,GAAI;QACtD,IAAI,CAACR,KAAKE,GAAG,IAAIA,KAAKF,KAAKE,GAAG,GAAGA;QACjC,OAAOH,mBAAmB;YAAEC;QAAK;IACnC,OAAO;QACL,MAAMK,OAAOL,KAAKM,QAAQ;QAC1B,OAAA,WAAA,OAAO,8NAAA,EAACF,QAAAA;YAAKF,KAAKA;YAAKG,MAAMA;;IAC/B;AACF;AAEO,SAASI,cAAc,EAAEC,KAAK,EAAwC;IAC3E,IAAI,CAACA,OAAO,OAAO;IAEnB,MAAMC,eAAeD,MAAME,QAAQ;IACnC,MAAMC,WAAWH,MAAMV,IAAI;IAC3B,MAAMc,YAAYJ,MAAMK,KAAK;IAC7B,MAAMC,YAAYN,MAAMO,KAAK;IAE7B,MAAMC,UAAUC,QACdR,CAAAA,gBAAAA,OAAAA,KAAAA,IAAAA,aAAcS,MAAM,KAAA,CAClBP,YAAAA,OAAAA,KAAAA,IAAAA,SAAUO,MAAM,KAAA,CAChBN,aAAAA,OAAAA,KAAAA,IAAAA,UAAWM,MAAM,KAAA,CACjBJ,aAAAA,OAAAA,KAAAA,IAAAA,UAAWI,MAAM;IAErB,IAAI,CAACF,SAAS,OAAO;IAErB,WAAOpB,wLAAAA,EAAW;QAChBa,eACIA,aAAaU,GAAG,CAAC,CAACrB,OAASO,SAAS;gBAAEL,KAAK;gBAAiBF;YAAK,MACjE;QACJa,WAAWA,SAASQ,GAAG,CAAC,CAACrB,OAASO,SAAS;gBAAEL,KAAK;gBAAQF;YAAK,MAAM;QACrEc,YACIA,UAAUO,GAAG,CAAC,CAACrB,OAASO,SAAS;gBAAEL,KAAK;gBAAoBF;YAAK,MACjE;QACJgB,YAAYA,UAAUK,GAAG,CAAC,CAACrB,OAASD,mBAAmB;gBAAEC;YAAK,MAAM;QACpEkB,UAAAA,WAAAA,OAAU,8NAAA,EAACrB,8LAAAA,EAAAA,CAAAA,KAAc;KAC1B;AACH&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8449</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8453</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/default-metadata.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvedViewport,</span><span class="s3">\n</span><span class="s1">} from './types/metadata-interface'</span><span class="s3">\n\n</span><span class="s1">export function createDefaultViewport(): ResolvedViewport {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">// name=viewport</span><span class="s3">\n    </span><span class="s1">width: 'device-width',</span><span class="s3">\n    </span><span class="s1">initialScale: 1,</span><span class="s3">\n    </span><span class="s1">// visual metadata</span><span class="s3">\n    </span><span class="s1">themeColor: null,</span><span class="s3">\n    </span><span class="s1">colorScheme: null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createDefaultMetadata(): ResolvedMetadata {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">// Deprecated ones</span><span class="s3">\n    </span><span class="s1">viewport: null,</span><span class="s3">\n    </span><span class="s1">themeColor: null,</span><span class="s3">\n    </span><span class="s1">colorScheme: null,</span><span class="s3">\n\n    </span><span class="s1">metadataBase: null,</span><span class="s3">\n    </span><span class="s1">// Other values are all null</span><span class="s3">\n    </span><span class="s1">title: null,</span><span class="s3">\n    </span><span class="s1">description: null,</span><span class="s3">\n    </span><span class="s1">applicationName: null,</span><span class="s3">\n    </span><span class="s1">authors: null,</span><span class="s3">\n    </span><span class="s1">generator: null,</span><span class="s3">\n    </span><span class="s1">keywords: null,</span><span class="s3">\n    </span><span class="s1">referrer: null,</span><span class="s3">\n    </span><span class="s1">creator: null,</span><span class="s3">\n    </span><span class="s1">publisher: null,</span><span class="s3">\n    </span><span class="s1">robots: null,</span><span class="s3">\n    </span><span class="s1">manifest: null,</span><span class="s3">\n    </span><span class="s1">alternates: {</span><span class="s3">\n      </span><span class="s1">canonical: null,</span><span class="s3">\n      </span><span class="s1">languages: null,</span><span class="s3">\n      </span><span class="s1">media: null,</span><span class="s3">\n      </span><span class="s1">types: null,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">icons: null,</span><span class="s3">\n    </span><span class="s1">openGraph: null,</span><span class="s3">\n    </span><span class="s1">twitter: null,</span><span class="s3">\n    </span><span class="s1">verification: {},</span><span class="s3">\n    </span><span class="s1">appleWebApp: null,</span><span class="s3">\n    </span><span class="s1">formatDetection: null,</span><span class="s3">\n    </span><span class="s1">itunes: null,</span><span class="s3">\n    </span><span class="s1">facebook: null,</span><span class="s3">\n    </span><span class="s1">pinterest: null,</span><span class="s3">\n    </span><span class="s1">abstract: null,</span><span class="s3">\n    </span><span class="s1">appLinks: null,</span><span class="s3">\n    </span><span class="s1">archives: null,</span><span class="s3">\n    </span><span class="s1">assets: null,</span><span class="s3">\n    </span><span class="s1">bookmarks: null,</span><span class="s3">\n    </span><span class="s1">category: null,</span><span class="s3">\n    </span><span class="s1">classification: null,</span><span class="s3">\n    </span><span class="s1">pagination: {</span><span class="s3">\n      </span><span class="s1">previous: null,</span><span class="s3">\n      </span><span class="s1">next: null,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">other: {},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;createDefaultViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;width&quot;</span><span class="s0">,</span><span class="s1">&quot;initialScale&quot;</span><span class="s0">,</span><span class="s1">&quot;themeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;colorScheme&quot;</span><span class="s0">,</span><span class="s1">&quot;createDefaultMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;viewport&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;applicationName&quot;</span><span class="s0">,</span><span class="s1">&quot;authors&quot;</span><span class="s0">,</span><span class="s1">&quot;generator&quot;</span><span class="s0">,</span><span class="s1">&quot;keywords&quot;</span><span class="s0">,</span><span class="s1">&quot;referrer&quot;</span><span class="s0">,</span><span class="s1">&quot;creator&quot;</span><span class="s0">,</span><span class="s1">&quot;publisher&quot;</span><span class="s0">,</span><span class="s1">&quot;robots&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;alternates&quot;</span><span class="s0">,</span><span class="s1">&quot;canonical&quot;</span><span class="s0">,</span><span class="s1">&quot;languages&quot;</span><span class="s0">,</span><span class="s1">&quot;media&quot;</span><span class="s0">,</span><span class="s1">&quot;types&quot;</span><span class="s0">,</span><span class="s1">&quot;icons&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;verification&quot;</span><span class="s0">,</span><span class="s1">&quot;appleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;itunes&quot;</span><span class="s0">,</span><span class="s1">&quot;facebook&quot;</span><span class="s0">,</span><span class="s1">&quot;pinterest&quot;</span><span class="s0">,</span><span class="s1">&quot;abstract&quot;</span><span class="s0">,</span><span class="s1">&quot;appLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;archives&quot;</span><span class="s0">,</span><span class="s1">&quot;assets&quot;</span><span class="s0">,</span><span class="s1">&quot;bookmarks&quot;</span><span class="s0">,</span><span class="s1">&quot;category&quot;</span><span class="s0">,</span><span class="s1">&quot;classification&quot;</span><span class="s0">,</span><span class="s1">&quot;pagination&quot;</span><span class="s0">,</span><span class="s1">&quot;previous&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAKO,SAASA;IACd,OAAO;QACL,gBAAgB;QAChBC,OAAO;QACPC,cAAc;QACd,kBAAkB;QAClBC,YAAY;QACZC,aAAa;IACf;AACF;AAEO,SAASC;IACd,OAAO;QACL,kBAAkB;QAClBC,UAAU;QACVH,YAAY;QACZC,aAAa;QAEbG,cAAc;QACd,4BAA4B;QAC5BC,OAAO;QACPC,aAAa;QACbC,iBAAiB;QACjBC,SAAS;QACTC,WAAW;QACXC,UAAU;QACVC,UAAU;QACVC,SAAS;QACTC,WAAW;QACXC,QAAQ;QACRC,UAAU;QACVC,YAAY;YACVC,WAAW;YACXC,WAAW;YACXC,OAAO;YACPC,OAAO;QACT;QACAC,OAAO;QACPC,WAAW;QACXC,SAAS;QACTC,cAAc,CAAC;QACfC,aAAa;QACbC,iBAAiB;QACjBC,QAAQ;QACRC,UAAU;QACVC,WAAW;QACXC,UAAU;QACVC,UAAU;QACVC,UAAU;QACVC,QAAQ;QACRC,WAAW;QACXC,UAAU;QACVC,gBAAgB;QAChBC,YAAY;YACVC,UAAU;YACVC,MAAM;QACR;QACAC,OAAO,CAAC;IACV;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8520</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/isomorphic/path.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* This module is for next.js server internal usage of path module.</span><span class="s3">\n </span><span class="s1">* It will use native path module for nodejs runtime.</span><span class="s3">\n </span><span class="s1">* It will use path-browserify polyfill for edge runtime.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">let path</span><span class="s3">\n\n</span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n  </span><span class="s1">path = require('next/dist/compiled/path-browserify')</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">path = require('path')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">module.exports = path</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;CAIC,GACD,IAAIA;AAEJ,IAAIC,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACLH,OAAOI,QAAQ;AACjB;AAEAC,OAAOC,OAAO,GAAGN&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8535</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolvers/resolve-url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import path from '../../../shared/lib/isomorphic/path'</span><span class="s3">\n</span><span class="s1">import type { MetadataContext } from '../types/resolvers'</span><span class="s3">\n\n</span><span class="s1">function isStringOrURL(icon: any): icon is string | URL {</span><span class="s3">\n  </span><span class="s1">return typeof icon === 'string' || icon instanceof URL</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createLocalMetadataBase() {</span><span class="s3">\n  </span><span class="s1">// Check if experimental HTTPS is enabled</span><span class="s3">\n  </span><span class="s1">const isExperimentalHttps = Boolean(process.env.__NEXT_EXPERIMENTAL_HTTPS)</span><span class="s3">\n  </span><span class="s1">const protocol = isExperimentalHttps ? 'https' : 'http'</span><span class="s3">\n  </span><span class="s1">return new URL(`${protocol}://localhost:${process.env.PORT || 3000}`)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getPreviewDeploymentUrl(): URL | undefined {</span><span class="s3">\n  </span><span class="s1">const origin = process.env.VERCEL_BRANCH_URL || process.env.VERCEL_URL</span><span class="s3">\n  </span><span class="s1">return origin ? new URL(`https://${origin}`) : undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getProductionDeploymentUrl(): URL | undefined {</span><span class="s3">\n  </span><span class="s1">const origin = process.env.VERCEL_PROJECT_PRODUCTION_URL</span><span class="s3">\n  </span><span class="s1">return origin ? new URL(`https://${origin}`) : undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Given an optional user-provided metadataBase, this determines what the metadataBase should</span><span class="s3">\n </span><span class="s1">* fallback to. Specifically:</span><span class="s3">\n </span><span class="s1">* - In dev, it should always be localhost</span><span class="s3">\n </span><span class="s1">* - In Vercel preview builds, it should be the preview build ID</span><span class="s3">\n </span><span class="s1">* - In start, it should be the user-provided metadataBase value. Otherwise,</span><span class="s3">\n </span><span class="s1">* it'll fall back to the Vercel production deployment, and localhost as a last resort.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getSocialImageMetadataBaseFallback(</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null</span><span class="s3">\n</span><span class="s1">): URL {</span><span class="s3">\n  </span><span class="s1">const defaultMetadataBase = createLocalMetadataBase()</span><span class="s3">\n  </span><span class="s1">const previewDeploymentUrl = getPreviewDeploymentUrl()</span><span class="s3">\n  </span><span class="s1">const productionDeploymentUrl = getProductionDeploymentUrl()</span><span class="s3">\n\n  </span><span class="s1">let fallbackMetadataBase</span><span class="s3">\n  </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n    </span><span class="s1">fallbackMetadataBase = defaultMetadataBase</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">fallbackMetadataBase =</span><span class="s3">\n      </span><span class="s1">process.env.NODE_ENV === 'production' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">previewDeploymentUrl &amp;&amp;</span><span class="s3">\n      </span><span class="s1">process.env.VERCEL_ENV === 'preview'</span><span class="s3">\n        </span><span class="s1">? previewDeploymentUrl</span><span class="s3">\n        </span><span class="s1">: metadataBase || productionDeploymentUrl || defaultMetadataBase</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return fallbackMetadataBase</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function resolveUrl(url: null | undefined, metadataBase: URL | null): null</span><span class="s3">\n</span><span class="s1">function resolveUrl(url: string | URL, metadataBase: URL | null): URL</span><span class="s3">\n</span><span class="s1">function resolveUrl(</span><span class="s3">\n  </span><span class="s1">url: string | URL | null | undefined,</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null</span><span class="s3">\n</span><span class="s1">): URL | null</span><span class="s3">\n</span><span class="s1">function resolveUrl(</span><span class="s3">\n  </span><span class="s1">url: string | URL | null | undefined,</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null</span><span class="s3">\n</span><span class="s1">): URL | null {</span><span class="s3">\n  </span><span class="s1">if (url instanceof URL) return url</span><span class="s3">\n  </span><span class="s1">if (!url) return null</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">// If we can construct a URL instance from url, ignore metadataBase</span><span class="s3">\n    </span><span class="s1">const parsedUrl = new URL(url)</span><span class="s3">\n    </span><span class="s1">return parsedUrl</span><span class="s3">\n  </span><span class="s1">} catch {}</span><span class="s3">\n\n  </span><span class="s1">if (!metadataBase) {</span><span class="s3">\n    </span><span class="s1">metadataBase = createLocalMetadataBase()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Handle relative or absolute paths</span><span class="s3">\n  </span><span class="s1">const pathname = metadataBase.pathname || ''</span><span class="s3">\n  </span><span class="s1">const joinedPath = path.posix.join(pathname, url)</span><span class="s3">\n\n  </span><span class="s1">return new URL(joinedPath, metadataBase)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Resolve with `pathname` if `url` is a relative path.</span><span class="s3">\n</span><span class="s1">function resolveRelativeUrl(url: string | URL, pathname: string): string | URL {</span><span class="s3">\n  </span><span class="s1">if (typeof url === 'string' &amp;&amp; url.startsWith('./')) {</span><span class="s3">\n    </span><span class="s1">return path.posix.resolve(pathname, url)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return url</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// The regex is matching logic from packages/next/src/lib/load-custom-routes.ts</span><span class="s3">\n</span><span class="s1">const FILE_REGEX =</span><span class="s3">\n  </span><span class="s1">/^(?:</span><span class="s3">\\</span><span class="s1">/((?!</span><span class="s3">\\</span><span class="s1">.well-known(?:</span><span class="s3">\\</span><span class="s1">/.*)?)(?:[^/]+</span><span class="s3">\\</span><span class="s1">/)*[^/]+</span><span class="s3">\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">w+))(</span><span class="s3">\\</span><span class="s1">/?|$)/i</span><span class="s3">\n</span><span class="s1">function isFilePattern(pathname: string): boolean {</span><span class="s3">\n  </span><span class="s1">return FILE_REGEX.test(pathname)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Resolve `pathname` if `url` is a relative path the compose with `metadataBase`.</span><span class="s3">\n</span><span class="s1">function resolveAbsoluteUrlWithPathname(</span><span class="s3">\n  </span><span class="s1">url: string | URL,</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null,</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">{ trailingSlash }: MetadataContext</span><span class="s3">\n</span><span class="s1">): string {</span><span class="s3">\n  </span><span class="s1">// Resolve url with pathname that always starts with `/`</span><span class="s3">\n  </span><span class="s1">url = resolveRelativeUrl(url, pathname)</span><span class="s3">\n\n  </span><span class="s1">// Convert string url or URL instance to absolute url string,</span><span class="s3">\n  </span><span class="s1">// if there's case needs to be resolved with metadataBase</span><span class="s3">\n  </span><span class="s1">let resolvedUrl = ''</span><span class="s3">\n  </span><span class="s1">const result = metadataBase ? resolveUrl(url, metadataBase) : url</span><span class="s3">\n  </span><span class="s1">if (typeof result === 'string') {</span><span class="s3">\n    </span><span class="s1">resolvedUrl = result</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">resolvedUrl = result.pathname === '/' ? result.origin : result.href</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Add trailing slash if it's enabled for urls matches the condition</span><span class="s3">\n  </span><span class="s1">// - Not external, same origin with metadataBase</span><span class="s3">\n  </span><span class="s1">// - Doesn't have query</span><span class="s3">\n  </span><span class="s1">if (trailingSlash &amp;&amp; !resolvedUrl.endsWith('/')) {</span><span class="s3">\n    </span><span class="s1">let isRelative = resolvedUrl.startsWith('/')</span><span class="s3">\n    </span><span class="s1">let hasQuery = resolvedUrl.includes('?')</span><span class="s3">\n    </span><span class="s1">let isExternal = false</span><span class="s3">\n    </span><span class="s1">let isFileUrl = false</span><span class="s3">\n\n    </span><span class="s1">if (!isRelative) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const parsedUrl = new URL(resolvedUrl)</span><span class="s3">\n        </span><span class="s1">isExternal =</span><span class="s3">\n          </span><span class="s1">metadataBase != null &amp;&amp; parsedUrl.origin !== metadataBase.origin</span><span class="s3">\n        </span><span class="s1">isFileUrl = isFilePattern(parsedUrl.pathname)</span><span class="s3">\n      </span><span class="s1">} catch {</span><span class="s3">\n        </span><span class="s1">// If it's not a valid URL, treat it as external</span><span class="s3">\n        </span><span class="s1">isExternal = true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">// Do not apply trailing slash for file like urls, aligning with the behavior with `trailingSlash`</span><span class="s3">\n        </span><span class="s1">!isFileUrl &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!isExternal &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!hasQuery</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return `${resolvedUrl}/`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return resolvedUrl</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">isStringOrURL,</span><span class="s3">\n  </span><span class="s1">resolveUrl,</span><span class="s3">\n  </span><span class="s1">resolveRelativeUrl,</span><span class="s3">\n  </span><span class="s1">resolveAbsoluteUrlWithPathname,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;isStringOrURL&quot;</span><span class="s0">,</span><span class="s1">&quot;icon&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;createLocalMetadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;isExperimentalHttps&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_EXPERIMENTAL_HTTPS&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;PORT&quot;</span><span class="s0">,</span><span class="s1">&quot;getPreviewDeploymentUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL_BRANCH_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;getProductionDeploymentUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL_PROJECT_PRODUCTION_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;getSocialImageMetadataBaseFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultMetadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;previewDeploymentUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;productionDeploymentUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackMetadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;joinedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;posix&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveRelativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;FILE_REGEX&quot;</span><span class="s0">,</span><span class="s1">&quot;isFilePattern&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAbsoluteUrlWithPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;isRelative&quot;</span><span class="s0">,</span><span class="s1">&quot;hasQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;isExternal&quot;</span><span class="s0">,</span><span class="s1">&quot;isFileUrl&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8646</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolvers/resolve-title.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Metadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { AbsoluteTemplateString } from '../types/metadata-types'</span><span class="s3">\n\n</span><span class="s1">function resolveTitleTemplate(</span><span class="s3">\n  </span><span class="s1">template: string | null | undefined,</span><span class="s3">\n  </span><span class="s1">title: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return template ? template.replace(/%s/g, title) : title</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function resolveTitle(</span><span class="s3">\n  </span><span class="s1">title: Metadata['title'],</span><span class="s3">\n  </span><span class="s1">stashedTemplate: string | null | undefined</span><span class="s3">\n</span><span class="s1">): AbsoluteTemplateString {</span><span class="s3">\n  </span><span class="s1">let resolved</span><span class="s3">\n  </span><span class="s1">const template =</span><span class="s3">\n    </span><span class="s1">typeof title !== 'string' &amp;&amp; title &amp;&amp; 'template' in title</span><span class="s3">\n      </span><span class="s1">? title.template</span><span class="s3">\n      </span><span class="s1">: null</span><span class="s3">\n\n  </span><span class="s1">if (typeof title === 'string') {</span><span class="s3">\n    </span><span class="s1">resolved = resolveTitleTemplate(stashedTemplate, title)</span><span class="s3">\n  </span><span class="s1">} else if (title) {</span><span class="s3">\n    </span><span class="s1">if ('default' in title) {</span><span class="s3">\n      </span><span class="s1">resolved = resolveTitleTemplate(stashedTemplate, title.default)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if ('absolute' in title &amp;&amp; title.absolute) {</span><span class="s3">\n      </span><span class="s1">resolved = title.absolute</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (title &amp;&amp; typeof title !== 'string') {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">template,</span><span class="s3">\n      </span><span class="s1">absolute: resolved || '',</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return { absolute: resolved || title || '', template }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveTitleTemplate&quot;</span><span class="s0">,</span><span class="s1">&quot;template&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;stashedTemplate&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;absolute&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAGA,SAASA,qBACPC,QAAmC,EACnCC,KAAa;IAEb,OAAOD,WAAWA,SAASE,OAAO,CAAC,OAAOD,SAASA;AACrD;AAEO,SAASE,aACdF,KAAwB,EACxBG,eAA0C;IAE1C,IAAIC;IACJ,MAAML,WACJ,OAAOC,UAAU,YAAYA,SAAS,cAAcA,QAChDA,MAAMD,QAAQ,GACd;IAEN,IAAI,OAAOC,UAAU,UAAU;QAC7BI,WAAWN,qBAAqBK,iBAAiBH;IACnD,OAAO,IAAIA,OAAO;QAChB,IAAI,aAAaA,OAAO;YACtBI,WAAWN,qBAAqBK,iBAAiBH,MAAMK,OAAO;QAChE;QACA,IAAI,cAAcL,SAASA,MAAMM,QAAQ,EAAE;YACzCF,WAAWJ,MAAMM,QAAQ;QAC3B;IACF;IAEA,IAAIN,SAAS,OAAOA,UAAU,UAAU;QACtC,OAAO;YACLD;YACAO,UAAUF,YAAY;QACxB;IACF,OAAO;QACL,OAAO;YAAEE,UAAUF,YAAYJ,SAAS;YAAID;QAAS;IACvD;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8682</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/app-router-headers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const RSC_HEADER = 'rsc' as const</span><span class="s3">\n</span><span class="s1">export const ACTION_HEADER = 'next-action' as const</span><span class="s3">\n</span><span class="s1">// TODO: Instead of sending the full router state, we only need to send the</span><span class="s3">\n</span><span class="s1">// segment path. Saves bytes. Then we could also use this field for segment</span><span class="s3">\n</span><span class="s1">// prefetches, which also need to specify a particular segment.</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_STATE_TREE_HEADER = 'next-router-state-tree' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_PREFETCH_HEADER = 'next-router-prefetch' as const</span><span class="s3">\n</span><span class="s1">// This contains the path to the segment being prefetched.</span><span class="s3">\n</span><span class="s1">// TODO: If we change next-router-state-tree to be a segment path, we can use</span><span class="s3">\n</span><span class="s1">// that instead. Then next-router-prefetch and next-router-segment-prefetch can</span><span class="s3">\n</span><span class="s1">// be merged into a single enum.</span><span class="s3">\n</span><span class="s1">export const NEXT_ROUTER_SEGMENT_PREFETCH_HEADER =</span><span class="s3">\n  </span><span class="s1">'next-router-segment-prefetch' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_HMR_REFRESH_HEADER = 'next-hmr-refresh' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_URL = 'next-url' as const</span><span class="s3">\n</span><span class="s1">export const RSC_CONTENT_TYPE_HEADER = 'text/x-component' as const</span><span class="s3">\n\n</span><span class="s1">export const FLIGHT_HEADERS = [</span><span class="s3">\n  </span><span class="s1">RSC_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_STATE_TREE_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_PREFETCH_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_HMR_REFRESH_HEADER,</span><span class="s3">\n  </span><span class="s1">NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n\n</span><span class="s1">export const NEXT_RSC_UNION_QUERY = '_rsc' as const</span><span class="s3">\n\n</span><span class="s1">export const NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender' as const</span><span class="s3">\n</span><span class="s1">export const NEXT_ACTION_NOT_FOUND_HEADER = 'x-nextjs-action-not-found' as const</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RSC_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;ACTION_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_STATE_TREE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_PREFETCH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_SEGMENT_PREFETCH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_HMR_REFRESH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_HMR_REFRESH_HASH_COOKIE&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;FLIGHT_HEADERS&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RSC_UNION_QUERY&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ROUTER_STALE_TIME_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_DID_POSTPONE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_REWRITTEN_PATH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_REWRITTEN_QUERY_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_IS_PRERENDER_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_ACTION_NOT_FOUND_HEADER&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAMA,aAAa,MAAc;AACjC,MAAMC,gBAAgB,cAAsB;AAI5C,MAAMC,gCAAgC,yBAAiC;AACvE,MAAMC,8BAA8B,uBAA+B;AAKnE,MAAMC,sCACX,+BAAuC;AAClC,MAAMC,0BAA0B,mBAA2B;AAC3D,MAAMC,+BAA+B,4BAAoC;AACzE,MAAMC,WAAW,WAAmB;AACpC,MAAMC,0BAA0B,mBAA2B;AAE3D,MAAMC,iBAAiB;IAC5BT;IACAE;IACAC;IACAE;IACAD;CACD,CAAS;AAEH,MAAMM,uBAAuB,OAAe;AAE5C,MAAMC,gCAAgC,sBAA8B;AACpE,MAAMC,2BAA2B,qBAA6B;AAC9D,MAAMC,6BAA6B,0BAAkC;AACrE,MAAMC,8BAA8B,2BAAmC;AACvE,MAAMC,2BAA2B,qBAA6B;AAC9D,MAAMC,+BAA+B,4BAAoC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8745</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { UrlWithParsedQuery } from 'url'</span><span class="s3">\n</span><span class="s1">import { NEXT_RSC_UNION_QUERY } from '../client/components/app-router-headers'</span><span class="s3">\n\n</span><span class="s1">const DUMMY_ORIGIN = 'http://n'</span><span class="s3">\n\n</span><span class="s1">export function isFullStringUrl(url: string) {</span><span class="s3">\n  </span><span class="s1">return /https?:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">//.test(url)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseUrl(url: string): URL | undefined {</span><span class="s3">\n  </span><span class="s1">let parsed: URL | undefined = undefined</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">parsed = new URL(url, DUMMY_ORIGIN)</span><span class="s3">\n  </span><span class="s1">} catch {}</span><span class="s3">\n  </span><span class="s1">return parsed</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseReqUrl(url: string): UrlWithParsedQuery | undefined {</span><span class="s3">\n  </span><span class="s1">const parsedUrl: URL | undefined = parseUrl(url)</span><span class="s3">\n\n  </span><span class="s1">if (!parsedUrl) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const query: Record&lt;string, string | string[]&gt; = {}</span><span class="s3">\n\n  </span><span class="s1">for (const key of parsedUrl.searchParams.keys()) {</span><span class="s3">\n    </span><span class="s1">const values = parsedUrl.searchParams.getAll(key)</span><span class="s3">\n    </span><span class="s1">query[key] = values.length &gt; 1 ? values : values[0]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const legacyUrl: UrlWithParsedQuery = {</span><span class="s3">\n    </span><span class="s1">query,</span><span class="s3">\n    </span><span class="s1">hash: parsedUrl.hash,</span><span class="s3">\n    </span><span class="s1">search: parsedUrl.search,</span><span class="s3">\n    </span><span class="s1">path: parsedUrl.pathname,</span><span class="s3">\n    </span><span class="s1">pathname: parsedUrl.pathname,</span><span class="s3">\n    </span><span class="s1">href: `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`,</span><span class="s3">\n    </span><span class="s1">host: '',</span><span class="s3">\n    </span><span class="s1">hostname: '',</span><span class="s3">\n    </span><span class="s1">auth: '',</span><span class="s3">\n    </span><span class="s1">protocol: '',</span><span class="s3">\n    </span><span class="s1">slashes: null,</span><span class="s3">\n    </span><span class="s1">port: '',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return legacyUrl</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function stripNextRscUnionQuery(relativeUrl: string): string {</span><span class="s3">\n  </span><span class="s1">const urlInstance = new URL(relativeUrl, DUMMY_ORIGIN)</span><span class="s3">\n  </span><span class="s1">urlInstance.searchParams.delete(NEXT_RSC_UNION_QUERY)</span><span class="s3">\n\n  </span><span class="s1">return urlInstance.pathname + urlInstance.search</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NEXT_RSC_UNION_QUERY&quot;</span><span class="s0">,</span><span class="s1">&quot;DUMMY_ORIGIN&quot;</span><span class="s0">,</span><span class="s1">&quot;isFullStringUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;parseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parsed&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;parseReqUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;getAll&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;legacyUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;auth&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;slashes&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;stripNextRscUnionQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;urlInstance&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AACA,SAASA,oBAAoB,QAAQ,0CAAyC;;AAE9E,MAAMC,eAAe;AAEd,SAASC,gBAAgBC,GAAW;IACzC,OAAO,cAAcC,IAAI,CAACD;AAC5B;AAEO,SAASE,SAASF,GAAW;IAClC,IAAIG,SAA0BC;IAC9B,IAAI;QACFD,SAAS,IAAIE,IAAIL,KAAKF;IACxB,EAAE,OAAM,CAAC;IACT,OAAOK;AACT;AAEO,SAASG,YAAYN,GAAW;IACrC,MAAMO,YAA6BL,SAASF;IAE5C,IAAI,CAACO,WAAW;QACd;IACF;IAEA,MAAMC,QAA2C,CAAC;IAElD,KAAK,MAAMC,OAAOF,UAAUG,YAAY,CAACC,IAAI,GAAI;QAC/C,MAAMC,SAASL,UAAUG,YAAY,CAACG,MAAM,CAACJ;QAC7CD,KAAK,CAACC,IAAI,GAAGG,OAAOE,MAAM,GAAG,IAAIF,SAASA,MAAM,CAAC,EAAE;IACrD;IAEA,MAAMG,YAAgC;QACpCP;QACAQ,MAAMT,UAAUS,IAAI;QACpBC,QAAQV,UAAUU,MAAM;QACxBC,MAAMX,UAAUY,QAAQ;QACxBA,UAAUZ,UAAUY,QAAQ;QAC5BC,MAAM,GAAGb,UAAUY,QAAQ,GAAGZ,UAAUU,MAAM,GAAGV,UAAUS,IAAI,EAAE;QACjEK,MAAM;QACNC,UAAU;QACVC,MAAM;QACNC,UAAU;QACVC,SAAS;QACTC,MAAM;IACR;IACA,OAAOX;AACT;AAEO,SAASY,uBAAuBC,WAAmB;IACxD,MAAMC,cAAc,IAAIxB,IAAIuB,aAAa9B;IACzC+B,YAAYnB,YAAY,CAACoB,MAAM,CAACjC,+MAAAA;IAEhC,OAAOgC,YAAYV,QAAQ,GAAGU,YAAYZ,MAAM;AAClD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8803</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/picocolors.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// ISC License</span><span class="s3">\n\n</span><span class="s1">// Copyright (c) 2021 Alexey Raspopov, Kostiantyn Denysov, Anton Verinov</span><span class="s3">\n\n</span><span class="s1">// Permission to use, copy, modify, and/or distribute this software for any</span><span class="s3">\n</span><span class="s1">// purpose with or without fee is hereby granted, provided that the above</span><span class="s3">\n</span><span class="s1">// copyright notice and this permission notice appear in all copies.</span><span class="s3">\n\n</span><span class="s1">// THE SOFTWARE IS PROVIDED </span><span class="s3">\&quot;</span><span class="s1">AS IS</span><span class="s3">\&quot; </span><span class="s1">AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span><span class="s3">\n</span><span class="s1">// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span><span class="s3">\n</span><span class="s1">// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span><span class="s3">\n</span><span class="s1">// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span><span class="s3">\n</span><span class="s1">// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span><span class="s3">\n</span><span class="s1">// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span><span class="s3">\n</span><span class="s1">// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// https://github.com/alexeyraspopov/picocolors/blob/b6261487e7b81aaab2440e397a356732cad9e342/picocolors.js#L1</span><span class="s3">\n\n</span><span class="s1">const { env, stdout } = globalThis?.process ?? {}</span><span class="s3">\n\n</span><span class="s1">const enabled =</span><span class="s3">\n  </span><span class="s1">env &amp;&amp;</span><span class="s3">\n  </span><span class="s1">!env.NO_COLOR &amp;&amp;</span><span class="s3">\n  </span><span class="s1">(env.FORCE_COLOR || (stdout?.isTTY &amp;&amp; !env.CI &amp;&amp; env.TERM !== 'dumb'))</span><span class="s3">\n\n</span><span class="s1">const replaceClose = (</span><span class="s3">\n  </span><span class="s1">str: string,</span><span class="s3">\n  </span><span class="s1">close: string,</span><span class="s3">\n  </span><span class="s1">replace: string,</span><span class="s3">\n  </span><span class="s1">index: number</span><span class="s3">\n</span><span class="s1">): string =&gt; {</span><span class="s3">\n  </span><span class="s1">const start = str.substring(0, index) + replace</span><span class="s3">\n  </span><span class="s1">const end = str.substring(index + close.length)</span><span class="s3">\n  </span><span class="s1">const nextIndex = end.indexOf(close)</span><span class="s3">\n  </span><span class="s1">return ~nextIndex</span><span class="s3">\n    </span><span class="s1">? start + replaceClose(end, close, replace, nextIndex)</span><span class="s3">\n    </span><span class="s1">: start + end</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const formatter = (open: string, close: string, replace = open) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!enabled) return String</span><span class="s3">\n  </span><span class="s1">return (input: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">const string = '' + input</span><span class="s3">\n    </span><span class="s1">const index = string.indexOf(close, open.length)</span><span class="s3">\n    </span><span class="s1">return ~index</span><span class="s3">\n      </span><span class="s1">? open + replaceClose(string, close, replace, index) + close</span><span class="s3">\n      </span><span class="s1">: open + string + close</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const reset = enabled ? (s: string) =&gt; `</span><span class="s3">\\</span><span class="s1">x1b[0m${s}</span><span class="s3">\\</span><span class="s1">x1b[0m` : String</span><span class="s3">\n</span><span class="s1">export const bold = formatter('</span><span class="s3">\\</span><span class="s1">x1b[1m', '</span><span class="s3">\\</span><span class="s1">x1b[22m', '</span><span class="s3">\\</span><span class="s1">x1b[22m</span><span class="s3">\\</span><span class="s1">x1b[1m')</span><span class="s3">\n</span><span class="s1">export const dim = formatter('</span><span class="s3">\\</span><span class="s1">x1b[2m', '</span><span class="s3">\\</span><span class="s1">x1b[22m', '</span><span class="s3">\\</span><span class="s1">x1b[22m</span><span class="s3">\\</span><span class="s1">x1b[2m')</span><span class="s3">\n</span><span class="s1">export const italic = formatter('</span><span class="s3">\\</span><span class="s1">x1b[3m', '</span><span class="s3">\\</span><span class="s1">x1b[23m')</span><span class="s3">\n</span><span class="s1">export const underline = formatter('</span><span class="s3">\\</span><span class="s1">x1b[4m', '</span><span class="s3">\\</span><span class="s1">x1b[24m')</span><span class="s3">\n</span><span class="s1">export const inverse = formatter('</span><span class="s3">\\</span><span class="s1">x1b[7m', '</span><span class="s3">\\</span><span class="s1">x1b[27m')</span><span class="s3">\n</span><span class="s1">export const hidden = formatter('</span><span class="s3">\\</span><span class="s1">x1b[8m', '</span><span class="s3">\\</span><span class="s1">x1b[28m')</span><span class="s3">\n</span><span class="s1">export const strikethrough = formatter('</span><span class="s3">\\</span><span class="s1">x1b[9m', '</span><span class="s3">\\</span><span class="s1">x1b[29m')</span><span class="s3">\n</span><span class="s1">export const black = formatter('</span><span class="s3">\\</span><span class="s1">x1b[30m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const red = formatter('</span><span class="s3">\\</span><span class="s1">x1b[31m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const green = formatter('</span><span class="s3">\\</span><span class="s1">x1b[32m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const yellow = formatter('</span><span class="s3">\\</span><span class="s1">x1b[33m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const blue = formatter('</span><span class="s3">\\</span><span class="s1">x1b[34m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const magenta = formatter('</span><span class="s3">\\</span><span class="s1">x1b[35m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const purple = formatter('</span><span class="s3">\\</span><span class="s1">x1b[38;2;173;127;168m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const cyan = formatter('</span><span class="s3">\\</span><span class="s1">x1b[36m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const white = formatter('</span><span class="s3">\\</span><span class="s1">x1b[37m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const gray = formatter('</span><span class="s3">\\</span><span class="s1">x1b[90m', '</span><span class="s3">\\</span><span class="s1">x1b[39m')</span><span class="s3">\n</span><span class="s1">export const bgBlack = formatter('</span><span class="s3">\\</span><span class="s1">x1b[40m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgRed = formatter('</span><span class="s3">\\</span><span class="s1">x1b[41m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgGreen = formatter('</span><span class="s3">\\</span><span class="s1">x1b[42m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgYellow = formatter('</span><span class="s3">\\</span><span class="s1">x1b[43m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgBlue = formatter('</span><span class="s3">\\</span><span class="s1">x1b[44m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgMagenta = formatter('</span><span class="s3">\\</span><span class="s1">x1b[45m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgCyan = formatter('</span><span class="s3">\\</span><span class="s1">x1b[46m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">export const bgWhite = formatter('</span><span class="s3">\\</span><span class="s1">x1b[47m', '</span><span class="s3">\\</span><span class="s1">x1b[49m')</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;enabled&quot;</span><span class="s0">,</span><span class="s1">&quot;NO_COLOR&quot;</span><span class="s0">,</span><span class="s1">&quot;FORCE_COLOR&quot;</span><span class="s0">,</span><span class="s1">&quot;isTTY&quot;</span><span class="s0">,</span><span class="s1">&quot;CI&quot;</span><span class="s0">,</span><span class="s1">&quot;TERM&quot;</span><span class="s0">,</span><span class="s1">&quot;replaceClose&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;nextIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;formatter&quot;</span><span class="s0">,</span><span class="s1">&quot;open&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;string&quot;</span><span class="s0">,</span><span class="s1">&quot;reset&quot;</span><span class="s0">,</span><span class="s1">&quot;s&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;dim&quot;</span><span class="s0">,</span><span class="s1">&quot;italic&quot;</span><span class="s0">,</span><span class="s1">&quot;underline&quot;</span><span class="s0">,</span><span class="s1">&quot;inverse&quot;</span><span class="s0">,</span><span class="s1">&quot;hidden&quot;</span><span class="s0">,</span><span class="s1">&quot;strikethrough&quot;</span><span class="s0">,</span><span class="s1">&quot;black&quot;</span><span class="s0">,</span><span class="s1">&quot;red&quot;</span><span class="s0">,</span><span class="s1">&quot;green&quot;</span><span class="s0">,</span><span class="s1">&quot;yellow&quot;</span><span class="s0">,</span><span class="s1">&quot;blue&quot;</span><span class="s0">,</span><span class="s1">&quot;magenta&quot;</span><span class="s0">,</span><span class="s1">&quot;purple&quot;</span><span class="s0">,</span><span class="s1">&quot;cyan&quot;</span><span class="s0">,</span><span class="s1">&quot;white&quot;</span><span class="s0">,</span><span class="s1">&quot;gray&quot;</span><span class="s0">,</span><span class="s1">&quot;bgBlack&quot;</span><span class="s0">,</span><span class="s1">&quot;bgRed&quot;</span><span class="s0">,</span><span class="s1">&quot;bgGreen&quot;</span><span class="s0">,</span><span class="s1">&quot;bgYellow&quot;</span><span class="s0">,</span><span class="s1">&quot;bgBlue&quot;</span><span class="s0">,</span><span class="s1">&quot;bgMagenta&quot;</span><span class="s0">,</span><span class="s1">&quot;bgCyan&quot;</span><span class="s0">,</span><span class="s1">&quot;bgWhite&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,cAAc;AAEd,wEAAwE;AAExE,2EAA2E;AAC3E,yEAAyE;AACzE,oEAAoE;AAEpE,2EAA2E;AAC3E,mEAAmE;AACnE,0EAA0E;AAC1E,yEAAyE;AACzE,wEAAwE;AACxE,0EAA0E;AAC1E,iEAAiE;AACjE,EAAE;AACF,8GAA8G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEtFA;AAAxB,MAAM,EAAEC,GAAG,EAAEC,MAAM,EAAE,GAAGF,CAAAA,CAAAA,cAAAA,UAAAA,KAAAA,OAAAA,KAAAA,IAAAA,YAAYG,OAAO,KAAI,CAAC;AAEhD,MAAMC,UACJH,OACA,CAACA,IAAII,QAAQ,IACZJ,CAAAA,IAAIK,WAAW,IAAKJ,CAAAA,UAAAA,OAAAA,KAAAA,IAAAA,OAAQK,KAAK,KAAI,CAACN,IAAIO,EAAE,IAAIP,IAAIQ,IAAI,KAAK,MAAM;AAEtE,MAAMC,eAAe,CACnBC,KACAC,OACAC,SACAC;IAEA,MAAMC,QAAQJ,IAAIK,SAAS,CAAC,GAAGF,SAASD;IACxC,MAAMI,MAAMN,IAAIK,SAAS,CAACF,QAAQF,MAAMM,MAAM;IAC9C,MAAMC,YAAYF,IAAIG,OAAO,CAACR;IAC9B,OAAO,CAACO,YACJJ,QAAQL,aAAaO,KAAKL,OAAOC,SAASM,aAC1CJ,QAAQE;AACd;AAEA,MAAMI,YAAY,CAACC,MAAcV,OAAeC,UAAUS,IAAI;IAC5D,IAAI,CAAClB,SAAS,OAAOmB;IACrB,OAAO,CAACC;QACN,MAAMC,SAAS,KAAKD;QACpB,MAAMV,QAAQW,OAAOL,OAAO,CAACR,OAAOU,KAAKJ,MAAM;QAC/C,OAAO,CAACJ,QACJQ,OAAOZ,aAAae,QAAQb,OAAOC,SAASC,SAASF,QACrDU,OAAOG,SAASb;IACtB;AACF;AAEO,MAAMc,QAAQtB,UAAU,CAACuB,IAAc,CAAC,OAAO,EAAEA,EAAE,OAAO,CAAC,GAAGJ,OAAM;AACpE,MAAMK,OAAOP,UAAU,WAAW,YAAY,mBAAkB;AAChE,MAAMQ,MAAMR,UAAU,WAAW,YAAY,mBAAkB;AAC/D,MAAMS,SAAST,UAAU,WAAW,YAAW;AAC/C,MAAMU,YAAYV,UAAU,WAAW,YAAW;AAClD,MAAMW,UAAUX,UAAU,WAAW,YAAW;AAChD,MAAMY,SAASZ,UAAU,WAAW,YAAW;AAC/C,MAAMa,gBAAgBb,UAAU,WAAW,YAAW;AACtD,MAAMc,QAAQd,UAAU,YAAY,YAAW;AAC/C,MAAMe,MAAMf,UAAU,YAAY,YAAW;AAC7C,MAAMgB,QAAQhB,UAAU,YAAY,YAAW;AAC/C,MAAMiB,SAASjB,UAAU,YAAY,YAAW;AAChD,MAAMkB,OAAOlB,UAAU,YAAY,YAAW;AAC9C,MAAMmB,UAAUnB,UAAU,YAAY,YAAW;AACjD,MAAMoB,SAASpB,UAAU,0BAA0B,YAAW;AAC9D,MAAMqB,OAAOrB,UAAU,YAAY,YAAW;AAC9C,MAAMsB,QAAQtB,UAAU,YAAY,YAAW;AAC/C,MAAMuB,OAAOvB,UAAU,YAAY,YAAW;AAC9C,MAAMwB,UAAUxB,UAAU,YAAY,YAAW;AACjD,MAAMyB,QAAQzB,UAAU,YAAY,YAAW;AAC/C,MAAM0B,UAAU1B,UAAU,YAAY,YAAW;AACjD,MAAM2B,WAAW3B,UAAU,YAAY,YAAW;AAClD,MAAM4B,SAAS5B,UAAU,YAAY,YAAW;AAChD,MAAM6B,YAAY7B,UAAU,YAAY,YAAW;AACnD,MAAM8B,SAAS9B,UAAU,YAAY,YAAW;AAChD,MAAM+B,UAAU/B,UAAU,YAAY,YAAW&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">8918</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/lru-cache.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Node in the doubly-linked list used for LRU tracking.</span><span class="s3">\n </span><span class="s1">* Each node represents a cache entry with bidirectional pointers.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">class LRUNode&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">public readonly key: string</span><span class="s3">\n  </span><span class="s1">public data: T</span><span class="s3">\n  </span><span class="s1">public size: number</span><span class="s3">\n  </span><span class="s1">public prev: LRUNode&lt;T&gt; | SentinelNode&lt;T&gt; | null = null</span><span class="s3">\n  </span><span class="s1">public next: LRUNode&lt;T&gt; | SentinelNode&lt;T&gt; | null = null</span><span class="s3">\n\n  </span><span class="s1">constructor(key: string, data: T, size: number) {</span><span class="s3">\n    </span><span class="s1">this.key = key</span><span class="s3">\n    </span><span class="s1">this.data = data</span><span class="s3">\n    </span><span class="s1">this.size = size</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Sentinel node used for head/tail boundaries.</span><span class="s3">\n </span><span class="s1">* These nodes don't contain actual cache data but simplify list operations.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">class SentinelNode&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">public prev: LRUNode&lt;T&gt; | SentinelNode&lt;T&gt; | null = null</span><span class="s3">\n  </span><span class="s1">public next: LRUNode&lt;T&gt; | SentinelNode&lt;T&gt; | null = null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* LRU (Least Recently Used) Cache implementation using a doubly-linked list</span><span class="s3">\n </span><span class="s1">* and hash map for O(1) operations.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Algorithm:</span><span class="s3">\n </span><span class="s1">* - Uses a doubly-linked list to maintain access order (most recent at head)</span><span class="s3">\n </span><span class="s1">* - Hash map provides O(1) key-to-node lookup</span><span class="s3">\n </span><span class="s1">* - Sentinel head/tail nodes simplify edge case handling</span><span class="s3">\n </span><span class="s1">* - Size-based eviction supports custom size calculation functions</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Data Structure Layout:</span><span class="s3">\n </span><span class="s1">* HEAD &lt;-&gt; [most recent] &lt;-&gt; ... &lt;-&gt; [least recent] &lt;-&gt; TAIL</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Operations:</span><span class="s3">\n </span><span class="s1">* - get(): Move accessed node to head (mark as most recent)</span><span class="s3">\n </span><span class="s1">* - set(): Add new node at head, evict from tail if over capacity</span><span class="s3">\n </span><span class="s1">* - Eviction: Remove least recent node (tail.prev) when size exceeds limit</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export class LRUCache&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">private readonly cache: Map&lt;string, LRUNode&lt;T&gt;&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">private readonly head: SentinelNode&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">private readonly tail: SentinelNode&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">private totalSize: number = 0</span><span class="s3">\n  </span><span class="s1">private readonly maxSize: number</span><span class="s3">\n  </span><span class="s1">private readonly calculateSize: ((value: T) =&gt; number) | undefined</span><span class="s3">\n\n  </span><span class="s1">constructor(maxSize: number, calculateSize?: (value: T) =&gt; number) {</span><span class="s3">\n    </span><span class="s1">this.maxSize = maxSize</span><span class="s3">\n    </span><span class="s1">this.calculateSize = calculateSize</span><span class="s3">\n\n    </span><span class="s1">// Create sentinel nodes to simplify doubly-linked list operations</span><span class="s3">\n    </span><span class="s1">// HEAD &lt;-&gt; TAIL (empty list)</span><span class="s3">\n    </span><span class="s1">this.head = new SentinelNode&lt;T&gt;()</span><span class="s3">\n    </span><span class="s1">this.tail = new SentinelNode&lt;T&gt;()</span><span class="s3">\n    </span><span class="s1">this.head.next = this.tail</span><span class="s3">\n    </span><span class="s1">this.tail.prev = this.head</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Adds a node immediately after the head (marks as most recently used).</span><span class="s3">\n   </span><span class="s1">* Used when inserting new items or when an item is accessed.</span><span class="s3">\n   </span><span class="s1">* PRECONDITION: node must be disconnected (prev/next should be null)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private addToHead(node: LRUNode&lt;T&gt;): void {</span><span class="s3">\n    </span><span class="s1">node.prev = this.head</span><span class="s3">\n    </span><span class="s1">node.next = this.head.next</span><span class="s3">\n    </span><span class="s1">// head.next is always non-null (points to tail or another node)</span><span class="s3">\n    </span><span class="s1">this.head.next!.prev = node</span><span class="s3">\n    </span><span class="s1">this.head.next = node</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Removes a node from its current position in the doubly-linked list.</span><span class="s3">\n   </span><span class="s1">* Updates the prev/next pointers of adjacent nodes to maintain list integrity.</span><span class="s3">\n   </span><span class="s1">* PRECONDITION: node must be connected (prev/next are non-null)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private removeNode(node: LRUNode&lt;T&gt;): void {</span><span class="s3">\n    </span><span class="s1">// Connected nodes always have non-null prev/next</span><span class="s3">\n    </span><span class="s1">node.prev!.next = node.next</span><span class="s3">\n    </span><span class="s1">node.next!.prev = node.prev</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Moves an existing node to the head position (marks as most recently used).</span><span class="s3">\n   </span><span class="s1">* This is the core LRU operation - accessed items become most recent.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private moveToHead(node: LRUNode&lt;T&gt;): void {</span><span class="s3">\n    </span><span class="s1">this.removeNode(node)</span><span class="s3">\n    </span><span class="s1">this.addToHead(node)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Removes and returns the least recently used node (the one before tail).</span><span class="s3">\n   </span><span class="s1">* This is called during eviction when the cache exceeds capacity.</span><span class="s3">\n   </span><span class="s1">* PRECONDITION: cache is not empty (ensured by caller)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private removeTail(): LRUNode&lt;T&gt; {</span><span class="s3">\n    </span><span class="s1">const lastNode = this.tail.prev as LRUNode&lt;T&gt;</span><span class="s3">\n    </span><span class="s1">// tail.prev is always non-null and always LRUNode when cache is not empty</span><span class="s3">\n    </span><span class="s1">this.removeNode(lastNode)</span><span class="s3">\n    </span><span class="s1">return lastNode</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Sets a key-value pair in the cache.</span><span class="s3">\n   </span><span class="s1">* If the key exists, updates the value and moves to head.</span><span class="s3">\n   </span><span class="s1">* If new, adds at head and evicts from tail if necessary.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Time Complexity:</span><span class="s3">\n   </span><span class="s1">* - O(1) for uniform item sizes</span><span class="s3">\n   </span><span class="s1">* - O(k) where k is the number of items evicted (can be O(N) for variable sizes)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public set(key: string, value: T): void {</span><span class="s3">\n    </span><span class="s1">const size = this.calculateSize?.(value) ?? 1</span><span class="s3">\n    </span><span class="s1">if (size &gt; this.maxSize) {</span><span class="s3">\n      </span><span class="s1">console.warn('Single item size exceeds maxSize')</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const existing = this.cache.get(key)</span><span class="s3">\n    </span><span class="s1">if (existing) {</span><span class="s3">\n      </span><span class="s1">// Update existing node: adjust size and move to head (most recent)</span><span class="s3">\n      </span><span class="s1">existing.data = value</span><span class="s3">\n      </span><span class="s1">this.totalSize = this.totalSize - existing.size + size</span><span class="s3">\n      </span><span class="s1">existing.size = size</span><span class="s3">\n      </span><span class="s1">this.moveToHead(existing)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Add new node at head (most recent position)</span><span class="s3">\n      </span><span class="s1">const newNode = new LRUNode(key, value, size)</span><span class="s3">\n      </span><span class="s1">this.cache.set(key, newNode)</span><span class="s3">\n      </span><span class="s1">this.addToHead(newNode)</span><span class="s3">\n      </span><span class="s1">this.totalSize += size</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Evict least recently used items until under capacity</span><span class="s3">\n    </span><span class="s1">while (this.totalSize &gt; this.maxSize &amp;&amp; this.cache.size &gt; 0) {</span><span class="s3">\n      </span><span class="s1">const tail = this.removeTail()</span><span class="s3">\n      </span><span class="s1">this.cache.delete(tail.key)</span><span class="s3">\n      </span><span class="s1">this.totalSize -= tail.size</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Checks if a key exists in the cache.</span><span class="s3">\n   </span><span class="s1">* This is a pure query operation - does NOT update LRU order.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Time Complexity: O(1)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public has(key: string): boolean {</span><span class="s3">\n    </span><span class="s1">return this.cache.has(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Retrieves a value by key and marks it as most recently used.</span><span class="s3">\n   </span><span class="s1">* Moving to head maintains the LRU property for future evictions.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Time Complexity: O(1)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get(key: string): T | undefined {</span><span class="s3">\n    </span><span class="s1">const node = this.cache.get(key)</span><span class="s3">\n    </span><span class="s1">if (!node) return undefined</span><span class="s3">\n\n    </span><span class="s1">// Mark as most recently used by moving to head</span><span class="s3">\n    </span><span class="s1">this.moveToHead(node)</span><span class="s3">\n\n    </span><span class="s1">return node.data</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns an iterator over the cache entries. The order is outputted in the</span><span class="s3">\n   </span><span class="s1">* order of most recently used to least recently used.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public *[Symbol.iterator](): IterableIterator&lt;[string, T]&gt; {</span><span class="s3">\n    </span><span class="s1">let current = this.head.next</span><span class="s3">\n    </span><span class="s1">while (current &amp;&amp; current !== this.tail) {</span><span class="s3">\n      </span><span class="s1">// Between head and tail, current is always LRUNode</span><span class="s3">\n      </span><span class="s1">const node = current as LRUNode&lt;T&gt;</span><span class="s3">\n      </span><span class="s1">yield [node.key, node.data]</span><span class="s3">\n      </span><span class="s1">current = current.next</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Removes a specific key from the cache.</span><span class="s3">\n   </span><span class="s1">* Updates both the hash map and doubly-linked list.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* Time Complexity: O(1)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public remove(key: string): void {</span><span class="s3">\n    </span><span class="s1">const node = this.cache.get(key)</span><span class="s3">\n    </span><span class="s1">if (!node) return</span><span class="s3">\n\n    </span><span class="s1">this.removeNode(node)</span><span class="s3">\n    </span><span class="s1">this.cache.delete(key)</span><span class="s3">\n    </span><span class="s1">this.totalSize -= node.size</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns the number of items in the cache.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get size(): number {</span><span class="s3">\n    </span><span class="s1">return this.cache.size</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns the current total size of all cached items.</span><span class="s3">\n   </span><span class="s1">* This uses the custom size calculation if provided.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get currentSize(): number {</span><span class="s3">\n    </span><span class="s1">return this.totalSize</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;LRUNode&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;prev&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;SentinelNode&quot;</span><span class="s0">,</span><span class="s1">&quot;LRUCache&quot;</span><span class="s0">,</span><span class="s1">&quot;maxSize&quot;</span><span class="s0">,</span><span class="s1">&quot;calculateSize&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;totalSize&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;tail&quot;</span><span class="s0">,</span><span class="s1">&quot;addToHead&quot;</span><span class="s0">,</span><span class="s1">&quot;node&quot;</span><span class="s0">,</span><span class="s1">&quot;removeNode&quot;</span><span class="s0">,</span><span class="s1">&quot;moveToHead&quot;</span><span class="s0">,</span><span class="s1">&quot;removeTail&quot;</span><span class="s0">,</span><span class="s1">&quot;lastNode&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;existing&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;newNode&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;iterator&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;remove&quot;</span><span class="s0">,</span><span class="s1">&quot;currentSize&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9091</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/build/output/log.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { bold, green, magenta, red, yellow, white } from '../../lib/picocolors'</span><span class="s3">\n</span><span class="s1">import { LRUCache } from '../../server/lib/lru-cache'</span><span class="s3">\n\n</span><span class="s1">export const prefixes = {</span><span class="s3">\n  </span><span class="s1">wait: white(bold('')),</span><span class="s3">\n  </span><span class="s1">error: red(bold('')),</span><span class="s3">\n  </span><span class="s1">warn: yellow(bold('')),</span><span class="s3">\n  </span><span class="s1">ready: '', // no color</span><span class="s3">\n  </span><span class="s1">info: white(bold(' ')),</span><span class="s3">\n  </span><span class="s1">event: green(bold('')),</span><span class="s3">\n  </span><span class="s1">trace: magenta(bold('')),</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">const LOGGING_METHOD = {</span><span class="s3">\n  </span><span class="s1">log: 'log',</span><span class="s3">\n  </span><span class="s1">warn: 'warn',</span><span class="s3">\n  </span><span class="s1">error: 'error',</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">function prefixedLog(prefixType: keyof typeof prefixes, ...message: any[]) {</span><span class="s3">\n  </span><span class="s1">if ((message[0] === '' || message[0] === undefined) &amp;&amp; message.length === 1) {</span><span class="s3">\n    </span><span class="s1">message.shift()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const consoleMethod: keyof typeof LOGGING_METHOD =</span><span class="s3">\n    </span><span class="s1">prefixType in LOGGING_METHOD</span><span class="s3">\n      </span><span class="s1">? LOGGING_METHOD[prefixType as keyof typeof LOGGING_METHOD]</span><span class="s3">\n      </span><span class="s1">: 'log'</span><span class="s3">\n\n  </span><span class="s1">const prefix = prefixes[prefixType]</span><span class="s3">\n  </span><span class="s1">// If there's no message, don't print the prefix but a new line</span><span class="s3">\n  </span><span class="s1">if (message.length === 0) {</span><span class="s3">\n    </span><span class="s1">console[consoleMethod]('')</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">// Ensure if there's ANSI escape codes it's concatenated into one string.</span><span class="s3">\n    </span><span class="s1">// Chrome DevTool can only handle color if it's in one string.</span><span class="s3">\n    </span><span class="s1">if (message.length === 1 &amp;&amp; typeof message[0] === 'string') {</span><span class="s3">\n      </span><span class="s1">console[consoleMethod](' ' + prefix + ' ' + message[0])</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">console[consoleMethod](' ' + prefix, ...message)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function bootstrap(...message: string[]) {</span><span class="s3">\n  </span><span class="s1">// logging format: ' &lt;prefix&gt; &lt;message&gt;'</span><span class="s3">\n  </span><span class="s1">// e.g. '  Compiled successfully'</span><span class="s3">\n  </span><span class="s1">// Add spaces to align with the indent of other logs</span><span class="s3">\n  </span><span class="s1">console.log('   ' + message.join(' '))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function wait(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('wait', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function error(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('error', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function warn(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('warn', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function ready(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('ready', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function info(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('info', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function event(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('event', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function trace(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">prefixedLog('trace', ...message)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const warnOnceCache = new LRUCache&lt;string&gt;(10_000, (value) =&gt; value.length)</span><span class="s3">\n</span><span class="s1">export function warnOnce(...message: any[]) {</span><span class="s3">\n  </span><span class="s1">const key = message.join(' ')</span><span class="s3">\n  </span><span class="s1">if (!warnOnceCache.has(key)) {</span><span class="s3">\n    </span><span class="s1">warnOnceCache.set(key, key)</span><span class="s3">\n    </span><span class="s1">warn(...message)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;green&quot;</span><span class="s0">,</span><span class="s1">&quot;magenta&quot;</span><span class="s0">,</span><span class="s1">&quot;red&quot;</span><span class="s0">,</span><span class="s1">&quot;yellow&quot;</span><span class="s0">,</span><span class="s1">&quot;white&quot;</span><span class="s0">,</span><span class="s1">&quot;LRUCache&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixes&quot;</span><span class="s0">,</span><span class="s1">&quot;wait&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;ready&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;LOGGING_METHOD&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixedLog&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixType&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;shift&quot;</span><span class="s0">,</span><span class="s1">&quot;consoleMethod&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;bootstrap&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnceCache&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,KAAK,QAAQ,uBAAsB;AAC/E,SAASC,QAAQ,QAAQ,6BAA4B;;;AAE9C,MAAMC,WAAW;IACtBC,UAAMH,iKAAAA,MAAML,gKAAAA,EAAK;IACjBS,WAAON,+JAAAA,MAAIH,gKAAAA,EAAK;IAChBU,UAAMN,kKAAAA,MAAOJ,gKAAAA,EAAK;IAClBW,OAAO;IACPC,UAAMP,iKAAAA,MAAML,gKAAAA,EAAK;IACjBa,WAAOZ,iKAAAA,MAAMD,gKAAAA,EAAK;IAClBc,WAAOZ,mKAAAA,MAAQF,gKAAAA,EAAK;AACtB,EAAU;AAEV,MAAMe,iBAAiB;IACrBC,KAAK;IACLN,MAAM;IACND,OAAO;AACT;AAEA,SAASQ,YAAYC,UAAiC,EAAE,GAAGC,OAAc;IACvE,IAAKA,CAAAA,OAAO,CAAC,EAAE,KAAK,MAAMA,OAAO,CAAC,EAAE,KAAKC,SAAQ,KAAMD,QAAQE,MAAM,KAAK,GAAG;QAC3EF,QAAQG,KAAK;IACf;IAEA,MAAMC,gBACJL,cAAcH,iBACVA,cAAc,CAACG,WAA0C,GACzD;IAEN,MAAMM,SAASjB,QAAQ,CAACW,WAAW;IACnC,+DAA+D;IAC/D,IAAIC,QAAQE,MAAM,KAAK,GAAG;QACxBI,OAAO,CAACF,cAAc,CAAC;IACzB,OAAO;QACL,yEAAyE;QACzE,8DAA8D;QAC9D,IAAIJ,QAAQE,MAAM,KAAK,KAAK,OAAOF,OAAO,CAAC,EAAE,KAAK,UAAU;YAC1DM,OAAO,CAACF,cAAc,CAAC,MAAMC,SAAS,MAAML,OAAO,CAAC,EAAE;QACxD,OAAO;YACLM,OAAO,CAACF,cAAc,CAAC,MAAMC,WAAWL;QAC1C;IACF;AACF;AAEO,SAASO,UAAU,GAAGP,OAAiB;IAC5C,wCAAwC;IACxC,kCAAkC;IAClC,oDAAoD;IACpDM,QAAQT,GAAG,CAAC,QAAQG,QAAQQ,IAAI,CAAC;AACnC;AAEO,SAASnB,KAAK,GAAGW,OAAc;IACpCF,YAAY,WAAWE;AACzB;AAEO,SAASV,MAAM,GAAGU,OAAc;IACrCF,YAAY,YAAYE;AAC1B;AAEO,SAAST,KAAK,GAAGS,OAAc;IACpCF,YAAY,WAAWE;AACzB;AAEO,SAASR,MAAM,GAAGQ,OAAc;IACrCF,YAAY,YAAYE;AAC1B;AAEO,SAASP,KAAK,GAAGO,OAAc;IACpCF,YAAY,WAAWE;AACzB;AAEO,SAASN,MAAM,GAAGM,OAAc;IACrCF,YAAY,YAAYE;AAC1B;AAEO,SAASL,MAAM,GAAGK,OAAc;IACrCF,YAAY,YAAYE;AAC1B;AAEA,MAAMS,gBAAgB,IAAItB,gLAAAA,CAAiB,OAAQ,CAACuB,QAAUA,MAAMR,MAAM;AACnE,SAASS,SAAS,GAAGX,OAAc;IACxC,MAAMY,MAAMZ,QAAQQ,IAAI,CAAC;IACzB,IAAI,CAACC,cAAcI,GAAG,CAACD,MAAM;QAC3BH,cAAcK,GAAG,CAACF,KAAKA;QACvBrB,QAAQS;IACV;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9189</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolvers/resolve-opengraph.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ResolvedMetadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">OpenGraphType,</span><span class="s3">\n  </span><span class="s1">OpenGraph,</span><span class="s3">\n  </span><span class="s1">ResolvedOpenGraph,</span><span class="s3">\n</span><span class="s1">} from '../types/opengraph-types'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">FieldResolverExtraArgs,</span><span class="s3">\n  </span><span class="s1">AsyncFieldResolverExtraArgs,</span><span class="s3">\n  </span><span class="s1">MetadataContext,</span><span class="s3">\n</span><span class="s1">} from '../types/resolvers'</span><span class="s3">\n</span><span class="s1">import type { ResolvedTwitterMetadata, Twitter } from '../types/twitter-types'</span><span class="s3">\n</span><span class="s1">import { resolveArray, resolveAsArrayOrUndefined } from '../generate/utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getSocialImageMetadataBaseFallback,</span><span class="s3">\n  </span><span class="s1">isStringOrURL,</span><span class="s3">\n  </span><span class="s1">resolveUrl,</span><span class="s3">\n  </span><span class="s1">resolveAbsoluteUrlWithPathname,</span><span class="s3">\n</span><span class="s1">} from './resolve-url'</span><span class="s3">\n</span><span class="s1">import { resolveTitle } from './resolve-title'</span><span class="s3">\n</span><span class="s1">import { isFullStringUrl } from '../../url'</span><span class="s3">\n</span><span class="s1">import { warnOnce } from '../../../build/output/log'</span><span class="s3">\n\n</span><span class="s1">type FlattenArray&lt;T&gt; = T extends (infer U)[] ? U : T</span><span class="s3">\n</span><span class="s1">type ResolvedMetadataBase = ResolvedMetadata['metadataBase']</span><span class="s3">\n\n</span><span class="s1">const OgTypeFields = {</span><span class="s3">\n  </span><span class="s1">article: ['authors', 'tags'],</span><span class="s3">\n  </span><span class="s1">song: ['albums', 'musicians'],</span><span class="s3">\n  </span><span class="s1">playlist: ['albums', 'musicians'],</span><span class="s3">\n  </span><span class="s1">radio: ['creators'],</span><span class="s3">\n  </span><span class="s1">video: ['actors', 'directors', 'writers', 'tags'],</span><span class="s3">\n  </span><span class="s1">basic: [</span><span class="s3">\n    </span><span class="s1">'emails',</span><span class="s3">\n    </span><span class="s1">'phoneNumbers',</span><span class="s3">\n    </span><span class="s1">'faxNumbers',</span><span class="s3">\n    </span><span class="s1">'alternateLocale',</span><span class="s3">\n    </span><span class="s1">'audio',</span><span class="s3">\n    </span><span class="s1">'videos',</span><span class="s3">\n  </span><span class="s1">],</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">function resolveAndValidateImage(</span><span class="s3">\n  </span><span class="s1">item: FlattenArray&lt;OpenGraph['images'] | Twitter['images']&gt;,</span><span class="s3">\n  </span><span class="s1">metadataBase: ResolvedMetadataBase,</span><span class="s3">\n  </span><span class="s1">isStaticMetadataRouteFile: boolean | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (!item) return undefined</span><span class="s3">\n  </span><span class="s1">const isItemUrl = isStringOrURL(item)</span><span class="s3">\n  </span><span class="s1">const inputUrl = isItemUrl ? item : item.url</span><span class="s3">\n  </span><span class="s1">if (!inputUrl) return undefined</span><span class="s3">\n\n  </span><span class="s1">// process.env.VERCEL is set to </span><span class="s3">\&quot;</span><span class="s1">1</span><span class="s3">\&quot; </span><span class="s1">when System Environment Variables are</span><span class="s3">\n  </span><span class="s1">// exposed. When exposed, validation is not necessary since we are falling back to</span><span class="s3">\n  </span><span class="s1">// process.env.VERCEL_PROJECT_PRODUCTION_URL, process.env.VERCEL_BRANCH_URL, or</span><span class="s3">\n  </span><span class="s1">// process.env.VERCEL_URL for the `metadataBase`. process.env.VERCEL is undefined</span><span class="s3">\n  </span><span class="s1">// when System Environment Variables are not exposed. When not exposed, we cannot</span><span class="s3">\n  </span><span class="s1">// detect in the build environment if the deployment is a Vercel deployment or not.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// x-ref: https://vercel.com/docs/projects/environment-variables/system-environment-variables#system-environment-variables</span><span class="s3">\n  </span><span class="s1">const isUsingVercelSystemEnvironmentVariables = Boolean(process.env.VERCEL)</span><span class="s3">\n\n  </span><span class="s1">const isRelativeUrl =</span><span class="s3">\n    </span><span class="s1">typeof inputUrl === 'string' &amp;&amp; !isFullStringUrl(inputUrl)</span><span class="s3">\n\n  </span><span class="s1">// When no explicit metadataBase is specified by the user, we'll override it with the fallback metadata</span><span class="s3">\n  </span><span class="s1">// under the following conditions:</span><span class="s3">\n  </span><span class="s1">// - The provided URL is relative (ie ./og-image).</span><span class="s3">\n  </span><span class="s1">// - The image is statically generated by Next.js (such as the special `opengraph-image` route)</span><span class="s3">\n  </span><span class="s1">// In both cases, we want to ensure that across all environments, the ogImage is a fully qualified URL.</span><span class="s3">\n  </span><span class="s1">// In the `opengraph-image` case, since the user isn't explicitly passing a relative path, this ensures</span><span class="s3">\n  </span><span class="s1">// the ogImage will be properly discovered across different environments without the user needing to</span><span class="s3">\n  </span><span class="s1">// have a bunch of `process.env` checks when defining their `metadataBase`.</span><span class="s3">\n  </span><span class="s1">if (isRelativeUrl &amp;&amp; (!metadataBase || isStaticMetadataRouteFile)) {</span><span class="s3">\n    </span><span class="s1">const fallbackMetadataBase =</span><span class="s3">\n      </span><span class="s1">getSocialImageMetadataBaseFallback(metadataBase)</span><span class="s3">\n\n    </span><span class="s1">// When not using Vercel environment variables for URL injection, we aren't able to determine</span><span class="s3">\n    </span><span class="s1">// a fallback value for `metadataBase`. For self-hosted setups, we want to warn</span><span class="s3">\n    </span><span class="s1">// about this since the only fallback we'll be able to generate is `localhost`.</span><span class="s3">\n    </span><span class="s1">// In development, we'll only warn for relative metadata that isn't part of the static</span><span class="s3">\n    </span><span class="s1">// metadata conventions (eg `opengraph-image`), as otherwise it's currently very noisy</span><span class="s3">\n    </span><span class="s1">// for common cases. Eventually we should remove this warning all together in favor of</span><span class="s3">\n    </span><span class="s1">// devtools.</span><span class="s3">\n    </span><span class="s1">const shouldWarn =</span><span class="s3">\n      </span><span class="s1">!isUsingVercelSystemEnvironmentVariables &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!metadataBase &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(process.env.NODE_ENV === 'production' || !isStaticMetadataRouteFile)</span><span class="s3">\n\n    </span><span class="s1">if (shouldWarn) {</span><span class="s3">\n      </span><span class="s1">warnOnce(</span><span class="s3">\n        </span><span class="s1">`metadataBase property in metadata export is not set for resolving social open graph or twitter images, using </span><span class="s3">\&quot;</span><span class="s1">${fallbackMetadataBase.origin}</span><span class="s3">\&quot;</span><span class="s1">. See https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">metadataBase = fallbackMetadataBase</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return isItemUrl</span><span class="s3">\n    </span><span class="s1">? {</span><span class="s3">\n        </span><span class="s1">url: resolveUrl(inputUrl, metadataBase),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">: {</span><span class="s3">\n        </span><span class="s1">...item,</span><span class="s3">\n        </span><span class="s1">// Update image descriptor url</span><span class="s3">\n        </span><span class="s1">url: resolveUrl(inputUrl, metadataBase),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function resolveImages(</span><span class="s3">\n  </span><span class="s1">images: Twitter['images'],</span><span class="s3">\n  </span><span class="s1">metadataBase: ResolvedMetadataBase,</span><span class="s3">\n  </span><span class="s1">isStaticMetadataRouteFile: boolean</span><span class="s3">\n</span><span class="s1">): NonNullable&lt;ResolvedMetadata['twitter']&gt;['images']</span><span class="s3">\n</span><span class="s1">export function resolveImages(</span><span class="s3">\n  </span><span class="s1">images: OpenGraph['images'],</span><span class="s3">\n  </span><span class="s1">metadataBase: ResolvedMetadataBase,</span><span class="s3">\n  </span><span class="s1">isStaticMetadataRouteFile: boolean</span><span class="s3">\n</span><span class="s1">): NonNullable&lt;ResolvedMetadata['openGraph']&gt;['images']</span><span class="s3">\n</span><span class="s1">export function resolveImages(</span><span class="s3">\n  </span><span class="s1">images: OpenGraph['images'] | Twitter['images'],</span><span class="s3">\n  </span><span class="s1">metadataBase: ResolvedMetadataBase,</span><span class="s3">\n  </span><span class="s1">isStaticMetadataRouteFile: boolean</span><span class="s3">\n</span><span class="s1">):</span><span class="s3">\n  </span><span class="s1">| NonNullable&lt;ResolvedMetadata['twitter']&gt;['images']</span><span class="s3">\n  </span><span class="s1">| NonNullable&lt;ResolvedMetadata['openGraph']&gt;['images'] {</span><span class="s3">\n  </span><span class="s1">const resolvedImages = resolveAsArrayOrUndefined(images)</span><span class="s3">\n  </span><span class="s1">if (!resolvedImages) return resolvedImages</span><span class="s3">\n\n  </span><span class="s1">const nonNullableImages = []</span><span class="s3">\n  </span><span class="s1">for (const item of resolvedImages) {</span><span class="s3">\n    </span><span class="s1">const resolvedItem = resolveAndValidateImage(</span><span class="s3">\n      </span><span class="s1">item,</span><span class="s3">\n      </span><span class="s1">metadataBase,</span><span class="s3">\n      </span><span class="s1">isStaticMetadataRouteFile</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (!resolvedItem) continue</span><span class="s3">\n\n    </span><span class="s1">nonNullableImages.push(resolvedItem)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return nonNullableImages</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const ogTypeToFields: Record&lt;string, readonly string[]&gt; = {</span><span class="s3">\n  </span><span class="s1">article: OgTypeFields.article,</span><span class="s3">\n  </span><span class="s1">book: OgTypeFields.article,</span><span class="s3">\n  </span><span class="s1">'music.song': OgTypeFields.song,</span><span class="s3">\n  </span><span class="s1">'music.album': OgTypeFields.song,</span><span class="s3">\n  </span><span class="s1">'music.playlist': OgTypeFields.playlist,</span><span class="s3">\n  </span><span class="s1">'music.radio_station': OgTypeFields.radio,</span><span class="s3">\n  </span><span class="s1">'video.movie': OgTypeFields.video,</span><span class="s3">\n  </span><span class="s1">'video.episode': OgTypeFields.video,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getFieldsByOgType(ogType: OpenGraphType | undefined) {</span><span class="s3">\n  </span><span class="s1">if (!ogType || !(ogType in ogTypeToFields)) return OgTypeFields.basic</span><span class="s3">\n  </span><span class="s1">return ogTypeToFields[ogType].concat(OgTypeFields.basic)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveOpenGraph: AsyncFieldResolverExtraArgs&lt;</span><span class="s3">\n  </span><span class="s1">'openGraph',</span><span class="s3">\n  </span><span class="s1">[ResolvedMetadataBase, Promise&lt;string&gt;, MetadataContext, string | null]</span><span class="s3">\n</span><span class="s1">&gt; = async (</span><span class="s3">\n  </span><span class="s1">openGraph,</span><span class="s3">\n  </span><span class="s1">metadataBase,</span><span class="s3">\n  </span><span class="s1">pathname,</span><span class="s3">\n  </span><span class="s1">metadataContext,</span><span class="s3">\n  </span><span class="s1">titleTemplate</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!openGraph) return null</span><span class="s3">\n\n  </span><span class="s1">function resolveProps(target: ResolvedOpenGraph, og: OpenGraph) {</span><span class="s3">\n    </span><span class="s1">const ogType = og &amp;&amp; 'type' in og ? og.type : undefined</span><span class="s3">\n    </span><span class="s1">const keys = getFieldsByOgType(ogType)</span><span class="s3">\n    </span><span class="s1">for (const k of keys) {</span><span class="s3">\n      </span><span class="s1">const key = k as keyof ResolvedOpenGraph</span><span class="s3">\n      </span><span class="s1">if (key in og &amp;&amp; key !== 'url') {</span><span class="s3">\n        </span><span class="s1">const value = og[key]</span><span class="s3">\n        </span><span class="s1">// TODO: improve typing inferring</span><span class="s3">\n        </span><span class="s1">;(target as any)[key] = value ? resolveArray(value) : null</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">target.images = resolveImages(</span><span class="s3">\n      </span><span class="s1">og.images,</span><span class="s3">\n      </span><span class="s1">metadataBase,</span><span class="s3">\n      </span><span class="s1">metadataContext.isStaticMetadataRouteFile</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const resolved = {</span><span class="s3">\n    </span><span class="s1">...openGraph,</span><span class="s3">\n    </span><span class="s1">title: resolveTitle(openGraph.title, titleTemplate),</span><span class="s3">\n  </span><span class="s1">} as ResolvedOpenGraph</span><span class="s3">\n  </span><span class="s1">resolveProps(resolved, openGraph)</span><span class="s3">\n\n  </span><span class="s1">resolved.url = openGraph.url</span><span class="s3">\n    </span><span class="s1">? resolveAbsoluteUrlWithPathname(</span><span class="s3">\n        </span><span class="s1">openGraph.url,</span><span class="s3">\n        </span><span class="s1">metadataBase,</span><span class="s3">\n        </span><span class="s1">await pathname,</span><span class="s3">\n        </span><span class="s1">metadataContext</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">: null</span><span class="s3">\n\n  </span><span class="s1">return resolved</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const TwitterBasicInfoKeys = [</span><span class="s3">\n  </span><span class="s1">'site',</span><span class="s3">\n  </span><span class="s1">'siteId',</span><span class="s3">\n  </span><span class="s1">'creator',</span><span class="s3">\n  </span><span class="s1">'creatorId',</span><span class="s3">\n  </span><span class="s1">'description',</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n\n</span><span class="s1">export const resolveTwitter: FieldResolverExtraArgs&lt;</span><span class="s3">\n  </span><span class="s1">'twitter',</span><span class="s3">\n  </span><span class="s1">[ResolvedMetadataBase, MetadataContext, string | null]</span><span class="s3">\n</span><span class="s1">&gt; = (twitter, metadataBase, metadataContext, titleTemplate) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!twitter) return null</span><span class="s3">\n  </span><span class="s1">let card = 'card' in twitter ? twitter.card : undefined</span><span class="s3">\n  </span><span class="s1">const resolved = {</span><span class="s3">\n    </span><span class="s1">...twitter,</span><span class="s3">\n    </span><span class="s1">title: resolveTitle(twitter.title, titleTemplate),</span><span class="s3">\n  </span><span class="s1">} as ResolvedTwitterMetadata</span><span class="s3">\n  </span><span class="s1">for (const infoKey of TwitterBasicInfoKeys) {</span><span class="s3">\n    </span><span class="s1">resolved[infoKey] = twitter[infoKey] || null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">resolved.images = resolveImages(</span><span class="s3">\n    </span><span class="s1">twitter.images,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">metadataContext.isStaticMetadataRouteFile</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">card = card || (resolved.images?.length ? 'summary_large_image' : 'summary')</span><span class="s3">\n  </span><span class="s1">resolved.card = card</span><span class="s3">\n\n  </span><span class="s1">if ('card' in resolved) {</span><span class="s3">\n    </span><span class="s1">switch (resolved.card) {</span><span class="s3">\n      </span><span class="s1">case 'player': {</span><span class="s3">\n        </span><span class="s1">resolved.players = resolveAsArrayOrUndefined(resolved.players) || []</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'app': {</span><span class="s3">\n        </span><span class="s1">resolved.app = resolved.app || {}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'summary':</span><span class="s3">\n      </span><span class="s1">case 'summary_large_image':</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">resolved satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return resolved</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveArray&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAsArrayOrUndefined&quot;</span><span class="s0">,</span><span class="s1">&quot;getSocialImageMetadataBaseFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;isStringOrURL&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAbsoluteUrlWithPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;isFullStringUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;warnOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;OgTypeFields&quot;</span><span class="s0">,</span><span class="s1">&quot;article&quot;</span><span class="s0">,</span><span class="s1">&quot;song&quot;</span><span class="s0">,</span><span class="s1">&quot;playlist&quot;</span><span class="s0">,</span><span class="s1">&quot;radio&quot;</span><span class="s0">,</span><span class="s1">&quot;video&quot;</span><span class="s0">,</span><span class="s1">&quot;basic&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAndValidateImage&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;isItemUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;inputUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;isUsingVercelSystemEnvironmentVariables&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;VERCEL&quot;</span><span class="s0">,</span><span class="s1">&quot;isRelativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackMetadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldWarn&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveImages&quot;</span><span class="s0">,</span><span class="s1">&quot;images&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedImages&quot;</span><span class="s0">,</span><span class="s1">&quot;nonNullableImages&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedItem&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;ogTypeToFields&quot;</span><span class="s0">,</span><span class="s1">&quot;book&quot;</span><span class="s0">,</span><span class="s1">&quot;getFieldsByOgType&quot;</span><span class="s0">,</span><span class="s1">&quot;ogType&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveOpenGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataContext&quot;</span><span class="s0">,</span><span class="s1">&quot;titleTemplate&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveProps&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;og&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;k&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;TwitterBasicInfoKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveTwitter&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;card&quot;</span><span class="s0">,</span><span class="s1">&quot;infoKey&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;players&quot;</span><span class="s0">,</span><span class="s1">&quot;app&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9377</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/segment.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Segment } from '../../server/app-render/types'</span><span class="s3">\n\n</span><span class="s1">export function isGroupSegment(segment: string) {</span><span class="s3">\n  </span><span class="s1">// Use array[0] for performant purpose</span><span class="s3">\n  </span><span class="s1">return segment[0] === '(' &amp;&amp; segment.endsWith(')')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isParallelRouteSegment(segment: string) {</span><span class="s3">\n  </span><span class="s1">return segment.startsWith('@') &amp;&amp; segment !== '@children'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function addSearchParamsIfPageSegment(</span><span class="s3">\n  </span><span class="s1">segment: Segment,</span><span class="s3">\n  </span><span class="s1">searchParams: Record&lt;string, string | string[] | undefined&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const isPageSegment = segment.includes(PAGE_SEGMENT_KEY)</span><span class="s3">\n\n  </span><span class="s1">if (isPageSegment) {</span><span class="s3">\n    </span><span class="s1">const stringifiedQuery = JSON.stringify(searchParams)</span><span class="s3">\n    </span><span class="s1">return stringifiedQuery !== '{}'</span><span class="s3">\n      </span><span class="s1">? PAGE_SEGMENT_KEY + '?' + stringifiedQuery</span><span class="s3">\n      </span><span class="s1">: PAGE_SEGMENT_KEY</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return segment</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const PAGE_SEGMENT_KEY = '__PAGE__'</span><span class="s3">\n</span><span class="s1">export const DEFAULT_SEGMENT_KEY = '__DEFAULT__'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isGroupSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;isParallelRouteSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;addSearchParamsIfPageSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;isPageSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGE_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifiedQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_SEGMENT_KEY&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;AAEO,SAASA,eAAeC,OAAe;IAC5C,sCAAsC;IACtC,OAAOA,OAAO,CAAC,EAAE,KAAK,OAAOA,QAAQC,QAAQ,CAAC;AAChD;AAEO,SAASC,uBAAuBF,OAAe;IACpD,OAAOA,QAAQG,UAAU,CAAC,QAAQH,YAAY;AAChD;AAEO,SAASI,6BACdJ,OAAgB,EAChBK,YAA2D;IAE3D,MAAMC,gBAAgBN,QAAQO,QAAQ,CAACC;IAEvC,IAAIF,eAAe;QACjB,MAAMG,mBAAmBC,KAAKC,SAAS,CAACN;QACxC,OAAOI,qBAAqB,OACxBD,mBAAmB,MAAMC,mBACzBD;IACN;IAEA,OAAOR;AACT;AAEO,MAAMQ,mBAAmB,WAAU;AACnC,MAAMI,sBAAsB,cAAa&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9410</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/app-dir-module.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { AppDirModules } from '../../build/webpack/loaders/next-app-loader'</span><span class="s3">\n</span><span class="s1">import { DEFAULT_SEGMENT_KEY } from '../../shared/lib/segment'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* LoaderTree is generated in next-app-loader.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type LoaderTree = [</span><span class="s3">\n  </span><span class="s1">segment: string,</span><span class="s3">\n  </span><span class="s1">parallelRoutes: { [parallelRouterKey: string]: LoaderTree },</span><span class="s3">\n  </span><span class="s1">modules: AppDirModules,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export async function getLayoutOrPageModule(loaderTree: LoaderTree) {</span><span class="s3">\n  </span><span class="s1">const { layout, page, defaultPage } = loaderTree[2]</span><span class="s3">\n  </span><span class="s1">const isLayout = typeof layout !== 'undefined'</span><span class="s3">\n  </span><span class="s1">const isPage = typeof page !== 'undefined'</span><span class="s3">\n  </span><span class="s1">const isDefaultPage =</span><span class="s3">\n    </span><span class="s1">typeof defaultPage !== 'undefined' &amp;&amp; loaderTree[0] === DEFAULT_SEGMENT_KEY</span><span class="s3">\n\n  </span><span class="s1">let mod = undefined</span><span class="s3">\n  </span><span class="s1">let modType: 'layout' | 'page' | undefined = undefined</span><span class="s3">\n  </span><span class="s1">let filePath = undefined</span><span class="s3">\n\n  </span><span class="s1">if (isLayout) {</span><span class="s3">\n    </span><span class="s1">mod = await layout[0]()</span><span class="s3">\n    </span><span class="s1">modType = 'layout'</span><span class="s3">\n    </span><span class="s1">filePath = layout[1]</span><span class="s3">\n  </span><span class="s1">} else if (isPage) {</span><span class="s3">\n    </span><span class="s1">mod = await page[0]()</span><span class="s3">\n    </span><span class="s1">modType = 'page'</span><span class="s3">\n    </span><span class="s1">filePath = page[1]</span><span class="s3">\n  </span><span class="s1">} else if (isDefaultPage) {</span><span class="s3">\n    </span><span class="s1">mod = await defaultPage[0]()</span><span class="s3">\n    </span><span class="s1">modType = 'page'</span><span class="s3">\n    </span><span class="s1">filePath = defaultPage[1]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return { mod, modType, filePath }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function getComponentTypeModule(</span><span class="s3">\n  </span><span class="s1">loaderTree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">moduleType: 'layout' | 'not-found' | 'forbidden' | 'unauthorized'</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const { [moduleType]: module } = loaderTree[2]</span><span class="s3">\n  </span><span class="s1">if (typeof module !== 'undefined') {</span><span class="s3">\n    </span><span class="s1">return await module[0]()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DEFAULT_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;getLayoutOrPageModule&quot;</span><span class="s0">,</span><span class="s1">&quot;loaderTree&quot;</span><span class="s0">,</span><span class="s1">&quot;layout&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultPage&quot;</span><span class="s0">,</span><span class="s1">&quot;isLayout&quot;</span><span class="s0">,</span><span class="s1">&quot;isPage&quot;</span><span class="s0">,</span><span class="s1">&quot;isDefaultPage&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;modType&quot;</span><span class="s0">,</span><span class="s1">&quot;filePath&quot;</span><span class="s0">,</span><span class="s1">&quot;getComponentTypeModule&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleType&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AACA,SAASA,mBAAmB,QAAQ,2BAA0B;;AAWvD,eAAeC,sBAAsBC,UAAsB;IAChE,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAEC,WAAW,EAAE,GAAGH,UAAU,CAAC,EAAE;IACnD,MAAMI,WAAW,OAAOH,WAAW;IACnC,MAAMI,SAAS,OAAOH,SAAS;IAC/B,MAAMI,gBACJ,OAAOH,gBAAgB,eAAeH,UAAU,CAAC,EAAE,KAAKF,sLAAAA;IAE1D,IAAIS,MAAMC;IACV,IAAIC,UAAyCD;IAC7C,IAAIE,WAAWF;IAEf,IAAIJ,UAAU;QACZG,MAAM,MAAMN,MAAM,CAAC,EAAE;QACrBQ,UAAU;QACVC,WAAWT,MAAM,CAAC,EAAE;IACtB,OAAO,IAAII,QAAQ;QACjBE,MAAM,MAAML,IAAI,CAAC,EAAE;QACnBO,UAAU;QACVC,WAAWR,IAAI,CAAC,EAAE;IACpB,OAAO,IAAII,eAAe;QACxBC,MAAM,MAAMJ,WAAW,CAAC,EAAE;QAC1BM,UAAU;QACVC,WAAWP,WAAW,CAAC,EAAE;IAC3B;IAEA,OAAO;QAAEI;QAAKE;QAASC;IAAS;AAClC;AAEO,eAAeC,uBACpBX,UAAsB,EACtBY,UAAiE;IAEjE,MAAM,EAAE,CAACA,WAAW,EAAEC,MAAM,EAAE,GAAGb,UAAU,CAAC,EAAE;IAC9C,IAAI,OAAOa,WAAW,aAAa;QACjC,OAAO,MAAMA,MAAM,CAAC,EAAE;IACxB;IACA,OAAOL;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9456</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/interop-default.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export function interopDefault(mod: any) {</span><span class="s3">\n  </span><span class="s1">return mod.default || mod</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;interopDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,SAASA,eAAeC,GAAQ;IACrC,OAAOA,IAAIC,OAAO,IAAID;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9467</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolvers/resolve-basics.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">AlternateLinkDescriptor,</span><span class="s3">\n  </span><span class="s1">ResolvedAlternateURLs,</span><span class="s3">\n</span><span class="s1">} from '../types/alternative-urls-types'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Metadata,</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">Viewport,</span><span class="s3">\n</span><span class="s1">} from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { ResolvedVerification } from '../types/metadata-types'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">FieldResolver,</span><span class="s3">\n  </span><span class="s1">AsyncFieldResolverExtraArgs,</span><span class="s3">\n  </span><span class="s1">MetadataContext,</span><span class="s3">\n</span><span class="s1">} from '../types/resolvers'</span><span class="s3">\n</span><span class="s1">import { resolveAsArrayOrUndefined } from '../generate/utils'</span><span class="s3">\n</span><span class="s1">import { resolveAbsoluteUrlWithPathname } from './resolve-url'</span><span class="s3">\n\n</span><span class="s1">function resolveAlternateUrl(</span><span class="s3">\n  </span><span class="s1">url: string | URL,</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null,</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// If alter native url is an URL instance,</span><span class="s3">\n  </span><span class="s1">// we treat it as a URL base and resolve with current pathname</span><span class="s3">\n  </span><span class="s1">if (url instanceof URL) {</span><span class="s3">\n    </span><span class="s1">const newUrl = new URL(pathname, url)</span><span class="s3">\n    </span><span class="s1">url.searchParams.forEach((value, key) =&gt;</span><span class="s3">\n      </span><span class="s1">newUrl.searchParams.set(key, value)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">url = newUrl</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolveAbsoluteUrlWithPathname(</span><span class="s3">\n    </span><span class="s1">url,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">metadataContext</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveThemeColor: FieldResolver&lt;'themeColor', Viewport&gt; = (</span><span class="s3">\n  </span><span class="s1">themeColor</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!themeColor) return null</span><span class="s3">\n  </span><span class="s1">const themeColorDescriptors: Viewport['themeColor'] = []</span><span class="s3">\n\n  </span><span class="s1">resolveAsArrayOrUndefined(themeColor)?.forEach((descriptor) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (typeof descriptor === 'string')</span><span class="s3">\n      </span><span class="s1">themeColorDescriptors.push({ color: descriptor })</span><span class="s3">\n    </span><span class="s1">else if (typeof descriptor === 'object')</span><span class="s3">\n      </span><span class="s1">themeColorDescriptors.push({</span><span class="s3">\n        </span><span class="s1">color: descriptor.color,</span><span class="s3">\n        </span><span class="s1">media: descriptor.media,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return themeColorDescriptors</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function resolveUrlValuesOfObject(</span><span class="s3">\n  </span><span class="s1">obj:</span><span class="s3">\n    </span><span class="s1">| Record&lt;</span><span class="s3">\n        </span><span class="s1">string,</span><span class="s3">\n        </span><span class="s1">string | URL | AlternateLinkDescriptor[] | null | undefined</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n    </span><span class="s1">| null</span><span class="s3">\n    </span><span class="s1">| undefined,</span><span class="s3">\n  </span><span class="s1">metadataBase: ResolvedMetadata['metadataBase'],</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">): Promise&lt;null | Record&lt;string, AlternateLinkDescriptor[]&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">if (!obj) return null</span><span class="s3">\n\n  </span><span class="s1">const result: Record&lt;string, AlternateLinkDescriptor[]&gt; = {}</span><span class="s3">\n  </span><span class="s1">for (const [key, value] of Object.entries(obj)) {</span><span class="s3">\n    </span><span class="s1">if (typeof value === 'string' || value instanceof URL) {</span><span class="s3">\n      </span><span class="s1">const pathnameForUrl = await pathname</span><span class="s3">\n      </span><span class="s1">result[key] = [</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">url: resolveAlternateUrl(</span><span class="s3">\n            </span><span class="s1">value,</span><span class="s3">\n            </span><span class="s1">metadataBase,</span><span class="s3">\n            </span><span class="s1">pathnameForUrl,</span><span class="s3">\n            </span><span class="s1">metadataContext</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">]</span><span class="s3">\n    </span><span class="s1">} else if (value &amp;&amp; value.length) {</span><span class="s3">\n      </span><span class="s1">result[key] = []</span><span class="s3">\n      </span><span class="s1">const pathnameForUrl = await pathname</span><span class="s3">\n      </span><span class="s1">value.forEach((item, index) =&gt; {</span><span class="s3">\n        </span><span class="s1">const url = resolveAlternateUrl(</span><span class="s3">\n          </span><span class="s1">item.url,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">pathnameForUrl,</span><span class="s3">\n          </span><span class="s1">metadataContext</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">result[key][index] = {</span><span class="s3">\n          </span><span class="s1">url,</span><span class="s3">\n          </span><span class="s1">title: item.title,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return result</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function resolveCanonicalUrl(</span><span class="s3">\n  </span><span class="s1">urlOrDescriptor: string | URL | null | AlternateLinkDescriptor | undefined,</span><span class="s3">\n  </span><span class="s1">metadataBase: URL | null,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">): Promise&lt;null | AlternateLinkDescriptor&gt; {</span><span class="s3">\n  </span><span class="s1">if (!urlOrDescriptor) return null</span><span class="s3">\n\n  </span><span class="s1">const url =</span><span class="s3">\n    </span><span class="s1">typeof urlOrDescriptor === 'string' || urlOrDescriptor instanceof URL</span><span class="s3">\n      </span><span class="s1">? urlOrDescriptor</span><span class="s3">\n      </span><span class="s1">: urlOrDescriptor.url</span><span class="s3">\n\n  </span><span class="s1">const pathnameForUrl = await pathname</span><span class="s3">\n\n  </span><span class="s1">// Return string url because structureClone can't handle URL instance</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">url: resolveAlternateUrl(</span><span class="s3">\n      </span><span class="s1">url,</span><span class="s3">\n      </span><span class="s1">metadataBase,</span><span class="s3">\n      </span><span class="s1">pathnameForUrl,</span><span class="s3">\n      </span><span class="s1">metadataContext</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveAlternates: AsyncFieldResolverExtraArgs&lt;</span><span class="s3">\n  </span><span class="s1">'alternates',</span><span class="s3">\n  </span><span class="s1">[ResolvedMetadata['metadataBase'], Promise&lt;string&gt;, MetadataContext]</span><span class="s3">\n</span><span class="s1">&gt; = async (alternates, metadataBase, pathname, context) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!alternates) return null</span><span class="s3">\n\n  </span><span class="s1">const canonical = await resolveCanonicalUrl(</span><span class="s3">\n    </span><span class="s1">alternates.canonical,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">context</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const languages = await resolveUrlValuesOfObject(</span><span class="s3">\n    </span><span class="s1">alternates.languages,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">context</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const media = await resolveUrlValuesOfObject(</span><span class="s3">\n    </span><span class="s1">alternates.media,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">context</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const types = await resolveUrlValuesOfObject(</span><span class="s3">\n    </span><span class="s1">alternates.types,</span><span class="s3">\n    </span><span class="s1">metadataBase,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">context</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const result: ResolvedAlternateURLs = {</span><span class="s3">\n    </span><span class="s1">canonical,</span><span class="s3">\n    </span><span class="s1">languages,</span><span class="s3">\n    </span><span class="s1">media,</span><span class="s3">\n    </span><span class="s1">types,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return result</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const robotsKeys = [</span><span class="s3">\n  </span><span class="s1">'noarchive',</span><span class="s3">\n  </span><span class="s1">'nosnippet',</span><span class="s3">\n  </span><span class="s1">'noimageindex',</span><span class="s3">\n  </span><span class="s1">'nocache',</span><span class="s3">\n  </span><span class="s1">'notranslate',</span><span class="s3">\n  </span><span class="s1">'indexifembedded',</span><span class="s3">\n  </span><span class="s1">'nositelinkssearchbox',</span><span class="s3">\n  </span><span class="s1">'unavailable_after',</span><span class="s3">\n  </span><span class="s1">'max-video-preview',</span><span class="s3">\n  </span><span class="s1">'max-image-preview',</span><span class="s3">\n  </span><span class="s1">'max-snippet',</span><span class="s3">\n</span><span class="s1">] as const</span><span class="s3">\n</span><span class="s1">const resolveRobotsValue: (robots: Metadata['robots']) =&gt; string | null = (</span><span class="s3">\n  </span><span class="s1">robots</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!robots) return null</span><span class="s3">\n  </span><span class="s1">if (typeof robots === 'string') return robots</span><span class="s3">\n\n  </span><span class="s1">const values: string[] = []</span><span class="s3">\n\n  </span><span class="s1">if (robots.index) values.push('index')</span><span class="s3">\n  </span><span class="s1">else if (typeof robots.index === 'boolean') values.push('noindex')</span><span class="s3">\n\n  </span><span class="s1">if (robots.follow) values.push('follow')</span><span class="s3">\n  </span><span class="s1">else if (typeof robots.follow === 'boolean') values.push('nofollow')</span><span class="s3">\n\n  </span><span class="s1">for (const key of robotsKeys) {</span><span class="s3">\n    </span><span class="s1">const value = robots[key]</span><span class="s3">\n    </span><span class="s1">if (typeof value !== 'undefined' &amp;&amp; value !== false) {</span><span class="s3">\n      </span><span class="s1">values.push(typeof value === 'boolean' ? key : `${key}:${value}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return values.join(', ')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveRobots: FieldResolver&lt;'robots'&gt; = (robots) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!robots) return null</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">basic: resolveRobotsValue(robots),</span><span class="s3">\n    </span><span class="s1">googleBot:</span><span class="s3">\n      </span><span class="s1">typeof robots !== 'string' ? resolveRobotsValue(robots.googleBot) : null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const VerificationKeys = ['google', 'yahoo', 'yandex', 'me', 'other'] as const</span><span class="s3">\n</span><span class="s1">export const resolveVerification: FieldResolver&lt;'verification'&gt; = (</span><span class="s3">\n  </span><span class="s1">verification</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!verification) return null</span><span class="s3">\n  </span><span class="s1">const res: ResolvedVerification = {}</span><span class="s3">\n\n  </span><span class="s1">for (const key of VerificationKeys) {</span><span class="s3">\n    </span><span class="s1">const value = verification[key]</span><span class="s3">\n    </span><span class="s1">if (value) {</span><span class="s3">\n      </span><span class="s1">if (key === 'other') {</span><span class="s3">\n        </span><span class="s1">res.other = {}</span><span class="s3">\n        </span><span class="s1">for (const otherKey in verification.other) {</span><span class="s3">\n          </span><span class="s1">const otherValue = resolveAsArrayOrUndefined(</span><span class="s3">\n            </span><span class="s1">verification.other[otherKey]</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">if (otherValue) res.other[otherKey] = otherValue</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else res[key] = resolveAsArrayOrUndefined(value) as (string | number)[]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return res</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveAppleWebApp: FieldResolver&lt;'appleWebApp'&gt; = (appWebApp) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!appWebApp) return null</span><span class="s3">\n  </span><span class="s1">if (appWebApp === true) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">capable: true,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const startupImages = appWebApp.startupImage</span><span class="s3">\n    </span><span class="s1">? resolveAsArrayOrUndefined(appWebApp.startupImage)?.map((item) =&gt;</span><span class="s3">\n        </span><span class="s1">typeof item === 'string' ? { url: item } : item</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">: null</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">capable: 'capable' in appWebApp ? !!appWebApp.capable : true,</span><span class="s3">\n    </span><span class="s1">title: appWebApp.title || null,</span><span class="s3">\n    </span><span class="s1">startupImage: startupImages,</span><span class="s3">\n    </span><span class="s1">statusBarStyle: appWebApp.statusBarStyle || 'default',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveAppLinks: FieldResolver&lt;'appLinks'&gt; = (appLinks) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!appLinks) return null</span><span class="s3">\n  </span><span class="s1">for (const key in appLinks) {</span><span class="s3">\n    </span><span class="s1">// @ts-ignore // TODO: type infer</span><span class="s3">\n    </span><span class="s1">appLinks[key] = resolveAsArrayOrUndefined(appLinks[key])</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return appLinks as ResolvedMetadata['appLinks']</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveItunes: AsyncFieldResolverExtraArgs&lt;</span><span class="s3">\n  </span><span class="s1">'itunes',</span><span class="s3">\n  </span><span class="s1">[ResolvedMetadata['metadataBase'], Promise&lt;string&gt;, MetadataContext]</span><span class="s3">\n</span><span class="s1">&gt; = async (itunes, metadataBase, pathname, context) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!itunes) return null</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">appId: itunes.appId,</span><span class="s3">\n    </span><span class="s1">appArgument: itunes.appArgument</span><span class="s3">\n      </span><span class="s1">? resolveAlternateUrl(</span><span class="s3">\n          </span><span class="s1">itunes.appArgument,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">await pathname,</span><span class="s3">\n          </span><span class="s1">context</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: undefined,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveFacebook: FieldResolver&lt;'facebook'&gt; = (facebook) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!facebook) return null</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">appId: facebook.appId,</span><span class="s3">\n    </span><span class="s1">admins: resolveAsArrayOrUndefined(facebook.admins),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolvePagination: AsyncFieldResolverExtraArgs&lt;</span><span class="s3">\n  </span><span class="s1">'pagination',</span><span class="s3">\n  </span><span class="s1">[ResolvedMetadata['metadataBase'], Promise&lt;string&gt;, MetadataContext]</span><span class="s3">\n</span><span class="s1">&gt; = async (pagination, metadataBase, pathname, context) =&gt; {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">previous: pagination?.previous</span><span class="s3">\n      </span><span class="s1">? resolveAlternateUrl(</span><span class="s3">\n          </span><span class="s1">pagination.previous,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">await pathname,</span><span class="s3">\n          </span><span class="s1">context</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n    </span><span class="s1">next: pagination?.next</span><span class="s3">\n      </span><span class="s1">? resolveAlternateUrl(</span><span class="s3">\n          </span><span class="s1">pagination.next,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">await pathname,</span><span class="s3">\n          </span><span class="s1">context</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveAsArrayOrUndefined&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAbsoluteUrlWithPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAlternateUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataContext&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;newUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveThemeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;themeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;themeColorDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;color&quot;</span><span class="s0">,</span><span class="s1">&quot;media&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveUrlValuesOfObject&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnameForUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveCanonicalUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;urlOrDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAlternates&quot;</span><span class="s0">,</span><span class="s1">&quot;alternates&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;canonical&quot;</span><span class="s0">,</span><span class="s1">&quot;languages&quot;</span><span class="s0">,</span><span class="s1">&quot;types&quot;</span><span class="s0">,</span><span class="s1">&quot;robotsKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveRobotsValue&quot;</span><span class="s0">,</span><span class="s1">&quot;robots&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;follow&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveRobots&quot;</span><span class="s0">,</span><span class="s1">&quot;basic&quot;</span><span class="s0">,</span><span class="s1">&quot;googleBot&quot;</span><span class="s0">,</span><span class="s1">&quot;VerificationKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveVerification&quot;</span><span class="s0">,</span><span class="s1">&quot;verification&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;otherKey&quot;</span><span class="s0">,</span><span class="s1">&quot;otherValue&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAppleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;appWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;capable&quot;</span><span class="s0">,</span><span class="s1">&quot;startupImages&quot;</span><span class="s0">,</span><span class="s1">&quot;startupImage&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;statusBarStyle&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAppLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;appLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveItunes&quot;</span><span class="s0">,</span><span class="s1">&quot;itunes&quot;</span><span class="s0">,</span><span class="s1">&quot;appId&quot;</span><span class="s0">,</span><span class="s1">&quot;appArgument&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveFacebook&quot;</span><span class="s0">,</span><span class="s1">&quot;facebook&quot;</span><span class="s0">,</span><span class="s1">&quot;admins&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvePagination&quot;</span><span class="s0">,</span><span class="s1">&quot;pagination&quot;</span><span class="s0">,</span><span class="s1">&quot;previous&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9674</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolvers/resolve-icons.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ResolvedMetadata } from '../types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { Icon, IconDescriptor } from '../types/metadata-types'</span><span class="s3">\n</span><span class="s1">import type { FieldResolver } from '../types/resolvers'</span><span class="s3">\n</span><span class="s1">import { resolveAsArrayOrUndefined } from '../generate/utils'</span><span class="s3">\n</span><span class="s1">import { isStringOrURL } from './resolve-url'</span><span class="s3">\n</span><span class="s1">import { IconKeys } from '../constants'</span><span class="s3">\n\n</span><span class="s1">export function resolveIcon(icon: Icon): IconDescriptor {</span><span class="s3">\n  </span><span class="s1">if (isStringOrURL(icon)) return { url: icon }</span><span class="s3">\n  </span><span class="s1">else if (Array.isArray(icon)) return icon</span><span class="s3">\n  </span><span class="s1">return icon</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const resolveIcons: FieldResolver&lt;'icons'&gt; = (icons) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!icons) {</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const resolved: ResolvedMetadata['icons'] = {</span><span class="s3">\n    </span><span class="s1">icon: [],</span><span class="s3">\n    </span><span class="s1">apple: [],</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(icons)) {</span><span class="s3">\n    </span><span class="s1">resolved.icon = icons.map(resolveIcon).filter(Boolean)</span><span class="s3">\n  </span><span class="s1">} else if (isStringOrURL(icons)) {</span><span class="s3">\n    </span><span class="s1">resolved.icon = [resolveIcon(icons)]</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">for (const key of IconKeys) {</span><span class="s3">\n      </span><span class="s1">const values = resolveAsArrayOrUndefined(icons[key])</span><span class="s3">\n      </span><span class="s1">if (values) resolved[key] = values.map(resolveIcon)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolved</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveAsArrayOrUndefined&quot;</span><span class="s0">,</span><span class="s1">&quot;isStringOrURL&quot;</span><span class="s0">,</span><span class="s1">&quot;IconKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveIcon&quot;</span><span class="s0">,</span><span class="s1">&quot;icon&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveIcons&quot;</span><span class="s0">,</span><span class="s1">&quot;icons&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;apple&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAGA,SAASA,yBAAyB,QAAQ,oBAAmB;AAC7D,SAASC,aAAa,QAAQ,gBAAe;AAC7C,SAASC,QAAQ,QAAQ,eAAc;;;;AAEhC,SAASC,YAAYC,IAAU;IACpC,QAAIH,sMAAAA,EAAcG,OAAO,OAAO;QAAEC,KAAKD;IAAK;SACvC,IAAIE,MAAMC,OAAO,CAACH,OAAO,OAAOA;IACrC,OAAOA;AACT;AAEO,MAAMI,eAAuC,CAACC;IACnD,IAAI,CAACA,OAAO;QACV,OAAO;IACT;IAEA,MAAMC,WAAsC;QAC1CN,MAAM,EAAE;QACRO,OAAO,EAAE;IACX;IACA,IAAIL,MAAMC,OAAO,CAACE,QAAQ;QACxBC,SAASN,IAAI,GAAGK,MAAMG,GAAG,CAACT,aAAaU,MAAM,CAACC;IAChD,OAAO,QAAIb,sMAAAA,EAAcQ,QAAQ;QAC/BC,SAASN,IAAI,GAAG;YAACD,YAAYM;SAAO;IACtC,OAAO;QACL,KAAK,MAAMM,OAAOb,+KAAAA,CAAU;YAC1B,MAAMc,aAAShB,wMAAAA,EAA0BS,KAAK,CAACM,IAAI;YACnD,IAAIC,QAAQN,QAAQ,CAACK,IAAI,GAAGC,OAAOJ,GAAG,CAACT;QACzC;IACF;IACA,OAAOO;AACT,EAAC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9719</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/trace/constants.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Contains predefined constants for the trace span name in next/server.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Currently, next/server/tracer is internal implementation only for tracking</span><span class="s3">\n </span><span class="s1">* next.js's implementation only with known span names defined here.</span><span class="s3">\n </span><span class="s1">**/</span><span class="s3">\n\n</span><span class="s1">// eslint typescript has a bug with TS enums</span><span class="s3">\n</span><span class="s1">/* eslint-disable no-shadow */</span><span class="s3">\n\n</span><span class="s1">enum BaseServerSpan {</span><span class="s3">\n  </span><span class="s1">handleRequest = 'BaseServer.handleRequest',</span><span class="s3">\n  </span><span class="s1">run = 'BaseServer.run',</span><span class="s3">\n  </span><span class="s1">pipe = 'BaseServer.pipe',</span><span class="s3">\n  </span><span class="s1">getStaticHTML = 'BaseServer.getStaticHTML',</span><span class="s3">\n  </span><span class="s1">render = 'BaseServer.render',</span><span class="s3">\n  </span><span class="s1">renderToResponseWithComponents = 'BaseServer.renderToResponseWithComponents',</span><span class="s3">\n  </span><span class="s1">renderToResponse = 'BaseServer.renderToResponse',</span><span class="s3">\n  </span><span class="s1">renderToHTML = 'BaseServer.renderToHTML',</span><span class="s3">\n  </span><span class="s1">renderError = 'BaseServer.renderError',</span><span class="s3">\n  </span><span class="s1">renderErrorToResponse = 'BaseServer.renderErrorToResponse',</span><span class="s3">\n  </span><span class="s1">renderErrorToHTML = 'BaseServer.renderErrorToHTML',</span><span class="s3">\n  </span><span class="s1">render404 = 'BaseServer.render404',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum LoadComponentsSpan {</span><span class="s3">\n  </span><span class="s1">loadDefaultErrorComponents = 'LoadComponents.loadDefaultErrorComponents',</span><span class="s3">\n  </span><span class="s1">loadComponents = 'LoadComponents.loadComponents',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum NextServerSpan {</span><span class="s3">\n  </span><span class="s1">getRequestHandler = 'NextServer.getRequestHandler',</span><span class="s3">\n  </span><span class="s1">getServer = 'NextServer.getServer',</span><span class="s3">\n  </span><span class="s1">getServerRequestHandler = 'NextServer.getServerRequestHandler',</span><span class="s3">\n  </span><span class="s1">createServer = 'createServer.createServer',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum NextNodeServerSpan {</span><span class="s3">\n  </span><span class="s1">compression = 'NextNodeServer.compression',</span><span class="s3">\n  </span><span class="s1">getBuildId = 'NextNodeServer.getBuildId',</span><span class="s3">\n  </span><span class="s1">createComponentTree = 'NextNodeServer.createComponentTree',</span><span class="s3">\n  </span><span class="s1">clientComponentLoading = 'NextNodeServer.clientComponentLoading',</span><span class="s3">\n  </span><span class="s1">getLayoutOrPageModule = 'NextNodeServer.getLayoutOrPageModule',</span><span class="s3">\n  </span><span class="s1">generateStaticRoutes = 'NextNodeServer.generateStaticRoutes',</span><span class="s3">\n  </span><span class="s1">generateFsStaticRoutes = 'NextNodeServer.generateFsStaticRoutes',</span><span class="s3">\n  </span><span class="s1">generatePublicRoutes = 'NextNodeServer.generatePublicRoutes',</span><span class="s3">\n  </span><span class="s1">generateImageRoutes = 'NextNodeServer.generateImageRoutes.route',</span><span class="s3">\n  </span><span class="s1">sendRenderResult = 'NextNodeServer.sendRenderResult',</span><span class="s3">\n  </span><span class="s1">proxyRequest = 'NextNodeServer.proxyRequest',</span><span class="s3">\n  </span><span class="s1">runApi = 'NextNodeServer.runApi',</span><span class="s3">\n  </span><span class="s1">render = 'NextNodeServer.render',</span><span class="s3">\n  </span><span class="s1">renderHTML = 'NextNodeServer.renderHTML',</span><span class="s3">\n  </span><span class="s1">imageOptimizer = 'NextNodeServer.imageOptimizer',</span><span class="s3">\n  </span><span class="s1">getPagePath = 'NextNodeServer.getPagePath',</span><span class="s3">\n  </span><span class="s1">getRoutesManifest = 'NextNodeServer.getRoutesManifest',</span><span class="s3">\n  </span><span class="s1">findPageComponents = 'NextNodeServer.findPageComponents',</span><span class="s3">\n  </span><span class="s1">getFontManifest = 'NextNodeServer.getFontManifest',</span><span class="s3">\n  </span><span class="s1">getServerComponentManifest = 'NextNodeServer.getServerComponentManifest',</span><span class="s3">\n  </span><span class="s1">getRequestHandler = 'NextNodeServer.getRequestHandler',</span><span class="s3">\n  </span><span class="s1">renderToHTML = 'NextNodeServer.renderToHTML',</span><span class="s3">\n  </span><span class="s1">renderError = 'NextNodeServer.renderError',</span><span class="s3">\n  </span><span class="s1">renderErrorToHTML = 'NextNodeServer.renderErrorToHTML',</span><span class="s3">\n  </span><span class="s1">render404 = 'NextNodeServer.render404',</span><span class="s3">\n  </span><span class="s1">startResponse = 'NextNodeServer.startResponse',</span><span class="s3">\n\n  </span><span class="s1">// nested inner span, does not require parent scope name</span><span class="s3">\n  </span><span class="s1">route = 'route',</span><span class="s3">\n  </span><span class="s1">onProxyReq = 'onProxyReq',</span><span class="s3">\n  </span><span class="s1">apiResolver = 'apiResolver',</span><span class="s3">\n  </span><span class="s1">internalFetch = 'internalFetch',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum StartServerSpan {</span><span class="s3">\n  </span><span class="s1">startServer = 'startServer.startServer',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum RenderSpan {</span><span class="s3">\n  </span><span class="s1">getServerSideProps = 'Render.getServerSideProps',</span><span class="s3">\n  </span><span class="s1">getStaticProps = 'Render.getStaticProps',</span><span class="s3">\n  </span><span class="s1">renderToString = 'Render.renderToString',</span><span class="s3">\n  </span><span class="s1">renderDocument = 'Render.renderDocument',</span><span class="s3">\n  </span><span class="s1">createBodyResult = 'Render.createBodyResult',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum AppRenderSpan {</span><span class="s3">\n  </span><span class="s1">renderToString = 'AppRender.renderToString',</span><span class="s3">\n  </span><span class="s1">renderToReadableStream = 'AppRender.renderToReadableStream',</span><span class="s3">\n  </span><span class="s1">getBodyResult = 'AppRender.getBodyResult',</span><span class="s3">\n  </span><span class="s1">fetch = 'AppRender.fetch',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum RouterSpan {</span><span class="s3">\n  </span><span class="s1">executeRoute = 'Router.executeRoute',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum NodeSpan {</span><span class="s3">\n  </span><span class="s1">runHandler = 'Node.runHandler',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum AppRouteRouteHandlersSpan {</span><span class="s3">\n  </span><span class="s1">runHandler = 'AppRouteRouteHandlers.runHandler',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum ResolveMetadataSpan {</span><span class="s3">\n  </span><span class="s1">generateMetadata = 'ResolveMetadata.generateMetadata',</span><span class="s3">\n  </span><span class="s1">generateViewport = 'ResolveMetadata.generateViewport',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">enum MiddlewareSpan {</span><span class="s3">\n  </span><span class="s1">execute = 'Middleware.execute',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type SpanTypes =</span><span class="s3">\n  </span><span class="s1">| `${BaseServerSpan}`</span><span class="s3">\n  </span><span class="s1">| `${LoadComponentsSpan}`</span><span class="s3">\n  </span><span class="s1">| `${NextServerSpan}`</span><span class="s3">\n  </span><span class="s1">| `${StartServerSpan}`</span><span class="s3">\n  </span><span class="s1">| `${NextNodeServerSpan}`</span><span class="s3">\n  </span><span class="s1">| `${RenderSpan}`</span><span class="s3">\n  </span><span class="s1">| `${RouterSpan}`</span><span class="s3">\n  </span><span class="s1">| `${AppRenderSpan}`</span><span class="s3">\n  </span><span class="s1">| `${NodeSpan}`</span><span class="s3">\n  </span><span class="s1">| `${AppRouteRouteHandlersSpan}`</span><span class="s3">\n  </span><span class="s1">| `${ResolveMetadataSpan}`</span><span class="s3">\n  </span><span class="s1">| `${MiddlewareSpan}`</span><span class="s3">\n\n</span><span class="s1">// This list is used to filter out spans that are not relevant to the user</span><span class="s3">\n</span><span class="s1">export const NextVanillaSpanAllowlist = [</span><span class="s3">\n  </span><span class="s1">MiddlewareSpan.execute,</span><span class="s3">\n  </span><span class="s1">BaseServerSpan.handleRequest,</span><span class="s3">\n  </span><span class="s1">RenderSpan.getServerSideProps,</span><span class="s3">\n  </span><span class="s1">RenderSpan.getStaticProps,</span><span class="s3">\n  </span><span class="s1">AppRenderSpan.fetch,</span><span class="s3">\n  </span><span class="s1">AppRenderSpan.getBodyResult,</span><span class="s3">\n  </span><span class="s1">RenderSpan.renderDocument,</span><span class="s3">\n  </span><span class="s1">NodeSpan.runHandler,</span><span class="s3">\n  </span><span class="s1">AppRouteRouteHandlersSpan.runHandler,</span><span class="s3">\n  </span><span class="s1">ResolveMetadataSpan.generateMetadata,</span><span class="s3">\n  </span><span class="s1">ResolveMetadataSpan.generateViewport,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.createComponentTree,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.findPageComponents,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.getLayoutOrPageModule,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.startResponse,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.clientComponentLoading,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">// These Spans are allowed to be always logged</span><span class="s3">\n</span><span class="s1">// when the otel log prefix env is set</span><span class="s3">\n</span><span class="s1">export const LogSpanAllowList = [</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.findPageComponents,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.createComponentTree,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan.clientComponentLoading,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">BaseServerSpan,</span><span class="s3">\n  </span><span class="s1">LoadComponentsSpan,</span><span class="s3">\n  </span><span class="s1">NextServerSpan,</span><span class="s3">\n  </span><span class="s1">NextNodeServerSpan,</span><span class="s3">\n  </span><span class="s1">StartServerSpan,</span><span class="s3">\n  </span><span class="s1">RenderSpan,</span><span class="s3">\n  </span><span class="s1">RouterSpan,</span><span class="s3">\n  </span><span class="s1">AppRenderSpan,</span><span class="s3">\n  </span><span class="s1">NodeSpan,</span><span class="s3">\n  </span><span class="s1">AppRouteRouteHandlersSpan,</span><span class="s3">\n  </span><span class="s1">ResolveMetadataSpan,</span><span class="s3">\n  </span><span class="s1">MiddlewareSpan,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type { SpanTypes }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;BaseServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;LoadComponentsSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NextServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NextNodeServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;StartServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;AppRenderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;RouterSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NodeSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;AppRouteRouteHandlersSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;ResolveMetadataSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;MiddlewareSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NextVanillaSpanAllowlist&quot;</span><span class="s0">,</span><span class="s1">&quot;LogSpanAllowList&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;EAKE,GAEF,4CAA4C;AAC5C,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE5B,IAAKA,iBAAAA,WAAAA,GAAAA,SAAAA,cAAAA;;;;;;;;;;;;;WAAAA;EAAAA,kBAAAA,CAAAA;AAeL,IAAKC,qBAAAA,WAAAA,GAAAA,SAAAA,kBAAAA;;;WAAAA;EAAAA,sBAAAA,CAAAA;AAKL,IAAKC,iBAAAA,WAAAA,GAAAA,SAAAA,cAAAA;;;;;WAAAA;EAAAA,kBAAAA,CAAAA;AAOL,IAAKC,qBAAAA,WAAAA,GAAAA,SAAAA,kBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;IA4BH,wDAAwD;;;;;WA5BrDA;EAAAA,sBAAAA,CAAAA;AAmCL,IAAKC,kBAAAA,WAAAA,GAAAA,SAAAA,eAAAA;;WAAAA;EAAAA,mBAAAA,CAAAA;AAIL,IAAKC,aAAAA,WAAAA,GAAAA,SAAAA,UAAAA;;;;;;WAAAA;EAAAA,cAAAA,CAAAA;AAQL,IAAKC,gBAAAA,WAAAA,GAAAA,SAAAA,aAAAA;;;;;WAAAA;EAAAA,iBAAAA,CAAAA;AAOL,IAAKC,aAAAA,WAAAA,GAAAA,SAAAA,UAAAA;;WAAAA;EAAAA,cAAAA,CAAAA;AAIL,IAAKC,WAAAA,WAAAA,GAAAA,SAAAA,QAAAA;;WAAAA;EAAAA,YAAAA,CAAAA;AAIL,IAAKC,4BAAAA,WAAAA,GAAAA,SAAAA,yBAAAA;;WAAAA;EAAAA,6BAAAA,CAAAA;AAIL,IAAKC,sBAAAA,WAAAA,GAAAA,SAAAA,mBAAAA;;;WAAAA;EAAAA,uBAAAA,CAAAA;AAKL,IAAKC,iBAAAA,WAAAA,GAAAA,SAAAA,cAAAA;;WAAAA;EAAAA,kBAAAA,CAAAA;AAmBE,MAAMC,2BAA2B;;;;;;;;;;;;;;;;;CAiBvC,CAAA;AAIM,MAAMC,mBAAmB;;;;CAI/B,CAAA&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9885</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/is-thenable.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Check to see if a value is Thenable.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param promise the maybe-thenable value</span><span class="s3">\n </span><span class="s1">* @returns true if the value is thenable</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isThenable&lt;T = unknown&gt;(</span><span class="s3">\n  </span><span class="s1">promise: Promise&lt;T&gt; | T</span><span class="s3">\n</span><span class="s1">): promise is Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">promise !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof promise === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'then' in promise &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof promise.then === 'function'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isThenable&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;CAKC,GACD;;;;AAAO,SAASA,WACdC,OAAuB;IAEvB,OACEA,YAAY,QACZ,OAAOA,YAAY,YACnB,UAAUA,WACV,OAAOA,QAAQC,IAAI,KAAK;AAE5B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">9900</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/%40opentelemetry/api/index.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;(()=&gt;{</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;var e={491:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.ContextAPI=void 0;const n=r(223);const a=r(172);const o=r(930);const i=</span><span class="s3">\&quot;</span><span class="s1">context</span><span class="s3">\&quot;</span><span class="s1">;const c=new n.NoopContextManager;class ContextAPI{constructor(){}static getInstance(){if(!this._instance){this._instance=new ContextAPI}return this._instance}setGlobalContextManager(e){return(0,a.registerGlobal)(i,e,o.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,a.getGlobal)(i)||c}disable(){this._getContextManager().disable();(0,a.unregisterGlobal)(i,o.DiagAPI.instance())}}t.ContextAPI=ContextAPI},930:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.DiagAPI=void 0;const n=r(56);const a=r(912);const o=r(957);const i=r(172);const c=</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">;class DiagAPI{constructor(){function _logProxy(e){return function(...t){const r=(0,i.getGlobal)(</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">);if(!r)return;return r[e](...t)}}const e=this;const setLogger=(t,r={logLevel:o.DiagLogLevel.INFO})=&gt;{var n,c,s;if(t===e){const t=new Error(</span><span class="s3">\&quot;</span><span class="s1">Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation</span><span class="s3">\&quot;</span><span class="s1">);e.error((n=t.stack)!==null&amp;&amp;n!==void 0?n:t.message);return false}if(typeof r===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">){r={logLevel:r}}const u=(0,i.getGlobal)(</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">);const l=(0,a.createLogLevelDiagLogger)((c=r.logLevel)!==null&amp;&amp;c!==void 0?c:o.DiagLogLevel.INFO,t);if(u&amp;&amp;!r.suppressOverrideMessage){const e=(s=(new Error).stack)!==null&amp;&amp;s!==void 0?s:</span><span class="s3">\&quot;</span><span class="s1">&lt;failed to generate stacktrace&gt;</span><span class="s3">\&quot;</span><span class="s1">;u.warn(`Current logger will be overwritten from ${e}`);l.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)(</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">,l,e,true)};e.setLogger=setLogger;e.disable=()=&gt;{(0,i.unregisterGlobal)(c,e)};e.createComponentLogger=e=&gt;new n.DiagComponentLogger(e);e.verbose=_logProxy(</span><span class="s3">\&quot;</span><span class="s1">verbose</span><span class="s3">\&quot;</span><span class="s1">);e.debug=_logProxy(</span><span class="s3">\&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">);e.info=_logProxy(</span><span class="s3">\&quot;</span><span class="s1">info</span><span class="s3">\&quot;</span><span class="s1">);e.warn=_logProxy(</span><span class="s3">\&quot;</span><span class="s1">warn</span><span class="s3">\&quot;</span><span class="s1">);e.error=_logProxy(</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">)}static instance(){if(!this._instance){this._instance=new DiagAPI}return this._instance}}t.DiagAPI=DiagAPI},653:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.MetricsAPI=void 0;const n=r(660);const a=r(172);const o=r(930);const i=</span><span class="s3">\&quot;</span><span class="s1">metrics</span><span class="s3">\&quot;</span><span class="s1">;class MetricsAPI{constructor(){}static getInstance(){if(!this._instance){this._instance=new MetricsAPI}return this._instance}setGlobalMeterProvider(e){return(0,a.registerGlobal)(i,e,o.DiagAPI.instance())}getMeterProvider(){return(0,a.getGlobal)(i)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,a.unregisterGlobal)(i,o.DiagAPI.instance())}}t.MetricsAPI=MetricsAPI},181:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.PropagationAPI=void 0;const n=r(172);const a=r(874);const o=r(194);const i=r(277);const c=r(369);const s=r(930);const u=</span><span class="s3">\&quot;</span><span class="s1">propagation</span><span class="s3">\&quot;</span><span class="s1">;const l=new a.NoopTextMapPropagator;class PropagationAPI{constructor(){this.createBaggage=c.createBaggage;this.getBaggage=i.getBaggage;this.getActiveBaggage=i.getActiveBaggage;this.setBaggage=i.setBaggage;this.deleteBaggage=i.deleteBaggage}static getInstance(){if(!this._instance){this._instance=new PropagationAPI}return this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,s.DiagAPI.instance())}inject(e,t,r=o.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=o.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,s.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||l}}t.PropagationAPI=PropagationAPI},997:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.TraceAPI=void 0;const n=r(172);const a=r(846);const o=r(139);const i=r(607);const c=r(930);const s=</span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">;class TraceAPI{constructor(){this._proxyTracerProvider=new a.ProxyTracerProvider;this.wrapSpanContext=o.wrapSpanContext;this.isSpanContextValid=o.isSpanContextValid;this.deleteSpan=i.deleteSpan;this.getSpan=i.getSpan;this.getActiveSpan=i.getActiveSpan;this.getSpanContext=i.getSpanContext;this.setSpan=i.setSpan;this.setSpanContext=i.setSpanContext}static getInstance(){if(!this._instance){this._instance=new TraceAPI}return this._instance}setGlobalTracerProvider(e){const t=(0,n.registerGlobal)(s,this._proxyTracerProvider,c.DiagAPI.instance());if(t){this._proxyTracerProvider.setDelegate(e)}return t}getTracerProvider(){return(0,n.getGlobal)(s)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(s,c.DiagAPI.instance());this._proxyTracerProvider=new a.ProxyTracerProvider}}t.TraceAPI=TraceAPI},277:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;const n=r(491);const a=r(780);const o=(0,a.createContextKey)(</span><span class="s3">\&quot;</span><span class="s1">OpenTelemetry Baggage Key</span><span class="s3">\&quot;</span><span class="s1">);function getBaggage(e){return e.getValue(o)||undefined}t.getBaggage=getBaggage;function getActiveBaggage(){return getBaggage(n.ContextAPI.getInstance().active())}t.getActiveBaggage=getActiveBaggage;function setBaggage(e,t){return e.setValue(o,t)}t.setBaggage=setBaggage;function deleteBaggage(e){return e.deleteValue(o)}t.deleteBaggage=deleteBaggage},993:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.BaggageImpl=void 0;class BaggageImpl{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){const t=this._entries.get(e);if(!t){return undefined}return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map((([e,t])=&gt;[e,t]))}setEntry(e,t){const r=new BaggageImpl(this._entries);r._entries.set(e,t);return r}removeEntry(e){const t=new BaggageImpl(this._entries);t._entries.delete(e);return t}removeEntries(...e){const t=new BaggageImpl(this._entries);for(const r of e){t._entries.delete(r)}return t}clear(){return new BaggageImpl}}t.BaggageImpl=BaggageImpl},830:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.baggageEntryMetadataSymbol=void 0;t.baggageEntryMetadataSymbol=Symbol(</span><span class="s3">\&quot;</span><span class="s1">BaggageEntryMetadata</span><span class="s3">\&quot;</span><span class="s1">)},369:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.baggageEntryMetadataFromString=t.createBaggage=void 0;const n=r(930);const a=r(993);const o=r(830);const i=n.DiagAPI.instance();function createBaggage(e={}){return new a.BaggageImpl(new Map(Object.entries(e)))}t.createBaggage=createBaggage;function baggageEntryMetadataFromString(e){if(typeof e!==</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">){i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`);e=</span><span class="s3">\&quot;\&quot;</span><span class="s1">}return{__TYPE__:o.baggageEntryMetadataSymbol,toString(){return e}}}t.baggageEntryMetadataFromString=baggageEntryMetadataFromString},67:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.context=void 0;const n=r(491);t.context=n.ContextAPI.getInstance()},223:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NoopContextManager=void 0;const n=r(780);class NoopContextManager{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=NoopContextManager},780:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.ROOT_CONTEXT=t.createContextKey=void 0;function createContextKey(e){return Symbol.for(e)}t.createContextKey=createContextKey;class BaseContext{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map;t.getValue=e=&gt;t._currentContext.get(e);t.setValue=(e,r)=&gt;{const n=new BaseContext(t._currentContext);n._currentContext.set(e,r);return n};t.deleteValue=e=&gt;{const r=new BaseContext(t._currentContext);r._currentContext.delete(e);return r}}}t.ROOT_CONTEXT=new BaseContext},506:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.diag=void 0;const n=r(930);t.diag=n.DiagAPI.instance()},56:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.DiagComponentLogger=void 0;const n=r(172);class DiagComponentLogger{constructor(e){this._namespace=e.namespace||</span><span class="s3">\&quot;</span><span class="s1">DiagComponentLogger</span><span class="s3">\&quot;</span><span class="s1">}debug(...e){return logProxy(</span><span class="s3">\&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">,this._namespace,e)}error(...e){return logProxy(</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">,this._namespace,e)}info(...e){return logProxy(</span><span class="s3">\&quot;</span><span class="s1">info</span><span class="s3">\&quot;</span><span class="s1">,this._namespace,e)}warn(...e){return logProxy(</span><span class="s3">\&quot;</span><span class="s1">warn</span><span class="s3">\&quot;</span><span class="s1">,this._namespace,e)}verbose(...e){return logProxy(</span><span class="s3">\&quot;</span><span class="s1">verbose</span><span class="s3">\&quot;</span><span class="s1">,this._namespace,e)}}t.DiagComponentLogger=DiagComponentLogger;function logProxy(e,t,r){const a=(0,n.getGlobal)(</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">);if(!a){return}r.unshift(t);return a[e](...r)}},972:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.DiagConsoleLogger=void 0;const r=[{n:</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">,c:</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">},{n:</span><span class="s3">\&quot;</span><span class="s1">warn</span><span class="s3">\&quot;</span><span class="s1">,c:</span><span class="s3">\&quot;</span><span class="s1">warn</span><span class="s3">\&quot;</span><span class="s1">},{n:</span><span class="s3">\&quot;</span><span class="s1">info</span><span class="s3">\&quot;</span><span class="s1">,c:</span><span class="s3">\&quot;</span><span class="s1">info</span><span class="s3">\&quot;</span><span class="s1">},{n:</span><span class="s3">\&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">,c:</span><span class="s3">\&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">},{n:</span><span class="s3">\&quot;</span><span class="s1">verbose</span><span class="s3">\&quot;</span><span class="s1">,c:</span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">}];class DiagConsoleLogger{constructor(){function _consoleFunc(e){return function(...t){if(console){let r=console[e];if(typeof r!==</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">){r=console.log}if(typeof r===</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">){return r.apply(console,t)}}}}for(let e=0;e&lt;r.length;e++){this[r[e].n]=_consoleFunc(r[e].c)}}}t.DiagConsoleLogger=DiagConsoleLogger},912:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.createLogLevelDiagLogger=void 0;const n=r(957);function createLogLevelDiagLogger(e,t){if(e&lt;n.DiagLogLevel.NONE){e=n.DiagLogLevel.NONE}else if(e&gt;n.DiagLogLevel.ALL){e=n.DiagLogLevel.ALL}t=t||{};function _filterFunc(r,n){const a=t[r];if(typeof a===</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;e&gt;=n){return a.bind(t)}return function(){}}return{error:_filterFunc(</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">,n.DiagLogLevel.ERROR),warn:_filterFunc(</span><span class="s3">\&quot;</span><span class="s1">warn</span><span class="s3">\&quot;</span><span class="s1">,n.DiagLogLevel.WARN),info:_filterFunc(</span><span class="s3">\&quot;</span><span class="s1">info</span><span class="s3">\&quot;</span><span class="s1">,n.DiagLogLevel.INFO),debug:_filterFunc(</span><span class="s3">\&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">,n.DiagLogLevel.DEBUG),verbose:_filterFunc(</span><span class="s3">\&quot;</span><span class="s1">verbose</span><span class="s3">\&quot;</span><span class="s1">,n.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=createLogLevelDiagLogger},957:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.DiagLogLevel=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">NONE</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">NONE</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">ERROR</span><span class="s3">\&quot;</span><span class="s1">]=30]=</span><span class="s3">\&quot;</span><span class="s1">ERROR</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">WARN</span><span class="s3">\&quot;</span><span class="s1">]=50]=</span><span class="s3">\&quot;</span><span class="s1">WARN</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">INFO</span><span class="s3">\&quot;</span><span class="s1">]=60]=</span><span class="s3">\&quot;</span><span class="s1">INFO</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">DEBUG</span><span class="s3">\&quot;</span><span class="s1">]=70]=</span><span class="s3">\&quot;</span><span class="s1">DEBUG</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">VERBOSE</span><span class="s3">\&quot;</span><span class="s1">]=80]=</span><span class="s3">\&quot;</span><span class="s1">VERBOSE</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">ALL</span><span class="s3">\&quot;</span><span class="s1">]=9999]=</span><span class="s3">\&quot;</span><span class="s1">ALL</span><span class="s3">\&quot;</span><span class="s1">})(r=t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;const n=r(200);const a=r(521);const o=r(130);const i=a.VERSION.split(</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\&quot;</span><span class="s1">)[0];const c=Symbol.for(`opentelemetry.js.api.${i}`);const s=n._globalThis;function registerGlobal(e,t,r,n=false){var o;const i=s[c]=(o=s[c])!==null&amp;&amp;o!==void 0?o:{version:a.VERSION};if(!n&amp;&amp;i[e]){const t=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);r.error(t.stack||t.message);return false}if(i.version!==a.VERSION){const t=new Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${a.VERSION}`);r.error(t.stack||t.message);return false}i[e]=t;r.debug(`@opentelemetry/api: Registered a global for ${e} v${a.VERSION}.`);return true}t.registerGlobal=registerGlobal;function getGlobal(e){var t,r;const n=(t=s[c])===null||t===void 0?void 0:t.version;if(!n||!(0,o.isCompatible)(n)){return}return(r=s[c])===null||r===void 0?void 0:r[e]}t.getGlobal=getGlobal;function unregisterGlobal(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${a.VERSION}.`);const r=s[c];if(r){delete r[e]}}t.unregisterGlobal=unregisterGlobal},130:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.isCompatible=t._makeCompatibilityCheck=void 0;const n=r(521);const a=/^(</span><span class="s3">\\</span><span class="s1">d+)</span><span class="s3">\\</span><span class="s1">.(</span><span class="s3">\\</span><span class="s1">d+)</span><span class="s3">\\</span><span class="s1">.(</span><span class="s3">\\</span><span class="s1">d+)(-(.+))?$/;function _makeCompatibilityCheck(e){const t=new Set([e]);const r=new Set;const n=e.match(a);if(!n){return()=&gt;false}const o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null){return function isExactmatch(t){return t===e}}function _reject(e){r.add(e);return false}function _accept(e){t.add(e);return true}return function isCompatible(e){if(t.has(e)){return true}if(r.has(e)){return false}const n=e.match(a);if(!n){return _reject(e)}const i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null){return _reject(e)}if(o.major!==i.major){return _reject(e)}if(o.major===0){if(o.minor===i.minor&amp;&amp;o.patch&lt;=i.patch){return _accept(e)}return _reject(e)}if(o.minor&lt;=i.minor){return _accept(e)}return _reject(e)}}t._makeCompatibilityCheck=_makeCompatibilityCheck;t.isCompatible=_makeCompatibilityCheck(n.VERSION)},886:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.metrics=void 0;const n=r(653);t.metrics=n.MetricsAPI.getInstance()},901:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.ValueType=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">INT</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">INT</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">DOUBLE</span><span class="s3">\&quot;</span><span class="s1">]=1]=</span><span class="s3">\&quot;</span><span class="s1">DOUBLE</span><span class="s3">\&quot;</span><span class="s1">})(r=t.ValueType||(t.ValueType={}))},102:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class NoopMeter{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=NoopMeter;class NoopMetric{}t.NoopMetric=NoopMetric;class NoopCounterMetric extends NoopMetric{add(e,t){}}t.NoopCounterMetric=NoopCounterMetric;class NoopUpDownCounterMetric extends NoopMetric{add(e,t){}}t.NoopUpDownCounterMetric=NoopUpDownCounterMetric;class NoopHistogramMetric extends NoopMetric{record(e,t){}}t.NoopHistogramMetric=NoopHistogramMetric;class NoopObservableMetric{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=NoopObservableMetric;class NoopObservableCounterMetric extends NoopObservableMetric{}t.NoopObservableCounterMetric=NoopObservableCounterMetric;class NoopObservableGaugeMetric extends NoopObservableMetric{}t.NoopObservableGaugeMetric=NoopObservableGaugeMetric;class NoopObservableUpDownCounterMetric extends NoopObservableMetric{}t.NoopObservableUpDownCounterMetric=NoopObservableUpDownCounterMetric;t.NOOP_METER=new NoopMeter;t.NOOP_COUNTER_METRIC=new NoopCounterMetric;t.NOOP_HISTOGRAM_METRIC=new NoopHistogramMetric;t.NOOP_UP_DOWN_COUNTER_METRIC=new NoopUpDownCounterMetric;t.NOOP_OBSERVABLE_COUNTER_METRIC=new NoopObservableCounterMetric;t.NOOP_OBSERVABLE_GAUGE_METRIC=new NoopObservableGaugeMetric;t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new NoopObservableUpDownCounterMetric;function createNoopMeter(){return t.NOOP_METER}t.createNoopMeter=createNoopMeter},660:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;const n=r(102);class NoopMeterProvider{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=NoopMeterProvider;t.NOOP_METER_PROVIDER=new NoopMeterProvider},200:function(e,t,r){var n=this&amp;&amp;this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var a=this&amp;&amp;this.__exportStar||function(e,t){for(var r in e)if(r!==</span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});a(r(46),t)},651:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t._globalThis=void 0;t._globalThis=typeof globalThis===</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">?globalThis:global},46:function(e,t,r){var n=this&amp;&amp;this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var a=this&amp;&amp;this.__exportStar||function(e,t){for(var r in e)if(r!==</span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});a(r(651),t)},939:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.propagation=void 0;const n=r(181);t.propagation=n.PropagationAPI.getInstance()},874:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NoopTextMapPropagator=void 0;class NoopTextMapPropagator{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=NoopTextMapPropagator},194:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.defaultTextMapSetter=t.defaultTextMapGetter=void 0;t.defaultTextMapGetter={get(e,t){if(e==null){return undefined}return e[t]},keys(e){if(e==null){return[]}return Object.keys(e)}};t.defaultTextMapSetter={set(e,t,r){if(e==null){return}e[t]=r}}},845:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.trace=void 0;const n=r(997);t.trace=n.TraceAPI.getInstance()},403:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NonRecordingSpan=void 0;const n=r(476);class NonRecordingSpan{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return false}recordException(e,t){}}t.NonRecordingSpan=NonRecordingSpan},614:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NoopTracer=void 0;const n=r(491);const a=r(607);const o=r(403);const i=r(139);const c=n.ContextAPI.getInstance();class NoopTracer{startSpan(e,t,r=c.active()){const n=Boolean(t===null||t===void 0?void 0:t.root);if(n){return new o.NonRecordingSpan}const s=r&amp;&amp;(0,a.getSpanContext)(r);if(isSpanContext(s)&amp;&amp;(0,i.isSpanContextValid)(s)){return new o.NonRecordingSpan(s)}else{return new o.NonRecordingSpan}}startActiveSpan(e,t,r,n){let o;let i;let s;if(arguments.length&lt;2){return}else if(arguments.length===2){s=t}else if(arguments.length===3){o=t;s=r}else{o=t;i=r;s=n}const u=i!==null&amp;&amp;i!==void 0?i:c.active();const l=this.startSpan(e,o,u);const g=(0,a.setSpan)(u,l);return c.with(g,s,undefined,l)}}t.NoopTracer=NoopTracer;function isSpanContext(e){return typeof e===</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;typeof e[</span><span class="s3">\&quot;</span><span class="s1">spanId</span><span class="s3">\&quot;</span><span class="s1">]===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;typeof e[</span><span class="s3">\&quot;</span><span class="s1">traceId</span><span class="s3">\&quot;</span><span class="s1">]===</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">&amp;&amp;typeof e[</span><span class="s3">\&quot;</span><span class="s1">traceFlags</span><span class="s3">\&quot;</span><span class="s1">]===</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">}},124:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.NoopTracerProvider=void 0;const n=r(614);class NoopTracerProvider{getTracer(e,t,r){return new n.NoopTracer}}t.NoopTracerProvider=NoopTracerProvider},125:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.ProxyTracer=void 0;const n=r(614);const a=new n.NoopTracer;class ProxyTracer{constructor(e,t,r,n){this._provider=e;this.name=t;this.version=r;this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){const a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)}_getTracer(){if(this._delegate){return this._delegate}const e=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!e){return a}this._delegate=e;return this._delegate}}t.ProxyTracer=ProxyTracer},846:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.ProxyTracerProvider=void 0;const n=r(125);const a=r(124);const o=new a.NoopTracerProvider;class ProxyTracerProvider{getTracer(e,t,r){var a;return(a=this.getDelegateTracer(e,t,r))!==null&amp;&amp;a!==void 0?a:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return(e=this._delegate)!==null&amp;&amp;e!==void 0?e:o}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(e,t,r)}}t.ProxyTracerProvider=ProxyTracerProvider},996:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.SamplingDecision=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">NOT_RECORD</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">NOT_RECORD</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">RECORD</span><span class="s3">\&quot;</span><span class="s1">]=1]=</span><span class="s3">\&quot;</span><span class="s1">RECORD</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">RECORD_AND_SAMPLED</span><span class="s3">\&quot;</span><span class="s1">]=2]=</span><span class="s3">\&quot;</span><span class="s1">RECORD_AND_SAMPLED</span><span class="s3">\&quot;</span><span class="s1">})(r=t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;const n=r(780);const a=r(403);const o=r(491);const i=(0,n.createContextKey)(</span><span class="s3">\&quot;</span><span class="s1">OpenTelemetry Context Key SPAN</span><span class="s3">\&quot;</span><span class="s1">);function getSpan(e){return e.getValue(i)||undefined}t.getSpan=getSpan;function getActiveSpan(){return getSpan(o.ContextAPI.getInstance().active())}t.getActiveSpan=getActiveSpan;function setSpan(e,t){return e.setValue(i,t)}t.setSpan=setSpan;function deleteSpan(e){return e.deleteValue(i)}t.deleteSpan=deleteSpan;function setSpanContext(e,t){return setSpan(e,new a.NonRecordingSpan(t))}t.setSpanContext=setSpanContext;function getSpanContext(e){var t;return(t=getSpan(e))===null||t===void 0?void 0:t.spanContext()}t.getSpanContext=getSpanContext},325:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.TraceStateImpl=void 0;const n=r(564);const a=32;const o=512;const i=</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">;const c=</span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">;class TraceStateImpl{constructor(e){this._internalState=new Map;if(e)this._parse(e)}set(e,t){const r=this._clone();if(r._internalState.has(e)){r._internalState.delete(e)}r._internalState.set(e,t);return r}unset(e){const t=this._clone();t._internalState.delete(e);return t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=&gt;{e.push(t+c+this.get(t));return e}),[]).join(i)}_parse(e){if(e.length&gt;o)return;this._internalState=e.split(i).reverse().reduce(((e,t)=&gt;{const r=t.trim();const a=r.indexOf(c);if(a!==-1){const o=r.slice(0,a);const i=r.slice(a+1,t.length);if((0,n.validateKey)(o)&amp;&amp;(0,n.validateValue)(i)){e.set(o,i)}else{}}return e}),new Map);if(this._internalState.size&gt;a){this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,a))}}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new TraceStateImpl;e._internalState=new Map(this._internalState);return e}}t.TraceStateImpl=TraceStateImpl},564:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.validateValue=t.validateKey=void 0;const r=</span><span class="s3">\&quot;</span><span class="s1">[_0-9a-z-*/]</span><span class="s3">\&quot;</span><span class="s1">;const n=`[a-z]${r}{0,255}`;const a=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`;const o=new RegExp(`^(?:${n}|${a})$`);const i=/^[ -~]{0,255}[!-~]$/;const c=/,|=/;function validateKey(e){return o.test(e)}t.validateKey=validateKey;function validateValue(e){return i.test(e)&amp;&amp;!c.test(e)}t.validateValue=validateValue},98:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.createTraceState=void 0;const n=r(325);function createTraceState(e){return new n.TraceStateImpl(e)}t.createTraceState=createTraceState},476:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;const n=r(475);t.INVALID_SPANID=</span><span class="s3">\&quot;</span><span class="s1">0000000000000000</span><span class="s3">\&quot;</span><span class="s1">;t.INVALID_TRACEID=</span><span class="s3">\&quot;</span><span class="s1">00000000000000000000000000000000</span><span class="s3">\&quot;</span><span class="s1">;t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.SpanKind=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">INTERNAL</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">INTERNAL</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">SERVER</span><span class="s3">\&quot;</span><span class="s1">]=1]=</span><span class="s3">\&quot;</span><span class="s1">SERVER</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">CLIENT</span><span class="s3">\&quot;</span><span class="s1">]=2]=</span><span class="s3">\&quot;</span><span class="s1">CLIENT</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">PRODUCER</span><span class="s3">\&quot;</span><span class="s1">]=3]=</span><span class="s3">\&quot;</span><span class="s1">PRODUCER</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">CONSUMER</span><span class="s3">\&quot;</span><span class="s1">]=4]=</span><span class="s3">\&quot;</span><span class="s1">CONSUMER</span><span class="s3">\&quot;</span><span class="s1">})(r=t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;const n=r(476);const a=r(403);const o=/^([0-9a-f]{32})$/i;const i=/^[0-9a-f]{16}$/i;function isValidTraceId(e){return o.test(e)&amp;&amp;e!==n.INVALID_TRACEID}t.isValidTraceId=isValidTraceId;function isValidSpanId(e){return i.test(e)&amp;&amp;e!==n.INVALID_SPANID}t.isValidSpanId=isValidSpanId;function isSpanContextValid(e){return isValidTraceId(e.traceId)&amp;&amp;isValidSpanId(e.spanId)}t.isSpanContextValid=isSpanContextValid;function wrapSpanContext(e){return new a.NonRecordingSpan(e)}t.wrapSpanContext=wrapSpanContext},847:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.SpanStatusCode=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">UNSET</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">UNSET</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">OK</span><span class="s3">\&quot;</span><span class="s1">]=1]=</span><span class="s3">\&quot;</span><span class="s1">OK</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">ERROR</span><span class="s3">\&quot;</span><span class="s1">]=2]=</span><span class="s3">\&quot;</span><span class="s1">ERROR</span><span class="s3">\&quot;</span><span class="s1">})(r=t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.TraceFlags=void 0;var r;(function(e){e[e[</span><span class="s3">\&quot;</span><span class="s1">NONE</span><span class="s3">\&quot;</span><span class="s1">]=0]=</span><span class="s3">\&quot;</span><span class="s1">NONE</span><span class="s3">\&quot;</span><span class="s1">;e[e[</span><span class="s3">\&quot;</span><span class="s1">SAMPLED</span><span class="s3">\&quot;</span><span class="s1">]=1]=</span><span class="s3">\&quot;</span><span class="s1">SAMPLED</span><span class="s3">\&quot;</span><span class="s1">})(r=t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=&gt;{Object.defineProperty(t,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});t.VERSION=void 0;t.VERSION=</span><span class="s3">\&quot;</span><span class="s1">1.6.0</span><span class="s3">\&quot;</span><span class="s1">}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var a=t[r]={exports:{}};var o=true;try{e[r].call(a.exports,a,a.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return a.exports}if(typeof __nccwpck_require__!==</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">)__nccwpck_require__.ab=__dirname+</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;var r={};(()=&gt;{var e=r;Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">,{value:true});e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var t=__nccwpck_require__(369);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">baggageEntryMetadataFromString</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return t.baggageEntryMetadataFromString}});var n=__nccwpck_require__(780);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">createContextKey</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return n.createContextKey}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">ROOT_CONTEXT</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return n.ROOT_CONTEXT}});var a=__nccwpck_require__(972);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">DiagConsoleLogger</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return a.DiagConsoleLogger}});var o=__nccwpck_require__(957);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">DiagLogLevel</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return o.DiagLogLevel}});var i=__nccwpck_require__(102);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">createNoopMeter</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return i.createNoopMeter}});var c=__nccwpck_require__(901);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">ValueType</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return c.ValueType}});var s=__nccwpck_require__(194);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">defaultTextMapGetter</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return s.defaultTextMapGetter}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">defaultTextMapSetter</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return s.defaultTextMapSetter}});var u=__nccwpck_require__(125);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">ProxyTracer</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return u.ProxyTracer}});var l=__nccwpck_require__(846);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">ProxyTracerProvider</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return l.ProxyTracerProvider}});var g=__nccwpck_require__(996);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">SamplingDecision</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return g.SamplingDecision}});var p=__nccwpck_require__(357);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">SpanKind</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return p.SpanKind}});var d=__nccwpck_require__(847);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">SpanStatusCode</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return d.SpanStatusCode}});var _=__nccwpck_require__(475);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">TraceFlags</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return _.TraceFlags}});var f=__nccwpck_require__(98);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">createTraceState</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return f.createTraceState}});var b=__nccwpck_require__(139);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">isSpanContextValid</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return b.isSpanContextValid}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">isValidTraceId</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return b.isValidTraceId}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">isValidSpanId</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return b.isValidSpanId}});var v=__nccwpck_require__(476);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">INVALID_SPANID</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return v.INVALID_SPANID}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">INVALID_TRACEID</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return v.INVALID_TRACEID}});Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">INVALID_SPAN_CONTEXT</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return v.INVALID_SPAN_CONTEXT}});const O=__nccwpck_require__(67);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">context</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return O.context}});const P=__nccwpck_require__(506);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">diag</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return P.diag}});const N=__nccwpck_require__(886);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">metrics</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return N.metrics}});const S=__nccwpck_require__(939);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">propagation</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return S.propagation}});const C=__nccwpck_require__(845);Object.defineProperty(e,</span><span class="s3">\&quot;</span><span class="s1">trace</span><span class="s3">\&quot;</span><span class="s1">,{enumerable:true,get:function(){return C.trace}});e[</span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot;</span><span class="s1">]={context:O.context,diag:P.diag,metrics:N.metrics,propagation:S.propagation,trace:C.trace}})();module.exports=r})();&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">11386</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/trace/tracer.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { FetchEventResult } from '../../web/types'</span><span class="s3">\n</span><span class="s1">import type { TextMapSetter } from '@opentelemetry/api'</span><span class="s3">\n</span><span class="s1">import type { SpanTypes } from './constants'</span><span class="s3">\n</span><span class="s1">import { LogSpanAllowList, NextVanillaSpanAllowlist } from './constants'</span><span class="s3">\n\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">ContextAPI,</span><span class="s3">\n  </span><span class="s1">Span,</span><span class="s3">\n  </span><span class="s1">SpanOptions,</span><span class="s3">\n  </span><span class="s1">Tracer,</span><span class="s3">\n  </span><span class="s1">AttributeValue,</span><span class="s3">\n  </span><span class="s1">TextMapGetter,</span><span class="s3">\n</span><span class="s1">} from 'next/dist/compiled/@opentelemetry/api'</span><span class="s3">\n</span><span class="s1">import { isThenable } from '../../../shared/lib/is-thenable'</span><span class="s3">\n\n</span><span class="s1">let api: typeof import('next/dist/compiled/@opentelemetry/api')</span><span class="s3">\n\n</span><span class="s1">// we want to allow users to use their own version of @opentelemetry/api if they</span><span class="s3">\n</span><span class="s1">// want to, so we try to require it first, and if it fails we fall back to the</span><span class="s3">\n</span><span class="s1">// version that is bundled with Next.js</span><span class="s3">\n</span><span class="s1">// this is because @opentelemetry/api has to be synced with the version of</span><span class="s3">\n</span><span class="s1">// @opentelemetry/tracing that is used, and we don't want to force users to use</span><span class="s3">\n</span><span class="s1">// the version that is bundled with Next.js.</span><span class="s3">\n</span><span class="s1">// the API is ~stable, so this should be fine</span><span class="s3">\n</span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n  </span><span class="s1">api = require('@opentelemetry/api') as typeof import('@opentelemetry/api')</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">api = require('@opentelemetry/api') as typeof import('@opentelemetry/api')</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">api =</span><span class="s3">\n      </span><span class="s1">require('next/dist/compiled/@opentelemetry/api') as typeof import('next/dist/compiled/@opentelemetry/api')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const { context, propagation, trace, SpanStatusCode, SpanKind, ROOT_CONTEXT } =</span><span class="s3">\n  </span><span class="s1">api</span><span class="s3">\n\n</span><span class="s1">export class BubbledError extends Error {</span><span class="s3">\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">public readonly bubble?: boolean,</span><span class="s3">\n    </span><span class="s1">public readonly result?: FetchEventResult</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">super()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isBubbledError(error: unknown): error is BubbledError {</span><span class="s3">\n  </span><span class="s1">if (typeof error !== 'object' || error === null) return false</span><span class="s3">\n  </span><span class="s1">return error instanceof BubbledError</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const closeSpanWithError = (span: Span, error?: Error) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (isBubbledError(error) &amp;&amp; error.bubble) {</span><span class="s3">\n    </span><span class="s1">span.setAttribute('next.bubble', true)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">if (error) {</span><span class="s3">\n      </span><span class="s1">span.recordException(error)</span><span class="s3">\n      </span><span class="s1">span.setAttribute('error.type', error.name)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">span.setStatus({ code: SpanStatusCode.ERROR, message: error?.message })</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">span.end()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type TracerSpanOptions = Omit&lt;SpanOptions, 'attributes'&gt; &amp; {</span><span class="s3">\n  </span><span class="s1">parentSpan?: Span</span><span class="s3">\n  </span><span class="s1">spanName?: string</span><span class="s3">\n  </span><span class="s1">attributes?: Partial&lt;Record&lt;AttributeNames, AttributeValue | undefined&gt;&gt;</span><span class="s3">\n  </span><span class="s1">hideSpan?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface NextTracer {</span><span class="s3">\n  </span><span class="s1">getContext(): ContextAPI</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Instruments a function by automatically creating a span activated on its</span><span class="s3">\n   </span><span class="s1">* scope.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* The span will automatically be finished when one of these conditions is</span><span class="s3">\n   </span><span class="s1">* met:</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* * The function returns a promise, in which case the span will finish when</span><span class="s3">\n   </span><span class="s1">* the promise is resolved or rejected.</span><span class="s3">\n   </span><span class="s1">* * The function takes a callback as its second parameter, in which case the</span><span class="s3">\n   </span><span class="s1">* span will finish when that callback is called.</span><span class="s3">\n   </span><span class="s1">* * The function doesn't accept a callback and doesn't return a promise, in</span><span class="s3">\n   </span><span class="s1">* which case the span will finish at the end of the function execution.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Wrap a function to automatically create a span activated on its</span><span class="s3">\n   </span><span class="s1">* scope when it's called.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* The span will automatically be finished when one of these conditions is</span><span class="s3">\n   </span><span class="s1">* met:</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* * The function returns a promise, in which case the span will finish when</span><span class="s3">\n   </span><span class="s1">* the promise is resolved or rejected.</span><span class="s3">\n   </span><span class="s1">* * The function takes a callback as its last parameter, in which case the</span><span class="s3">\n   </span><span class="s1">* span will finish when that callback is called.</span><span class="s3">\n   </span><span class="s1">* * The function doesn't accept a callback and doesn't return a promise, in</span><span class="s3">\n   </span><span class="s1">* which case the span will finish at the end of the function execution.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(type: SpanTypes, fn: T): T</span><span class="s3">\n  </span><span class="s1">wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: (...args: any[]) =&gt; TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Starts and returns a new Span representing a logical unit of work.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* This method do NOT modify the current Context by default. In result, any inner span will not</span><span class="s3">\n   </span><span class="s1">* automatically set its parent context to the span created by this method unless manually activate</span><span class="s3">\n   </span><span class="s1">* context via `tracer.getContext().with`. `trace`, or `wrap` is generally recommended as it gracefully</span><span class="s3">\n   </span><span class="s1">* handles context activation. (ref: https://github.com/open-telemetry/opentelemetry-js/issues/1923)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">startSpan(type: SpanTypes): Span</span><span class="s3">\n  </span><span class="s1">startSpan(type: SpanTypes, options: TracerSpanOptions): Span</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns currently activated span if current context is in the scope of the span.</span><span class="s3">\n   </span><span class="s1">* Returns undefined otherwise.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">getActiveScopeSpan(): Span | undefined</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns trace propagation data for the currently active context. The format is equal to data provided</span><span class="s3">\n   </span><span class="s1">* through the OpenTelemetry propagator API.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">getTracePropagationData(): ClientTraceDataEntry[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type NextAttributeNames =</span><span class="s3">\n  </span><span class="s1">| 'next.route'</span><span class="s3">\n  </span><span class="s1">| 'next.page'</span><span class="s3">\n  </span><span class="s1">| 'next.rsc'</span><span class="s3">\n  </span><span class="s1">| 'next.segment'</span><span class="s3">\n  </span><span class="s1">| 'next.span_name'</span><span class="s3">\n  </span><span class="s1">| 'next.span_type'</span><span class="s3">\n  </span><span class="s1">| 'next.clientComponentLoadCount'</span><span class="s3">\n</span><span class="s1">type OTELAttributeNames = `http.${string}` | `net.${string}`</span><span class="s3">\n</span><span class="s1">type AttributeNames = NextAttributeNames | OTELAttributeNames</span><span class="s3">\n\n</span><span class="s1">/** we use this map to propagate attributes from nested spans to the top span */</span><span class="s3">\n</span><span class="s1">const rootSpanAttributesStore = new Map&lt;</span><span class="s3">\n  </span><span class="s1">number,</span><span class="s3">\n  </span><span class="s1">Map&lt;AttributeNames, AttributeValue | undefined&gt;</span><span class="s3">\n</span><span class="s1">&gt;()</span><span class="s3">\n</span><span class="s1">const rootSpanIdKey = api.createContextKey('next.rootSpanId')</span><span class="s3">\n</span><span class="s1">let lastSpanId = 0</span><span class="s3">\n</span><span class="s1">const getSpanId = () =&gt; lastSpanId++</span><span class="s3">\n\n</span><span class="s1">export interface ClientTraceDataEntry {</span><span class="s3">\n  </span><span class="s1">key: string</span><span class="s3">\n  </span><span class="s1">value: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const clientTraceDataSetter: TextMapSetter&lt;ClientTraceDataEntry[]&gt; = {</span><span class="s3">\n  </span><span class="s1">set(carrier, key, value) {</span><span class="s3">\n    </span><span class="s1">carrier.push({</span><span class="s3">\n      </span><span class="s1">key,</span><span class="s3">\n      </span><span class="s1">value,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">class NextTracerImpl implements NextTracer {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns an instance to the trace with configured name.</span><span class="s3">\n   </span><span class="s1">* Since wrap / trace can be defined in any place prior to actual trace subscriber initialization,</span><span class="s3">\n   </span><span class="s1">* This should be lazily evaluated.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private getTracerInstance(): Tracer {</span><span class="s3">\n    </span><span class="s1">return trace.getTracer('next.js', '0.0.1')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getContext(): ContextAPI {</span><span class="s3">\n    </span><span class="s1">return context</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getTracePropagationData(): ClientTraceDataEntry[] {</span><span class="s3">\n    </span><span class="s1">const activeContext = context.active()</span><span class="s3">\n    </span><span class="s1">const entries: ClientTraceDataEntry[] = []</span><span class="s3">\n    </span><span class="s1">propagation.inject(activeContext, entries, clientTraceDataSetter)</span><span class="s3">\n    </span><span class="s1">return entries</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getActiveScopeSpan(): Span | undefined {</span><span class="s3">\n    </span><span class="s1">return trace.getSpan(context?.active())</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public withPropagatedContext&lt;T, C&gt;(</span><span class="s3">\n    </span><span class="s1">carrier: C,</span><span class="s3">\n    </span><span class="s1">fn: () =&gt; T,</span><span class="s3">\n    </span><span class="s1">getter?: TextMapGetter&lt;C&gt;</span><span class="s3">\n  </span><span class="s1">): T {</span><span class="s3">\n    </span><span class="s1">const activeContext = context.active()</span><span class="s3">\n    </span><span class="s1">if (trace.getSpanContext(activeContext)) {</span><span class="s3">\n      </span><span class="s1">// Active span is already set, too late to propagate.</span><span class="s3">\n      </span><span class="s1">return fn()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const remoteContext = propagation.extract(activeContext, carrier, getter)</span><span class="s3">\n    </span><span class="s1">return context.with(remoteContext, fn)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Trace, wrap implementation is inspired by datadog trace implementation</span><span class="s3">\n  </span><span class="s1">// (https://datadoghq.dev/dd-trace-js/interfaces/tracer.html#trace).</span><span class="s3">\n  </span><span class="s1">public trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">public trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">public trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">public trace&lt;T&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">public trace&lt;T&gt;(...args: Array&lt;any&gt;) {</span><span class="s3">\n    </span><span class="s1">const [type, fnOrOptions, fnOrEmpty] = args</span><span class="s3">\n\n    </span><span class="s1">// coerce options form overload</span><span class="s3">\n    </span><span class="s1">const {</span><span class="s3">\n      </span><span class="s1">fn,</span><span class="s3">\n      </span><span class="s1">options,</span><span class="s3">\n    </span><span class="s1">}: {</span><span class="s3">\n      </span><span class="s1">fn: (span?: Span, done?: (error?: Error) =&gt; any) =&gt; T | Promise&lt;T&gt;</span><span class="s3">\n      </span><span class="s1">options: TracerSpanOptions</span><span class="s3">\n    </span><span class="s1">} =</span><span class="s3">\n      </span><span class="s1">typeof fnOrOptions === 'function'</span><span class="s3">\n        </span><span class="s1">? {</span><span class="s3">\n            </span><span class="s1">fn: fnOrOptions,</span><span class="s3">\n            </span><span class="s1">options: {},</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">: {</span><span class="s3">\n            </span><span class="s1">fn: fnOrEmpty,</span><span class="s3">\n            </span><span class="s1">options: { ...fnOrOptions },</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const spanName = options.spanName ?? type</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(!NextVanillaSpanAllowlist.includes(type) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">process.env.NEXT_OTEL_VERBOSE !== '1') ||</span><span class="s3">\n      </span><span class="s1">options.hideSpan</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return fn()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Trying to get active scoped span to assign parent. If option specifies parent span manually, will try to use it.</span><span class="s3">\n    </span><span class="s1">let spanContext = this.getSpanContext(</span><span class="s3">\n      </span><span class="s1">options?.parentSpan ?? this.getActiveScopeSpan()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">let isRootSpan = false</span><span class="s3">\n\n    </span><span class="s1">if (!spanContext) {</span><span class="s3">\n      </span><span class="s1">spanContext = context?.active() ?? ROOT_CONTEXT</span><span class="s3">\n      </span><span class="s1">isRootSpan = true</span><span class="s3">\n    </span><span class="s1">} else if (trace.getSpanContext(spanContext)?.isRemote) {</span><span class="s3">\n      </span><span class="s1">isRootSpan = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const spanId = getSpanId()</span><span class="s3">\n\n    </span><span class="s1">options.attributes = {</span><span class="s3">\n      </span><span class="s1">'next.span_name': spanName,</span><span class="s3">\n      </span><span class="s1">'next.span_type': type,</span><span class="s3">\n      </span><span class="s1">...options.attributes,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return context.with(spanContext.setValue(rootSpanIdKey, spanId), () =&gt;</span><span class="s3">\n      </span><span class="s1">this.getTracerInstance().startActiveSpan(</span><span class="s3">\n        </span><span class="s1">spanName,</span><span class="s3">\n        </span><span class="s1">options,</span><span class="s3">\n        </span><span class="s1">(span: Span) =&gt; {</span><span class="s3">\n          </span><span class="s1">const startTime =</span><span class="s3">\n            </span><span class="s1">'performance' in globalThis &amp;&amp; 'measure' in performance</span><span class="s3">\n              </span><span class="s1">? globalThis.performance.now()</span><span class="s3">\n              </span><span class="s1">: undefined</span><span class="s3">\n\n          </span><span class="s1">const onCleanup = () =&gt; {</span><span class="s3">\n            </span><span class="s1">rootSpanAttributesStore.delete(spanId)</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">startTime &amp;&amp;</span><span class="s3">\n              </span><span class="s1">process.env.NEXT_OTEL_PERFORMANCE_PREFIX &amp;&amp;</span><span class="s3">\n              </span><span class="s1">LogSpanAllowList.includes(type || ('' as any))</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">performance.measure(</span><span class="s3">\n                </span><span class="s1">`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(</span><span class="s3">\n                  </span><span class="s1">type.split('.').pop() || ''</span><span class="s3">\n                </span><span class="s1">).replace(</span><span class="s3">\n                  </span><span class="s1">/[A-Z]/g,</span><span class="s3">\n                  </span><span class="s1">(match: string) =&gt; '-' + match.toLowerCase()</span><span class="s3">\n                </span><span class="s1">)}`,</span><span class="s3">\n                </span><span class="s1">{</span><span class="s3">\n                  </span><span class="s1">start: startTime,</span><span class="s3">\n                  </span><span class="s1">end: performance.now(),</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (isRootSpan) {</span><span class="s3">\n            </span><span class="s1">rootSpanAttributesStore.set(</span><span class="s3">\n              </span><span class="s1">spanId,</span><span class="s3">\n              </span><span class="s1">new Map(</span><span class="s3">\n                </span><span class="s1">Object.entries(options.attributes ?? {}) as [</span><span class="s3">\n                  </span><span class="s1">AttributeNames,</span><span class="s3">\n                  </span><span class="s1">AttributeValue | undefined,</span><span class="s3">\n                </span><span class="s1">][]</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">if (fn.length &gt; 1) {</span><span class="s3">\n              </span><span class="s1">return fn(span, (err) =&gt; closeSpanWithError(span, err))</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const result = fn(span)</span><span class="s3">\n            </span><span class="s1">if (isThenable(result)) {</span><span class="s3">\n              </span><span class="s1">// If there's error make sure it throws</span><span class="s3">\n              </span><span class="s1">return result</span><span class="s3">\n                </span><span class="s1">.then((res) =&gt; {</span><span class="s3">\n                  </span><span class="s1">span.end()</span><span class="s3">\n                  </span><span class="s1">// Need to pass down the promise result,</span><span class="s3">\n                  </span><span class="s1">// it could be react stream response with error { error, stream }</span><span class="s3">\n                  </span><span class="s1">return res</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">.catch((err) =&gt; {</span><span class="s3">\n                  </span><span class="s1">closeSpanWithError(span, err)</span><span class="s3">\n                  </span><span class="s1">throw err</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">.finally(onCleanup)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">span.end()</span><span class="s3">\n              </span><span class="s1">onCleanup()</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">return result</span><span class="s3">\n          </span><span class="s1">} catch (err: any) {</span><span class="s3">\n            </span><span class="s1">closeSpanWithError(span, err)</span><span class="s3">\n            </span><span class="s1">onCleanup()</span><span class="s3">\n            </span><span class="s1">throw err</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(type: SpanTypes, fn: T): T</span><span class="s3">\n  </span><span class="s1">public wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">public wrap&lt;T = (...args: Array&lt;any&gt;) =&gt; any&gt;(</span><span class="s3">\n    </span><span class="s1">type: SpanTypes,</span><span class="s3">\n    </span><span class="s1">options: (...args: any[]) =&gt; TracerSpanOptions,</span><span class="s3">\n    </span><span class="s1">fn: T</span><span class="s3">\n  </span><span class="s1">): T</span><span class="s3">\n  </span><span class="s1">public wrap(...args: Array&lt;any&gt;) {</span><span class="s3">\n    </span><span class="s1">const tracer = this</span><span class="s3">\n    </span><span class="s1">const [name, options, fn] =</span><span class="s3">\n      </span><span class="s1">args.length === 3 ? args : [args[0], {}, args[1]]</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!NextVanillaSpanAllowlist.includes(name) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_OTEL_VERBOSE !== '1'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return fn</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return function (this: any) {</span><span class="s3">\n      </span><span class="s1">let optionsObj = options</span><span class="s3">\n      </span><span class="s1">if (typeof optionsObj === 'function' &amp;&amp; typeof fn === 'function') {</span><span class="s3">\n        </span><span class="s1">optionsObj = optionsObj.apply(this, arguments)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const lastArgId = arguments.length - 1</span><span class="s3">\n      </span><span class="s1">const cb = arguments[lastArgId]</span><span class="s3">\n\n      </span><span class="s1">if (typeof cb === 'function') {</span><span class="s3">\n        </span><span class="s1">const scopeBoundCb = tracer.getContext().bind(context.active(), cb)</span><span class="s3">\n        </span><span class="s1">return tracer.trace(name, optionsObj, (_span, done) =&gt; {</span><span class="s3">\n          </span><span class="s1">arguments[lastArgId] = function (err: any) {</span><span class="s3">\n            </span><span class="s1">done?.(err)</span><span class="s3">\n            </span><span class="s1">return scopeBoundCb.apply(this, arguments)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return fn.apply(this, arguments)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">return tracer.trace(name, optionsObj, () =&gt; fn.apply(this, arguments))</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public startSpan(type: SpanTypes): Span</span><span class="s3">\n  </span><span class="s1">public startSpan(type: SpanTypes, options: TracerSpanOptions): Span</span><span class="s3">\n  </span><span class="s1">public startSpan(...args: Array&lt;any&gt;): Span {</span><span class="s3">\n    </span><span class="s1">const [type, options]: [string, TracerSpanOptions | undefined] = args as any</span><span class="s3">\n\n    </span><span class="s1">const spanContext = this.getSpanContext(</span><span class="s3">\n      </span><span class="s1">options?.parentSpan ?? this.getActiveScopeSpan()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return this.getTracerInstance().startSpan(type, options, spanContext)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private getSpanContext(parentSpan?: Span) {</span><span class="s3">\n    </span><span class="s1">const spanContext = parentSpan</span><span class="s3">\n      </span><span class="s1">? trace.setSpan(context.active(), parentSpan)</span><span class="s3">\n      </span><span class="s1">: undefined</span><span class="s3">\n\n    </span><span class="s1">return spanContext</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getRootSpanAttributes() {</span><span class="s3">\n    </span><span class="s1">const spanId = context.active().getValue(rootSpanIdKey) as number</span><span class="s3">\n    </span><span class="s1">return rootSpanAttributesStore.get(spanId)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public setRootSpanAttribute(key: AttributeNames, value: AttributeValue) {</span><span class="s3">\n    </span><span class="s1">const spanId = context.active().getValue(rootSpanIdKey) as number</span><span class="s3">\n    </span><span class="s1">const attributes = rootSpanAttributesStore.get(spanId)</span><span class="s3">\n    </span><span class="s1">if (attributes) {</span><span class="s3">\n      </span><span class="s1">attributes.set(key, value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const getTracer = (() =&gt; {</span><span class="s3">\n  </span><span class="s1">const tracer = new NextTracerImpl()</span><span class="s3">\n\n  </span><span class="s1">return () =&gt; tracer</span><span class="s3">\n</span><span class="s1">})()</span><span class="s3">\n\n</span><span class="s1">export { getTracer, SpanStatusCode, SpanKind }</span><span class="s3">\n</span><span class="s1">export type { NextTracer, Span, SpanOptions, ContextAPI, TracerSpanOptions }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;LogSpanAllowList&quot;</span><span class="s0">,</span><span class="s1">&quot;NextVanillaSpanAllowlist&quot;</span><span class="s0">,</span><span class="s1">&quot;isThenable&quot;</span><span class="s0">,</span><span class="s1">&quot;api&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;propagation&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;SpanStatusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;SpanKind&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_CONTEXT&quot;</span><span class="s0">,</span><span class="s1">&quot;BubbledError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;bubble&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;isBubbledError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;closeSpanWithError&quot;</span><span class="s0">,</span><span class="s1">&quot;span&quot;</span><span class="s0">,</span><span class="s1">&quot;setAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;recordException&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;setStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;rootSpanAttributesStore&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;rootSpanIdKey&quot;</span><span class="s0">,</span><span class="s1">&quot;createContextKey&quot;</span><span class="s0">,</span><span class="s1">&quot;lastSpanId&quot;</span><span class="s0">,</span><span class="s1">&quot;getSpanId&quot;</span><span class="s0">,</span><span class="s1">&quot;clientTraceDataSetter&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;carrier&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;NextTracerImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracerInstance&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;getContext&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracePropagationData&quot;</span><span class="s0">,</span><span class="s1">&quot;activeContext&quot;</span><span class="s0">,</span><span class="s1">&quot;active&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;inject&quot;</span><span class="s0">,</span><span class="s1">&quot;getActiveScopeSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;withPropagatedContext&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;getter&quot;</span><span class="s0">,</span><span class="s1">&quot;getSpanContext&quot;</span><span class="s0">,</span><span class="s1">&quot;remoteContext&quot;</span><span class="s0">,</span><span class="s1">&quot;extract&quot;</span><span class="s0">,</span><span class="s1">&quot;with&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;fnOrOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;fnOrEmpty&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_OTEL_VERBOSE&quot;</span><span class="s0">,</span><span class="s1">&quot;hideSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;spanContext&quot;</span><span class="s0">,</span><span class="s1">&quot;parentSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;isRootSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;isRemote&quot;</span><span class="s0">,</span><span class="s1">&quot;spanId&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;setValue&quot;</span><span class="s0">,</span><span class="s1">&quot;startActiveSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;startTime&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;onCleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_OTEL_PERFORMANCE_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;measure&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;pop&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;finally&quot;</span><span class="s0">,</span><span class="s1">&quot;wrap&quot;</span><span class="s0">,</span><span class="s1">&quot;tracer&quot;</span><span class="s0">,</span><span class="s1">&quot;optionsObj&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;arguments&quot;</span><span class="s0">,</span><span class="s1">&quot;lastArgId&quot;</span><span class="s0">,</span><span class="s1">&quot;cb&quot;</span><span class="s0">,</span><span class="s1">&quot;scopeBoundCb&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;_span&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;startSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;setSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getRootSpanAttributes&quot;</span><span class="s0">,</span><span class="s1">&quot;getValue&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;setRootSpanAttribute&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">11621</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/deep-freeze.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { DeepReadonly } from './deep-readonly'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Recursively freezes an object and all of its properties. This prevents the</span><span class="s3">\n </span><span class="s1">* object from being modified at runtime. When the JS runtime is running in</span><span class="s3">\n </span><span class="s1">* strict mode, any attempts to modify a frozen object will throw an error.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze</span><span class="s3">\n </span><span class="s1">* @param obj The object to freeze.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function deepFreeze&lt;T extends object&gt;(obj: T): DeepReadonly&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">// If the object is already frozen, there's no need to freeze it again.</span><span class="s3">\n  </span><span class="s1">if (Object.isFrozen(obj)) return obj as DeepReadonly&lt;T&gt;</span><span class="s3">\n\n  </span><span class="s1">// An array is an object, but we also want to freeze each element in the array</span><span class="s3">\n  </span><span class="s1">// as well.</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(obj)) {</span><span class="s3">\n    </span><span class="s1">for (const item of obj) {</span><span class="s3">\n      </span><span class="s1">if (!item || typeof item !== 'object') continue</span><span class="s3">\n      </span><span class="s1">deepFreeze(item)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return Object.freeze(obj) as DeepReadonly&lt;T&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const value of Object.values(obj)) {</span><span class="s3">\n    </span><span class="s1">if (!value || typeof value !== 'object') continue</span><span class="s3">\n    </span><span class="s1">deepFreeze(value)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return Object.freeze(obj) as DeepReadonly&lt;T&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;deepFreeze&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;isFrozen&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;freeze&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAEA;;;;;;;CAOC,GACD;;;;AAAO,SAASA,WAA6BC,GAAM;IACjD,uEAAuE;IACvE,IAAIC,OAAOC,QAAQ,CAACF,MAAM,OAAOA;IAEjC,8EAA8E;IAC9E,WAAW;IACX,IAAIG,MAAMC,OAAO,CAACJ,MAAM;QACtB,KAAK,MAAMK,QAAQL,IAAK;YACtB,IAAI,CAACK,QAAQ,OAAOA,SAAS,UAAU;YACvCN,WAAWM;QACb;QAEA,OAAOJ,OAAOK,MAAM,CAACN;IACvB;IAEA,KAAK,MAAMO,SAASN,OAAOO,MAAM,CAACR,KAAM;QACtC,IAAI,CAACO,SAAS,OAAOA,UAAU,UAAU;QACzCR,WAAWQ;IACb;IAEA,OAAON,OAAOK,MAAM,CAACN;AACvB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">11654</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/clone-metadata.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvedViewport,</span><span class="s3">\n</span><span class="s1">} from './types/metadata-interface'</span><span class="s3">\n\n</span><span class="s1">const TYPE_URL = '__METADATA_URL'</span><span class="s3">\n\n</span><span class="s1">function replacer(_key: string, val: any) {</span><span class="s3">\n  </span><span class="s1">// clone URL as string but recover it as URL</span><span class="s3">\n  </span><span class="s1">if (val instanceof URL) {</span><span class="s3">\n    </span><span class="s1">return { _type: TYPE_URL, value: val.href }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return val</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function reviver(_key: string, val: any) {</span><span class="s3">\n  </span><span class="s1">if (typeof val === 'object' &amp;&amp; val !== null &amp;&amp; val._type === TYPE_URL) {</span><span class="s3">\n    </span><span class="s1">return new URL(val.value)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return val</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function cloneMetadata&lt;T extends ResolvedMetadata | ResolvedViewport&gt;(</span><span class="s3">\n  </span><span class="s1">metadata: T</span><span class="s3">\n</span><span class="s1">): T {</span><span class="s3">\n  </span><span class="s1">const jsonString = JSON.stringify(metadata, replacer)</span><span class="s3">\n  </span><span class="s1">return JSON.parse(jsonString, reviver)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;TYPE_URL&quot;</span><span class="s0">,</span><span class="s1">&quot;replacer&quot;</span><span class="s0">,</span><span class="s1">&quot;_key&quot;</span><span class="s0">,</span><span class="s1">&quot;val&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;_type&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;reviver&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;jsonString&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAKA,MAAMA,WAAW;AAEjB,SAASC,SAASC,IAAY,EAAEC,GAAQ;IACtC,4CAA4C;IAC5C,IAAIA,eAAeC,KAAK;QACtB,OAAO;YAAEC,OAAOL;YAAUM,OAAOH,IAAII,IAAI;QAAC;IAC5C;IACA,OAAOJ;AACT;AAEA,SAASK,QAAQN,IAAY,EAAEC,GAAQ;IACrC,IAAI,OAAOA,QAAQ,YAAYA,QAAQ,QAAQA,IAAIE,KAAK,KAAKL,UAAU;QACrE,OAAO,IAAII,IAAID,IAAIG,KAAK;IAC1B;IACA,OAAOH;AACT;AAEO,SAASM,cACdC,QAAW;IAEX,MAAMC,aAAaC,KAAKC,SAAS,CAACH,UAAUT;IAC5C,OAAOW,KAAKE,KAAK,CAACH,YAAYH;AAChC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">11683</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/resolve-metadata.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">Metadata,</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvedViewport,</span><span class="s3">\n  </span><span class="s1">ResolvingMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvingViewport,</span><span class="s3">\n  </span><span class="s1">Viewport,</span><span class="s3">\n</span><span class="s1">} from './types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import type { MetadataImageModule } from '../../build/webpack/loaders/metadata/types'</span><span class="s3">\n</span><span class="s1">import type { GetDynamicParamFromSegment } from '../../server/app-render/app-render'</span><span class="s3">\n</span><span class="s1">import type { Twitter } from './types/twitter-types'</span><span class="s3">\n</span><span class="s1">import type { OpenGraph } from './types/opengraph-types'</span><span class="s3">\n</span><span class="s1">import type { AppDirModules } from '../../build/webpack/loaders/next-app-loader'</span><span class="s3">\n</span><span class="s1">import type { MetadataContext } from './types/resolvers'</span><span class="s3">\n</span><span class="s1">import type { LoaderTree } from '../../server/lib/app-dir-module'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">AbsoluteTemplateString,</span><span class="s3">\n  </span><span class="s1">IconDescriptor,</span><span class="s3">\n  </span><span class="s1">ResolvedIcons,</span><span class="s3">\n</span><span class="s1">} from './types/metadata-types'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { StaticMetadata } from './types/icons'</span><span class="s3">\n</span><span class="s1">import type { WorkStore } from '../../server/app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import type { Params } from '../../server/request/params'</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">import 'server-only'</span><span class="s3">\n\n</span><span class="s1">import { cache } from 'react'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">createDefaultMetadata,</span><span class="s3">\n  </span><span class="s1">createDefaultViewport,</span><span class="s3">\n</span><span class="s1">} from './default-metadata'</span><span class="s3">\n</span><span class="s1">import { resolveOpenGraph, resolveTwitter } from './resolvers/resolve-opengraph'</span><span class="s3">\n</span><span class="s1">import { resolveTitle } from './resolvers/resolve-title'</span><span class="s3">\n</span><span class="s1">import { resolveAsArrayOrUndefined } from './generate/utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getComponentTypeModule,</span><span class="s3">\n  </span><span class="s1">getLayoutOrPageModule,</span><span class="s3">\n</span><span class="s1">} from '../../server/lib/app-dir-module'</span><span class="s3">\n</span><span class="s1">import { interopDefault } from '../interop-default'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">resolveAlternates,</span><span class="s3">\n  </span><span class="s1">resolveAppleWebApp,</span><span class="s3">\n  </span><span class="s1">resolveAppLinks,</span><span class="s3">\n  </span><span class="s1">resolveRobots,</span><span class="s3">\n  </span><span class="s1">resolveThemeColor,</span><span class="s3">\n  </span><span class="s1">resolveVerification,</span><span class="s3">\n  </span><span class="s1">resolveItunes,</span><span class="s3">\n  </span><span class="s1">resolveFacebook,</span><span class="s3">\n  </span><span class="s1">resolvePagination,</span><span class="s3">\n</span><span class="s1">} from './resolvers/resolve-basics'</span><span class="s3">\n</span><span class="s1">import { resolveIcons } from './resolvers/resolve-icons'</span><span class="s3">\n</span><span class="s1">import { getTracer } from '../../server/lib/trace/tracer'</span><span class="s3">\n</span><span class="s1">import { ResolveMetadataSpan } from '../../server/lib/trace/constants'</span><span class="s3">\n</span><span class="s1">import { PAGE_SEGMENT_KEY } from '../../shared/lib/segment'</span><span class="s3">\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import { createServerParamsForMetadata } from '../../server/request/params'</span><span class="s3">\n\n</span><span class="s1">type StaticIcons = Pick&lt;ResolvedIcons, 'icon' | 'apple'&gt;</span><span class="s3">\n\n</span><span class="s1">type MetadataResolver = (</span><span class="s3">\n  </span><span class="s1">parent: ResolvingMetadata</span><span class="s3">\n</span><span class="s1">) =&gt; Metadata | Promise&lt;Metadata&gt;</span><span class="s3">\n</span><span class="s1">type ViewportResolver = (</span><span class="s3">\n  </span><span class="s1">parent: ResolvingViewport</span><span class="s3">\n</span><span class="s1">) =&gt; Viewport | Promise&lt;Viewport&gt;</span><span class="s3">\n\n</span><span class="s1">export type MetadataErrorType = 'not-found' | 'forbidden' | 'unauthorized'</span><span class="s3">\n\n</span><span class="s1">export type MetadataItems = Array&lt;</span><span class="s3">\n  </span><span class="s1">[Metadata | MetadataResolver | null, StaticMetadata]</span><span class="s3">\n</span><span class="s1">&gt;</span><span class="s3">\n\n</span><span class="s1">export type ViewportItems = Array&lt;Viewport | ViewportResolver | null&gt;</span><span class="s3">\n\n</span><span class="s1">type TitleTemplates = {</span><span class="s3">\n  </span><span class="s1">title: string | null</span><span class="s3">\n  </span><span class="s1">twitter: string | null</span><span class="s3">\n  </span><span class="s1">openGraph: string | null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type BuildState = {</span><span class="s3">\n  </span><span class="s1">warnings: Set&lt;string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type LayoutProps = {</span><span class="s3">\n  </span><span class="s1">params: { [key: string]: any }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">type PageProps = {</span><span class="s3">\n  </span><span class="s1">params: { [key: string]: any }</span><span class="s3">\n  </span><span class="s1">searchParams: { [key: string]: any }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isFavicon(icon: IconDescriptor | undefined): boolean {</span><span class="s3">\n  </span><span class="s1">if (!icon) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// turbopack appends a hash to all images</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">(icon.url === '/favicon.ico' ||</span><span class="s3">\n      </span><span class="s1">icon.url.toString().startsWith('/favicon.ico?')) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">icon.type === 'image/x-icon'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function mergeStaticMetadata(</span><span class="s3">\n  </span><span class="s1">source: Metadata | null,</span><span class="s3">\n  </span><span class="s1">target: ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">staticFilesMetadata: StaticMetadata,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext,</span><span class="s3">\n  </span><span class="s1">titleTemplates: TitleTemplates,</span><span class="s3">\n  </span><span class="s1">leafSegmentStaticIcons: StaticIcons,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedMetadata&gt; {</span><span class="s3">\n  </span><span class="s1">if (!staticFilesMetadata) return target</span><span class="s3">\n  </span><span class="s1">const { icon, apple, openGraph, twitter, manifest } = staticFilesMetadata</span><span class="s3">\n\n  </span><span class="s1">// Keep updating the static icons in the most leaf node</span><span class="s3">\n\n  </span><span class="s1">if (icon) {</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons.icon = icon</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (apple) {</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons.apple = apple</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// file based metadata is specified and current level metadata twitter.images is not specified</span><span class="s3">\n  </span><span class="s1">if (twitter &amp;&amp; !source?.twitter?.hasOwnProperty('images')) {</span><span class="s3">\n    </span><span class="s1">const resolvedTwitter = resolveTwitter(</span><span class="s3">\n      </span><span class="s1">{ ...target.twitter, images: twitter } as Twitter,</span><span class="s3">\n      </span><span class="s1">target.metadataBase,</span><span class="s3">\n      </span><span class="s1">{ ...metadataContext, isStaticMetadataRouteFile: true },</span><span class="s3">\n      </span><span class="s1">titleTemplates.twitter</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">target.twitter = resolvedTwitter</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// file based metadata is specified and current level metadata openGraph.images is not specified</span><span class="s3">\n  </span><span class="s1">if (openGraph &amp;&amp; !source?.openGraph?.hasOwnProperty('images')) {</span><span class="s3">\n    </span><span class="s1">const resolvedOpenGraph = await resolveOpenGraph(</span><span class="s3">\n      </span><span class="s1">{ ...target.openGraph, images: openGraph } as OpenGraph,</span><span class="s3">\n      </span><span class="s1">target.metadataBase,</span><span class="s3">\n      </span><span class="s1">pathname,</span><span class="s3">\n      </span><span class="s1">{ ...metadataContext, isStaticMetadataRouteFile: true },</span><span class="s3">\n      </span><span class="s1">titleTemplates.openGraph</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">target.openGraph = resolvedOpenGraph</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (manifest) {</span><span class="s3">\n    </span><span class="s1">target.manifest = manifest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return target</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Merge the source metadata into the resolved target metadata.</span><span class="s3">\n</span><span class="s1">async function mergeMetadata(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">source,</span><span class="s3">\n    </span><span class="s1">target,</span><span class="s3">\n    </span><span class="s1">staticFilesMetadata,</span><span class="s3">\n    </span><span class="s1">titleTemplates,</span><span class="s3">\n    </span><span class="s1">metadataContext,</span><span class="s3">\n    </span><span class="s1">buildState,</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">source: Metadata | null</span><span class="s3">\n    </span><span class="s1">target: ResolvedMetadata</span><span class="s3">\n    </span><span class="s1">staticFilesMetadata: StaticMetadata</span><span class="s3">\n    </span><span class="s1">titleTemplates: TitleTemplates</span><span class="s3">\n    </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n    </span><span class="s1">buildState: BuildState</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons: StaticIcons</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedMetadata&gt; {</span><span class="s3">\n  </span><span class="s1">// If there's override metadata, prefer it otherwise fallback to the default metadata.</span><span class="s3">\n  </span><span class="s1">const metadataBase =</span><span class="s3">\n    </span><span class="s1">typeof source?.metadataBase !== 'undefined'</span><span class="s3">\n      </span><span class="s1">? source.metadataBase</span><span class="s3">\n      </span><span class="s1">: target.metadataBase</span><span class="s3">\n  </span><span class="s1">for (const key_ in source) {</span><span class="s3">\n    </span><span class="s1">const key = key_ as keyof Metadata</span><span class="s3">\n\n    </span><span class="s1">switch (key) {</span><span class="s3">\n      </span><span class="s1">case 'title': {</span><span class="s3">\n        </span><span class="s1">target.title = resolveTitle(source.title, titleTemplates.title)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'alternates': {</span><span class="s3">\n        </span><span class="s1">target.alternates = await resolveAlternates(</span><span class="s3">\n          </span><span class="s1">source.alternates,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">pathname,</span><span class="s3">\n          </span><span class="s1">metadataContext</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'openGraph': {</span><span class="s3">\n        </span><span class="s1">target.openGraph = await resolveOpenGraph(</span><span class="s3">\n          </span><span class="s1">source.openGraph,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">pathname,</span><span class="s3">\n          </span><span class="s1">metadataContext,</span><span class="s3">\n          </span><span class="s1">titleTemplates.openGraph</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'twitter': {</span><span class="s3">\n        </span><span class="s1">target.twitter = resolveTwitter(</span><span class="s3">\n          </span><span class="s1">source.twitter,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">metadataContext,</span><span class="s3">\n          </span><span class="s1">titleTemplates.twitter</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'facebook':</span><span class="s3">\n        </span><span class="s1">target.facebook = resolveFacebook(source.facebook)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'verification':</span><span class="s3">\n        </span><span class="s1">target.verification = resolveVerification(source.verification)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">case 'icons': {</span><span class="s3">\n        </span><span class="s1">target.icons = resolveIcons(source.icons)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'appleWebApp':</span><span class="s3">\n        </span><span class="s1">target.appleWebApp = resolveAppleWebApp(source.appleWebApp)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'appLinks':</span><span class="s3">\n        </span><span class="s1">target.appLinks = resolveAppLinks(source.appLinks)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'robots': {</span><span class="s3">\n        </span><span class="s1">target.robots = resolveRobots(source.robots)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'archives':</span><span class="s3">\n      </span><span class="s1">case 'assets':</span><span class="s3">\n      </span><span class="s1">case 'bookmarks':</span><span class="s3">\n      </span><span class="s1">case 'keywords': {</span><span class="s3">\n        </span><span class="s1">target[key] = resolveAsArrayOrUndefined(source[key])</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'authors': {</span><span class="s3">\n        </span><span class="s1">target[key] = resolveAsArrayOrUndefined(source.authors)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'itunes': {</span><span class="s3">\n        </span><span class="s1">target[key] = await resolveItunes(</span><span class="s3">\n          </span><span class="s1">source.itunes,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">pathname,</span><span class="s3">\n          </span><span class="s1">metadataContext</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'pagination': {</span><span class="s3">\n        </span><span class="s1">target.pagination = await resolvePagination(</span><span class="s3">\n          </span><span class="s1">source.pagination,</span><span class="s3">\n          </span><span class="s1">metadataBase,</span><span class="s3">\n          </span><span class="s1">pathname,</span><span class="s3">\n          </span><span class="s1">metadataContext</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">// directly assign fields that fallback to null</span><span class="s3">\n      </span><span class="s1">case 'abstract':</span><span class="s3">\n      </span><span class="s1">case 'applicationName':</span><span class="s3">\n      </span><span class="s1">case 'description':</span><span class="s3">\n      </span><span class="s1">case 'generator':</span><span class="s3">\n      </span><span class="s1">case 'creator':</span><span class="s3">\n      </span><span class="s1">case 'publisher':</span><span class="s3">\n      </span><span class="s1">case 'category':</span><span class="s3">\n      </span><span class="s1">case 'classification':</span><span class="s3">\n      </span><span class="s1">case 'referrer':</span><span class="s3">\n      </span><span class="s1">case 'formatDetection':</span><span class="s3">\n      </span><span class="s1">case 'manifest':</span><span class="s3">\n      </span><span class="s1">case 'pinterest':</span><span class="s3">\n        </span><span class="s1">// @ts-ignore TODO: support inferring</span><span class="s3">\n        </span><span class="s1">target[key] = source[key] || null</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'other':</span><span class="s3">\n        </span><span class="s1">target.other = Object.assign({}, target.other, source.other)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'metadataBase':</span><span class="s3">\n        </span><span class="s1">target.metadataBase = metadataBase</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n\n      </span><span class="s1">case 'apple-touch-fullscreen': {</span><span class="s3">\n        </span><span class="s1">buildState.warnings.add(</span><span class="s3">\n          </span><span class="s1">`Use appleWebApp instead</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/app/api-reference/functions/generate-metadata`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'apple-touch-icon-precomposed': {</span><span class="s3">\n        </span><span class="s1">buildState.warnings.add(</span><span class="s3">\n          </span><span class="s1">`Use icons.apple instead</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/app/api-reference/functions/generate-metadata`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'themeColor':</span><span class="s3">\n      </span><span class="s1">case 'colorScheme':</span><span class="s3">\n      </span><span class="s1">case 'viewport':</span><span class="s3">\n        </span><span class="s1">if (source[key] != null) {</span><span class="s3">\n          </span><span class="s1">buildState.warnings.add(</span><span class="s3">\n            </span><span class="s1">`Unsupported metadata ${key} is configured in metadata export in ${route}. Please move it to viewport export instead.</span><span class="s3">\\</span><span class="s1">nRead more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport`</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default: {</span><span class="s3">\n        </span><span class="s1">key satisfies never</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return mergeStaticMetadata(</span><span class="s3">\n    </span><span class="s1">source,</span><span class="s3">\n    </span><span class="s1">target,</span><span class="s3">\n    </span><span class="s1">staticFilesMetadata,</span><span class="s3">\n    </span><span class="s1">metadataContext,</span><span class="s3">\n    </span><span class="s1">titleTemplates,</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons,</span><span class="s3">\n    </span><span class="s1">pathname</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function mergeViewport({</span><span class="s3">\n  </span><span class="s1">target,</span><span class="s3">\n  </span><span class="s1">source,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">target: ResolvedViewport</span><span class="s3">\n  </span><span class="s1">source: Viewport | null</span><span class="s3">\n</span><span class="s1">}): void {</span><span class="s3">\n  </span><span class="s1">if (!source) return</span><span class="s3">\n  </span><span class="s1">for (const key_ in source) {</span><span class="s3">\n    </span><span class="s1">const key = key_ as keyof Viewport</span><span class="s3">\n\n    </span><span class="s1">switch (key) {</span><span class="s3">\n      </span><span class="s1">case 'themeColor': {</span><span class="s3">\n        </span><span class="s1">target.themeColor = resolveThemeColor(source.themeColor)</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'colorScheme':</span><span class="s3">\n        </span><span class="s1">target.colorScheme = source.colorScheme || null</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">case 'width':</span><span class="s3">\n      </span><span class="s1">case 'height':</span><span class="s3">\n      </span><span class="s1">case 'initialScale':</span><span class="s3">\n      </span><span class="s1">case 'minimumScale':</span><span class="s3">\n      </span><span class="s1">case 'maximumScale':</span><span class="s3">\n      </span><span class="s1">case 'userScalable':</span><span class="s3">\n      </span><span class="s1">case 'viewportFit':</span><span class="s3">\n      </span><span class="s1">case 'interactiveWidget':</span><span class="s3">\n        </span><span class="s1">// always override the target with the source</span><span class="s3">\n        </span><span class="s1">// @ts-ignore viewport properties</span><span class="s3">\n        </span><span class="s1">target[key] = source[key]</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">key satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getDefinedViewport(</span><span class="s3">\n  </span><span class="s1">mod: any,</span><span class="s3">\n  </span><span class="s1">props: any,</span><span class="s3">\n  </span><span class="s1">tracingProps: { route: string }</span><span class="s3">\n</span><span class="s1">): Viewport | ViewportResolver | null {</span><span class="s3">\n  </span><span class="s1">if (typeof mod.generateViewport === 'function') {</span><span class="s3">\n    </span><span class="s1">const { route } = tracingProps</span><span class="s3">\n    </span><span class="s1">return (parent: ResolvingViewport) =&gt;</span><span class="s3">\n      </span><span class="s1">getTracer().trace(</span><span class="s3">\n        </span><span class="s1">ResolveMetadataSpan.generateViewport,</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">spanName: `generateViewport ${route}`,</span><span class="s3">\n          </span><span class="s1">attributes: {</span><span class="s3">\n            </span><span class="s1">'next.page': route,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">() =&gt; mod.generateViewport(props, parent)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return mod.viewport || null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getDefinedMetadata(</span><span class="s3">\n  </span><span class="s1">mod: any,</span><span class="s3">\n  </span><span class="s1">props: any,</span><span class="s3">\n  </span><span class="s1">tracingProps: { route: string }</span><span class="s3">\n</span><span class="s1">): Metadata | MetadataResolver | null {</span><span class="s3">\n  </span><span class="s1">if (typeof mod.generateMetadata === 'function') {</span><span class="s3">\n    </span><span class="s1">const { route } = tracingProps</span><span class="s3">\n    </span><span class="s1">return (parent: ResolvingMetadata) =&gt;</span><span class="s3">\n      </span><span class="s1">getTracer().trace(</span><span class="s3">\n        </span><span class="s1">ResolveMetadataSpan.generateMetadata,</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">spanName: `generateMetadata ${route}`,</span><span class="s3">\n          </span><span class="s1">attributes: {</span><span class="s3">\n            </span><span class="s1">'next.page': route,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">() =&gt; mod.generateMetadata(props, parent)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return mod.metadata || null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function collectStaticImagesFiles(</span><span class="s3">\n  </span><span class="s1">metadata: AppDirModules['metadata'],</span><span class="s3">\n  </span><span class="s1">props: any,</span><span class="s3">\n  </span><span class="s1">type: keyof NonNullable&lt;AppDirModules['metadata']&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (!metadata?.[type]) return undefined</span><span class="s3">\n\n  </span><span class="s1">const iconPromises = metadata[type as 'icon' | 'apple'].map(</span><span class="s3">\n    </span><span class="s1">async (imageModule: (p: any) =&gt; Promise&lt;MetadataImageModule[]&gt;) =&gt;</span><span class="s3">\n      </span><span class="s1">interopDefault(await imageModule(props))</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return iconPromises?.length &gt; 0</span><span class="s3">\n    </span><span class="s1">? (await Promise.all(iconPromises))?.flat()</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function resolveStaticMetadata(</span><span class="s3">\n  </span><span class="s1">modules: AppDirModules,</span><span class="s3">\n  </span><span class="s1">props: any</span><span class="s3">\n</span><span class="s1">): Promise&lt;StaticMetadata&gt; {</span><span class="s3">\n  </span><span class="s1">const { metadata } = modules</span><span class="s3">\n  </span><span class="s1">if (!metadata) return null</span><span class="s3">\n\n  </span><span class="s1">const [icon, apple, openGraph, twitter] = await Promise.all([</span><span class="s3">\n    </span><span class="s1">collectStaticImagesFiles(metadata, props, 'icon'),</span><span class="s3">\n    </span><span class="s1">collectStaticImagesFiles(metadata, props, 'apple'),</span><span class="s3">\n    </span><span class="s1">collectStaticImagesFiles(metadata, props, 'openGraph'),</span><span class="s3">\n    </span><span class="s1">collectStaticImagesFiles(metadata, props, 'twitter'),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n\n  </span><span class="s1">const staticMetadata = {</span><span class="s3">\n    </span><span class="s1">icon,</span><span class="s3">\n    </span><span class="s1">apple,</span><span class="s3">\n    </span><span class="s1">openGraph,</span><span class="s3">\n    </span><span class="s1">twitter,</span><span class="s3">\n    </span><span class="s1">manifest: metadata.manifest,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return staticMetadata</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// [layout.metadata, static files metadata] -&gt; ... -&gt; [page.metadata, static files metadata]</span><span class="s3">\n</span><span class="s1">async function collectMetadata({</span><span class="s3">\n  </span><span class="s1">tree,</span><span class="s3">\n  </span><span class="s1">metadataItems,</span><span class="s3">\n  </span><span class="s1">errorMetadataItem,</span><span class="s3">\n  </span><span class="s1">props,</span><span class="s3">\n  </span><span class="s1">route,</span><span class="s3">\n  </span><span class="s1">errorConvention,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree</span><span class="s3">\n  </span><span class="s1">metadataItems: MetadataItems</span><span class="s3">\n  </span><span class="s1">errorMetadataItem: MetadataItems[number]</span><span class="s3">\n  </span><span class="s1">props: any</span><span class="s3">\n  </span><span class="s1">route: string</span><span class="s3">\n  </span><span class="s1">errorConvention?: MetadataErrorType</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">let mod</span><span class="s3">\n  </span><span class="s1">let modType</span><span class="s3">\n  </span><span class="s1">const hasErrorConventionComponent = Boolean(</span><span class="s3">\n    </span><span class="s1">errorConvention &amp;&amp; tree[2][errorConvention]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">if (errorConvention) {</span><span class="s3">\n    </span><span class="s1">mod = await getComponentTypeModule(tree, 'layout')</span><span class="s3">\n    </span><span class="s1">modType = errorConvention</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const { mod: layoutOrPageMod, modType: layoutOrPageModType } =</span><span class="s3">\n      </span><span class="s1">await getLayoutOrPageModule(tree)</span><span class="s3">\n    </span><span class="s1">mod = layoutOrPageMod</span><span class="s3">\n    </span><span class="s1">modType = layoutOrPageModType</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (modType) {</span><span class="s3">\n    </span><span class="s1">route += `/${modType}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const staticFilesMetadata = await resolveStaticMetadata(tree[2], props)</span><span class="s3">\n  </span><span class="s1">const metadataExport = mod ? getDefinedMetadata(mod, props, { route }) : null</span><span class="s3">\n\n  </span><span class="s1">metadataItems.push([metadataExport, staticFilesMetadata])</span><span class="s3">\n\n  </span><span class="s1">if (hasErrorConventionComponent &amp;&amp; errorConvention) {</span><span class="s3">\n    </span><span class="s1">const errorMod = await getComponentTypeModule(tree, errorConvention)</span><span class="s3">\n    </span><span class="s1">const errorMetadataExport = errorMod</span><span class="s3">\n      </span><span class="s1">? getDefinedMetadata(errorMod, props, { route })</span><span class="s3">\n      </span><span class="s1">: null</span><span class="s3">\n\n    </span><span class="s1">errorMetadataItem[0] = errorMetadataExport</span><span class="s3">\n    </span><span class="s1">errorMetadataItem[1] = staticFilesMetadata</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// [layout.metadata, static files metadata] -&gt; ... -&gt; [page.metadata, static files metadata]</span><span class="s3">\n</span><span class="s1">async function collectViewport({</span><span class="s3">\n  </span><span class="s1">tree,</span><span class="s3">\n  </span><span class="s1">viewportItems,</span><span class="s3">\n  </span><span class="s1">errorViewportItemRef,</span><span class="s3">\n  </span><span class="s1">props,</span><span class="s3">\n  </span><span class="s1">route,</span><span class="s3">\n  </span><span class="s1">errorConvention,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree</span><span class="s3">\n  </span><span class="s1">viewportItems: ViewportItems</span><span class="s3">\n  </span><span class="s1">errorViewportItemRef: ErrorViewportItemRef</span><span class="s3">\n  </span><span class="s1">props: any</span><span class="s3">\n  </span><span class="s1">route: string</span><span class="s3">\n  </span><span class="s1">errorConvention?: MetadataErrorType</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">let mod</span><span class="s3">\n  </span><span class="s1">let modType</span><span class="s3">\n  </span><span class="s1">const hasErrorConventionComponent = Boolean(</span><span class="s3">\n    </span><span class="s1">errorConvention &amp;&amp; tree[2][errorConvention]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">if (errorConvention) {</span><span class="s3">\n    </span><span class="s1">mod = await getComponentTypeModule(tree, 'layout')</span><span class="s3">\n    </span><span class="s1">modType = errorConvention</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const { mod: layoutOrPageMod, modType: layoutOrPageModType } =</span><span class="s3">\n      </span><span class="s1">await getLayoutOrPageModule(tree)</span><span class="s3">\n    </span><span class="s1">mod = layoutOrPageMod</span><span class="s3">\n    </span><span class="s1">modType = layoutOrPageModType</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (modType) {</span><span class="s3">\n    </span><span class="s1">route += `/${modType}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const viewportExport = mod ? getDefinedViewport(mod, props, { route }) : null</span><span class="s3">\n\n  </span><span class="s1">viewportItems.push(viewportExport)</span><span class="s3">\n\n  </span><span class="s1">if (hasErrorConventionComponent &amp;&amp; errorConvention) {</span><span class="s3">\n    </span><span class="s1">const errorMod = await getComponentTypeModule(tree, errorConvention)</span><span class="s3">\n    </span><span class="s1">const errorViewportExport = errorMod</span><span class="s3">\n      </span><span class="s1">? getDefinedViewport(errorMod, props, { route })</span><span class="s3">\n      </span><span class="s1">: null</span><span class="s3">\n\n    </span><span class="s1">errorViewportItemRef.current = errorViewportExport</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const resolveMetadataItems = cache(async function (</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const parentParams = {}</span><span class="s3">\n  </span><span class="s1">const metadataItems: MetadataItems = []</span><span class="s3">\n  </span><span class="s1">const errorMetadataItem: MetadataItems[number] = [null, null]</span><span class="s3">\n  </span><span class="s1">const treePrefix = undefined</span><span class="s3">\n  </span><span class="s1">return resolveMetadataItemsImpl(</span><span class="s3">\n    </span><span class="s1">metadataItems,</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">treePrefix,</span><span class="s3">\n    </span><span class="s1">parentParams,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">errorMetadataItem,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">async function resolveMetadataItemsImpl(</span><span class="s3">\n  </span><span class="s1">metadataItems: MetadataItems,</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">/** Provided tree can be nested subtree, this argument says what is the path of such subtree */</span><span class="s3">\n  </span><span class="s1">treePrefix: undefined | string[],</span><span class="s3">\n  </span><span class="s1">parentParams: Params,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">errorMetadataItem: MetadataItems[number],</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;MetadataItems&gt; {</span><span class="s3">\n  </span><span class="s1">const [segment, parallelRoutes, { page }] = tree</span><span class="s3">\n  </span><span class="s1">const currentTreePrefix =</span><span class="s3">\n    </span><span class="s1">treePrefix &amp;&amp; treePrefix.length ? [...treePrefix, segment] : [segment]</span><span class="s3">\n  </span><span class="s1">const isPage = typeof page !== 'undefined'</span><span class="s3">\n\n  </span><span class="s1">// Handle dynamic segment params.</span><span class="s3">\n  </span><span class="s1">const segmentParam = getDynamicParamFromSegment(segment)</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Create object holding the parent params and current params</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">let currentParams = parentParams</span><span class="s3">\n  </span><span class="s1">if (segmentParam &amp;&amp; segmentParam.value !== null) {</span><span class="s3">\n    </span><span class="s1">currentParams = {</span><span class="s3">\n      </span><span class="s1">...parentParams,</span><span class="s3">\n      </span><span class="s1">[segmentParam.param]: segmentParam.value,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const params = createServerParamsForMetadata(currentParams, workStore)</span><span class="s3">\n\n  </span><span class="s1">let layerProps: LayoutProps | PageProps</span><span class="s3">\n  </span><span class="s1">if (isPage) {</span><span class="s3">\n    </span><span class="s1">layerProps = {</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">layerProps = {</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">await collectMetadata({</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">metadataItems,</span><span class="s3">\n    </span><span class="s1">errorMetadataItem,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">props: layerProps,</span><span class="s3">\n    </span><span class="s1">route: currentTreePrefix</span><span class="s3">\n      </span><span class="s1">// __PAGE__ shouldn't be shown in a route</span><span class="s3">\n      </span><span class="s1">.filter((s) =&gt; s !== PAGE_SEGMENT_KEY)</span><span class="s3">\n      </span><span class="s1">.join('/'),</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">for (const key in parallelRoutes) {</span><span class="s3">\n    </span><span class="s1">const childTree = parallelRoutes[key]</span><span class="s3">\n    </span><span class="s1">await resolveMetadataItemsImpl(</span><span class="s3">\n      </span><span class="s1">metadataItems,</span><span class="s3">\n      </span><span class="s1">childTree,</span><span class="s3">\n      </span><span class="s1">currentTreePrefix,</span><span class="s3">\n      </span><span class="s1">currentParams,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n      </span><span class="s1">errorConvention,</span><span class="s3">\n      </span><span class="s1">errorMetadataItem,</span><span class="s3">\n      </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n      </span><span class="s1">workStore</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (Object.keys(parallelRoutes).length === 0 &amp;&amp; errorConvention) {</span><span class="s3">\n    </span><span class="s1">// If there are no parallel routes, place error metadata as the last item.</span><span class="s3">\n    </span><span class="s1">// e.g. layout -&gt; layout -&gt; not-found</span><span class="s3">\n    </span><span class="s1">metadataItems.push(errorMetadataItem)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return metadataItems</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ErrorViewportItemRef = { current: ViewportItems[number] }</span><span class="s3">\n</span><span class="s1">const resolveViewportItems = cache(async function (</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const parentParams = {}</span><span class="s3">\n  </span><span class="s1">const viewportItems: ViewportItems = []</span><span class="s3">\n  </span><span class="s1">const errorViewportItemRef: ErrorViewportItemRef = {</span><span class="s3">\n    </span><span class="s1">current: null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const treePrefix = undefined</span><span class="s3">\n  </span><span class="s1">return resolveViewportItemsImpl(</span><span class="s3">\n    </span><span class="s1">viewportItems,</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">treePrefix,</span><span class="s3">\n    </span><span class="s1">parentParams,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">errorViewportItemRef,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">async function resolveViewportItemsImpl(</span><span class="s3">\n  </span><span class="s1">viewportItems: ViewportItems,</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">/** Provided tree can be nested subtree, this argument says what is the path of such subtree */</span><span class="s3">\n  </span><span class="s1">treePrefix: undefined | string[],</span><span class="s3">\n  </span><span class="s1">parentParams: Params,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">errorViewportItemRef: ErrorViewportItemRef,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;ViewportItems&gt; {</span><span class="s3">\n  </span><span class="s1">const [segment, parallelRoutes, { page }] = tree</span><span class="s3">\n  </span><span class="s1">const currentTreePrefix =</span><span class="s3">\n    </span><span class="s1">treePrefix &amp;&amp; treePrefix.length ? [...treePrefix, segment] : [segment]</span><span class="s3">\n  </span><span class="s1">const isPage = typeof page !== 'undefined'</span><span class="s3">\n\n  </span><span class="s1">// Handle dynamic segment params.</span><span class="s3">\n  </span><span class="s1">const segmentParam = getDynamicParamFromSegment(segment)</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Create object holding the parent params and current params</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">let currentParams = parentParams</span><span class="s3">\n  </span><span class="s1">if (segmentParam &amp;&amp; segmentParam.value !== null) {</span><span class="s3">\n    </span><span class="s1">currentParams = {</span><span class="s3">\n      </span><span class="s1">...parentParams,</span><span class="s3">\n      </span><span class="s1">[segmentParam.param]: segmentParam.value,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const params = createServerParamsForMetadata(currentParams, workStore)</span><span class="s3">\n\n  </span><span class="s1">let layerProps: LayoutProps | PageProps</span><span class="s3">\n  </span><span class="s1">if (isPage) {</span><span class="s3">\n    </span><span class="s1">layerProps = {</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">layerProps = {</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">await collectViewport({</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">viewportItems,</span><span class="s3">\n    </span><span class="s1">errorViewportItemRef,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">props: layerProps,</span><span class="s3">\n    </span><span class="s1">route: currentTreePrefix</span><span class="s3">\n      </span><span class="s1">// __PAGE__ shouldn't be shown in a route</span><span class="s3">\n      </span><span class="s1">.filter((s) =&gt; s !== PAGE_SEGMENT_KEY)</span><span class="s3">\n      </span><span class="s1">.join('/'),</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">for (const key in parallelRoutes) {</span><span class="s3">\n    </span><span class="s1">const childTree = parallelRoutes[key]</span><span class="s3">\n    </span><span class="s1">await resolveViewportItemsImpl(</span><span class="s3">\n      </span><span class="s1">viewportItems,</span><span class="s3">\n      </span><span class="s1">childTree,</span><span class="s3">\n      </span><span class="s1">currentTreePrefix,</span><span class="s3">\n      </span><span class="s1">currentParams,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n      </span><span class="s1">errorConvention,</span><span class="s3">\n      </span><span class="s1">errorViewportItemRef,</span><span class="s3">\n      </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n      </span><span class="s1">workStore</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (Object.keys(parallelRoutes).length === 0 &amp;&amp; errorConvention) {</span><span class="s3">\n    </span><span class="s1">// If there are no parallel routes, place error metadata as the last item.</span><span class="s3">\n    </span><span class="s1">// e.g. layout -&gt; layout -&gt; not-found</span><span class="s3">\n    </span><span class="s1">viewportItems.push(errorViewportItemRef.current)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return viewportItems</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type WithTitle = { title?: AbsoluteTemplateString | null }</span><span class="s3">\n</span><span class="s1">type WithDescription = { description?: string | null }</span><span class="s3">\n\n</span><span class="s1">const isTitleTruthy = (title: AbsoluteTemplateString | null | undefined) =&gt;</span><span class="s3">\n  </span><span class="s1">!!title?.absolute</span><span class="s3">\n</span><span class="s1">const hasTitle = (metadata: WithTitle | null) =&gt; isTitleTruthy(metadata?.title)</span><span class="s3">\n\n</span><span class="s1">function inheritFromMetadata(</span><span class="s3">\n  </span><span class="s1">target: (WithTitle &amp; WithDescription) | null,</span><span class="s3">\n  </span><span class="s1">metadata: ResolvedMetadata</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (target) {</span><span class="s3">\n    </span><span class="s1">if (!hasTitle(target) &amp;&amp; hasTitle(metadata)) {</span><span class="s3">\n      </span><span class="s1">target.title = metadata.title</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (!target.description &amp;&amp; metadata.description) {</span><span class="s3">\n      </span><span class="s1">target.description = metadata.description</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars</span><span class="s3">\n</span><span class="s1">const commonOgKeys = ['title', 'description', 'images'] as const</span><span class="s3">\n</span><span class="s1">function postProcessMetadata(</span><span class="s3">\n  </span><span class="s1">metadata: ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">favicon: any,</span><span class="s3">\n  </span><span class="s1">titleTemplates: TitleTemplates,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">): ResolvedMetadata {</span><span class="s3">\n  </span><span class="s1">const { openGraph, twitter } = metadata</span><span class="s3">\n\n  </span><span class="s1">if (openGraph) {</span><span class="s3">\n    </span><span class="s1">// If there's openGraph information but not configured in twitter,</span><span class="s3">\n    </span><span class="s1">// inherit them from openGraph metadata.</span><span class="s3">\n    </span><span class="s1">let autoFillProps: Partial&lt;{</span><span class="s3">\n      </span><span class="s1">[Key in (typeof commonOgKeys)[number]]: NonNullable&lt;</span><span class="s3">\n        </span><span class="s1">ResolvedMetadata['openGraph']</span><span class="s3">\n      </span><span class="s1">&gt;[Key]</span><span class="s3">\n    </span><span class="s1">}&gt; = {}</span><span class="s3">\n    </span><span class="s1">const hasTwTitle = hasTitle(twitter)</span><span class="s3">\n    </span><span class="s1">const hasTwDescription = twitter?.description</span><span class="s3">\n    </span><span class="s1">const hasTwImages = Boolean(</span><span class="s3">\n      </span><span class="s1">twitter?.hasOwnProperty('images') &amp;&amp; twitter.images</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (!hasTwTitle) {</span><span class="s3">\n      </span><span class="s1">if (isTitleTruthy(openGraph.title)) {</span><span class="s3">\n        </span><span class="s1">autoFillProps.title = openGraph.title</span><span class="s3">\n      </span><span class="s1">} else if (metadata.title &amp;&amp; isTitleTruthy(metadata.title)) {</span><span class="s3">\n        </span><span class="s1">autoFillProps.title = metadata.title</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (!hasTwDescription)</span><span class="s3">\n      </span><span class="s1">autoFillProps.description =</span><span class="s3">\n        </span><span class="s1">openGraph.description || metadata.description || undefined</span><span class="s3">\n    </span><span class="s1">if (!hasTwImages) autoFillProps.images = openGraph.images</span><span class="s3">\n\n    </span><span class="s1">if (Object.keys(autoFillProps).length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">const partialTwitter = resolveTwitter(</span><span class="s3">\n        </span><span class="s1">autoFillProps,</span><span class="s3">\n        </span><span class="s1">metadata.metadataBase,</span><span class="s3">\n        </span><span class="s1">metadataContext,</span><span class="s3">\n        </span><span class="s1">titleTemplates.twitter</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">if (metadata.twitter) {</span><span class="s3">\n        </span><span class="s1">metadata.twitter = Object.assign({}, metadata.twitter, {</span><span class="s3">\n          </span><span class="s1">...(!hasTwTitle &amp;&amp; { title: partialTwitter?.title }),</span><span class="s3">\n          </span><span class="s1">...(!hasTwDescription &amp;&amp; {</span><span class="s3">\n            </span><span class="s1">description: partialTwitter?.description,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">...(!hasTwImages &amp;&amp; { images: partialTwitter?.images }),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">metadata.twitter = partialTwitter</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If there's no title and description configured in openGraph or twitter,</span><span class="s3">\n  </span><span class="s1">// use the title and description from metadata.</span><span class="s3">\n  </span><span class="s1">inheritFromMetadata(openGraph, metadata)</span><span class="s3">\n  </span><span class="s1">inheritFromMetadata(twitter, metadata)</span><span class="s3">\n\n  </span><span class="s1">if (favicon) {</span><span class="s3">\n    </span><span class="s1">if (!metadata.icons) {</span><span class="s3">\n      </span><span class="s1">metadata.icons = {</span><span class="s3">\n        </span><span class="s1">icon: [],</span><span class="s3">\n        </span><span class="s1">apple: [],</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">metadata.icons.icon.unshift(favicon)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return metadata</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type Result&lt;T&gt; = null | T | Promise&lt;null | T&gt; | PromiseLike&lt;null | T&gt;</span><span class="s3">\n\n</span><span class="s1">function prerenderMetadata(metadataItems: MetadataItems) {</span><span class="s3">\n  </span><span class="s1">// If the index is a function then it is a resolver and the next slot</span><span class="s3">\n  </span><span class="s1">// is the corresponding result. If the index is not a function it is the result</span><span class="s3">\n  </span><span class="s1">// itself.</span><span class="s3">\n  </span><span class="s1">const resolversAndResults: Array&lt;</span><span class="s3">\n    </span><span class="s1">((value: ResolvedMetadata) =&gt; void) | Result&lt;Metadata&gt;</span><span class="s3">\n  </span><span class="s1">&gt; = []</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt; metadataItems.length; i++) {</span><span class="s3">\n    </span><span class="s1">const metadataExport = metadataItems[i][0]</span><span class="s3">\n    </span><span class="s1">getResult(resolversAndResults, metadataExport)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolversAndResults</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function prerenderViewport(viewportItems: ViewportItems) {</span><span class="s3">\n  </span><span class="s1">// If the index is a function then it is a resolver and the next slot</span><span class="s3">\n  </span><span class="s1">// is the corresponding result. If the index is not a function it is the result</span><span class="s3">\n  </span><span class="s1">// itself.</span><span class="s3">\n  </span><span class="s1">const resolversAndResults: Array&lt;</span><span class="s3">\n    </span><span class="s1">((value: ResolvedViewport) =&gt; void) | Result&lt;Viewport&gt;</span><span class="s3">\n  </span><span class="s1">&gt; = []</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt; viewportItems.length; i++) {</span><span class="s3">\n    </span><span class="s1">const viewportExport = viewportItems[i]</span><span class="s3">\n    </span><span class="s1">getResult(resolversAndResults, viewportExport)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolversAndResults</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type Resolved&lt;T&gt; = T extends Metadata ? ResolvedMetadata : ResolvedViewport</span><span class="s3">\n\n</span><span class="s1">function getResult&lt;T extends Metadata | Viewport&gt;(</span><span class="s3">\n  </span><span class="s1">resolversAndResults: Array&lt;((value: Resolved&lt;T&gt;) =&gt; void) | Result&lt;T&gt;&gt;,</span><span class="s3">\n  </span><span class="s1">exportForResult: null | T | ((parent: Promise&lt;Resolved&lt;T&gt;&gt;) =&gt; Result&lt;T&gt;)</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (typeof exportForResult === 'function') {</span><span class="s3">\n    </span><span class="s1">const result = exportForResult(</span><span class="s3">\n      </span><span class="s1">new Promise&lt;Resolved&lt;T&gt;&gt;((resolve) =&gt; resolversAndResults.push(resolve))</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">resolversAndResults.push(result)</span><span class="s3">\n    </span><span class="s1">if (result instanceof Promise) {</span><span class="s3">\n      </span><span class="s1">// since we eager execute generateMetadata and</span><span class="s3">\n      </span><span class="s1">// they can reject at anytime we need to ensure</span><span class="s3">\n      </span><span class="s1">// we attach the catch handler right away to</span><span class="s3">\n      </span><span class="s1">// prevent unhandled rejections crashing the process</span><span class="s3">\n      </span><span class="s1">result.catch((err) =&gt; {</span><span class="s3">\n        </span><span class="s1">return {</span><span class="s3">\n          </span><span class="s1">__nextError: err,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else if (typeof exportForResult === 'object') {</span><span class="s3">\n    </span><span class="s1">resolversAndResults.push(exportForResult)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">resolversAndResults.push(null)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function resolvePendingResult&lt;</span><span class="s3">\n  </span><span class="s1">ResolvedType extends ResolvedMetadata | ResolvedViewport,</span><span class="s3">\n</span><span class="s1">&gt;(</span><span class="s3">\n  </span><span class="s1">parentResult: ResolvedType,</span><span class="s3">\n  </span><span class="s1">resolveParentResult: (value: ResolvedType) =&gt; void</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">// In dev we clone and freeze to prevent relying on mutating resolvedMetadata directly.</span><span class="s3">\n  </span><span class="s1">// In prod we just pass resolvedMetadata through without any copying.</span><span class="s3">\n  </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error -- DeepReadonly&lt;T&gt; is by definition not assignable to T</span><span class="s3">\n    </span><span class="s1">// Instead, we should only accept DeepReadonly&lt;ResolvedType&gt;</span><span class="s3">\n    </span><span class="s1">parentResult = (</span><span class="s3">\n      </span><span class="s1">require('../../shared/lib/deep-freeze') as typeof import('../../shared/lib/deep-freeze')</span><span class="s3">\n    </span><span class="s1">).deepFreeze(</span><span class="s3">\n      </span><span class="s1">(</span><span class="s3">\n        </span><span class="s1">require('./clone-metadata') as typeof import('./clone-metadata')</span><span class="s3">\n      </span><span class="s1">).cloneMetadata(parentResult)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">resolveParentResult(parentResult)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function accumulateMetadata(</span><span class="s3">\n  </span><span class="s1">route: string,</span><span class="s3">\n  </span><span class="s1">metadataItems: MetadataItems,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedMetadata&gt; {</span><span class="s3">\n  </span><span class="s1">let resolvedMetadata = createDefaultMetadata()</span><span class="s3">\n\n  </span><span class="s1">let titleTemplates: TitleTemplates = {</span><span class="s3">\n    </span><span class="s1">title: null,</span><span class="s3">\n    </span><span class="s1">twitter: null,</span><span class="s3">\n    </span><span class="s1">openGraph: null,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const buildState = {</span><span class="s3">\n    </span><span class="s1">warnings: new Set&lt;string&gt;(),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let favicon</span><span class="s3">\n\n  </span><span class="s1">// Collect the static icons in the most leaf node,</span><span class="s3">\n  </span><span class="s1">// since we don't collect all the static metadata icons in the parent segments.</span><span class="s3">\n  </span><span class="s1">const leafSegmentStaticIcons = {</span><span class="s3">\n    </span><span class="s1">icon: [],</span><span class="s3">\n    </span><span class="s1">apple: [],</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const resolversAndResults = prerenderMetadata(metadataItems)</span><span class="s3">\n  </span><span class="s1">let resultIndex = 0</span><span class="s3">\n\n  </span><span class="s1">for (let i = 0; i &lt; metadataItems.length; i++) {</span><span class="s3">\n    </span><span class="s1">const staticFilesMetadata = metadataItems[i][1]</span><span class="s3">\n    </span><span class="s1">// Treat favicon as special case, it should be the first icon in the list</span><span class="s3">\n    </span><span class="s1">// i &lt;= 1 represents root layout, and if current page is also at root</span><span class="s3">\n    </span><span class="s1">if (i &lt;= 1 &amp;&amp; isFavicon(staticFilesMetadata?.icon?.[0])) {</span><span class="s3">\n      </span><span class="s1">const iconMod = staticFilesMetadata?.icon?.shift()</span><span class="s3">\n      </span><span class="s1">if (i === 0) favicon = iconMod</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let pendingMetadata = resolversAndResults[resultIndex++]</span><span class="s3">\n    </span><span class="s1">if (typeof pendingMetadata === 'function') {</span><span class="s3">\n      </span><span class="s1">// This metadata item had a `generateMetadata` and</span><span class="s3">\n      </span><span class="s1">// we need to provide the currently resolved metadata</span><span class="s3">\n      </span><span class="s1">// to it before we continue;</span><span class="s3">\n      </span><span class="s1">const resolveParentMetadata = pendingMetadata</span><span class="s3">\n      </span><span class="s1">// we know that the next item is a result if this item</span><span class="s3">\n      </span><span class="s1">// was a resolver</span><span class="s3">\n      </span><span class="s1">pendingMetadata = resolversAndResults[resultIndex++] as Result&lt;Metadata&gt;</span><span class="s3">\n\n      </span><span class="s1">resolvePendingResult(resolvedMetadata, resolveParentMetadata)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Otherwise the item was either null or a static export</span><span class="s3">\n\n    </span><span class="s1">let metadata: Metadata | null</span><span class="s3">\n    </span><span class="s1">if (isPromiseLike(pendingMetadata)) {</span><span class="s3">\n      </span><span class="s1">metadata = await pendingMetadata</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">metadata = pendingMetadata</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">resolvedMetadata = await mergeMetadata(route, pathname, {</span><span class="s3">\n      </span><span class="s1">target: resolvedMetadata,</span><span class="s3">\n      </span><span class="s1">source: metadata,</span><span class="s3">\n      </span><span class="s1">metadataContext,</span><span class="s3">\n      </span><span class="s1">staticFilesMetadata,</span><span class="s3">\n      </span><span class="s1">titleTemplates,</span><span class="s3">\n      </span><span class="s1">buildState,</span><span class="s3">\n      </span><span class="s1">leafSegmentStaticIcons,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">// If the layout is the same layer with page, skip the leaf layout and leaf page</span><span class="s3">\n    </span><span class="s1">// The leaf layout and page are the last two items</span><span class="s3">\n    </span><span class="s1">if (i &lt; metadataItems.length - 2) {</span><span class="s3">\n      </span><span class="s1">titleTemplates = {</span><span class="s3">\n        </span><span class="s1">title: resolvedMetadata.title?.template || null,</span><span class="s3">\n        </span><span class="s1">openGraph: resolvedMetadata.openGraph?.title.template || null,</span><span class="s3">\n        </span><span class="s1">twitter: resolvedMetadata.twitter?.title.template || null,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons.icon.length &gt; 0 ||</span><span class="s3">\n    </span><span class="s1">leafSegmentStaticIcons.apple.length &gt; 0</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (!resolvedMetadata.icons) {</span><span class="s3">\n      </span><span class="s1">resolvedMetadata.icons = {</span><span class="s3">\n        </span><span class="s1">icon: [],</span><span class="s3">\n        </span><span class="s1">apple: [],</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (leafSegmentStaticIcons.icon.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">resolvedMetadata.icons.icon.unshift(...leafSegmentStaticIcons.icon)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (leafSegmentStaticIcons.apple.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">resolvedMetadata.icons.apple.unshift(...leafSegmentStaticIcons.apple)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Only log warnings if there are any, and only once after the metadata resolving process is finished</span><span class="s3">\n  </span><span class="s1">if (buildState.warnings.size &gt; 0) {</span><span class="s3">\n    </span><span class="s1">for (const warning of buildState.warnings) {</span><span class="s3">\n      </span><span class="s1">Log.warn(warning)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return postProcessMetadata(</span><span class="s3">\n    </span><span class="s1">resolvedMetadata,</span><span class="s3">\n    </span><span class="s1">favicon,</span><span class="s3">\n    </span><span class="s1">titleTemplates,</span><span class="s3">\n    </span><span class="s1">metadataContext</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function accumulateViewport(</span><span class="s3">\n  </span><span class="s1">viewportItems: ViewportItems</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedViewport&gt; {</span><span class="s3">\n  </span><span class="s1">const resolvedViewport: ResolvedViewport = createDefaultViewport()</span><span class="s3">\n\n  </span><span class="s1">const resolversAndResults = prerenderViewport(viewportItems)</span><span class="s3">\n  </span><span class="s1">let i = 0</span><span class="s3">\n\n  </span><span class="s1">while (i &lt; resolversAndResults.length) {</span><span class="s3">\n    </span><span class="s1">let pendingViewport = resolversAndResults[i++]</span><span class="s3">\n    </span><span class="s1">if (typeof pendingViewport === 'function') {</span><span class="s3">\n      </span><span class="s1">// this viewport item had a `generateViewport` and</span><span class="s3">\n      </span><span class="s1">// we need to provide the currently resolved viewport</span><span class="s3">\n      </span><span class="s1">// to it before we continue;</span><span class="s3">\n      </span><span class="s1">const resolveParentViewport = pendingViewport</span><span class="s3">\n      </span><span class="s1">// we know that the next item is a result if this item</span><span class="s3">\n      </span><span class="s1">// was a resolver</span><span class="s3">\n      </span><span class="s1">pendingViewport = resolversAndResults[i++] as Result&lt;Viewport&gt;</span><span class="s3">\n\n      </span><span class="s1">resolvePendingResult(resolvedViewport, resolveParentViewport)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Otherwise the item was either null or a static export</span><span class="s3">\n\n    </span><span class="s1">let viewport: Viewport | null</span><span class="s3">\n    </span><span class="s1">if (isPromiseLike(pendingViewport)) {</span><span class="s3">\n      </span><span class="s1">viewport = await pendingViewport</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">viewport = pendingViewport</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">mergeViewport({</span><span class="s3">\n      </span><span class="s1">target: resolvedViewport,</span><span class="s3">\n      </span><span class="s1">source: viewport,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return resolvedViewport</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Exposed API for metadata component, that directly resolve the loader tree and related context as resolved metadata.</span><span class="s3">\n</span><span class="s1">export async function resolveMetadata(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedMetadata&gt; {</span><span class="s3">\n  </span><span class="s1">const metadataItems = await resolveMetadataItems(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">return accumulateMetadata(</span><span class="s3">\n    </span><span class="s1">workStore.route,</span><span class="s3">\n    </span><span class="s1">metadataItems,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">metadataContext</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Exposed API for viewport component, that directly resolve the loader tree and related context as resolved viewport.</span><span class="s3">\n</span><span class="s1">export async function resolveViewport(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">errorConvention: MetadataErrorType | undefined,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResolvedViewport&gt; {</span><span class="s3">\n  </span><span class="s1">const viewportItems = await resolveViewportItems(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">return accumulateViewport(viewportItems)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isPromiseLike&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">value: unknown | PromiseLike&lt;T&gt;</span><span class="s3">\n</span><span class="s1">): value is PromiseLike&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">typeof value === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">value !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof (value as PromiseLike&lt;unknown&gt;).then === 'function'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;createDefaultMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;createDefaultViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveOpenGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveTwitter&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAsArrayOrUndefined&quot;</span><span class="s0">,</span><span class="s1">&quot;getComponentTypeModule&quot;</span><span class="s0">,</span><span class="s1">&quot;getLayoutOrPageModule&quot;</span><span class="s0">,</span><span class="s1">&quot;interopDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAlternates&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAppleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveAppLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveRobots&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveThemeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveVerification&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveItunes&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveFacebook&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvePagination&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveIcons&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;ResolveMetadataSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGE_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerParamsForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;isFavicon&quot;</span><span class="s0">,</span><span class="s1">&quot;icon&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeStaticMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;staticFilesMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataContext&quot;</span><span class="s0">,</span><span class="s1">&quot;titleTemplates&quot;</span><span class="s0">,</span><span class="s1">&quot;leafSegmentStaticIcons&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;apple&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwnProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedTwitter&quot;</span><span class="s0">,</span><span class="s1">&quot;images&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataBase&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedOpenGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;buildState&quot;</span><span class="s0">,</span><span class="s1">&quot;key_&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;alternates&quot;</span><span class="s0">,</span><span class="s1">&quot;facebook&quot;</span><span class="s0">,</span><span class="s1">&quot;verification&quot;</span><span class="s0">,</span><span class="s1">&quot;icons&quot;</span><span class="s0">,</span><span class="s1">&quot;appleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;appLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;robots&quot;</span><span class="s0">,</span><span class="s1">&quot;authors&quot;</span><span class="s0">,</span><span class="s1">&quot;itunes&quot;</span><span class="s0">,</span><span class="s1">&quot;pagination&quot;</span><span class="s0">,</span><span class="s1">&quot;other&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;warnings&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;themeColor&quot;</span><span class="s0">,</span><span class="s1">&quot;colorScheme&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefinedViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;tracingProps&quot;</span><span class="s0">,</span><span class="s1">&quot;generateViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;parent&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;viewport&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefinedMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;generateMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;collectStaticImagesFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;iconPromises&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;imageModule&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;flat&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveStaticMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;staticMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;collectMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataItems&quot;</span><span class="s0">,</span><span class="s1">&quot;errorMetadataItem&quot;</span><span class="s0">,</span><span class="s1">&quot;errorConvention&quot;</span><span class="s0">,</span><span class="s1">&quot;modType&quot;</span><span class="s0">,</span><span class="s1">&quot;hasErrorConventionComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;layoutOrPageMod&quot;</span><span class="s0">,</span><span class="s1">&quot;layoutOrPageModType&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataExport&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;errorMod&quot;</span><span class="s0">,</span><span class="s1">&quot;errorMetadataExport&quot;</span><span class="s0">,</span><span class="s1">&quot;collectViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportItems&quot;</span><span class="s0">,</span><span class="s1">&quot;errorViewportItemRef&quot;</span><span class="s0">,</span><span class="s1">&quot;viewportExport&quot;</span><span class="s0">,</span><span class="s1">&quot;errorViewportExport&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveMetadataItems&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;getDynamicParamFromSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;parentParams&quot;</span><span class="s0">,</span><span class="s1">&quot;treePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveMetadataItemsImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;currentTreePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;isPage&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentParam&quot;</span><span class="s0">,</span><span class="s1">&quot;currentParams&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;layerProps&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;s&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;childTree&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveViewportItems&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveViewportItemsImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;isTitleTruthy&quot;</span><span class="s0">,</span><span class="s1">&quot;absolute&quot;</span><span class="s0">,</span><span class="s1">&quot;hasTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;inheritFromMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;commonOgKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;postProcessMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;favicon&quot;</span><span class="s0">,</span><span class="s1">&quot;autoFillProps&quot;</span><span class="s0">,</span><span class="s1">&quot;hasTwTitle&quot;</span><span class="s0">,</span><span class="s1">&quot;hasTwDescription&quot;</span><span class="s0">,</span><span class="s1">&quot;hasTwImages&quot;</span><span class="s0">,</span><span class="s1">&quot;partialTwitter&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolversAndResults&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;getResult&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;exportForResult&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;__nextError&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvePendingResult&quot;</span><span class="s0">,</span><span class="s1">&quot;parentResult&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveParentResult&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;deepFreeze&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;accumulateMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;resultIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;iconMod&quot;</span><span class="s0">,</span><span class="s1">&quot;shift&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveParentMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;isPromiseLike&quot;</span><span class="s0">,</span><span class="s1">&quot;template&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;warning&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;accumulateViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveParentViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAyBA,6DAA6D;;;;;;;;;;;AAC7D,OAAO,cAAa;AAEpB,SAASA,KAAK,QAAQ,QAAO;AAC7B,SACEC,qBAAqB,EACrBC,qBAAqB,QAChB,qBAAoB;AAC3B,SAASC,gBAAgB,EAAEC,cAAc,QAAQ,gCAA+B;AAChF,SAASC,YAAY,QAAQ,4BAA2B;AACxD,SAASC,yBAAyB,QAAQ,mBAAkB;AAC5D,SACEC,sBAAsB,EACtBC,qBAAqB,QAChB,kCAAiC;AACxC,SAASC,cAAc,QAAQ,qBAAoB;AACnD,SACEC,iBAAiB,EACjBC,kBAAkB,EAClBC,eAAe,EACfC,aAAa,EACbC,iBAAiB,EACjBC,mBAAmB,EACnBC,aAAa,EACbC,eAAe,EACfC,iBAAiB,QACZ,6BAA4B;AACnC,SAASC,YAAY,QAAQ,4BAA2B;AACxD,SAASC,SAAS,QAAQ,gCAA+B;AACzD,SAASC,mBAAmB,QAAQ,mCAAkC;AACtE,SAASC,gBAAgB,QAAQ,2BAA0B;AAC3D,YAAYC,SAAS,yBAAwB;AAC7C,SAASC,6BAA6B,QAAQ,8BAA6B;;;;;;;;;;;;;;;;AAqC3E,SAASC,UAAUC,IAAgC;IACjD,IAAI,CAACA,MAAM;QACT,OAAO;IACT;IAEA,yCAAyC;IACzC,OACGA,CAAAA,KAAKC,GAAG,KAAK,kBACZD,KAAKC,GAAG,CAACC,QAAQ,GAAGC,UAAU,CAAC,gBAAe,KAChDH,KAAKI,IAAI,KAAK;AAElB;AAEA,eAAeC,oBACbC,MAAuB,EACvBC,MAAwB,EACxBC,mBAAmC,EACnCC,eAAgC,EAChCC,cAA8B,EAC9BC,sBAAmC,EACnCC,QAAyB;QAeTN,iBAWEA;IAxBlB,IAAI,CAACE,qBAAqB,OAAOD;IACjC,MAAM,EAAEP,IAAI,EAAEa,KAAK,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,EAAE,GAAGR;IAEtD,uDAAuD;IAEvD,IAAIR,MAAM;QACRW,uBAAuBX,IAAI,GAAGA;IAChC;IACA,IAAIa,OAAO;QACTF,uBAAuBE,KAAK,GAAGA;IACjC;IAEA,8FAA8F;IAC9F,IAAIE,WAAW,CAAA,CAACT,UAAAA,OAAAA,KAAAA,IAAAA,CAAAA,kBAAAA,OAAQS,OAAO,KAAA,OAAA,KAAA,IAAfT,gBAAiBW,cAAc,CAAC,SAAA,GAAW;QACzD,MAAMC,sBAAkBxC,6MAAAA,EACtB;YAAE,GAAG6B,OAAOQ,OAAO;YAAEI,QAAQJ;QAAQ,GACrCR,OAAOa,YAAY,EACnB;YAAE,GAAGX,eAAe;YAAEY,2BAA2B;QAAK,GACtDX,eAAeK,OAAO;QAExBR,OAAOQ,OAAO,GAAGG;IACnB;IAEA,gGAAgG;IAChG,IAAIJ,aAAa,CAAA,CAACR,UAAAA,OAAAA,KAAAA,IAAAA,CAAAA,oBAAAA,OAAQQ,SAAS,KAAA,OAAA,KAAA,IAAjBR,kBAAmBW,cAAc,CAAC,SAAA,GAAW;QAC7D,MAAMK,oBAAoB,UAAM7C,+MAAAA,EAC9B;YAAE,GAAG8B,OAAOO,SAAS;YAAEK,QAAQL;QAAU,GACzCP,OAAOa,YAAY,EACnBR,UACA;YAAE,GAAGH,eAAe;YAAEY,2BAA2B;QAAK,GACtDX,eAAeI,SAAS;QAE1BP,OAAOO,SAAS,GAAGQ;IACrB;IACA,IAAIN,UAAU;QACZT,OAAOS,QAAQ,GAAGA;IACpB;IAEA,OAAOT;AACT;AAEA,+DAA+D;AAC/D,eAAegB,cACbC,KAAa,EACbZ,QAAyB,EACzB,EACEN,MAAM,EACNC,MAAM,EACNC,mBAAmB,EACnBE,cAAc,EACdD,eAAe,EACfgB,UAAU,EACVd,sBAAsB,EASvB;IAED,sFAAsF;IACtF,MAAMS,eACJ,OAAA,CAAOd,UAAAA,OAAAA,KAAAA,IAAAA,OAAQc,YAAY,MAAK,cAC5Bd,OAAOc,YAAY,GACnBb,OAAOa,YAAY;IACzB,IAAK,MAAMM,QAAQpB,OAAQ;QACzB,MAAMqB,MAAMD;QAEZ,OAAQC;YACN,KAAK;gBAAS;oBACZpB,OAAOqB,KAAK,OAAGjD,uMAAAA,EAAa2B,OAAOsB,KAAK,EAAElB,eAAekB,KAAK;oBAC9D;gBACF;YACA,KAAK;gBAAc;oBACjBrB,OAAOsB,UAAU,GAAG,UAAM7C,6MAAAA,EACxBsB,OAAOuB,UAAU,EACjBT,cACAR,UACAH;oBAEF;gBACF;YACA,KAAK;gBAAa;oBAChBF,OAAOO,SAAS,GAAG,UAAMrC,+MAAAA,EACvB6B,OAAOQ,SAAS,EAChBM,cACAR,UACAH,iBACAC,eAAeI,SAAS;oBAE1B;gBACF;YACA,KAAK;gBAAW;oBACdP,OAAOQ,OAAO,OAAGrC,6MAAAA,EACf4B,OAAOS,OAAO,EACdK,cACAX,iBACAC,eAAeK,OAAO;oBAExB;gBACF;YACA,KAAK;gBACHR,OAAOuB,QAAQ,OAAGvC,2MAAAA,EAAgBe,OAAOwB,QAAQ;gBACjD;YACF,KAAK;gBACHvB,OAAOwB,YAAY,OAAG1C,+MAAAA,EAAoBiB,OAAOyB,YAAY;gBAC7D;YAEF,KAAK;gBAAS;oBACZxB,OAAOyB,KAAK,OAAGvC,uMAAAA,EAAaa,OAAO0B,KAAK;oBACxC;gBACF;YACA,KAAK;gBACHzB,OAAO0B,WAAW,OAAGhD,8MAAAA,EAAmBqB,OAAO2B,WAAW;gBAC1D;YACF,KAAK;gBACH1B,OAAO2B,QAAQ,OAAGhD,2MAAAA,EAAgBoB,OAAO4B,QAAQ;gBACjD;YACF,KAAK;gBAAU;oBACb3B,OAAO4B,MAAM,OAAGhD,yMAAAA,EAAcmB,OAAO6B,MAAM;oBAC3C;gBACF;YACA,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBAAY;oBACf5B,MAAM,CAACoB,IAAI,OAAG/C,wMAAAA,EAA0B0B,MAAM,CAACqB,IAAI;oBACnD;gBACF;YACA,KAAK;gBAAW;oBACdpB,MAAM,CAACoB,IAAI,OAAG/C,wMAAAA,EAA0B0B,OAAO8B,OAAO;oBACtD;gBACF;YACA,KAAK;gBAAU;oBACb7B,MAAM,CAACoB,IAAI,GAAG,UAAMrC,yMAAAA,EAClBgB,OAAO+B,MAAM,EACbjB,cACAR,UACAH;oBAEF;gBACF;YACA,KAAK;gBAAc;oBACjBF,OAAO+B,UAAU,GAAG,UAAM9C,6MAAAA,EACxBc,OAAOgC,UAAU,EACjBlB,cACAR,UACAH;oBAEF;gBACF;YACA,+CAA+C;YAC/C,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBACH,qCAAqC;gBACrCF,MAAM,CAACoB,IAAI,GAAGrB,MAAM,CAACqB,IAAI,IAAI;gBAC7B;YACF,KAAK;gBACHpB,OAAOgC,KAAK,GAAGC,OAAOC,MAAM,CAAC,CAAC,GAAGlC,OAAOgC,KAAK,EAAEjC,OAAOiC,KAAK;gBAC3D;YACF,KAAK;gBACHhC,OAAOa,YAAY,GAAGA;gBACtB;YAEF,KAAK;gBAA0B;oBAC7BK,WAAWiB,QAAQ,CAACC,GAAG,CACrB,CAAC,yGAAyG,CAAC;oBAE7G;gBACF;YACA,KAAK;gBAAgC;oBACnClB,WAAWiB,QAAQ,CAACC,GAAG,CACrB,CAAC,yGAAyG,CAAC;oBAE7G;gBACF;YACA,KAAK;YACL,KAAK;YACL,KAAK;gBACH,IAAIrC,MAAM,CAACqB,IAAI,IAAI,MAAM;oBACvBF,WAAWiB,QAAQ,CAACC,GAAG,CACrB,CAAC,qBAAqB,EAAEhB,IAAI,qCAAqC,EAAEH,MAAM,8HAA8H,CAAC;gBAE5M;gBACA;YACF;gBAAS;oBACPG;gBACF;QACF;IACF;IACA,OAAOtB,oBACLC,QACAC,QACAC,qBACAC,iBACAC,gBACAC,wBACAC;AAEJ;AAEA,SAASgC,cAAc,EACrBrC,MAAM,EACND,MAAM,EAIP;IACC,IAAI,CAACA,QAAQ;IACb,IAAK,MAAMoB,QAAQpB,OAAQ;QACzB,MAAMqB,MAAMD;QAEZ,OAAQC;YACN,KAAK;gBAAc;oBACjBpB,OAAOsC,UAAU,OAAGzD,6MAAAA,EAAkBkB,OAAOuC,UAAU;oBACvD;gBACF;YACA,KAAK;gBACHtC,OAAOuC,WAAW,GAAGxC,OAAOwC,WAAW,IAAI;gBAC3C;YACF,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBACH,6CAA6C;gBAC7C,iCAAiC;gBACjCvC,MAAM,CAACoB,IAAI,GAAGrB,MAAM,CAACqB,IAAI;gBACzB;YACF;gBACEA;QACJ;IACF;AACF;AAEA,SAASoB,mBACPC,GAAQ,EACRC,KAAU,EACVC,YAA+B;IAE/B,IAAI,OAAOF,IAAIG,gBAAgB,KAAK,YAAY;QAC9C,MAAM,EAAE3B,KAAK,EAAE,GAAG0B;QAClB,OAAO,CAACE,aACN1D,oLAAAA,IAAY2D,KAAK,CACf1D,iMAAAA,CAAoBwD,gBAAgB,EACpC;gBACEG,UAAU,CAAC,iBAAiB,EAAE9B,OAAO;gBACrC+B,YAAY;oBACV,aAAa/B;gBACf;YACF,GACA,IAAMwB,IAAIG,gBAAgB,CAACF,OAAOG;IAExC;IACA,OAAOJ,IAAIQ,QAAQ,IAAI;AACzB;AAEA,SAASC,mBACPT,GAAQ,EACRC,KAAU,EACVC,YAA+B;IAE/B,IAAI,OAAOF,IAAIU,gBAAgB,KAAK,YAAY;QAC9C,MAAM,EAAElC,KAAK,EAAE,GAAG0B;QAClB,OAAO,CAACE,aACN1D,oLAAAA,IAAY2D,KAAK,CACf1D,iMAAAA,CAAoB+D,gBAAgB,EACpC;gBACEJ,UAAU,CAAC,iBAAiB,EAAE9B,OAAO;gBACrC+B,YAAY;oBACV,aAAa/B;gBACf;YACF,GACA,IAAMwB,IAAIU,gBAAgB,CAACT,OAAOG;IAExC;IACA,OAAOJ,IAAIW,QAAQ,IAAI;AACzB;AAEA,eAAeC,yBACbD,QAAmC,EACnCV,KAAU,EACV7C,IAAkD;QAU7C;IARL,IAAI,CAAA,CAACuD,YAAAA,OAAAA,KAAAA,IAAAA,QAAU,CAACvD,KAAK,GAAE,OAAOyD;IAE9B,MAAMC,eAAeH,QAAQ,CAACvD,KAAyB,CAAC2D,GAAG,CACzD,OAAOC,kBACLjF,kLAAAA,EAAe,MAAMiF,YAAYf;IAGrC,OAAOa,CAAAA,gBAAAA,OAAAA,KAAAA,IAAAA,aAAcG,MAAM,IAAG,IAAA,CACzB,QAAA,MAAMC,QAAQC,GAAG,CAACL,aAAAA,KAAAA,OAAAA,KAAAA,IAAlB,MAAkCM,IAAI,KACvCP;AACN;AAEA,eAAeQ,sBACbC,OAAsB,EACtBrB,KAAU;IAEV,MAAM,EAAEU,QAAQ,EAAE,GAAGW;IACrB,IAAI,CAACX,UAAU,OAAO;IAEtB,MAAM,CAAC3D,MAAMa,OAAOC,WAAWC,QAAQ,GAAG,MAAMmD,QAAQC,GAAG,CAAC;QAC1DP,yBAAyBD,UAAUV,OAAO;QAC1CW,yBAAyBD,UAAUV,OAAO;QAC1CW,yBAAyBD,UAAUV,OAAO;QAC1CW,yBAAyBD,UAAUV,OAAO;KAC3C;IAED,MAAMsB,iBAAiB;QACrBvE;QACAa;QACAC;QACAC;QACAC,UAAU2C,SAAS3C,QAAQ;IAC7B;IAEA,OAAOuD;AACT;AAEA,4FAA4F;AAC5F,eAAeC,gBAAgB,EAC7BC,IAAI,EACJC,aAAa,EACbC,iBAAiB,EACjB1B,KAAK,EACLzB,KAAK,EACLoD,eAAe,EAQhB;IACC,IAAI5B;IACJ,IAAI6B;IACJ,MAAMC,8BAA8BC,QAClCH,mBAAmBH,IAAI,CAAC,EAAE,CAACG,gBAAgB;IAE7C,IAAIA,iBAAiB;QACnB5B,MAAM,UAAMnE,sMAAAA,EAAuB4F,MAAM;QACzCI,UAAUD;IACZ,OAAO;QACL,MAAM,EAAE5B,KAAKgC,eAAe,EAAEH,SAASI,mBAAmB,EAAE,GAC1D,UAAMnG,qMAAAA,EAAsB2F;QAC9BzB,MAAMgC;QACNH,UAAUI;IACZ;IAEA,IAAIJ,SAAS;QACXrD,SAAS,CAAC,CAAC,EAAEqD,SAAS;IACxB;IAEA,MAAMrE,sBAAsB,MAAM6D,sBAAsBI,IAAI,CAAC,EAAE,EAAExB;IACjE,MAAMiC,iBAAiBlC,MAAMS,mBAAmBT,KAAKC,OAAO;QAAEzB;IAAM,KAAK;IAEzEkD,cAAcS,IAAI,CAAC;QAACD;QAAgB1E;KAAoB;IAExD,IAAIsE,+BAA+BF,iBAAiB;QAClD,MAAMQ,WAAW,UAAMvG,sMAAAA,EAAuB4F,MAAMG;QACpD,MAAMS,sBAAsBD,WACxB3B,mBAAmB2B,UAAUnC,OAAO;YAAEzB;QAAM,KAC5C;QAEJmD,iBAAiB,CAAC,EAAE,GAAGU;QACvBV,iBAAiB,CAAC,EAAE,GAAGnE;IACzB;AACF;AAEA,4FAA4F;AAC5F,eAAe8E,gBAAgB,EAC7Bb,IAAI,EACJc,aAAa,EACbC,oBAAoB,EACpBvC,KAAK,EACLzB,KAAK,EACLoD,eAAe,EAQhB;IACC,IAAI5B;IACJ,IAAI6B;IACJ,MAAMC,8BAA8BC,QAClCH,mBAAmBH,IAAI,CAAC,EAAE,CAACG,gBAAgB;IAE7C,IAAIA,iBAAiB;QACnB5B,MAAM,UAAMnE,sMAAAA,EAAuB4F,MAAM;QACzCI,UAAUD;IACZ,OAAO;QACL,MAAM,EAAE5B,KAAKgC,eAAe,EAAEH,SAASI,mBAAmB,EAAE,GAC1D,UAAMnG,qMAAAA,EAAsB2F;QAC9BzB,MAAMgC;QACNH,UAAUI;IACZ;IAEA,IAAIJ,SAAS;QACXrD,SAAS,CAAC,CAAC,EAAEqD,SAAS;IACxB;IAEA,MAAMY,iBAAiBzC,MAAMD,mBAAmBC,KAAKC,OAAO;QAAEzB;IAAM,KAAK;IAEzE+D,cAAcJ,IAAI,CAACM;IAEnB,IAAIX,+BAA+BF,iBAAiB;QAClD,MAAMQ,WAAW,UAAMvG,sMAAAA,EAAuB4F,MAAMG;QACpD,MAAMc,sBAAsBN,WACxBrC,mBAAmBqC,UAAUnC,OAAO;YAAEzB;QAAM,KAC5C;QAEJgE,qBAAqBG,OAAO,GAAGD;IACjC;AACF;AAEA,MAAME,2BAAuBtH,8MAAAA,EAAM,eACjCmG,IAAgB,EAChBoB,YAAqC,EACrCjB,eAA8C,EAC9CkB,0BAAsD,EACtDC,SAAoB;IAEpB,MAAMC,eAAe,CAAC;IACtB,MAAMtB,gBAA+B,EAAE;IACvC,MAAMC,oBAA2C;QAAC;QAAM;KAAK;IAC7D,MAAMsB,aAAapC;IACnB,OAAOqC,yBACLxB,eACAD,MACAwB,YACAD,cACAH,cACAjB,iBACAD,mBACAmB,4BACAC;AAEJ;AAEA,eAAeG,yBACbxB,aAA4B,EAC5BD,IAAgB,EAChB,6FAA6F,GAC7FwB,UAAgC,EAChCD,YAAoB,EACpBH,YAAqC,EACrCjB,eAA8C,EAC9CD,iBAAwC,EACxCmB,0BAAsD,EACtDC,SAAoB;IAEpB,MAAM,CAACI,SAASC,gBAAgB,EAAEC,IAAI,EAAE,CAAC,GAAG5B;IAC5C,MAAM6B,oBACJL,cAAcA,WAAWhC,MAAM,GAAG;WAAIgC;QAAYE;KAAQ,GAAG;QAACA;KAAQ;IACxE,MAAMI,SAAS,OAAOF,SAAS;IAE/B,iCAAiC;IACjC,MAAMG,eAAeV,2BAA2BK;IAChD;;GAEC,GACD,IAAIM,gBAAgBT;IACpB,IAAIQ,gBAAgBA,aAAaE,KAAK,KAAK,MAAM;QAC/CD,gBAAgB;YACd,GAAGT,YAAY;YACf,CAACQ,aAAaG,KAAK,CAAC,EAAEH,aAAaE,KAAK;QAC1C;IACF;IAEA,MAAME,aAAS9G,mMAAAA,EAA8B2G,eAAeV;IAE5D,IAAIc;IACJ,IAAIN,QAAQ;QACVM,aAAa;YACXD;YACAf;QACF;IACF,OAAO;QACLgB,aAAa;YACXD;QACF;IACF;IAEA,MAAMpC,gBAAgB;QACpBC;QACAC;QACAC;QACAC;QACA3B,OAAO4D;QACPrF,OAAO8E,kBACL,yCAAyC;SACxCQ,MAAM,CAAC,CAACC,IAAMA,MAAMnH,mLAAAA,EACpBoH,IAAI,CAAC;IACV;IAEA,IAAK,MAAMrF,OAAOyE,eAAgB;QAChC,MAAMa,YAAYb,cAAc,CAACzE,IAAI;QACrC,MAAMuE,yBACJxB,eACAuC,WACAX,mBACAG,eACAZ,cACAjB,iBACAD,mBACAmB,4BACAC;IAEJ;IAEA,IAAIvD,OAAO0E,IAAI,CAACd,gBAAgBnC,MAAM,KAAK,KAAKW,iBAAiB;QAC/D,0EAA0E;QAC1E,qCAAqC;QACrCF,cAAcS,IAAI,CAACR;IACrB;IAEA,OAAOD;AACT;AAGA,MAAMyC,2BAAuB7I,8MAAAA,EAAM,eACjCmG,IAAgB,EAChBoB,YAAqC,EACrCjB,eAA8C,EAC9CkB,0BAAsD,EACtDC,SAAoB;IAEpB,MAAMC,eAAe,CAAC;IACtB,MAAMT,gBAA+B,EAAE;IACvC,MAAMC,uBAA6C;QACjDG,SAAS;IACX;IACA,MAAMM,aAAapC;IACnB,OAAOuD,yBACL7B,eACAd,MACAwB,YACAD,cACAH,cACAjB,iBACAY,sBACAM,4BACAC;AAEJ;AAEA,eAAeqB,yBACb7B,aAA4B,EAC5Bd,IAAgB,EAChB,6FAA6F,GAC7FwB,UAAgC,EAChCD,YAAoB,EACpBH,YAAqC,EACrCjB,eAA8C,EAC9CY,oBAA0C,EAC1CM,0BAAsD,EACtDC,SAAoB;IAEpB,MAAM,CAACI,SAASC,gBAAgB,EAAEC,IAAI,EAAE,CAAC,GAAG5B;IAC5C,MAAM6B,oBACJL,cAAcA,WAAWhC,MAAM,GAAG;WAAIgC;QAAYE;KAAQ,GAAG;QAACA;KAAQ;IACxE,MAAMI,SAAS,OAAOF,SAAS;IAE/B,iCAAiC;IACjC,MAAMG,eAAeV,2BAA2BK;IAChD;;GAEC,GACD,IAAIM,gBAAgBT;IACpB,IAAIQ,gBAAgBA,aAAaE,KAAK,KAAK,MAAM;QAC/CD,gBAAgB;YACd,GAAGT,YAAY;YACf,CAACQ,aAAaG,KAAK,CAAC,EAAEH,aAAaE,KAAK;QAC1C;IACF;IAEA,MAAME,aAAS9G,mMAAAA,EAA8B2G,eAAeV;IAE5D,IAAIc;IACJ,IAAIN,QAAQ;QACVM,aAAa;YACXD;YACAf;QACF;IACF,OAAO;QACLgB,aAAa;YACXD;QACF;IACF;IAEA,MAAMtB,gBAAgB;QACpBb;QACAc;QACAC;QACAZ;QACA3B,OAAO4D;QACPrF,OAAO8E,kBACL,yCAAyC;SACxCQ,MAAM,CAAC,CAACC,IAAMA,MAAMnH,mLAAAA,EACpBoH,IAAI,CAAC;IACV;IAEA,IAAK,MAAMrF,OAAOyE,eAAgB;QAChC,MAAMa,YAAYb,cAAc,CAACzE,IAAI;QACrC,MAAMyF,yBACJ7B,eACA0B,WACAX,mBACAG,eACAZ,cACAjB,iBACAY,sBACAM,4BACAC;IAEJ;IAEA,IAAIvD,OAAO0E,IAAI,CAACd,gBAAgBnC,MAAM,KAAK,KAAKW,iBAAiB;QAC/D,0EAA0E;QAC1E,qCAAqC;QACrCW,cAAcJ,IAAI,CAACK,qBAAqBG,OAAO;IACjD;IAEA,OAAOJ;AACT;AAKA,MAAM8B,gBAAgB,CAACzF,QACrB,CAAC,CAAA,CAACA,SAAAA,OAAAA,KAAAA,IAAAA,MAAO0F,QAAQ;AACnB,MAAMC,WAAW,CAAC5D,WAA+B0D,cAAc1D,YAAAA,OAAAA,KAAAA,IAAAA,SAAU/B,KAAK;AAE9E,SAAS4F,oBACPjH,MAA4C,EAC5CoD,QAA0B;IAE1B,IAAIpD,QAAQ;QACV,IAAI,CAACgH,SAAShH,WAAWgH,SAAS5D,WAAW;YAC3CpD,OAAOqB,KAAK,GAAG+B,SAAS/B,KAAK;QAC/B;QACA,IAAI,CAACrB,OAAOkH,WAAW,IAAI9D,SAAS8D,WAAW,EAAE;YAC/ClH,OAAOkH,WAAW,GAAG9D,SAAS8D,WAAW;QAC3C;IACF;AACF;AAEA,6DAA6D;AAC7D,MAAMC,eAAe;IAAC;IAAS;IAAe;CAAS;AACvD,SAASC,oBACPhE,QAA0B,EAC1BiE,OAAY,EACZlH,cAA8B,EAC9BD,eAAgC;IAEhC,MAAM,EAAEK,SAAS,EAAEC,OAAO,EAAE,GAAG4C;IAE/B,IAAI7C,WAAW;QACb,kEAAkE;QAClE,wCAAwC;QACxC,IAAI+G,gBAIC,CAAC;QACN,MAAMC,aAAaP,SAASxG;QAC5B,MAAMgH,mBAAmBhH,WAAAA,OAAAA,KAAAA,IAAAA,QAAS0G,WAAW;QAC7C,MAAMO,cAAcjD,QAClBhE,CAAAA,WAAAA,OAAAA,KAAAA,IAAAA,QAASE,cAAc,CAAC,SAAA,KAAaF,QAAQI,MAAM;QAErD,IAAI,CAAC2G,YAAY;YACf,IAAIT,cAAcvG,UAAUc,KAAK,GAAG;gBAClCiG,cAAcjG,KAAK,GAAGd,UAAUc,KAAK;YACvC,OAAO,IAAI+B,SAAS/B,KAAK,IAAIyF,cAAc1D,SAAS/B,KAAK,GAAG;gBAC1DiG,cAAcjG,KAAK,GAAG+B,SAAS/B,KAAK;YACtC;QACF;QACA,IAAI,CAACmG,kBACHF,cAAcJ,WAAW,GACvB3G,UAAU2G,WAAW,IAAI9D,SAAS8D,WAAW,IAAI5D;QACrD,IAAI,CAACmE,aAAaH,cAAc1G,MAAM,GAAGL,UAAUK,MAAM;QAEzD,IAAIqB,OAAO0E,IAAI,CAACW,eAAe5D,MAAM,GAAG,GAAG;YACzC,MAAMgE,qBAAiBvJ,6MAAAA,EACrBmJ,eACAlE,SAASvC,YAAY,EACrBX,iBACAC,eAAeK,OAAO;YAExB,IAAI4C,SAAS5C,OAAO,EAAE;gBACpB4C,SAAS5C,OAAO,GAAGyB,OAAOC,MAAM,CAAC,CAAC,GAAGkB,SAAS5C,OAAO,EAAE;oBACrD,GAAI,CAAC+G,cAAc;wBAAElG,KAAK,EAAEqG,kBAAAA,OAAAA,KAAAA,IAAAA,eAAgBrG,KAAK;oBAAC,CAAC;oBACnD,GAAI,CAACmG,oBAAoB;wBACvBN,WAAW,EAAEQ,kBAAAA,OAAAA,KAAAA,IAAAA,eAAgBR,WAAW;oBAC1C,CAAC;oBACD,GAAI,CAACO,eAAe;wBAAE7G,MAAM,EAAE8G,kBAAAA,OAAAA,KAAAA,IAAAA,eAAgB9G,MAAM;oBAAC,CAAC;gBACxD;YACF,OAAO;gBACLwC,SAAS5C,OAAO,GAAGkH;YACrB;QACF;IACF;IAEA,0EAA0E;IAC1E,+CAA+C;IAC/CT,oBAAoB1G,WAAW6C;IAC/B6D,oBAAoBzG,SAAS4C;IAE7B,IAAIiE,SAAS;QACX,IAAI,CAACjE,SAAS3B,KAAK,EAAE;YACnB2B,SAAS3B,KAAK,GAAG;gBACfhC,MAAM,EAAE;gBACRa,OAAO,EAAE;YACX;QACF;QAEA8C,SAAS3B,KAAK,CAAChC,IAAI,CAACkI,OAAO,CAACN;IAC9B;IAEA,OAAOjE;AACT;AAIA,SAASwE,kBAAkBzD,aAA4B;IACrD,qEAAqE;IACrE,+EAA+E;IAC/E,UAAU;IACV,MAAM0D,sBAEF,EAAE;IACN,IAAK,IAAIC,IAAI,GAAGA,IAAI3D,cAAcT,MAAM,EAAEoE,IAAK;QAC7C,MAAMnD,iBAAiBR,aAAa,CAAC2D,EAAE,CAAC,EAAE;QAC1CC,UAAUF,qBAAqBlD;IACjC;IACA,OAAOkD;AACT;AAEA,SAASG,kBAAkBhD,aAA4B;IACrD,qEAAqE;IACrE,+EAA+E;IAC/E,UAAU;IACV,MAAM6C,sBAEF,EAAE;IACN,IAAK,IAAIC,IAAI,GAAGA,IAAI9C,cAActB,MAAM,EAAEoE,IAAK;QAC7C,MAAM5C,iBAAiBF,aAAa,CAAC8C,EAAE;QACvCC,UAAUF,qBAAqB3C;IACjC;IACA,OAAO2C;AACT;AAIA,SAASE,UACPF,mBAAsE,EACtEI,eAAyE;IAEzE,IAAI,OAAOA,oBAAoB,YAAY;QACzC,MAAMC,SAASD,gBACb,IAAItE,QAAqB,CAACwE,UAAYN,oBAAoBjD,IAAI,CAACuD;QAEjEN,oBAAoBjD,IAAI,CAACsD;QACzB,IAAIA,kBAAkBvE,SAAS;YAC7B,8CAA8C;YAC9C,+CAA+C;YAC/C,4CAA4C;YAC5C,oDAAoD;YACpDuE,OAAOE,KAAK,CAAC,CAACC;gBACZ,OAAO;oBACLC,aAAaD;gBACf;YACF;QACF;IACF,OAAO,IAAI,OAAOJ,oBAAoB,UAAU;QAC9CJ,oBAAoBjD,IAAI,CAACqD;IAC3B,OAAO;QACLJ,oBAAoBjD,IAAI,CAAC;IAC3B;AACF;AAEA,SAAS2D,qBAGPC,YAA0B,EAC1BC,mBAAkD;IAElD,uFAAuF;IACvF,qEAAqE;IACrE,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,WAAe;QAC1C,2EAA2E;QAC3E,4DAA4D;QAC5DJ,eACEK,QAAQ,yGACRC,UAAU,CAERD,QAAQ,8GACRE,aAAa,CAACP;IAEpB;IAEAC,oBAAoBD;AACtB;AAEO,eAAeQ,mBACpB/H,KAAa,EACbkD,aAA4B,EAC5B9D,QAAyB,EACzBH,eAAgC;IAEhC,IAAI+I,uBAAmBjL,sMAAAA;IAEvB,IAAImC,iBAAiC;QACnCkB,OAAO;QACPb,SAAS;QACTD,WAAW;IACb;IAEA,MAAMW,aAAa;QACjBiB,UAAU,IAAI+G;IAChB;IAEA,IAAI7B;IAEJ,kDAAkD;IAClD,+EAA+E;IAC/E,MAAMjH,yBAAyB;QAC7BX,MAAM,EAAE;QACRa,OAAO,EAAE;IACX;IAEA,MAAMuH,sBAAsBD,kBAAkBzD;IAC9C,IAAIgF,cAAc;IAElB,IAAK,IAAIrB,IAAI,GAAGA,IAAI3D,cAAcT,MAAM,EAAEoE,IAAK;YAIrB7H;QAHxB,MAAMA,sBAAsBkE,aAAa,CAAC2D,EAAE,CAAC,EAAE;QAC/C,yEAAyE;QACzE,qEAAqE;QACrE,IAAIA,KAAK,KAAKtI,UAAUS,uBAAAA,OAAAA,KAAAA,IAAAA,CAAAA,4BAAAA,oBAAqBR,IAAI,KAAA,OAAA,KAAA,IAAzBQ,yBAA2B,CAAC,EAAE,GAAG;gBACvCA;YAAhB,MAAMmJ,UAAUnJ,uBAAAA,OAAAA,KAAAA,IAAAA,CAAAA,6BAAAA,oBAAqBR,IAAI,KAAA,OAAA,KAAA,IAAzBQ,2BAA2BoJ,KAAK;YAChD,IAAIvB,MAAM,GAAGT,UAAU+B;QACzB;QAEA,IAAIE,kBAAkBzB,mBAAmB,CAACsB,cAAc;QACxD,IAAI,OAAOG,oBAAoB,YAAY;YACzC,kDAAkD;YAClD,qDAAqD;YACrD,4BAA4B;YAC5B,MAAMC,wBAAwBD;YAC9B,sDAAsD;YACtD,iBAAiB;YACjBA,kBAAkBzB,mBAAmB,CAACsB,cAAc;YAEpDZ,qBAAqBU,kBAAkBM;QACzC;QACA,wDAAwD;QAExD,IAAInG;QACJ,IAAIoG,cAAcF,kBAAkB;YAClClG,WAAW,MAAMkG;QACnB,OAAO;YACLlG,WAAWkG;QACb;QAEAL,mBAAmB,MAAMjI,cAAcC,OAAOZ,UAAU;YACtDL,QAAQiJ;YACRlJ,QAAQqD;YACRlD;YACAD;YACAE;YACAe;YACAd;QACF;QAEA,gFAAgF;QAChF,kDAAkD;QAClD,IAAI0H,IAAI3D,cAAcT,MAAM,GAAG,GAAG;gBAEvBuF,yBACIA,6BACFA;YAHX9I,iBAAiB;gBACfkB,OAAO4H,CAAAA,CAAAA,0BAAAA,iBAAiB5H,KAAK,KAAA,OAAA,KAAA,IAAtB4H,wBAAwBQ,QAAQ,KAAI;gBAC3ClJ,WAAW0I,CAAAA,CAAAA,8BAAAA,iBAAiB1I,SAAS,KAAA,OAAA,KAAA,IAA1B0I,4BAA4B5H,KAAK,CAACoI,QAAQ,KAAI;gBACzDjJ,SAASyI,CAAAA,CAAAA,4BAAAA,iBAAiBzI,OAAO,KAAA,OAAA,KAAA,IAAxByI,0BAA0B5H,KAAK,CAACoI,QAAQ,KAAI;YACvD;QACF;IACF;IAEA,IACErJ,uBAAuBX,IAAI,CAACiE,MAAM,GAAG,KACrCtD,uBAAuBE,KAAK,CAACoD,MAAM,GAAG,GACtC;QACA,IAAI,CAACuF,iBAAiBxH,KAAK,EAAE;YAC3BwH,iBAAiBxH,KAAK,GAAG;gBACvBhC,MAAM,EAAE;gBACRa,OAAO,EAAE;YACX;YACA,IAAIF,uBAAuBX,IAAI,CAACiE,MAAM,GAAG,GAAG;gBAC1CuF,iBAAiBxH,KAAK,CAAChC,IAAI,CAACkI,OAAO,IAAIvH,uBAAuBX,IAAI;YACpE;YACA,IAAIW,uBAAuBE,KAAK,CAACoD,MAAM,GAAG,GAAG;gBAC3CuF,iBAAiBxH,KAAK,CAACnB,KAAK,CAACqH,OAAO,IAAIvH,uBAAuBE,KAAK;YACtE;QACF;IACF;IAEA,qGAAqG;IACrG,IAAIY,WAAWiB,QAAQ,CAACuH,IAAI,GAAG,GAAG;QAChC,KAAK,MAAMC,WAAWzI,WAAWiB,QAAQ,CAAE;YACzC7C,IAAIsK,iKAAI,CAACD;QACX;IACF;IAEA,OAAOvC,oBACL6B,kBACA5B,SACAlH,gBACAD;AAEJ;AAEO,eAAe2J,mBACpB7E,aAA4B;IAE5B,MAAM8E,uBAAqC7L,sMAAAA;IAE3C,MAAM4J,sBAAsBG,kBAAkBhD;IAC9C,IAAI8C,IAAI;IAER,MAAOA,IAAID,oBAAoBnE,MAAM,CAAE;QACrC,IAAIqG,kBAAkBlC,mBAAmB,CAACC,IAAI;QAC9C,IAAI,OAAOiC,oBAAoB,YAAY;YACzC,kDAAkD;YAClD,qDAAqD;YACrD,4BAA4B;YAC5B,MAAMC,wBAAwBD;YAC9B,sDAAsD;YACtD,iBAAiB;YACjBA,kBAAkBlC,mBAAmB,CAACC,IAAI;YAE1CS,qBAAqBuB,kBAAkBE;QACzC;QACA,wDAAwD;QAExD,IAAI/G;QACJ,IAAIuG,cAAcO,kBAAkB;YAClC9G,WAAW,MAAM8G;QACnB,OAAO;YACL9G,WAAW8G;QACb;QAEA1H,cAAc;YACZrC,QAAQ8J;YACR/J,QAAQkD;QACV;IACF;IACA,OAAO6G;AACT;AAGO,eAAeG,gBACpB/F,IAAgB,EAChB7D,QAAyB,EACzBiF,YAAqC,EACrCjB,eAA8C,EAC9CkB,0BAAsD,EACtDC,SAAoB,EACpBtF,eAAgC;IAEhC,MAAMiE,gBAAgB,MAAMkB,qBAC1BnB,MACAoB,cACAjB,iBACAkB,4BACAC;IAEF,OAAOwD,mBACLxD,UAAUvE,KAAK,EACfkD,eACA9D,UACAH;AAEJ;AAGO,eAAegK,gBACpBhG,IAAgB,EAChBoB,YAAqC,EACrCjB,eAA8C,EAC9CkB,0BAAsD,EACtDC,SAAoB;IAEpB,MAAMR,gBAAgB,MAAM4B,qBAC1B1C,MACAoB,cACAjB,iBACAkB,4BACAC;IAEF,OAAOqE,mBAAmB7E;AAC5B;AAEA,SAASwE,cACPrD,KAA+B;IAE/B,OACE,OAAOA,UAAU,YACjBA,UAAU,QACV,OAAQA,MAA+BgE,IAAI,KAAK;AAEpD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12407</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/http-access-fallback/http-access-fallback.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const HTTPAccessErrorStatus = {</span><span class="s3">\n  </span><span class="s1">NOT_FOUND: 404,</span><span class="s3">\n  </span><span class="s1">FORBIDDEN: 403,</span><span class="s3">\n  </span><span class="s1">UNAUTHORIZED: 401,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatus))</span><span class="s3">\n\n</span><span class="s1">export const HTTP_ERROR_FALLBACK_ERROR_CODE = 'NEXT_HTTP_ERROR_FALLBACK'</span><span class="s3">\n\n</span><span class="s1">export type HTTPAccessFallbackError = Error &amp; {</span><span class="s3">\n  </span><span class="s1">digest: `${typeof HTTP_ERROR_FALLBACK_ERROR_CODE};${string}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks an error to determine if it's an error generated by</span><span class="s3">\n </span><span class="s1">* the HTTP navigation APIs `notFound()`, `forbidden()` or `unauthorized()`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param error the error that may reference a HTTP access error</span><span class="s3">\n </span><span class="s1">* @returns true if the error is a HTTP access error</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isHTTPAccessFallbackError(</span><span class="s3">\n  </span><span class="s1">error: unknown</span><span class="s3">\n</span><span class="s1">): error is HTTPAccessFallbackError {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof error !== 'object' ||</span><span class="s3">\n    </span><span class="s1">error === null ||</span><span class="s3">\n    </span><span class="s1">!('digest' in error) ||</span><span class="s3">\n    </span><span class="s1">typeof error.digest !== 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const [prefix, httpStatus] = error.digest.split(';')</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">prefix === HTTP_ERROR_FALLBACK_ERROR_CODE &amp;&amp;</span><span class="s3">\n    </span><span class="s1">ALLOWED_CODES.has(Number(httpStatus))</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getAccessFallbackHTTPStatus(</span><span class="s3">\n  </span><span class="s1">error: HTTPAccessFallbackError</span><span class="s3">\n</span><span class="s1">): number {</span><span class="s3">\n  </span><span class="s1">const httpStatus = error.digest.split(';')[1]</span><span class="s3">\n  </span><span class="s1">return Number(httpStatus)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getAccessFallbackErrorTypeByStatus(</span><span class="s3">\n  </span><span class="s1">status: number</span><span class="s3">\n</span><span class="s1">): 'not-found' | 'forbidden' | 'unauthorized' | undefined {</span><span class="s3">\n  </span><span class="s1">switch (status) {</span><span class="s3">\n    </span><span class="s1">case 401:</span><span class="s3">\n      </span><span class="s1">return 'unauthorized'</span><span class="s3">\n    </span><span class="s1">case 403:</span><span class="s3">\n      </span><span class="s1">return 'forbidden'</span><span class="s3">\n    </span><span class="s1">case 404:</span><span class="s3">\n      </span><span class="s1">return 'not-found'</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;HTTPAccessErrorStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;NOT_FOUND&quot;</span><span class="s0">,</span><span class="s1">&quot;FORBIDDEN&quot;</span><span class="s0">,</span><span class="s1">&quot;UNAUTHORIZED&quot;</span><span class="s0">,</span><span class="s1">&quot;ALLOWED_CODES&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTP_ERROR_FALLBACK_ERROR_CODE&quot;</span><span class="s0">,</span><span class="s1">&quot;isHTTPAccessFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;httpStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;getAccessFallbackHTTPStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;getAccessFallbackErrorTypeByStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;AAAO,MAAMA,wBAAwB;IACnCC,WAAW;IACXC,WAAW;IACXC,cAAc;AAChB,EAAC;AAED,MAAMC,gBAAgB,IAAIC,IAAIC,OAAOC,MAAM,CAACP;AAErC,MAAMQ,iCAAiC,2BAA0B;AAajE,SAASC,0BACdC,KAAc;IAEd,IACE,OAAOA,UAAU,YACjBA,UAAU,QACV,CAAE,CAAA,YAAYA,KAAI,KAClB,OAAOA,MAAMC,MAAM,KAAK,UACxB;QACA,OAAO;IACT;IACA,MAAM,CAACC,QAAQC,WAAW,GAAGH,MAAMC,MAAM,CAACG,KAAK,CAAC;IAEhD,OACEF,WAAWJ,kCACXJ,cAAcW,GAAG,CAACC,OAAOH;AAE7B;AAEO,SAASI,4BACdP,KAA8B;IAE9B,MAAMG,aAAaH,MAAMC,MAAM,CAACG,KAAK,CAAC,IAAI,CAAC,EAAE;IAC7C,OAAOE,OAAOH;AAChB;AAEO,SAASK,mCACdC,MAAc;IAEd,OAAQA;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE;IACJ;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12452</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/metadata/async-metadata.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12458</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/client/components/metadata/async-metadata.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12465</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/metadata/async-metadata.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import { Suspense, use } from 'react'</span><span class="s3">\n</span><span class="s1">import type { StreamingMetadataResolvedState } from './types'</span><span class="s3">\n\n</span><span class="s1">function MetadataOutlet({</span><span class="s3">\n  </span><span class="s1">promise,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">promise: Promise&lt;StreamingMetadataResolvedState&gt;</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">const { error, digest } = use(promise)</span><span class="s3">\n  </span><span class="s1">if (error) {</span><span class="s3">\n    </span><span class="s1">if (digest) {</span><span class="s3">\n      </span><span class="s1">// The error will lose its original digest after passing from server layer to client layer</span><span class="s3">\n      </span><span class="s1">// We recover the digest property here to override the React created one if original digest exists.</span><span class="s3">\n      </span><span class="s1">;(error as any).digest = digest</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">throw error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function AsyncMetadataOutlet({</span><span class="s3">\n  </span><span class="s1">promise,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">promise: Promise&lt;StreamingMetadataResolvedState&gt;</span><span class="s3">\n</span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;Suspense fallback={null}&gt;</span><span class="s3">\n      </span><span class="s1">&lt;MetadataOutlet promise={promise} /&gt;</span><span class="s3">\n    </span><span class="s1">&lt;/Suspense&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;Suspense&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataOutlet&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;AsyncMetadataOutlet&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12473</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/router-utils/is-postpone.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const REACT_POSTPONE_TYPE: symbol = Symbol.for('react.postpone')</span><span class="s3">\n\n</span><span class="s1">export function isPostpone(error: any): boolean {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">typeof error === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error.$$typeof === REACT_POSTPONE_TYPE</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;REACT_POSTPONE_TYPE&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;isPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;$$typeof&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,MAAMA,sBAA8BC,OAAOC,GAAG,CAAC;AAExC,SAASC,WAAWC,KAAU;IACnC,OACE,OAAOA,UAAU,YACjBA,UAAU,QACVA,MAAMC,QAAQ,KAAKL;AAEvB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12485</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/request/pathname.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { WorkStore } from '../app-render/work-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">delayUntilRuntimeStage,</span><span class="s3">\n  </span><span class="s1">postponeWithTracking,</span><span class="s3">\n  </span><span class="s1">type DynamicTrackingState,</span><span class="s3">\n</span><span class="s1">} from '../app-render/dynamic-rendering'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore,</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n  </span><span class="s1">type StaticPrerenderStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { makeHangingPromise } from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n\n</span><span class="s1">export function createServerPathnameForMetadata(</span><span class="s3">\n  </span><span class="s1">underlyingPathname: string,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;string&gt; {</span><span class="s3">\n  </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n  </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n    </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n      </span><span class="s1">case 'prerender':</span><span class="s3">\n      </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n      </span><span class="s1">case 'prerender-legacy': {</span><span class="s3">\n        </span><span class="s1">return createPrerenderPathname(</span><span class="s3">\n          </span><span class="s1">underlyingPathname,</span><span class="s3">\n          </span><span class="s1">workStore,</span><span class="s3">\n          </span><span class="s1">workUnitStore</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">case 'cache':</span><span class="s3">\n      </span><span class="s1">case 'private-cache':</span><span class="s3">\n      </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'createServerPathnameForMetadata should not be called in cache contexts.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n        </span><span class="s1">return delayUntilRuntimeStage(</span><span class="s3">\n          </span><span class="s1">workUnitStore,</span><span class="s3">\n          </span><span class="s1">createRenderPathname(underlyingPathname)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">case 'request':</span><span class="s3">\n        </span><span class="s1">return createRenderPathname(underlyingPathname)</span><span class="s3">\n      </span><span class="s1">default:</span><span class="s3">\n        </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">throwInvariantForMissingStore()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createPrerenderPathname(</span><span class="s3">\n  </span><span class="s1">underlyingPathname: string,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">prerenderStore: StaticPrerenderStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;string&gt; {</span><span class="s3">\n  </span><span class="s1">switch (prerenderStore.type) {</span><span class="s3">\n    </span><span class="s1">case 'prerender-client':</span><span class="s3">\n      </span><span class="s1">throw new InvariantError(</span><span class="s3">\n        </span><span class="s1">'createPrerenderPathname was called inside a client component scope.'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">case 'prerender': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams &amp;&amp; fallbackParams.size &gt; 0) {</span><span class="s3">\n        </span><span class="s1">return makeHangingPromise&lt;string&gt;(</span><span class="s3">\n          </span><span class="s1">prerenderStore.renderSignal,</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">'`pathname`'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-ppr': {</span><span class="s3">\n      </span><span class="s1">const fallbackParams = prerenderStore.fallbackRouteParams</span><span class="s3">\n      </span><span class="s1">if (fallbackParams &amp;&amp; fallbackParams.size &gt; 0) {</span><span class="s3">\n        </span><span class="s1">return makeErroringPathname(workStore, prerenderStore.dynamicTracking)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">prerenderStore satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We don't have any fallback params so we have an entirely static safe params object</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(underlyingPathname)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function makeErroringPathname&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">dynamicTracking: null | DynamicTrackingState</span><span class="s3">\n</span><span class="s1">): Promise&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">let reject: null | ((reason: unknown) =&gt; void) = null</span><span class="s3">\n  </span><span class="s1">const promise = new Promise&lt;T&gt;((_, re) =&gt; {</span><span class="s3">\n    </span><span class="s1">reject = re</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const originalThen = promise.then.bind(promise)</span><span class="s3">\n\n  </span><span class="s1">// We instrument .then so that we can generate a tracking event only if you actually</span><span class="s3">\n  </span><span class="s1">// await this promise, not just that it is created.</span><span class="s3">\n  </span><span class="s1">promise.then = (onfulfilled, onrejected) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (reject) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">postponeWithTracking(</span><span class="s3">\n          </span><span class="s1">workStore.route,</span><span class="s3">\n          </span><span class="s1">'metadata relative url resolving',</span><span class="s3">\n          </span><span class="s1">dynamicTracking</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">} catch (error) {</span><span class="s3">\n        </span><span class="s1">reject(error)</span><span class="s3">\n        </span><span class="s1">reject = null</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return originalThen(onfulfilled, onrejected)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We wrap in a noop proxy to trick the runtime into thinking it</span><span class="s3">\n  </span><span class="s1">// isn't a native promise (it's not really). This is so that awaiting</span><span class="s3">\n  </span><span class="s1">// the promise will call the `then` property triggering the lazy postpone</span><span class="s3">\n  </span><span class="s1">return new Proxy(promise, {})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createRenderPathname(underlyingPathname: string): Promise&lt;string&gt; {</span><span class="s3">\n  </span><span class="s1">return Promise.resolve(underlyingPathname)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;delayUntilRuntimeStage&quot;</span><span class="s0">,</span><span class="s1">&quot;postponeWithTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;throwInvariantForMissingStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerPathnameForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;underlyingPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;createRenderPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStore&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackParams&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;makeErroringPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicTracking&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;originalThen&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;onfulfilled&quot;</span><span class="s0">,</span><span class="s1">&quot;onrejected&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;Proxy&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAEA,SACEA,sBAAsB,EACtBC,oBAAoB,QAEf,kCAAiC;AAExC,SACEC,6BAA6B,EAC7BC,oBAAoB,QAEf,iDAAgD;AACvD,SAASC,kBAAkB,QAAQ,6BAA4B;AAC/D,SAASC,cAAc,QAAQ,mCAAkC;;;;;AAE1D,SAASC,gCACdC,kBAA0B,EAC1BC,SAAoB;IAEpB,MAAMC,gBAAgBN,2SAAAA,CAAqBO,QAAQ;IACnD,IAAID,eAAe;QACjB,OAAQA,cAAcE,IAAI;YACxB,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;gBAAoB;oBACvB,OAAOC,wBACLL,oBACAC,WACAC;gBAEJ;YACA,KAAK;YACL,KAAK;YACL,KAAK;gBACH,MAAM,OAAA,cAEL,CAFK,IAAIJ,4LAAAA,CACR,4EADI,qBAAA;2BAAA;gCAAA;kCAAA;gBAEN;YAEF,KAAK;gBACH,WAAOL,gNAAAA,EACLS,eACAI,qBAAqBN;YAEzB,KAAK;gBACH,OAAOM,qBAAqBN;YAC9B;gBACEE;QACJ;IACF;QACAP,oTAAAA;AACF;AAEA,SAASU,wBACPL,kBAA0B,EAC1BC,SAAoB,EACpBM,cAAoC;IAEpC,OAAQA,eAAeH,IAAI;QACzB,KAAK;YACH,MAAM,OAAA,cAEL,CAFK,IAAIN,4LAAAA,CACR,wEADI,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF,KAAK;YAAa;gBAChB,MAAMU,iBAAiBD,eAAeE,mBAAmB;gBACzD,IAAID,kBAAkBA,eAAeE,IAAI,GAAG,GAAG;oBAC7C,WAAOb,oMAAAA,EACLU,eAAeI,YAAY,EAC3BV,UAAUW,KAAK,EACf;gBAEJ;gBACA;YACF;QACA,KAAK;YAAiB;gBACpB,MAAMJ,iBAAiBD,eAAeE,mBAAmB;gBACzD,IAAID,kBAAkBA,eAAeE,IAAI,GAAG,GAAG;oBAC7C,OAAOG,qBAAqBZ,WAAWM,eAAeO,eAAe;gBACvE;gBACA;YACF;QACA,KAAK;YACH;QACF;YACEP;IACJ;IAEA,qFAAqF;IACrF,OAAOQ,QAAQC,OAAO,CAAChB;AACzB;AAEA,SAASa,qBACPZ,SAAoB,EACpBa,eAA4C;IAE5C,IAAIG,SAA6C;IACjD,MAAMC,UAAU,IAAIH,QAAW,CAACI,GAAGC;QACjCH,SAASG;IACX;IAEA,MAAMC,eAAeH,QAAQI,IAAI,CAACC,IAAI,CAACL;IAEvC,oFAAoF;IACpF,mDAAmD;IACnDA,QAAQI,IAAI,GAAG,CAACE,aAAaC;QAC3B,IAAIR,QAAQ;YACV,IAAI;oBACFvB,8MAAAA,EACEO,UAAUW,KAAK,EACf,mCACAE;YAEJ,EAAE,OAAOY,OAAO;gBACdT,OAAOS;gBACPT,SAAS;YACX;QACF;QACA,OAAOI,aAAaG,aAAaC;IACnC;IAEA,gEAAgE;IAChE,qEAAqE;IACrE,yEAAyE;IACzE,OAAO,IAAIE,MAAMT,SAAS,CAAC;AAC7B;AAEA,SAASZ,qBAAqBN,kBAA0B;IACtD,OAAOe,QAAQC,OAAO,CAAChB;AACzB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12589</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/metadata/metadata.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import React, { Suspense, cache, cloneElement } from 'react'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { GetDynamicParamFromSegment } from '../../server/app-render/app-render'</span><span class="s3">\n</span><span class="s1">import type { LoaderTree } from '../../server/lib/app-dir-module'</span><span class="s3">\n</span><span class="s1">import type { StreamingMetadataResolvedState } from '../../client/components/metadata/types'</span><span class="s3">\n</span><span class="s1">import type { SearchParams } from '../../server/request/search-params'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">AppleWebAppMeta,</span><span class="s3">\n  </span><span class="s1">FormatDetectionMeta,</span><span class="s3">\n  </span><span class="s1">ItunesMeta,</span><span class="s3">\n  </span><span class="s1">BasicMeta,</span><span class="s3">\n  </span><span class="s1">ViewportMeta,</span><span class="s3">\n  </span><span class="s1">VerificationMeta,</span><span class="s3">\n  </span><span class="s1">FacebookMeta,</span><span class="s3">\n  </span><span class="s1">PinterestMeta,</span><span class="s3">\n</span><span class="s1">} from './generate/basic'</span><span class="s3">\n</span><span class="s1">import { AlternatesMetadata } from './generate/alternate'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">OpenGraphMetadata,</span><span class="s3">\n  </span><span class="s1">TwitterMetadata,</span><span class="s3">\n  </span><span class="s1">AppLinksMeta,</span><span class="s3">\n</span><span class="s1">} from './generate/opengraph'</span><span class="s3">\n</span><span class="s1">import { IconsMetadata } from './generate/icons'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">type MetadataErrorType,</span><span class="s3">\n  </span><span class="s1">resolveMetadata,</span><span class="s3">\n  </span><span class="s1">resolveViewport,</span><span class="s3">\n</span><span class="s1">} from './resolve-metadata'</span><span class="s3">\n</span><span class="s1">import { MetaFilter } from './generate/meta'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">ResolvedMetadata,</span><span class="s3">\n  </span><span class="s1">ResolvedViewport,</span><span class="s3">\n</span><span class="s1">} from './types/metadata-interface'</span><span class="s3">\n</span><span class="s1">import { isHTTPAccessFallbackError } from '../../client/components/http-access-fallback/http-access-fallback'</span><span class="s3">\n</span><span class="s1">import type { MetadataContext } from './types/resolvers'</span><span class="s3">\n</span><span class="s1">import type { WorkStore } from '../../server/app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">METADATA_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">VIEWPORT_BOUNDARY_NAME,</span><span class="s3">\n</span><span class="s1">} from '../framework/boundary-constants'</span><span class="s3">\n</span><span class="s1">import { AsyncMetadataOutlet } from '../../client/components/metadata/async-metadata'</span><span class="s3">\n</span><span class="s1">import { isPostpone } from '../../server/lib/router-utils/is-postpone'</span><span class="s3">\n</span><span class="s1">import { createServerSearchParamsForMetadata } from '../../server/request/search-params'</span><span class="s3">\n</span><span class="s1">import { createServerPathnameForMetadata } from '../../server/request/pathname'</span><span class="s3">\n\n</span><span class="s1">// Use a promise to share the status of the metadata resolving,</span><span class="s3">\n</span><span class="s1">// returning two components `MetadataTree` and `MetadataOutlet`</span><span class="s3">\n</span><span class="s1">// `MetadataTree` is the one that will be rendered at first in the content sequence for metadata tags.</span><span class="s3">\n</span><span class="s1">// `MetadataOutlet` is the one that will be rendered under error boundaries for metadata resolving errors.</span><span class="s3">\n</span><span class="s1">// In this way we can let the metadata tags always render successfully,</span><span class="s3">\n</span><span class="s1">// and the error will be caught by the error boundary and trigger fallbacks.</span><span class="s3">\n</span><span class="s1">export function createMetadataComponents({</span><span class="s3">\n  </span><span class="s1">tree,</span><span class="s3">\n  </span><span class="s1">pathname,</span><span class="s3">\n  </span><span class="s1">parsedQuery,</span><span class="s3">\n  </span><span class="s1">metadataContext,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">appUsingSizeAdjustment,</span><span class="s3">\n  </span><span class="s1">errorType,</span><span class="s3">\n  </span><span class="s1">workStore,</span><span class="s3">\n  </span><span class="s1">MetadataBoundary,</span><span class="s3">\n  </span><span class="s1">ViewportBoundary,</span><span class="s3">\n  </span><span class="s1">serveStreamingMetadata,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">parsedQuery: SearchParams</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment</span><span class="s3">\n  </span><span class="s1">appUsingSizeAdjustment: boolean</span><span class="s3">\n  </span><span class="s1">errorType?: MetadataErrorType | 'redirect'</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n  </span><span class="s1">MetadataBoundary: (props: { children: React.ReactNode }) =&gt; React.ReactNode</span><span class="s3">\n  </span><span class="s1">ViewportBoundary: (props: { children: React.ReactNode }) =&gt; React.ReactNode</span><span class="s3">\n  </span><span class="s1">serveStreamingMetadata: boolean</span><span class="s3">\n</span><span class="s1">}): {</span><span class="s3">\n  </span><span class="s1">MetadataTree: React.ComponentType</span><span class="s3">\n  </span><span class="s1">ViewportTree: React.ComponentType</span><span class="s3">\n  </span><span class="s1">getMetadataReady: () =&gt; Promise&lt;void&gt;</span><span class="s3">\n  </span><span class="s1">getViewportReady: () =&gt; Promise&lt;void&gt;</span><span class="s3">\n  </span><span class="s1">StreamingMetadataOutlet: React.ComponentType | null</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">const searchParams = createServerSearchParamsForMetadata(</span><span class="s3">\n    </span><span class="s1">parsedQuery,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const pathnameForMetadata = createServerPathnameForMetadata(</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">function ViewportTree() {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;&gt;</span><span class="s3">\n        </span><span class="s1">&lt;ViewportBoundary&gt;</span><span class="s3">\n          </span><span class="s1">&lt;Viewport /&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/ViewportBoundary&gt;</span><span class="s3">\n        </span><span class="s1">{/* This meta tag is for next/font which is still required to be blocking. */}</span><span class="s3">\n        </span><span class="s1">{appUsingSizeAdjustment ? (</span><span class="s3">\n          </span><span class="s1">&lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">next-size-adjust</span><span class="s3">\&quot; </span><span class="s1">content=</span><span class="s3">\&quot;\&quot; </span><span class="s1">/&gt;</span><span class="s3">\n        </span><span class="s1">) : null}</span><span class="s3">\n      </span><span class="s1">&lt;/&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function MetadataTree() {</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;MetadataBoundary&gt;</span><span class="s3">\n        </span><span class="s1">&lt;Metadata /&gt;</span><span class="s3">\n      </span><span class="s1">&lt;/MetadataBoundary&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function viewport() {</span><span class="s3">\n    </span><span class="s1">return getResolvedViewport(</span><span class="s3">\n      </span><span class="s1">tree,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n      </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n      </span><span class="s1">workStore,</span><span class="s3">\n      </span><span class="s1">errorType</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function Viewport() {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">return await viewport()</span><span class="s3">\n    </span><span class="s1">} catch (error) {</span><span class="s3">\n      </span><span class="s1">if (!errorType &amp;&amp; isHTTPAccessFallbackError(error)) {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">return await getNotFoundViewport(</span><span class="s3">\n            </span><span class="s1">tree,</span><span class="s3">\n            </span><span class="s1">searchParams,</span><span class="s3">\n            </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n            </span><span class="s1">workStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">} catch {}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">// We don't actually want to error in this component. We will</span><span class="s3">\n      </span><span class="s1">// also error in the MetadataOutlet which causes the error to</span><span class="s3">\n      </span><span class="s1">// bubble from the right position in the page to be caught by the</span><span class="s3">\n      </span><span class="s1">// appropriate boundaries</span><span class="s3">\n      </span><span class="s1">return null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">Viewport.displayName = VIEWPORT_BOUNDARY_NAME</span><span class="s3">\n\n  </span><span class="s1">function metadata() {</span><span class="s3">\n    </span><span class="s1">return getResolvedMetadata(</span><span class="s3">\n      </span><span class="s1">tree,</span><span class="s3">\n      </span><span class="s1">pathnameForMetadata,</span><span class="s3">\n      </span><span class="s1">searchParams,</span><span class="s3">\n      </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n      </span><span class="s1">metadataContext,</span><span class="s3">\n      </span><span class="s1">workStore,</span><span class="s3">\n      </span><span class="s1">errorType</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function resolveFinalMetadata(): Promise&lt;StreamingMetadataResolvedState&gt; {</span><span class="s3">\n    </span><span class="s1">let result: React.ReactNode</span><span class="s3">\n    </span><span class="s1">let error = null</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">result = await metadata()</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">metadata: result,</span><span class="s3">\n        </span><span class="s1">error: null,</span><span class="s3">\n        </span><span class="s1">digest: undefined,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (metadataErr) {</span><span class="s3">\n      </span><span class="s1">error = metadataErr</span><span class="s3">\n      </span><span class="s1">if (!errorType &amp;&amp; isHTTPAccessFallbackError(metadataErr)) {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">result = await getNotFoundMetadata(</span><span class="s3">\n            </span><span class="s1">tree,</span><span class="s3">\n            </span><span class="s1">pathnameForMetadata,</span><span class="s3">\n            </span><span class="s1">searchParams,</span><span class="s3">\n            </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n            </span><span class="s1">metadataContext,</span><span class="s3">\n            </span><span class="s1">workStore</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return {</span><span class="s3">\n            </span><span class="s1">metadata: result,</span><span class="s3">\n            </span><span class="s1">error,</span><span class="s3">\n            </span><span class="s1">digest: (error as any)?.digest,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} catch (notFoundMetadataErr) {</span><span class="s3">\n          </span><span class="s1">error = notFoundMetadataErr</span><span class="s3">\n          </span><span class="s1">// In PPR rendering we still need to throw the postpone error.</span><span class="s3">\n          </span><span class="s1">// If metadata is postponed, React needs to be aware of the location of error.</span><span class="s3">\n          </span><span class="s1">if (serveStreamingMetadata &amp;&amp; isPostpone(notFoundMetadataErr)) {</span><span class="s3">\n            </span><span class="s1">throw notFoundMetadataErr</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">// In PPR rendering we still need to throw the postpone error.</span><span class="s3">\n      </span><span class="s1">// If metadata is postponed, React needs to be aware of the location of error.</span><span class="s3">\n      </span><span class="s1">if (serveStreamingMetadata &amp;&amp; isPostpone(metadataErr)) {</span><span class="s3">\n        </span><span class="s1">throw metadataErr</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">// We don't actually want to error in this component. We will</span><span class="s3">\n      </span><span class="s1">// also error in the MetadataOutlet which causes the error to</span><span class="s3">\n      </span><span class="s1">// bubble from the right position in the page to be caught by the</span><span class="s3">\n      </span><span class="s1">// appropriate boundaries</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">metadata: result,</span><span class="s3">\n        </span><span class="s1">error,</span><span class="s3">\n        </span><span class="s1">digest: (error as any)?.digest,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function Metadata() {</span><span class="s3">\n    </span><span class="s1">if (!serveStreamingMetadata) {</span><span class="s3">\n      </span><span class="s1">return &lt;MetadataResolver /&gt;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return (</span><span class="s3">\n      </span><span class="s1">&lt;div hidden&gt;</span><span class="s3">\n        </span><span class="s1">&lt;Suspense fallback={null}&gt;</span><span class="s3">\n          </span><span class="s1">&lt;MetadataResolver /&gt;</span><span class="s3">\n        </span><span class="s1">&lt;/Suspense&gt;</span><span class="s3">\n      </span><span class="s1">&lt;/div&gt;</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function MetadataResolver() {</span><span class="s3">\n    </span><span class="s1">const metadataState = await resolveFinalMetadata()</span><span class="s3">\n    </span><span class="s1">return metadataState.metadata</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">Metadata.displayName = METADATA_BOUNDARY_NAME</span><span class="s3">\n\n  </span><span class="s1">async function getMetadataReady(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">// Only warm up metadata() call when it's blocking metadata,</span><span class="s3">\n    </span><span class="s1">// otherwise it will be fully managed by AsyncMetadata component.</span><span class="s3">\n    </span><span class="s1">if (!serveStreamingMetadata) {</span><span class="s3">\n      </span><span class="s1">await metadata()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function getViewportReady(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">await viewport()</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function StreamingMetadataOutletImpl() {</span><span class="s3">\n    </span><span class="s1">return &lt;AsyncMetadataOutlet promise={resolveFinalMetadata()} /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const StreamingMetadataOutlet = serveStreamingMetadata</span><span class="s3">\n    </span><span class="s1">? StreamingMetadataOutletImpl</span><span class="s3">\n    </span><span class="s1">: null</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">ViewportTree,</span><span class="s3">\n    </span><span class="s1">MetadataTree,</span><span class="s3">\n    </span><span class="s1">getViewportReady,</span><span class="s3">\n    </span><span class="s1">getMetadataReady,</span><span class="s3">\n    </span><span class="s1">StreamingMetadataOutlet,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const getResolvedMetadata = cache(getResolvedMetadataImpl)</span><span class="s3">\n</span><span class="s1">async function getResolvedMetadataImpl(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">errorType?: MetadataErrorType | 'redirect'</span><span class="s3">\n</span><span class="s1">): Promise&lt;React.ReactNode&gt; {</span><span class="s3">\n  </span><span class="s1">const errorConvention = errorType === 'redirect' ? undefined : errorType</span><span class="s3">\n  </span><span class="s1">return renderMetadata(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">metadataContext,</span><span class="s3">\n    </span><span class="s1">workStore,</span><span class="s3">\n    </span><span class="s1">errorConvention</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const getNotFoundMetadata = cache(getNotFoundMetadataImpl)</span><span class="s3">\n</span><span class="s1">async function getNotFoundMetadataImpl(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;React.ReactNode&gt; {</span><span class="s3">\n  </span><span class="s1">const notFoundErrorConvention = 'not-found'</span><span class="s3">\n  </span><span class="s1">return renderMetadata(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">metadataContext,</span><span class="s3">\n    </span><span class="s1">workStore,</span><span class="s3">\n    </span><span class="s1">notFoundErrorConvention</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const getResolvedViewport = cache(getResolvedViewportImpl)</span><span class="s3">\n</span><span class="s1">async function getResolvedViewportImpl(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">errorType?: MetadataErrorType | 'redirect'</span><span class="s3">\n</span><span class="s1">): Promise&lt;React.ReactNode&gt; {</span><span class="s3">\n  </span><span class="s1">const errorConvention = errorType === 'redirect' ? undefined : errorType</span><span class="s3">\n  </span><span class="s1">return renderViewport(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore,</span><span class="s3">\n    </span><span class="s1">errorConvention</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const getNotFoundViewport = cache(getNotFoundViewportImpl)</span><span class="s3">\n</span><span class="s1">async function getNotFoundViewportImpl(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore</span><span class="s3">\n</span><span class="s1">): Promise&lt;React.ReactNode&gt; {</span><span class="s3">\n  </span><span class="s1">const notFoundErrorConvention = 'not-found'</span><span class="s3">\n  </span><span class="s1">return renderViewport(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore,</span><span class="s3">\n    </span><span class="s1">notFoundErrorConvention</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function renderMetadata(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">pathname: Promise&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">metadataContext: MetadataContext,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">errorConvention?: MetadataErrorType</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const resolvedMetadata = await resolveMetadata(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore,</span><span class="s3">\n    </span><span class="s1">metadataContext</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const elements: Array&lt;React.ReactNode&gt; =</span><span class="s3">\n    </span><span class="s1">createMetadataElements(resolvedMetadata)</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;&gt;</span><span class="s3">\n      </span><span class="s1">{elements.map((el, index) =&gt; {</span><span class="s3">\n        </span><span class="s1">return cloneElement(el as React.ReactElement, { key: index })</span><span class="s3">\n      </span><span class="s1">})}</span><span class="s3">\n    </span><span class="s1">&lt;/&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function renderViewport(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">searchParams: Promise&lt;ParsedUrlQuery&gt;,</span><span class="s3">\n  </span><span class="s1">getDynamicParamFromSegment: GetDynamicParamFromSegment,</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">errorConvention?: MetadataErrorType</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const resolvedViewport = await resolveViewport(</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">searchParams,</span><span class="s3">\n    </span><span class="s1">errorConvention,</span><span class="s3">\n    </span><span class="s1">getDynamicParamFromSegment,</span><span class="s3">\n    </span><span class="s1">workStore</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const elements: Array&lt;React.ReactNode&gt; =</span><span class="s3">\n    </span><span class="s1">createViewportElements(resolvedViewport)</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;&gt;</span><span class="s3">\n      </span><span class="s1">{elements.map((el, index) =&gt; {</span><span class="s3">\n        </span><span class="s1">return cloneElement(el as React.ReactElement, { key: index })</span><span class="s3">\n      </span><span class="s1">})}</span><span class="s3">\n    </span><span class="s1">&lt;/&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createMetadataElements(metadata: ResolvedMetadata) {</span><span class="s3">\n  </span><span class="s1">return MetaFilter([</span><span class="s3">\n    </span><span class="s1">BasicMeta({ metadata }),</span><span class="s3">\n    </span><span class="s1">AlternatesMetadata({ alternates: metadata.alternates }),</span><span class="s3">\n    </span><span class="s1">ItunesMeta({ itunes: metadata.itunes }),</span><span class="s3">\n    </span><span class="s1">FacebookMeta({ facebook: metadata.facebook }),</span><span class="s3">\n    </span><span class="s1">PinterestMeta({ pinterest: metadata.pinterest }),</span><span class="s3">\n    </span><span class="s1">FormatDetectionMeta({ formatDetection: metadata.formatDetection }),</span><span class="s3">\n    </span><span class="s1">VerificationMeta({ verification: metadata.verification }),</span><span class="s3">\n    </span><span class="s1">AppleWebAppMeta({ appleWebApp: metadata.appleWebApp }),</span><span class="s3">\n    </span><span class="s1">OpenGraphMetadata({ openGraph: metadata.openGraph }),</span><span class="s3">\n    </span><span class="s1">TwitterMetadata({ twitter: metadata.twitter }),</span><span class="s3">\n    </span><span class="s1">AppLinksMeta({ appLinks: metadata.appLinks }),</span><span class="s3">\n    </span><span class="s1">IconsMetadata({ icons: metadata.icons }),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createViewportElements(viewport: ResolvedViewport) {</span><span class="s3">\n  </span><span class="s1">return MetaFilter([ViewportMeta({ viewport: viewport })])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;Suspense&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneElement&quot;</span><span class="s0">,</span><span class="s1">&quot;AppleWebAppMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;FormatDetectionMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;ItunesMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;BasicMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;VerificationMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;FacebookMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;PinterestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;AlternatesMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;OpenGraphMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;TwitterMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;AppLinksMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;IconsMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;MetaFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;isHTTPAccessFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;METADATA_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;VIEWPORT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;AsyncMetadataOutlet&quot;</span><span class="s0">,</span><span class="s1">&quot;isPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerSearchParamsForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerPathnameForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;createMetadataComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataContext&quot;</span><span class="s0">,</span><span class="s1">&quot;getDynamicParamFromSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;appUsingSizeAdjustment&quot;</span><span class="s0">,</span><span class="s1">&quot;errorType&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;serveStreamingMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnameForMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportTree&quot;</span><span class="s0">,</span><span class="s1">&quot;Viewport&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataTree&quot;</span><span class="s0">,</span><span class="s1">&quot;Metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;viewport&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolvedViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;getNotFoundViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;displayName&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolvedMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveFinalMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataErr&quot;</span><span class="s0">,</span><span class="s1">&quot;getNotFoundMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;notFoundMetadataErr&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataResolver&quot;</span><span class="s0">,</span><span class="s1">&quot;div&quot;</span><span class="s0">,</span><span class="s1">&quot;hidden&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataState&quot;</span><span class="s0">,</span><span class="s1">&quot;getMetadataReady&quot;</span><span class="s0">,</span><span class="s1">&quot;getViewportReady&quot;</span><span class="s0">,</span><span class="s1">&quot;StreamingMetadataOutletImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;StreamingMetadataOutlet&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolvedMetadataImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;errorConvention&quot;</span><span class="s0">,</span><span class="s1">&quot;renderMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;getNotFoundMetadataImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;notFoundErrorConvention&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolvedViewportImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;renderViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;getNotFoundViewportImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;elements&quot;</span><span class="s0">,</span><span class="s1">&quot;createMetadataElements&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;el&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedViewport&quot;</span><span class="s0">,</span><span class="s1">&quot;createViewportElements&quot;</span><span class="s0">,</span><span class="s1">&quot;alternates&quot;</span><span class="s0">,</span><span class="s1">&quot;itunes&quot;</span><span class="s0">,</span><span class="s1">&quot;facebook&quot;</span><span class="s0">,</span><span class="s1">&quot;pinterest&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;verification&quot;</span><span class="s0">,</span><span class="s1">&quot;appleWebApp&quot;</span><span class="s0">,</span><span class="s1">&quot;openGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;twitter&quot;</span><span class="s0">,</span><span class="s1">&quot;appLinks&quot;</span><span class="s0">,</span><span class="s1">&quot;icons&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12845</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/lib/framework/boundary-components.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12851</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/lib/framework/boundary-components.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12858</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/framework/boundary-components.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import type { ReactNode } from 'react'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">METADATA_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">VIEWPORT_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">OUTLET_BOUNDARY_NAME,</span><span class="s3">\n  </span><span class="s1">ROOT_LAYOUT_BOUNDARY_NAME,</span><span class="s3">\n</span><span class="s1">} from './boundary-constants'</span><span class="s3">\n\n</span><span class="s1">// We use a namespace object to allow us to recover the name of the function</span><span class="s3">\n</span><span class="s1">// at runtime even when production bundling/minification is used.</span><span class="s3">\n</span><span class="s1">const NameSpace = {</span><span class="s3">\n  </span><span class="s1">[METADATA_BOUNDARY_NAME]: function ({ children }: { children: ReactNode }) {</span><span class="s3">\n    </span><span class="s1">return children</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[VIEWPORT_BOUNDARY_NAME]: function ({ children }: { children: ReactNode }) {</span><span class="s3">\n    </span><span class="s1">return children</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[OUTLET_BOUNDARY_NAME]: function ({ children }: { children: ReactNode }) {</span><span class="s3">\n    </span><span class="s1">return children</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[ROOT_LAYOUT_BOUNDARY_NAME]: function ({</span><span class="s3">\n    </span><span class="s1">children,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">children: ReactNode</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">return children</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const MetadataBoundary =</span><span class="s3">\n  </span><span class="s1">// We use slice(0) to trick the bundler into not inlining/minifying the function</span><span class="s3">\n  </span><span class="s1">// so it retains the name inferred from the namespace object</span><span class="s3">\n  </span><span class="s1">NameSpace[METADATA_BOUNDARY_NAME.slice(0) as typeof METADATA_BOUNDARY_NAME]</span><span class="s3">\n\n</span><span class="s1">export const ViewportBoundary =</span><span class="s3">\n  </span><span class="s1">// We use slice(0) to trick the bundler into not inlining/minifying the function</span><span class="s3">\n  </span><span class="s1">// so it retains the name inferred from the namespace object</span><span class="s3">\n  </span><span class="s1">NameSpace[VIEWPORT_BOUNDARY_NAME.slice(0) as typeof VIEWPORT_BOUNDARY_NAME]</span><span class="s3">\n\n</span><span class="s1">export const OutletBoundary =</span><span class="s3">\n  </span><span class="s1">// We use slice(0) to trick the bundler into not inlining/minifying the function</span><span class="s3">\n  </span><span class="s1">// so it retains the name inferred from the namespace object</span><span class="s3">\n  </span><span class="s1">NameSpace[OUTLET_BOUNDARY_NAME.slice(0) as typeof OUTLET_BOUNDARY_NAME]</span><span class="s3">\n\n</span><span class="s1">export const RootLayoutBoundary =</span><span class="s3">\n  </span><span class="s1">// We use slice(0) to trick the bundler into not inlining/minifying the function</span><span class="s3">\n  </span><span class="s1">// so it retains the name inferred from the namespace object</span><span class="s3">\n  </span><span class="s1">NameSpace[</span><span class="s3">\n    </span><span class="s1">ROOT_LAYOUT_BOUNDARY_NAME.slice(0) as typeof ROOT_LAYOUT_BOUNDARY_NAME</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;METADATA_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;VIEWPORT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;OUTLET_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_LAYOUT_BOUNDARY_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;NameSpace&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;OutletBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;RootLayoutBoundary&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12866</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/src/server/route-modules/app-page/vendored/rsc/react-dom.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;module.exports = (</span><span class="s3">\n  </span><span class="s1">require('../../module.compiled') as typeof import('../../module.compiled')</span><span class="s3">\n</span><span class="s1">).vendored['react-rsc']!.ReactDOM</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;vendored&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDOM&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,QAAQ&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12871</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/rsc/preloads.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/*</span><span class="s3">\n\n</span><span class="s1">Files in the rsc directory are meant to be packaged as part of the RSC graph using next-app-loader.</span><span class="s3">\n\n</span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import ReactDOM from 'react-dom'</span><span class="s3">\n\n</span><span class="s1">export function preloadStyle(</span><span class="s3">\n  </span><span class="s1">href: string,</span><span class="s3">\n  </span><span class="s1">crossOrigin: string | undefined,</span><span class="s3">\n  </span><span class="s1">nonce: string | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const opts: any = { as: 'style' }</span><span class="s3">\n  </span><span class="s1">if (typeof crossOrigin === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.crossOrigin = crossOrigin</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (typeof nonce === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.nonce = nonce</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">ReactDOM.preload(href, opts)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function preloadFont(</span><span class="s3">\n  </span><span class="s1">href: string,</span><span class="s3">\n  </span><span class="s1">type: string,</span><span class="s3">\n  </span><span class="s1">crossOrigin: string | undefined,</span><span class="s3">\n  </span><span class="s1">nonce: string | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const opts: any = { as: 'font', type }</span><span class="s3">\n  </span><span class="s1">if (typeof crossOrigin === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.crossOrigin = crossOrigin</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (typeof nonce === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.nonce = nonce</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">ReactDOM.preload(href, opts)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function preconnect(</span><span class="s3">\n  </span><span class="s1">href: string,</span><span class="s3">\n  </span><span class="s1">crossOrigin: string | undefined,</span><span class="s3">\n  </span><span class="s1">nonce: string | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const opts: any = {}</span><span class="s3">\n  </span><span class="s1">if (typeof crossOrigin === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.crossOrigin = crossOrigin</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (typeof nonce === 'string') {</span><span class="s3">\n    </span><span class="s1">opts.nonce = nonce</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">;(ReactDOM as any).preconnect(href, opts)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ReactDOM&quot;</span><span class="s0">,</span><span class="s1">&quot;preloadStyle&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;crossOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;nonce&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;as&quot;</span><span class="s0">,</span><span class="s1">&quot;preload&quot;</span><span class="s0">,</span><span class="s1">&quot;preloadFont&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;preconnect&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;AAIA;;;;;;;;AAEA,OAAOA,cAAc,YAAW;;AAEzB,SAASC,aACdC,IAAY,EACZC,WAA+B,EAC/BC,KAAyB;IAEzB,MAAMC,OAAY;QAAEC,IAAI;IAAQ;IAChC,IAAI,OAAOH,gBAAgB,UAAU;QACnCE,KAAKF,WAAW,GAAGA;IACrB;IACA,IAAI,OAAOC,UAAU,UAAU;QAC7BC,KAAKD,KAAK,GAAGA;IACf;IACAJ,uNAAAA,CAASO,OAAO,CAACL,MAAMG;AACzB;AAEO,SAASG,YACdN,IAAY,EACZO,IAAY,EACZN,WAA+B,EAC/BC,KAAyB;IAEzB,MAAMC,OAAY;QAAEC,IAAI;QAAQG;IAAK;IACrC,IAAI,OAAON,gBAAgB,UAAU;QACnCE,KAAKF,WAAW,GAAGA;IACrB;IACA,IAAI,OAAOC,UAAU,UAAU;QAC7BC,KAAKD,KAAK,GAAGA;IACf;IACAJ,uNAAAA,CAASO,OAAO,CAACL,MAAMG;AACzB;AAEO,SAASK,WACdR,IAAY,EACZC,WAA+B,EAC/BC,KAAyB;IAEzB,MAAMC,OAAY,CAAC;IACnB,IAAI,OAAOF,gBAAgB,UAAU;QACnCE,KAAKF,WAAW,GAAGA;IACrB;IACA,IAAI,OAAOC,UAAU,UAAU;QAC7BC,KAAKD,KAAK,GAAGA;IACf;;IACEJ,uNAAAA,CAAiBU,UAAU,CAACR,MAAMG;AACtC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12925</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/rsc/postpone.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/*</span><span class="s3">\n\n</span><span class="s1">Files in the rsc directory are meant to be packaged as part of the RSC graph using next-app-loader.</span><span class="s3">\n\n</span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">// When postpone is available in canary React we can switch to importing it directly</span><span class="s3">\n</span><span class="s1">export { Postpone } from '../dynamic-rendering'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;Postpone&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;AAIA,GAEA,oFAAoF;;AACpF,SAASA,QAAQ,QAAQ,uBAAsB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12937</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/rsc/taint.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/*</span><span class="s3">\n\n</span><span class="s1">Files in the rsc directory are meant to be packaged as part of the RSC graph using next-app-loader.</span><span class="s3">\n\n</span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import * as React from 'react'</span><span class="s3">\n\n</span><span class="s1">type Reference = object</span><span class="s3">\n</span><span class="s1">type TaintableUniqueValue = string | bigint | ArrayBufferView</span><span class="s3">\n\n</span><span class="s1">function notImplemented() {</span><span class="s3">\n  </span><span class="s1">throw new Error('Taint can only be used with the taint flag.')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const taintObjectReference: (</span><span class="s3">\n  </span><span class="s1">message: string | undefined,</span><span class="s3">\n  </span><span class="s1">object: Reference</span><span class="s3">\n</span><span class="s1">) =&gt; void = process.env.__NEXT_EXPERIMENTAL_REACT</span><span class="s3">\n  </span><span class="s1">? // @ts-ignore</span><span class="s3">\n    </span><span class="s1">React.experimental_taintObjectReference</span><span class="s3">\n  </span><span class="s1">: notImplemented</span><span class="s3">\n</span><span class="s1">export const taintUniqueValue: (</span><span class="s3">\n  </span><span class="s1">message: string | undefined,</span><span class="s3">\n  </span><span class="s1">lifetime: Reference,</span><span class="s3">\n  </span><span class="s1">value: TaintableUniqueValue</span><span class="s3">\n</span><span class="s1">) =&gt; void = process.env.__NEXT_EXPERIMENTAL_REACT</span><span class="s3">\n  </span><span class="s1">? // @ts-ignore</span><span class="s3">\n    </span><span class="s1">React.experimental_taintUniqueValue</span><span class="s3">\n  </span><span class="s1">: notImplemented</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;notImplemented&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;taintObjectReference&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_EXPERIMENTAL_REACT&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental_taintObjectReference&quot;</span><span class="s0">,</span><span class="s1">&quot;taintUniqueValue&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental_taintUniqueValue&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;AAIA;;;;;;AAEA,YAAYA,WAAW,QAAO;;AAK9B,SAASC;IACP,MAAM,OAAA,cAAwD,CAAxD,IAAIC,MAAM,gDAAV,qBAAA;eAAA;oBAAA;sBAAA;IAAuD;AAC/D;AAEO,MAAMC,uBAGDC,QAAQC,GAAG,CAACC,yBAAyB,CAE7CN,MAAMO,oBACNN,aADuC,EACzB;AACX,MAAMO,mBAIDJ,QAAQC,GAAG,CAACC,yBAAyB,CAE7CN,MAAMS,oBACNR,SADmC,MACrB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">12962</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.node.development.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* @license React</span><span class="s3">\n </span><span class="s1">* react-server-dom-turbopack-client.node.development.js</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Copyright (c) Meta Platforms, Inc. and affiliates.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This source code is licensed under the MIT license found in the</span><span class="s3">\n </span><span class="s1">* LICENSE file in the root directory of this source tree.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\&quot;</span><span class="s1">production</span><span class="s3">\&quot; </span><span class="s1">!== process.env.NODE_ENV &amp;&amp;</span><span class="s3">\n  </span><span class="s1">(function () {</span><span class="s3">\n    </span><span class="s1">function resolveClientReference(bundlerConfig, metadata) {</span><span class="s3">\n      </span><span class="s1">if (bundlerConfig) {</span><span class="s3">\n        </span><span class="s1">var moduleExports = bundlerConfig[metadata[0]];</span><span class="s3">\n        </span><span class="s1">if ((bundlerConfig = moduleExports &amp;&amp; moduleExports[metadata[2]]))</span><span class="s3">\n          </span><span class="s1">moduleExports = bundlerConfig.name;</span><span class="s3">\n        </span><span class="s1">else {</span><span class="s3">\n          </span><span class="s1">bundlerConfig = moduleExports &amp;&amp; moduleExports[</span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n          </span><span class="s1">if (!bundlerConfig)</span><span class="s3">\n            </span><span class="s1">throw Error(</span><span class="s3">\n              </span><span class="s1">'Could not find the module </span><span class="s3">\&quot;</span><span class="s1">' +</span><span class="s3">\n                </span><span class="s1">metadata[0] +</span><span class="s3">\n                </span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.'</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">moduleExports = metadata[2];</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return 4 === metadata.length</span><span class="s3">\n          </span><span class="s1">? [bundlerConfig.id, bundlerConfig.chunks, moduleExports, 1]</span><span class="s3">\n          </span><span class="s1">: [bundlerConfig.id, bundlerConfig.chunks, moduleExports];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return metadata;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveServerReference(bundlerConfig, id) {</span><span class="s3">\n      </span><span class="s1">var name = </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">resolvedModuleData = bundlerConfig[id];</span><span class="s3">\n      </span><span class="s1">if (resolvedModuleData) name = resolvedModuleData.name;</span><span class="s3">\n      </span><span class="s1">else {</span><span class="s3">\n        </span><span class="s1">var idx = id.lastIndexOf(</span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">-1 !== idx &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((name = id.slice(idx + 1)),</span><span class="s3">\n          </span><span class="s1">(resolvedModuleData = bundlerConfig[id.slice(0, idx)]));</span><span class="s3">\n        </span><span class="s1">if (!resolvedModuleData)</span><span class="s3">\n          </span><span class="s1">throw Error(</span><span class="s3">\n            </span><span class="s1">'Could not find the module </span><span class="s3">\&quot;</span><span class="s1">' +</span><span class="s3">\n              </span><span class="s1">id +</span><span class="s3">\n              </span><span class="s1">'</span><span class="s3">\&quot; </span><span class="s1">in the React Server Manifest. This is probably a bug in the React Server Components bundler.'</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return [resolvedModuleData.id, resolvedModuleData.chunks, name];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function requireAsyncModule(id) {</span><span class="s3">\n      </span><span class="s1">var promise = globalThis.__next_require__(id);</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">!== typeof promise.then || </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== promise.status)</span><span class="s3">\n        </span><span class="s1">return null;</span><span class="s3">\n      </span><span class="s1">promise.then(</span><span class="s3">\n        </span><span class="s1">function (value) {</span><span class="s3">\n          </span><span class="s1">promise.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">promise.value = value;</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">function (reason) {</span><span class="s3">\n          </span><span class="s1">promise.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">promise.reason = reason;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return promise;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function ignoreReject() {}</span><span class="s3">\n    </span><span class="s1">function preloadModule(metadata) {</span><span class="s3">\n      </span><span class="s1">for (</span><span class="s3">\n        </span><span class="s1">var chunks = metadata[1], promises = [], i = 0;</span><span class="s3">\n        </span><span class="s1">i &lt; chunks.length;</span><span class="s3">\n        </span><span class="s1">i++</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">var thenable = globalThis.__next_chunk_load__(chunks[i]);</span><span class="s3">\n        </span><span class="s1">loadedChunks.has(thenable) || promises.push(thenable);</span><span class="s3">\n        </span><span class="s1">if (!instrumentedChunks.has(thenable)) {</span><span class="s3">\n          </span><span class="s1">var resolve = loadedChunks.add.bind(loadedChunks, thenable);</span><span class="s3">\n          </span><span class="s1">thenable.then(resolve, ignoreReject);</span><span class="s3">\n          </span><span class="s1">instrumentedChunks.add(thenable);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return 4 === metadata.length</span><span class="s3">\n        </span><span class="s1">? 0 === promises.length</span><span class="s3">\n          </span><span class="s1">? requireAsyncModule(metadata[0])</span><span class="s3">\n          </span><span class="s1">: Promise.all(promises).then(function () {</span><span class="s3">\n              </span><span class="s1">return requireAsyncModule(metadata[0]);</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">: 0 &lt; promises.length</span><span class="s3">\n          </span><span class="s1">? Promise.all(promises)</span><span class="s3">\n          </span><span class="s1">: null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function requireModule(metadata) {</span><span class="s3">\n      </span><span class="s1">var moduleExports = globalThis.__next_require__(metadata[0]);</span><span class="s3">\n      </span><span class="s1">if (4 === metadata.length &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof moduleExports.then)</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== moduleExports.status)</span><span class="s3">\n          </span><span class="s1">moduleExports = moduleExports.value;</span><span class="s3">\n        </span><span class="s1">else throw moduleExports.reason;</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot; </span><span class="s1">=== metadata[2]</span><span class="s3">\n        </span><span class="s1">? moduleExports</span><span class="s3">\n        </span><span class="s1">: </span><span class="s3">\&quot;\&quot; </span><span class="s1">=== metadata[2]</span><span class="s3">\n          </span><span class="s1">? moduleExports.__esModule</span><span class="s3">\n            </span><span class="s1">? moduleExports.default</span><span class="s3">\n            </span><span class="s1">: moduleExports</span><span class="s3">\n          </span><span class="s1">: moduleExports[metadata[2]];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function prepareDestinationWithChunks(</span><span class="s3">\n      </span><span class="s1">moduleLoading,</span><span class="s3">\n      </span><span class="s1">chunks,</span><span class="s3">\n      </span><span class="s1">nonce$jscomp$0</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">if (null !== moduleLoading)</span><span class="s3">\n        </span><span class="s1">for (var i = 0; i &lt; chunks.length; i++) {</span><span class="s3">\n          </span><span class="s1">var nonce = nonce$jscomp$0,</span><span class="s3">\n            </span><span class="s1">JSCompiler_temp_const = ReactDOMSharedInternals.d,</span><span class="s3">\n            </span><span class="s1">JSCompiler_temp_const$jscomp$0 = JSCompiler_temp_const.X,</span><span class="s3">\n            </span><span class="s1">JSCompiler_temp_const$jscomp$1 = moduleLoading.prefix + chunks[i];</span><span class="s3">\n          </span><span class="s1">var JSCompiler_inline_result = moduleLoading.crossOrigin;</span><span class="s3">\n          </span><span class="s1">JSCompiler_inline_result =</span><span class="s3">\n            \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof JSCompiler_inline_result</span><span class="s3">\n              </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">use-credentials</span><span class="s3">\&quot; </span><span class="s1">=== JSCompiler_inline_result</span><span class="s3">\n                </span><span class="s1">? JSCompiler_inline_result</span><span class="s3">\n                </span><span class="s1">: </span><span class="s3">\&quot;\&quot;\n              </span><span class="s1">: void 0;</span><span class="s3">\n          </span><span class="s1">JSCompiler_temp_const$jscomp$0.call(</span><span class="s3">\n            </span><span class="s1">JSCompiler_temp_const,</span><span class="s3">\n            </span><span class="s1">JSCompiler_temp_const$jscomp$1,</span><span class="s3">\n            </span><span class="s1">{ crossOrigin: JSCompiler_inline_result, nonce: nonce }</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getIteratorFn(maybeIterable) {</span><span class="s3">\n      </span><span class="s1">if (null === maybeIterable || </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">!== typeof maybeIterable)</span><span class="s3">\n        </span><span class="s1">return null;</span><span class="s3">\n      </span><span class="s1">maybeIterable =</span><span class="s3">\n        </span><span class="s1">(MAYBE_ITERATOR_SYMBOL &amp;&amp; maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||</span><span class="s3">\n        </span><span class="s1">maybeIterable[</span><span class="s3">\&quot;</span><span class="s1">@@iterator</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof maybeIterable ? maybeIterable : null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function isObjectPrototype(object) {</span><span class="s3">\n      </span><span class="s1">if (!object) return !1;</span><span class="s3">\n      </span><span class="s1">var ObjectPrototype = Object.prototype;</span><span class="s3">\n      </span><span class="s1">if (object === ObjectPrototype) return !0;</span><span class="s3">\n      </span><span class="s1">if (getPrototypeOf(object)) return !1;</span><span class="s3">\n      </span><span class="s1">object = Object.getOwnPropertyNames(object);</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; object.length; i++)</span><span class="s3">\n        </span><span class="s1">if (!(object[i] in ObjectPrototype)) return !1;</span><span class="s3">\n      </span><span class="s1">return !0;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function isSimpleObject(object) {</span><span class="s3">\n      </span><span class="s1">if (!isObjectPrototype(getPrototypeOf(object))) return !1;</span><span class="s3">\n      </span><span class="s1">for (</span><span class="s3">\n        </span><span class="s1">var names = Object.getOwnPropertyNames(object), i = 0;</span><span class="s3">\n        </span><span class="s1">i &lt; names.length;</span><span class="s3">\n        </span><span class="s1">i++</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">var descriptor = Object.getOwnPropertyDescriptor(object, names[i]);</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">!descriptor ||</span><span class="s3">\n          </span><span class="s1">(!descriptor.enumerable &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((</span><span class="s3">\&quot;</span><span class="s1">key</span><span class="s3">\&quot; </span><span class="s1">!== names[i] &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">ref</span><span class="s3">\&quot; </span><span class="s1">!== names[i]) ||</span><span class="s3">\n              \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">!== typeof descriptor.get))</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">return !1;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return !0;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function objectName(object) {</span><span class="s3">\n      </span><span class="s1">object = Object.prototype.toString.call(object);</span><span class="s3">\n      </span><span class="s1">return object.slice(8, object.length - 1);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function describeKeyForErrorMessage(key) {</span><span class="s3">\n      </span><span class="s1">var encodedKey = JSON.stringify(key);</span><span class="s3">\n      </span><span class="s1">return '</span><span class="s3">\&quot;</span><span class="s1">' + key + '</span><span class="s3">\&quot;</span><span class="s1">' === encodedKey ? key : encodedKey;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function describeValueForErrorMessage(value) {</span><span class="s3">\n      </span><span class="s1">switch (typeof value) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return JSON.stringify(</span><span class="s3">\n            </span><span class="s1">10 &gt;= value.length ? value : value.slice(0, 10) + </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">if (isArrayImpl(value)) return </span><span class="s3">\&quot;</span><span class="s1">[...]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">if (null !== value &amp;&amp; value.$$typeof === CLIENT_REFERENCE_TAG)</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">client</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">value = objectName(value);</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Object</span><span class="s3">\&quot; </span><span class="s1">=== value ? </span><span class="s3">\&quot;</span><span class="s1">{...}</span><span class="s3">\&quot; </span><span class="s1">: value;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return value.$$typeof === CLIENT_REFERENCE_TAG</span><span class="s3">\n            </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">client</span><span class="s3">\&quot;\n            </span><span class="s1">: (value = value.displayName || value.name)</span><span class="s3">\n              </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">function </span><span class="s3">\&quot; </span><span class="s1">+ value</span><span class="s3">\n              </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          </span><span class="s1">return String(value);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function describeElementType(type) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof type) return type;</span><span class="s3">\n      </span><span class="s1">switch (type) {</span><span class="s3">\n        </span><span class="s1">case REACT_SUSPENSE_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Suspense</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_SUSPENSE_LIST_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">SuspenseList</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof type)</span><span class="s3">\n        </span><span class="s1">switch (type.$$typeof) {</span><span class="s3">\n          </span><span class="s1">case REACT_FORWARD_REF_TYPE:</span><span class="s3">\n            </span><span class="s1">return describeElementType(type.render);</span><span class="s3">\n          </span><span class="s1">case REACT_MEMO_TYPE:</span><span class="s3">\n            </span><span class="s1">return describeElementType(type.type);</span><span class="s3">\n          </span><span class="s1">case REACT_LAZY_TYPE:</span><span class="s3">\n            </span><span class="s1">var payload = type._payload;</span><span class="s3">\n            </span><span class="s1">type = type._init;</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">return describeElementType(type(payload));</span><span class="s3">\n            </span><span class="s1">} catch (x) {}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function describeObjectForErrorMessage(objectOrArray, expandedName) {</span><span class="s3">\n      </span><span class="s1">var objKind = objectName(objectOrArray);</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">Object</span><span class="s3">\&quot; </span><span class="s1">!== objKind &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">Array</span><span class="s3">\&quot; </span><span class="s1">!== objKind) return objKind;</span><span class="s3">\n      </span><span class="s1">var start = -1,</span><span class="s3">\n        </span><span class="s1">length = 0;</span><span class="s3">\n      </span><span class="s1">if (isArrayImpl(objectOrArray))</span><span class="s3">\n        </span><span class="s1">if (jsxChildrenParents.has(objectOrArray)) {</span><span class="s3">\n          </span><span class="s1">var type = jsxChildrenParents.get(objectOrArray);</span><span class="s3">\n          </span><span class="s1">objKind = </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ describeElementType(type) + </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">for (var i = 0; i &lt; objectOrArray.length; i++) {</span><span class="s3">\n            </span><span class="s1">var value = objectOrArray[i];</span><span class="s3">\n            </span><span class="s1">value =</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof value</span><span class="s3">\n                </span><span class="s1">? value</span><span class="s3">\n                </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof value &amp;&amp; null !== value</span><span class="s3">\n                  </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot; </span><span class="s1">+ describeObjectForErrorMessage(value) + </span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;\n                  </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot; </span><span class="s1">+ describeValueForErrorMessage(value) + </span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            \&quot;\&quot; </span><span class="s1">+ i === expandedName</span><span class="s3">\n              </span><span class="s1">? ((start = objKind.length),</span><span class="s3">\n                </span><span class="s1">(length = value.length),</span><span class="s3">\n                </span><span class="s1">(objKind += value))</span><span class="s3">\n              </span><span class="s1">: (objKind =</span><span class="s3">\n                  </span><span class="s1">15 &gt; value.length &amp;&amp; 40 &gt; objKind.length + value.length</span><span class="s3">\n                    </span><span class="s1">? objKind + value</span><span class="s3">\n                    </span><span class="s1">: objKind + </span><span class="s3">\&quot;</span><span class="s1">{...}</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">objKind += </span><span class="s3">\&quot;</span><span class="s1">&lt;/</span><span class="s3">\&quot; </span><span class="s1">+ describeElementType(type) + </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">objKind = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">for (type = 0; type &lt; objectOrArray.length; type++)</span><span class="s3">\n            </span><span class="s1">0 &lt; type &amp;&amp; (objKind += </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(i = objectOrArray[type]),</span><span class="s3">\n              </span><span class="s1">(i =</span><span class="s3">\n                \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof i &amp;&amp; null !== i</span><span class="s3">\n                  </span><span class="s1">? describeObjectForErrorMessage(i)</span><span class="s3">\n                  </span><span class="s1">: describeValueForErrorMessage(i)),</span><span class="s3">\n              \&quot;\&quot; </span><span class="s1">+ type === expandedName</span><span class="s3">\n                </span><span class="s1">? ((start = objKind.length),</span><span class="s3">\n                  </span><span class="s1">(length = i.length),</span><span class="s3">\n                  </span><span class="s1">(objKind += i))</span><span class="s3">\n                </span><span class="s1">: (objKind =</span><span class="s3">\n                    </span><span class="s1">10 &gt; i.length &amp;&amp; 40 &gt; objKind.length + i.length</span><span class="s3">\n                      </span><span class="s1">? objKind + i</span><span class="s3">\n                      </span><span class="s1">: objKind + </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">objKind += </span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">else if (objectOrArray.$$typeof === REACT_ELEMENT_TYPE)</span><span class="s3">\n        </span><span class="s1">objKind = </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ describeElementType(objectOrArray.type) + </span><span class="s3">\&quot;</span><span class="s1">/&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">else {</span><span class="s3">\n        </span><span class="s1">if (objectOrArray.$$typeof === CLIENT_REFERENCE_TAG) return </span><span class="s3">\&quot;</span><span class="s1">client</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">if (jsxPropsParents.has(objectOrArray)) {</span><span class="s3">\n          </span><span class="s1">objKind = jsxPropsParents.get(objectOrArray);</span><span class="s3">\n          </span><span class="s1">objKind = </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ (describeElementType(objKind) || </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">type = Object.keys(objectOrArray);</span><span class="s3">\n          </span><span class="s1">for (i = 0; i &lt; type.length; i++) {</span><span class="s3">\n            </span><span class="s1">objKind += </span><span class="s3">\&quot; \&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">value = type[i];</span><span class="s3">\n            </span><span class="s1">objKind += describeKeyForErrorMessage(value) + </span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">var _value2 = objectOrArray[value];</span><span class="s3">\n            </span><span class="s1">var _substr2 =</span><span class="s3">\n              </span><span class="s1">value === expandedName &amp;&amp;</span><span class="s3">\n              \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof _value2 &amp;&amp;</span><span class="s3">\n              </span><span class="s1">null !== _value2</span><span class="s3">\n                </span><span class="s1">? describeObjectForErrorMessage(_value2)</span><span class="s3">\n                </span><span class="s1">: describeValueForErrorMessage(_value2);</span><span class="s3">\n            \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">!== typeof _value2 &amp;&amp; (_substr2 = </span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot; </span><span class="s1">+ _substr2 + </span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">value === expandedName</span><span class="s3">\n              </span><span class="s1">? ((start = objKind.length),</span><span class="s3">\n                </span><span class="s1">(length = _substr2.length),</span><span class="s3">\n                </span><span class="s1">(objKind += _substr2))</span><span class="s3">\n              </span><span class="s1">: (objKind =</span><span class="s3">\n                  </span><span class="s1">10 &gt; _substr2.length &amp;&amp; 40 &gt; objKind.length + _substr2.length</span><span class="s3">\n                    </span><span class="s1">? objKind + _substr2</span><span class="s3">\n                    </span><span class="s1">: objKind + </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">objKind += </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">objKind = </span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">type = Object.keys(objectOrArray);</span><span class="s3">\n          </span><span class="s1">for (i = 0; i &lt; type.length; i++)</span><span class="s3">\n            </span><span class="s1">0 &lt; i &amp;&amp; (objKind += </span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(value = type[i]),</span><span class="s3">\n              </span><span class="s1">(objKind += describeKeyForErrorMessage(value) + </span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(_value2 = objectOrArray[value]),</span><span class="s3">\n              </span><span class="s1">(_value2 =</span><span class="s3">\n                \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof _value2 &amp;&amp; null !== _value2</span><span class="s3">\n                  </span><span class="s1">? describeObjectForErrorMessage(_value2)</span><span class="s3">\n                  </span><span class="s1">: describeValueForErrorMessage(_value2)),</span><span class="s3">\n              </span><span class="s1">value === expandedName</span><span class="s3">\n                </span><span class="s1">? ((start = objKind.length),</span><span class="s3">\n                  </span><span class="s1">(length = _value2.length),</span><span class="s3">\n                  </span><span class="s1">(objKind += _value2))</span><span class="s3">\n                </span><span class="s1">: (objKind =</span><span class="s3">\n                    </span><span class="s1">10 &gt; _value2.length &amp;&amp; 40 &gt; objKind.length + _value2.length</span><span class="s3">\n                      </span><span class="s1">? objKind + _value2</span><span class="s3">\n                      </span><span class="s1">: objKind + </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">objKind += </span><span class="s3">\&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return void 0 === expandedName</span><span class="s3">\n        </span><span class="s1">? objKind</span><span class="s3">\n        </span><span class="s1">: -1 &lt; start &amp;&amp; 0 &lt; length</span><span class="s3">\n          </span><span class="s1">? ((objectOrArray = </span><span class="s3">\&quot; \&quot;</span><span class="s1">.repeat(start) + </span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot;</span><span class="s1">.repeat(length)),</span><span class="s3">\n            \&quot;\\</span><span class="s1">n  </span><span class="s3">\&quot; </span><span class="s1">+ objKind + </span><span class="s3">\&quot;\\</span><span class="s1">n  </span><span class="s3">\&quot; </span><span class="s1">+ objectOrArray)</span><span class="s3">\n          </span><span class="s1">: </span><span class="s3">\&quot;\\</span><span class="s1">n  </span><span class="s3">\&quot; </span><span class="s1">+ objKind;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function serializeNumber(number) {</span><span class="s3">\n      </span><span class="s1">return Number.isFinite(number)</span><span class="s3">\n        </span><span class="s1">? 0 === number &amp;&amp; -Infinity === 1 / number</span><span class="s3">\n          </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">$-0</span><span class="s3">\&quot;\n          </span><span class="s1">: number</span><span class="s3">\n        </span><span class="s1">: Infinity === number</span><span class="s3">\n          </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">$Infinity</span><span class="s3">\&quot;\n          </span><span class="s1">: -Infinity === number</span><span class="s3">\n            </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">$-Infinity</span><span class="s3">\&quot;\n            </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">$NaN</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function processReply(</span><span class="s3">\n      </span><span class="s1">root,</span><span class="s3">\n      </span><span class="s1">formFieldPrefix,</span><span class="s3">\n      </span><span class="s1">temporaryReferences,</span><span class="s3">\n      </span><span class="s1">resolve,</span><span class="s3">\n      </span><span class="s1">reject</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">function serializeTypedArray(tag, typedArray) {</span><span class="s3">\n        </span><span class="s1">typedArray = new Blob([</span><span class="s3">\n          </span><span class="s1">new Uint8Array(</span><span class="s3">\n            </span><span class="s1">typedArray.buffer,</span><span class="s3">\n            </span><span class="s1">typedArray.byteOffset,</span><span class="s3">\n            </span><span class="s1">typedArray.byteLength</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">]);</span><span class="s3">\n        </span><span class="s1">var blobId = nextPartId++;</span><span class="s3">\n        </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n        </span><span class="s1">formData.append(formFieldPrefix + blobId, typedArray);</span><span class="s3">\n        </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ tag + blobId.toString(16);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function serializeBinaryReader(reader) {</span><span class="s3">\n        </span><span class="s1">function progress(entry) {</span><span class="s3">\n          </span><span class="s1">entry.done</span><span class="s3">\n            </span><span class="s1">? ((entry = nextPartId++),</span><span class="s3">\n              </span><span class="s1">data.append(formFieldPrefix + entry, new Blob(buffer)),</span><span class="s3">\n              </span><span class="s1">data.append(</span><span class="s3">\n                </span><span class="s1">formFieldPrefix + streamId,</span><span class="s3">\n                </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">$o' + entry.toString(16) + '</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\n              </span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">data.append(formFieldPrefix + streamId, </span><span class="s3">\&quot;</span><span class="s1">C</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">pendingParts--,</span><span class="s3">\n              </span><span class="s1">0 === pendingParts &amp;&amp; resolve(data))</span><span class="s3">\n            </span><span class="s1">: (buffer.push(entry.value),</span><span class="s3">\n              </span><span class="s1">reader.read(new Uint8Array(1024)).then(progress, reject));</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n        </span><span class="s1">var data = formData;</span><span class="s3">\n        </span><span class="s1">pendingParts++;</span><span class="s3">\n        </span><span class="s1">var streamId = nextPartId++,</span><span class="s3">\n          </span><span class="s1">buffer = [];</span><span class="s3">\n        </span><span class="s1">reader.read(new Uint8Array(1024)).then(progress, reject);</span><span class="s3">\n        </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$r</span><span class="s3">\&quot; </span><span class="s1">+ streamId.toString(16);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function serializeReader(reader) {</span><span class="s3">\n        </span><span class="s1">function progress(entry) {</span><span class="s3">\n          </span><span class="s1">if (entry.done)</span><span class="s3">\n            </span><span class="s1">data.append(formFieldPrefix + streamId, </span><span class="s3">\&quot;</span><span class="s1">C</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">pendingParts--,</span><span class="s3">\n              </span><span class="s1">0 === pendingParts &amp;&amp; resolve(data);</span><span class="s3">\n          </span><span class="s1">else</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">var partJSON = JSON.stringify(entry.value, resolveToJSON);</span><span class="s3">\n              </span><span class="s1">data.append(formFieldPrefix + streamId, partJSON);</span><span class="s3">\n              </span><span class="s1">reader.read().then(progress, reject);</span><span class="s3">\n            </span><span class="s1">} catch (x) {</span><span class="s3">\n              </span><span class="s1">reject(x);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n        </span><span class="s1">var data = formData;</span><span class="s3">\n        </span><span class="s1">pendingParts++;</span><span class="s3">\n        </span><span class="s1">var streamId = nextPartId++;</span><span class="s3">\n        </span><span class="s1">reader.read().then(progress, reject);</span><span class="s3">\n        </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$R</span><span class="s3">\&quot; </span><span class="s1">+ streamId.toString(16);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function serializeReadableStream(stream) {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">var binaryReader = stream.getReader({ mode: </span><span class="s3">\&quot;</span><span class="s1">byob</span><span class="s3">\&quot; </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">} catch (x) {</span><span class="s3">\n          </span><span class="s1">return serializeReader(stream.getReader());</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return serializeBinaryReader(binaryReader);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function serializeAsyncIterable(iterable, iterator) {</span><span class="s3">\n        </span><span class="s1">function progress(entry) {</span><span class="s3">\n          </span><span class="s1">if (entry.done) {</span><span class="s3">\n            </span><span class="s1">if (void 0 === entry.value)</span><span class="s3">\n              </span><span class="s1">data.append(formFieldPrefix + streamId, </span><span class="s3">\&quot;</span><span class="s1">C</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">else</span><span class="s3">\n              </span><span class="s1">try {</span><span class="s3">\n                </span><span class="s1">var partJSON = JSON.stringify(entry.value, resolveToJSON);</span><span class="s3">\n                </span><span class="s1">data.append(formFieldPrefix + streamId, </span><span class="s3">\&quot;</span><span class="s1">C</span><span class="s3">\&quot; </span><span class="s1">+ partJSON);</span><span class="s3">\n              </span><span class="s1">} catch (x) {</span><span class="s3">\n                </span><span class="s1">reject(x);</span><span class="s3">\n                </span><span class="s1">return;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">pendingParts--;</span><span class="s3">\n            </span><span class="s1">0 === pendingParts &amp;&amp; resolve(data);</span><span class="s3">\n          </span><span class="s1">} else</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">var _partJSON = JSON.stringify(entry.value, resolveToJSON);</span><span class="s3">\n              </span><span class="s1">data.append(formFieldPrefix + streamId, _partJSON);</span><span class="s3">\n              </span><span class="s1">iterator.next().then(progress, reject);</span><span class="s3">\n            </span><span class="s1">} catch (x$0) {</span><span class="s3">\n              </span><span class="s1">reject(x$0);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n        </span><span class="s1">var data = formData;</span><span class="s3">\n        </span><span class="s1">pendingParts++;</span><span class="s3">\n        </span><span class="s1">var streamId = nextPartId++;</span><span class="s3">\n        </span><span class="s1">iterable = iterable === iterator;</span><span class="s3">\n        </span><span class="s1">iterator.next().then(progress, reject);</span><span class="s3">\n        </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ (iterable ? </span><span class="s3">\&quot;</span><span class="s1">x</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">X</span><span class="s3">\&quot;</span><span class="s1">) + streamId.toString(16);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function resolveToJSON(key, value) {</span><span class="s3">\n        </span><span class="s1">var originalValue = this[key];</span><span class="s3">\n        \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">!== typeof originalValue ||</span><span class="s3">\n          </span><span class="s1">originalValue === value ||</span><span class="s3">\n          </span><span class="s1">originalValue instanceof Date ||</span><span class="s3">\n          </span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">Object</span><span class="s3">\&quot; </span><span class="s1">!== objectName(originalValue)</span><span class="s3">\n            </span><span class="s1">? console.error(</span><span class="s3">\n                \&quot;</span><span class="s1">Only plain objects can be passed to Server Functions from the Client. %s objects are not supported.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                </span><span class="s1">objectName(originalValue),</span><span class="s3">\n                </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">: console.error(</span><span class="s3">\n                \&quot;</span><span class="s1">Only plain objects can be passed to Server Functions from the Client. Objects with toJSON methods are not supported. Convert it manually to a simple value before passing it to props.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n              </span><span class="s1">));</span><span class="s3">\n        </span><span class="s1">if (null === value) return null;</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) {</span><span class="s3">\n          </span><span class="s1">switch (value.$$typeof) {</span><span class="s3">\n            </span><span class="s1">case REACT_ELEMENT_TYPE:</span><span class="s3">\n              </span><span class="s1">if (void 0 !== temporaryReferences &amp;&amp; -1 === key.indexOf(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n                </span><span class="s1">var parentReference = writtenObjects.get(this);</span><span class="s3">\n                </span><span class="s1">if (void 0 !== parentReference)</span><span class="s3">\n                  </span><span class="s1">return (</span><span class="s3">\n                    </span><span class="s1">temporaryReferences.set(parentReference + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ key, value),</span><span class="s3">\n                    \&quot;</span><span class="s1">$T</span><span class="s3">\&quot;\n                  </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">throw Error(</span><span class="s3">\n                \&quot;</span><span class="s1">React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                  </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">case REACT_LAZY_TYPE:</span><span class="s3">\n              </span><span class="s1">originalValue = value._payload;</span><span class="s3">\n              </span><span class="s1">var init = value._init;</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n              </span><span class="s1">pendingParts++;</span><span class="s3">\n              </span><span class="s1">try {</span><span class="s3">\n                </span><span class="s1">parentReference = init(originalValue);</span><span class="s3">\n                </span><span class="s1">var lazyId = nextPartId++,</span><span class="s3">\n                  </span><span class="s1">partJSON = serializeModel(parentReference, lazyId);</span><span class="s3">\n                </span><span class="s1">formData.append(formFieldPrefix + lazyId, partJSON);</span><span class="s3">\n                </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ lazyId.toString(16);</span><span class="s3">\n              </span><span class="s1">} catch (x) {</span><span class="s3">\n                </span><span class="s1">if (</span><span class="s3">\n                  \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof x &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">null !== x &amp;&amp;</span><span class="s3">\n                  \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof x.then</span><span class="s3">\n                </span><span class="s1">) {</span><span class="s3">\n                  </span><span class="s1">pendingParts++;</span><span class="s3">\n                  </span><span class="s1">var _lazyId = nextPartId++;</span><span class="s3">\n                  </span><span class="s1">parentReference = function () {</span><span class="s3">\n                    </span><span class="s1">try {</span><span class="s3">\n                      </span><span class="s1">var _partJSON2 = serializeModel(value, _lazyId),</span><span class="s3">\n                        </span><span class="s1">_data = formData;</span><span class="s3">\n                      </span><span class="s1">_data.append(formFieldPrefix + _lazyId, _partJSON2);</span><span class="s3">\n                      </span><span class="s1">pendingParts--;</span><span class="s3">\n                      </span><span class="s1">0 === pendingParts &amp;&amp; resolve(_data);</span><span class="s3">\n                    </span><span class="s1">} catch (reason) {</span><span class="s3">\n                      </span><span class="s1">reject(reason);</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">};</span><span class="s3">\n                  </span><span class="s1">x.then(parentReference, parentReference);</span><span class="s3">\n                  </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ _lazyId.toString(16);</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">reject(x);</span><span class="s3">\n                </span><span class="s1">return null;</span><span class="s3">\n              </span><span class="s1">} finally {</span><span class="s3">\n                </span><span class="s1">pendingParts--;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof value.then) {</span><span class="s3">\n            </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n            </span><span class="s1">pendingParts++;</span><span class="s3">\n            </span><span class="s1">var promiseId = nextPartId++;</span><span class="s3">\n            </span><span class="s1">value.then(function (partValue) {</span><span class="s3">\n              </span><span class="s1">try {</span><span class="s3">\n                </span><span class="s1">var _partJSON3 = serializeModel(partValue, promiseId);</span><span class="s3">\n                </span><span class="s1">partValue = formData;</span><span class="s3">\n                </span><span class="s1">partValue.append(formFieldPrefix + promiseId, _partJSON3);</span><span class="s3">\n                </span><span class="s1">pendingParts--;</span><span class="s3">\n                </span><span class="s1">0 === pendingParts &amp;&amp; resolve(partValue);</span><span class="s3">\n              </span><span class="s1">} catch (reason) {</span><span class="s3">\n                </span><span class="s1">reject(reason);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}, reject);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$@</span><span class="s3">\&quot; </span><span class="s1">+ promiseId.toString(16);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">parentReference = writtenObjects.get(value);</span><span class="s3">\n          </span><span class="s1">if (void 0 !== parentReference)</span><span class="s3">\n            </span><span class="s1">if (modelRoot === value) modelRoot = null;</span><span class="s3">\n            </span><span class="s1">else return parentReference;</span><span class="s3">\n          </span><span class="s1">else</span><span class="s3">\n            </span><span class="s1">-1 === key.indexOf(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n              </span><span class="s1">((parentReference = writtenObjects.get(this)),</span><span class="s3">\n              </span><span class="s1">void 0 !== parentReference &amp;&amp;</span><span class="s3">\n                </span><span class="s1">((parentReference = parentReference + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ key),</span><span class="s3">\n                </span><span class="s1">writtenObjects.set(value, parentReference),</span><span class="s3">\n                </span><span class="s1">void 0 !== temporaryReferences &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">temporaryReferences.set(parentReference, value)));</span><span class="s3">\n          </span><span class="s1">if (isArrayImpl(value)) return value;</span><span class="s3">\n          </span><span class="s1">if (value instanceof FormData) {</span><span class="s3">\n            </span><span class="s1">null === formData &amp;&amp; (formData = new FormData());</span><span class="s3">\n            </span><span class="s1">var _data3 = formData;</span><span class="s3">\n            </span><span class="s1">key = nextPartId++;</span><span class="s3">\n            </span><span class="s1">var prefix = formFieldPrefix + key + </span><span class="s3">\&quot;</span><span class="s1">_</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n            </span><span class="s1">value.forEach(function (originalValue, originalKey) {</span><span class="s3">\n              </span><span class="s1">_data3.append(prefix + originalKey, originalValue);</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$K</span><span class="s3">\&quot; </span><span class="s1">+ key.toString(16);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (value instanceof Map)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(key = nextPartId++),</span><span class="s3">\n              </span><span class="s1">(parentReference = serializeModel(Array.from(value), key)),</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n              </span><span class="s1">formData.append(formFieldPrefix + key, parentReference),</span><span class="s3">\n              \&quot;</span><span class="s1">$Q</span><span class="s3">\&quot; </span><span class="s1">+ key.toString(16)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Set)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(key = nextPartId++),</span><span class="s3">\n              </span><span class="s1">(parentReference = serializeModel(Array.from(value), key)),</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n              </span><span class="s1">formData.append(formFieldPrefix + key, parentReference),</span><span class="s3">\n              \&quot;</span><span class="s1">$W</span><span class="s3">\&quot; </span><span class="s1">+ key.toString(16)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (value instanceof ArrayBuffer)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(key = new Blob([value])),</span><span class="s3">\n              </span><span class="s1">(parentReference = nextPartId++),</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n              </span><span class="s1">formData.append(formFieldPrefix + parentReference, key),</span><span class="s3">\n              \&quot;</span><span class="s1">$A</span><span class="s3">\&quot; </span><span class="s1">+ parentReference.toString(16)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Int8Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">O</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Uint8Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">o</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Uint8ClampedArray)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">U</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Int16Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">S</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Uint16Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">s</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Int32Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">L</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Uint32Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">l</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Float32Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">G</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof Float64Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof BigInt64Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">M</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof BigUint64Array)</span><span class="s3">\n            </span><span class="s1">return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">m</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (value instanceof DataView) return serializeTypedArray(</span><span class="s3">\&quot;</span><span class="s1">V</span><span class="s3">\&quot;</span><span class="s1">, value);</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof Blob &amp;&amp; value instanceof Blob)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n              </span><span class="s1">(key = nextPartId++),</span><span class="s3">\n              </span><span class="s1">formData.append(formFieldPrefix + key, value),</span><span class="s3">\n              \&quot;</span><span class="s1">$B</span><span class="s3">\&quot; </span><span class="s1">+ key.toString(16)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if ((parentReference = getIteratorFn(value)))</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(parentReference = parentReference.call(value)),</span><span class="s3">\n              </span><span class="s1">parentReference === value</span><span class="s3">\n                </span><span class="s1">? ((key = nextPartId++),</span><span class="s3">\n                  </span><span class="s1">(parentReference = serializeModel(</span><span class="s3">\n                    </span><span class="s1">Array.from(parentReference),</span><span class="s3">\n                    </span><span class="s1">key</span><span class="s3">\n                  </span><span class="s1">)),</span><span class="s3">\n                  </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n                  </span><span class="s1">formData.append(formFieldPrefix + key, parentReference),</span><span class="s3">\n                  \&quot;</span><span class="s1">$i</span><span class="s3">\&quot; </span><span class="s1">+ key.toString(16))</span><span class="s3">\n                </span><span class="s1">: Array.from(parentReference)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof ReadableStream &amp;&amp;</span><span class="s3">\n            </span><span class="s1">value instanceof ReadableStream</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">return serializeReadableStream(value);</span><span class="s3">\n          </span><span class="s1">parentReference = value[ASYNC_ITERATOR];</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof parentReference)</span><span class="s3">\n            </span><span class="s1">return serializeAsyncIterable(value, parentReference.call(value));</span><span class="s3">\n          </span><span class="s1">parentReference = getPrototypeOf(value);</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">parentReference !== ObjectPrototype &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(null === parentReference ||</span><span class="s3">\n              </span><span class="s1">null !== getPrototypeOf(parentReference))</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">if (void 0 === temporaryReferences)</span><span class="s3">\n              </span><span class="s1">throw Error(</span><span class="s3">\n                \&quot;</span><span class="s1">Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                  </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$T</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">value.$$typeof === REACT_CONTEXT_TYPE</span><span class="s3">\n            </span><span class="s1">? console.error(</span><span class="s3">\n                \&quot;</span><span class="s1">React Context Providers cannot be passed to Server Functions from the Client.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">Object</span><span class="s3">\&quot; </span><span class="s1">!== objectName(value)</span><span class="s3">\n              </span><span class="s1">? console.error(</span><span class="s3">\n                  \&quot;</span><span class="s1">Only plain objects can be passed to Server Functions from the Client. %s objects are not supported.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                  </span><span class="s1">objectName(value),</span><span class="s3">\n                  </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">: isSimpleObject(value)</span><span class="s3">\n                </span><span class="s1">? Object.getOwnPropertySymbols &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">((parentReference = Object.getOwnPropertySymbols(value)),</span><span class="s3">\n                  </span><span class="s1">0 &lt; parentReference.length &amp;&amp;</span><span class="s3">\n                    </span><span class="s1">console.error(</span><span class="s3">\n                      \&quot;</span><span class="s1">Only plain objects can be passed to Server Functions from the Client. Objects with symbol properties like %s are not supported.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                      </span><span class="s1">parentReference[0].description,</span><span class="s3">\n                      </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n                    </span><span class="s1">))</span><span class="s3">\n                </span><span class="s1">: console.error(</span><span class="s3">\n                    \&quot;</span><span class="s1">Only plain objects can be passed to Server Functions from the Client. Classes or other objects with methods are not supported.%s</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                    </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">return value;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">Z</span><span class="s3">\&quot; </span><span class="s1">=== value[value.length - 1] &amp;&amp; this[key] instanceof Date)</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$D</span><span class="s3">\&quot; </span><span class="s1">+ value;</span><span class="s3">\n          </span><span class="s1">key = </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">=== value[0] ? </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ value : value;</span><span class="s3">\n          </span><span class="s1">return key;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) return value;</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) return serializeNumber(value);</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) return </span><span class="s3">\&quot;</span><span class="s1">$undefined</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) {</span><span class="s3">\n          </span><span class="s1">parentReference = knownServerReferences.get(value);</span><span class="s3">\n          </span><span class="s1">if (void 0 !== parentReference)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(key = JSON.stringify(</span><span class="s3">\n                </span><span class="s1">{ id: parentReference.id, bound: parentReference.bound },</span><span class="s3">\n                </span><span class="s1">resolveToJSON</span><span class="s3">\n              </span><span class="s1">)),</span><span class="s3">\n              </span><span class="s1">null === formData &amp;&amp; (formData = new FormData()),</span><span class="s3">\n              </span><span class="s1">(parentReference = nextPartId++),</span><span class="s3">\n              </span><span class="s1">formData.set(formFieldPrefix + parentReference, key),</span><span class="s3">\n              \&quot;</span><span class="s1">$F</span><span class="s3">\&quot; </span><span class="s1">+ parentReference.toString(16)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">void 0 !== temporaryReferences &amp;&amp;</span><span class="s3">\n            </span><span class="s1">-1 === key.indexOf(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((parentReference = writtenObjects.get(this)),</span><span class="s3">\n            </span><span class="s1">void 0 !== parentReference)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">temporaryReferences.set(parentReference + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ key, value), </span><span class="s3">\&quot;</span><span class="s1">$T</span><span class="s3">\&quot;\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">throw Error(</span><span class="s3">\n            \&quot;</span><span class="s1">Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.</span><span class="s3">\&quot;\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">void 0 !== temporaryReferences &amp;&amp;</span><span class="s3">\n            </span><span class="s1">-1 === key.indexOf(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((parentReference = writtenObjects.get(this)),</span><span class="s3">\n            </span><span class="s1">void 0 !== parentReference)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">temporaryReferences.set(parentReference + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ key, value), </span><span class="s3">\&quot;</span><span class="s1">$T</span><span class="s3">\&quot;\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">throw Error(</span><span class="s3">\n            \&quot;</span><span class="s1">Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n              </span><span class="s1">describeObjectForErrorMessage(this, key)</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">bigint</span><span class="s3">\&quot; </span><span class="s1">=== typeof value) return </span><span class="s3">\&quot;</span><span class="s1">$n</span><span class="s3">\&quot; </span><span class="s1">+ value.toString(10);</span><span class="s3">\n        </span><span class="s1">throw Error(</span><span class="s3">\n          \&quot;</span><span class="s1">Type </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">typeof value +</span><span class="s3">\n            \&quot; </span><span class="s1">is not supported as an argument to a Server Function.</span><span class="s3">\&quot;\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function serializeModel(model, id) {</span><span class="s3">\n        \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof model &amp;&amp;</span><span class="s3">\n          </span><span class="s1">null !== model &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((id = </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ id.toString(16)),</span><span class="s3">\n          </span><span class="s1">writtenObjects.set(model, id),</span><span class="s3">\n          </span><span class="s1">void 0 !== temporaryReferences &amp;&amp; temporaryReferences.set(id, model));</span><span class="s3">\n        </span><span class="s1">modelRoot = model;</span><span class="s3">\n        </span><span class="s1">return JSON.stringify(model, resolveToJSON);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var nextPartId = 1,</span><span class="s3">\n        </span><span class="s1">pendingParts = 0,</span><span class="s3">\n        </span><span class="s1">formData = null,</span><span class="s3">\n        </span><span class="s1">writtenObjects = new WeakMap(),</span><span class="s3">\n        </span><span class="s1">modelRoot = root,</span><span class="s3">\n        </span><span class="s1">json = serializeModel(root, 0);</span><span class="s3">\n      </span><span class="s1">null === formData</span><span class="s3">\n        </span><span class="s1">? resolve(json)</span><span class="s3">\n        </span><span class="s1">: (formData.set(formFieldPrefix + </span><span class="s3">\&quot;</span><span class="s1">0</span><span class="s3">\&quot;</span><span class="s1">, json),</span><span class="s3">\n          </span><span class="s1">0 === pendingParts &amp;&amp; resolve(formData));</span><span class="s3">\n      </span><span class="s1">return function () {</span><span class="s3">\n        </span><span class="s1">0 &lt; pendingParts &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((pendingParts = 0),</span><span class="s3">\n          </span><span class="s1">null === formData ? resolve(json) : resolve(formData));</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function encodeFormData(reference) {</span><span class="s3">\n      </span><span class="s1">var resolve,</span><span class="s3">\n        </span><span class="s1">reject,</span><span class="s3">\n        </span><span class="s1">thenable = new Promise(function (res, rej) {</span><span class="s3">\n          </span><span class="s1">resolve = res;</span><span class="s3">\n          </span><span class="s1">reject = rej;</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">processReply(</span><span class="s3">\n        </span><span class="s1">reference,</span><span class="s3">\n        \&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">void 0,</span><span class="s3">\n        </span><span class="s1">function (body) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof body) {</span><span class="s3">\n            </span><span class="s1">var data = new FormData();</span><span class="s3">\n            </span><span class="s1">data.append(</span><span class="s3">\&quot;</span><span class="s1">0</span><span class="s3">\&quot;</span><span class="s1">, body);</span><span class="s3">\n            </span><span class="s1">body = data;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">thenable.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">thenable.value = body;</span><span class="s3">\n          </span><span class="s1">resolve(body);</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">function (e) {</span><span class="s3">\n          </span><span class="s1">thenable.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">thenable.reason = e;</span><span class="s3">\n          </span><span class="s1">reject(e);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return thenable;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function defaultEncodeFormAction(identifierPrefix) {</span><span class="s3">\n      </span><span class="s1">var referenceClosure = knownServerReferences.get(this);</span><span class="s3">\n      </span><span class="s1">if (!referenceClosure)</span><span class="s3">\n        </span><span class="s1">throw Error(</span><span class="s3">\n          \&quot;</span><span class="s1">Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.</span><span class="s3">\&quot;\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var data = null;</span><span class="s3">\n      </span><span class="s1">if (null !== referenceClosure.bound) {</span><span class="s3">\n        </span><span class="s1">data = boundCache.get(referenceClosure);</span><span class="s3">\n        </span><span class="s1">data ||</span><span class="s3">\n          </span><span class="s1">((data = encodeFormData({</span><span class="s3">\n            </span><span class="s1">id: referenceClosure.id,</span><span class="s3">\n            </span><span class="s1">bound: referenceClosure.bound</span><span class="s3">\n          </span><span class="s1">})),</span><span class="s3">\n          </span><span class="s1">boundCache.set(referenceClosure, data));</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot; </span><span class="s1">=== data.status) throw data.reason;</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">!== data.status) throw data;</span><span class="s3">\n        </span><span class="s1">referenceClosure = data.value;</span><span class="s3">\n        </span><span class="s1">var prefixedData = new FormData();</span><span class="s3">\n        </span><span class="s1">referenceClosure.forEach(function (value, key) {</span><span class="s3">\n          </span><span class="s1">prefixedData.append(</span><span class="s3">\&quot;</span><span class="s1">$ACTION_</span><span class="s3">\&quot; </span><span class="s1">+ identifierPrefix + </span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ key, value);</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">data = prefixedData;</span><span class="s3">\n        </span><span class="s1">referenceClosure = </span><span class="s3">\&quot;</span><span class="s1">$ACTION_REF_</span><span class="s3">\&quot; </span><span class="s1">+ identifierPrefix;</span><span class="s3">\n      </span><span class="s1">} else referenceClosure = </span><span class="s3">\&quot;</span><span class="s1">$ACTION_ID_</span><span class="s3">\&quot; </span><span class="s1">+ referenceClosure.id;</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">name: referenceClosure,</span><span class="s3">\n        </span><span class="s1">method: </span><span class="s3">\&quot;</span><span class="s1">POST</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">encType: </span><span class="s3">\&quot;</span><span class="s1">multipart/form-data</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">data: data</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function isSignatureEqual(referenceId, numberOfBoundArgs) {</span><span class="s3">\n      </span><span class="s1">var referenceClosure = knownServerReferences.get(this);</span><span class="s3">\n      </span><span class="s1">if (!referenceClosure)</span><span class="s3">\n        </span><span class="s1">throw Error(</span><span class="s3">\n          \&quot;</span><span class="s1">Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.</span><span class="s3">\&quot;\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (referenceClosure.id !== referenceId) return !1;</span><span class="s3">\n      </span><span class="s1">var boundPromise = referenceClosure.bound;</span><span class="s3">\n      </span><span class="s1">if (null === boundPromise) return 0 === numberOfBoundArgs;</span><span class="s3">\n      </span><span class="s1">switch (boundPromise.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return boundPromise.value.length === numberOfBoundArgs;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">throw boundPromise;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">throw boundPromise.reason;</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          </span><span class="s1">throw (</span><span class="s3">\n            </span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">!== typeof boundPromise.status &amp;&amp;</span><span class="s3">\n              </span><span class="s1">((boundPromise.status = </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">boundPromise.then(</span><span class="s3">\n                </span><span class="s1">function (boundArgs) {</span><span class="s3">\n                  </span><span class="s1">boundPromise.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n                  </span><span class="s1">boundPromise.value = boundArgs;</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">function (error) {</span><span class="s3">\n                  </span><span class="s1">boundPromise.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n                  </span><span class="s1">boundPromise.reason = error;</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">)),</span><span class="s3">\n            </span><span class="s1">boundPromise)</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createFakeServerFunction(</span><span class="s3">\n      </span><span class="s1">name,</span><span class="s3">\n      </span><span class="s1">filename,</span><span class="s3">\n      </span><span class="s1">sourceMap,</span><span class="s3">\n      </span><span class="s1">line,</span><span class="s3">\n      </span><span class="s1">col,</span><span class="s3">\n      </span><span class="s1">environmentName,</span><span class="s3">\n      </span><span class="s1">innerFunction</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">name || (name = </span><span class="s3">\&quot;</span><span class="s1">&lt;anonymous&gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var encodedName = JSON.stringify(name);</span><span class="s3">\n      </span><span class="s1">1 &gt;= line</span><span class="s3">\n        </span><span class="s1">? ((line = encodedName.length + 7),</span><span class="s3">\n          </span><span class="s1">(col =</span><span class="s3">\n            \&quot;</span><span class="s1">s=&gt;({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodedName +</span><span class="s3">\n            \&quot; \&quot;</span><span class="s1">.repeat(col &lt; line ? 0 : col - line) +</span><span class="s3">\n            \&quot;</span><span class="s1">:(...args) =&gt; s(...args)})</span><span class="s3">\\</span><span class="s1">n/* This module is a proxy to a Server Action. Turn on Source Maps to see the server source. */</span><span class="s3">\&quot;</span><span class="s1">))</span><span class="s3">\n        </span><span class="s1">: (col =</span><span class="s3">\n            \&quot;</span><span class="s1">/* This module is a proxy to a Server Action. Turn on Source Maps to see the server source. */</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">.repeat(line - 2) +</span><span class="s3">\n            \&quot;</span><span class="s1">server=&gt;({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodedName +</span><span class="s3">\n            \&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            \&quot; \&quot;</span><span class="s1">.repeat(1 &gt; col ? 0 : col - 1) +</span><span class="s3">\n            \&quot;</span><span class="s1">(...args) =&gt; server(...args)})</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">filename.startsWith(</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; (filename = </span><span class="s3">\&quot;</span><span class="s1">file://</span><span class="s3">\&quot; </span><span class="s1">+ filename);</span><span class="s3">\n      </span><span class="s1">sourceMap</span><span class="s3">\n        </span><span class="s1">? ((col +=</span><span class="s3">\n            \&quot;\\</span><span class="s1">n//# sourceURL=about://React/</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodeURIComponent(environmentName) +</span><span class="s3">\n            \&quot;</span><span class="s1">/</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodeURI(filename) +</span><span class="s3">\n            \&quot;</span><span class="s1">?s</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">fakeServerFunctionIdx++),</span><span class="s3">\n          </span><span class="s1">(col += </span><span class="s3">\&quot;\\</span><span class="s1">n//# sourceMappingURL=</span><span class="s3">\&quot; </span><span class="s1">+ sourceMap))</span><span class="s3">\n        </span><span class="s1">: filename &amp;&amp; (col += </span><span class="s3">\&quot;\\</span><span class="s1">n//# sourceURL=</span><span class="s3">\&quot; </span><span class="s1">+ filename);</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">return (0, eval)(col)(innerFunction)[name];</span><span class="s3">\n      </span><span class="s1">} catch (x) {</span><span class="s3">\n        </span><span class="s1">return innerFunction;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function registerBoundServerReference(</span><span class="s3">\n      </span><span class="s1">reference,</span><span class="s3">\n      </span><span class="s1">id,</span><span class="s3">\n      </span><span class="s1">bound,</span><span class="s3">\n      </span><span class="s1">encodeFormAction</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">knownServerReferences.has(reference) ||</span><span class="s3">\n        </span><span class="s1">(knownServerReferences.set(reference, {</span><span class="s3">\n          </span><span class="s1">id: id,</span><span class="s3">\n          </span><span class="s1">originalBind: reference.bind,</span><span class="s3">\n          </span><span class="s1">bound: bound</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">Object.defineProperties(reference, {</span><span class="s3">\n          </span><span class="s1">$$FORM_ACTION: {</span><span class="s3">\n            </span><span class="s1">value:</span><span class="s3">\n              </span><span class="s1">void 0 === encodeFormAction</span><span class="s3">\n                </span><span class="s1">? defaultEncodeFormAction</span><span class="s3">\n                </span><span class="s1">: function () {</span><span class="s3">\n                    </span><span class="s1">var referenceClosure = knownServerReferences.get(this);</span><span class="s3">\n                    </span><span class="s1">if (!referenceClosure)</span><span class="s3">\n                      </span><span class="s1">throw Error(</span><span class="s3">\n                        \&quot;</span><span class="s1">Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.</span><span class="s3">\&quot;\n                      </span><span class="s1">);</span><span class="s3">\n                    </span><span class="s1">var boundPromise = referenceClosure.bound;</span><span class="s3">\n                    </span><span class="s1">null === boundPromise &amp;&amp;</span><span class="s3">\n                      </span><span class="s1">(boundPromise = Promise.resolve([]));</span><span class="s3">\n                    </span><span class="s1">return encodeFormAction(referenceClosure.id, boundPromise);</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">$$IS_SIGNATURE_EQUAL: { value: isSignatureEqual },</span><span class="s3">\n          </span><span class="s1">bind: { value: bind }</span><span class="s3">\n        </span><span class="s1">}));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function bind() {</span><span class="s3">\n      </span><span class="s1">var referenceClosure = knownServerReferences.get(this);</span><span class="s3">\n      </span><span class="s1">if (!referenceClosure) return FunctionBind.apply(this, arguments);</span><span class="s3">\n      </span><span class="s1">var newFn = referenceClosure.originalBind.apply(this, arguments);</span><span class="s3">\n      </span><span class="s1">null != arguments[0] &amp;&amp;</span><span class="s3">\n        </span><span class="s1">console.error(</span><span class="s3">\n          </span><span class="s1">'Cannot bind </span><span class="s3">\&quot;</span><span class="s1">this</span><span class="s3">\&quot; </span><span class="s1">of a Server Action. Pass null or undefined as the first argument to .bind().'</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var args = ArraySlice.call(arguments, 1),</span><span class="s3">\n        </span><span class="s1">boundPromise = null;</span><span class="s3">\n      </span><span class="s1">boundPromise =</span><span class="s3">\n        </span><span class="s1">null !== referenceClosure.bound</span><span class="s3">\n          </span><span class="s1">? Promise.resolve(referenceClosure.bound).then(function (boundArgs) {</span><span class="s3">\n              </span><span class="s1">return boundArgs.concat(args);</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: Promise.resolve(args);</span><span class="s3">\n      </span><span class="s1">knownServerReferences.set(newFn, {</span><span class="s3">\n        </span><span class="s1">id: referenceClosure.id,</span><span class="s3">\n        </span><span class="s1">originalBind: newFn.bind,</span><span class="s3">\n        </span><span class="s1">bound: boundPromise</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">Object.defineProperties(newFn, {</span><span class="s3">\n        </span><span class="s1">$$FORM_ACTION: { value: this.$$FORM_ACTION },</span><span class="s3">\n        </span><span class="s1">$$IS_SIGNATURE_EQUAL: { value: isSignatureEqual },</span><span class="s3">\n        </span><span class="s1">bind: { value: bind }</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">return newFn;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createBoundServerReference(</span><span class="s3">\n      </span><span class="s1">metaData,</span><span class="s3">\n      </span><span class="s1">callServer,</span><span class="s3">\n      </span><span class="s1">encodeFormAction,</span><span class="s3">\n      </span><span class="s1">findSourceMapURL</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">function action() {</span><span class="s3">\n        </span><span class="s1">var args = Array.prototype.slice.call(arguments);</span><span class="s3">\n        </span><span class="s1">return bound</span><span class="s3">\n          </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== bound.status</span><span class="s3">\n            </span><span class="s1">? callServer(id, bound.value.concat(args))</span><span class="s3">\n            </span><span class="s1">: Promise.resolve(bound).then(function (boundArgs) {</span><span class="s3">\n                </span><span class="s1">return callServer(id, boundArgs.concat(args));</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: callServer(id, args);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var id = metaData.id,</span><span class="s3">\n        </span><span class="s1">bound = metaData.bound,</span><span class="s3">\n        </span><span class="s1">location = metaData.location;</span><span class="s3">\n      </span><span class="s1">if (location) {</span><span class="s3">\n        </span><span class="s1">var functionName = metaData.name || </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">filename = location[1],</span><span class="s3">\n          </span><span class="s1">line = location[2];</span><span class="s3">\n        </span><span class="s1">location = location[3];</span><span class="s3">\n        </span><span class="s1">metaData = metaData.env || </span><span class="s3">\&quot;</span><span class="s1">Server</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">findSourceMapURL =</span><span class="s3">\n          </span><span class="s1">null == findSourceMapURL</span><span class="s3">\n            </span><span class="s1">? null</span><span class="s3">\n            </span><span class="s1">: findSourceMapURL(filename, metaData);</span><span class="s3">\n        </span><span class="s1">action = createFakeServerFunction(</span><span class="s3">\n          </span><span class="s1">functionName,</span><span class="s3">\n          </span><span class="s1">filename,</span><span class="s3">\n          </span><span class="s1">findSourceMapURL,</span><span class="s3">\n          </span><span class="s1">line,</span><span class="s3">\n          </span><span class="s1">location,</span><span class="s3">\n          </span><span class="s1">metaData,</span><span class="s3">\n          </span><span class="s1">action</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">registerBoundServerReference(action, id, bound, encodeFormAction);</span><span class="s3">\n      </span><span class="s1">return action;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function parseStackLocation(error) {</span><span class="s3">\n      </span><span class="s1">error = error.stack;</span><span class="s3">\n      </span><span class="s1">error.startsWith(</span><span class="s3">\&quot;</span><span class="s1">Error: react-stack-top-frame</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(error = error.slice(29));</span><span class="s3">\n      </span><span class="s1">var endOfFirst = error.indexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (-1 !== endOfFirst) {</span><span class="s3">\n        </span><span class="s1">var endOfSecond = error.indexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">, endOfFirst + 1);</span><span class="s3">\n        </span><span class="s1">endOfFirst =</span><span class="s3">\n          </span><span class="s1">-1 === endOfSecond</span><span class="s3">\n            </span><span class="s1">? error.slice(endOfFirst + 1)</span><span class="s3">\n            </span><span class="s1">: error.slice(endOfFirst + 1, endOfSecond);</span><span class="s3">\n      </span><span class="s1">} else endOfFirst = error;</span><span class="s3">\n      </span><span class="s1">error = v8FrameRegExp.exec(endOfFirst);</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">!error &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((error = jscSpiderMonkeyFrameRegExp.exec(endOfFirst)), !error)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return null;</span><span class="s3">\n      </span><span class="s1">endOfFirst = error[1] || </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n      \&quot;</span><span class="s1">&lt;anonymous&gt;</span><span class="s3">\&quot; </span><span class="s1">=== endOfFirst &amp;&amp; (endOfFirst = </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">endOfSecond = error[2] || error[5] || </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n      \&quot;</span><span class="s1">&lt;anonymous&gt;</span><span class="s3">\&quot; </span><span class="s1">=== endOfSecond &amp;&amp; (endOfSecond = </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return [</span><span class="s3">\n        </span><span class="s1">endOfFirst,</span><span class="s3">\n        </span><span class="s1">endOfSecond,</span><span class="s3">\n        </span><span class="s1">+(error[3] || error[6]),</span><span class="s3">\n        </span><span class="s1">+(error[4] || error[7])</span><span class="s3">\n      </span><span class="s1">];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createServerReference$1(</span><span class="s3">\n      </span><span class="s1">id,</span><span class="s3">\n      </span><span class="s1">callServer,</span><span class="s3">\n      </span><span class="s1">encodeFormAction,</span><span class="s3">\n      </span><span class="s1">findSourceMapURL,</span><span class="s3">\n      </span><span class="s1">functionName</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">function action() {</span><span class="s3">\n        </span><span class="s1">var args = Array.prototype.slice.call(arguments);</span><span class="s3">\n        </span><span class="s1">return callServer(id, args);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var location = parseStackLocation(Error(</span><span class="s3">\&quot;</span><span class="s1">react-stack-top-frame</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n      </span><span class="s1">if (null !== location) {</span><span class="s3">\n        </span><span class="s1">var filename = location[1],</span><span class="s3">\n          </span><span class="s1">line = location[2];</span><span class="s3">\n        </span><span class="s1">location = location[3];</span><span class="s3">\n        </span><span class="s1">findSourceMapURL =</span><span class="s3">\n          </span><span class="s1">null == findSourceMapURL</span><span class="s3">\n            </span><span class="s1">? null</span><span class="s3">\n            </span><span class="s1">: findSourceMapURL(filename, </span><span class="s3">\&quot;</span><span class="s1">Client</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">action = createFakeServerFunction(</span><span class="s3">\n          </span><span class="s1">functionName || </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">filename,</span><span class="s3">\n          </span><span class="s1">findSourceMapURL,</span><span class="s3">\n          </span><span class="s1">line,</span><span class="s3">\n          </span><span class="s1">location,</span><span class="s3">\n          \&quot;</span><span class="s1">Client</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">action</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">registerBoundServerReference(action, id, null, encodeFormAction);</span><span class="s3">\n      </span><span class="s1">return action;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getComponentNameFromType(type) {</span><span class="s3">\n      </span><span class="s1">if (null == type) return null;</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof type)</span><span class="s3">\n        </span><span class="s1">return type.$$typeof === REACT_CLIENT_REFERENCE</span><span class="s3">\n          </span><span class="s1">? null</span><span class="s3">\n          </span><span class="s1">: type.displayName || type.name || null;</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof type) return type;</span><span class="s3">\n      </span><span class="s1">switch (type) {</span><span class="s3">\n        </span><span class="s1">case REACT_FRAGMENT_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Fragment</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_PROFILER_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Profiler</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_STRICT_MODE_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">StrictMode</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_SUSPENSE_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Suspense</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_SUSPENSE_LIST_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">SuspenseList</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">case REACT_ACTIVITY_TYPE:</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Activity</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof type)</span><span class="s3">\n        </span><span class="s1">switch (</span><span class="s3">\n          </span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">=== typeof type.tag &amp;&amp;</span><span class="s3">\n            </span><span class="s1">console.error(</span><span class="s3">\n              \&quot;</span><span class="s1">Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.</span><span class="s3">\&quot;\n            </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">type.$$typeof)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">case REACT_PORTAL_TYPE:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">Portal</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">case REACT_CONTEXT_TYPE:</span><span class="s3">\n            </span><span class="s1">return type.displayName || </span><span class="s3">\&quot;</span><span class="s1">Context</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">case REACT_CONSUMER_TYPE:</span><span class="s3">\n            </span><span class="s1">return (type._context.displayName || </span><span class="s3">\&quot;</span><span class="s1">Context</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">.Consumer</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">case REACT_FORWARD_REF_TYPE:</span><span class="s3">\n            </span><span class="s1">var innerType = type.render;</span><span class="s3">\n            </span><span class="s1">type = type.displayName;</span><span class="s3">\n            </span><span class="s1">type ||</span><span class="s3">\n              </span><span class="s1">((type = innerType.displayName || innerType.name || </span><span class="s3">\&quot;\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(type = </span><span class="s3">\&quot;\&quot; </span><span class="s1">!== type ? </span><span class="s3">\&quot;</span><span class="s1">ForwardRef(</span><span class="s3">\&quot; </span><span class="s1">+ type + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">ForwardRef</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n            </span><span class="s1">return type;</span><span class="s3">\n          </span><span class="s1">case REACT_MEMO_TYPE:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(innerType = type.displayName || null),</span><span class="s3">\n              </span><span class="s1">null !== innerType</span><span class="s3">\n                </span><span class="s1">? innerType</span><span class="s3">\n                </span><span class="s1">: getComponentNameFromType(type.type) || </span><span class="s3">\&quot;</span><span class="s1">Memo</span><span class="s3">\&quot;\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case REACT_LAZY_TYPE:</span><span class="s3">\n            </span><span class="s1">innerType = type._payload;</span><span class="s3">\n            </span><span class="s1">type = type._init;</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">return getComponentNameFromType(type(innerType));</span><span class="s3">\n            </span><span class="s1">} catch (x) {}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function prepareStackTrace(error, structuredStackTrace) {</span><span class="s3">\n      </span><span class="s1">error = (error.name || </span><span class="s3">\&quot;</span><span class="s1">Error</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot; </span><span class="s1">+ (error.message || </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; structuredStackTrace.length; i++)</span><span class="s3">\n        </span><span class="s1">error += </span><span class="s3">\&quot;\\</span><span class="s1">n    at </span><span class="s3">\&quot; </span><span class="s1">+ structuredStackTrace[i].toString();</span><span class="s3">\n      </span><span class="s1">return error;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function ReactPromise(status, value, reason) {</span><span class="s3">\n      </span><span class="s1">this.status = status;</span><span class="s3">\n      </span><span class="s1">this.value = value;</span><span class="s3">\n      </span><span class="s1">this.reason = reason;</span><span class="s3">\n      </span><span class="s1">this._debugInfo = this._debugChunk = null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function unwrapWeakResponse(weakResponse) {</span><span class="s3">\n      </span><span class="s1">weakResponse = weakResponse.weak.deref();</span><span class="s3">\n      </span><span class="s1">if (void 0 === weakResponse)</span><span class="s3">\n        </span><span class="s1">throw Error(</span><span class="s3">\n          \&quot;</span><span class="s1">We did not expect to receive new data after GC:ing the response.</span><span class="s3">\&quot;\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return weakResponse;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function cleanupDebugChannel(debugChannel) {</span><span class="s3">\n      </span><span class="s1">debugChannel(</span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function readChunk(chunk) {</span><span class="s3">\n      </span><span class="s1">switch (chunk.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModelChunk(chunk);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModuleChunk(chunk);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">switch (chunk.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return chunk.value;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">throw chunk;</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          </span><span class="s1">throw chunk.reason;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getRoot(weakResponse) {</span><span class="s3">\n      </span><span class="s1">weakResponse = unwrapWeakResponse(weakResponse);</span><span class="s3">\n      </span><span class="s1">return getChunk(weakResponse, 0);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createPendingChunk(response) {</span><span class="s3">\n      </span><span class="s1">0 === response._pendingChunks++ &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((response._weakResponse.response = response),</span><span class="s3">\n        </span><span class="s1">null !== response._pendingInitialRender &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(clearTimeout(response._pendingInitialRender),</span><span class="s3">\n          </span><span class="s1">(response._pendingInitialRender = null)));</span><span class="s3">\n      </span><span class="s1">return new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">, null, null);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function releasePendingChunk(response, chunk) {</span><span class="s3">\n      \&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp;</span><span class="s3">\n        </span><span class="s1">0 === --response._pendingChunks &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((response._weakResponse.response = null),</span><span class="s3">\n        </span><span class="s1">(response._pendingInitialRender = setTimeout(</span><span class="s3">\n          </span><span class="s1">flushInitialRenderPerformance.bind(null, response),</span><span class="s3">\n          </span><span class="s1">100</span><span class="s3">\n        </span><span class="s1">)));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function wakeChunk(listeners, value) {</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; listeners.length; i++) {</span><span class="s3">\n        </span><span class="s1">var listener = listeners[i];</span><span class="s3">\n        \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof listener</span><span class="s3">\n          </span><span class="s1">? listener(value)</span><span class="s3">\n          </span><span class="s1">: fulfillReference(listener, value);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function rejectChunk(listeners, error) {</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; listeners.length; i++) {</span><span class="s3">\n        </span><span class="s1">var listener = listeners[i];</span><span class="s3">\n        \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof listener</span><span class="s3">\n          </span><span class="s1">? listener(error)</span><span class="s3">\n          </span><span class="s1">: rejectReference(listener, error);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveBlockedCycle(resolvedChunk, reference) {</span><span class="s3">\n      </span><span class="s1">var referencedChunk = reference.handler.chunk;</span><span class="s3">\n      </span><span class="s1">if (null === referencedChunk) return null;</span><span class="s3">\n      </span><span class="s1">if (referencedChunk === resolvedChunk) return reference.handler;</span><span class="s3">\n      </span><span class="s1">reference = referencedChunk.value;</span><span class="s3">\n      </span><span class="s1">if (null !== reference)</span><span class="s3">\n        </span><span class="s1">for (</span><span class="s3">\n          </span><span class="s1">referencedChunk = 0;</span><span class="s3">\n          </span><span class="s1">referencedChunk &lt; reference.length;</span><span class="s3">\n          </span><span class="s1">referencedChunk++</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">var listener = reference[referencedChunk];</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">!== typeof listener &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((listener = resolveBlockedCycle(resolvedChunk, listener)),</span><span class="s3">\n            </span><span class="s1">null !== listener)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">return listener;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {</span><span class="s3">\n      </span><span class="s1">switch (chunk.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">wakeChunk(resolveListeners, chunk.value);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">for (var i = 0; i &lt; resolveListeners.length; i++) {</span><span class="s3">\n            </span><span class="s1">var listener = resolveListeners[i];</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">!== typeof listener) {</span><span class="s3">\n              </span><span class="s1">var cyclicHandler = resolveBlockedCycle(chunk, listener);</span><span class="s3">\n              </span><span class="s1">null !== cyclicHandler &amp;&amp;</span><span class="s3">\n                </span><span class="s1">(fulfillReference(listener, cyclicHandler.value),</span><span class="s3">\n                </span><span class="s1">resolveListeners.splice(i, 1),</span><span class="s3">\n                </span><span class="s1">i--,</span><span class="s3">\n                </span><span class="s1">null !== rejectListeners &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">((listener = rejectListeners.indexOf(listener)),</span><span class="s3">\n                  </span><span class="s1">-1 !== listener &amp;&amp; rejectListeners.splice(listener, 1)));</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">if (chunk.value)</span><span class="s3">\n            </span><span class="s1">for (i = 0; i &lt; resolveListeners.length; i++)</span><span class="s3">\n              </span><span class="s1">chunk.value.push(resolveListeners[i]);</span><span class="s3">\n          </span><span class="s1">else chunk.value = resolveListeners;</span><span class="s3">\n          </span><span class="s1">if (chunk.reason) {</span><span class="s3">\n            </span><span class="s1">if (rejectListeners)</span><span class="s3">\n              </span><span class="s1">for (</span><span class="s3">\n                </span><span class="s1">resolveListeners = 0;</span><span class="s3">\n                </span><span class="s1">resolveListeners &lt; rejectListeners.length;</span><span class="s3">\n                </span><span class="s1">resolveListeners++</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n                </span><span class="s1">chunk.reason.push(rejectListeners[resolveListeners]);</span><span class="s3">\n          </span><span class="s1">} else chunk.reason = rejectListeners;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">rejectListeners &amp;&amp; rejectChunk(rejectListeners, chunk.reason);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function triggerErrorOnChunk(response, chunk, error) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">!== chunk.status &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">!== chunk.status)</span><span class="s3">\n        </span><span class="s1">chunk.reason.error(error);</span><span class="s3">\n      </span><span class="s1">else {</span><span class="s3">\n        </span><span class="s1">releasePendingChunk(response, chunk);</span><span class="s3">\n        </span><span class="s1">var listeners = chunk.reason;</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp; null != chunk._debugChunk) {</span><span class="s3">\n          </span><span class="s1">var prevHandler = initializingHandler;</span><span class="s3">\n          </span><span class="s1">initializingHandler = null;</span><span class="s3">\n          </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">chunk.value = null;</span><span class="s3">\n          </span><span class="s1">chunk.reason = null;</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">initializeDebugChunk(response, chunk), (chunk._debugChunk = null);</span><span class="s3">\n          </span><span class="s1">} finally {</span><span class="s3">\n            </span><span class="s1">initializingHandler = prevHandler;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.reason = error;</span><span class="s3">\n        </span><span class="s1">null !== listeners &amp;&amp; rejectChunk(listeners, error);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createResolvedModelChunk(response, value) {</span><span class="s3">\n      </span><span class="s1">return new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">, value, response);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createResolvedIteratorResultChunk(response, value, done) {</span><span class="s3">\n      </span><span class="s1">return new ReactPromise(</span><span class="s3">\n        \&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">(done ? '{</span><span class="s3">\&quot;</span><span class="s1">done</span><span class="s3">\&quot;</span><span class="s1">:true,</span><span class="s3">\&quot;</span><span class="s1">value</span><span class="s3">\&quot;</span><span class="s1">:' : '{</span><span class="s3">\&quot;</span><span class="s1">done</span><span class="s3">\&quot;</span><span class="s1">:false,</span><span class="s3">\&quot;</span><span class="s1">value</span><span class="s3">\&quot;</span><span class="s1">:') +</span><span class="s3">\n          </span><span class="s1">value +</span><span class="s3">\n          \&quot;</span><span class="s1">}</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n        </span><span class="s1">response</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveIteratorResultChunk(response, chunk, value, done) {</span><span class="s3">\n      </span><span class="s1">resolveModelChunk(</span><span class="s3">\n        </span><span class="s1">response,</span><span class="s3">\n        </span><span class="s1">chunk,</span><span class="s3">\n        </span><span class="s1">(done ? '{</span><span class="s3">\&quot;</span><span class="s1">done</span><span class="s3">\&quot;</span><span class="s1">:true,</span><span class="s3">\&quot;</span><span class="s1">value</span><span class="s3">\&quot;</span><span class="s1">:' : '{</span><span class="s3">\&quot;</span><span class="s1">done</span><span class="s3">\&quot;</span><span class="s1">:false,</span><span class="s3">\&quot;</span><span class="s1">value</span><span class="s3">\&quot;</span><span class="s1">:') +</span><span class="s3">\n          </span><span class="s1">value +</span><span class="s3">\n          \&quot;</span><span class="s1">}</span><span class="s3">\&quot;\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveModelChunk(response, chunk, value) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">!== chunk.status) chunk.reason.enqueueModel(value);</span><span class="s3">\n      </span><span class="s1">else {</span><span class="s3">\n        </span><span class="s1">releasePendingChunk(response, chunk);</span><span class="s3">\n        </span><span class="s1">var resolveListeners = chunk.value,</span><span class="s3">\n          </span><span class="s1">rejectListeners = chunk.reason;</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.value = value;</span><span class="s3">\n        </span><span class="s1">chunk.reason = response;</span><span class="s3">\n        </span><span class="s1">null !== resolveListeners &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(initializeModelChunk(chunk),</span><span class="s3">\n          </span><span class="s1">wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveModuleChunk(response, chunk, value) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status || </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status) {</span><span class="s3">\n        </span><span class="s1">releasePendingChunk(response, chunk);</span><span class="s3">\n        </span><span class="s1">response = chunk.value;</span><span class="s3">\n        </span><span class="s1">var rejectListeners = chunk.reason;</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.value = value;</span><span class="s3">\n        </span><span class="s1">value = [];</span><span class="s3">\n        </span><span class="s1">null !== value &amp;&amp; null != chunk._debugInfo</span><span class="s3">\n          </span><span class="s1">? chunk._debugInfo.push.apply(chunk._debugInfo, value)</span><span class="s3">\n          </span><span class="s1">: (chunk._debugInfo = value);</span><span class="s3">\n        </span><span class="s1">null !== response &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(initializeModuleChunk(chunk),</span><span class="s3">\n          </span><span class="s1">wakeChunkIfInitialized(chunk, response, rejectListeners));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeDebugChunk(response, chunk) {</span><span class="s3">\n      </span><span class="s1">var debugChunk = chunk._debugChunk;</span><span class="s3">\n      </span><span class="s1">if (null !== debugChunk) {</span><span class="s3">\n        </span><span class="s1">var debugInfo = chunk._debugInfo || (chunk._debugInfo = []);</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot; </span><span class="s1">=== debugChunk.status) {</span><span class="s3">\n            </span><span class="s1">for (</span><span class="s3">\n              </span><span class="s1">var idx = debugInfo.length, c = debugChunk._debugChunk;</span><span class="s3">\n              </span><span class="s1">null !== c;</span><span class="s3">\n\n            </span><span class="s1">)</span><span class="s3">\n              \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">!== c.status &amp;&amp; idx++, (c = c._debugChunk);</span><span class="s3">\n            </span><span class="s1">initializeModelChunk(debugChunk);</span><span class="s3">\n            </span><span class="s1">switch (debugChunk.status) {</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">debugInfo[idx] = initializeDebugInfo(</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">debugChunk.value</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">waitForReference(</span><span class="s3">\n                  </span><span class="s1">debugChunk,</span><span class="s3">\n                  </span><span class="s1">debugInfo,</span><span class="s3">\n                  \&quot;\&quot; </span><span class="s1">+ idx,</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">initializeDebugInfo,</span><span class="s3">\n                  </span><span class="s1">[</span><span class="s3">\&quot;\&quot;</span><span class="s1">]</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">default:</span><span class="s3">\n                </span><span class="s1">throw debugChunk.reason;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">} else</span><span class="s3">\n            </span><span class="s1">switch (debugChunk.status) {</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">waitForReference(</span><span class="s3">\n                  </span><span class="s1">debugChunk,</span><span class="s3">\n                  </span><span class="s1">{},</span><span class="s3">\n                  \&quot;</span><span class="s1">debug</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">initializeDebugInfo,</span><span class="s3">\n                  </span><span class="s1">[</span><span class="s3">\&quot;\&quot;</span><span class="s1">]</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">default:</span><span class="s3">\n                </span><span class="s1">throw debugChunk.reason;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} catch (error) {</span><span class="s3">\n          </span><span class="s1">triggerErrorOnChunk(response, chunk, error);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeModelChunk(chunk) {</span><span class="s3">\n      </span><span class="s1">var prevHandler = initializingHandler;</span><span class="s3">\n      </span><span class="s1">initializingHandler = null;</span><span class="s3">\n      </span><span class="s1">var resolvedModel = chunk.value,</span><span class="s3">\n        </span><span class="s1">response = chunk.reason;</span><span class="s3">\n      </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">chunk.value = null;</span><span class="s3">\n      </span><span class="s1">chunk.reason = null;</span><span class="s3">\n      </span><span class="s1">initializeDebugChunk(response, chunk);</span><span class="s3">\n      </span><span class="s1">chunk._debugChunk = null;</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">var value = JSON.parse(resolvedModel, response._fromJSON),</span><span class="s3">\n          </span><span class="s1">resolveListeners = chunk.value;</span><span class="s3">\n        </span><span class="s1">null !== resolveListeners &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((chunk.value = null),</span><span class="s3">\n          </span><span class="s1">(chunk.reason = null),</span><span class="s3">\n          </span><span class="s1">wakeChunk(resolveListeners, value));</span><span class="s3">\n        </span><span class="s1">if (null !== initializingHandler) {</span><span class="s3">\n          </span><span class="s1">if (initializingHandler.errored) throw initializingHandler.reason;</span><span class="s3">\n          </span><span class="s1">if (0 &lt; initializingHandler.deps) {</span><span class="s3">\n            </span><span class="s1">initializingHandler.value = value;</span><span class="s3">\n            </span><span class="s1">initializingHandler.chunk = chunk;</span><span class="s3">\n            </span><span class="s1">return;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.value = value;</span><span class="s3">\n      </span><span class="s1">} catch (error) {</span><span class="s3">\n        </span><span class="s1">(chunk.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">), (chunk.reason = error);</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">initializingHandler = prevHandler;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeModuleChunk(chunk) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">var value = requireModule(chunk.value);</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.value = value;</span><span class="s3">\n      </span><span class="s1">} catch (error) {</span><span class="s3">\n        </span><span class="s1">(chunk.status = </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">), (chunk.reason = error);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function reportGlobalError(weakResponse, error) {</span><span class="s3">\n      </span><span class="s1">if (void 0 !== weakResponse.weak.deref()) {</span><span class="s3">\n        </span><span class="s1">var response = unwrapWeakResponse(weakResponse);</span><span class="s3">\n        </span><span class="s1">response._closed = !0;</span><span class="s3">\n        </span><span class="s1">response._closedReason = error;</span><span class="s3">\n        </span><span class="s1">response._chunks.forEach(function (chunk) {</span><span class="s3">\n          \&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp;</span><span class="s3">\n            </span><span class="s1">triggerErrorOnChunk(response, chunk, error);</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">weakResponse = response._debugChannel;</span><span class="s3">\n        </span><span class="s1">void 0 !== weakResponse &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(weakResponse(</span><span class="s3">\&quot;\&quot;</span><span class="s1">), (response._debugChannel = void 0));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function nullRefGetter() {</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getTaskName(type) {</span><span class="s3">\n      </span><span class="s1">if (type === REACT_FRAGMENT_TYPE) return </span><span class="s3">\&quot;</span><span class="s1">&lt;&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof type) return '</span><span class="s3">\&quot;</span><span class="s1">use client</span><span class="s3">\&quot;</span><span class="s1">';</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof type &amp;&amp;</span><span class="s3">\n        </span><span class="s1">null !== type &amp;&amp;</span><span class="s3">\n        </span><span class="s1">type.$$typeof === REACT_LAZY_TYPE</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return type._init === readChunk ? '</span><span class="s3">\&quot;</span><span class="s1">use client</span><span class="s3">\&quot;</span><span class="s1">' : </span><span class="s3">\&quot;</span><span class="s1">&lt;...&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">var name = getComponentNameFromType(type);</span><span class="s3">\n        </span><span class="s1">return name ? </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ name + </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">&lt;...&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">} catch (x) {</span><span class="s3">\n        </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">&lt;...&gt;</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeElement(response, element) {</span><span class="s3">\n      </span><span class="s1">var stack = element._debugStack,</span><span class="s3">\n        </span><span class="s1">owner = element._owner;</span><span class="s3">\n      </span><span class="s1">null === owner &amp;&amp; (element._owner = response._debugRootOwner);</span><span class="s3">\n      </span><span class="s1">var env = response._rootEnvironmentName;</span><span class="s3">\n      </span><span class="s1">null !== owner &amp;&amp; null != owner.env &amp;&amp; (env = owner.env);</span><span class="s3">\n      </span><span class="s1">var normalizedStackTrace = null;</span><span class="s3">\n      </span><span class="s1">null === owner &amp;&amp; null != response._debugRootStack</span><span class="s3">\n        </span><span class="s1">? (normalizedStackTrace = response._debugRootStack)</span><span class="s3">\n        </span><span class="s1">: null !== stack &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(normalizedStackTrace = createFakeJSXCallStackInDEV(</span><span class="s3">\n            </span><span class="s1">response,</span><span class="s3">\n            </span><span class="s1">stack,</span><span class="s3">\n            </span><span class="s1">env</span><span class="s3">\n          </span><span class="s1">));</span><span class="s3">\n      </span><span class="s1">element._debugStack = normalizedStackTrace;</span><span class="s3">\n      </span><span class="s1">normalizedStackTrace = null;</span><span class="s3">\n      </span><span class="s1">supportsCreateTask &amp;&amp;</span><span class="s3">\n        </span><span class="s1">null !== stack &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((normalizedStackTrace = console.createTask.bind(</span><span class="s3">\n          </span><span class="s1">console,</span><span class="s3">\n          </span><span class="s1">getTaskName(element.type)</span><span class="s3">\n        </span><span class="s1">)),</span><span class="s3">\n        </span><span class="s1">(stack = buildFakeCallStack(</span><span class="s3">\n          </span><span class="s1">response,</span><span class="s3">\n          </span><span class="s1">stack,</span><span class="s3">\n          </span><span class="s1">env,</span><span class="s3">\n          </span><span class="s1">!1,</span><span class="s3">\n          </span><span class="s1">normalizedStackTrace</span><span class="s3">\n        </span><span class="s1">)),</span><span class="s3">\n        </span><span class="s1">(env = null === owner ? null : initializeFakeTask(response, owner)),</span><span class="s3">\n        </span><span class="s1">null === env</span><span class="s3">\n          </span><span class="s1">? ((env = response._debugRootTask),</span><span class="s3">\n            </span><span class="s1">(normalizedStackTrace = null != env ? env.run(stack) : stack()))</span><span class="s3">\n          </span><span class="s1">: (normalizedStackTrace = env.run(stack)));</span><span class="s3">\n      </span><span class="s1">element._debugTask = normalizedStackTrace;</span><span class="s3">\n      </span><span class="s1">null !== owner &amp;&amp; initializeFakeStack(response, owner);</span><span class="s3">\n      </span><span class="s1">Object.freeze(element.props);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createLazyChunkWrapper(chunk) {</span><span class="s3">\n      </span><span class="s1">var lazyType = {</span><span class="s3">\n        </span><span class="s1">$$typeof: REACT_LAZY_TYPE,</span><span class="s3">\n        </span><span class="s1">_payload: chunk,</span><span class="s3">\n        </span><span class="s1">_init: readChunk</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">chunk = chunk._debugInfo || (chunk._debugInfo = []);</span><span class="s3">\n      </span><span class="s1">lazyType._debugInfo = chunk;</span><span class="s3">\n      </span><span class="s1">return lazyType;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getChunk(response, id) {</span><span class="s3">\n      </span><span class="s1">var chunks = response._chunks,</span><span class="s3">\n        </span><span class="s1">chunk = chunks.get(id);</span><span class="s3">\n      </span><span class="s1">chunk ||</span><span class="s3">\n        </span><span class="s1">((chunk = response._closed</span><span class="s3">\n          </span><span class="s1">? new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">, null, response._closedReason)</span><span class="s3">\n          </span><span class="s1">: createPendingChunk(response)),</span><span class="s3">\n        </span><span class="s1">chunks.set(id, chunk));</span><span class="s3">\n      </span><span class="s1">return chunk;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function fulfillReference(reference, value) {</span><span class="s3">\n      </span><span class="s1">for (</span><span class="s3">\n        </span><span class="s1">var response = reference.response,</span><span class="s3">\n          </span><span class="s1">handler = reference.handler,</span><span class="s3">\n          </span><span class="s1">parentObject = reference.parentObject,</span><span class="s3">\n          </span><span class="s1">key = reference.key,</span><span class="s3">\n          </span><span class="s1">map = reference.map,</span><span class="s3">\n          </span><span class="s1">path = reference.path,</span><span class="s3">\n          </span><span class="s1">i = 1;</span><span class="s3">\n        </span><span class="s1">i &lt; path.length;</span><span class="s3">\n        </span><span class="s1">i++</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">for (; value.$$typeof === REACT_LAZY_TYPE; )</span><span class="s3">\n          </span><span class="s1">if (((value = value._payload), value === handler.chunk))</span><span class="s3">\n            </span><span class="s1">value = handler.value;</span><span class="s3">\n          </span><span class="s1">else {</span><span class="s3">\n            </span><span class="s1">switch (value.status) {</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">initializeModelChunk(value);</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">initializeModuleChunk(value);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">switch (value.status) {</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">value = value.value;</span><span class="s3">\n                </span><span class="s1">continue;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">var cyclicHandler = resolveBlockedCycle(value, reference);</span><span class="s3">\n                </span><span class="s1">if (null !== cyclicHandler) {</span><span class="s3">\n                  </span><span class="s1">value = cyclicHandler.value;</span><span class="s3">\n                  </span><span class="s1">continue;</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">path.splice(0, i - 1);</span><span class="s3">\n                </span><span class="s1">null === value.value</span><span class="s3">\n                  </span><span class="s1">? (value.value = [reference])</span><span class="s3">\n                  </span><span class="s1">: value.value.push(reference);</span><span class="s3">\n                </span><span class="s1">null === value.reason</span><span class="s3">\n                  </span><span class="s1">? (value.reason = [reference])</span><span class="s3">\n                  </span><span class="s1">: value.reason.push(reference);</span><span class="s3">\n                </span><span class="s1">return;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">return;</span><span class="s3">\n              </span><span class="s1">default:</span><span class="s3">\n                </span><span class="s1">rejectReference(reference, value.reason);</span><span class="s3">\n                </span><span class="s1">return;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">value = value[path[i]];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">reference = map(response, value, parentObject, key);</span><span class="s3">\n      </span><span class="s1">parentObject[key] = reference;</span><span class="s3">\n      \&quot;\&quot; </span><span class="s1">=== key &amp;&amp; null === handler.value &amp;&amp; (handler.value = reference);</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">parentObject[0] === REACT_ELEMENT_TYPE &amp;&amp;</span><span class="s3">\n        \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof handler.value &amp;&amp;</span><span class="s3">\n        </span><span class="s1">null !== handler.value &amp;&amp;</span><span class="s3">\n        </span><span class="s1">handler.value.$$typeof === REACT_ELEMENT_TYPE</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">switch (((parentObject = handler.value), key)) {</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">3</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">parentObject.props = reference;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">4</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">parentObject._owner = reference;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">parentObject._debugStack = reference;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">handler.deps--;</span><span class="s3">\n      </span><span class="s1">0 === handler.deps &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((key = handler.chunk),</span><span class="s3">\n        </span><span class="s1">null !== key &amp;&amp;</span><span class="s3">\n          \&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== key.status &amp;&amp;</span><span class="s3">\n          </span><span class="s1">((parentObject = key.value),</span><span class="s3">\n          </span><span class="s1">(key.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">(key.value = handler.value),</span><span class="s3">\n          </span><span class="s1">(key.reason = handler.reason),</span><span class="s3">\n          </span><span class="s1">null !== parentObject &amp;&amp; wakeChunk(parentObject, handler.value)));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function rejectReference(reference, error) {</span><span class="s3">\n      </span><span class="s1">var handler = reference.handler;</span><span class="s3">\n      </span><span class="s1">reference = reference.response;</span><span class="s3">\n      </span><span class="s1">if (!handler.errored) {</span><span class="s3">\n        </span><span class="s1">var blockedValue = handler.value;</span><span class="s3">\n        </span><span class="s1">handler.errored = !0;</span><span class="s3">\n        </span><span class="s1">handler.value = null;</span><span class="s3">\n        </span><span class="s1">handler.reason = error;</span><span class="s3">\n        </span><span class="s1">handler = handler.chunk;</span><span class="s3">\n        </span><span class="s1">if (null !== handler &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== handler.status) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof blockedValue &amp;&amp;</span><span class="s3">\n            </span><span class="s1">null !== blockedValue &amp;&amp;</span><span class="s3">\n            </span><span class="s1">blockedValue.$$typeof === REACT_ELEMENT_TYPE</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">var erroredComponent = {</span><span class="s3">\n              </span><span class="s1">name: getComponentNameFromType(blockedValue.type) || </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n              </span><span class="s1">owner: blockedValue._owner</span><span class="s3">\n            </span><span class="s1">};</span><span class="s3">\n            </span><span class="s1">erroredComponent.debugStack = blockedValue._debugStack;</span><span class="s3">\n            </span><span class="s1">supportsCreateTask &amp;&amp;</span><span class="s3">\n              </span><span class="s1">(erroredComponent.debugTask = blockedValue._debugTask);</span><span class="s3">\n            </span><span class="s1">(handler._debugInfo || (handler._debugInfo = [])).push(</span><span class="s3">\n              </span><span class="s1">erroredComponent</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">triggerErrorOnChunk(reference, handler, error);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function waitForReference(</span><span class="s3">\n      </span><span class="s1">referencedChunk,</span><span class="s3">\n      </span><span class="s1">parentObject,</span><span class="s3">\n      </span><span class="s1">key,</span><span class="s3">\n      </span><span class="s1">response,</span><span class="s3">\n      </span><span class="s1">map,</span><span class="s3">\n      </span><span class="s1">path</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">void 0 === response._debugChannel &amp;&amp;</span><span class="s3">\n        \&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== referencedChunk.status &amp;&amp;</span><span class="s3">\n        </span><span class="s1">parentObject[0] === REACT_ELEMENT_TYPE &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">4</span><span class="s3">\&quot; </span><span class="s1">=== key || </span><span class="s3">\&quot;</span><span class="s1">5</span><span class="s3">\&quot; </span><span class="s1">=== key)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return null;</span><span class="s3">\n      </span><span class="s1">if (initializingHandler) {</span><span class="s3">\n        </span><span class="s1">var handler = initializingHandler;</span><span class="s3">\n        </span><span class="s1">handler.deps++;</span><span class="s3">\n      </span><span class="s1">} else</span><span class="s3">\n        </span><span class="s1">handler = initializingHandler = {</span><span class="s3">\n          </span><span class="s1">parent: null,</span><span class="s3">\n          </span><span class="s1">chunk: null,</span><span class="s3">\n          </span><span class="s1">value: null,</span><span class="s3">\n          </span><span class="s1">reason: null,</span><span class="s3">\n          </span><span class="s1">deps: 1,</span><span class="s3">\n          </span><span class="s1">errored: !1</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">parentObject = {</span><span class="s3">\n        </span><span class="s1">response: response,</span><span class="s3">\n        </span><span class="s1">handler: handler,</span><span class="s3">\n        </span><span class="s1">parentObject: parentObject,</span><span class="s3">\n        </span><span class="s1">key: key,</span><span class="s3">\n        </span><span class="s1">map: map,</span><span class="s3">\n        </span><span class="s1">path: path</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">null === referencedChunk.value</span><span class="s3">\n        </span><span class="s1">? (referencedChunk.value = [parentObject])</span><span class="s3">\n        </span><span class="s1">: referencedChunk.value.push(parentObject);</span><span class="s3">\n      </span><span class="s1">null === referencedChunk.reason</span><span class="s3">\n        </span><span class="s1">? (referencedChunk.reason = [parentObject])</span><span class="s3">\n        </span><span class="s1">: referencedChunk.reason.push(parentObject);</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function loadServerReference(response, metaData, parentObject, key) {</span><span class="s3">\n      </span><span class="s1">if (!response._serverReferenceConfig)</span><span class="s3">\n        </span><span class="s1">return createBoundServerReference(</span><span class="s3">\n          </span><span class="s1">metaData,</span><span class="s3">\n          </span><span class="s1">response._callServer,</span><span class="s3">\n          </span><span class="s1">response._encodeFormAction,</span><span class="s3">\n          </span><span class="s1">response._debugFindSourceMapURL</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var serverReference = resolveServerReference(</span><span class="s3">\n          </span><span class="s1">response._serverReferenceConfig,</span><span class="s3">\n          </span><span class="s1">metaData.id</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">promise = preloadModule(serverReference);</span><span class="s3">\n      </span><span class="s1">if (promise)</span><span class="s3">\n        </span><span class="s1">metaData.bound &amp;&amp; (promise = Promise.all([promise, metaData.bound]));</span><span class="s3">\n      </span><span class="s1">else if (metaData.bound) promise = Promise.resolve(metaData.bound);</span><span class="s3">\n      </span><span class="s1">else</span><span class="s3">\n        </span><span class="s1">return (</span><span class="s3">\n          </span><span class="s1">(promise = requireModule(serverReference)),</span><span class="s3">\n          </span><span class="s1">registerBoundServerReference(</span><span class="s3">\n            </span><span class="s1">promise,</span><span class="s3">\n            </span><span class="s1">metaData.id,</span><span class="s3">\n            </span><span class="s1">metaData.bound,</span><span class="s3">\n            </span><span class="s1">response._encodeFormAction</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">promise</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if (initializingHandler) {</span><span class="s3">\n        </span><span class="s1">var handler = initializingHandler;</span><span class="s3">\n        </span><span class="s1">handler.deps++;</span><span class="s3">\n      </span><span class="s1">} else</span><span class="s3">\n        </span><span class="s1">handler = initializingHandler = {</span><span class="s3">\n          </span><span class="s1">parent: null,</span><span class="s3">\n          </span><span class="s1">chunk: null,</span><span class="s3">\n          </span><span class="s1">value: null,</span><span class="s3">\n          </span><span class="s1">reason: null,</span><span class="s3">\n          </span><span class="s1">deps: 1,</span><span class="s3">\n          </span><span class="s1">errored: !1</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">promise.then(</span><span class="s3">\n        </span><span class="s1">function () {</span><span class="s3">\n          </span><span class="s1">var resolvedValue = requireModule(serverReference);</span><span class="s3">\n          </span><span class="s1">if (metaData.bound) {</span><span class="s3">\n            </span><span class="s1">var boundArgs = metaData.bound.value.slice(0);</span><span class="s3">\n            </span><span class="s1">boundArgs.unshift(null);</span><span class="s3">\n            </span><span class="s1">resolvedValue = resolvedValue.bind.apply(resolvedValue, boundArgs);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">registerBoundServerReference(</span><span class="s3">\n            </span><span class="s1">resolvedValue,</span><span class="s3">\n            </span><span class="s1">metaData.id,</span><span class="s3">\n            </span><span class="s1">metaData.bound,</span><span class="s3">\n            </span><span class="s1">response._encodeFormAction</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">parentObject[key] = resolvedValue;</span><span class="s3">\n          \&quot;\&quot; </span><span class="s1">=== key &amp;&amp;</span><span class="s3">\n            </span><span class="s1">null === handler.value &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(handler.value = resolvedValue);</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">parentObject[0] === REACT_ELEMENT_TYPE &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof handler.value &amp;&amp;</span><span class="s3">\n            </span><span class="s1">null !== handler.value &amp;&amp;</span><span class="s3">\n            </span><span class="s1">handler.value.$$typeof === REACT_ELEMENT_TYPE</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">switch (((boundArgs = handler.value), key)) {</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">3</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">boundArgs.props = resolvedValue;</span><span class="s3">\n                </span><span class="s1">break;</span><span class="s3">\n              </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">4</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">boundArgs._owner = resolvedValue;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">handler.deps--;</span><span class="s3">\n          </span><span class="s1">0 === handler.deps &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((resolvedValue = handler.chunk),</span><span class="s3">\n            </span><span class="s1">null !== resolvedValue &amp;&amp;</span><span class="s3">\n              \&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== resolvedValue.status &amp;&amp;</span><span class="s3">\n              </span><span class="s1">((boundArgs = resolvedValue.value),</span><span class="s3">\n              </span><span class="s1">(resolvedValue.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(resolvedValue.value = handler.value),</span><span class="s3">\n              </span><span class="s1">null !== boundArgs &amp;&amp; wakeChunk(boundArgs, handler.value)));</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">function (error) {</span><span class="s3">\n          </span><span class="s1">if (!handler.errored) {</span><span class="s3">\n            </span><span class="s1">var blockedValue = handler.value;</span><span class="s3">\n            </span><span class="s1">handler.errored = !0;</span><span class="s3">\n            </span><span class="s1">handler.value = null;</span><span class="s3">\n            </span><span class="s1">handler.reason = error;</span><span class="s3">\n            </span><span class="s1">var chunk = handler.chunk;</span><span class="s3">\n            </span><span class="s1">if (null !== chunk &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status) {</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                \&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof blockedValue &amp;&amp;</span><span class="s3">\n                </span><span class="s1">null !== blockedValue &amp;&amp;</span><span class="s3">\n                </span><span class="s1">blockedValue.$$typeof === REACT_ELEMENT_TYPE</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">var erroredComponent = {</span><span class="s3">\n                  </span><span class="s1">name: getComponentNameFromType(blockedValue.type) || </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n                  </span><span class="s1">owner: blockedValue._owner</span><span class="s3">\n                </span><span class="s1">};</span><span class="s3">\n                </span><span class="s1">erroredComponent.debugStack = blockedValue._debugStack;</span><span class="s3">\n                </span><span class="s1">supportsCreateTask &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">(erroredComponent.debugTask = blockedValue._debugTask);</span><span class="s3">\n                </span><span class="s1">(chunk._debugInfo || (chunk._debugInfo = [])).push(</span><span class="s3">\n                  </span><span class="s1">erroredComponent</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">triggerErrorOnChunk(response, chunk, error);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getOutlinedModel(response, reference, parentObject, key, map) {</span><span class="s3">\n      </span><span class="s1">reference = reference.split(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var id = parseInt(reference[0], 16);</span><span class="s3">\n      </span><span class="s1">id = getChunk(response, id);</span><span class="s3">\n      </span><span class="s1">switch (id.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModelChunk(id);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModuleChunk(id);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">switch (id.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">for (var value = id.value, i = 1; i &lt; reference.length; i++) {</span><span class="s3">\n            </span><span class="s1">for (; value.$$typeof === REACT_LAZY_TYPE; ) {</span><span class="s3">\n              </span><span class="s1">value = value._payload;</span><span class="s3">\n              </span><span class="s1">switch (value.status) {</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">initializeModelChunk(value);</span><span class="s3">\n                  </span><span class="s1">break;</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">initializeModuleChunk(value);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">switch (value.status) {</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">value = value.value;</span><span class="s3">\n                  </span><span class="s1">break;</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">return waitForReference(</span><span class="s3">\n                    </span><span class="s1">value,</span><span class="s3">\n                    </span><span class="s1">parentObject,</span><span class="s3">\n                    </span><span class="s1">key,</span><span class="s3">\n                    </span><span class="s1">response,</span><span class="s3">\n                    </span><span class="s1">map,</span><span class="s3">\n                    </span><span class="s1">reference.slice(i - 1)</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">return (</span><span class="s3">\n                    </span><span class="s1">initializingHandler</span><span class="s3">\n                      </span><span class="s1">? ((response = initializingHandler), response.deps++)</span><span class="s3">\n                      </span><span class="s1">: (initializingHandler = {</span><span class="s3">\n                          </span><span class="s1">parent: null,</span><span class="s3">\n                          </span><span class="s1">chunk: null,</span><span class="s3">\n                          </span><span class="s1">value: null,</span><span class="s3">\n                          </span><span class="s1">reason: null,</span><span class="s3">\n                          </span><span class="s1">deps: 1,</span><span class="s3">\n                          </span><span class="s1">errored: !1</span><span class="s3">\n                        </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">null</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">default:</span><span class="s3">\n                  </span><span class="s1">return (</span><span class="s3">\n                    </span><span class="s1">initializingHandler</span><span class="s3">\n                      </span><span class="s1">? ((initializingHandler.errored = !0),</span><span class="s3">\n                        </span><span class="s1">(initializingHandler.value = null),</span><span class="s3">\n                        </span><span class="s1">(initializingHandler.reason = value.reason))</span><span class="s3">\n                      </span><span class="s1">: (initializingHandler = {</span><span class="s3">\n                          </span><span class="s1">parent: null,</span><span class="s3">\n                          </span><span class="s1">chunk: null,</span><span class="s3">\n                          </span><span class="s1">value: null,</span><span class="s3">\n                          </span><span class="s1">reason: value.reason,</span><span class="s3">\n                          </span><span class="s1">deps: 0,</span><span class="s3">\n                          </span><span class="s1">errored: !0</span><span class="s3">\n                        </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">null</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">value = value[reference[i]];</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">response = map(response, value, parentObject, key);</span><span class="s3">\n          </span><span class="s1">id._debugInfo &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">!== typeof response ||</span><span class="s3">\n              </span><span class="s1">null === response ||</span><span class="s3">\n              </span><span class="s1">(!isArrayImpl(response) &amp;&amp;</span><span class="s3">\n                \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">!== typeof response[ASYNC_ITERATOR] &amp;&amp;</span><span class="s3">\n                </span><span class="s1">response.$$typeof !== REACT_ELEMENT_TYPE) ||</span><span class="s3">\n              </span><span class="s1">response._debugInfo ||</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(response, </span><span class="s3">\&quot;</span><span class="s1">_debugInfo</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">configurable: !1,</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">writable: !0,</span><span class="s3">\n                </span><span class="s1">value: id._debugInfo</span><span class="s3">\n              </span><span class="s1">}));</span><span class="s3">\n          </span><span class="s1">return response;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return waitForReference(</span><span class="s3">\n            </span><span class="s1">id,</span><span class="s3">\n            </span><span class="s1">parentObject,</span><span class="s3">\n            </span><span class="s1">key,</span><span class="s3">\n            </span><span class="s1">response,</span><span class="s3">\n            </span><span class="s1">map,</span><span class="s3">\n            </span><span class="s1">reference</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">initializingHandler</span><span class="s3">\n              </span><span class="s1">? ((response = initializingHandler), response.deps++)</span><span class="s3">\n              </span><span class="s1">: (initializingHandler = {</span><span class="s3">\n                  </span><span class="s1">parent: null,</span><span class="s3">\n                  </span><span class="s1">chunk: null,</span><span class="s3">\n                  </span><span class="s1">value: null,</span><span class="s3">\n                  </span><span class="s1">reason: null,</span><span class="s3">\n                  </span><span class="s1">deps: 1,</span><span class="s3">\n                  </span><span class="s1">errored: !1</span><span class="s3">\n                </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">null</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">initializingHandler</span><span class="s3">\n              </span><span class="s1">? ((initializingHandler.errored = !0),</span><span class="s3">\n                </span><span class="s1">(initializingHandler.value = null),</span><span class="s3">\n                </span><span class="s1">(initializingHandler.reason = id.reason))</span><span class="s3">\n              </span><span class="s1">: (initializingHandler = {</span><span class="s3">\n                  </span><span class="s1">parent: null,</span><span class="s3">\n                  </span><span class="s1">chunk: null,</span><span class="s3">\n                  </span><span class="s1">value: null,</span><span class="s3">\n                  </span><span class="s1">reason: id.reason,</span><span class="s3">\n                  </span><span class="s1">deps: 0,</span><span class="s3">\n                  </span><span class="s1">errored: !0</span><span class="s3">\n                </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">null</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createMap(response, model) {</span><span class="s3">\n      </span><span class="s1">return new Map(model);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createSet(response, model) {</span><span class="s3">\n      </span><span class="s1">return new Set(model);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createBlob(response, model) {</span><span class="s3">\n      </span><span class="s1">return new Blob(model.slice(1), { type: model[0] });</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createFormData(response, model) {</span><span class="s3">\n      </span><span class="s1">response = new FormData();</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; model.length; i++)</span><span class="s3">\n        </span><span class="s1">response.append(model[i][0], model[i][1]);</span><span class="s3">\n      </span><span class="s1">return response;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function applyConstructor(response, model, parentObject) {</span><span class="s3">\n      </span><span class="s1">Object.setPrototypeOf(parentObject, model.prototype);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function defineLazyGetter(response, chunk, parentObject, key) {</span><span class="s3">\n      </span><span class="s1">Object.defineProperty(parentObject, key, {</span><span class="s3">\n        </span><span class="s1">get: function () {</span><span class="s3">\n          \&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp; initializeModelChunk(chunk);</span><span class="s3">\n          </span><span class="s1">switch (chunk.status) {</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">return chunk.value;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">throw chunk.reason;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">enumerable: !0,</span><span class="s3">\n        </span><span class="s1">configurable: !1</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function extractIterator(response, model) {</span><span class="s3">\n      </span><span class="s1">return model[Symbol.iterator]();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createModel(response, model) {</span><span class="s3">\n      </span><span class="s1">return model;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getInferredFunctionApproximate(code) {</span><span class="s3">\n      </span><span class="s1">code = code.startsWith(</span><span class="s3">\&quot;</span><span class="s1">Object.defineProperty(</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">? code.slice(22)</span><span class="s3">\n        </span><span class="s1">: code.startsWith(</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">? code.slice(1)</span><span class="s3">\n          </span><span class="s1">: code;</span><span class="s3">\n      </span><span class="s1">if (code.startsWith(</span><span class="s3">\&quot;</span><span class="s1">async function</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n        </span><span class="s1">var idx = code.indexOf(</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">, 14);</span><span class="s3">\n        </span><span class="s1">if (-1 !== idx)</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">(code = code.slice(14, idx).trim()),</span><span class="s3">\n            </span><span class="s1">(0, eval)(</span><span class="s3">\&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+ JSON.stringify(code) + </span><span class="s3">\&quot;</span><span class="s1">:async function(){}})</span><span class="s3">\&quot;</span><span class="s1">)[</span><span class="s3">\n              </span><span class="s1">code</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (code.startsWith(</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n        </span><span class="s1">if (((idx = code.indexOf(</span><span class="s3">\&quot;</span><span class="s1">(</span><span class="s3">\&quot;</span><span class="s1">, 8)), -1 !== idx))</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">(code = code.slice(8, idx).trim()),</span><span class="s3">\n            </span><span class="s1">(0, eval)(</span><span class="s3">\&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+ JSON.stringify(code) + </span><span class="s3">\&quot;</span><span class="s1">:function(){}})</span><span class="s3">\&quot;</span><span class="s1">)[code]</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else if (</span><span class="s3">\n        </span><span class="s1">code.startsWith(</span><span class="s3">\&quot;</span><span class="s1">class</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">((idx = code.indexOf(</span><span class="s3">\&quot;</span><span class="s1">{</span><span class="s3">\&quot;</span><span class="s1">, 5)), -1 !== idx)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">return (</span><span class="s3">\n          </span><span class="s1">(code = code.slice(5, idx).trim()),</span><span class="s3">\n          </span><span class="s1">(0, eval)(</span><span class="s3">\&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+ JSON.stringify(code) + </span><span class="s3">\&quot;</span><span class="s1">:class{}})</span><span class="s3">\&quot;</span><span class="s1">)[code]</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return function () {};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function parseModelString(response, parentObject, key, value) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">=== value[0]) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">=== value)</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">null !== initializingHandler &amp;&amp;</span><span class="s3">\n              \&quot;</span><span class="s1">0</span><span class="s3">\&quot; </span><span class="s1">=== key &amp;&amp;</span><span class="s3">\n              </span><span class="s1">(initializingHandler = {</span><span class="s3">\n                </span><span class="s1">parent: initializingHandler,</span><span class="s3">\n                </span><span class="s1">chunk: null,</span><span class="s3">\n                </span><span class="s1">value: null,</span><span class="s3">\n                </span><span class="s1">reason: null,</span><span class="s3">\n                </span><span class="s1">deps: 0,</span><span class="s3">\n                </span><span class="s1">errored: !1</span><span class="s3">\n              </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">REACT_ELEMENT_TYPE</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">switch (value[1]) {</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return value.slice(1);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">L</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(parentObject = parseInt(value.slice(2), 16)),</span><span class="s3">\n              </span><span class="s1">(response = getChunk(response, parentObject)),</span><span class="s3">\n              </span><span class="s1">createLazyChunkWrapper(response)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(parentObject = parseInt(value.slice(2), 16)),</span><span class="s3">\n              </span><span class="s1">getChunk(response, parentObject)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">S</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return Symbol.for(value.slice(2));</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">F</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">var ref = value.slice(2);</span><span class="s3">\n            </span><span class="s1">return getOutlinedModel(</span><span class="s3">\n              </span><span class="s1">response,</span><span class="s3">\n              </span><span class="s1">ref,</span><span class="s3">\n              </span><span class="s1">parentObject,</span><span class="s3">\n              </span><span class="s1">key,</span><span class="s3">\n              </span><span class="s1">loadServerReference</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">T</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">parentObject = </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">+ value.slice(2);</span><span class="s3">\n            </span><span class="s1">response = response._tempRefs;</span><span class="s3">\n            </span><span class="s1">if (null == response)</span><span class="s3">\n              </span><span class="s1">throw Error(</span><span class="s3">\n                \&quot;</span><span class="s1">Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.</span><span class="s3">\&quot;\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">return response.get(parentObject);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">Q</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(response, ref, parentObject, key, createMap)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">W</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(response, ref, parentObject, key, createSet)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">B</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(response, ref, parentObject, key, createBlob)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">K</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(response, ref, parentObject, key, createFormData)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">Z</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(</span><span class="s3">\n                </span><span class="s1">response,</span><span class="s3">\n                </span><span class="s1">ref,</span><span class="s3">\n                </span><span class="s1">parentObject,</span><span class="s3">\n                </span><span class="s1">key,</span><span class="s3">\n                </span><span class="s1">resolveErrorDev</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">i</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(</span><span class="s3">\n                </span><span class="s1">response,</span><span class="s3">\n                </span><span class="s1">ref,</span><span class="s3">\n                </span><span class="s1">parentObject,</span><span class="s3">\n                </span><span class="s1">key,</span><span class="s3">\n                </span><span class="s1">extractIterator</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">I</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return Infinity;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">$-0</span><span class="s3">\&quot; </span><span class="s1">=== value ? -0 : -Infinity;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">N</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return NaN;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">u</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">D</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return new Date(Date.parse(value.slice(2)));</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return BigInt(value.slice(2));</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">P</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(2)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(</span><span class="s3">\n                </span><span class="s1">response,</span><span class="s3">\n                </span><span class="s1">ref,</span><span class="s3">\n                </span><span class="s1">parentObject,</span><span class="s3">\n                </span><span class="s1">key,</span><span class="s3">\n                </span><span class="s1">applyConstructor</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">E</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">response = value.slice(2);</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">if (!mightHaveStaticConstructor.test(response))</span><span class="s3">\n                </span><span class="s1">return (0, eval)(response);</span><span class="s3">\n            </span><span class="s1">} catch (x) {}</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">((ref = getInferredFunctionApproximate(response)),</span><span class="s3">\n                </span><span class="s1">response.startsWith(</span><span class="s3">\&quot;</span><span class="s1">Object.defineProperty(</span><span class="s3">\&quot;</span><span class="s1">))</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">var idx = response.lastIndexOf(',</span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">,{value:</span><span class="s3">\&quot;</span><span class="s1">');</span><span class="s3">\n                </span><span class="s1">if (-1 !== idx) {</span><span class="s3">\n                  </span><span class="s1">var name = JSON.parse(</span><span class="s3">\n                    </span><span class="s1">response.slice(idx + 16 - 1, response.length - 2)</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n                  </span><span class="s1">Object.defineProperty(ref, </span><span class="s3">\&quot;</span><span class="s1">name</span><span class="s3">\&quot;</span><span class="s1">, { value: name });</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} catch (_) {</span><span class="s3">\n              </span><span class="s1">ref = function () {};</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">return ref;</span><span class="s3">\n          </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">Y</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n            </span><span class="s1">if (2 &lt; value.length &amp;&amp; (ref = response._debugChannel)) {</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot; </span><span class="s1">=== value[2])</span><span class="s3">\n                </span><span class="s1">return (</span><span class="s3">\n                  </span><span class="s1">(parentObject = value.slice(3)),</span><span class="s3">\n                  </span><span class="s1">(key = parseInt(parentObject, 16)),</span><span class="s3">\n                  </span><span class="s1">response._chunks.has(key) || ref(</span><span class="s3">\&quot;</span><span class="s1">P:</span><span class="s3">\&quot; </span><span class="s1">+ parentObject),</span><span class="s3">\n                  </span><span class="s1">getChunk(response, key)</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">value = value.slice(2);</span><span class="s3">\n              </span><span class="s1">idx = parseInt(value, 16);</span><span class="s3">\n              </span><span class="s1">response._chunks.has(idx) || ref(</span><span class="s3">\&quot;</span><span class="s1">Q:</span><span class="s3">\&quot; </span><span class="s1">+ value);</span><span class="s3">\n              </span><span class="s1">ref = getChunk(response, idx);</span><span class="s3">\n              </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== ref.status</span><span class="s3">\n                </span><span class="s1">? ref.value</span><span class="s3">\n                </span><span class="s1">: defineLazyGetter(response, ref, parentObject, key);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">Object.defineProperty(parentObject, key, {</span><span class="s3">\n              </span><span class="s1">get: function () {</span><span class="s3">\n                </span><span class="s1">return </span><span class="s3">\&quot;</span><span class="s1">This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">enumerable: !0,</span><span class="s3">\n              </span><span class="s1">configurable: !1</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n            </span><span class="s1">return null;</span><span class="s3">\n          </span><span class="s1">default:</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">(ref = value.slice(1)),</span><span class="s3">\n              </span><span class="s1">getOutlinedModel(response, ref, parentObject, key, createModel)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return value;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function missingCall() {</span><span class="s3">\n      </span><span class="s1">throw Error(</span><span class="s3">\n        </span><span class="s1">'Trying to call a function from </span><span class="s3">\&quot;</span><span class="s1">use server</span><span class="s3">\&quot; </span><span class="s1">but the callServer option was not implemented in your router runtime.'</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function ResponseInstance(</span><span class="s3">\n      </span><span class="s1">bundlerConfig,</span><span class="s3">\n      </span><span class="s1">serverReferenceConfig,</span><span class="s3">\n      </span><span class="s1">moduleLoading,</span><span class="s3">\n      </span><span class="s1">callServer,</span><span class="s3">\n      </span><span class="s1">encodeFormAction,</span><span class="s3">\n      </span><span class="s1">nonce,</span><span class="s3">\n      </span><span class="s1">temporaryReferences,</span><span class="s3">\n      </span><span class="s1">findSourceMapURL,</span><span class="s3">\n      </span><span class="s1">replayConsole,</span><span class="s3">\n      </span><span class="s1">environmentName,</span><span class="s3">\n      </span><span class="s1">debugChannel</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">var chunks = new Map();</span><span class="s3">\n      </span><span class="s1">this._bundlerConfig = bundlerConfig;</span><span class="s3">\n      </span><span class="s1">this._serverReferenceConfig = serverReferenceConfig;</span><span class="s3">\n      </span><span class="s1">this._moduleLoading = moduleLoading;</span><span class="s3">\n      </span><span class="s1">this._callServer = void 0 !== callServer ? callServer : missingCall;</span><span class="s3">\n      </span><span class="s1">this._encodeFormAction = encodeFormAction;</span><span class="s3">\n      </span><span class="s1">this._nonce = nonce;</span><span class="s3">\n      </span><span class="s1">this._chunks = chunks;</span><span class="s3">\n      </span><span class="s1">this._stringDecoder = new util.TextDecoder();</span><span class="s3">\n      </span><span class="s1">this._fromJSON = null;</span><span class="s3">\n      </span><span class="s1">this._closed = !1;</span><span class="s3">\n      </span><span class="s1">this._closedReason = null;</span><span class="s3">\n      </span><span class="s1">this._tempRefs = temporaryReferences;</span><span class="s3">\n      </span><span class="s1">this._pendingChunks = 0;</span><span class="s3">\n      </span><span class="s1">this._weakResponse = { weak: new WeakRef(this), response: this };</span><span class="s3">\n      </span><span class="s1">this._debugRootOwner = bundlerConfig =</span><span class="s3">\n        </span><span class="s1">void 0 === ReactSharedInteralsServer ||</span><span class="s3">\n        </span><span class="s1">null === ReactSharedInteralsServer.A</span><span class="s3">\n          </span><span class="s1">? null</span><span class="s3">\n          </span><span class="s1">: ReactSharedInteralsServer.A.getOwner();</span><span class="s3">\n      </span><span class="s1">this._debugRootStack =</span><span class="s3">\n        </span><span class="s1">null !== bundlerConfig ? Error(</span><span class="s3">\&quot;</span><span class="s1">react-stack-top-frame</span><span class="s3">\&quot;</span><span class="s1">) : null;</span><span class="s3">\n      </span><span class="s1">environmentName = void 0 === environmentName ? </span><span class="s3">\&quot;</span><span class="s1">Server</span><span class="s3">\&quot; </span><span class="s1">: environmentName;</span><span class="s3">\n      </span><span class="s1">supportsCreateTask &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(this._debugRootTask = console.createTask(</span><span class="s3">\n          </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">use ' + environmentName.toLowerCase() + '</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\n        </span><span class="s1">));</span><span class="s3">\n      </span><span class="s1">this._debugFindSourceMapURL = findSourceMapURL;</span><span class="s3">\n      </span><span class="s1">this._debugChannel = debugChannel;</span><span class="s3">\n      </span><span class="s1">this._blockedConsole = null;</span><span class="s3">\n      </span><span class="s1">this._replayConsole = replayConsole;</span><span class="s3">\n      </span><span class="s1">this._rootEnvironmentName = environmentName;</span><span class="s3">\n      </span><span class="s1">debugChannel &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(null === debugChannelRegistry</span><span class="s3">\n          </span><span class="s1">? (debugChannel(</span><span class="s3">\&quot;\&quot;</span><span class="s1">), (this._debugChannel = void 0))</span><span class="s3">\n          </span><span class="s1">: debugChannelRegistry.register(this, debugChannel));</span><span class="s3">\n      </span><span class="s1">this._fromJSON = createFromJSONCallback(this);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createStreamState() {</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">_rowState: 0,</span><span class="s3">\n        </span><span class="s1">_rowID: 0,</span><span class="s3">\n        </span><span class="s1">_rowTag: 0,</span><span class="s3">\n        </span><span class="s1">_rowLength: 0,</span><span class="s3">\n        </span><span class="s1">_buffer: []</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveBuffer(response, id, buffer) {</span><span class="s3">\n      </span><span class="s1">var chunks = response._chunks,</span><span class="s3">\n        </span><span class="s1">chunk = chunks.get(id);</span><span class="s3">\n      </span><span class="s1">chunk &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">!== chunk.status</span><span class="s3">\n        </span><span class="s1">? chunk.reason.enqueueValue(buffer)</span><span class="s3">\n        </span><span class="s1">: (chunk &amp;&amp; releasePendingChunk(response, chunk),</span><span class="s3">\n          </span><span class="s1">chunks.set(id, new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">, buffer, null)));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveModule(response, id, model) {</span><span class="s3">\n      </span><span class="s1">var chunks = response._chunks,</span><span class="s3">\n        </span><span class="s1">chunk = chunks.get(id);</span><span class="s3">\n      </span><span class="s1">model = JSON.parse(model, response._fromJSON);</span><span class="s3">\n      </span><span class="s1">var clientReference = resolveClientReference(</span><span class="s3">\n        </span><span class="s1">response._bundlerConfig,</span><span class="s3">\n        </span><span class="s1">model</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">prepareDestinationWithChunks(</span><span class="s3">\n        </span><span class="s1">response._moduleLoading,</span><span class="s3">\n        </span><span class="s1">model[1],</span><span class="s3">\n        </span><span class="s1">response._nonce</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">if ((model = preloadModule(clientReference))) {</span><span class="s3">\n        </span><span class="s1">if (chunk) {</span><span class="s3">\n          </span><span class="s1">releasePendingChunk(response, chunk);</span><span class="s3">\n          </span><span class="s1">var blockedChunk = chunk;</span><span class="s3">\n          </span><span class="s1">blockedChunk.status = </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">} else</span><span class="s3">\n          </span><span class="s1">(blockedChunk = new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">, null, null)),</span><span class="s3">\n            </span><span class="s1">chunks.set(id, blockedChunk);</span><span class="s3">\n        </span><span class="s1">model.then(</span><span class="s3">\n          </span><span class="s1">function () {</span><span class="s3">\n            </span><span class="s1">return resolveModuleChunk(response, blockedChunk, clientReference);</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">function (error) {</span><span class="s3">\n            </span><span class="s1">return triggerErrorOnChunk(response, blockedChunk, error);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">} else</span><span class="s3">\n        </span><span class="s1">chunk</span><span class="s3">\n          </span><span class="s1">? resolveModuleChunk(response, chunk, clientReference)</span><span class="s3">\n          </span><span class="s1">: chunks.set(</span><span class="s3">\n              </span><span class="s1">id,</span><span class="s3">\n              </span><span class="s1">new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">, clientReference, null)</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveStream(response, id, stream, controller) {</span><span class="s3">\n      </span><span class="s1">var chunks = response._chunks,</span><span class="s3">\n        </span><span class="s1">chunk = chunks.get(id);</span><span class="s3">\n      </span><span class="s1">if (!chunk)</span><span class="s3">\n        </span><span class="s1">chunks.set(id, new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">, stream, controller));</span><span class="s3">\n      </span><span class="s1">else if (</span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status) {</span><span class="s3">\n        </span><span class="s1">releasePendingChunk(response, chunk);</span><span class="s3">\n        </span><span class="s1">id = chunk.value;</span><span class="s3">\n        </span><span class="s1">if (null != chunk._debugChunk) {</span><span class="s3">\n          </span><span class="s1">chunks = initializingHandler;</span><span class="s3">\n          </span><span class="s1">initializingHandler = null;</span><span class="s3">\n          </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n          </span><span class="s1">chunk.value = null;</span><span class="s3">\n          </span><span class="s1">chunk.reason = null;</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">(initializeDebugChunk(response, chunk),</span><span class="s3">\n              </span><span class="s1">(chunk._debugChunk = null),</span><span class="s3">\n              </span><span class="s1">null !== initializingHandler &amp;&amp;</span><span class="s3">\n                </span><span class="s1">!initializingHandler.errored &amp;&amp;</span><span class="s3">\n                </span><span class="s1">0 &lt; initializingHandler.deps)</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">initializingHandler.value = stream;</span><span class="s3">\n              </span><span class="s1">initializingHandler.reason = controller;</span><span class="s3">\n              </span><span class="s1">initializingHandler.chunk = chunk;</span><span class="s3">\n              </span><span class="s1">return;</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">} finally {</span><span class="s3">\n            </span><span class="s1">initializingHandler = chunks;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">chunk.value = stream;</span><span class="s3">\n        </span><span class="s1">chunk.reason = controller;</span><span class="s3">\n        </span><span class="s1">null !== id &amp;&amp; wakeChunk(id, chunk.value);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function startReadableStream(response, id, type) {</span><span class="s3">\n      </span><span class="s1">var controller = null;</span><span class="s3">\n      </span><span class="s1">type = new ReadableStream({</span><span class="s3">\n        </span><span class="s1">type: type,</span><span class="s3">\n        </span><span class="s1">start: function (c) {</span><span class="s3">\n          </span><span class="s1">controller = c;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">var previousBlockedChunk = null;</span><span class="s3">\n      </span><span class="s1">resolveStream(response, id, type, {</span><span class="s3">\n        </span><span class="s1">enqueueValue: function (value) {</span><span class="s3">\n          </span><span class="s1">null === previousBlockedChunk</span><span class="s3">\n            </span><span class="s1">? controller.enqueue(value)</span><span class="s3">\n            </span><span class="s1">: previousBlockedChunk.then(function () {</span><span class="s3">\n                </span><span class="s1">controller.enqueue(value);</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">enqueueModel: function (json) {</span><span class="s3">\n          </span><span class="s1">if (null === previousBlockedChunk) {</span><span class="s3">\n            </span><span class="s1">var chunk = createResolvedModelChunk(response, json);</span><span class="s3">\n            </span><span class="s1">initializeModelChunk(chunk);</span><span class="s3">\n            \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status</span><span class="s3">\n              </span><span class="s1">? controller.enqueue(chunk.value)</span><span class="s3">\n              </span><span class="s1">: (chunk.then(</span><span class="s3">\n                  </span><span class="s1">function (v) {</span><span class="s3">\n                    </span><span class="s1">return controller.enqueue(v);</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">function (e) {</span><span class="s3">\n                    </span><span class="s1">return controller.error(e);</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">(previousBlockedChunk = chunk));</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">chunk = previousBlockedChunk;</span><span class="s3">\n            </span><span class="s1">var _chunk3 = createPendingChunk(response);</span><span class="s3">\n            </span><span class="s1">_chunk3.then(</span><span class="s3">\n              </span><span class="s1">function (v) {</span><span class="s3">\n                </span><span class="s1">return controller.enqueue(v);</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">function (e) {</span><span class="s3">\n                </span><span class="s1">return controller.error(e);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">previousBlockedChunk = _chunk3;</span><span class="s3">\n            </span><span class="s1">chunk.then(function () {</span><span class="s3">\n              </span><span class="s1">previousBlockedChunk === _chunk3 &amp;&amp; (previousBlockedChunk = null);</span><span class="s3">\n              </span><span class="s1">resolveModelChunk(response, _chunk3, json);</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">close: function () {</span><span class="s3">\n          </span><span class="s1">if (null === previousBlockedChunk) controller.close();</span><span class="s3">\n          </span><span class="s1">else {</span><span class="s3">\n            </span><span class="s1">var blockedChunk = previousBlockedChunk;</span><span class="s3">\n            </span><span class="s1">previousBlockedChunk = null;</span><span class="s3">\n            </span><span class="s1">blockedChunk.then(function () {</span><span class="s3">\n              </span><span class="s1">return controller.close();</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">error: function (error) {</span><span class="s3">\n          </span><span class="s1">if (null === previousBlockedChunk) controller.error(error);</span><span class="s3">\n          </span><span class="s1">else {</span><span class="s3">\n            </span><span class="s1">var blockedChunk = previousBlockedChunk;</span><span class="s3">\n            </span><span class="s1">previousBlockedChunk = null;</span><span class="s3">\n            </span><span class="s1">blockedChunk.then(function () {</span><span class="s3">\n              </span><span class="s1">return controller.error(error);</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function asyncIterator() {</span><span class="s3">\n      </span><span class="s1">return this;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createIterator(next) {</span><span class="s3">\n      </span><span class="s1">next = { next: next };</span><span class="s3">\n      </span><span class="s1">next[ASYNC_ITERATOR] = asyncIterator;</span><span class="s3">\n      </span><span class="s1">return next;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function startAsyncIterable(response, id, iterator) {</span><span class="s3">\n      </span><span class="s1">var buffer = [],</span><span class="s3">\n        </span><span class="s1">closed = !1,</span><span class="s3">\n        </span><span class="s1">nextWriteIndex = 0,</span><span class="s3">\n        </span><span class="s1">iterable = {};</span><span class="s3">\n      </span><span class="s1">iterable[ASYNC_ITERATOR] = function () {</span><span class="s3">\n        </span><span class="s1">var nextReadIndex = 0;</span><span class="s3">\n        </span><span class="s1">return createIterator(function (arg) {</span><span class="s3">\n          </span><span class="s1">if (void 0 !== arg)</span><span class="s3">\n            </span><span class="s1">throw Error(</span><span class="s3">\n              \&quot;</span><span class="s1">Values cannot be passed to next() of AsyncIterables passed to Client Components.</span><span class="s3">\&quot;\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">if (nextReadIndex === buffer.length) {</span><span class="s3">\n            </span><span class="s1">if (closed)</span><span class="s3">\n              </span><span class="s1">return new ReactPromise(</span><span class="s3">\n                \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                </span><span class="s1">{ done: !0, value: void 0 },</span><span class="s3">\n                </span><span class="s1">null</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">buffer[nextReadIndex] = createPendingChunk(response);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return buffer[nextReadIndex++];</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">resolveStream(</span><span class="s3">\n        </span><span class="s1">response,</span><span class="s3">\n        </span><span class="s1">id,</span><span class="s3">\n        </span><span class="s1">iterator ? iterable[ASYNC_ITERATOR]() : iterable,</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">enqueueValue: function (value) {</span><span class="s3">\n            </span><span class="s1">if (nextWriteIndex === buffer.length)</span><span class="s3">\n              </span><span class="s1">buffer[nextWriteIndex] = new ReactPromise(</span><span class="s3">\n                \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                </span><span class="s1">{ done: !1, value: value },</span><span class="s3">\n                </span><span class="s1">null</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">else {</span><span class="s3">\n              </span><span class="s1">var chunk = buffer[nextWriteIndex],</span><span class="s3">\n                </span><span class="s1">resolveListeners = chunk.value,</span><span class="s3">\n                </span><span class="s1">rejectListeners = chunk.reason;</span><span class="s3">\n              </span><span class="s1">chunk.status = </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n              </span><span class="s1">chunk.value = { done: !1, value: value };</span><span class="s3">\n              </span><span class="s1">null !== resolveListeners &amp;&amp;</span><span class="s3">\n                </span><span class="s1">wakeChunkIfInitialized(</span><span class="s3">\n                  </span><span class="s1">chunk,</span><span class="s3">\n                  </span><span class="s1">resolveListeners,</span><span class="s3">\n                  </span><span class="s1">rejectListeners</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">nextWriteIndex++;</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">enqueueModel: function (value) {</span><span class="s3">\n            </span><span class="s1">nextWriteIndex === buffer.length</span><span class="s3">\n              </span><span class="s1">? (buffer[nextWriteIndex] = createResolvedIteratorResultChunk(</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">value,</span><span class="s3">\n                  </span><span class="s1">!1</span><span class="s3">\n                </span><span class="s1">))</span><span class="s3">\n              </span><span class="s1">: resolveIteratorResultChunk(</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">buffer[nextWriteIndex],</span><span class="s3">\n                  </span><span class="s1">value,</span><span class="s3">\n                  </span><span class="s1">!1</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">nextWriteIndex++;</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">close: function (value) {</span><span class="s3">\n            </span><span class="s1">closed = !0;</span><span class="s3">\n            </span><span class="s1">nextWriteIndex === buffer.length</span><span class="s3">\n              </span><span class="s1">? (buffer[nextWriteIndex] = createResolvedIteratorResultChunk(</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">value,</span><span class="s3">\n                  </span><span class="s1">!0</span><span class="s3">\n                </span><span class="s1">))</span><span class="s3">\n              </span><span class="s1">: resolveIteratorResultChunk(</span><span class="s3">\n                  </span><span class="s1">response,</span><span class="s3">\n                  </span><span class="s1">buffer[nextWriteIndex],</span><span class="s3">\n                  </span><span class="s1">value,</span><span class="s3">\n                  </span><span class="s1">!0</span><span class="s3">\n                </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">for (nextWriteIndex++; nextWriteIndex &lt; buffer.length; )</span><span class="s3">\n              </span><span class="s1">resolveIteratorResultChunk(</span><span class="s3">\n                </span><span class="s1">response,</span><span class="s3">\n                </span><span class="s1">buffer[nextWriteIndex++],</span><span class="s3">\n                </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">$undefined</span><span class="s3">\&quot;</span><span class="s1">',</span><span class="s3">\n                </span><span class="s1">!0</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">error: function (error) {</span><span class="s3">\n            </span><span class="s1">closed = !0;</span><span class="s3">\n            </span><span class="s1">for (</span><span class="s3">\n              </span><span class="s1">nextWriteIndex === buffer.length &amp;&amp;</span><span class="s3">\n              </span><span class="s1">(buffer[nextWriteIndex] = createPendingChunk(response));</span><span class="s3">\n              </span><span class="s1">nextWriteIndex &lt; buffer.length;</span><span class="s3">\n\n            </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveErrorDev(response, errorInfo) {</span><span class="s3">\n      </span><span class="s1">var name = errorInfo.name,</span><span class="s3">\n        </span><span class="s1">env = errorInfo.env;</span><span class="s3">\n      </span><span class="s1">errorInfo = buildFakeCallStack(</span><span class="s3">\n        </span><span class="s1">response,</span><span class="s3">\n        </span><span class="s1">errorInfo.stack,</span><span class="s3">\n        </span><span class="s1">env,</span><span class="s3">\n        </span><span class="s1">!1,</span><span class="s3">\n        </span><span class="s1">Error.bind(</span><span class="s3">\n          </span><span class="s1">null,</span><span class="s3">\n          </span><span class="s1">errorInfo.message ||</span><span class="s3">\n            \&quot;</span><span class="s1">An error occurred in the Server Components render but no message was provided</span><span class="s3">\&quot;\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">response = getRootTask(response, env);</span><span class="s3">\n      </span><span class="s1">response = null != response ? response.run(errorInfo) : errorInfo();</span><span class="s3">\n      </span><span class="s1">response.name = name;</span><span class="s3">\n      </span><span class="s1">response.environmentName = env;</span><span class="s3">\n      </span><span class="s1">return response;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createFakeFunction(</span><span class="s3">\n      </span><span class="s1">name,</span><span class="s3">\n      </span><span class="s1">filename,</span><span class="s3">\n      </span><span class="s1">sourceMap,</span><span class="s3">\n      </span><span class="s1">line,</span><span class="s3">\n      </span><span class="s1">col,</span><span class="s3">\n      </span><span class="s1">enclosingLine,</span><span class="s3">\n      </span><span class="s1">enclosingCol,</span><span class="s3">\n      </span><span class="s1">environmentName</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">name || (name = </span><span class="s3">\&quot;</span><span class="s1">&lt;anonymous&gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">var encodedName = JSON.stringify(name);</span><span class="s3">\n      </span><span class="s1">1 &gt; enclosingLine ? (enclosingLine = 0) : enclosingLine--;</span><span class="s3">\n      </span><span class="s1">1 &gt; enclosingCol ? (enclosingCol = 0) : enclosingCol--;</span><span class="s3">\n      </span><span class="s1">1 &gt; line ? (line = 0) : line--;</span><span class="s3">\n      </span><span class="s1">1 &gt; col ? (col = 0) : col--;</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">line &lt; enclosingLine ||</span><span class="s3">\n        </span><span class="s1">(line === enclosingLine &amp;&amp; col &lt; enclosingCol)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">enclosingCol = enclosingLine = 0;</span><span class="s3">\n      </span><span class="s1">1 &gt; line</span><span class="s3">\n        </span><span class="s1">? ((line = encodedName.length + 3),</span><span class="s3">\n          </span><span class="s1">(enclosingCol -= line),</span><span class="s3">\n          </span><span class="s1">0 &gt; enclosingCol &amp;&amp; (enclosingCol = 0),</span><span class="s3">\n          </span><span class="s1">(col = col - enclosingCol - line - 3),</span><span class="s3">\n          </span><span class="s1">0 &gt; col &amp;&amp; (col = 0),</span><span class="s3">\n          </span><span class="s1">(encodedName =</span><span class="s3">\n            \&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodedName +</span><span class="s3">\n            \&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            \&quot; \&quot;</span><span class="s1">.repeat(enclosingCol) +</span><span class="s3">\n            \&quot;</span><span class="s1">_=&gt;</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            \&quot; \&quot;</span><span class="s1">.repeat(col) +</span><span class="s3">\n            \&quot;</span><span class="s1">_()})</span><span class="s3">\&quot;</span><span class="s1">))</span><span class="s3">\n        </span><span class="s1">: 1 &gt; enclosingLine</span><span class="s3">\n          </span><span class="s1">? ((enclosingCol -= encodedName.length + 3),</span><span class="s3">\n            </span><span class="s1">0 &gt; enclosingCol &amp;&amp; (enclosingCol = 0),</span><span class="s3">\n            </span><span class="s1">(encodedName =</span><span class="s3">\n              \&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n              </span><span class="s1">encodedName +</span><span class="s3">\n              \&quot;</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n              \&quot; \&quot;</span><span class="s1">.repeat(enclosingCol) +</span><span class="s3">\n              \&quot;</span><span class="s1">_=&gt;</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n              \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">.repeat(line - enclosingLine) +</span><span class="s3">\n              \&quot; \&quot;</span><span class="s1">.repeat(col) +</span><span class="s3">\n              \&quot;</span><span class="s1">_()})</span><span class="s3">\&quot;</span><span class="s1">))</span><span class="s3">\n          </span><span class="s1">: enclosingLine === line</span><span class="s3">\n            </span><span class="s1">? ((col = col - enclosingCol - 3),</span><span class="s3">\n              </span><span class="s1">0 &gt; col &amp;&amp; (col = 0),</span><span class="s3">\n              </span><span class="s1">(encodedName =</span><span class="s3">\n                \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">.repeat(enclosingLine - 1) +</span><span class="s3">\n                \&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                </span><span class="s1">encodedName +</span><span class="s3">\n                \&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                \&quot; \&quot;</span><span class="s1">.repeat(enclosingCol) +</span><span class="s3">\n                \&quot;</span><span class="s1">_=&gt;</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                \&quot; \&quot;</span><span class="s1">.repeat(col) +</span><span class="s3">\n                \&quot;</span><span class="s1">_()})</span><span class="s3">\&quot;</span><span class="s1">))</span><span class="s3">\n            </span><span class="s1">: (encodedName =</span><span class="s3">\n                \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">.repeat(enclosingLine - 1) +</span><span class="s3">\n                \&quot;</span><span class="s1">({</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                </span><span class="s1">encodedName +</span><span class="s3">\n                \&quot;</span><span class="s1">:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                \&quot; \&quot;</span><span class="s1">.repeat(enclosingCol) +</span><span class="s3">\n                \&quot;</span><span class="s1">_=&gt;</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n                \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">.repeat(line - enclosingLine) +</span><span class="s3">\n                \&quot; \&quot;</span><span class="s1">.repeat(col) +</span><span class="s3">\n                \&quot;</span><span class="s1">_()})</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">encodedName =</span><span class="s3">\n        </span><span class="s1">1 &gt; enclosingLine</span><span class="s3">\n          </span><span class="s1">? encodedName +</span><span class="s3">\n            \&quot;\\</span><span class="s1">n/* This module was rendered by a Server Component. Turn on Source Maps to see the server source. */</span><span class="s3">\&quot;\n          </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">/* This module was rendered by a Server Component. Turn on Source Maps to see the server source. */</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodedName;</span><span class="s3">\n      </span><span class="s1">filename.startsWith(</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp; (filename = </span><span class="s3">\&quot;</span><span class="s1">file://</span><span class="s3">\&quot; </span><span class="s1">+ filename);</span><span class="s3">\n      </span><span class="s1">sourceMap</span><span class="s3">\n        </span><span class="s1">? ((encodedName +=</span><span class="s3">\n            \&quot;\\</span><span class="s1">n//# sourceURL=about://React/</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodeURIComponent(environmentName) +</span><span class="s3">\n            \&quot;</span><span class="s1">/</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">encodeURI(filename) +</span><span class="s3">\n            \&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">fakeFunctionIdx++),</span><span class="s3">\n          </span><span class="s1">(encodedName += </span><span class="s3">\&quot;\\</span><span class="s1">n//# sourceMappingURL=</span><span class="s3">\&quot; </span><span class="s1">+ sourceMap))</span><span class="s3">\n        </span><span class="s1">: (encodedName = filename</span><span class="s3">\n            </span><span class="s1">? encodedName + (</span><span class="s3">\&quot;\\</span><span class="s1">n//# sourceURL=</span><span class="s3">\&quot; </span><span class="s1">+ encodeURI(filename))</span><span class="s3">\n            </span><span class="s1">: encodedName + </span><span class="s3">\&quot;\\</span><span class="s1">n//# sourceURL=&lt;anonymous&gt;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">var fn = (0, eval)(encodedName)[name];</span><span class="s3">\n      </span><span class="s1">} catch (x) {</span><span class="s3">\n        </span><span class="s1">fn = function (_) {</span><span class="s3">\n          </span><span class="s1">return _();</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return fn;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function buildFakeCallStack(</span><span class="s3">\n      </span><span class="s1">response,</span><span class="s3">\n      </span><span class="s1">stack,</span><span class="s3">\n      </span><span class="s1">environmentName,</span><span class="s3">\n      </span><span class="s1">useEnclosingLine,</span><span class="s3">\n      </span><span class="s1">innerCall</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">for (var i = 0; i &lt; stack.length; i++) {</span><span class="s3">\n        </span><span class="s1">var frame = stack[i],</span><span class="s3">\n          </span><span class="s1">frameKey =</span><span class="s3">\n            </span><span class="s1">frame.join(</span><span class="s3">\&quot;</span><span class="s1">-</span><span class="s3">\&quot;</span><span class="s1">) +</span><span class="s3">\n            \&quot;</span><span class="s1">-</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n            </span><span class="s1">environmentName +</span><span class="s3">\n            </span><span class="s1">(useEnclosingLine ? </span><span class="s3">\&quot;</span><span class="s1">-e</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">-n</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">fn = fakeFunctionCache.get(frameKey);</span><span class="s3">\n        </span><span class="s1">if (void 0 === fn) {</span><span class="s3">\n          </span><span class="s1">fn = frame[0];</span><span class="s3">\n          </span><span class="s1">var filename = frame[1],</span><span class="s3">\n            </span><span class="s1">line = frame[2],</span><span class="s3">\n            </span><span class="s1">col = frame[3],</span><span class="s3">\n            </span><span class="s1">enclosingLine = frame[4];</span><span class="s3">\n          </span><span class="s1">frame = frame[5];</span><span class="s3">\n          </span><span class="s1">var findSourceMapURL = response._debugFindSourceMapURL;</span><span class="s3">\n          </span><span class="s1">findSourceMapURL = findSourceMapURL</span><span class="s3">\n            </span><span class="s1">? findSourceMapURL(filename, environmentName)</span><span class="s3">\n            </span><span class="s1">: null;</span><span class="s3">\n          </span><span class="s1">fn = createFakeFunction(</span><span class="s3">\n            </span><span class="s1">fn,</span><span class="s3">\n            </span><span class="s1">filename,</span><span class="s3">\n            </span><span class="s1">findSourceMapURL,</span><span class="s3">\n            </span><span class="s1">line,</span><span class="s3">\n            </span><span class="s1">col,</span><span class="s3">\n            </span><span class="s1">useEnclosingLine ? line : enclosingLine,</span><span class="s3">\n            </span><span class="s1">useEnclosingLine ? col : frame,</span><span class="s3">\n            </span><span class="s1">environmentName</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">fakeFunctionCache.set(frameKey, fn);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">innerCall = fn.bind(null, innerCall);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return innerCall;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getRootTask(response, childEnvironmentName) {</span><span class="s3">\n      </span><span class="s1">var rootTask = response._debugRootTask;</span><span class="s3">\n      </span><span class="s1">return rootTask</span><span class="s3">\n        </span><span class="s1">? response._rootEnvironmentName !== childEnvironmentName</span><span class="s3">\n          </span><span class="s1">? ((response = console.createTask.bind(</span><span class="s3">\n              </span><span class="s1">console,</span><span class="s3">\n              </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">use ' + childEnvironmentName.toLowerCase() + '</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\n            </span><span class="s1">)),</span><span class="s3">\n            </span><span class="s1">rootTask.run(response))</span><span class="s3">\n          </span><span class="s1">: rootTask</span><span class="s3">\n        </span><span class="s1">: null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeFakeTask(response, debugInfo) {</span><span class="s3">\n      </span><span class="s1">if (!supportsCreateTask || null == debugInfo.stack) return null;</span><span class="s3">\n      </span><span class="s1">var cachedEntry = debugInfo.debugTask;</span><span class="s3">\n      </span><span class="s1">if (void 0 !== cachedEntry) return cachedEntry;</span><span class="s3">\n      </span><span class="s1">var useEnclosingLine = void 0 === debugInfo.key,</span><span class="s3">\n        </span><span class="s1">stack = debugInfo.stack,</span><span class="s3">\n        </span><span class="s1">env =</span><span class="s3">\n          </span><span class="s1">null == debugInfo.env ? response._rootEnvironmentName : debugInfo.env;</span><span class="s3">\n      </span><span class="s1">cachedEntry =</span><span class="s3">\n        </span><span class="s1">null == debugInfo.owner || null == debugInfo.owner.env</span><span class="s3">\n          </span><span class="s1">? response._rootEnvironmentName</span><span class="s3">\n          </span><span class="s1">: debugInfo.owner.env;</span><span class="s3">\n      </span><span class="s1">var ownerTask =</span><span class="s3">\n        </span><span class="s1">null == debugInfo.owner</span><span class="s3">\n          </span><span class="s1">? null</span><span class="s3">\n          </span><span class="s1">: initializeFakeTask(response, debugInfo.owner);</span><span class="s3">\n      </span><span class="s1">env =</span><span class="s3">\n        </span><span class="s1">env !== cachedEntry</span><span class="s3">\n          </span><span class="s1">? '</span><span class="s3">\&quot;</span><span class="s1">use ' + env.toLowerCase() + '</span><span class="s3">\&quot;</span><span class="s1">'</span><span class="s3">\n          </span><span class="s1">: void 0 !== debugInfo.key</span><span class="s3">\n            </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">&lt;</span><span class="s3">\&quot; </span><span class="s1">+ (debugInfo.name || </span><span class="s3">\&quot;</span><span class="s1">...</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot;\n            </span><span class="s1">: void 0 !== debugInfo.name</span><span class="s3">\n              </span><span class="s1">? debugInfo.name || </span><span class="s3">\&quot;</span><span class="s1">unknown</span><span class="s3">\&quot;\n              </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">await </span><span class="s3">\&quot; </span><span class="s1">+ (debugInfo.awaited.name || </span><span class="s3">\&quot;</span><span class="s1">unknown</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">env = console.createTask.bind(console, env);</span><span class="s3">\n      </span><span class="s1">useEnclosingLine = buildFakeCallStack(</span><span class="s3">\n        </span><span class="s1">response,</span><span class="s3">\n        </span><span class="s1">stack,</span><span class="s3">\n        </span><span class="s1">cachedEntry,</span><span class="s3">\n        </span><span class="s1">useEnclosingLine,</span><span class="s3">\n        </span><span class="s1">env</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">null === ownerTask</span><span class="s3">\n        </span><span class="s1">? ((response = getRootTask(response, cachedEntry)),</span><span class="s3">\n          </span><span class="s1">(response =</span><span class="s3">\n            </span><span class="s1">null != response</span><span class="s3">\n              </span><span class="s1">? response.run(useEnclosingLine)</span><span class="s3">\n              </span><span class="s1">: useEnclosingLine()))</span><span class="s3">\n        </span><span class="s1">: (response = ownerTask.run(useEnclosingLine));</span><span class="s3">\n      </span><span class="s1">return (debugInfo.debugTask = response);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function fakeJSXCallSite() {</span><span class="s3">\n      </span><span class="s1">return Error(</span><span class="s3">\&quot;</span><span class="s1">react-stack-top-frame</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeFakeStack(response, debugInfo) {</span><span class="s3">\n      </span><span class="s1">if (void 0 === debugInfo.debugStack) {</span><span class="s3">\n        </span><span class="s1">null != debugInfo.stack &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(debugInfo.debugStack = createFakeJSXCallStackInDEV(</span><span class="s3">\n            </span><span class="s1">response,</span><span class="s3">\n            </span><span class="s1">debugInfo.stack,</span><span class="s3">\n            </span><span class="s1">null == debugInfo.env ? </span><span class="s3">\&quot;\&quot; </span><span class="s1">: debugInfo.env</span><span class="s3">\n          </span><span class="s1">));</span><span class="s3">\n        </span><span class="s1">var owner = debugInfo.owner;</span><span class="s3">\n        </span><span class="s1">null != owner &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(initializeFakeStack(response, owner),</span><span class="s3">\n          </span><span class="s1">void 0 === owner.debugLocation &amp;&amp;</span><span class="s3">\n            </span><span class="s1">null != debugInfo.debugStack &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(owner.debugLocation = debugInfo.debugStack));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeDebugInfo(response, debugInfo) {</span><span class="s3">\n      </span><span class="s1">void 0 !== debugInfo.stack &amp;&amp; initializeFakeTask(response, debugInfo);</span><span class="s3">\n      </span><span class="s1">null == debugInfo.owner &amp;&amp; null != response._debugRootOwner</span><span class="s3">\n        </span><span class="s1">? ((debugInfo.owner = response._debugRootOwner),</span><span class="s3">\n          </span><span class="s1">(debugInfo.stack = null),</span><span class="s3">\n          </span><span class="s1">(debugInfo.debugStack = response._debugRootStack),</span><span class="s3">\n          </span><span class="s1">(debugInfo.debugTask = response._debugRootTask))</span><span class="s3">\n        </span><span class="s1">: void 0 !== debugInfo.stack &amp;&amp;</span><span class="s3">\n          </span><span class="s1">initializeFakeStack(response, debugInfo);</span><span class="s3">\n      </span><span class="s1">return debugInfo;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function getCurrentStackInDEV() {</span><span class="s3">\n      </span><span class="s1">var owner = currentOwnerInDEV;</span><span class="s3">\n      </span><span class="s1">if (null === owner) return </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">var info = </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n        </span><span class="s1">if (owner.owner || </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">!== typeof owner.name) {</span><span class="s3">\n          </span><span class="s1">for (; owner; ) {</span><span class="s3">\n            </span><span class="s1">var ownerStack = owner.debugStack;</span><span class="s3">\n            </span><span class="s1">if (null != ownerStack) {</span><span class="s3">\n              </span><span class="s1">if ((owner = owner.owner)) {</span><span class="s3">\n                </span><span class="s1">var JSCompiler_temp_const = info;</span><span class="s3">\n                </span><span class="s1">var error = ownerStack,</span><span class="s3">\n                  </span><span class="s1">prevPrepareStackTrace = Error.prepareStackTrace;</span><span class="s3">\n                </span><span class="s1">Error.prepareStackTrace = prepareStackTrace;</span><span class="s3">\n                </span><span class="s1">var stack = error.stack;</span><span class="s3">\n                </span><span class="s1">Error.prepareStackTrace = prevPrepareStackTrace;</span><span class="s3">\n                </span><span class="s1">stack.startsWith(</span><span class="s3">\&quot;</span><span class="s1">Error: react-stack-top-frame</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">(stack = stack.slice(29));</span><span class="s3">\n                </span><span class="s1">var idx = stack.indexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">-1 !== idx &amp;&amp; (stack = stack.slice(idx + 1));</span><span class="s3">\n                </span><span class="s1">idx = stack.indexOf(</span><span class="s3">\&quot;</span><span class="s1">react_stack_bottom_frame</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">-1 !== idx &amp;&amp; (idx = stack.lastIndexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">, idx));</span><span class="s3">\n                </span><span class="s1">var JSCompiler_inline_result =</span><span class="s3">\n                  </span><span class="s1">-1 !== idx ? (stack = stack.slice(0, idx)) : </span><span class="s3">\&quot;\&quot;</span><span class="s1">;</span><span class="s3">\n                </span><span class="s1">info =</span><span class="s3">\n                  </span><span class="s1">JSCompiler_temp_const + (</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ JSCompiler_inline_result);</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">} else break;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">var JSCompiler_inline_result$jscomp$0 = info;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">JSCompiler_temp_const = owner.name;</span><span class="s3">\n          </span><span class="s1">if (void 0 === prefix)</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">throw Error();</span><span class="s3">\n            </span><span class="s1">} catch (x) {</span><span class="s3">\n              </span><span class="s1">(prefix =</span><span class="s3">\n                </span><span class="s1">((error = x.stack.trim().match(/</span><span class="s3">\\</span><span class="s1">n( *(at )?)/)) &amp;&amp; error[1]) ||</span><span class="s3">\n                \&quot;\&quot;</span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">(suffix =</span><span class="s3">\n                  </span><span class="s1">-1 &lt; x.stack.indexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n    at</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n                    </span><span class="s1">? </span><span class="s3">\&quot; </span><span class="s1">(&lt;anonymous&gt;)</span><span class="s3">\&quot;\n                    </span><span class="s1">: -1 &lt; x.stack.indexOf(</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n                      </span><span class="s1">? </span><span class="s3">\&quot;</span><span class="s1">@unknown:0:0</span><span class="s3">\&quot;\n                      </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">JSCompiler_inline_result$jscomp$0 =</span><span class="s3">\n            \&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ prefix + JSCompiler_temp_const + suffix;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} catch (x) {</span><span class="s3">\n        </span><span class="s1">JSCompiler_inline_result$jscomp$0 =</span><span class="s3">\n          \&quot;\\</span><span class="s1">nError generating stack: </span><span class="s3">\&quot; </span><span class="s1">+ x.message + </span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+ x.stack;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return JSCompiler_inline_result$jscomp$0;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveConsoleEntry(response, json) {</span><span class="s3">\n      </span><span class="s1">if (response._replayConsole) {</span><span class="s3">\n        </span><span class="s1">var blockedChunk = response._blockedConsole;</span><span class="s3">\n        </span><span class="s1">if (null == blockedChunk)</span><span class="s3">\n          </span><span class="s1">(blockedChunk = createResolvedModelChunk(response, json)),</span><span class="s3">\n            </span><span class="s1">initializeModelChunk(blockedChunk),</span><span class="s3">\n            \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== blockedChunk.status</span><span class="s3">\n              </span><span class="s1">? replayConsoleWithCallStackInDEV(response, blockedChunk.value)</span><span class="s3">\n              </span><span class="s1">: (blockedChunk.then(</span><span class="s3">\n                  </span><span class="s1">function (v) {</span><span class="s3">\n                    </span><span class="s1">return replayConsoleWithCallStackInDEV(response, v);</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">function () {}</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">(response._blockedConsole = blockedChunk));</span><span class="s3">\n        </span><span class="s1">else {</span><span class="s3">\n          </span><span class="s1">var _chunk4 = createPendingChunk(response);</span><span class="s3">\n          </span><span class="s1">_chunk4.then(</span><span class="s3">\n            </span><span class="s1">function (v) {</span><span class="s3">\n              </span><span class="s1">return replayConsoleWithCallStackInDEV(response, v);</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">function () {}</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">response._blockedConsole = _chunk4;</span><span class="s3">\n          </span><span class="s1">var unblock = function () {</span><span class="s3">\n            </span><span class="s1">response._blockedConsole === _chunk4 &amp;&amp;</span><span class="s3">\n              </span><span class="s1">(response._blockedConsole = null);</span><span class="s3">\n            </span><span class="s1">resolveModelChunk(response, _chunk4, json);</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">blockedChunk.then(unblock, unblock);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function initializeIOInfo(response, ioInfo) {</span><span class="s3">\n      </span><span class="s1">void 0 !== ioInfo.stack &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(initializeFakeTask(response, ioInfo),</span><span class="s3">\n        </span><span class="s1">initializeFakeStack(response, ioInfo));</span><span class="s3">\n      </span><span class="s1">ioInfo.start += response._timeOrigin;</span><span class="s3">\n      </span><span class="s1">ioInfo.end += response._timeOrigin;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveIOInfo(response, id, model) {</span><span class="s3">\n      </span><span class="s1">var chunks = response._chunks,</span><span class="s3">\n        </span><span class="s1">chunk = chunks.get(id);</span><span class="s3">\n      </span><span class="s1">chunk</span><span class="s3">\n        </span><span class="s1">? (resolveModelChunk(response, chunk, model),</span><span class="s3">\n          \&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp; initializeModelChunk(chunk))</span><span class="s3">\n        </span><span class="s1">: ((chunk = createResolvedModelChunk(response, model)),</span><span class="s3">\n          </span><span class="s1">chunks.set(id, chunk),</span><span class="s3">\n          </span><span class="s1">initializeModelChunk(chunk));</span><span class="s3">\n      \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status</span><span class="s3">\n        </span><span class="s1">? initializeIOInfo(response, chunk.value)</span><span class="s3">\n        </span><span class="s1">: chunk.then(</span><span class="s3">\n            </span><span class="s1">function (v) {</span><span class="s3">\n              </span><span class="s1">initializeIOInfo(response, v);</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">function () {}</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function mergeBuffer(buffer, lastChunk) {</span><span class="s3">\n      </span><span class="s1">for (</span><span class="s3">\n        </span><span class="s1">var l = buffer.length, byteLength = lastChunk.length, i = 0;</span><span class="s3">\n        </span><span class="s1">i &lt; l;</span><span class="s3">\n        </span><span class="s1">i++</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">byteLength += buffer[i].byteLength;</span><span class="s3">\n      </span><span class="s1">byteLength = new Uint8Array(byteLength);</span><span class="s3">\n      </span><span class="s1">for (var _i3 = (i = 0); _i3 &lt; l; _i3++) {</span><span class="s3">\n        </span><span class="s1">var chunk = buffer[_i3];</span><span class="s3">\n        </span><span class="s1">byteLength.set(chunk, i);</span><span class="s3">\n        </span><span class="s1">i += chunk.byteLength;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">byteLength.set(lastChunk, i);</span><span class="s3">\n      </span><span class="s1">return byteLength;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function resolveTypedArray(</span><span class="s3">\n      </span><span class="s1">response,</span><span class="s3">\n      </span><span class="s1">id,</span><span class="s3">\n      </span><span class="s1">buffer,</span><span class="s3">\n      </span><span class="s1">lastChunk,</span><span class="s3">\n      </span><span class="s1">constructor,</span><span class="s3">\n      </span><span class="s1">bytesPerElement</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">buffer =</span><span class="s3">\n        </span><span class="s1">0 === buffer.length &amp;&amp; 0 === lastChunk.byteOffset % bytesPerElement</span><span class="s3">\n          </span><span class="s1">? lastChunk</span><span class="s3">\n          </span><span class="s1">: mergeBuffer(buffer, lastChunk);</span><span class="s3">\n      </span><span class="s1">constructor = new constructor(</span><span class="s3">\n        </span><span class="s1">buffer.buffer,</span><span class="s3">\n        </span><span class="s1">buffer.byteOffset,</span><span class="s3">\n        </span><span class="s1">buffer.byteLength / bytesPerElement</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">resolveBuffer(response, id, constructor);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function flushInitialRenderPerformance() {}</span><span class="s3">\n    </span><span class="s1">function processFullBinaryRow(response, id, tag, buffer, chunk) {</span><span class="s3">\n      </span><span class="s1">switch (tag) {</span><span class="s3">\n        </span><span class="s1">case 65:</span><span class="s3">\n          </span><span class="s1">resolveBuffer(response, id, mergeBuffer(buffer, chunk).buffer);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 79:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Int8Array, 1);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 111:</span><span class="s3">\n          </span><span class="s1">resolveBuffer(</span><span class="s3">\n            </span><span class="s1">response,</span><span class="s3">\n            </span><span class="s1">id,</span><span class="s3">\n            </span><span class="s1">0 === buffer.length ? chunk : mergeBuffer(buffer, chunk)</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 85:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Uint8ClampedArray, 1);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 83:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Int16Array, 2);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 115:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Uint16Array, 2);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 76:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Int32Array, 4);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 108:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Uint32Array, 4);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 71:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Float32Array, 4);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 103:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, Float64Array, 8);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 77:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, BigInt64Array, 8);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 109:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, BigUint64Array, 8);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n        </span><span class="s1">case 86:</span><span class="s3">\n          </span><span class="s1">resolveTypedArray(response, id, buffer, chunk, DataView, 1);</span><span class="s3">\n          </span><span class="s1">return;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">for (</span><span class="s3">\n        </span><span class="s1">var stringDecoder = response._stringDecoder, row = </span><span class="s3">\&quot;\&quot;</span><span class="s1">, i = 0;</span><span class="s3">\n        </span><span class="s1">i &lt; buffer.length;</span><span class="s3">\n        </span><span class="s1">i++</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">row += stringDecoder.decode(buffer[i], decoderOptions);</span><span class="s3">\n      </span><span class="s1">row += stringDecoder.decode(chunk);</span><span class="s3">\n      </span><span class="s1">processFullStringRow(response, id, tag, row);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function processFullStringRow(response, id, tag, row) {</span><span class="s3">\n      </span><span class="s1">switch (tag) {</span><span class="s3">\n        </span><span class="s1">case 73:</span><span class="s3">\n          </span><span class="s1">resolveModule(response, id, row);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 72:</span><span class="s3">\n          </span><span class="s1">id = row[0];</span><span class="s3">\n          </span><span class="s1">row = row.slice(1);</span><span class="s3">\n          </span><span class="s1">response = JSON.parse(row, response._fromJSON);</span><span class="s3">\n          </span><span class="s1">row = ReactDOMSharedInternals.d;</span><span class="s3">\n          </span><span class="s1">switch (id) {</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">D</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">row.D(response);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">C</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof response</span><span class="s3">\n                </span><span class="s1">? row.C(response)</span><span class="s3">\n                </span><span class="s1">: row.C(response[0], response[1]);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">L</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              </span><span class="s1">id = response[0];</span><span class="s3">\n              </span><span class="s1">tag = response[1];</span><span class="s3">\n              </span><span class="s1">3 === response.length</span><span class="s3">\n                </span><span class="s1">? row.L(id, tag, response[2])</span><span class="s3">\n                </span><span class="s1">: row.L(id, tag);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">m</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof response</span><span class="s3">\n                </span><span class="s1">? row.m(response)</span><span class="s3">\n                </span><span class="s1">: row.m(response[0], response[1]);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">X</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof response</span><span class="s3">\n                </span><span class="s1">? row.X(response)</span><span class="s3">\n                </span><span class="s1">: row.X(response[0], response[1]);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">S</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof response</span><span class="s3">\n                </span><span class="s1">? row.S(response)</span><span class="s3">\n                </span><span class="s1">: row.S(</span><span class="s3">\n                    </span><span class="s1">response[0],</span><span class="s3">\n                    </span><span class="s1">0 === response[1] ? void 0 : response[1],</span><span class="s3">\n                    </span><span class="s1">3 === response.length ? response[2] : void 0</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">M</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof response</span><span class="s3">\n                </span><span class="s1">? row.M(response)</span><span class="s3">\n                </span><span class="s1">: row.M(response[0], response[1]);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 69:</span><span class="s3">\n          </span><span class="s1">tag = response._chunks;</span><span class="s3">\n          </span><span class="s1">var chunk = tag.get(id);</span><span class="s3">\n          </span><span class="s1">row = JSON.parse(row);</span><span class="s3">\n          </span><span class="s1">var error = resolveErrorDev(response, row);</span><span class="s3">\n          </span><span class="s1">error.digest = row.digest;</span><span class="s3">\n          </span><span class="s1">chunk</span><span class="s3">\n            </span><span class="s1">? triggerErrorOnChunk(response, chunk, error)</span><span class="s3">\n            </span><span class="s1">: tag.set(id, new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">, null, error));</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 84:</span><span class="s3">\n          </span><span class="s1">tag = response._chunks;</span><span class="s3">\n          </span><span class="s1">(chunk = tag.get(id)) &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">!== chunk.status</span><span class="s3">\n            </span><span class="s1">? chunk.reason.enqueueValue(row)</span><span class="s3">\n            </span><span class="s1">: (chunk &amp;&amp; releasePendingChunk(response, chunk),</span><span class="s3">\n              </span><span class="s1">tag.set(id, new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">, row, null)));</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 78:</span><span class="s3">\n          </span><span class="s1">response._timeOrigin = +row - performance.timeOrigin;</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 68:</span><span class="s3">\n          </span><span class="s1">id = getChunk(response, id);</span><span class="s3">\n          \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">!== id.status &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">rejected</span><span class="s3">\&quot; </span><span class="s1">!== id.status &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">halted</span><span class="s3">\&quot; </span><span class="s1">!== id.status &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">!== id.status &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot; </span><span class="s1">!== id.status &amp;&amp;</span><span class="s3">\n            </span><span class="s1">((tag = id._debugChunk),</span><span class="s3">\n            </span><span class="s1">(chunk = createResolvedModelChunk(response, row)),</span><span class="s3">\n            </span><span class="s1">(chunk._debugChunk = tag),</span><span class="s3">\n            </span><span class="s1">(id._debugChunk = chunk),</span><span class="s3">\n            </span><span class="s1">initializeDebugChunk(response, id),</span><span class="s3">\n            \&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== chunk.status &amp;&amp;</span><span class="s3">\n              </span><span class="s1">void 0 === response._debugChannel &amp;&amp;</span><span class="s3">\n              </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">' === row[0] &amp;&amp;</span><span class="s3">\n              \&quot;</span><span class="s1">$</span><span class="s3">\&quot; </span><span class="s1">=== row[1] &amp;&amp;</span><span class="s3">\n              </span><span class="s1">((row = row.slice(2, row.length - 1).split(</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\&quot;</span><span class="s1">)),</span><span class="s3">\n              </span><span class="s1">(row = parseInt(row[0], 16)),</span><span class="s3">\n              \&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== getChunk(response, row).status &amp;&amp;</span><span class="s3">\n                </span><span class="s1">(id._debugChunk = null)));</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 74:</span><span class="s3">\n          </span><span class="s1">resolveIOInfo(response, id, row);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 87:</span><span class="s3">\n          </span><span class="s1">resolveConsoleEntry(response, row);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 82:</span><span class="s3">\n          </span><span class="s1">startReadableStream(response, id, void 0);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 114:</span><span class="s3">\n          </span><span class="s1">startReadableStream(response, id, </span><span class="s3">\&quot;</span><span class="s1">bytes</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 88:</span><span class="s3">\n          </span><span class="s1">startAsyncIterable(response, id, !1);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 120:</span><span class="s3">\n          </span><span class="s1">startAsyncIterable(response, id, !0);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 67:</span><span class="s3">\n          </span><span class="s1">(response = response._chunks.get(id)) &amp;&amp;</span><span class="s3">\n            \&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot; </span><span class="s1">=== response.status &amp;&amp;</span><span class="s3">\n            </span><span class="s1">response.reason.close(</span><span class="s3">\&quot;\&quot; </span><span class="s1">=== row ? '</span><span class="s3">\&quot;</span><span class="s1">$undefined</span><span class="s3">\&quot;</span><span class="s1">' : row);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\&quot;\&quot; </span><span class="s1">=== row) {</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">((row = response._chunks),</span><span class="s3">\n              </span><span class="s1">(tag = row.get(id)) ||</span><span class="s3">\n                </span><span class="s1">row.set(id, (tag = createPendingChunk(response))),</span><span class="s3">\n              \&quot;</span><span class="s1">pending</span><span class="s3">\&quot; </span><span class="s1">=== tag.status || </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot; </span><span class="s1">=== tag.status)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">releasePendingChunk(response, tag),</span><span class="s3">\n                </span><span class="s1">(response = tag),</span><span class="s3">\n                </span><span class="s1">(response.status = </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">(response.value = null),</span><span class="s3">\n                </span><span class="s1">(response.reason = null);</span><span class="s3">\n          </span><span class="s1">} else</span><span class="s3">\n            </span><span class="s1">(tag = response._chunks),</span><span class="s3">\n              </span><span class="s1">(chunk = tag.get(id))</span><span class="s3">\n                </span><span class="s1">? resolveModelChunk(response, chunk, row)</span><span class="s3">\n                </span><span class="s1">: tag.set(id, createResolvedModelChunk(response, row));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function processBinaryChunk(weakResponse, streamState, chunk) {</span><span class="s3">\n      </span><span class="s1">if (void 0 !== weakResponse.weak.deref()) {</span><span class="s3">\n        </span><span class="s1">var response = unwrapWeakResponse(weakResponse),</span><span class="s3">\n          </span><span class="s1">i = 0,</span><span class="s3">\n          </span><span class="s1">rowState = streamState._rowState;</span><span class="s3">\n        </span><span class="s1">weakResponse = streamState._rowID;</span><span class="s3">\n        </span><span class="s1">for (</span><span class="s3">\n          </span><span class="s1">var rowTag = streamState._rowTag,</span><span class="s3">\n            </span><span class="s1">rowLength = streamState._rowLength,</span><span class="s3">\n            </span><span class="s1">buffer = streamState._buffer,</span><span class="s3">\n            </span><span class="s1">chunkLength = chunk.length;</span><span class="s3">\n          </span><span class="s1">i &lt; chunkLength;</span><span class="s3">\n\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">var lastIdx = -1;</span><span class="s3">\n          </span><span class="s1">switch (rowState) {</span><span class="s3">\n            </span><span class="s1">case 0:</span><span class="s3">\n              </span><span class="s1">lastIdx = chunk[i++];</span><span class="s3">\n              </span><span class="s1">58 === lastIdx</span><span class="s3">\n                </span><span class="s1">? (rowState = 1)</span><span class="s3">\n                </span><span class="s1">: (weakResponse =</span><span class="s3">\n                    </span><span class="s1">(weakResponse &lt;&lt; 4) |</span><span class="s3">\n                    </span><span class="s1">(96 &lt; lastIdx ? lastIdx - 87 : lastIdx - 48));</span><span class="s3">\n              </span><span class="s1">continue;</span><span class="s3">\n            </span><span class="s1">case 1:</span><span class="s3">\n              </span><span class="s1">rowState = chunk[i];</span><span class="s3">\n              </span><span class="s1">84 === rowState ||</span><span class="s3">\n              </span><span class="s1">65 === rowState ||</span><span class="s3">\n              </span><span class="s1">79 === rowState ||</span><span class="s3">\n              </span><span class="s1">111 === rowState ||</span><span class="s3">\n              </span><span class="s1">85 === rowState ||</span><span class="s3">\n              </span><span class="s1">83 === rowState ||</span><span class="s3">\n              </span><span class="s1">115 === rowState ||</span><span class="s3">\n              </span><span class="s1">76 === rowState ||</span><span class="s3">\n              </span><span class="s1">108 === rowState ||</span><span class="s3">\n              </span><span class="s1">71 === rowState ||</span><span class="s3">\n              </span><span class="s1">103 === rowState ||</span><span class="s3">\n              </span><span class="s1">77 === rowState ||</span><span class="s3">\n              </span><span class="s1">109 === rowState ||</span><span class="s3">\n              </span><span class="s1">86 === rowState</span><span class="s3">\n                </span><span class="s1">? ((rowTag = rowState), (rowState = 2), i++)</span><span class="s3">\n                </span><span class="s1">: (64 &lt; rowState &amp;&amp; 91 &gt; rowState) ||</span><span class="s3">\n                    </span><span class="s1">35 === rowState ||</span><span class="s3">\n                    </span><span class="s1">114 === rowState ||</span><span class="s3">\n                    </span><span class="s1">120 === rowState</span><span class="s3">\n                  </span><span class="s1">? ((rowTag = rowState), (rowState = 3), i++)</span><span class="s3">\n                  </span><span class="s1">: ((rowTag = 0), (rowState = 3));</span><span class="s3">\n              </span><span class="s1">continue;</span><span class="s3">\n            </span><span class="s1">case 2:</span><span class="s3">\n              </span><span class="s1">lastIdx = chunk[i++];</span><span class="s3">\n              </span><span class="s1">44 === lastIdx</span><span class="s3">\n                </span><span class="s1">? (rowState = 4)</span><span class="s3">\n                </span><span class="s1">: (rowLength =</span><span class="s3">\n                    </span><span class="s1">(rowLength &lt;&lt; 4) |</span><span class="s3">\n                    </span><span class="s1">(96 &lt; lastIdx ? lastIdx - 87 : lastIdx - 48));</span><span class="s3">\n              </span><span class="s1">continue;</span><span class="s3">\n            </span><span class="s1">case 3:</span><span class="s3">\n              </span><span class="s1">lastIdx = chunk.indexOf(10, i);</span><span class="s3">\n              </span><span class="s1">break;</span><span class="s3">\n            </span><span class="s1">case 4:</span><span class="s3">\n              </span><span class="s1">(lastIdx = i + rowLength),</span><span class="s3">\n                </span><span class="s1">lastIdx &gt; chunk.length &amp;&amp; (lastIdx = -1);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">var offset = chunk.byteOffset + i;</span><span class="s3">\n          </span><span class="s1">if (-1 &lt; lastIdx)</span><span class="s3">\n            </span><span class="s1">(rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),</span><span class="s3">\n              </span><span class="s1">processFullBinaryRow(</span><span class="s3">\n                </span><span class="s1">response,</span><span class="s3">\n                </span><span class="s1">weakResponse,</span><span class="s3">\n                </span><span class="s1">rowTag,</span><span class="s3">\n                </span><span class="s1">buffer,</span><span class="s3">\n                </span><span class="s1">rowLength</span><span class="s3">\n              </span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">(i = lastIdx),</span><span class="s3">\n              </span><span class="s1">3 === rowState &amp;&amp; i++,</span><span class="s3">\n              </span><span class="s1">(rowLength = weakResponse = rowTag = rowState = 0),</span><span class="s3">\n              </span><span class="s1">(buffer.length = 0);</span><span class="s3">\n          </span><span class="s1">else {</span><span class="s3">\n            </span><span class="s1">chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);</span><span class="s3">\n            </span><span class="s1">buffer.push(chunk);</span><span class="s3">\n            </span><span class="s1">rowLength -= chunk.byteLength;</span><span class="s3">\n            </span><span class="s1">break;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">streamState._rowState = rowState;</span><span class="s3">\n        </span><span class="s1">streamState._rowID = weakResponse;</span><span class="s3">\n        </span><span class="s1">streamState._rowTag = rowTag;</span><span class="s3">\n        </span><span class="s1">streamState._rowLength = rowLength;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createFromJSONCallback(response) {</span><span class="s3">\n      </span><span class="s1">return function (key, value) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof value)</span><span class="s3">\n          </span><span class="s1">return parseModelString(response, this, key, value);</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">=== typeof value &amp;&amp; null !== value) {</span><span class="s3">\n          </span><span class="s1">if (value[0] === REACT_ELEMENT_TYPE)</span><span class="s3">\n            </span><span class="s1">b: {</span><span class="s3">\n              </span><span class="s1">var owner = value[4];</span><span class="s3">\n              </span><span class="s1">key = value[5];</span><span class="s3">\n              </span><span class="s1">var validated = value[6];</span><span class="s3">\n              </span><span class="s1">value = {</span><span class="s3">\n                </span><span class="s1">$$typeof: REACT_ELEMENT_TYPE,</span><span class="s3">\n                </span><span class="s1">type: value[1],</span><span class="s3">\n                </span><span class="s1">key: value[2],</span><span class="s3">\n                </span><span class="s1">props: value[3],</span><span class="s3">\n                </span><span class="s1">_owner: void 0 === owner ? null : owner</span><span class="s3">\n              </span><span class="s1">};</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(value, </span><span class="s3">\&quot;</span><span class="s1">ref</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">get: nullRefGetter</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n              </span><span class="s1">value._store = {};</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(value._store, </span><span class="s3">\&quot;</span><span class="s1">validated</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">configurable: !1,</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">writable: !0,</span><span class="s3">\n                </span><span class="s1">value: validated</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(value, </span><span class="s3">\&quot;</span><span class="s1">_debugInfo</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">configurable: !1,</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">writable: !0,</span><span class="s3">\n                </span><span class="s1">value: null</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(value, </span><span class="s3">\&quot;</span><span class="s1">_debugStack</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">configurable: !1,</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">writable: !0,</span><span class="s3">\n                </span><span class="s1">value: void 0 === key ? null : key</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n              </span><span class="s1">Object.defineProperty(value, </span><span class="s3">\&quot;</span><span class="s1">_debugTask</span><span class="s3">\&quot;</span><span class="s1">, {</span><span class="s3">\n                </span><span class="s1">configurable: !1,</span><span class="s3">\n                </span><span class="s1">enumerable: !1,</span><span class="s3">\n                </span><span class="s1">writable: !0,</span><span class="s3">\n                </span><span class="s1">value: null</span><span class="s3">\n              </span><span class="s1">});</span><span class="s3">\n              </span><span class="s1">if (null !== initializingHandler) {</span><span class="s3">\n                </span><span class="s1">validated = initializingHandler;</span><span class="s3">\n                </span><span class="s1">initializingHandler = validated.parent;</span><span class="s3">\n                </span><span class="s1">if (validated.errored) {</span><span class="s3">\n                  </span><span class="s1">key = new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">rejected</span><span class="s3">\&quot;</span><span class="s1">, null, validated.reason);</span><span class="s3">\n                  </span><span class="s1">initializeElement(response, value);</span><span class="s3">\n                  </span><span class="s1">validated = {</span><span class="s3">\n                    </span><span class="s1">name: getComponentNameFromType(value.type) || </span><span class="s3">\&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n                    </span><span class="s1">owner: value._owner</span><span class="s3">\n                  </span><span class="s1">};</span><span class="s3">\n                  </span><span class="s1">validated.debugStack = value._debugStack;</span><span class="s3">\n                  </span><span class="s1">supportsCreateTask &amp;&amp;</span><span class="s3">\n                    </span><span class="s1">(validated.debugTask = value._debugTask);</span><span class="s3">\n                  </span><span class="s1">key._debugInfo = [validated];</span><span class="s3">\n                  </span><span class="s1">value = createLazyChunkWrapper(key);</span><span class="s3">\n                  </span><span class="s1">break b;</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">if (0 &lt; validated.deps) {</span><span class="s3">\n                  </span><span class="s1">key = new ReactPromise(</span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">, null, null);</span><span class="s3">\n                  </span><span class="s1">validated.value = value;</span><span class="s3">\n                  </span><span class="s1">validated.chunk = key;</span><span class="s3">\n                  </span><span class="s1">value = initializeElement.bind(null, response, value);</span><span class="s3">\n                  </span><span class="s1">key.then(value, value);</span><span class="s3">\n                  </span><span class="s1">value = createLazyChunkWrapper(key);</span><span class="s3">\n                  </span><span class="s1">break b;</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">initializeElement(response, value);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return value;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return value;</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function close(weakResponse) {</span><span class="s3">\n      </span><span class="s1">reportGlobalError(weakResponse, Error(</span><span class="s3">\&quot;</span><span class="s1">Connection closed.</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function noServerCall$1() {</span><span class="s3">\n      </span><span class="s1">throw Error(</span><span class="s3">\n        \&quot;</span><span class="s1">Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.</span><span class="s3">\&quot;\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function createResponseFromOptions(options) {</span><span class="s3">\n      </span><span class="s1">return new ResponseInstance(</span><span class="s3">\n        </span><span class="s1">options.serverConsumerManifest.moduleMap,</span><span class="s3">\n        </span><span class="s1">options.serverConsumerManifest.serverModuleMap,</span><span class="s3">\n        </span><span class="s1">options.serverConsumerManifest.moduleLoading,</span><span class="s3">\n        </span><span class="s1">noServerCall$1,</span><span class="s3">\n        </span><span class="s1">options.encodeFormAction,</span><span class="s3">\n        \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof options.nonce ? options.nonce : void 0,</span><span class="s3">\n        </span><span class="s1">options &amp;&amp; options.temporaryReferences</span><span class="s3">\n          </span><span class="s1">? options.temporaryReferences</span><span class="s3">\n          </span><span class="s1">: void 0,</span><span class="s3">\n        </span><span class="s1">options &amp;&amp; options.findSourceMapURL ? options.findSourceMapURL : void 0,</span><span class="s3">\n        </span><span class="s1">options ? !0 === options.replayConsoleLogs : !1,</span><span class="s3">\n        </span><span class="s1">options &amp;&amp; options.environmentName ? options.environmentName : void 0,</span><span class="s3">\n        </span><span class="s1">void 0</span><span class="s3">\n      </span><span class="s1">)._weakResponse;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function startReadingFromStream(response, stream) {</span><span class="s3">\n      </span><span class="s1">function progress(_ref) {</span><span class="s3">\n        </span><span class="s1">var value = _ref.value;</span><span class="s3">\n        </span><span class="s1">if (_ref.done) close(response);</span><span class="s3">\n        </span><span class="s1">else</span><span class="s3">\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">processBinaryChunk(response, streamState, value),</span><span class="s3">\n            </span><span class="s1">reader.read().then(progress).catch(error)</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">function error(e) {</span><span class="s3">\n        </span><span class="s1">reportGlobalError(response, e);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var streamState = createStreamState(),</span><span class="s3">\n        </span><span class="s1">reader = stream.getReader();</span><span class="s3">\n      </span><span class="s1">reader.read().then(progress).catch(error);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function noServerCall() {</span><span class="s3">\n      </span><span class="s1">throw Error(</span><span class="s3">\n        \&quot;</span><span class="s1">Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.</span><span class="s3">\&quot;\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">var util = require(</span><span class="s3">\&quot;</span><span class="s1">util</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">ReactDOM = require(</span><span class="s3">\&quot;</span><span class="s1">react-dom</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">React = require(</span><span class="s3">\&quot;</span><span class="s1">react</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">decoderOptions = { stream: !0 },</span><span class="s3">\n      </span><span class="s1">bind$1 = Function.prototype.bind,</span><span class="s3">\n      </span><span class="s1">instrumentedChunks = new WeakSet(),</span><span class="s3">\n      </span><span class="s1">loadedChunks = new WeakSet(),</span><span class="s3">\n      </span><span class="s1">ReactDOMSharedInternals =</span><span class="s3">\n        </span><span class="s1">ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,</span><span class="s3">\n      </span><span class="s1">REACT_ELEMENT_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.transitional.element</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_PORTAL_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.portal</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_FRAGMENT_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.fragment</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_STRICT_MODE_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.strict_mode</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_PROFILER_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.profiler</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_CONSUMER_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.consumer</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_CONTEXT_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.context</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_FORWARD_REF_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.forward_ref</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_SUSPENSE_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.suspense</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_SUSPENSE_LIST_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.suspense_list</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_MEMO_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.memo</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_LAZY_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.lazy</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">REACT_ACTIVITY_TYPE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.activity</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">MAYBE_ITERATOR_SYMBOL = Symbol.iterator,</span><span class="s3">\n      </span><span class="s1">ASYNC_ITERATOR = Symbol.asyncIterator,</span><span class="s3">\n      </span><span class="s1">isArrayImpl = Array.isArray,</span><span class="s3">\n      </span><span class="s1">getPrototypeOf = Object.getPrototypeOf,</span><span class="s3">\n      </span><span class="s1">jsxPropsParents = new WeakMap(),</span><span class="s3">\n      </span><span class="s1">jsxChildrenParents = new WeakMap(),</span><span class="s3">\n      </span><span class="s1">CLIENT_REFERENCE_TAG = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.client.reference</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">ObjectPrototype = Object.prototype,</span><span class="s3">\n      </span><span class="s1">knownServerReferences = new WeakMap(),</span><span class="s3">\n      </span><span class="s1">boundCache = new WeakMap(),</span><span class="s3">\n      </span><span class="s1">fakeServerFunctionIdx = 0,</span><span class="s3">\n      </span><span class="s1">FunctionBind = Function.prototype.bind,</span><span class="s3">\n      </span><span class="s1">ArraySlice = Array.prototype.slice,</span><span class="s3">\n      </span><span class="s1">v8FrameRegExp =</span><span class="s3">\n        </span><span class="s1">/^ {3} at (?:(.+) </span><span class="s3">\\</span><span class="s1">((.+):(</span><span class="s3">\\</span><span class="s1">d+):(</span><span class="s3">\\</span><span class="s1">d+)</span><span class="s3">\\</span><span class="s1">)|(?:async )?(.+):(</span><span class="s3">\\</span><span class="s1">d+):(</span><span class="s3">\\</span><span class="s1">d+))$/,</span><span class="s3">\n      </span><span class="s1">jscSpiderMonkeyFrameRegExp = /(?:(.*)@)?(.*):(</span><span class="s3">\\</span><span class="s1">d+):(</span><span class="s3">\\</span><span class="s1">d+)/,</span><span class="s3">\n      </span><span class="s1">REACT_CLIENT_REFERENCE = Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">react.client.reference</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">prefix,</span><span class="s3">\n      </span><span class="s1">suffix;</span><span class="s3">\n    </span><span class="s1">new (</span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof WeakMap ? WeakMap : Map)();</span><span class="s3">\n    </span><span class="s1">var ReactSharedInteralsServer =</span><span class="s3">\n        </span><span class="s1">React.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,</span><span class="s3">\n      </span><span class="s1">ReactSharedInternals =</span><span class="s3">\n        </span><span class="s1">React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE ||</span><span class="s3">\n        </span><span class="s1">ReactSharedInteralsServer;</span><span class="s3">\n    </span><span class="s1">ReactPromise.prototype = Object.create(Promise.prototype);</span><span class="s3">\n    </span><span class="s1">ReactPromise.prototype.then = function (resolve, reject) {</span><span class="s3">\n      </span><span class="s1">var _this = this;</span><span class="s3">\n      </span><span class="s1">switch (this.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_model</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModelChunk(this);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">resolved_module</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">initializeModuleChunk(this);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">var resolveCallback = resolve,</span><span class="s3">\n        </span><span class="s1">rejectCallback = reject,</span><span class="s3">\n        </span><span class="s1">wrapperPromise = new Promise(function (res, rej) {</span><span class="s3">\n          </span><span class="s1">resolve = function (value) {</span><span class="s3">\n            </span><span class="s1">wrapperPromise._debugInfo = _this._debugInfo;</span><span class="s3">\n            </span><span class="s1">res(value);</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n          </span><span class="s1">reject = function (reason) {</span><span class="s3">\n            </span><span class="s1">wrapperPromise._debugInfo = _this._debugInfo;</span><span class="s3">\n            </span><span class="s1">rej(reason);</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">wrapperPromise.then(resolveCallback, rejectCallback);</span><span class="s3">\n      </span><span class="s1">switch (this.status) {</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">fulfilled</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof resolve &amp;&amp; resolve(this.value);</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">pending</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">blocked</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof resolve &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(null === this.value &amp;&amp; (this.value = []),</span><span class="s3">\n            </span><span class="s1">this.value.push(resolve));</span><span class="s3">\n          \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof reject &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(null === this.reason &amp;&amp; (this.reason = []),</span><span class="s3">\n            </span><span class="s1">this.reason.push(reject));</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">halted</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n          \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof reject &amp;&amp; reject(this.reason);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">var debugChannelRegistry =</span><span class="s3">\n        \&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">=== typeof FinalizationRegistry</span><span class="s3">\n          </span><span class="s1">? new FinalizationRegistry(cleanupDebugChannel)</span><span class="s3">\n          </span><span class="s1">: null,</span><span class="s3">\n      </span><span class="s1">initializingHandler = null,</span><span class="s3">\n      </span><span class="s1">mightHaveStaticConstructor = /</span><span class="s3">\\</span><span class="s1">bclass</span><span class="s3">\\</span><span class="s1">b.*</span><span class="s3">\\</span><span class="s1">bstatic</span><span class="s3">\\</span><span class="s1">b/,</span><span class="s3">\n      </span><span class="s1">supportsCreateTask = !!console.createTask,</span><span class="s3">\n      </span><span class="s1">fakeFunctionCache = new Map(),</span><span class="s3">\n      </span><span class="s1">fakeFunctionIdx = 0,</span><span class="s3">\n      </span><span class="s1">createFakeJSXCallStack = {</span><span class="s3">\n        </span><span class="s1">react_stack_bottom_frame: function (response, stack, environmentName) {</span><span class="s3">\n          </span><span class="s1">return buildFakeCallStack(</span><span class="s3">\n            </span><span class="s1">response,</span><span class="s3">\n            </span><span class="s1">stack,</span><span class="s3">\n            </span><span class="s1">environmentName,</span><span class="s3">\n            </span><span class="s1">!1,</span><span class="s3">\n            </span><span class="s1">fakeJSXCallSite</span><span class="s3">\n          </span><span class="s1">)();</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">createFakeJSXCallStackInDEV =</span><span class="s3">\n        </span><span class="s1">createFakeJSXCallStack.react_stack_bottom_frame.bind(</span><span class="s3">\n          </span><span class="s1">createFakeJSXCallStack</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">currentOwnerInDEV = null,</span><span class="s3">\n      </span><span class="s1">replayConsoleWithCallStack = {</span><span class="s3">\n        </span><span class="s1">react_stack_bottom_frame: function (response, payload) {</span><span class="s3">\n          </span><span class="s1">var methodName = payload[0],</span><span class="s3">\n            </span><span class="s1">stackTrace = payload[1],</span><span class="s3">\n            </span><span class="s1">owner = payload[2],</span><span class="s3">\n            </span><span class="s1">env = payload[3];</span><span class="s3">\n          </span><span class="s1">payload = payload.slice(4);</span><span class="s3">\n          </span><span class="s1">var prevStack = ReactSharedInternals.getCurrentStack;</span><span class="s3">\n          </span><span class="s1">ReactSharedInternals.getCurrentStack = getCurrentStackInDEV;</span><span class="s3">\n          </span><span class="s1">currentOwnerInDEV = null === owner ? response._debugRootOwner : owner;</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">a: {</span><span class="s3">\n              </span><span class="s1">var offset = 0;</span><span class="s3">\n              </span><span class="s1">switch (methodName) {</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">dir</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">dirxml</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">groupEnd</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">table</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">var JSCompiler_inline_result = bind$1.apply(</span><span class="s3">\n                    </span><span class="s1">console[methodName],</span><span class="s3">\n                    </span><span class="s1">[console].concat(payload)</span><span class="s3">\n                  </span><span class="s1">);</span><span class="s3">\n                  </span><span class="s1">break a;</span><span class="s3">\n                </span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">assert</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n                  </span><span class="s1">offset = 1;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">var newArgs = payload.slice(0);</span><span class="s3">\n              \&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof newArgs[offset]</span><span class="s3">\n                </span><span class="s1">? newArgs.splice(</span><span class="s3">\n                    </span><span class="s1">offset,</span><span class="s3">\n                    </span><span class="s1">1,</span><span class="s3">\n                    \&quot;\\</span><span class="s1">u001b[0m</span><span class="s3">\\</span><span class="s1">u001b[7m%c%s</span><span class="s3">\\</span><span class="s1">u001b[0m%c </span><span class="s3">\&quot; </span><span class="s1">+ newArgs[offset],</span><span class="s3">\n                    \&quot;</span><span class="s1">background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                    \&quot; \&quot; </span><span class="s1">+ env + </span><span class="s3">\&quot; \&quot;</span><span class="s1">,</span><span class="s3">\n                    \&quot;\&quot;\n                  </span><span class="s1">)</span><span class="s3">\n                </span><span class="s1">: newArgs.splice(</span><span class="s3">\n                    </span><span class="s1">offset,</span><span class="s3">\n                    </span><span class="s1">0,</span><span class="s3">\n                    \&quot;\\</span><span class="s1">u001b[0m</span><span class="s3">\\</span><span class="s1">u001b[7m%c%s</span><span class="s3">\\</span><span class="s1">u001b[0m%c</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                    \&quot;</span><span class="s1">background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n                    \&quot; \&quot; </span><span class="s1">+ env + </span><span class="s3">\&quot; \&quot;</span><span class="s1">,</span><span class="s3">\n                    \&quot;\&quot;\n                  </span><span class="s1">);</span><span class="s3">\n              </span><span class="s1">newArgs.unshift(console);</span><span class="s3">\n              </span><span class="s1">JSCompiler_inline_result = bind$1.apply(</span><span class="s3">\n                </span><span class="s1">console[methodName],</span><span class="s3">\n                </span><span class="s1">newArgs</span><span class="s3">\n              </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">var callStack = buildFakeCallStack(</span><span class="s3">\n              </span><span class="s1">response,</span><span class="s3">\n              </span><span class="s1">stackTrace,</span><span class="s3">\n              </span><span class="s1">env,</span><span class="s3">\n              </span><span class="s1">!1,</span><span class="s3">\n              </span><span class="s1">JSCompiler_inline_result</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">if (null != owner) {</span><span class="s3">\n              </span><span class="s1">var task = initializeFakeTask(response, owner);</span><span class="s3">\n              </span><span class="s1">initializeFakeStack(response, owner);</span><span class="s3">\n              </span><span class="s1">if (null !== task) {</span><span class="s3">\n                </span><span class="s1">task.run(callStack);</span><span class="s3">\n                </span><span class="s1">return;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">var rootTask = getRootTask(response, env);</span><span class="s3">\n            </span><span class="s1">null != rootTask ? rootTask.run(callStack) : callStack();</span><span class="s3">\n          </span><span class="s1">} finally {</span><span class="s3">\n            </span><span class="s1">(currentOwnerInDEV = null),</span><span class="s3">\n              </span><span class="s1">(ReactSharedInternals.getCurrentStack = prevStack);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">replayConsoleWithCallStackInDEV =</span><span class="s3">\n        </span><span class="s1">replayConsoleWithCallStack.react_stack_bottom_frame.bind(</span><span class="s3">\n          </span><span class="s1">replayConsoleWithCallStack</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">exports.createFromFetch = function (promiseForResponse, options) {</span><span class="s3">\n      </span><span class="s1">var response = createResponseFromOptions(options);</span><span class="s3">\n      </span><span class="s1">promiseForResponse.then(</span><span class="s3">\n        </span><span class="s1">function (r) {</span><span class="s3">\n          </span><span class="s1">startReadingFromStream(response, r.body);</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">function (e) {</span><span class="s3">\n          </span><span class="s1">reportGlobalError(response, e);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">return getRoot(response);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.createFromNodeStream = function (</span><span class="s3">\n      </span><span class="s1">stream,</span><span class="s3">\n      </span><span class="s1">serverConsumerManifest,</span><span class="s3">\n      </span><span class="s1">options</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">var response$jscomp$0 = new ResponseInstance(</span><span class="s3">\n          </span><span class="s1">serverConsumerManifest.moduleMap,</span><span class="s3">\n          </span><span class="s1">serverConsumerManifest.serverModuleMap,</span><span class="s3">\n          </span><span class="s1">serverConsumerManifest.moduleLoading,</span><span class="s3">\n          </span><span class="s1">noServerCall,</span><span class="s3">\n          </span><span class="s1">options ? options.encodeFormAction : void 0,</span><span class="s3">\n          </span><span class="s1">options &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof options.nonce ? options.nonce : void 0,</span><span class="s3">\n          </span><span class="s1">void 0,</span><span class="s3">\n          </span><span class="s1">options &amp;&amp; options.findSourceMapURL</span><span class="s3">\n            </span><span class="s1">? options.findSourceMapURL</span><span class="s3">\n            </span><span class="s1">: void 0,</span><span class="s3">\n          </span><span class="s1">options ? !0 === options.replayConsoleLogs : !1,</span><span class="s3">\n          </span><span class="s1">options &amp;&amp; options.environmentName ? options.environmentName : void 0,</span><span class="s3">\n          </span><span class="s1">void 0</span><span class="s3">\n        </span><span class="s1">)._weakResponse,</span><span class="s3">\n        </span><span class="s1">streamState = createStreamState();</span><span class="s3">\n      </span><span class="s1">stream.on(</span><span class="s3">\&quot;</span><span class="s1">data</span><span class="s3">\&quot;</span><span class="s1">, function (chunk) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">=== typeof chunk) {</span><span class="s3">\n          </span><span class="s1">if (void 0 !== response$jscomp$0.weak.deref()) {</span><span class="s3">\n            </span><span class="s1">for (</span><span class="s3">\n              </span><span class="s1">var response = unwrapWeakResponse(response$jscomp$0),</span><span class="s3">\n                </span><span class="s1">i = 0,</span><span class="s3">\n                </span><span class="s1">rowState = streamState._rowState,</span><span class="s3">\n                </span><span class="s1">rowID = streamState._rowID,</span><span class="s3">\n                </span><span class="s1">rowTag = streamState._rowTag,</span><span class="s3">\n                </span><span class="s1">rowLength = streamState._rowLength,</span><span class="s3">\n                </span><span class="s1">buffer = streamState._buffer,</span><span class="s3">\n                </span><span class="s1">chunkLength = chunk.length;</span><span class="s3">\n              </span><span class="s1">i &lt; chunkLength;</span><span class="s3">\n\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">var lastIdx = -1;</span><span class="s3">\n              </span><span class="s1">switch (rowState) {</span><span class="s3">\n                </span><span class="s1">case 0:</span><span class="s3">\n                  </span><span class="s1">lastIdx = chunk.charCodeAt(i++);</span><span class="s3">\n                  </span><span class="s1">58 === lastIdx</span><span class="s3">\n                    </span><span class="s1">? (rowState = 1)</span><span class="s3">\n                    </span><span class="s1">: (rowID =</span><span class="s3">\n                        </span><span class="s1">(rowID &lt;&lt; 4) |</span><span class="s3">\n                        </span><span class="s1">(96 &lt; lastIdx ? lastIdx - 87 : lastIdx - 48));</span><span class="s3">\n                  </span><span class="s1">continue;</span><span class="s3">\n                </span><span class="s1">case 1:</span><span class="s3">\n                  </span><span class="s1">rowState = chunk.charCodeAt(i);</span><span class="s3">\n                  </span><span class="s1">84 === rowState ||</span><span class="s3">\n                  </span><span class="s1">65 === rowState ||</span><span class="s3">\n                  </span><span class="s1">79 === rowState ||</span><span class="s3">\n                  </span><span class="s1">111 === rowState ||</span><span class="s3">\n                  </span><span class="s1">85 === rowState ||</span><span class="s3">\n                  </span><span class="s1">83 === rowState ||</span><span class="s3">\n                  </span><span class="s1">115 === rowState ||</span><span class="s3">\n                  </span><span class="s1">76 === rowState ||</span><span class="s3">\n                  </span><span class="s1">108 === rowState ||</span><span class="s3">\n                  </span><span class="s1">71 === rowState ||</span><span class="s3">\n                  </span><span class="s1">103 === rowState ||</span><span class="s3">\n                  </span><span class="s1">77 === rowState ||</span><span class="s3">\n                  </span><span class="s1">109 === rowState ||</span><span class="s3">\n                  </span><span class="s1">86 === rowState</span><span class="s3">\n                    </span><span class="s1">? ((rowTag = rowState), (rowState = 2), i++)</span><span class="s3">\n                    </span><span class="s1">: (64 &lt; rowState &amp;&amp; 91 &gt; rowState) ||</span><span class="s3">\n                        </span><span class="s1">114 === rowState ||</span><span class="s3">\n                        </span><span class="s1">120 === rowState</span><span class="s3">\n                      </span><span class="s1">? ((rowTag = rowState), (rowState = 3), i++)</span><span class="s3">\n                      </span><span class="s1">: ((rowTag = 0), (rowState = 3));</span><span class="s3">\n                  </span><span class="s1">continue;</span><span class="s3">\n                </span><span class="s1">case 2:</span><span class="s3">\n                  </span><span class="s1">lastIdx = chunk.charCodeAt(i++);</span><span class="s3">\n                  </span><span class="s1">44 === lastIdx</span><span class="s3">\n                    </span><span class="s1">? (rowState = 4)</span><span class="s3">\n                    </span><span class="s1">: (rowLength =</span><span class="s3">\n                        </span><span class="s1">(rowLength &lt;&lt; 4) |</span><span class="s3">\n                        </span><span class="s1">(96 &lt; lastIdx ? lastIdx - 87 : lastIdx - 48));</span><span class="s3">\n                  </span><span class="s1">continue;</span><span class="s3">\n                </span><span class="s1">case 3:</span><span class="s3">\n                  </span><span class="s1">lastIdx = chunk.indexOf(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">, i);</span><span class="s3">\n                  </span><span class="s1">break;</span><span class="s3">\n                </span><span class="s1">case 4:</span><span class="s3">\n                  </span><span class="s1">if (84 !== rowTag)</span><span class="s3">\n                    </span><span class="s1">throw Error(</span><span class="s3">\n                      \&quot;</span><span class="s1">Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.</span><span class="s3">\&quot;\n                    </span><span class="s1">);</span><span class="s3">\n                  </span><span class="s1">if (rowLength &lt; chunk.length || chunk.length &gt; 3 * rowLength)</span><span class="s3">\n                    </span><span class="s1">throw Error(</span><span class="s3">\n                      \&quot;</span><span class="s1">String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.</span><span class="s3">\&quot;\n                    </span><span class="s1">);</span><span class="s3">\n                  </span><span class="s1">lastIdx = chunk.length;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">if (-1 &lt; lastIdx) {</span><span class="s3">\n                </span><span class="s1">if (0 &lt; buffer.length)</span><span class="s3">\n                  </span><span class="s1">throw Error(</span><span class="s3">\n                    \&quot;</span><span class="s1">String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.</span><span class="s3">\&quot;\n                  </span><span class="s1">);</span><span class="s3">\n                </span><span class="s1">i = chunk.slice(i, lastIdx);</span><span class="s3">\n                </span><span class="s1">processFullStringRow(response, rowID, rowTag, i);</span><span class="s3">\n                </span><span class="s1">i = lastIdx;</span><span class="s3">\n                </span><span class="s1">3 === rowState &amp;&amp; i++;</span><span class="s3">\n                </span><span class="s1">rowLength = rowID = rowTag = rowState = 0;</span><span class="s3">\n                </span><span class="s1">buffer.length = 0;</span><span class="s3">\n              </span><span class="s1">} else if (chunk.length !== i)</span><span class="s3">\n                </span><span class="s1">throw Error(</span><span class="s3">\n                  \&quot;</span><span class="s1">String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.</span><span class="s3">\&quot;\n                </span><span class="s1">);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">streamState._rowState = rowState;</span><span class="s3">\n            </span><span class="s1">streamState._rowID = rowID;</span><span class="s3">\n            </span><span class="s1">streamState._rowTag = rowTag;</span><span class="s3">\n            </span><span class="s1">streamState._rowLength = rowLength;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} else processBinaryChunk(response$jscomp$0, streamState, chunk);</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">stream.on(</span><span class="s3">\&quot;</span><span class="s1">error</span><span class="s3">\&quot;</span><span class="s1">, function (error) {</span><span class="s3">\n        </span><span class="s1">reportGlobalError(response$jscomp$0, error);</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">stream.on(</span><span class="s3">\&quot;</span><span class="s1">end</span><span class="s3">\&quot;</span><span class="s1">, function () {</span><span class="s3">\n        </span><span class="s1">return close(response$jscomp$0);</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">return getRoot(response$jscomp$0);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.createFromReadableStream = function (stream, options) {</span><span class="s3">\n      </span><span class="s1">options = createResponseFromOptions(options);</span><span class="s3">\n      </span><span class="s1">startReadingFromStream(options, stream);</span><span class="s3">\n      </span><span class="s1">return getRoot(options);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.createServerReference = function (id) {</span><span class="s3">\n      </span><span class="s1">return createServerReference$1(id, noServerCall$1);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.createTemporaryReferenceSet = function () {</span><span class="s3">\n      </span><span class="s1">return new Map();</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.encodeReply = function (value, options) {</span><span class="s3">\n      </span><span class="s1">return new Promise(function (resolve, reject) {</span><span class="s3">\n        </span><span class="s1">var abort = processReply(</span><span class="s3">\n          </span><span class="s1">value,</span><span class="s3">\n          \&quot;\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">options &amp;&amp; options.temporaryReferences</span><span class="s3">\n            </span><span class="s1">? options.temporaryReferences</span><span class="s3">\n            </span><span class="s1">: void 0,</span><span class="s3">\n          </span><span class="s1">resolve,</span><span class="s3">\n          </span><span class="s1">reject</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">if (options &amp;&amp; options.signal) {</span><span class="s3">\n          </span><span class="s1">var signal = options.signal;</span><span class="s3">\n          </span><span class="s1">if (signal.aborted) abort(signal.reason);</span><span class="s3">\n          </span><span class="s1">else {</span><span class="s3">\n            </span><span class="s1">var listener = function () {</span><span class="s3">\n              </span><span class="s1">abort(signal.reason);</span><span class="s3">\n              </span><span class="s1">signal.removeEventListener(</span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">, listener);</span><span class="s3">\n            </span><span class="s1">};</span><span class="s3">\n            </span><span class="s1">signal.addEventListener(</span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">, listener);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">exports.registerServerReference = function (</span><span class="s3">\n      </span><span class="s1">reference,</span><span class="s3">\n      </span><span class="s1">id,</span><span class="s3">\n      </span><span class="s1">encodeFormAction</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">registerBoundServerReference(reference, id, null, encodeFormAction);</span><span class="s3">\n      </span><span class="s1">return reference;</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">})();</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15128</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/react-server-dom-turbopack/client.node.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use strict';</span><span class="s3">\n\n</span><span class="s1">if (process.env.NODE_ENV === 'production') {</span><span class="s3">\n  </span><span class="s1">module.exports = require('./cjs/react-server-dom-turbopack-client.node.production.js');</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">module.exports = require('./cjs/react-server-dom-turbopack-client.node.development.js');</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15137</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/detached-promise.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* A `Promise.withResolvers` implementation that exposes the `resolve` and</span><span class="s3">\n </span><span class="s1">* `reject` functions on a `Promise`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @see https://tc39.es/proposal-promise-with-resolvers/</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export class DetachedPromise&lt;T = any&gt; {</span><span class="s3">\n  </span><span class="s1">public readonly resolve: (value: T | PromiseLike&lt;T&gt;) =&gt; void</span><span class="s3">\n  </span><span class="s1">public readonly reject: (reason: any) =&gt; void</span><span class="s3">\n  </span><span class="s1">public readonly promise: Promise&lt;T&gt;</span><span class="s3">\n\n  </span><span class="s1">constructor() {</span><span class="s3">\n    </span><span class="s1">let resolve: (value: T | PromiseLike&lt;T&gt;) =&gt; void</span><span class="s3">\n    </span><span class="s1">let reject: (reason: any) =&gt; void</span><span class="s3">\n\n    </span><span class="s1">// Create the promise and assign the resolvers to the object.</span><span class="s3">\n    </span><span class="s1">this.promise = new Promise&lt;T&gt;((res, rej) =&gt; {</span><span class="s3">\n      </span><span class="s1">resolve = res</span><span class="s3">\n      </span><span class="s1">reject = rej</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">// We know that resolvers is defined because the Promise constructor runs</span><span class="s3">\n    </span><span class="s1">// synchronously.</span><span class="s3">\n    </span><span class="s1">this.resolve = resolve!</span><span class="s3">\n    </span><span class="s1">this.reject = reject!</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;rej&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;CAKC,GACD;;;;AAAO,MAAMA;IAKXC,aAAc;QACZ,IAAIC;QACJ,IAAIC;QAEJ,6DAA6D;QAC7D,IAAI,CAACC,OAAO,GAAG,IAAIC,QAAW,CAACC,KAAKC;YAClCL,UAAUI;YACVH,SAASI;QACX;QAEA,yEAAyE;QACzE,iBAAiB;QACjB,IAAI,CAACL,OAAO,GAAGA;QACf,IAAI,CAACC,MAAM,GAAGA;IAChB;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15165</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/stream-utils/encoded-tags.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const ENCODED_TAGS = {</span><span class="s3">\n  </span><span class="s1">// opening tags do not have the closing `&gt;` since they can contain other attributes such as `&lt;body className=''&gt;`</span><span class="s3">\n  </span><span class="s1">OPENING: {</span><span class="s3">\n    </span><span class="s1">// &lt;html</span><span class="s3">\n    </span><span class="s1">HTML: new Uint8Array([60, 104, 116, 109, 108]),</span><span class="s3">\n    </span><span class="s1">// &lt;body</span><span class="s3">\n    </span><span class="s1">BODY: new Uint8Array([60, 98, 111, 100, 121]),</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">CLOSED: {</span><span class="s3">\n    </span><span class="s1">// &lt;/head&gt;</span><span class="s3">\n    </span><span class="s1">HEAD: new Uint8Array([60, 47, 104, 101, 97, 100, 62]),</span><span class="s3">\n    </span><span class="s1">// &lt;/body&gt;</span><span class="s3">\n    </span><span class="s1">BODY: new Uint8Array([60, 47, 98, 111, 100, 121, 62]),</span><span class="s3">\n    </span><span class="s1">// &lt;/html&gt;</span><span class="s3">\n    </span><span class="s1">HTML: new Uint8Array([60, 47, 104, 116, 109, 108, 62]),</span><span class="s3">\n    </span><span class="s1">// &lt;/body&gt;&lt;/html&gt;</span><span class="s3">\n    </span><span class="s1">BODY_AND_HTML: new Uint8Array([</span><span class="s3">\n      </span><span class="s1">60, 47, 98, 111, 100, 121, 62, 60, 47, 104, 116, 109, 108, 62,</span><span class="s3">\n    </span><span class="s1">]),</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">META: {</span><span class="s3">\n    </span><span class="s1">// Only the match the prefix cause the suffix can be different wether it's xml compatible or not </span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\&quot; </span><span class="s1">or </span><span class="s3">\&quot;</span><span class="s1">/&gt;</span><span class="s3">\&quot;\n    </span><span class="s1">// &lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">nxt-icon</span><span class="s3">\&quot;\n    </span><span class="s1">// This is a special mark that will be replaced by the icon insertion script tag.</span><span class="s3">\n    </span><span class="s1">ICON_MARK: new Uint8Array([</span><span class="s3">\n      </span><span class="s1">60, 109, 101, 116, 97, 32, 110, 97, 109, 101, 61, 34, 194, 171, 110, 120,</span><span class="s3">\n      </span><span class="s1">116, 45, 105, 99, 111, 110, 194, 187, 34,</span><span class="s3">\n    </span><span class="s1">]),</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ENCODED_TAGS&quot;</span><span class="s0">,</span><span class="s1">&quot;OPENING&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML&quot;</span><span class="s0">,</span><span class="s1">&quot;Uint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;BODY&quot;</span><span class="s0">,</span><span class="s1">&quot;CLOSED&quot;</span><span class="s0">,</span><span class="s1">&quot;HEAD&quot;</span><span class="s0">,</span><span class="s1">&quot;BODY_AND_HTML&quot;</span><span class="s0">,</span><span class="s1">&quot;META&quot;</span><span class="s0">,</span><span class="s1">&quot;ICON_MARK&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,MAAMA,eAAe;IAC1B,iHAAiH;IACjHC,SAAS;QACP,QAAQ;QACRC,MAAM,IAAIC,WAAW;YAAC;YAAI;YAAK;YAAK;YAAK;SAAI;QAC7C,QAAQ;QACRC,MAAM,IAAID,WAAW;YAAC;YAAI;YAAI;YAAK;YAAK;SAAI;IAC9C;IACAE,QAAQ;QACN,UAAU;QACVC,MAAM,IAAIH,WAAW;YAAC;YAAI;YAAI;YAAK;YAAK;YAAI;YAAK;SAAG;QACpD,UAAU;QACVC,MAAM,IAAID,WAAW;YAAC;YAAI;YAAI;YAAI;YAAK;YAAK;YAAK;SAAG;QACpD,UAAU;QACVD,MAAM,IAAIC,WAAW;YAAC;YAAI;YAAI;YAAK;YAAK;YAAK;YAAK;SAAG;QACrD,iBAAiB;QACjBI,eAAe,IAAIJ,WAAW;YAC5B;YAAI;YAAI;YAAI;YAAK;YAAK;YAAK;YAAI;YAAI;YAAI;YAAK;YAAK;YAAK;YAAK;SAC5D;IACH;IACAK,MAAM;QACJ,4GAA4G;QAC5G,0BAA0B;QAC1B,iFAAiF;QACjFC,WAAW,IAAIN,WAAW;YACxB;YAAI;YAAK;YAAK;YAAK;YAAI;YAAI;YAAK;YAAI;YAAK;YAAK;YAAI;YAAI;YAAK;YAAK;YAAK;YACrE;YAAK;YAAI;YAAK;YAAI;YAAK;YAAK;YAAK;YAAK;SACvC;IACH;AACF,EAAU&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15275</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/stream-utils/uint8array-helpers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Find the starting index of Uint8Array `b` within Uint8Array `a`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function indexOfUint8Array(a: Uint8Array, b: Uint8Array) {</span><span class="s3">\n  </span><span class="s1">if (b.length === 0) return 0</span><span class="s3">\n  </span><span class="s1">if (a.length === 0 || b.length &gt; a.length) return -1</span><span class="s3">\n\n  </span><span class="s1">// start iterating through `a`</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt;= a.length - b.length; i++) {</span><span class="s3">\n    </span><span class="s1">let completeMatch = true</span><span class="s3">\n    </span><span class="s1">// from index `i`, iterate through `b` and check for mismatch</span><span class="s3">\n    </span><span class="s1">for (let j = 0; j &lt; b.length; j++) {</span><span class="s3">\n      </span><span class="s1">// if the values do not match, then this isn't a complete match, exit `b` iteration early and iterate to next index of `a`.</span><span class="s3">\n      </span><span class="s1">if (a[i + j] !== b[j]) {</span><span class="s3">\n        </span><span class="s1">completeMatch = false</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (completeMatch) {</span><span class="s3">\n      </span><span class="s1">return i</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return -1</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Check if two Uint8Arrays are strictly equivalent.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isEquivalentUint8Arrays(a: Uint8Array, b: Uint8Array) {</span><span class="s3">\n  </span><span class="s1">if (a.length !== b.length) return false</span><span class="s3">\n\n  </span><span class="s1">for (let i = 0; i &lt; a.length; i++) {</span><span class="s3">\n    </span><span class="s1">if (a[i] !== b[i]) return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return true</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Remove Uint8Array `b` from Uint8Array `a`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* If `b` is not in `a`, `a` is returned unchanged.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Otherwise, the function returns a new Uint8Array instance with size `a.length - b.length`</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function removeFromUint8Array(a: Uint8Array, b: Uint8Array) {</span><span class="s3">\n  </span><span class="s1">const tagIndex = indexOfUint8Array(a, b)</span><span class="s3">\n  </span><span class="s1">if (tagIndex === 0) return a.subarray(b.length)</span><span class="s3">\n  </span><span class="s1">if (tagIndex &gt; -1) {</span><span class="s3">\n    </span><span class="s1">const removed = new Uint8Array(a.length - b.length)</span><span class="s3">\n    </span><span class="s1">removed.set(a.slice(0, tagIndex))</span><span class="s3">\n    </span><span class="s1">removed.set(a.slice(tagIndex + b.length), tagIndex)</span><span class="s3">\n    </span><span class="s1">return removed</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return a</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;indexOfUint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;completeMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;j&quot;</span><span class="s0">,</span><span class="s1">&quot;isEquivalentUint8Arrays&quot;</span><span class="s0">,</span><span class="s1">&quot;removeFromUint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;tagIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;subarray&quot;</span><span class="s0">,</span><span class="s1">&quot;removed&quot;</span><span class="s0">,</span><span class="s1">&quot;Uint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;CAEC,GACD;;;;;;;;AAAO,SAASA,kBAAkBC,CAAa,EAAEC,CAAa;IAC5D,IAAIA,EAAEC,MAAM,KAAK,GAAG,OAAO;IAC3B,IAAIF,EAAEE,MAAM,KAAK,KAAKD,EAAEC,MAAM,GAAGF,EAAEE,MAAM,EAAE,OAAO,CAAC;IAEnD,8BAA8B;IAC9B,IAAK,IAAIC,IAAI,GAAGA,KAAKH,EAAEE,MAAM,GAAGD,EAAEC,MAAM,EAAEC,IAAK;QAC7C,IAAIC,gBAAgB;QACpB,6DAA6D;QAC7D,IAAK,IAAIC,IAAI,GAAGA,IAAIJ,EAAEC,MAAM,EAAEG,IAAK;YACjC,2HAA2H;YAC3H,IAAIL,CAAC,CAACG,IAAIE,EAAE,KAAKJ,CAAC,CAACI,EAAE,EAAE;gBACrBD,gBAAgB;gBAChB;YACF;QACF;QAEA,IAAIA,eAAe;YACjB,OAAOD;QACT;IACF;IAEA,OAAO,CAAC;AACV;AAKO,SAASG,wBAAwBN,CAAa,EAAEC,CAAa;IAClE,IAAID,EAAEE,MAAM,KAAKD,EAAEC,MAAM,EAAE,OAAO;IAElC,IAAK,IAAIC,IAAI,GAAGA,IAAIH,EAAEE,MAAM,EAAEC,IAAK;QACjC,IAAIH,CAAC,CAACG,EAAE,KAAKF,CAAC,CAACE,EAAE,EAAE,OAAO;IAC5B;IAEA,OAAO;AACT;AASO,SAASI,qBAAqBP,CAAa,EAAEC,CAAa;IAC/D,MAAMO,WAAWT,kBAAkBC,GAAGC;IACtC,IAAIO,aAAa,GAAG,OAAOR,EAAES,QAAQ,CAACR,EAAEC,MAAM;IAC9C,IAAIM,WAAW,CAAC,GAAG;QACjB,MAAME,UAAU,IAAIC,WAAWX,EAAEE,MAAM,GAAGD,EAAEC,MAAM;QAClDQ,QAAQE,GAAG,CAACZ,EAAEa,KAAK,CAAC,GAAGL;QACvBE,QAAQE,GAAG,CAACZ,EAAEa,KAAK,CAACL,WAAWP,EAAEC,MAAM,GAAGM;QAC1C,OAAOE;IACT,OAAO;QACL,OAAOV;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15328</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/errors/constants.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export const MISSING_ROOT_TAGS_ERROR = 'NEXT_MISSING_ROOT_TAGS'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;MISSING_ROOT_TAGS_ERROR&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,MAAMA,0BAA0B,yBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15337</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/segment-cache/output-export-prefetch-encoding.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// In output: export mode, the build id is added to the start of the HTML</span><span class="s3">\n</span><span class="s1">// document, directly after the doctype declaration. During a prefetch, the</span><span class="s3">\n</span><span class="s1">// client performs a range request to get the build id, so it can check whether</span><span class="s3">\n</span><span class="s1">// the target page belongs to the same build.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// The first 64 bytes of the document are requested. The exact number isn't</span><span class="s3">\n</span><span class="s1">// too important; it must be larger than the build id + doctype + closing and</span><span class="s3">\n</span><span class="s1">// ending comment markers, but it doesn't need to match the end of the</span><span class="s3">\n</span><span class="s1">// comment exactly.</span><span class="s3">\n</span><span class="s1">//</span><span class="s3">\n</span><span class="s1">// Build ids are 21 bytes long in the default implementation, though this</span><span class="s3">\n</span><span class="s1">// can be overridden in the Next.js config. For the purposes of this check,</span><span class="s3">\n</span><span class="s1">// it's OK to only match the start of the id, so we'll truncate it if exceeds</span><span class="s3">\n</span><span class="s1">// a certain length.</span><span class="s3">\n\n</span><span class="s1">const DOCTYPE_PREFIX = '&lt;!DOCTYPE html&gt;' // 15 bytes</span><span class="s3">\n</span><span class="s1">const MAX_BUILD_ID_LENGTH = 24</span><span class="s3">\n\n</span><span class="s1">// Request the first 64 bytes. The Range header is inclusive of the end value.</span><span class="s3">\n</span><span class="s1">export const DOC_PREFETCH_RANGE_HEADER_VALUE = 'bytes=0-63'</span><span class="s3">\n\n</span><span class="s1">function escapeBuildId(buildId: string) {</span><span class="s3">\n  </span><span class="s1">// If the build id is longer than the given limit, it's OK for our purposes</span><span class="s3">\n  </span><span class="s1">// to only match the beginning.</span><span class="s3">\n  </span><span class="s1">const truncated = buildId.slice(0, MAX_BUILD_ID_LENGTH)</span><span class="s3">\n  </span><span class="s1">// Replace hyphens with underscores so it doesn't break the HTML comment.</span><span class="s3">\n  </span><span class="s1">// (Unlikely, but if this did happen it would break the whole document.)</span><span class="s3">\n  </span><span class="s1">return truncated.replace(/-/g, '_')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function insertBuildIdComment(originalHtml: string, buildId: string) {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">// Skip if the build id contains a closing comment marker.</span><span class="s3">\n    </span><span class="s1">buildId.includes('--&gt;') ||</span><span class="s3">\n    </span><span class="s1">// React always inserts a doctype at the start of the document. Skip if it</span><span class="s3">\n    </span><span class="s1">// isn't present. Shouldn't happen; suggests an issue elsewhere.</span><span class="s3">\n    </span><span class="s1">!originalHtml.startsWith(DOCTYPE_PREFIX)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// Return the original HTML unchanged. This means the document will not</span><span class="s3">\n    </span><span class="s1">// be prefetched.</span><span class="s3">\n    </span><span class="s1">// TODO: The build id comment is currently only used during prefetches, but</span><span class="s3">\n    </span><span class="s1">// if we eventually use this mechanism for regular navigations, we may need</span><span class="s3">\n    </span><span class="s1">// to error during build if we fail to insert it for some reason.</span><span class="s3">\n    </span><span class="s1">return originalHtml</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// The comment must be inserted after the doctype.</span><span class="s3">\n  </span><span class="s1">return originalHtml.replace(</span><span class="s3">\n    </span><span class="s1">DOCTYPE_PREFIX,</span><span class="s3">\n    </span><span class="s1">DOCTYPE_PREFIX + '&lt;!--' + escapeBuildId(buildId) + '--&gt;'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function doesExportedHtmlMatchBuildId(</span><span class="s3">\n  </span><span class="s1">partialHtmlDocument: string,</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// Check whether the document starts with the expected buildId.</span><span class="s3">\n  </span><span class="s1">return partialHtmlDocument.startsWith(</span><span class="s3">\n    </span><span class="s1">DOCTYPE_PREFIX + '&lt;!--' + escapeBuildId(buildId) + '--&gt;'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DOCTYPE_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;MAX_BUILD_ID_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;DOC_PREFETCH_RANGE_HEADER_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeBuildId&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;truncated&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;insertBuildIdComment&quot;</span><span class="s0">,</span><span class="s1">&quot;originalHtml&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;doesExportedHtmlMatchBuildId&quot;</span><span class="s0">,</span><span class="s1">&quot;partialHtmlDocument&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,yEAAyE;AACzE,2EAA2E;AAC3E,+EAA+E;AAC/E,6CAA6C;AAC7C,EAAE;AACF,2EAA2E;AAC3E,6EAA6E;AAC7E,sEAAsE;AACtE,mBAAmB;AACnB,EAAE;AACF,yEAAyE;AACzE,2EAA2E;AAC3E,6EAA6E;AAC7E,oBAAoB;;;;;;;;;AAEpB,MAAMA,iBAAiB,kBAAkB,WAAW;;AACpD,MAAMC,sBAAsB;AAGrB,MAAMC,kCAAkC,aAAY;AAE3D,SAASC,cAAcC,OAAe;IACpC,2EAA2E;IAC3E,+BAA+B;IAC/B,MAAMC,YAAYD,QAAQE,KAAK,CAAC,GAAGL;IACnC,yEAAyE;IACzE,wEAAwE;IACxE,OAAOI,UAAUE,OAAO,CAAC,MAAM;AACjC;AAEO,SAASC,qBAAqBC,YAAoB,EAAEL,OAAe;IACxE,IAEEA,AADA,QACQM,QAAQ,CAAC,UACjB,+BAF0D,2CAEgB;IAC1E,gEAAgE;IAChE,CAACD,aAAaE,UAAU,CAACX,iBACzB;QACA,uEAAuE;QACvE,iBAAiB;QACjB,2EAA2E;QAC3E,2EAA2E;QAC3E,iEAAiE;QACjE,OAAOS;IACT;IACA,kDAAkD;IAClD,OAAOA,aAAaF,OAAO,CACzBP,gBACAA,iBAAiB,SAASG,cAAcC,WAAW;AAEvD;AAEO,SAASQ,6BACdC,mBAA2B,EAC3BT,OAAe;IAEf,+DAA+D;IAC/D,OAAOS,oBAAoBF,UAAU,CACnCX,iBAAiB,SAASG,cAAcC,WAAW;AAEvD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">15393</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/stream-utils/node-web-streams-helper.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ReactDOMServerReadableStream } from 'react-dom/server'</span><span class="s3">\n</span><span class="s1">import { getTracer } from '../lib/trace/tracer'</span><span class="s3">\n</span><span class="s1">import { AppRenderSpan } from '../lib/trace/constants'</span><span class="s3">\n</span><span class="s1">import { DetachedPromise } from '../../lib/detached-promise'</span><span class="s3">\n</span><span class="s1">import { scheduleImmediate, atLeastOneTask } from '../../lib/scheduler'</span><span class="s3">\n</span><span class="s1">import { ENCODED_TAGS } from './encoded-tags'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">indexOfUint8Array,</span><span class="s3">\n  </span><span class="s1">isEquivalentUint8Arrays,</span><span class="s3">\n  </span><span class="s1">removeFromUint8Array,</span><span class="s3">\n</span><span class="s1">} from './uint8array-helpers'</span><span class="s3">\n</span><span class="s1">import { MISSING_ROOT_TAGS_ERROR } from '../../shared/lib/errors/constants'</span><span class="s3">\n</span><span class="s1">import { insertBuildIdComment } from '../../shared/lib/segment-cache/output-export-prefetch-encoding'</span><span class="s3">\n\n</span><span class="s1">function voidCatch() {</span><span class="s3">\n  </span><span class="s1">// this catcher is designed to be used with pipeTo where we expect the underlying</span><span class="s3">\n  </span><span class="s1">// pipe implementation to forward errors but we don't want the pipeTo promise to reject</span><span class="s3">\n  </span><span class="s1">// and be unhandled</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// We can share the same encoder instance everywhere</span><span class="s3">\n</span><span class="s1">// Notably we cannot do the same for TextDecoder because it is stateful</span><span class="s3">\n</span><span class="s1">// when handling streaming data</span><span class="s3">\n</span><span class="s1">const encoder = new TextEncoder()</span><span class="s3">\n\n</span><span class="s1">export function chainStreams&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">...streams: ReadableStream&lt;T&gt;[]</span><span class="s3">\n</span><span class="s1">): ReadableStream&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">// If we have no streams, return an empty stream. This behavior is</span><span class="s3">\n  </span><span class="s1">// intentional as we're now providing the `RenderResult.EMPTY` value.</span><span class="s3">\n  </span><span class="s1">if (streams.length === 0) {</span><span class="s3">\n    </span><span class="s1">return new ReadableStream&lt;T&gt;({</span><span class="s3">\n      </span><span class="s1">start(controller) {</span><span class="s3">\n        </span><span class="s1">controller.close()</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If we only have 1 stream we fast path it by returning just this stream</span><span class="s3">\n  </span><span class="s1">if (streams.length === 1) {</span><span class="s3">\n    </span><span class="s1">return streams[0]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { readable, writable } = new TransformStream()</span><span class="s3">\n\n  </span><span class="s1">// We always initiate pipeTo immediately. We know we have at least 2 streams</span><span class="s3">\n  </span><span class="s1">// so we need to avoid closing the writable when this one finishes.</span><span class="s3">\n  </span><span class="s1">let promise = streams[0].pipeTo(writable, { preventClose: true })</span><span class="s3">\n\n  </span><span class="s1">let i = 1</span><span class="s3">\n  </span><span class="s1">for (; i &lt; streams.length - 1; i++) {</span><span class="s3">\n    </span><span class="s1">const nextStream = streams[i]</span><span class="s3">\n    </span><span class="s1">promise = promise.then(() =&gt;</span><span class="s3">\n      </span><span class="s1">nextStream.pipeTo(writable, { preventClose: true })</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We can omit the length check because we halted before the last stream and there</span><span class="s3">\n  </span><span class="s1">// is at least two streams so the lastStream here will always be defined</span><span class="s3">\n  </span><span class="s1">const lastStream = streams[i]</span><span class="s3">\n  </span><span class="s1">promise = promise.then(() =&gt; lastStream.pipeTo(writable))</span><span class="s3">\n\n  </span><span class="s1">// Catch any errors from the streams and ignore them, they will be handled</span><span class="s3">\n  </span><span class="s1">// by whatever is consuming the readable stream.</span><span class="s3">\n  </span><span class="s1">promise.catch(voidCatch)</span><span class="s3">\n\n  </span><span class="s1">return readable</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function streamFromString(str: string): ReadableStream&lt;Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">return new ReadableStream({</span><span class="s3">\n    </span><span class="s1">start(controller) {</span><span class="s3">\n      </span><span class="s1">controller.enqueue(encoder.encode(str))</span><span class="s3">\n      </span><span class="s1">controller.close()</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function streamFromBuffer(chunk: Buffer): ReadableStream&lt;Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">return new ReadableStream({</span><span class="s3">\n    </span><span class="s1">start(controller) {</span><span class="s3">\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n      </span><span class="s1">controller.close()</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function streamToBuffer(</span><span class="s3">\n  </span><span class="s1">stream: ReadableStream&lt;Uint8Array&gt;</span><span class="s3">\n</span><span class="s1">): Promise&lt;Buffer&gt; {</span><span class="s3">\n  </span><span class="s1">const reader = stream.getReader()</span><span class="s3">\n  </span><span class="s1">const chunks: Uint8Array[] = []</span><span class="s3">\n\n  </span><span class="s1">while (true) {</span><span class="s3">\n    </span><span class="s1">const { done, value } = await reader.read()</span><span class="s3">\n    </span><span class="s1">if (done) {</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">chunks.push(value)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return Buffer.concat(chunks)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function streamToString(</span><span class="s3">\n  </span><span class="s1">stream: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">signal?: AbortSignal</span><span class="s3">\n</span><span class="s1">): Promise&lt;string&gt; {</span><span class="s3">\n  </span><span class="s1">const decoder = new TextDecoder('utf-8', { fatal: true })</span><span class="s3">\n  </span><span class="s1">let string = ''</span><span class="s3">\n\n  </span><span class="s1">for await (const chunk of stream) {</span><span class="s3">\n    </span><span class="s1">if (signal?.aborted) {</span><span class="s3">\n      </span><span class="s1">return string</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">string += decoder.decode(chunk, { stream: true })</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">string += decoder.decode()</span><span class="s3">\n\n  </span><span class="s1">return string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createBufferedTransformStream(): TransformStream&lt;</span><span class="s3">\n  </span><span class="s1">Uint8Array,</span><span class="s3">\n  </span><span class="s1">Uint8Array</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">let bufferedChunks: Array&lt;Uint8Array&gt; = []</span><span class="s3">\n  </span><span class="s1">let bufferByteLength: number = 0</span><span class="s3">\n  </span><span class="s1">let pending: DetachedPromise&lt;void&gt; | undefined</span><span class="s3">\n\n  </span><span class="s1">const flush = (controller: TransformStreamDefaultController) =&gt; {</span><span class="s3">\n    </span><span class="s1">// If we already have a pending flush, then return early.</span><span class="s3">\n    </span><span class="s1">if (pending) return</span><span class="s3">\n\n    </span><span class="s1">const detached = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n    </span><span class="s1">pending = detached</span><span class="s3">\n\n    </span><span class="s1">scheduleImmediate(() =&gt; {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const chunk = new Uint8Array(bufferByteLength)</span><span class="s3">\n        </span><span class="s1">let copiedBytes = 0</span><span class="s3">\n\n        </span><span class="s1">for (let i = 0; i &lt; bufferedChunks.length; i++) {</span><span class="s3">\n          </span><span class="s1">const bufferedChunk = bufferedChunks[i]</span><span class="s3">\n          </span><span class="s1">chunk.set(bufferedChunk, copiedBytes)</span><span class="s3">\n          </span><span class="s1">copiedBytes += bufferedChunk.byteLength</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">// We just wrote all the buffered chunks so we need to reset the bufferedChunks array</span><span class="s3">\n        </span><span class="s1">// and our bufferByteLength to prepare for the next round of buffered chunks</span><span class="s3">\n        </span><span class="s1">bufferedChunks.length = 0</span><span class="s3">\n        </span><span class="s1">bufferByteLength = 0</span><span class="s3">\n        </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n      </span><span class="s1">} catch {</span><span class="s3">\n        </span><span class="s1">// If an error occurs while enqueuing it can't be due to this</span><span class="s3">\n        </span><span class="s1">// transformers fault. It's likely due to the controller being</span><span class="s3">\n        </span><span class="s1">// errored due to the stream being cancelled.</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">pending = undefined</span><span class="s3">\n        </span><span class="s1">detached.resolve()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">// Combine the previous buffer with the new chunk.</span><span class="s3">\n      </span><span class="s1">bufferedChunks.push(chunk)</span><span class="s3">\n      </span><span class="s1">bufferByteLength += chunk.byteLength</span><span class="s3">\n\n      </span><span class="s1">// Flush the buffer to the controller.</span><span class="s3">\n      </span><span class="s1">flush(controller)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">flush() {</span><span class="s3">\n      </span><span class="s1">if (!pending) return</span><span class="s3">\n\n      </span><span class="s1">return pending.promise</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createPrefetchCommentStream(</span><span class="s3">\n  </span><span class="s1">isBuildTimePrerendering: boolean,</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n</span><span class="s1">): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">// Insert an extra comment at the beginning of the HTML document. This must</span><span class="s3">\n  </span><span class="s1">// come after the DOCTYPE, which is inserted by React.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// The first chunk sent by React will contain the doctype. After that, we can</span><span class="s3">\n  </span><span class="s1">// pass through the rest of the chunks as-is.</span><span class="s3">\n  </span><span class="s1">let didTransformFirstChunk = false</span><span class="s3">\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">if (isBuildTimePrerendering &amp;&amp; !didTransformFirstChunk) {</span><span class="s3">\n        </span><span class="s1">didTransformFirstChunk = true</span><span class="s3">\n        </span><span class="s1">const decoder = new TextDecoder('utf-8', { fatal: true })</span><span class="s3">\n        </span><span class="s1">const chunkStr = decoder.decode(chunk, {</span><span class="s3">\n          </span><span class="s1">stream: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">const updatedChunkStr = insertBuildIdComment(chunkStr, buildId)</span><span class="s3">\n        </span><span class="s1">controller.enqueue(encoder.encode(updatedChunkStr))</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function renderToInitialFizzStream({</span><span class="s3">\n  </span><span class="s1">ReactDOMServer,</span><span class="s3">\n  </span><span class="s1">element,</span><span class="s3">\n  </span><span class="s1">streamOptions,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">ReactDOMServer: {</span><span class="s3">\n    </span><span class="s1">renderToReadableStream: typeof import('react-dom/server').renderToReadableStream</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">element: React.ReactElement</span><span class="s3">\n  </span><span class="s1">streamOptions?: Parameters&lt;typeof ReactDOMServer.renderToReadableStream&gt;[1]</span><span class="s3">\n</span><span class="s1">}): Promise&lt;ReactDOMServerReadableStream&gt; {</span><span class="s3">\n  </span><span class="s1">return getTracer().trace(AppRenderSpan.renderToReadableStream, async () =&gt;</span><span class="s3">\n    </span><span class="s1">ReactDOMServer.renderToReadableStream(element, streamOptions)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createMetadataTransformStream(</span><span class="s3">\n  </span><span class="s1">insert: () =&gt; Promise&lt;string&gt; | string</span><span class="s3">\n</span><span class="s1">): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let chunkIndex = -1</span><span class="s3">\n  </span><span class="s1">let isMarkRemoved = false</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">async transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">let iconMarkIndex = -1</span><span class="s3">\n      </span><span class="s1">let closedHeadIndex = -1</span><span class="s3">\n      </span><span class="s1">chunkIndex++</span><span class="s3">\n\n      </span><span class="s1">if (isMarkRemoved) {</span><span class="s3">\n        </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">let iconMarkLength = 0</span><span class="s3">\n      </span><span class="s1">// Only search for the closed head tag once</span><span class="s3">\n      </span><span class="s1">if (iconMarkIndex === -1) {</span><span class="s3">\n        </span><span class="s1">iconMarkIndex = indexOfUint8Array(chunk, ENCODED_TAGS.META.ICON_MARK)</span><span class="s3">\n        </span><span class="s1">if (iconMarkIndex === -1) {</span><span class="s3">\n          </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// When we found the `&lt;meta name=</span><span class="s3">\&quot;</span><span class="s1">nxt-icon</span><span class="s3">\&quot;</span><span class="s1">` tag prefix, we will remove it from the chunk.</span><span class="s3">\n          </span><span class="s1">// Its close tag could either be `/&gt;` or `&gt;`, checking the next char to ensure we cover both cases.</span><span class="s3">\n          </span><span class="s1">iconMarkLength = ENCODED_TAGS.META.ICON_MARK.length</span><span class="s3">\n          </span><span class="s1">// Check if next char is /, this is for xml mode.</span><span class="s3">\n          </span><span class="s1">if (chunk[iconMarkIndex + iconMarkLength] === 47) {</span><span class="s3">\n            </span><span class="s1">iconMarkLength += 2</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">// The last char is `&gt;`</span><span class="s3">\n            </span><span class="s1">iconMarkLength++</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Check if icon mark is inside &lt;head&gt; tag in the first chunk.</span><span class="s3">\n      </span><span class="s1">if (chunkIndex === 0) {</span><span class="s3">\n        </span><span class="s1">closedHeadIndex = indexOfUint8Array(chunk, ENCODED_TAGS.CLOSED.HEAD)</span><span class="s3">\n        </span><span class="s1">if (iconMarkIndex !== -1) {</span><span class="s3">\n          </span><span class="s1">// The mark icon is located in the 1st chunk before the head tag.</span><span class="s3">\n          </span><span class="s1">// We do not need to insert the script tag in this case because it's in the head.</span><span class="s3">\n          </span><span class="s1">// Just remove the icon mark from the chunk.</span><span class="s3">\n          </span><span class="s1">if (iconMarkIndex &lt; closedHeadIndex) {</span><span class="s3">\n            </span><span class="s1">const replaced = new Uint8Array(chunk.length - iconMarkLength)</span><span class="s3">\n\n            </span><span class="s1">// Remove the icon mark from the chunk.</span><span class="s3">\n            </span><span class="s1">replaced.set(chunk.subarray(0, iconMarkIndex))</span><span class="s3">\n            </span><span class="s1">replaced.set(</span><span class="s3">\n              </span><span class="s1">chunk.subarray(iconMarkIndex + iconMarkLength),</span><span class="s3">\n              </span><span class="s1">iconMarkIndex</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">chunk = replaced</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">// The icon mark is after the head tag, replace and insert the script tag at that position.</span><span class="s3">\n            </span><span class="s1">const insertion = await insert()</span><span class="s3">\n            </span><span class="s1">const encodedInsertion = encoder.encode(insertion)</span><span class="s3">\n            </span><span class="s1">const insertionLength = encodedInsertion.length</span><span class="s3">\n            </span><span class="s1">const replaced = new Uint8Array(</span><span class="s3">\n              </span><span class="s1">chunk.length - iconMarkLength + insertionLength</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">replaced.set(chunk.subarray(0, iconMarkIndex))</span><span class="s3">\n            </span><span class="s1">replaced.set(encodedInsertion, iconMarkIndex)</span><span class="s3">\n            </span><span class="s1">replaced.set(</span><span class="s3">\n              </span><span class="s1">chunk.subarray(iconMarkIndex + iconMarkLength),</span><span class="s3">\n              </span><span class="s1">iconMarkIndex + insertionLength</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">chunk = replaced</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">isMarkRemoved = true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">// If there's no icon mark located, it will be handled later when if present in the following chunks.</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// When it's appeared in the following chunks, we'll need to</span><span class="s3">\n        </span><span class="s1">// remove the mark and then insert the script tag at that position.</span><span class="s3">\n        </span><span class="s1">const insertion = await insert()</span><span class="s3">\n        </span><span class="s1">const encodedInsertion = encoder.encode(insertion)</span><span class="s3">\n        </span><span class="s1">const insertionLength = encodedInsertion.length</span><span class="s3">\n        </span><span class="s1">// Replace the icon mark with the hoist script or empty string.</span><span class="s3">\n        </span><span class="s1">const replaced = new Uint8Array(</span><span class="s3">\n          </span><span class="s1">chunk.length - iconMarkLength + insertionLength</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">// Set the first part of the chunk, before the icon mark.</span><span class="s3">\n        </span><span class="s1">replaced.set(chunk.subarray(0, iconMarkIndex))</span><span class="s3">\n        </span><span class="s1">// Set the insertion after the icon mark.</span><span class="s3">\n        </span><span class="s1">replaced.set(encodedInsertion, iconMarkIndex)</span><span class="s3">\n\n        </span><span class="s1">// Set the rest of the chunk after the icon mark.</span><span class="s3">\n        </span><span class="s1">replaced.set(</span><span class="s3">\n          </span><span class="s1">chunk.subarray(iconMarkIndex + iconMarkLength),</span><span class="s3">\n          </span><span class="s1">iconMarkIndex + insertionLength</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">chunk = replaced</span><span class="s3">\n        </span><span class="s1">isMarkRemoved = true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createHeadInsertionTransformStream(</span><span class="s3">\n  </span><span class="s1">insert: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n</span><span class="s1">): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let inserted = false</span><span class="s3">\n\n  </span><span class="s1">// We need to track if this transform saw any bytes because if it didn't</span><span class="s3">\n  </span><span class="s1">// we won't want to insert any server HTML at all</span><span class="s3">\n  </span><span class="s1">let hasBytes = false</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">async transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">hasBytes = true</span><span class="s3">\n\n      </span><span class="s1">const insertion = await insert()</span><span class="s3">\n      </span><span class="s1">if (inserted) {</span><span class="s3">\n        </span><span class="s1">if (insertion) {</span><span class="s3">\n          </span><span class="s1">const encodedInsertion = encoder.encode(insertion)</span><span class="s3">\n          </span><span class="s1">controller.enqueue(encodedInsertion)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// TODO (@Ethan-Arrowood): Replace the generic `indexOfUint8Array` method with something finely tuned for the subset of things actually being checked for.</span><span class="s3">\n        </span><span class="s1">const index = indexOfUint8Array(chunk, ENCODED_TAGS.CLOSED.HEAD)</span><span class="s3">\n        </span><span class="s1">// In fully static rendering or non PPR rendering cases:</span><span class="s3">\n        </span><span class="s1">// `/head&gt;` will always be found in the chunk in first chunk rendering.</span><span class="s3">\n        </span><span class="s1">if (index !== -1) {</span><span class="s3">\n          </span><span class="s1">if (insertion) {</span><span class="s3">\n            </span><span class="s1">const encodedInsertion = encoder.encode(insertion)</span><span class="s3">\n            </span><span class="s1">// Get the total count of the bytes in the chunk and the insertion</span><span class="s3">\n            </span><span class="s1">// e.g.</span><span class="s3">\n            </span><span class="s1">// chunk = &lt;head&gt;&lt;meta charset=</span><span class="s3">\&quot;</span><span class="s1">utf-8</span><span class="s3">\&quot;</span><span class="s1">&gt;&lt;/head&gt;</span><span class="s3">\n            </span><span class="s1">// insertion = &lt;script&gt;...&lt;/script&gt;</span><span class="s3">\n            </span><span class="s1">// output = &lt;head&gt;&lt;meta charset=</span><span class="s3">\&quot;</span><span class="s1">utf-8</span><span class="s3">\&quot;</span><span class="s1">&gt; [ &lt;script&gt;...&lt;/script&gt; ] &lt;/head&gt;</span><span class="s3">\n            </span><span class="s1">const insertedHeadContent = new Uint8Array(</span><span class="s3">\n              </span><span class="s1">chunk.length + encodedInsertion.length</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">// Append the first part of the chunk, before the head tag</span><span class="s3">\n            </span><span class="s1">insertedHeadContent.set(chunk.slice(0, index))</span><span class="s3">\n            </span><span class="s1">// Append the server inserted content</span><span class="s3">\n            </span><span class="s1">insertedHeadContent.set(encodedInsertion, index)</span><span class="s3">\n            </span><span class="s1">// Append the rest of the chunk</span><span class="s3">\n            </span><span class="s1">insertedHeadContent.set(</span><span class="s3">\n              </span><span class="s1">chunk.slice(index),</span><span class="s3">\n              </span><span class="s1">index + encodedInsertion.length</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">controller.enqueue(insertedHeadContent)</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">inserted = true</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// This will happens in PPR rendering during next start, when the page is partially rendered.</span><span class="s3">\n          </span><span class="s1">// When the page resumes, the head tag will be found in the middle of the chunk.</span><span class="s3">\n          </span><span class="s1">// Where we just need to append the insertion and chunk to the current stream.</span><span class="s3">\n          </span><span class="s1">// e.g.</span><span class="s3">\n          </span><span class="s1">// PPR-static: &lt;head&gt;...&lt;/head&gt;&lt;body&gt; [ resume content ] &lt;/body&gt;</span><span class="s3">\n          </span><span class="s1">// PPR-resume: [ insertion ] [ rest content ]</span><span class="s3">\n          </span><span class="s1">if (insertion) {</span><span class="s3">\n            </span><span class="s1">controller.enqueue(encoder.encode(insertion))</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n          </span><span class="s1">inserted = true</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async flush(controller) {</span><span class="s3">\n      </span><span class="s1">// Check before closing if there's anything remaining to insert.</span><span class="s3">\n      </span><span class="s1">if (hasBytes) {</span><span class="s3">\n        </span><span class="s1">const insertion = await insert()</span><span class="s3">\n        </span><span class="s1">if (insertion) {</span><span class="s3">\n          </span><span class="s1">controller.enqueue(encoder.encode(insertion))</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Suffix after main body content - scripts before &lt;/body&gt;,</span><span class="s3">\n</span><span class="s1">// but wait for the major chunks to be enqueued.</span><span class="s3">\n</span><span class="s1">function createDeferredSuffixStream(</span><span class="s3">\n  </span><span class="s1">suffix: string</span><span class="s3">\n</span><span class="s1">): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let flushed = false</span><span class="s3">\n  </span><span class="s1">let pending: DetachedPromise&lt;void&gt; | undefined</span><span class="s3">\n\n  </span><span class="s1">const flush = (controller: TransformStreamDefaultController) =&gt; {</span><span class="s3">\n    </span><span class="s1">const detached = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n    </span><span class="s1">pending = detached</span><span class="s3">\n\n    </span><span class="s1">scheduleImmediate(() =&gt; {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">controller.enqueue(encoder.encode(suffix))</span><span class="s3">\n      </span><span class="s1">} catch {</span><span class="s3">\n        </span><span class="s1">// If an error occurs while enqueuing it can't be due to this</span><span class="s3">\n        </span><span class="s1">// transformers fault. It's likely due to the controller being</span><span class="s3">\n        </span><span class="s1">// errored due to the stream being cancelled.</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">pending = undefined</span><span class="s3">\n        </span><span class="s1">detached.resolve()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n\n      </span><span class="s1">// If we've already flushed, we're done.</span><span class="s3">\n      </span><span class="s1">if (flushed) return</span><span class="s3">\n\n      </span><span class="s1">// Schedule the flush to happen.</span><span class="s3">\n      </span><span class="s1">flushed = true</span><span class="s3">\n      </span><span class="s1">flush(controller)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">flush(controller) {</span><span class="s3">\n      </span><span class="s1">if (pending) return pending.promise</span><span class="s3">\n      </span><span class="s1">if (flushed) return</span><span class="s3">\n\n      </span><span class="s1">// Flush now.</span><span class="s3">\n      </span><span class="s1">controller.enqueue(encoder.encode(suffix))</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createFlightDataInjectionTransformStream(</span><span class="s3">\n  </span><span class="s1">stream: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">delayDataUntilFirstHtmlChunk: boolean</span><span class="s3">\n</span><span class="s1">): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let htmlStreamFinished = false</span><span class="s3">\n\n  </span><span class="s1">let pull: Promise&lt;void&gt; | null = null</span><span class="s3">\n  </span><span class="s1">let donePulling = false</span><span class="s3">\n\n  </span><span class="s1">function startOrContinuePulling(</span><span class="s3">\n    </span><span class="s1">controller: TransformStreamDefaultController</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (!pull) {</span><span class="s3">\n      </span><span class="s1">pull = startPulling(controller)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return pull</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function startPulling(controller: TransformStreamDefaultController) {</span><span class="s3">\n    </span><span class="s1">const reader = stream.getReader()</span><span class="s3">\n\n    </span><span class="s1">if (delayDataUntilFirstHtmlChunk) {</span><span class="s3">\n      </span><span class="s1">// NOTE: streaming flush</span><span class="s3">\n      </span><span class="s1">// We are buffering here for the inlined data stream because the</span><span class="s3">\n      </span><span class="s1">// </span><span class="s3">\&quot;</span><span class="s1">shell</span><span class="s3">\&quot; </span><span class="s1">stream might be chunkenized again by the underlying stream</span><span class="s3">\n      </span><span class="s1">// implementation, e.g. with a specific high-water mark. To ensure it's</span><span class="s3">\n      </span><span class="s1">// the safe timing to pipe the data stream, this extra tick is</span><span class="s3">\n      </span><span class="s1">// necessary.</span><span class="s3">\n\n      </span><span class="s1">// We don't start reading until we've left the current Task to ensure</span><span class="s3">\n      </span><span class="s1">// that it's inserted after flushing the shell. Note that this implementation</span><span class="s3">\n      </span><span class="s1">// might get stale if impl details of Fizz change in the future.</span><span class="s3">\n      </span><span class="s1">await atLeastOneTask()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">while (true) {</span><span class="s3">\n        </span><span class="s1">const { done, value } = await reader.read()</span><span class="s3">\n        </span><span class="s1">if (done) {</span><span class="s3">\n          </span><span class="s1">donePulling = true</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// We want to prioritize HTML over RSC data.</span><span class="s3">\n        </span><span class="s1">// The SSR render is based on the same RSC stream, so when we get a new RSC chunk,</span><span class="s3">\n        </span><span class="s1">// we're likely to produce an HTML chunk as well, so give it a chance to flush first.</span><span class="s3">\n        </span><span class="s1">if (!delayDataUntilFirstHtmlChunk &amp;&amp; !htmlStreamFinished) {</span><span class="s3">\n          </span><span class="s1">await atLeastOneTask()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">controller.enqueue(value)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (err) {</span><span class="s3">\n      </span><span class="s1">controller.error(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">start(controller) {</span><span class="s3">\n      </span><span class="s1">if (!delayDataUntilFirstHtmlChunk) {</span><span class="s3">\n        </span><span class="s1">startOrContinuePulling(controller)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n\n      </span><span class="s1">// Start the streaming if it hasn't already been started yet.</span><span class="s3">\n      </span><span class="s1">if (delayDataUntilFirstHtmlChunk) {</span><span class="s3">\n        </span><span class="s1">startOrContinuePulling(controller)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">flush(controller) {</span><span class="s3">\n      </span><span class="s1">htmlStreamFinished = true</span><span class="s3">\n      </span><span class="s1">if (donePulling) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return startOrContinuePulling(controller)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const CLOSE_TAG = '&lt;/body&gt;&lt;/html&gt;'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This transform stream moves the suffix to the end of the stream, so results</span><span class="s3">\n </span><span class="s1">* like `&lt;/body&gt;&lt;/html&gt;&lt;script&gt;...&lt;/script&gt;` will be transformed to</span><span class="s3">\n </span><span class="s1">* `&lt;script&gt;...&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function createMoveSuffixStream(): TransformStream&lt;Uint8Array, Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let foundSuffix = false</span><span class="s3">\n\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">if (foundSuffix) {</span><span class="s3">\n        </span><span class="s1">return controller.enqueue(chunk)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const index = indexOfUint8Array(chunk, ENCODED_TAGS.CLOSED.BODY_AND_HTML)</span><span class="s3">\n      </span><span class="s1">if (index &gt; -1) {</span><span class="s3">\n        </span><span class="s1">foundSuffix = true</span><span class="s3">\n\n        </span><span class="s1">// If the whole chunk is the suffix, then don't write anything, it will</span><span class="s3">\n        </span><span class="s1">// be written in the flush.</span><span class="s3">\n        </span><span class="s1">if (chunk.length === ENCODED_TAGS.CLOSED.BODY_AND_HTML.length) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// Write out the part before the suffix.</span><span class="s3">\n        </span><span class="s1">const before = chunk.slice(0, index)</span><span class="s3">\n        </span><span class="s1">controller.enqueue(before)</span><span class="s3">\n\n        </span><span class="s1">// In the case where the suffix is in the middle of the chunk, we need</span><span class="s3">\n        </span><span class="s1">// to split the chunk into two parts.</span><span class="s3">\n        </span><span class="s1">if (chunk.length &gt; ENCODED_TAGS.CLOSED.BODY_AND_HTML.length + index) {</span><span class="s3">\n          </span><span class="s1">// Write out the part after the suffix.</span><span class="s3">\n          </span><span class="s1">const after = chunk.slice(</span><span class="s3">\n            </span><span class="s1">index + ENCODED_TAGS.CLOSED.BODY_AND_HTML.length</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">controller.enqueue(after)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">flush(controller) {</span><span class="s3">\n      </span><span class="s1">// Even if we didn't find the suffix, the HTML is not valid if we don't</span><span class="s3">\n      </span><span class="s1">// add it, so insert it at the end.</span><span class="s3">\n      </span><span class="s1">controller.enqueue(ENCODED_TAGS.CLOSED.BODY_AND_HTML)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createStripDocumentClosingTagsTransform(): TransformStream&lt;</span><span class="s3">\n  </span><span class="s1">Uint8Array,</span><span class="s3">\n  </span><span class="s1">Uint8Array</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">// We rely on the assumption that chunks will never break across a code unit.</span><span class="s3">\n      </span><span class="s1">// This is reasonable because we currently concat all of React's output from a single</span><span class="s3">\n      </span><span class="s1">// flush into one chunk before streaming it forward which means the chunk will represent</span><span class="s3">\n      </span><span class="s1">// a single coherent utf-8 string. This is not safe to use if we change our streaming to no</span><span class="s3">\n      </span><span class="s1">// longer do this large buffered chunk</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">isEquivalentUint8Arrays(chunk, ENCODED_TAGS.CLOSED.BODY_AND_HTML) ||</span><span class="s3">\n        </span><span class="s1">isEquivalentUint8Arrays(chunk, ENCODED_TAGS.CLOSED.BODY) ||</span><span class="s3">\n        </span><span class="s1">isEquivalentUint8Arrays(chunk, ENCODED_TAGS.CLOSED.HTML)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">// the entire chunk is the closing tags; return without enqueueing anything.</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// We assume these tags will go at together at the end of the document and that</span><span class="s3">\n      </span><span class="s1">// they won't appear anywhere else in the document. This is not really a safe assumption</span><span class="s3">\n      </span><span class="s1">// but until we revamp our streaming infra this is a performant way to string the tags</span><span class="s3">\n      </span><span class="s1">chunk = removeFromUint8Array(chunk, ENCODED_TAGS.CLOSED.BODY)</span><span class="s3">\n      </span><span class="s1">chunk = removeFromUint8Array(chunk, ENCODED_TAGS.CLOSED.HTML)</span><span class="s3">\n\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n </span><span class="s1">* Checks if the root layout is missing the html or body tags</span><span class="s3">\n </span><span class="s1">* and if so, it will inject a script tag to throw an error in the browser, showing the user</span><span class="s3">\n </span><span class="s1">* the error message in the error overlay.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createRootLayoutValidatorStream(): TransformStream&lt;</span><span class="s3">\n  </span><span class="s1">Uint8Array,</span><span class="s3">\n  </span><span class="s1">Uint8Array</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">let foundHtml = false</span><span class="s3">\n  </span><span class="s1">let foundBody = false</span><span class="s3">\n  </span><span class="s1">return new TransformStream({</span><span class="s3">\n    </span><span class="s1">async transform(chunk, controller) {</span><span class="s3">\n      </span><span class="s1">// Peek into the streamed chunk to see if the tags are present.</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">!foundHtml &amp;&amp;</span><span class="s3">\n        </span><span class="s1">indexOfUint8Array(chunk, ENCODED_TAGS.OPENING.HTML) &gt; -1</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">foundHtml = true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">!foundBody &amp;&amp;</span><span class="s3">\n        </span><span class="s1">indexOfUint8Array(chunk, ENCODED_TAGS.OPENING.BODY) &gt; -1</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">foundBody = true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">controller.enqueue(chunk)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">flush(controller) {</span><span class="s3">\n      </span><span class="s1">const missingTags: ('html' | 'body')[] = []</span><span class="s3">\n      </span><span class="s1">if (!foundHtml) missingTags.push('html')</span><span class="s3">\n      </span><span class="s1">if (!foundBody) missingTags.push('body')</span><span class="s3">\n\n      </span><span class="s1">if (!missingTags.length) return</span><span class="s3">\n\n      </span><span class="s1">controller.enqueue(</span><span class="s3">\n        </span><span class="s1">encoder.encode(</span><span class="s3">\n          </span><span class="s1">`&lt;html id=</span><span class="s3">\&quot;</span><span class="s1">__next_error__</span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\n            </span><span class="s1">&lt;template</span><span class="s3">\n              </span><span class="s1">data-next-error-message=</span><span class="s3">\&quot;</span><span class="s1">Missing ${missingTags</span><span class="s3">\n                </span><span class="s1">.map((c) =&gt; `&lt;${c}&gt;`)</span><span class="s3">\n                </span><span class="s1">.join(</span><span class="s3">\n                  </span><span class="s1">missingTags.length &gt; 1 ? ' and ' : ''</span><span class="s3">\n                </span><span class="s1">)} tags in the root layout.</span><span class="s3">\\</span><span class="s1">nRead more at https://nextjs.org/docs/messages/missing-root-layout-tags</span><span class="s3">\&quot;\n              </span><span class="s1">data-next-error-digest=</span><span class="s3">\&quot;</span><span class="s1">${MISSING_ROOT_TAGS_ERROR}</span><span class="s3">\&quot;\n              </span><span class="s1">data-next-error-stack=</span><span class="s3">\&quot;\&quot;\n            </span><span class="s1">&gt;&lt;/template&gt;</span><span class="s3">\n          </span><span class="s1">`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function chainTransformers&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">readable: ReadableStream&lt;T&gt;,</span><span class="s3">\n  </span><span class="s1">transformers: ReadonlyArray&lt;TransformStream&lt;T, T&gt; | null&gt;</span><span class="s3">\n</span><span class="s1">): ReadableStream&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">let stream = readable</span><span class="s3">\n  </span><span class="s1">for (const transformer of transformers) {</span><span class="s3">\n    </span><span class="s1">if (!transformer) continue</span><span class="s3">\n\n    </span><span class="s1">stream = stream.pipeThrough(transformer)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return stream</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type ContinueStreamOptions = {</span><span class="s3">\n  </span><span class="s1">inlinedDataStream: ReadableStream&lt;Uint8Array&gt; | undefined</span><span class="s3">\n  </span><span class="s1">isStaticGeneration: boolean</span><span class="s3">\n  </span><span class="s1">isBuildTimePrerendering: boolean</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n  </span><span class="s1">getServerInsertedHTML: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedMetadata: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">validateRootLayout?: boolean</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Suffix to inject after the buffered data, but before the close tags.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">suffix?: string | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function continueFizzStream(</span><span class="s3">\n  </span><span class="s1">renderStream: ReactDOMServerReadableStream,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">suffix,</span><span class="s3">\n    </span><span class="s1">inlinedDataStream,</span><span class="s3">\n    </span><span class="s1">isStaticGeneration,</span><span class="s3">\n    </span><span class="s1">isBuildTimePrerendering,</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">getServerInsertedHTML,</span><span class="s3">\n    </span><span class="s1">getServerInsertedMetadata,</span><span class="s3">\n    </span><span class="s1">validateRootLayout,</span><span class="s3">\n  </span><span class="s1">}: ContinueStreamOptions</span><span class="s3">\n</span><span class="s1">): Promise&lt;ReadableStream&lt;Uint8Array&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">// Suffix itself might contain close tags at the end, so we need to split it.</span><span class="s3">\n  </span><span class="s1">const suffixUnclosed = suffix ? suffix.split(CLOSE_TAG, 1)[0] : null</span><span class="s3">\n\n  </span><span class="s1">// If we're generating static HTML we need to wait for it to resolve before continuing.</span><span class="s3">\n  </span><span class="s1">if (isStaticGeneration) {</span><span class="s3">\n    </span><span class="s1">await renderStream.allReady</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return chainTransformers(renderStream, [</span><span class="s3">\n    </span><span class="s1">// Buffer everything to avoid flushing too frequently</span><span class="s3">\n    </span><span class="s1">createBufferedTransformStream(),</span><span class="s3">\n\n    </span><span class="s1">// Add build id comment to start of the HTML document (in export mode)</span><span class="s3">\n    </span><span class="s1">createPrefetchCommentStream(isBuildTimePrerendering, buildId),</span><span class="s3">\n\n    </span><span class="s1">// Transform metadata</span><span class="s3">\n    </span><span class="s1">createMetadataTransformStream(getServerInsertedMetadata),</span><span class="s3">\n\n    </span><span class="s1">// Insert suffix content</span><span class="s3">\n    </span><span class="s1">suffixUnclosed != null &amp;&amp; suffixUnclosed.length &gt; 0</span><span class="s3">\n      </span><span class="s1">? createDeferredSuffixStream(suffixUnclosed)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n\n    </span><span class="s1">// Insert the inlined data (Flight data, form state, etc.) stream into the HTML</span><span class="s3">\n    </span><span class="s1">inlinedDataStream</span><span class="s3">\n      </span><span class="s1">? createFlightDataInjectionTransformStream(inlinedDataStream, true)</span><span class="s3">\n      </span><span class="s1">: null,</span><span class="s3">\n\n    </span><span class="s1">// Validate the root layout for missing html or body tags</span><span class="s3">\n    </span><span class="s1">validateRootLayout ? createRootLayoutValidatorStream() : null,</span><span class="s3">\n\n    </span><span class="s1">// Close tags should always be deferred to the end</span><span class="s3">\n    </span><span class="s1">createMoveSuffixStream(),</span><span class="s3">\n\n    </span><span class="s1">// Special head insertions</span><span class="s3">\n    </span><span class="s1">// TODO-APP: Insert server side html to end of head in app layout rendering, to avoid</span><span class="s3">\n    </span><span class="s1">// hydration errors. Remove this once it's ready to be handled by react itself.</span><span class="s3">\n    </span><span class="s1">createHeadInsertionTransformStream(getServerInsertedHTML),</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ContinueDynamicPrerenderOptions = {</span><span class="s3">\n  </span><span class="s1">getServerInsertedHTML: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedMetadata: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function continueDynamicPrerender(</span><span class="s3">\n  </span><span class="s1">prerenderStream: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">getServerInsertedHTML,</span><span class="s3">\n    </span><span class="s1">getServerInsertedMetadata,</span><span class="s3">\n  </span><span class="s1">}: ContinueDynamicPrerenderOptions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">prerenderStream</span><span class="s3">\n      </span><span class="s1">// Buffer everything to avoid flushing too frequently</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createBufferedTransformStream())</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createStripDocumentClosingTagsTransform())</span><span class="s3">\n      </span><span class="s1">// Insert generated tags to head</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createHeadInsertionTransformStream(getServerInsertedHTML))</span><span class="s3">\n      </span><span class="s1">// Transform metadata</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createMetadataTransformStream(getServerInsertedMetadata))</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ContinueStaticPrerenderOptions = {</span><span class="s3">\n  </span><span class="s1">inlinedDataStream: ReadableStream&lt;Uint8Array&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedHTML: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedMetadata: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">isBuildTimePrerendering: boolean</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function continueStaticPrerender(</span><span class="s3">\n  </span><span class="s1">prerenderStream: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">inlinedDataStream,</span><span class="s3">\n    </span><span class="s1">getServerInsertedHTML,</span><span class="s3">\n    </span><span class="s1">getServerInsertedMetadata,</span><span class="s3">\n    </span><span class="s1">isBuildTimePrerendering,</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n  </span><span class="s1">}: ContinueStaticPrerenderOptions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">prerenderStream</span><span class="s3">\n      </span><span class="s1">// Buffer everything to avoid flushing too frequently</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createBufferedTransformStream())</span><span class="s3">\n      </span><span class="s1">// Add build id comment to start of the HTML document (in export mode)</span><span class="s3">\n      </span><span class="s1">.pipeThrough(</span><span class="s3">\n        </span><span class="s1">createPrefetchCommentStream(isBuildTimePrerendering, buildId)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">// Insert generated tags to head</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createHeadInsertionTransformStream(getServerInsertedHTML))</span><span class="s3">\n      </span><span class="s1">// Transform metadata</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createMetadataTransformStream(getServerInsertedMetadata))</span><span class="s3">\n      </span><span class="s1">// Insert the inlined data (Flight data, form state, etc.) stream into the HTML</span><span class="s3">\n      </span><span class="s1">.pipeThrough(</span><span class="s3">\n        </span><span class="s1">createFlightDataInjectionTransformStream(inlinedDataStream, true)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">// Close tags should always be deferred to the end</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createMoveSuffixStream())</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type ContinueResumeOptions = {</span><span class="s3">\n  </span><span class="s1">inlinedDataStream: ReadableStream&lt;Uint8Array&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedHTML: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">getServerInsertedMetadata: () =&gt; Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">delayDataUntilFirstHtmlChunk: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function continueDynamicHTMLResume(</span><span class="s3">\n  </span><span class="s1">renderStream: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">delayDataUntilFirstHtmlChunk,</span><span class="s3">\n    </span><span class="s1">inlinedDataStream,</span><span class="s3">\n    </span><span class="s1">getServerInsertedHTML,</span><span class="s3">\n    </span><span class="s1">getServerInsertedMetadata,</span><span class="s3">\n  </span><span class="s1">}: ContinueResumeOptions</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">renderStream</span><span class="s3">\n      </span><span class="s1">// Buffer everything to avoid flushing too frequently</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createBufferedTransformStream())</span><span class="s3">\n      </span><span class="s1">// Insert generated tags to head</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createHeadInsertionTransformStream(getServerInsertedHTML))</span><span class="s3">\n      </span><span class="s1">// Transform metadata</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createMetadataTransformStream(getServerInsertedMetadata))</span><span class="s3">\n      </span><span class="s1">// Insert the inlined data (Flight data, form state, etc.) stream into the HTML</span><span class="s3">\n      </span><span class="s1">.pipeThrough(</span><span class="s3">\n        </span><span class="s1">createFlightDataInjectionTransformStream(</span><span class="s3">\n          </span><span class="s1">inlinedDataStream,</span><span class="s3">\n          </span><span class="s1">delayDataUntilFirstHtmlChunk</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">// Close tags should always be deferred to the end</span><span class="s3">\n      </span><span class="s1">.pipeThrough(createMoveSuffixStream())</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createDocumentClosingStream(): ReadableStream&lt;Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">return streamFromString(CLOSE_TAG)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;AppRenderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;scheduleImmediate&quot;</span><span class="s0">,</span><span class="s1">&quot;atLeastOneTask&quot;</span><span class="s0">,</span><span class="s1">&quot;ENCODED_TAGS&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOfUint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isEquivalentUint8Arrays&quot;</span><span class="s0">,</span><span class="s1">&quot;removeFromUint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;MISSING_ROOT_TAGS_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;insertBuildIdComment&quot;</span><span class="s0">,</span><span class="s1">&quot;voidCatch&quot;</span><span class="s0">,</span><span class="s1">&quot;encoder&quot;</span><span class="s0">,</span><span class="s1">&quot;TextEncoder&quot;</span><span class="s0">,</span><span class="s1">&quot;chainStreams&quot;</span><span class="s0">,</span><span class="s1">&quot;streams&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;ReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;readable&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;TransformStream&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeTo&quot;</span><span class="s0">,</span><span class="s1">&quot;preventClose&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;nextStream&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;lastStream&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;streamFromString&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;enqueue&quot;</span><span class="s0">,</span><span class="s1">&quot;encode&quot;</span><span class="s0">,</span><span class="s1">&quot;streamFromBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;streamToBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;stream&quot;</span><span class="s0">,</span><span class="s1">&quot;reader&quot;</span><span class="s0">,</span><span class="s1">&quot;getReader&quot;</span><span class="s0">,</span><span class="s1">&quot;chunks&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;read&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;streamToString&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;decoder&quot;</span><span class="s0">,</span><span class="s1">&quot;TextDecoder&quot;</span><span class="s0">,</span><span class="s1">&quot;fatal&quot;</span><span class="s0">,</span><span class="s1">&quot;string&quot;</span><span class="s0">,</span><span class="s1">&quot;aborted&quot;</span><span class="s0">,</span><span class="s1">&quot;decode&quot;</span><span class="s0">,</span><span class="s1">&quot;createBufferedTransformStream&quot;</span><span class="s0">,</span><span class="s1">&quot;bufferedChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;bufferByteLength&quot;</span><span class="s0">,</span><span class="s1">&quot;pending&quot;</span><span class="s0">,</span><span class="s1">&quot;flush&quot;</span><span class="s0">,</span><span class="s1">&quot;detached&quot;</span><span class="s0">,</span><span class="s1">&quot;Uint8Array&quot;</span><span class="s0">,</span><span class="s1">&quot;copiedBytes&quot;</span><span class="s0">,</span><span class="s1">&quot;bufferedChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;byteLength&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;transform&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrefetchCommentStream&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuildTimePrerendering&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;didTransformFirstChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkStr&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedChunkStr&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToInitialFizzStream&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactDOMServer&quot;</span><span class="s0">,</span><span class="s1">&quot;element&quot;</span><span class="s0">,</span><span class="s1">&quot;streamOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;createMetadataTransformStream&quot;</span><span class="s0">,</span><span class="s1">&quot;insert&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;isMarkRemoved&quot;</span><span class="s0">,</span><span class="s1">&quot;iconMarkIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;closedHeadIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;iconMarkLength&quot;</span><span class="s0">,</span><span class="s1">&quot;META&quot;</span><span class="s0">,</span><span class="s1">&quot;ICON_MARK&quot;</span><span class="s0">,</span><span class="s1">&quot;CLOSED&quot;</span><span class="s0">,</span><span class="s1">&quot;HEAD&quot;</span><span class="s0">,</span><span class="s1">&quot;replaced&quot;</span><span class="s0">,</span><span class="s1">&quot;subarray&quot;</span><span class="s0">,</span><span class="s1">&quot;insertion&quot;</span><span class="s0">,</span><span class="s1">&quot;encodedInsertion&quot;</span><span class="s0">,</span><span class="s1">&quot;insertionLength&quot;</span><span class="s0">,</span><span class="s1">&quot;createHeadInsertionTransformStream&quot;</span><span class="s0">,</span><span class="s1">&quot;inserted&quot;</span><span class="s0">,</span><span class="s1">&quot;hasBytes&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;insertedHeadContent&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;createDeferredSuffixStream&quot;</span><span class="s0">,</span><span class="s1">&quot;suffix&quot;</span><span class="s0">,</span><span class="s1">&quot;flushed&quot;</span><span class="s0">,</span><span class="s1">&quot;createFlightDataInjectionTransformStream&quot;</span><span class="s0">,</span><span class="s1">&quot;delayDataUntilFirstHtmlChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;htmlStreamFinished&quot;</span><span class="s0">,</span><span class="s1">&quot;pull&quot;</span><span class="s0">,</span><span class="s1">&quot;donePulling&quot;</span><span class="s0">,</span><span class="s1">&quot;startOrContinuePulling&quot;</span><span class="s0">,</span><span class="s1">&quot;startPulling&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;CLOSE_TAG&quot;</span><span class="s0">,</span><span class="s1">&quot;createMoveSuffixStream&quot;</span><span class="s0">,</span><span class="s1">&quot;foundSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;BODY_AND_HTML&quot;</span><span class="s0">,</span><span class="s1">&quot;before&quot;</span><span class="s0">,</span><span class="s1">&quot;after&quot;</span><span class="s0">,</span><span class="s1">&quot;createStripDocumentClosingTagsTransform&quot;</span><span class="s0">,</span><span class="s1">&quot;BODY&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML&quot;</span><span class="s0">,</span><span class="s1">&quot;createRootLayoutValidatorStream&quot;</span><span class="s0">,</span><span class="s1">&quot;foundHtml&quot;</span><span class="s0">,</span><span class="s1">&quot;foundBody&quot;</span><span class="s0">,</span><span class="s1">&quot;OPENING&quot;</span><span class="s0">,</span><span class="s1">&quot;missingTags&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;c&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;chainTransformers&quot;</span><span class="s0">,</span><span class="s1">&quot;transformers&quot;</span><span class="s0">,</span><span class="s1">&quot;transformer&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeThrough&quot;</span><span class="s0">,</span><span class="s1">&quot;continueFizzStream&quot;</span><span class="s0">,</span><span class="s1">&quot;renderStream&quot;</span><span class="s0">,</span><span class="s1">&quot;inlinedDataStream&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerInsertedHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerInsertedMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;validateRootLayout&quot;</span><span class="s0">,</span><span class="s1">&quot;suffixUnclosed&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;allReady&quot;</span><span class="s0">,</span><span class="s1">&quot;continueDynamicPrerender&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderStream&quot;</span><span class="s0">,</span><span class="s1">&quot;continueStaticPrerender&quot;</span><span class="s0">,</span><span class="s1">&quot;continueDynamicHTMLResume&quot;</span><span class="s0">,</span><span class="s1">&quot;createDocumentClosingStream&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16007</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/segment-cache/segment-value-encoding.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { PAGE_SEGMENT_KEY } from '../segment'</span><span class="s3">\n</span><span class="s1">import type { Segment as FlightRouterStateSegment } from '../../../server/app-render/types'</span><span class="s3">\n\n</span><span class="s1">// TypeScript trick to simulate opaque types, like in Flow.</span><span class="s3">\n</span><span class="s1">type Opaque&lt;K, T&gt; = T &amp; { __brand: K }</span><span class="s3">\n\n</span><span class="s1">export type SegmentRequestKeyPart = Opaque&lt;'SegmentRequestKeyPart', string&gt;</span><span class="s3">\n</span><span class="s1">export type SegmentRequestKey = Opaque&lt;'SegmentRequestKey', string&gt;</span><span class="s3">\n</span><span class="s1">export type SegmentCacheKeyPart = Opaque&lt;'SegmentCacheKeyPart', string&gt;</span><span class="s3">\n</span><span class="s1">export type SegmentCacheKey = Opaque&lt;'SegmentCacheKey', string&gt;</span><span class="s3">\n\n</span><span class="s1">export const ROOT_SEGMENT_REQUEST_KEY = '' as SegmentRequestKey</span><span class="s3">\n</span><span class="s1">export const ROOT_SEGMENT_CACHE_KEY = '' as SegmentCacheKey</span><span class="s3">\n\n</span><span class="s1">export function createSegmentRequestKeyPart(</span><span class="s3">\n  </span><span class="s1">segment: FlightRouterStateSegment</span><span class="s3">\n</span><span class="s1">): SegmentRequestKeyPart {</span><span class="s3">\n  </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n    </span><span class="s1">if (segment.startsWith(PAGE_SEGMENT_KEY)) {</span><span class="s3">\n      </span><span class="s1">// The Flight Router State type sometimes includes the search params in</span><span class="s3">\n      </span><span class="s1">// the page segment. However, the Segment Cache tracks this as a separate</span><span class="s3">\n      </span><span class="s1">// key. So, we strip the search params here, and then add them back when</span><span class="s3">\n      </span><span class="s1">// the cache entry is turned back into a FlightRouterState. This is an</span><span class="s3">\n      </span><span class="s1">// unfortunate consequence of the FlightRouteState being used both as a</span><span class="s3">\n      </span><span class="s1">// transport type and as a cache key; we'll address this once more of the</span><span class="s3">\n      </span><span class="s1">// Segment Cache implementation has settled.</span><span class="s3">\n      </span><span class="s1">// TODO: We should hoist the search params out of the FlightRouterState</span><span class="s3">\n      </span><span class="s1">// type entirely, This is our plan for dynamic route params, too.</span><span class="s3">\n      </span><span class="s1">return PAGE_SEGMENT_KEY as SegmentRequestKeyPart</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const safeName =</span><span class="s3">\n      </span><span class="s1">// TODO: FlightRouterState encodes Not Found routes as </span><span class="s3">\&quot;</span><span class="s1">/_not-found</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n      </span><span class="s1">// But params typically don't include the leading slash. We should use</span><span class="s3">\n      </span><span class="s1">// a different encoding to avoid this special case.</span><span class="s3">\n      </span><span class="s1">segment === '/_not-found'</span><span class="s3">\n        </span><span class="s1">? '_not-found'</span><span class="s3">\n        </span><span class="s1">: encodeToFilesystemAndURLSafeString(segment)</span><span class="s3">\n    </span><span class="s1">// Since this is not a dynamic segment, it's fully encoded. It does not</span><span class="s3">\n    </span><span class="s1">// need to be </span><span class="s3">\&quot;</span><span class="s1">hydrated</span><span class="s3">\&quot; </span><span class="s1">with a param value.</span><span class="s3">\n    </span><span class="s1">return safeName as SegmentRequestKeyPart</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const name = segment[0]</span><span class="s3">\n  </span><span class="s1">const paramType = segment[2]</span><span class="s3">\n  </span><span class="s1">const safeName = encodeToFilesystemAndURLSafeString(name)</span><span class="s3">\n\n  </span><span class="s1">const encodedName = '$' + paramType + '$' + safeName</span><span class="s3">\n  </span><span class="s1">return encodedName as SegmentRequestKeyPart</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function appendSegmentRequestKeyPart(</span><span class="s3">\n  </span><span class="s1">parentRequestKey: SegmentRequestKey,</span><span class="s3">\n  </span><span class="s1">parallelRouteKey: string,</span><span class="s3">\n  </span><span class="s1">childRequestKeyPart: SegmentRequestKeyPart</span><span class="s3">\n</span><span class="s1">): SegmentRequestKey {</span><span class="s3">\n  </span><span class="s1">// Aside from being filesystem safe, segment keys are also designed so that</span><span class="s3">\n  </span><span class="s1">// each segment and parallel route creates its own subdirectory. Roughly in</span><span class="s3">\n  </span><span class="s1">// the same shape as the source app directory. This is mostly just for easier</span><span class="s3">\n  </span><span class="s1">// debugging (you can open up the build folder and navigate the output); if</span><span class="s3">\n  </span><span class="s1">// we wanted to do we could just use a flat structure.</span><span class="s3">\n\n  </span><span class="s1">// Omit the parallel route key for children, since this is the most</span><span class="s3">\n  </span><span class="s1">// common case. Saves some bytes (and it's what the app directory does).</span><span class="s3">\n  </span><span class="s1">const slotKey =</span><span class="s3">\n    </span><span class="s1">parallelRouteKey === 'children'</span><span class="s3">\n      </span><span class="s1">? childRequestKeyPart</span><span class="s3">\n      </span><span class="s1">: `@${encodeToFilesystemAndURLSafeString(parallelRouteKey)}/${childRequestKeyPart}`</span><span class="s3">\n  </span><span class="s1">return (parentRequestKey + '/' + slotKey) as SegmentRequestKey</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createSegmentCacheKeyPart(</span><span class="s3">\n  </span><span class="s1">requestKeyPart: SegmentRequestKeyPart,</span><span class="s3">\n  </span><span class="s1">segment: FlightRouterStateSegment</span><span class="s3">\n</span><span class="s1">): SegmentCacheKeyPart {</span><span class="s3">\n  </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n    </span><span class="s1">return requestKeyPart as any as SegmentCacheKeyPart</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const paramValue = segment[1]</span><span class="s3">\n  </span><span class="s1">const safeValue = encodeToFilesystemAndURLSafeString(paramValue)</span><span class="s3">\n  </span><span class="s1">return (requestKeyPart + '$' + safeValue) as SegmentCacheKeyPart</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function appendSegmentCacheKeyPart(</span><span class="s3">\n  </span><span class="s1">parentSegmentKey: SegmentCacheKey,</span><span class="s3">\n  </span><span class="s1">parallelRouteKey: string,</span><span class="s3">\n  </span><span class="s1">childCacheKeyPart: SegmentCacheKeyPart</span><span class="s3">\n</span><span class="s1">): SegmentCacheKey {</span><span class="s3">\n  </span><span class="s1">const slotKey =</span><span class="s3">\n    </span><span class="s1">parallelRouteKey === 'children'</span><span class="s3">\n      </span><span class="s1">? childCacheKeyPart</span><span class="s3">\n      </span><span class="s1">: `@${encodeToFilesystemAndURLSafeString(parallelRouteKey)}/${childCacheKeyPart}`</span><span class="s3">\n  </span><span class="s1">return (parentSegmentKey + '/' + slotKey) as SegmentCacheKey</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Define a regex pattern to match the most common characters found in a route</span><span class="s3">\n</span><span class="s1">// param. It excludes anything that might not be cross-platform filesystem</span><span class="s3">\n</span><span class="s1">// compatible, like |. It does not need to be precise because the fallback is to</span><span class="s3">\n</span><span class="s1">// just base64url-encode the whole parameter, which is fine; we just don't do it</span><span class="s3">\n</span><span class="s1">// by default for compactness, and for easier debugging.</span><span class="s3">\n</span><span class="s1">const simpleParamValueRegex = /^[a-zA-Z0-9</span><span class="s3">\\</span><span class="s1">-_@]+$/</span><span class="s3">\n\n</span><span class="s1">function encodeToFilesystemAndURLSafeString(value: string) {</span><span class="s3">\n  </span><span class="s1">if (simpleParamValueRegex.test(value)) {</span><span class="s3">\n    </span><span class="s1">return value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// If there are any unsafe characters, base64url-encode the entire value.</span><span class="s3">\n  </span><span class="s1">// We also add a ! prefix so it doesn't collide with the simple case.</span><span class="s3">\n  </span><span class="s1">const base64url = btoa(value)</span><span class="s3">\n    </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">+/g, '-') // Replace '+' with '-'</span><span class="s3">\n    </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">//g, '_') // Replace '/' with '_'</span><span class="s3">\n    </span><span class="s1">.replace(/=+$/, '') // Remove trailing '='</span><span class="s3">\n  </span><span class="s1">return '!' + base64url</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function convertSegmentPathToStaticExportFilename(</span><span class="s3">\n  </span><span class="s1">segmentPath: string</span><span class="s3">\n</span><span class="s1">): string {</span><span class="s3">\n  </span><span class="s1">return `__next${segmentPath.replace(/</span><span class="s3">\\</span><span class="s1">//g, '.')}.txt`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PAGE_SEGMENT_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_SEGMENT_REQUEST_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_SEGMENT_CACHE_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;createSegmentRequestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;safeName&quot;</span><span class="s0">,</span><span class="s1">&quot;encodeToFilesystemAndURLSafeString&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;paramType&quot;</span><span class="s0">,</span><span class="s1">&quot;encodedName&quot;</span><span class="s0">,</span><span class="s1">&quot;appendSegmentRequestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;parentRequestKey&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRouteKey&quot;</span><span class="s0">,</span><span class="s1">&quot;childRequestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;slotKey&quot;</span><span class="s0">,</span><span class="s1">&quot;createSegmentCacheKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;requestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;paramValue&quot;</span><span class="s0">,</span><span class="s1">&quot;safeValue&quot;</span><span class="s0">,</span><span class="s1">&quot;appendSegmentCacheKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;parentSegmentKey&quot;</span><span class="s0">,</span><span class="s1">&quot;childCacheKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;simpleParamValueRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;base64url&quot;</span><span class="s0">,</span><span class="s1">&quot;btoa&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;convertSegmentPathToStaticExportFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPath&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;AAAA,SAASA,gBAAgB,QAAQ,aAAY;;AAWtC,MAAMC,2BAA2B,GAAuB;AACxD,MAAMC,yBAAyB,GAAqB;AAEpD,SAASC,4BACdC,OAAiC;IAEjC,IAAI,OAAOA,YAAY,UAAU;QAC/B,IAAIA,QAAQC,UAAU,CAACL,mLAAAA,GAAmB;YACxC,uEAAuE;YACvE,yEAAyE;YACzE,wEAAwE;YACxE,sEAAsE;YACtE,uEAAuE;YACvE,yEAAyE;YACzE,4CAA4C;YAC5C,uEAAuE;YACvE,iEAAiE;YACjE,OAAOA,mLAAAA;QACT;QACA,MAAMM,WACJ,AACA,qEADqE,CACC;QACtE,mDAAmD;QACnDF,YAAY,gBACR,eACAG,mCAAmCH;QACzC,uEAAuE;QACvE,4CAA4C;QAC5C,OAAOE;IACT;IAEA,MAAME,OAAOJ,OAAO,CAAC,EAAE;IACvB,MAAMK,YAAYL,OAAO,CAAC,EAAE;IAC5B,MAAME,WAAWC,mCAAmCC;IAEpD,MAAME,cAAc,MAAMD,YAAY,MAAMH;IAC5C,OAAOI;AACT;AAEO,SAASC,4BACdC,gBAAmC,EACnCC,gBAAwB,EACxBC,mBAA0C;IAE1C,2EAA2E;IAC3E,2EAA2E;IAC3E,6EAA6E;IAC7E,2EAA2E;IAC3E,sDAAsD;IAEtD,mEAAmE;IACnE,wEAAwE;IACxE,MAAMC,UACJF,qBAAqB,aACjBC,sBACC,MAAGP,mCAAmCM,oBAAkB,MAAGC;IAClE,OAAQF,mBAAmB,MAAMG;AACnC;AAEO,SAASC,0BACdC,cAAqC,EACrCb,OAAiC;IAEjC,IAAI,OAAOA,YAAY,UAAU;QAC/B,OAAOa;IACT;IACA,MAAMC,aAAad,OAAO,CAAC,EAAE;IAC7B,MAAMe,YAAYZ,mCAAmCW;IACrD,OAAQD,iBAAiB,MAAME;AACjC;AAEO,SAASC,0BACdC,gBAAiC,EACjCR,gBAAwB,EACxBS,iBAAsC;IAEtC,MAAMP,UACJF,qBAAqB,aACjBS,oBACC,MAAGf,mCAAmCM,oBAAkB,MAAGS;IAClE,OAAQD,mBAAmB,MAAMN;AACnC;AAEA,8EAA8E;AAC9E,0EAA0E;AAC1E,gFAAgF;AAChF,gFAAgF;AAChF,wDAAwD;AACxD,MAAMQ,wBAAwB;AAE9B,SAAShB,mCAAmCiB,KAAa;IACvD,IAAID,sBAAsBE,IAAI,CAACD,QAAQ;QACrC,OAAOA;IACT;IACA,yEAAyE;IACzE,qEAAqE;IACrE,MAAME,YAAYC,KAAKH,OACpBI,OAAO,CAAC,OAAO,KAAK,uBAAuB;KAC3CA,OAAO,CAAC,OAAO,KAAK,uBAAuB;KAC3CA,OAAO,CAAC,OAAO,IAAI,sBAAsB;;IAC5C,OAAO,MAAMF;AACf;AAEO,SAASG,yCACdC,WAAmB;IAEnB,OAAQ,WAAQA,YAAYF,OAAO,CAAC,OAAO,OAAK;AAClD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16101</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/string-hash/index.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;(()=&gt;{</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;var e={328:e=&gt;{function hash(e){var r=5381,_=e.length;while(_){r=r*33^e.charCodeAt(--_)}return r&gt;&gt;&gt;0}e.exports=hash}};var r={};function __nccwpck_require__(_){var a=r[_];if(a!==undefined){return a.exports}var t=r[_]={exports:{}};var i=true;try{e[_](t,t.exports,__nccwpck_require__);i=false}finally{if(i)delete r[_]}return t.exports}if(typeof __nccwpck_require__!==</span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">)__nccwpck_require__.ab=__dirname+</span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;var _=__nccwpck_require__(328);module.exports=_})();&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,CAAC;IAAK;IAAa,IAAI,IAAE;QAAC,KAAI,CAAA;YAAI,SAAS,KAAK,CAAC;gBAAE,IAAI,IAAE,MAAK,IAAE,EAAE,MAAM;gBAAC,MAAM,EAAE;oBAAC,IAAE,IAAE,KAAG,EAAE,UAAU,CAAC,EAAE;gBAAE;gBAAC,OAAO,MAAI;YAAC;YAAC,EAAE,OAAO,GAAC;QAAI;IAAC;IAAE,IAAI,IAAE,CAAC;IAAE,SAAS,oBAAoB,CAAC;QAAE,IAAI,IAAE,CAAC,CAAC,EAAE;QAAC,IAAG,MAAI,WAAU;YAAC,OAAO,EAAE,OAAO;QAAA;QAAC,IAAI,IAAE,CAAC,CAAC,EAAE,GAAC;YAAC,SAAQ,CAAC;QAAC;QAAE,IAAI,IAAE;QAAK,IAAG;YAAC,CAAC,CAAC,EAAE,CAAC,GAAE,EAAE,OAAO,EAAC;YAAqB,IAAE;QAAK,SAAQ;YAAC,IAAG,GAAE,OAAO,CAAC,CAAC,EAAE;QAAA;QAAC,OAAO,EAAE,OAAO;IAAA;IAAC,IAAG,OAAO,wBAAsB,aAAY,oBAAoB,EAAE,GAAC,wFAAU;IAAI,IAAI,IAAE,oBAAoB;IAAK,OAAO,OAAO,GAAC;AAAC,CAAC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16141</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/format-server-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const invalidServerComponentReactHooks = [</span><span class="s3">\n  </span><span class="s1">'useDeferredValue',</span><span class="s3">\n  </span><span class="s1">'useEffect',</span><span class="s3">\n  </span><span class="s1">'useImperativeHandle',</span><span class="s3">\n  </span><span class="s1">'useInsertionEffect',</span><span class="s3">\n  </span><span class="s1">'useLayoutEffect',</span><span class="s3">\n  </span><span class="s1">'useReducer',</span><span class="s3">\n  </span><span class="s1">'useRef',</span><span class="s3">\n  </span><span class="s1">'useState',</span><span class="s3">\n  </span><span class="s1">'useSyncExternalStore',</span><span class="s3">\n  </span><span class="s1">'useTransition',</span><span class="s3">\n  </span><span class="s1">'experimental_useOptimistic',</span><span class="s3">\n  </span><span class="s1">'useOptimistic',</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">function setMessage(error: Error, message: string): void {</span><span class="s3">\n  </span><span class="s1">error.message = message</span><span class="s3">\n  </span><span class="s1">if (error.stack) {</span><span class="s3">\n    </span><span class="s1">const lines = error.stack.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n    </span><span class="s1">lines[0] = message</span><span class="s3">\n    </span><span class="s1">error.stack = lines.join('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Input:</span><span class="s3">\n </span><span class="s1">* Error: Something went wrong</span><span class="s3">\n    </span><span class="s1">at funcName (/path/to/file.js:10:5)</span><span class="s3">\n    </span><span class="s1">at anotherFunc (/path/to/file.js:15:10)</span><span class="s3">\n \n </span><span class="s1">* Output:</span><span class="s3">\n    </span><span class="s1">at funcName (/path/to/file.js:10:5)</span><span class="s3">\n    </span><span class="s1">at anotherFunc (/path/to/file.js:15:10) </span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getStackWithoutErrorMessage(error: Error): string {</span><span class="s3">\n  </span><span class="s1">const stack = error.stack</span><span class="s3">\n  </span><span class="s1">if (!stack) return ''</span><span class="s3">\n  </span><span class="s1">return stack.replace(/^[^</span><span class="s3">\\</span><span class="s1">n]*</span><span class="s3">\\</span><span class="s1">n/, '')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function formatServerError(error: Error): void {</span><span class="s3">\n  </span><span class="s1">if (typeof error?.message !== 'string') return</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">error.message.includes(</span><span class="s3">\n      </span><span class="s1">'Class extends value undefined is not a constructor or null'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const addedMessage =</span><span class="s3">\n      </span><span class="s1">'This might be caused by a React Class Component being rendered in a Server Component, React Class Components only works in Client Components. Read more: https://nextjs.org/docs/messages/class-component-in-server-component'</span><span class="s3">\n\n    </span><span class="s1">// If this error instance already has the message, don't add it again</span><span class="s3">\n    </span><span class="s1">if (error.message.includes(addedMessage)) return</span><span class="s3">\n\n    </span><span class="s1">setMessage(</span><span class="s3">\n      </span><span class="s1">error,</span><span class="s3">\n      </span><span class="s1">`${error.message}</span><span class="s3">\n\n</span><span class="s1">${addedMessage}`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (error.message.includes('createContext is not a function')) {</span><span class="s3">\n    </span><span class="s1">setMessage(</span><span class="s3">\n      </span><span class="s1">error,</span><span class="s3">\n      </span><span class="s1">'createContext only works in Client Components. Add the </span><span class="s3">\&quot;</span><span class="s1">use client</span><span class="s3">\&quot; </span><span class="s1">directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/context-in-server-component'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const clientHook of invalidServerComponentReactHooks) {</span><span class="s3">\n    </span><span class="s1">const regex = new RegExp(`</span><span class="s3">\\\\</span><span class="s1">b${clientHook}</span><span class="s3">\\\\</span><span class="s1">b.*is not a function`)</span><span class="s3">\n    </span><span class="s1">if (regex.test(error.message)) {</span><span class="s3">\n      </span><span class="s1">setMessage(</span><span class="s3">\n        </span><span class="s1">error,</span><span class="s3">\n        </span><span class="s1">`${clientHook} only works in Client Components. Add the </span><span class="s3">\&quot;</span><span class="s1">use client</span><span class="s3">\&quot; </span><span class="s1">directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/react-client-hook-in-server-component`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;invalidServerComponentReactHooks&quot;</span><span class="s0">,</span><span class="s1">&quot;setMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;lines&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;getStackWithoutErrorMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;formatServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;addedMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;clientHook&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,MAAMA,mCAAmC;IACvC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,SAASC,WAAWC,KAAY,EAAEC,OAAe;IAC/CD,MAAMC,OAAO,GAAGA;IAChB,IAAID,MAAME,KAAK,EAAE;QACf,MAAMC,QAAQH,MAAME,KAAK,CAACE,KAAK,CAAC;QAChCD,KAAK,CAAC,EAAE,GAAGF;QACXD,MAAME,KAAK,GAAGC,MAAME,IAAI,CAAC;IAC3B;AACF;AAYO,SAASC,4BAA4BN,KAAY;IACtD,MAAME,QAAQF,MAAME,KAAK;IACzB,IAAI,CAACA,OAAO,OAAO;IACnB,OAAOA,MAAMK,OAAO,CAAC,aAAa;AACpC;AAEO,SAASC,kBAAkBR,KAAY;IAC5C,IAAI,OAAA,CAAOA,SAAAA,OAAAA,KAAAA,IAAAA,MAAOC,OAAO,MAAK,UAAU;IAExC,IACED,MAAMC,OAAO,CAACQ,QAAQ,CACpB,+DAEF;QACA,MAAMC,eACJ;QAEF,qEAAqE;QACrE,IAAIV,MAAMC,OAAO,CAACQ,QAAQ,CAACC,eAAe;QAE1CX,WACEC,OACA,GAAGA,MAAMC,OAAO,CAAC;;AAEvB,EAAES,cAAc;QAEZ;IACF;IAEA,IAAIV,MAAMC,OAAO,CAACQ,QAAQ,CAAC,oCAAoC;QAC7DV,WACEC,OACA;QAEF;IACF;IAEA,KAAK,MAAMW,cAAcb,iCAAkC;QACzD,MAAMc,QAAQ,IAAIC,OAAO,CAAC,GAAG,EAAEF,WAAW,sBAAsB,CAAC;QACjE,IAAIC,MAAME,IAAI,CAACd,MAAMC,OAAO,GAAG;YAC7BF,WACEC,OACA,GAAGW,WAAW,oLAAoL,CAAC;YAErM;QACF;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16201</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/request-meta.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/* eslint-disable no-redeclare */</span><span class="s3">\n</span><span class="s1">import type { IncomingMessage } from 'http'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { UrlWithParsedQuery } from 'url'</span><span class="s3">\n</span><span class="s1">import type { BaseNextRequest } from './base-http'</span><span class="s3">\n</span><span class="s1">import type { CloneableBody } from './body-streams'</span><span class="s3">\n</span><span class="s1">import type { RouteMatch } from './route-matches/route-match'</span><span class="s3">\n</span><span class="s1">import type { NEXT_RSC_UNION_QUERY } from '../client/components/app-router-headers'</span><span class="s3">\n</span><span class="s1">import type { ServerComponentsHmrCache } from './response-cache'</span><span class="s3">\n</span><span class="s1">import type { PagesDevOverlayBridgeType } from '../next-devtools/userspace/pages/pages-dev-overlay-setup'</span><span class="s3">\n\n</span><span class="s1">// FIXME: (wyattjoh) this is a temporary solution to allow us to pass data between bundled modules</span><span class="s3">\n</span><span class="s1">export const NEXT_REQUEST_META = Symbol.for('NextInternalRequestMeta')</span><span class="s3">\n\n</span><span class="s1">export type NextIncomingMessage = (BaseNextRequest | IncomingMessage) &amp; {</span><span class="s3">\n  </span><span class="s1">[NEXT_REQUEST_META]?: RequestMeta</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface RequestMeta {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The query that was used to make the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">initQuery?: ParsedUrlQuery</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The URL that was used to make the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">initURL?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The protocol that was used to make the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">initProtocol?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The body that was read from the request. This is used to allow the body to</span><span class="s3">\n   </span><span class="s1">* be read multiple times.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">clonableBody?: CloneableBody</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request matched a locale domain that was configured in the</span><span class="s3">\n   </span><span class="s1">* next.config.js file.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isLocaleDomain?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request had locale information stripped from the pathname</span><span class="s3">\n   </span><span class="s1">* part of the URL.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">didStripLocale?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* If the request had it's URL rewritten, this is the URL it was rewritten to.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">rewroteURL?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The cookies that were added by middleware and were added to the response.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">middlewareCookie?: string[]</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The match on the request for a given route.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">match?: RouteMatch</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The incremental cache to use for the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">incrementalCache?: any</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The server components HMR cache, only for dev.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">serverComponentsHmrCache?: ServerComponentsHmrCache</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Equals the segment path that was used for the prefetch RSC request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">segmentPrefetchRSCRequest?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request is for the prefetch flight data.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isPrefetchRSCRequest?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request is for the flight data.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isRSCRequest?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A search param set by the Next.js client when performing RSC requests.</span><span class="s3">\n   </span><span class="s1">* Because some CDNs do not vary their cache entries on our custom headers,</span><span class="s3">\n   </span><span class="s1">* this search param represents a hash of the header values. For any cached</span><span class="s3">\n   </span><span class="s1">* RSC request, we should verify that the hash matches before responding.</span><span class="s3">\n   </span><span class="s1">* Otherwise this can lead to cache poisoning.</span><span class="s3">\n   </span><span class="s1">* TODO: Consider not using custom request headers at all, and instead encode</span><span class="s3">\n   </span><span class="s1">* everything into the search param.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">cacheBustingSearchParam?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request is for the `/_next/data` route using the pages</span><span class="s3">\n   </span><span class="s1">* router.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isNextDataReq?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Postponed state to use for resumption. If present it's assumed that the</span><span class="s3">\n   </span><span class="s1">* request is for a page that has postponed (there are no guarantees that the</span><span class="s3">\n   </span><span class="s1">* page actually has postponed though as it would incur an additional cache</span><span class="s3">\n   </span><span class="s1">* lookup).</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">postponed?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* If provided, this will be called when a response cache entry was generated</span><span class="s3">\n   </span><span class="s1">* or looked up in the cache.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">onCacheEntry?: (</span><span class="s3">\n    </span><span class="s1">cacheEntry: any,</span><span class="s3">\n    </span><span class="s1">requestMeta: any</span><span class="s3">\n  </span><span class="s1">) =&gt; Promise&lt;boolean | void&gt; | boolean | void</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The previous revalidate before rendering 404 page for notFound: true</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">notFoundRevalidate?: number | false</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* In development, the original source page that returned a 404.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">developmentNotFoundSourcePage?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The path we routed to and should be invoked</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">invokePath?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The specific page output we should be matching</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">invokeOutput?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The status we are invoking the request with from routing</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">invokeStatus?: number</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The routing error we are invoking with</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">invokeError?: Error</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The query parsed for the invocation</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">invokeQuery?: Record&lt;string, undefined | string | string[]&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether the request is a middleware invocation</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">middlewareInvoke?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether the request should render the fallback shell or not.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">renderFallbackShell?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether the request is for the custom error page.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">customErrorRender?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether to bubble up the NoFallbackError to the caller when a 404 is</span><span class="s3">\n   </span><span class="s1">* returned.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">bubbleNoFallback?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True when the request had locale information inferred from the default</span><span class="s3">\n   </span><span class="s1">* locale.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">localeInferredFromDefault?: true</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The locale that was inferred or explicitly set for the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The default locale that was inferred or explicitly set for the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The relative project dir the server is running in from project root</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">relativeProjectDir?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The dist directory the server is currently using</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">distDir?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The query after resolving routes</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">query?: ParsedUrlQuery</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The params after resolving routes</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">params?: ParsedUrlQuery</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The AMP validator to use in development</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">ampValidator?: (html: string, pathname: string) =&gt; Promise&lt;void&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* ErrorOverlay component to use in development for pages router</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">PagesErrorDebug?: PagesDevOverlayBridgeType</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Whether server is in minimal mode (this will be replaced with more</span><span class="s3">\n   </span><span class="s1">* specific flags in future)</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">minimalMode?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* DEV only: The fallback params that should be used when validating prerenders during dev</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">devValidatingFallbackParams?: Map&lt;string, string&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Gets the request metadata. If no key is provided, the entire metadata object</span><span class="s3">\n </span><span class="s1">* is returned.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param req the request to get the metadata from</span><span class="s3">\n </span><span class="s1">* @param key the key to get from the metadata (optional)</span><span class="s3">\n </span><span class="s1">* @returns the value for the key or the entire metadata object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getRequestMeta(</span><span class="s3">\n  </span><span class="s1">req: NextIncomingMessage,</span><span class="s3">\n  </span><span class="s1">key?: undefined</span><span class="s3">\n</span><span class="s1">): RequestMeta</span><span class="s3">\n</span><span class="s1">export function getRequestMeta&lt;K extends keyof RequestMeta&gt;(</span><span class="s3">\n  </span><span class="s1">req: NextIncomingMessage,</span><span class="s3">\n  </span><span class="s1">key: K</span><span class="s3">\n</span><span class="s1">): RequestMeta[K]</span><span class="s3">\n</span><span class="s1">export function getRequestMeta&lt;K extends keyof RequestMeta&gt;(</span><span class="s3">\n  </span><span class="s1">req: NextIncomingMessage,</span><span class="s3">\n  </span><span class="s1">key?: K</span><span class="s3">\n</span><span class="s1">): RequestMeta | RequestMeta[K] {</span><span class="s3">\n  </span><span class="s1">const meta = req[NEXT_REQUEST_META] || {}</span><span class="s3">\n  </span><span class="s1">return typeof key === 'string' ? meta[key] : meta</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Sets the request metadata.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param req the request to set the metadata on</span><span class="s3">\n </span><span class="s1">* @param meta the metadata to set</span><span class="s3">\n </span><span class="s1">* @returns the mutated request metadata</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function setRequestMeta(req: NextIncomingMessage, meta: RequestMeta) {</span><span class="s3">\n  </span><span class="s1">req[NEXT_REQUEST_META] = meta</span><span class="s3">\n  </span><span class="s1">return meta</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Adds a value to the request metadata.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param request the request to mutate</span><span class="s3">\n </span><span class="s1">* @param key the key to set</span><span class="s3">\n </span><span class="s1">* @param value the value to set</span><span class="s3">\n </span><span class="s1">* @returns the mutated request metadata</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function addRequestMeta&lt;K extends keyof RequestMeta&gt;(</span><span class="s3">\n  </span><span class="s1">request: NextIncomingMessage,</span><span class="s3">\n  </span><span class="s1">key: K,</span><span class="s3">\n  </span><span class="s1">value: RequestMeta[K]</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const meta = getRequestMeta(request)</span><span class="s3">\n  </span><span class="s1">meta[key] = value</span><span class="s3">\n  </span><span class="s1">return setRequestMeta(request, meta)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Removes a key from the request metadata.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param request the request to mutate</span><span class="s3">\n </span><span class="s1">* @param key the key to remove</span><span class="s3">\n </span><span class="s1">* @returns the mutated request metadata</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function removeRequestMeta&lt;K extends keyof RequestMeta&gt;(</span><span class="s3">\n  </span><span class="s1">request: NextIncomingMessage,</span><span class="s3">\n  </span><span class="s1">key: K</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const meta = getRequestMeta(request)</span><span class="s3">\n  </span><span class="s1">delete meta[key]</span><span class="s3">\n  </span><span class="s1">return setRequestMeta(request, meta)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type NextQueryMetadata = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The `_rsc` query parameter used for cache busting to ensure that the RSC</span><span class="s3">\n   </span><span class="s1">* requests do not get cached by the browser explicitly.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">[NEXT_RSC_UNION_QUERY]?: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type NextParsedUrlQuery = ParsedUrlQuery &amp;</span><span class="s3">\n  </span><span class="s1">NextQueryMetadata &amp; {</span><span class="s3">\n    </span><span class="s1">amp?: '1'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface NextUrlWithParsedQuery extends UrlWithParsedQuery {</span><span class="s3">\n  </span><span class="s1">query: NextParsedUrlQuery</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NEXT_REQUEST_META&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;meta&quot;</span><span class="s0">,</span><span class="s1">&quot;setRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;addRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;removeRequestMeta&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,+BAA+B,GAW/B,kGAAkG;;;;;;;;;;;;;AAC3F,MAAMA,oBAAoBC,OAAOC,GAAG,CAAC,2BAA0B;AAoP/D,SAASC,eACdC,GAAwB,EACxBC,GAAO;IAEP,MAAMC,OAAOF,GAAG,CAACJ,kBAAkB,IAAI,CAAC;IACxC,OAAO,OAAOK,QAAQ,WAAWC,IAAI,CAACD,IAAI,GAAGC;AAC/C;AASO,SAASC,eAAeH,GAAwB,EAAEE,IAAiB;IACxEF,GAAG,CAACJ,kBAAkB,GAAGM;IACzB,OAAOA;AACT;AAUO,SAASE,eACdC,OAA4B,EAC5BJ,GAAM,EACNK,KAAqB;IAErB,MAAMJ,OAAOH,eAAeM;IAC5BH,IAAI,CAACD,IAAI,GAAGK;IACZ,OAAOH,eAAeE,SAASH;AACjC;AASO,SAASK,kBACdF,OAA4B,EAC5BJ,GAAM;IAEN,MAAMC,OAAOH,eAAeM;IAC5B,OAAOH,IAAI,CAACD,IAAI;IAChB,OAAOE,eAAeE,SAASH;AACjC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16237</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/constants.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ServerRuntime } from '../types'</span><span class="s3">\n\n</span><span class="s1">export const TEXT_PLAIN_CONTENT_TYPE_HEADER = 'text/plain'</span><span class="s3">\n</span><span class="s1">export const HTML_CONTENT_TYPE_HEADER = 'text/html; charset=utf-8'</span><span class="s3">\n</span><span class="s1">export const JSON_CONTENT_TYPE_HEADER = 'application/json; charset=utf-8'</span><span class="s3">\n</span><span class="s1">export const NEXT_QUERY_PARAM_PREFIX = 'nxtP'</span><span class="s3">\n</span><span class="s1">export const NEXT_INTERCEPTION_MARKER_PREFIX = 'nxtI'</span><span class="s3">\n\n</span><span class="s1">export const MATCHED_PATH_HEADER = 'x-matched-path'</span><span class="s3">\n</span><span class="s1">export const PRERENDER_REVALIDATE_HEADER = 'x-prerender-revalidate'</span><span class="s3">\n</span><span class="s1">export const PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER =</span><span class="s3">\n  </span><span class="s1">'x-prerender-revalidate-if-generated'</span><span class="s3">\n\n</span><span class="s1">export const RSC_PREFETCH_SUFFIX = '.prefetch.rsc'</span><span class="s3">\n</span><span class="s1">export const RSC_SEGMENTS_DIR_SUFFIX = '.segments'</span><span class="s3">\n</span><span class="s1">export const RSC_SEGMENT_SUFFIX = '.segment.rsc'</span><span class="s3">\n</span><span class="s1">export const RSC_SUFFIX = '.rsc'</span><span class="s3">\n</span><span class="s1">export const ACTION_SUFFIX = '.action'</span><span class="s3">\n</span><span class="s1">export const NEXT_DATA_SUFFIX = '.json'</span><span class="s3">\n</span><span class="s1">export const NEXT_META_SUFFIX = '.meta'</span><span class="s3">\n</span><span class="s1">export const NEXT_BODY_SUFFIX = '.body'</span><span class="s3">\n\n</span><span class="s1">export const NEXT_CACHE_TAGS_HEADER = 'x-next-cache-tags'</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_REVALIDATED_TAGS_HEADER = 'x-next-revalidated-tags'</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER =</span><span class="s3">\n  </span><span class="s1">'x-next-revalidate-tag-token'</span><span class="s3">\n\n</span><span class="s1">export const NEXT_RESUME_HEADER = 'next-resume'</span><span class="s3">\n\n</span><span class="s1">// if these change make sure we update the related</span><span class="s3">\n</span><span class="s1">// documentation as well</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_TAG_MAX_ITEMS = 128</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_TAG_MAX_LENGTH = 256</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_SOFT_TAG_MAX_LENGTH = 1024</span><span class="s3">\n</span><span class="s1">export const NEXT_CACHE_IMPLICIT_TAG_ID = '_N_T_'</span><span class="s3">\n\n</span><span class="s1">// in seconds</span><span class="s3">\n</span><span class="s1">export const CACHE_ONE_YEAR = 31536000</span><span class="s3">\n\n</span><span class="s1">// in seconds, represents revalidate=false. I.e. never revaliate.</span><span class="s3">\n</span><span class="s1">// We use this value since it can be represented as a V8 SMI for optimal performance.</span><span class="s3">\n</span><span class="s1">// It can also be serialized as JSON if it ever leaks accidentally as an actual value.</span><span class="s3">\n</span><span class="s1">export const INFINITE_CACHE = 0xfffffffe</span><span class="s3">\n\n</span><span class="s1">// Patterns to detect middleware files</span><span class="s3">\n</span><span class="s1">export const MIDDLEWARE_FILENAME = 'middleware'</span><span class="s3">\n</span><span class="s1">export const MIDDLEWARE_LOCATION_REGEXP = `(?:src/)?${MIDDLEWARE_FILENAME}`</span><span class="s3">\n\n</span><span class="s1">// Pattern to detect instrumentation hooks file</span><span class="s3">\n</span><span class="s1">export const INSTRUMENTATION_HOOK_FILENAME = 'instrumentation'</span><span class="s3">\n\n</span><span class="s1">// Because on Windows absolute paths in the generated code can break because of numbers, eg 1 in the path,</span><span class="s3">\n</span><span class="s1">// we have to use a private alias</span><span class="s3">\n</span><span class="s1">export const PAGES_DIR_ALIAS = 'private-next-pages'</span><span class="s3">\n</span><span class="s1">export const DOT_NEXT_ALIAS = 'private-dot-next'</span><span class="s3">\n</span><span class="s1">export const ROOT_DIR_ALIAS = 'private-next-root-dir'</span><span class="s3">\n</span><span class="s1">export const APP_DIR_ALIAS = 'private-next-app-dir'</span><span class="s3">\n</span><span class="s1">export const RSC_MOD_REF_PROXY_ALIAS = 'private-next-rsc-mod-ref-proxy'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_VALIDATE_ALIAS = 'private-next-rsc-action-validate'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_PROXY_ALIAS = 'private-next-rsc-server-reference'</span><span class="s3">\n</span><span class="s1">export const RSC_CACHE_WRAPPER_ALIAS = 'private-next-rsc-cache-wrapper'</span><span class="s3">\n</span><span class="s1">export const RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS =</span><span class="s3">\n  </span><span class="s1">'private-next-rsc-track-dynamic-import'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_ENCRYPTION_ALIAS = 'private-next-rsc-action-encryption'</span><span class="s3">\n</span><span class="s1">export const RSC_ACTION_CLIENT_WRAPPER_ALIAS =</span><span class="s3">\n  </span><span class="s1">'private-next-rsc-action-client-wrapper'</span><span class="s3">\n\n</span><span class="s1">export const PUBLIC_DIR_MIDDLEWARE_CONFLICT = `You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict`</span><span class="s3">\n\n</span><span class="s1">export const SSG_GET_INITIAL_PROPS_CONFLICT = `You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_GET_INIT_PROPS_CONFLICT = `You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_SSG_CONFLICT = `You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps`</span><span class="s3">\n\n</span><span class="s1">export const STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR = `can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props`</span><span class="s3">\n\n</span><span class="s1">export const SERVER_PROPS_EXPORT_ERROR = `pages with </span><span class="s3">\\</span><span class="s1">`getServerSideProps</span><span class="s3">\\</span><span class="s1">` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export`</span><span class="s3">\n\n</span><span class="s1">export const GSP_NO_RETURNED_VALUE =</span><span class="s3">\n  </span><span class="s1">'Your `getStaticProps` function did not return an object. Did you forget to add a `return`?'</span><span class="s3">\n</span><span class="s1">export const GSSP_NO_RETURNED_VALUE =</span><span class="s3">\n  </span><span class="s1">'Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?'</span><span class="s3">\n\n</span><span class="s1">export const UNSTABLE_REVALIDATE_RENAME_ERROR =</span><span class="s3">\n  </span><span class="s1">'The `unstable_revalidate` property is available for general use.</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n  </span><span class="s1">'Please use `revalidate` instead.'</span><span class="s3">\n\n</span><span class="s1">export const GSSP_COMPONENT_MEMBER_ERROR = `can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member`</span><span class="s3">\n\n</span><span class="s1">export const NON_STANDARD_NODE_ENV = `You are using a non-standard </span><span class="s3">\&quot;</span><span class="s1">NODE_ENV</span><span class="s3">\&quot; </span><span class="s1">value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env`</span><span class="s3">\n\n</span><span class="s1">export const SSG_FALLBACK_EXPORT_ERROR = `Pages with </span><span class="s3">\\</span><span class="s1">`fallback</span><span class="s3">\\</span><span class="s1">` enabled in </span><span class="s3">\\</span><span class="s1">`getStaticPaths</span><span class="s3">\\</span><span class="s1">` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export`</span><span class="s3">\n\n</span><span class="s1">export const ESLINT_DEFAULT_DIRS = ['app', 'pages', 'components', 'lib', 'src']</span><span class="s3">\n\n</span><span class="s1">export const SERVER_RUNTIME: Record&lt;string, ServerRuntime&gt; = {</span><span class="s3">\n  </span><span class="s1">edge: 'edge',</span><span class="s3">\n  </span><span class="s1">experimentalEdge: 'experimental-edge',</span><span class="s3">\n  </span><span class="s1">nodejs: 'nodejs',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The names of the webpack layers. These layers are the primitives for the</span><span class="s3">\n </span><span class="s1">* webpack chunks.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const WEBPACK_LAYERS_NAMES = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the shared code between the client and server bundles.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">shared: 'shared',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for server-only runtime and picking up `react-server` export conditions.</span><span class="s3">\n   </span><span class="s1">* Including app router RSC pages and app router custom routes and metadata routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">reactServerComponents: 'rsc',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Server Side Rendering layer for app (ssr).</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">serverSideRendering: 'ssr',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for actions.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">actionBrowser: 'action-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Node.js bundle layer for the API routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">apiNode: 'api-node',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Edge Lite bundle layer for the API routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">apiEdge: 'api-edge',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the middleware code.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">middleware: 'middleware',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for the instrumentation hooks.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">instrument: 'instrument',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The layer for assets on the edge.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">edgeAsset: 'edge-asset',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for App directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">appPagesBrowser: 'app-pages-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The browser client bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirBrowser: 'pages-dir-browser',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Edge Lite bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirEdge: 'pages-dir-edge',</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The Node.js bundle layer for Pages directory.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pagesDirNode: 'pages-dir-node',</span><span class="s3">\n</span><span class="s1">} as const</span><span class="s3">\n\n</span><span class="s1">export type WebpackLayerName =</span><span class="s3">\n  </span><span class="s1">(typeof WEBPACK_LAYERS_NAMES)[keyof typeof WEBPACK_LAYERS_NAMES]</span><span class="s3">\n\n</span><span class="s1">const WEBPACK_LAYERS = {</span><span class="s3">\n  </span><span class="s1">...WEBPACK_LAYERS_NAMES,</span><span class="s3">\n  </span><span class="s1">GROUP: {</span><span class="s3">\n    </span><span class="s1">builtinReact: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">serverOnly: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.instrument,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.middleware,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">neutralTarget: [</span><span class="s3">\n      </span><span class="s1">// pages api</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.apiNode,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.apiEdge,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">clientOnly: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">bundled: [</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.shared,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.instrument,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.middleware,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">appPages: [</span><span class="s3">\n      </span><span class="s1">// app router pages and layouts</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.reactServerComponents,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.serverSideRendering,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.appPagesBrowser,</span><span class="s3">\n      </span><span class="s1">WEBPACK_LAYERS_NAMES.actionBrowser,</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const WEBPACK_RESOURCE_QUERIES = {</span><span class="s3">\n  </span><span class="s1">edgeSSREntry: '__next_edge_ssr_entry__',</span><span class="s3">\n  </span><span class="s1">metadata: '__next_metadata__',</span><span class="s3">\n  </span><span class="s1">metadataRoute: '__next_metadata_route__',</span><span class="s3">\n  </span><span class="s1">metadataImageMeta: '__next_metadata_image_meta__',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { WEBPACK_LAYERS, WEBPACK_RESOURCE_QUERIES }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;TEXT_PLAIN_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;MATCHED_PATH_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_REVALIDATE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_PREFETCH_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SEGMENTS_DIR_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SEGMENT_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;ACTION_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_DATA_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_META_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_BODY_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAGS_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATED_TAGS_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RESUME_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_ITEMS&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_SOFT_TAG_MAX_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_IMPLICIT_TAG_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;CACHE_ONE_YEAR&quot;</span><span class="s0">,</span><span class="s1">&quot;INFINITE_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_FILENAME&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_LOCATION_REGEXP&quot;</span><span class="s0">,</span><span class="s1">&quot;INSTRUMENTATION_HOOK_FILENAME&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;DOT_NEXT_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_MOD_REF_PROXY_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_VALIDATE_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_PROXY_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_CACHE_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_ENCRYPTION_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_ACTION_CLIENT_WRAPPER_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;PUBLIC_DIR_MIDDLEWARE_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SSG_GET_INITIAL_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_GET_INIT_PROPS_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_SSG_CONFLICT&quot;</span><span class="s0">,</span><span class="s1">&quot;STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_PROPS_EXPORT_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;GSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_NO_RETURNED_VALUE&quot;</span><span class="s0">,</span><span class="s1">&quot;UNSTABLE_REVALIDATE_RENAME_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;GSSP_COMPONENT_MEMBER_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;NON_STANDARD_NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;SSG_FALLBACK_EXPORT_ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;ESLINT_DEFAULT_DIRS&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;edge&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;nodejs&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;shared&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;serverSideRendering&quot;</span><span class="s0">,</span><span class="s1">&quot;actionBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;apiNode&quot;</span><span class="s0">,</span><span class="s1">&quot;apiEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;instrument&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;appPagesBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirNode&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS&quot;</span><span class="s0">,</span><span class="s1">&quot;GROUP&quot;</span><span class="s0">,</span><span class="s1">&quot;builtinReact&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;neutralTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;clientOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;bundled&quot;</span><span class="s0">,</span><span class="s1">&quot;appPages&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_RESOURCE_QUERIES&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeSSREntry&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataImageMeta&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16512</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders } from 'http'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NEXT_INTERCEPTION_MARKER_PREFIX,</span><span class="s3">\n  </span><span class="s1">NEXT_QUERY_PARAM_PREFIX,</span><span class="s3">\n</span><span class="s1">} from '../../lib/constants'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Converts a Node.js IncomingHttpHeaders object to a Headers object. Any</span><span class="s3">\n </span><span class="s1">* headers with multiple values will be joined with a comma and space. Any</span><span class="s3">\n </span><span class="s1">* headers that have an undefined value will be ignored and others will be</span><span class="s3">\n </span><span class="s1">* coerced to strings.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param nodeHeaders the headers object to convert</span><span class="s3">\n </span><span class="s1">* @returns the converted headers object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function fromNodeOutgoingHttpHeaders(</span><span class="s3">\n  </span><span class="s1">nodeHeaders: OutgoingHttpHeaders</span><span class="s3">\n</span><span class="s1">): Headers {</span><span class="s3">\n  </span><span class="s1">const headers = new Headers()</span><span class="s3">\n  </span><span class="s1">for (let [key, value] of Object.entries(nodeHeaders)) {</span><span class="s3">\n    </span><span class="s1">const values = Array.isArray(value) ? value : [value]</span><span class="s3">\n    </span><span class="s1">for (let v of values) {</span><span class="s3">\n      </span><span class="s1">if (typeof v === 'undefined') continue</span><span class="s3">\n      </span><span class="s1">if (typeof v === 'number') {</span><span class="s3">\n        </span><span class="s1">v = v.toString()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">headers.append(key, v)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return headers</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/*</span><span class="s3">\n  </span><span class="s1">Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas</span><span class="s3">\n  </span><span class="s1">that are within a single set-cookie field-value, such as in the Expires portion.</span><span class="s3">\n  </span><span class="s1">This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2</span><span class="s3">\n  </span><span class="s1">Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128</span><span class="s3">\n  </span><span class="s1">React Native's fetch does this for *every* header, including set-cookie.</span><span class="s3">\n  \n  </span><span class="s1">Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25</span><span class="s3">\n  </span><span class="s1">Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation</span><span class="s3">\n</span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function splitCookiesString(cookiesString: string) {</span><span class="s3">\n  </span><span class="s1">var cookiesStrings = []</span><span class="s3">\n  </span><span class="s1">var pos = 0</span><span class="s3">\n  </span><span class="s1">var start</span><span class="s3">\n  </span><span class="s1">var ch</span><span class="s3">\n  </span><span class="s1">var lastComma</span><span class="s3">\n  </span><span class="s1">var nextStart</span><span class="s3">\n  </span><span class="s1">var cookiesSeparatorFound</span><span class="s3">\n\n  </span><span class="s1">function skipWhitespace() {</span><span class="s3">\n    </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; /</span><span class="s3">\\</span><span class="s1">s/.test(cookiesString.charAt(pos))) {</span><span class="s3">\n      </span><span class="s1">pos += 1</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return pos &lt; cookiesString.length</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function notSpecialChar() {</span><span class="s3">\n    </span><span class="s1">ch = cookiesString.charAt(pos)</span><span class="s3">\n\n    </span><span class="s1">return ch !== '=' &amp;&amp; ch !== ';' &amp;&amp; ch !== ','</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">while (pos &lt; cookiesString.length) {</span><span class="s3">\n    </span><span class="s1">start = pos</span><span class="s3">\n    </span><span class="s1">cookiesSeparatorFound = false</span><span class="s3">\n\n    </span><span class="s1">while (skipWhitespace()) {</span><span class="s3">\n      </span><span class="s1">ch = cookiesString.charAt(pos)</span><span class="s3">\n      </span><span class="s1">if (ch === ',') {</span><span class="s3">\n        </span><span class="s1">// ',' is a cookie separator if we have later first '=', not ';' or ','</span><span class="s3">\n        </span><span class="s1">lastComma = pos</span><span class="s3">\n        </span><span class="s1">pos += 1</span><span class="s3">\n\n        </span><span class="s1">skipWhitespace()</span><span class="s3">\n        </span><span class="s1">nextStart = pos</span><span class="s3">\n\n        </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; notSpecialChar()) {</span><span class="s3">\n          </span><span class="s1">pos += 1</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// currently special character</span><span class="s3">\n        </span><span class="s1">if (pos &lt; cookiesString.length &amp;&amp; cookiesString.charAt(pos) === '=') {</span><span class="s3">\n          </span><span class="s1">// we found cookies separator</span><span class="s3">\n          </span><span class="s1">cookiesSeparatorFound = true</span><span class="s3">\n          </span><span class="s1">// pos is inside the next cookie, so back up and return it.</span><span class="s3">\n          </span><span class="s1">pos = nextStart</span><span class="s3">\n          </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, lastComma))</span><span class="s3">\n          </span><span class="s1">start = pos</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// in param ',' or param separator ';',</span><span class="s3">\n          </span><span class="s1">// we continue from that comma</span><span class="s3">\n          </span><span class="s1">pos = lastComma + 1</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">pos += 1</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!cookiesSeparatorFound || pos &gt;= cookiesString.length) {</span><span class="s3">\n      </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, cookiesString.length))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return cookiesStrings</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Converts a Headers object to a Node.js OutgoingHttpHeaders object. This is</span><span class="s3">\n </span><span class="s1">* required to support the set-cookie header, which may have multiple values.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param headers the headers object to convert</span><span class="s3">\n </span><span class="s1">* @returns the converted headers object</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function toNodeOutgoingHttpHeaders(</span><span class="s3">\n  </span><span class="s1">headers: Headers</span><span class="s3">\n</span><span class="s1">): OutgoingHttpHeaders {</span><span class="s3">\n  </span><span class="s1">const nodeHeaders: OutgoingHttpHeaders = {}</span><span class="s3">\n  </span><span class="s1">const cookies: string[] = []</span><span class="s3">\n  </span><span class="s1">if (headers) {</span><span class="s3">\n    </span><span class="s1">for (const [key, value] of headers.entries()) {</span><span class="s3">\n      </span><span class="s1">if (key.toLowerCase() === 'set-cookie') {</span><span class="s3">\n        </span><span class="s1">// We may have gotten a comma joined string of cookies, or multiple</span><span class="s3">\n        </span><span class="s1">// set-cookie headers. We need to merge them into one header array</span><span class="s3">\n        </span><span class="s1">// to represent all the cookies.</span><span class="s3">\n        </span><span class="s1">cookies.push(...splitCookiesString(value))</span><span class="s3">\n        </span><span class="s1">nodeHeaders[key] = cookies.length === 1 ? cookies[0] : cookies</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">nodeHeaders[key] = value</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return nodeHeaders</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Validate the correctness of a user-provided URL.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function validateURL(url: string | URL): string {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">return String(new URL(String(url)))</span><span class="s3">\n  </span><span class="s1">} catch (error: any) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`URL is malformed </span><span class="s3">\&quot;</span><span class="s1">${String(</span><span class="s3">\n        </span><span class="s1">url</span><span class="s3">\n      </span><span class="s1">)}</span><span class="s3">\&quot;</span><span class="s1">. Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,</span><span class="s3">\n      </span><span class="s1">{ cause: error }</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Normalizes `nxtP` and `nxtI` query param values to remove the prefix.</span><span class="s3">\n </span><span class="s1">* This function does not mutate the input key.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeNextQueryParam(key: string): null | string {</span><span class="s3">\n  </span><span class="s1">const prefixes = [NEXT_QUERY_PARAM_PREFIX, NEXT_INTERCEPTION_MARKER_PREFIX]</span><span class="s3">\n  </span><span class="s1">for (const prefix of prefixes) {</span><span class="s3">\n    </span><span class="s1">if (key !== prefix &amp;&amp; key.startsWith(prefix)) {</span><span class="s3">\n      </span><span class="s1">return key.substring(prefix.length)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NEXT_INTERCEPTION_MARKER_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_QUERY_PARAM_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;fromNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;Headers&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;append&quot;</span><span class="s0">,</span><span class="s1">&quot;splitCookiesString&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesString&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesStrings&quot;</span><span class="s0">,</span><span class="s1">&quot;pos&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;ch&quot;</span><span class="s0">,</span><span class="s1">&quot;lastComma&quot;</span><span class="s0">,</span><span class="s1">&quot;nextStart&quot;</span><span class="s0">,</span><span class="s1">&quot;cookiesSeparatorFound&quot;</span><span class="s0">,</span><span class="s1">&quot;skipWhitespace&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;charAt&quot;</span><span class="s0">,</span><span class="s1">&quot;notSpecialChar&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;toNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;validateURL&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeNextQueryParam&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixes&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16644</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/i18n/detect-domain-locale.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { DomainLocale } from '../../../server/config-shared'</span><span class="s3">\n\n</span><span class="s1">export function detectDomainLocale(</span><span class="s3">\n  </span><span class="s1">domainItems?: readonly DomainLocale[],</span><span class="s3">\n  </span><span class="s1">hostname?: string,</span><span class="s3">\n  </span><span class="s1">detectedLocale?: string</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (!domainItems) return</span><span class="s3">\n\n  </span><span class="s1">if (detectedLocale) {</span><span class="s3">\n    </span><span class="s1">detectedLocale = detectedLocale.toLowerCase()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const item of domainItems) {</span><span class="s3">\n    </span><span class="s1">// remove port if present</span><span class="s3">\n    </span><span class="s1">const domainHostname = item.domain?.split(':', 1)[0].toLowerCase()</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">hostname === domainHostname ||</span><span class="s3">\n      </span><span class="s1">detectedLocale === item.defaultLocale.toLowerCase() ||</span><span class="s3">\n      </span><span class="s1">item.locales?.some((locale) =&gt; locale.toLowerCase() === detectedLocale)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return item</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;detectDomainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;domainItems&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;domainHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;domain&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAEO,SAASA,mBACdC,WAAqC,EACrCC,QAAiB,EACjBC,cAAuB;IAEvB,IAAI,CAACF,aAAa;IAElB,IAAIE,gBAAgB;QAClBA,iBAAiBA,eAAeC,WAAW;IAC7C;IAEA,KAAK,MAAMC,QAAQJ,YAAa;YAEPI,cAIrBA;QALF,yBAAyB;QACzB,MAAMC,iBAAAA,CAAiBD,eAAAA,KAAKE,MAAM,KAAA,OAAA,KAAA,IAAXF,aAAaG,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAACJ,WAAW;QAChE,IACEF,aAAaI,kBACbH,mBAAmBE,KAAKI,aAAa,CAACL,WAAW,MAAA,CAAA,CACjDC,gBAAAA,KAAKK,OAAO,KAAA,OAAA,KAAA,IAAZL,cAAcM,IAAI,CAAC,CAACC,SAAWA,OAAOR,WAAW,OAAOD,eAAAA,GACxD;YACA,OAAOE;QACT;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16666</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/remove-trailing-slash.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Removes the trailing slash for a given route or page path. Preserves the</span><span class="s3">\n </span><span class="s1">* root page. Examples:</span><span class="s3">\n </span><span class="s1">*   - `/foo/bar/` -&gt; `/foo/bar`</span><span class="s3">\n </span><span class="s1">*   - `/foo/bar` -&gt; `/foo/bar`</span><span class="s3">\n </span><span class="s1">*   - `/` -&gt; `/`</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function removeTrailingSlash(route: string) {</span><span class="s3">\n  </span><span class="s1">return route.replace(/</span><span class="s3">\\</span><span class="s1">/$/, '') || '/'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;;;CAMC,GACD;;;;AAAO,SAASA,oBAAoBC,KAAa;IAC/C,OAAOA,MAAMC,OAAO,CAAC,OAAO,OAAO;AACrC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16683</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/parse-path.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Given a path this function will find the pathname, query and hash and return</span><span class="s3">\n </span><span class="s1">* them. This is useful to parse full paths on the client side.</span><span class="s3">\n </span><span class="s1">* @param path A path to parse e.g. /foo/bar?id=1#hash</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function parsePath(path: string) {</span><span class="s3">\n  </span><span class="s1">const hashIndex = path.indexOf('#')</span><span class="s3">\n  </span><span class="s1">const queryIndex = path.indexOf('?')</span><span class="s3">\n  </span><span class="s1">const hasQuery = queryIndex &gt; -1 &amp;&amp; (hashIndex &lt; 0 || queryIndex &lt; hashIndex)</span><span class="s3">\n\n  </span><span class="s1">if (hasQuery || hashIndex &gt; -1) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),</span><span class="s3">\n      </span><span class="s1">query: hasQuery</span><span class="s3">\n        </span><span class="s1">? path.substring(queryIndex, hashIndex &gt; -1 ? hashIndex : undefined)</span><span class="s3">\n        </span><span class="s1">: '',</span><span class="s3">\n      </span><span class="s1">hash: hashIndex &gt; -1 ? path.slice(hashIndex) : '',</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return { pathname: path, query: '', hash: '' }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;hashIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;queryIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;hasQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA;;;;CAIC,GACD;;;;AAAO,SAASA,UAAUC,IAAY;IACpC,MAAMC,YAAYD,KAAKE,OAAO,CAAC;IAC/B,MAAMC,aAAaH,KAAKE,OAAO,CAAC;IAChC,MAAME,WAAWD,aAAa,CAAC,KAAMF,CAAAA,YAAY,KAAKE,aAAaF,SAAQ;IAE3E,IAAIG,YAAYH,YAAY,CAAC,GAAG;QAC9B,OAAO;YACLI,UAAUL,KAAKM,SAAS,CAAC,GAAGF,WAAWD,aAAaF;YACpDM,OAAOH,WACHJ,KAAKM,SAAS,CAACH,YAAYF,YAAY,CAAC,IAAIA,YAAYO,aACxD;YACJC,MAAMR,YAAY,CAAC,IAAID,KAAKU,KAAK,CAACT,aAAa;QACjD;IACF;IAEA,OAAO;QAAEI,UAAUL;QAAMO,OAAO;QAAIE,MAAM;IAAG;AAC/C&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16712</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/add-path-prefix.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { parsePath } from './parse-path'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Adds the provided prefix to the given path. It first ensures that the path</span><span class="s3">\n </span><span class="s1">* is indeed starting with a slash.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function addPathPrefix(path: string, prefix?: string) {</span><span class="s3">\n  </span><span class="s1">if (!path.startsWith('/') || !prefix) {</span><span class="s3">\n    </span><span class="s1">return path</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { pathname, query, hash } = parsePath(path)</span><span class="s3">\n  </span><span class="s1">return `${prefix}${pathname}${query}${hash}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;addPathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,SAAS,QAAQ,eAAc;;AAMjC,SAASC,cAAcC,IAAY,EAAEC,MAAe;IACzD,IAAI,CAACD,KAAKE,UAAU,CAAC,QAAQ,CAACD,QAAQ;QACpC,OAAOD;IACT;IAEA,MAAM,EAAEG,QAAQ,EAAEC,KAAK,EAAEC,IAAI,EAAE,OAAGP,qMAAAA,EAAUE;IAC5C,OAAQ,KAAEC,SAASE,WAAWC,QAAQC;AACxC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16729</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/add-path-suffix.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { parsePath } from './parse-path'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Similarly to `addPathPrefix`, this function adds a suffix at the end on the</span><span class="s3">\n </span><span class="s1">* provided path. It also works only for paths ensuring the argument starts</span><span class="s3">\n </span><span class="s1">* with a slash.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function addPathSuffix(path: string, suffix?: string) {</span><span class="s3">\n  </span><span class="s1">if (!path.startsWith('/') || !suffix) {</span><span class="s3">\n    </span><span class="s1">return path</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { pathname, query, hash } = parsePath(path)</span><span class="s3">\n  </span><span class="s1">return `${pathname}${suffix}${query}${hash}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;addPathSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;suffix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,SAAS,QAAQ,eAAc;;AAOjC,SAASC,cAAcC,IAAY,EAAEC,MAAe;IACzD,IAAI,CAACD,KAAKE,UAAU,CAAC,QAAQ,CAACD,QAAQ;QACpC,OAAOD;IACT;IAEA,MAAM,EAAEG,QAAQ,EAAEC,KAAK,EAAEC,IAAI,EAAE,OAAGP,qMAAAA,EAAUE;IAC5C,OAAQ,KAAEG,WAAWF,SAASG,QAAQC;AACxC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16746</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/path-has-prefix.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { parsePath } from './parse-path'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks if a given path starts with a given prefix. It ensures it matches</span><span class="s3">\n </span><span class="s1">* exactly without containing extra chars. e.g. prefix /docs should replace</span><span class="s3">\n </span><span class="s1">* for /docs, /docs/, /docs/a but not /docsss</span><span class="s3">\n </span><span class="s1">* @param path The path to check.</span><span class="s3">\n </span><span class="s1">* @param prefix The prefix to check against.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function pathHasPrefix(path: string, prefix: string) {</span><span class="s3">\n  </span><span class="s1">if (typeof path !== 'string') {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { pathname } = parsePath(path)</span><span class="s3">\n  </span><span class="s1">return pathname === prefix || pathname.startsWith(prefix + '/')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;parsePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,SAAS,QAAQ,eAAc;;AASjC,SAASC,cAAcC,IAAY,EAAEC,MAAc;IACxD,IAAI,OAAOD,SAAS,UAAU;QAC5B,OAAO;IACT;IAEA,MAAM,EAAEE,QAAQ,EAAE,OAAGJ,qMAAAA,EAAUE;IAC/B,OAAOE,aAAaD,UAAUC,SAASC,UAAU,CAACF,SAAS;AAC7D&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16763</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/add-locale.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { addPathPrefix } from './add-path-prefix'</span><span class="s3">\n</span><span class="s1">import { pathHasPrefix } from './path-has-prefix'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* For a given path and a locale, if the locale is given, it will prefix the</span><span class="s3">\n </span><span class="s1">* locale. The path shouldn't be an API path. If a default locale is given the</span><span class="s3">\n </span><span class="s1">* prefix will be omitted if the locale is already the default locale.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function addLocale(</span><span class="s3">\n  </span><span class="s1">path: string,</span><span class="s3">\n  </span><span class="s1">locale?: string | false,</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string,</span><span class="s3">\n  </span><span class="s1">ignorePrefix?: boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// If no locale was given or the locale is the default locale, we don't need</span><span class="s3">\n  </span><span class="s1">// to prefix the path.</span><span class="s3">\n  </span><span class="s1">if (!locale || locale === defaultLocale) return path</span><span class="s3">\n\n  </span><span class="s1">const lower = path.toLowerCase()</span><span class="s3">\n\n  </span><span class="s1">// If the path is an API path or the path already has the locale prefix, we</span><span class="s3">\n  </span><span class="s1">// don't need to prefix the path.</span><span class="s3">\n  </span><span class="s1">if (!ignorePrefix) {</span><span class="s3">\n    </span><span class="s1">if (pathHasPrefix(lower, '/api')) return path</span><span class="s3">\n    </span><span class="s1">if (pathHasPrefix(lower, `/${locale.toLowerCase()}`)) return path</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Add the locale prefix to the path.</span><span class="s3">\n  </span><span class="s1">return addPathPrefix(path, `/${locale}`)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;addPathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;addLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;ignorePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;lower&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,aAAa,QAAQ,oBAAmB;AACjD,SAASC,aAAa,QAAQ,oBAAmB;;;AAO1C,SAASC,UACdC,IAAY,EACZC,MAAuB,EACvBC,aAAsB,EACtBC,YAAsB;IAEtB,4EAA4E;IAC5E,sBAAsB;IACtB,IAAI,CAACF,UAAUA,WAAWC,eAAe,OAAOF;IAEhD,MAAMI,QAAQJ,KAAKK,WAAW;IAE9B,2EAA2E;IAC3E,iCAAiC;IACjC,IAAI,CAACF,cAAc;QACjB,QAAIL,iNAAAA,EAAcM,OAAO,SAAS,OAAOJ;QACzC,QAAIF,iNAAAA,EAAcM,OAAQ,MAAGH,OAAOI,WAAW,KAAO,OAAOL;IAC/D;IAEA,qCAAqC;IACrC,WAAOH,iNAAAA,EAAcG,MAAO,MAAGC;AACjC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16789</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/format-next-pathname-info.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextPathnameInfo } from './get-next-pathname-info'</span><span class="s3">\n</span><span class="s1">import { removeTrailingSlash } from './remove-trailing-slash'</span><span class="s3">\n</span><span class="s1">import { addPathPrefix } from './add-path-prefix'</span><span class="s3">\n</span><span class="s1">import { addPathSuffix } from './add-path-suffix'</span><span class="s3">\n</span><span class="s1">import { addLocale } from './add-locale'</span><span class="s3">\n\n</span><span class="s1">interface ExtendedInfo extends NextPathnameInfo {</span><span class="s3">\n  </span><span class="s1">defaultLocale?: string</span><span class="s3">\n  </span><span class="s1">ignorePrefix?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function formatNextPathnameInfo(info: ExtendedInfo) {</span><span class="s3">\n  </span><span class="s1">let pathname = addLocale(</span><span class="s3">\n    </span><span class="s1">info.pathname,</span><span class="s3">\n    </span><span class="s1">info.locale,</span><span class="s3">\n    </span><span class="s1">info.buildId ? undefined : info.defaultLocale,</span><span class="s3">\n    </span><span class="s1">info.ignorePrefix</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (info.buildId || !info.trailingSlash) {</span><span class="s3">\n    </span><span class="s1">pathname = removeTrailingSlash(pathname)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (info.buildId) {</span><span class="s3">\n    </span><span class="s1">pathname = addPathSuffix(</span><span class="s3">\n      </span><span class="s1">addPathPrefix(pathname, `/_next/data/${info.buildId}`),</span><span class="s3">\n      </span><span class="s1">info.pathname === '/' ? 'index.json' : '.json'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">pathname = addPathPrefix(pathname, info.basePath)</span><span class="s3">\n  </span><span class="s1">return !info.buildId &amp;&amp; info.trailingSlash</span><span class="s3">\n    </span><span class="s1">? !pathname.endsWith('/')</span><span class="s3">\n      </span><span class="s1">? addPathSuffix(pathname, '/')</span><span class="s3">\n      </span><span class="s1">: pathname</span><span class="s3">\n    </span><span class="s1">: removeTrailingSlash(pathname)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;addPathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;addPathSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;addLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;formatNextPathnameInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;ignorePrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AACA,SAASA,mBAAmB,QAAQ,0BAAyB;AAC7D,SAASC,aAAa,QAAQ,oBAAmB;AACjD,SAASC,aAAa,QAAQ,oBAAmB;AACjD,SAASC,SAAS,QAAQ,eAAc;;;;;AAOjC,SAASC,uBAAuBC,IAAkB;IACvD,IAAIC,eAAWH,qMAAAA,EACbE,KAAKC,QAAQ,EACbD,KAAKE,MAAM,EACXF,KAAKG,OAAO,GAAGC,YAAYJ,KAAKK,aAAa,EAC7CL,KAAKM,YAAY;IAGnB,IAAIN,KAAKG,OAAO,IAAI,CAACH,KAAKO,aAAa,EAAE;QACvCN,eAAWN,6NAAAA,EAAoBM;IACjC;IAEA,IAAID,KAAKG,OAAO,EAAE;QAChBF,eAAWJ,iNAAAA,MACTD,iNAAAA,EAAcK,UAAW,iBAAcD,KAAKG,OAAO,GACnDH,KAAKC,QAAQ,KAAK,MAAM,eAAe;IAE3C;IAEAA,eAAWL,iNAAAA,EAAcK,UAAUD,KAAKQ,QAAQ;IAChD,OAAO,CAACR,KAAKG,OAAO,IAAIH,KAAKO,aAAa,GACtC,CAACN,SAASQ,QAAQ,CAAC,WACjBZ,iNAAAA,EAAcI,UAAU,OACxBA,eACFN,6NAAAA,EAAoBM;AAC1B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16816</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/get-hostname.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders } from 'http'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Takes an object with a hostname property (like a parsed URL) and some</span><span class="s3">\n </span><span class="s1">* headers that may contain Host and returns the preferred hostname.</span><span class="s3">\n </span><span class="s1">* @param parsed An object containing a hostname property.</span><span class="s3">\n </span><span class="s1">* @param headers A dictionary with headers containing a `host`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getHostname(</span><span class="s3">\n  </span><span class="s1">parsed: { hostname?: string | null },</span><span class="s3">\n  </span><span class="s1">headers?: OutgoingHttpHeaders</span><span class="s3">\n</span><span class="s1">): string | undefined {</span><span class="s3">\n  </span><span class="s1">// Get the hostname from the headers if it exists, otherwise use the parsed</span><span class="s3">\n  </span><span class="s1">// hostname.</span><span class="s3">\n  </span><span class="s1">let hostname: string</span><span class="s3">\n  </span><span class="s1">if (headers?.host &amp;&amp; !Array.isArray(headers.host)) {</span><span class="s3">\n    </span><span class="s1">hostname = headers.host.toString().split(':', 1)[0]</span><span class="s3">\n  </span><span class="s1">} else if (parsed.hostname) {</span><span class="s3">\n    </span><span class="s1">hostname = parsed.hostname</span><span class="s3">\n  </span><span class="s1">} else return</span><span class="s3">\n\n  </span><span class="s1">return hostname.toLowerCase()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;parsed&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAEA;;;;;CAKC,GACD;;;;AAAO,SAASA,YACdC,MAAoC,EACpCC,OAA6B;IAE7B,2EAA2E;IAC3E,YAAY;IACZ,IAAIC;IACJ,IAAID,CAAAA,WAAAA,OAAAA,KAAAA,IAAAA,QAASE,IAAI,KAAI,CAACC,MAAMC,OAAO,CAACJ,QAAQE,IAAI,GAAG;QACjDD,WAAWD,QAAQE,IAAI,CAACG,QAAQ,GAAGC,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE;IACrD,OAAO,IAAIP,OAAOE,QAAQ,EAAE;QAC1BA,WAAWF,OAAOE,QAAQ;IAC5B,OAAO;IAEP,OAAOA,SAASM,WAAW;AAC7B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16840</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/i18n/normalize-locale-path.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export interface PathLocale {</span><span class="s3">\n  </span><span class="s1">detectedLocale?: string</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* A cache of lowercased locales for each list of locales. This is stored as a</span><span class="s3">\n </span><span class="s1">* WeakMap so if the locales are garbage collected, the cache entry will be</span><span class="s3">\n </span><span class="s1">* removed as well.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const cache = new WeakMap&lt;readonly string[], readonly string[]&gt;()</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* For a pathname that may include a locale from a list of locales, it</span><span class="s3">\n </span><span class="s1">* removes the locale from the pathname returning it alongside with the</span><span class="s3">\n </span><span class="s1">* detected locale.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param pathname A pathname that may include a locale.</span><span class="s3">\n </span><span class="s1">* @param locales A list of locales.</span><span class="s3">\n </span><span class="s1">* @returns The detected locale and pathname without locale</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function normalizeLocalePath(</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n</span><span class="s1">): PathLocale {</span><span class="s3">\n  </span><span class="s1">// If locales is undefined, return the pathname as is.</span><span class="s3">\n  </span><span class="s1">if (!locales) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// Get the cached lowercased locales or create a new cache entry.</span><span class="s3">\n  </span><span class="s1">let lowercasedLocales = cache.get(locales)</span><span class="s3">\n  </span><span class="s1">if (!lowercasedLocales) {</span><span class="s3">\n    </span><span class="s1">lowercasedLocales = locales.map((locale) =&gt; locale.toLowerCase())</span><span class="s3">\n    </span><span class="s1">cache.set(locales, lowercasedLocales)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let detectedLocale: string | undefined</span><span class="s3">\n\n  </span><span class="s1">// The first segment will be empty, because it has a leading `/`. If</span><span class="s3">\n  </span><span class="s1">// there is no further segment, there is no locale (or it's the default).</span><span class="s3">\n  </span><span class="s1">const segments = pathname.split('/', 2)</span><span class="s3">\n\n  </span><span class="s1">// If there's no second segment (ie, the pathname is just `/`), there's no</span><span class="s3">\n  </span><span class="s1">// locale.</span><span class="s3">\n  </span><span class="s1">if (!segments[1]) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// The second segment will contain the locale part if any.</span><span class="s3">\n  </span><span class="s1">const segment = segments[1].toLowerCase()</span><span class="s3">\n\n  </span><span class="s1">// See if the segment matches one of the locales. If it doesn't, there is</span><span class="s3">\n  </span><span class="s1">// no locale (or it's the default).</span><span class="s3">\n  </span><span class="s1">const index = lowercasedLocales.indexOf(segment)</span><span class="s3">\n  </span><span class="s1">if (index &lt; 0) return { pathname }</span><span class="s3">\n\n  </span><span class="s1">// Return the case-sensitive locale.</span><span class="s3">\n  </span><span class="s1">detectedLocale = locales[index]</span><span class="s3">\n\n  </span><span class="s1">// Remove the `/${locale}` part of the pathname.</span><span class="s3">\n  </span><span class="s1">pathname = pathname.slice(detectedLocale.length + 1) || '/'</span><span class="s3">\n\n  </span><span class="s1">return { pathname, detectedLocale }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;lowercasedLocales&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAKA;;;;CAIC;;;;AACD,MAAMA,QAAQ,IAAIC;AAWX,SAASC,oBACdC,QAAgB,EAChBC,OAA2B;IAE3B,sDAAsD;IACtD,IAAI,CAACA,SAAS,OAAO;QAAED;IAAS;IAEhC,iEAAiE;IACjE,IAAIE,oBAAoBL,MAAMM,GAAG,CAACF;IAClC,IAAI,CAACC,mBAAmB;QACtBA,oBAAoBD,QAAQG,GAAG,CAAC,CAACC,SAAWA,OAAOC,WAAW;QAC9DT,MAAMU,GAAG,CAACN,SAASC;IACrB;IAEA,IAAIM;IAEJ,oEAAoE;IACpE,yEAAyE;IACzE,MAAMC,WAAWT,SAASU,KAAK,CAAC,KAAK;IAErC,0EAA0E;IAC1E,UAAU;IACV,IAAI,CAACD,QAAQ,CAAC,EAAE,EAAE,OAAO;QAAET;IAAS;IAEpC,0DAA0D;IAC1D,MAAMW,UAAUF,QAAQ,CAAC,EAAE,CAACH,WAAW;IAEvC,yEAAyE;IACzE,mCAAmC;IACnC,MAAMM,QAAQV,kBAAkBW,OAAO,CAACF;IACxC,IAAIC,QAAQ,GAAG,OAAO;QAAEZ;IAAS;IAEjC,oCAAoC;IACpCQ,iBAAiBP,OAAO,CAACW,MAAM;IAE/B,gDAAgD;IAChDZ,WAAWA,SAASc,KAAK,CAACN,eAAeO,MAAM,GAAG,MAAM;IAExD,OAAO;QAAEf;QAAUQ;IAAe;AACpC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16890</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/remove-path-prefix.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { pathHasPrefix } from './path-has-prefix'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Given a path and a prefix it will remove the prefix when it exists in the</span><span class="s3">\n </span><span class="s1">* given path. It ensures it matches exactly without containing extra chars</span><span class="s3">\n </span><span class="s1">* and if the prefix is not there it will be noop.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param path The path to remove the prefix from.</span><span class="s3">\n </span><span class="s1">* @param prefix The prefix to be removed.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function removePathPrefix(path: string, prefix: string): string {</span><span class="s3">\n  </span><span class="s1">// If the path doesn't start with the prefix we can return it as is. This</span><span class="s3">\n  </span><span class="s1">// protects us from situations where the prefix is a substring of the path</span><span class="s3">\n  </span><span class="s1">// prefix such as:</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// For prefix: /blog</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">//   /blog -&gt; true</span><span class="s3">\n  </span><span class="s1">//   /blog/ -&gt; true</span><span class="s3">\n  </span><span class="s1">//   /blog/1 -&gt; true</span><span class="s3">\n  </span><span class="s1">//   /blogging -&gt; false</span><span class="s3">\n  </span><span class="s1">//   /blogging/ -&gt; false</span><span class="s3">\n  </span><span class="s1">//   /blogging/1 -&gt; false</span><span class="s3">\n  </span><span class="s1">if (!pathHasPrefix(path, prefix)) {</span><span class="s3">\n    </span><span class="s1">return path</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Remove the prefix from the path via slicing.</span><span class="s3">\n  </span><span class="s1">const withoutPrefix = path.slice(prefix.length)</span><span class="s3">\n\n  </span><span class="s1">// If the path without the prefix starts with a `/` we can return it as is.</span><span class="s3">\n  </span><span class="s1">if (withoutPrefix.startsWith('/')) {</span><span class="s3">\n    </span><span class="s1">return withoutPrefix</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If the path without the prefix doesn't start with a `/` we need to add it</span><span class="s3">\n  </span><span class="s1">// back to the path to make sure it's a valid path.</span><span class="s3">\n  </span><span class="s1">return `/${withoutPrefix}`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;removePathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;prefix&quot;</span><span class="s0">,</span><span class="s1">&quot;withoutPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,aAAa,QAAQ,oBAAmB;;AAU1C,SAASC,iBAAiBC,IAAY,EAAEC,MAAc;IAC3D,yEAAyE;IACzE,0EAA0E;IAC1E,kBAAkB;IAClB,EAAE;IACF,oBAAoB;IACpB,EAAE;IACF,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,uBAAuB;IACvB,wBAAwB;IACxB,yBAAyB;IACzB,IAAI,KAACH,iNAAAA,EAAcE,MAAMC,SAAS;QAChC,OAAOD;IACT;IAEA,+CAA+C;IAC/C,MAAME,gBAAgBF,KAAKG,KAAK,CAACF,OAAOG,MAAM;IAE9C,2EAA2E;IAC3E,IAAIF,cAAcG,UAAU,CAAC,MAAM;QACjC,OAAOH;IACT;IAEA,4EAA4E;IAC5E,mDAAmD;IACnD,OAAQ,MAAGA;AACb&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16926</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/router/utils/get-next-pathname-info.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { normalizeLocalePath } from '../../i18n/normalize-locale-path'</span><span class="s3">\n</span><span class="s1">import { removePathPrefix } from './remove-path-prefix'</span><span class="s3">\n</span><span class="s1">import { pathHasPrefix } from './path-has-prefix'</span><span class="s3">\n</span><span class="s1">import type { I18NProvider } from '../../../../server/lib/i18n-provider'</span><span class="s3">\n\n</span><span class="s1">export interface NextPathnameInfo {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The base path in case the pathname included it.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">basePath?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The buildId for when the parsed URL is a data URL. Parsing it can be</span><span class="s3">\n   </span><span class="s1">* disabled with the `parseData` option.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">buildId?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* If there was a locale in the pathname, this will hold its value.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">locale?: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The processed pathname without a base path, locale, or data URL elements</span><span class="s3">\n   </span><span class="s1">* when parsing it is enabled.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">pathname: string</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A boolean telling if the pathname had a trailingSlash. This can be only</span><span class="s3">\n   </span><span class="s1">* true if trailingSlash is enabled.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface Options {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* When passed to true, this function will also parse Nextjs data URLs.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">parseData?: boolean</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A partial of the Next.js configuration to parse the URL.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">nextConfig?: {</span><span class="s3">\n    </span><span class="s1">basePath?: string</span><span class="s3">\n    </span><span class="s1">i18n?: { locales?: readonly string[] } | null</span><span class="s3">\n    </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* If provided, this normalizer will be used to detect the locale instead of</span><span class="s3">\n   </span><span class="s1">* the default locale detection.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">i18nProvider?: I18NProvider</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getNextPathnameInfo(</span><span class="s3">\n  </span><span class="s1">pathname: string,</span><span class="s3">\n  </span><span class="s1">options: Options</span><span class="s3">\n</span><span class="s1">): NextPathnameInfo {</span><span class="s3">\n  </span><span class="s1">const { basePath, i18n, trailingSlash } = options.nextConfig ?? {}</span><span class="s3">\n  </span><span class="s1">const info: NextPathnameInfo = {</span><span class="s3">\n    </span><span class="s1">pathname,</span><span class="s3">\n    </span><span class="s1">trailingSlash: pathname !== '/' ? pathname.endsWith('/') : trailingSlash,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (basePath &amp;&amp; pathHasPrefix(info.pathname, basePath)) {</span><span class="s3">\n    </span><span class="s1">info.pathname = removePathPrefix(info.pathname, basePath)</span><span class="s3">\n    </span><span class="s1">info.basePath = basePath</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let pathnameNoDataPrefix = info.pathname</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">info.pathname.startsWith('/_next/data/') &amp;&amp;</span><span class="s3">\n    </span><span class="s1">info.pathname.endsWith('.json')</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const paths = info.pathname</span><span class="s3">\n      </span><span class="s1">.replace(/^</span><span class="s3">\\</span><span class="s1">/_next</span><span class="s3">\\</span><span class="s1">/data</span><span class="s3">\\</span><span class="s1">//, '')</span><span class="s3">\n      </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">.json$/, '')</span><span class="s3">\n      </span><span class="s1">.split('/')</span><span class="s3">\n\n    </span><span class="s1">const buildId = paths[0]</span><span class="s3">\n    </span><span class="s1">info.buildId = buildId</span><span class="s3">\n    </span><span class="s1">pathnameNoDataPrefix =</span><span class="s3">\n      </span><span class="s1">paths[1] !== 'index' ? `/${paths.slice(1).join('/')}` : '/'</span><span class="s3">\n\n    </span><span class="s1">// update pathname with normalized if enabled although</span><span class="s3">\n    </span><span class="s1">// we use normalized to populate locale info still</span><span class="s3">\n    </span><span class="s1">if (options.parseData === true) {</span><span class="s3">\n      </span><span class="s1">info.pathname = pathnameNoDataPrefix</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If provided, use the locale route normalizer to detect the locale instead</span><span class="s3">\n  </span><span class="s1">// of the function below.</span><span class="s3">\n  </span><span class="s1">if (i18n) {</span><span class="s3">\n    </span><span class="s1">let result = options.i18nProvider</span><span class="s3">\n      </span><span class="s1">? options.i18nProvider.analyze(info.pathname)</span><span class="s3">\n      </span><span class="s1">: normalizeLocalePath(info.pathname, i18n.locales)</span><span class="s3">\n\n    </span><span class="s1">info.locale = result.detectedLocale</span><span class="s3">\n    </span><span class="s1">info.pathname = result.pathname ?? info.pathname</span><span class="s3">\n\n    </span><span class="s1">if (!result.detectedLocale &amp;&amp; info.buildId) {</span><span class="s3">\n      </span><span class="s1">result = options.i18nProvider</span><span class="s3">\n        </span><span class="s1">? options.i18nProvider.analyze(pathnameNoDataPrefix)</span><span class="s3">\n        </span><span class="s1">: normalizeLocalePath(pathnameNoDataPrefix, i18n.locales)</span><span class="s3">\n\n      </span><span class="s1">if (result.detectedLocale) {</span><span class="s3">\n        </span><span class="s1">info.locale = result.detectedLocale</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return info</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;removePathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextPathnameInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;pathnameNoDataPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;paths&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;parseData&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;i18nProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;analyze&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SAASA,mBAAmB,QAAQ,mCAAkC;AACtE,SAASC,gBAAgB,QAAQ,uBAAsB;AACvD,SAASC,aAAa,QAAQ,oBAAmB;;;;AAkD1C,SAASC,oBACdC,QAAgB,EAChBC,OAAgB;QAE0BA;IAA1C,MAAM,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,aAAa,EAAE,GAAGH,CAAAA,sBAAAA,QAAQI,UAAU,KAAA,OAAlBJ,sBAAsB,CAAC;IACjE,MAAMK,OAAyB;QAC7BN;QACAI,eAAeJ,aAAa,MAAMA,SAASO,QAAQ,CAAC,OAAOH;IAC7D;IAEA,IAAIF,gBAAYJ,iNAAAA,EAAcQ,KAAKN,QAAQ,EAAEE,WAAW;QACtDI,KAAKN,QAAQ,OAAGH,uNAAAA,EAAiBS,KAAKN,QAAQ,EAAEE;QAChDI,KAAKJ,QAAQ,GAAGA;IAClB;IACA,IAAIM,uBAAuBF,KAAKN,QAAQ;IAExC,IACEM,KAAKN,QAAQ,CAACS,UAAU,CAAC,mBACzBH,KAAKN,QAAQ,CAACO,QAAQ,CAAC,UACvB;QACA,MAAMG,QAAQJ,KAAKN,QAAQ,CACxBW,OAAO,CAAC,oBAAoB,IAC5BA,OAAO,CAAC,WAAW,IACnBC,KAAK,CAAC;QAET,MAAMC,UAAUH,KAAK,CAAC,EAAE;QACxBJ,KAAKO,OAAO,GAAGA;QACfL,uBACEE,KAAK,CAAC,EAAE,KAAK,UAAW,MAAGA,MAAMI,KAAK,CAAC,GAAGC,IAAI,CAAC,OAAS;QAE1D,sDAAsD;QACtD,kDAAkD;QAClD,IAAId,QAAQe,SAAS,KAAK,MAAM;YAC9BV,KAAKN,QAAQ,GAAGQ;QAClB;IACF;IAEA,4EAA4E;IAC5E,yBAAyB;IACzB,IAAIL,MAAM;QACR,IAAIc,SAAShB,QAAQiB,YAAY,GAC7BjB,QAAQiB,YAAY,CAACC,OAAO,CAACb,KAAKN,QAAQ,QAC1CJ,kNAAAA,EAAoBU,KAAKN,QAAQ,EAAEG,KAAKiB,OAAO;QAEnDd,KAAKe,MAAM,GAAGJ,OAAOK,cAAc;YACnBL;QAAhBX,KAAKN,QAAQ,GAAGiB,CAAAA,mBAAAA,OAAOjB,QAAQ,KAAA,OAAfiB,mBAAmBX,KAAKN,QAAQ;QAEhD,IAAI,CAACiB,OAAOK,cAAc,IAAIhB,KAAKO,OAAO,EAAE;YAC1CI,SAAShB,QAAQiB,YAAY,GACzBjB,QAAQiB,YAAY,CAACC,OAAO,CAACX,4BAC7BZ,kNAAAA,EAAoBY,sBAAsBL,KAAKiB,OAAO;YAE1D,IAAIH,OAAOK,cAAc,EAAE;gBACzBhB,KAAKe,MAAM,GAAGJ,OAAOK,cAAc;YACrC;QACF;IACF;IACA,OAAOhB;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">16979</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/next-url.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders } from 'http'</span><span class="s3">\n</span><span class="s1">import type { DomainLocale, I18NConfig } from '../config-shared'</span><span class="s3">\n</span><span class="s1">import type { I18NProvider } from '../lib/i18n-provider'</span><span class="s3">\n\n</span><span class="s1">import { detectDomainLocale } from '../../shared/lib/i18n/detect-domain-locale'</span><span class="s3">\n</span><span class="s1">import { formatNextPathnameInfo } from '../../shared/lib/router/utils/format-next-pathname-info'</span><span class="s3">\n</span><span class="s1">import { getHostname } from '../../shared/lib/get-hostname'</span><span class="s3">\n</span><span class="s1">import { getNextPathnameInfo } from '../../shared/lib/router/utils/get-next-pathname-info'</span><span class="s3">\n\n</span><span class="s1">interface Options {</span><span class="s3">\n  </span><span class="s1">base?: string | URL</span><span class="s3">\n  </span><span class="s1">headers?: OutgoingHttpHeaders</span><span class="s3">\n  </span><span class="s1">forceLocale?: boolean</span><span class="s3">\n  </span><span class="s1">nextConfig?: {</span><span class="s3">\n    </span><span class="s1">basePath?: string</span><span class="s3">\n    </span><span class="s1">i18n?: I18NConfig | null</span><span class="s3">\n    </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">i18nProvider?: I18NProvider</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const REGEX_LOCALHOST_HOSTNAME =</span><span class="s3">\n  </span><span class="s1">/(?!^https?:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/)(127(?:</span><span class="s3">\\</span><span class="s1">.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|</span><span class="s3">\\</span><span class="s1">[::1</span><span class="s3">\\</span><span class="s1">]|localhost)/</span><span class="s3">\n\n</span><span class="s1">function parseURL(url: string | URL, base?: string | URL) {</span><span class="s3">\n  </span><span class="s1">return new URL(</span><span class="s3">\n    </span><span class="s1">String(url).replace(REGEX_LOCALHOST_HOSTNAME, 'localhost'),</span><span class="s3">\n    </span><span class="s1">base &amp;&amp; String(base).replace(REGEX_LOCALHOST_HOSTNAME, 'localhost')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const Internal = Symbol('NextURLInternal')</span><span class="s3">\n\n</span><span class="s1">export class NextURL {</span><span class="s3">\n  </span><span class="s1">private [Internal]: {</span><span class="s3">\n    </span><span class="s1">basePath: string</span><span class="s3">\n    </span><span class="s1">buildId?: string</span><span class="s3">\n    </span><span class="s1">flightSearchParameters?: Record&lt;string, string&gt;</span><span class="s3">\n    </span><span class="s1">defaultLocale?: string</span><span class="s3">\n    </span><span class="s1">domainLocale?: DomainLocale</span><span class="s3">\n    </span><span class="s1">locale?: string</span><span class="s3">\n    </span><span class="s1">options: Options</span><span class="s3">\n    </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n    </span><span class="s1">url: URL</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">constructor(input: string | URL, base?: string | URL, opts?: Options)</span><span class="s3">\n  </span><span class="s1">constructor(input: string | URL, opts?: Options)</span><span class="s3">\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">input: string | URL,</span><span class="s3">\n    </span><span class="s1">baseOrOpts?: string | URL | Options,</span><span class="s3">\n    </span><span class="s1">opts?: Options</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">let base: undefined | string | URL</span><span class="s3">\n    </span><span class="s1">let options: Options</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">(typeof baseOrOpts === 'object' &amp;&amp; 'pathname' in baseOrOpts) ||</span><span class="s3">\n      </span><span class="s1">typeof baseOrOpts === 'string'</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">base = baseOrOpts</span><span class="s3">\n      </span><span class="s1">options = opts || {}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">options = opts || baseOrOpts || {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this[Internal] = {</span><span class="s3">\n      </span><span class="s1">url: parseURL(input, base ?? options.base),</span><span class="s3">\n      </span><span class="s1">options: options,</span><span class="s3">\n      </span><span class="s1">basePath: '',</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.analyze()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private analyze() {</span><span class="s3">\n    </span><span class="s1">const info = getNextPathnameInfo(this[Internal].url.pathname, {</span><span class="s3">\n      </span><span class="s1">nextConfig: this[Internal].options.nextConfig,</span><span class="s3">\n      </span><span class="s1">parseData: !process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,</span><span class="s3">\n      </span><span class="s1">i18nProvider: this[Internal].options.i18nProvider,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const hostname = getHostname(</span><span class="s3">\n      </span><span class="s1">this[Internal].url,</span><span class="s3">\n      </span><span class="s1">this[Internal].options.headers</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this[Internal].domainLocale = this[Internal].options.i18nProvider</span><span class="s3">\n      </span><span class="s1">? this[Internal].options.i18nProvider.detectDomainLocale(hostname)</span><span class="s3">\n      </span><span class="s1">: detectDomainLocale(</span><span class="s3">\n          </span><span class="s1">this[Internal].options.nextConfig?.i18n?.domains,</span><span class="s3">\n          </span><span class="s1">hostname</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const defaultLocale =</span><span class="s3">\n      </span><span class="s1">this[Internal].domainLocale?.defaultLocale ||</span><span class="s3">\n      </span><span class="s1">this[Internal].options.nextConfig?.i18n?.defaultLocale</span><span class="s3">\n\n    </span><span class="s1">this[Internal].url.pathname = info.pathname</span><span class="s3">\n    </span><span class="s1">this[Internal].defaultLocale = defaultLocale</span><span class="s3">\n    </span><span class="s1">this[Internal].basePath = info.basePath ?? ''</span><span class="s3">\n    </span><span class="s1">this[Internal].buildId = info.buildId</span><span class="s3">\n    </span><span class="s1">this[Internal].locale = info.locale ?? defaultLocale</span><span class="s3">\n    </span><span class="s1">this[Internal].trailingSlash = info.trailingSlash</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private formatPathname() {</span><span class="s3">\n    </span><span class="s1">return formatNextPathnameInfo({</span><span class="s3">\n      </span><span class="s1">basePath: this[Internal].basePath,</span><span class="s3">\n      </span><span class="s1">buildId: this[Internal].buildId,</span><span class="s3">\n      </span><span class="s1">defaultLocale: !this[Internal].options.forceLocale</span><span class="s3">\n        </span><span class="s1">? this[Internal].defaultLocale</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">locale: this[Internal].locale,</span><span class="s3">\n      </span><span class="s1">pathname: this[Internal].url.pathname,</span><span class="s3">\n      </span><span class="s1">trailingSlash: this[Internal].trailingSlash,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private formatSearch() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.search</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public get buildId() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].buildId</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public set buildId(buildId: string | undefined) {</span><span class="s3">\n    </span><span class="s1">this[Internal].buildId = buildId</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public get locale() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].locale ?? ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public set locale(locale: string) {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!this[Internal].locale ||</span><span class="s3">\n      </span><span class="s1">!this[Internal].options.nextConfig?.i18n?.locales.includes(locale)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">throw new TypeError(</span><span class="s3">\n        </span><span class="s1">`The NextURL configuration includes no locale </span><span class="s3">\&quot;</span><span class="s1">${locale}</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this[Internal].locale = locale</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get defaultLocale() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].defaultLocale</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get domainLocale() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].domainLocale</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get searchParams() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.searchParams</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get host() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.host</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set host(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.host = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get hostname() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.hostname</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set hostname(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.hostname = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get port() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.port</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set port(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.port = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get protocol() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.protocol</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set protocol(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.protocol = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get href() {</span><span class="s3">\n    </span><span class="s1">const pathname = this.formatPathname()</span><span class="s3">\n    </span><span class="s1">const search = this.formatSearch()</span><span class="s3">\n    </span><span class="s1">return `${this.protocol}//${this.host}${pathname}${search}${this.hash}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set href(url: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url = parseURL(url)</span><span class="s3">\n    </span><span class="s1">this.analyze()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get origin() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.origin</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get pathname() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.pathname</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set pathname(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.pathname = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get hash() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.hash</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set hash(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.hash = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get search() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.search</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set search(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.search = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get password() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.password</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set password(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.password = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get username() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].url.username</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set username(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].url.username = value</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">get basePath() {</span><span class="s3">\n    </span><span class="s1">return this[Internal].basePath</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">set basePath(value: string) {</span><span class="s3">\n    </span><span class="s1">this[Internal].basePath = value.startsWith('/') ? value : `/${value}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">toString() {</span><span class="s3">\n    </span><span class="s1">return this.href</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">toJSON() {</span><span class="s3">\n    </span><span class="s1">return this.href</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">[Symbol.for('edge-runtime.inspect.custom')]() {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">href: this.href,</span><span class="s3">\n      </span><span class="s1">origin: this.origin,</span><span class="s3">\n      </span><span class="s1">protocol: this.protocol,</span><span class="s3">\n      </span><span class="s1">username: this.username,</span><span class="s3">\n      </span><span class="s1">password: this.password,</span><span class="s3">\n      </span><span class="s1">host: this.host,</span><span class="s3">\n      </span><span class="s1">hostname: this.hostname,</span><span class="s3">\n      </span><span class="s1">port: this.port,</span><span class="s3">\n      </span><span class="s1">pathname: this.pathname,</span><span class="s3">\n      </span><span class="s1">search: this.search,</span><span class="s3">\n      </span><span class="s1">searchParams: this.searchParams,</span><span class="s3">\n      </span><span class="s1">hash: this.hash,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">clone() {</span><span class="s3">\n    </span><span class="s1">return new NextURL(String(this), this[Internal].options)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;detectDomainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;formatNextPathnameInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextPathnameInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;REGEX_LOCALHOST_HOSTNAME&quot;</span><span class="s0">,</span><span class="s1">&quot;parseURL&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;Internal&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;NextURL&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;baseOrOpts&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;analyze&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;parseData&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_NO_MIDDLEWARE_URL_NORMALIZE&quot;</span><span class="s0">,</span><span class="s1">&quot;i18nProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;domainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;domains&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;formatPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;forceLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;formatSearch&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;TypeError&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;protocol&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;password&quot;</span><span class="s0">,</span><span class="s1">&quot;username&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;toJSON&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;clone&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17174</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export class PageSignatureError extends Error {</span><span class="s3">\n  </span><span class="s1">constructor({ page }: { page: string }) {</span><span class="s3">\n    </span><span class="s1">super(`The middleware </span><span class="s3">\&quot;</span><span class="s1">${page}</span><span class="s3">\&quot; </span><span class="s1">accepts an async API directly with the form:</span><span class="s3">\n  \n  </span><span class="s1">export function middleware(request, event) {</span><span class="s3">\n    </span><span class="s1">return NextResponse.redirect('/new-location')</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  \n  </span><span class="s1">Read more: https://nextjs.org/docs/messages/middleware-new-signature</span><span class="s3">\n  </span><span class="s1">`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class RemovedPageError extends Error {</span><span class="s3">\n  </span><span class="s1">constructor() {</span><span class="s3">\n    </span><span class="s1">super(`The request.page has been deprecated in favour of </span><span class="s3">\\</span><span class="s1">`URLPattern</span><span class="s3">\\</span><span class="s1">`.</span><span class="s3">\n  </span><span class="s1">Read more: https://nextjs.org/docs/messages/middleware-request-page</span><span class="s3">\n  </span><span class="s1">`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class RemovedUAError extends Error {</span><span class="s3">\n  </span><span class="s1">constructor() {</span><span class="s3">\n    </span><span class="s1">super(`The request.ua has been removed in favour of </span><span class="s3">\\</span><span class="s1">`userAgent</span><span class="s3">\\</span><span class="s1">` function.</span><span class="s3">\n  </span><span class="s1">Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent</span><span class="s3">\n  </span><span class="s1">`)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;PageSignatureError&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;RemovedPageError&quot;</span><span class="s0">,</span><span class="s1">&quot;RemovedUAError&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;AAAO,MAAMA,2BAA2BC;IACtCC,YAAY,EAAEC,IAAI,EAAoB,CAAE;QACtC,KAAK,CAAC,CAAC,gBAAgB,EAAEA,KAAK;;;;;;;EAOhC,CAAC;IACD;AACF;AAEO,MAAMC,yBAAyBH;IACpCC,aAAc;QACZ,KAAK,CAAC,CAAC;;EAET,CAAC;IACD;AACF;AAEO,MAAMG,uBAAuBJ;IAClCC,aAAc;QACZ,KAAK,CAAC,CAAC;;EAET,CAAC;IACD;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17212</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/compiled/%40edge-runtime/cookies/index.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;</span><span class="s3">\&quot;</span><span class="s1">use strict</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">var __defProp = Object.defineProperty;</span><span class="s3">\n</span><span class="s1">var __getOwnPropDesc = Object.getOwnPropertyDescriptor;</span><span class="s3">\n</span><span class="s1">var __getOwnPropNames = Object.getOwnPropertyNames;</span><span class="s3">\n</span><span class="s1">var __hasOwnProp = Object.prototype.hasOwnProperty;</span><span class="s3">\n</span><span class="s1">var __export = (target, all) =&gt; {</span><span class="s3">\n  </span><span class="s1">for (var name in all)</span><span class="s3">\n    </span><span class="s1">__defProp(target, name, { get: all[name], enumerable: true });</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var __copyProps = (to, from, except, desc) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (from &amp;&amp; typeof from === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">|| typeof from === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">for (let key of __getOwnPropNames(from))</span><span class="s3">\n      </span><span class="s1">if (!__hasOwnProp.call(to, key) &amp;&amp; key !== except)</span><span class="s3">\n        </span><span class="s1">__defProp(to, key, { get: () =&gt; from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return to;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">var __toCommonJS = (mod) =&gt; __copyProps(__defProp({}, </span><span class="s3">\&quot;</span><span class="s1">__esModule</span><span class="s3">\&quot;</span><span class="s1">, { value: true }), mod);</span><span class="s3">\n\n</span><span class="s1">// src/index.ts</span><span class="s3">\n</span><span class="s1">var src_exports = {};</span><span class="s3">\n</span><span class="s1">__export(src_exports, {</span><span class="s3">\n  </span><span class="s1">RequestCookies: () =&gt; RequestCookies,</span><span class="s3">\n  </span><span class="s1">ResponseCookies: () =&gt; ResponseCookies,</span><span class="s3">\n  </span><span class="s1">parseCookie: () =&gt; parseCookie,</span><span class="s3">\n  </span><span class="s1">parseSetCookie: () =&gt; parseSetCookie,</span><span class="s3">\n  </span><span class="s1">stringifyCookie: () =&gt; stringifyCookie</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n</span><span class="s1">module.exports = __toCommonJS(src_exports);</span><span class="s3">\n\n</span><span class="s1">// src/serialize.ts</span><span class="s3">\n</span><span class="s1">function stringifyCookie(c) {</span><span class="s3">\n  </span><span class="s1">var _a;</span><span class="s3">\n  </span><span class="s1">const attrs = [</span><span class="s3">\n    \&quot;</span><span class="s1">path</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.path &amp;&amp; `Path=${c.path}`,</span><span class="s3">\n    \&quot;</span><span class="s1">expires</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; (c.expires || c.expires === 0) &amp;&amp; `Expires=${(typeof c.expires === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">? new Date(c.expires) : c.expires).toUTCString()}`,</span><span class="s3">\n    \&quot;</span><span class="s1">maxAge</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; typeof c.maxAge === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; `Max-Age=${c.maxAge}`,</span><span class="s3">\n    \&quot;</span><span class="s1">domain</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.domain &amp;&amp; `Domain=${c.domain}`,</span><span class="s3">\n    \&quot;</span><span class="s1">secure</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.secure &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">Secure</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">httpOnly</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.httpOnly &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">HttpOnly</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">sameSite</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.sameSite &amp;&amp; `SameSite=${c.sameSite}`,</span><span class="s3">\n    \&quot;</span><span class="s1">partitioned</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.partitioned &amp;&amp; </span><span class="s3">\&quot;</span><span class="s1">Partitioned</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    \&quot;</span><span class="s1">priority</span><span class="s3">\&quot; </span><span class="s1">in c &amp;&amp; c.priority &amp;&amp; `Priority=${c.priority}`</span><span class="s3">\n  </span><span class="s1">].filter(Boolean);</span><span class="s3">\n  </span><span class="s1">const stringified = `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : </span><span class="s3">\&quot;\&quot;</span><span class="s1">)}`;</span><span class="s3">\n  </span><span class="s1">return attrs.length === 0 ? stringified : `${stringified}; ${attrs.join(</span><span class="s3">\&quot;</span><span class="s1">; </span><span class="s3">\&quot;</span><span class="s1">)}`;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function parseCookie(cookie) {</span><span class="s3">\n  </span><span class="s1">const map = /* @__PURE__ */ new Map();</span><span class="s3">\n  </span><span class="s1">for (const pair of cookie.split(/; */)) {</span><span class="s3">\n    </span><span class="s1">if (!pair)</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">const splitAt = pair.indexOf(</span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (splitAt === -1) {</span><span class="s3">\n      </span><span class="s1">map.set(pair, </span><span class="s3">\&quot;</span><span class="s1">true</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">map.set(key, decodeURIComponent(value != null ? value : </span><span class="s3">\&quot;</span><span class="s1">true</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n    </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return map;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function parseSetCookie(setCookie) {</span><span class="s3">\n  </span><span class="s1">if (!setCookie) {</span><span class="s3">\n    </span><span class="s1">return void 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const [[name, value], ...attributes] = parseCookie(setCookie);</span><span class="s3">\n  </span><span class="s1">const {</span><span class="s3">\n    </span><span class="s1">domain,</span><span class="s3">\n    </span><span class="s1">expires,</span><span class="s3">\n    </span><span class="s1">httponly,</span><span class="s3">\n    </span><span class="s1">maxage,</span><span class="s3">\n    </span><span class="s1">path,</span><span class="s3">\n    </span><span class="s1">samesite,</span><span class="s3">\n    </span><span class="s1">secure,</span><span class="s3">\n    </span><span class="s1">partitioned,</span><span class="s3">\n    </span><span class="s1">priority</span><span class="s3">\n  </span><span class="s1">} = Object.fromEntries(</span><span class="s3">\n    </span><span class="s1">attributes.map(([key, value2]) =&gt; [</span><span class="s3">\n      </span><span class="s1">key.toLowerCase().replace(/-/g, </span><span class="s3">\&quot;\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">value2</span><span class="s3">\n    </span><span class="s1">])</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const cookie = {</span><span class="s3">\n    </span><span class="s1">name,</span><span class="s3">\n    </span><span class="s1">value: decodeURIComponent(value),</span><span class="s3">\n    </span><span class="s1">domain,</span><span class="s3">\n    </span><span class="s1">...expires &amp;&amp; { expires: new Date(expires) },</span><span class="s3">\n    </span><span class="s1">...httponly &amp;&amp; { httpOnly: true },</span><span class="s3">\n    </span><span class="s1">...typeof maxage === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; { maxAge: Number(maxage) },</span><span class="s3">\n    </span><span class="s1">path,</span><span class="s3">\n    </span><span class="s1">...samesite &amp;&amp; { sameSite: parseSameSite(samesite) },</span><span class="s3">\n    </span><span class="s1">...secure &amp;&amp; { secure: true },</span><span class="s3">\n    </span><span class="s1">...priority &amp;&amp; { priority: parsePriority(priority) },</span><span class="s3">\n    </span><span class="s1">...partitioned &amp;&amp; { partitioned: true }</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">return compact(cookie);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function compact(t) {</span><span class="s3">\n  </span><span class="s1">const newT = {};</span><span class="s3">\n  </span><span class="s1">for (const key in t) {</span><span class="s3">\n    </span><span class="s1">if (t[key]) {</span><span class="s3">\n      </span><span class="s1">newT[key] = t[key];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return newT;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">var SAME_SITE = [</span><span class="s3">\&quot;</span><span class="s1">strict</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">lax</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">none</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n</span><span class="s1">function parseSameSite(string) {</span><span class="s3">\n  </span><span class="s1">string = string.toLowerCase();</span><span class="s3">\n  </span><span class="s1">return SAME_SITE.includes(string) ? string : void 0;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">var PRIORITY = [</span><span class="s3">\&quot;</span><span class="s1">low</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">medium</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">high</span><span class="s3">\&quot;</span><span class="s1">];</span><span class="s3">\n</span><span class="s1">function parsePriority(string) {</span><span class="s3">\n  </span><span class="s1">string = string.toLowerCase();</span><span class="s3">\n  </span><span class="s1">return PRIORITY.includes(string) ? string : void 0;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function splitCookiesString(cookiesString) {</span><span class="s3">\n  </span><span class="s1">if (!cookiesString)</span><span class="s3">\n    </span><span class="s1">return [];</span><span class="s3">\n  </span><span class="s1">var cookiesStrings = [];</span><span class="s3">\n  </span><span class="s1">var pos = 0;</span><span class="s3">\n  </span><span class="s1">var start;</span><span class="s3">\n  </span><span class="s1">var ch;</span><span class="s3">\n  </span><span class="s1">var lastComma;</span><span class="s3">\n  </span><span class="s1">var nextStart;</span><span class="s3">\n  </span><span class="s1">var cookiesSeparatorFound;</span><span class="s3">\n  </span><span class="s1">function skipWhitespace() {</span><span class="s3">\n    </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; /</span><span class="s3">\\</span><span class="s1">s/.test(cookiesString.charAt(pos))) {</span><span class="s3">\n      </span><span class="s1">pos += 1;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return pos &lt; cookiesString.length;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">function notSpecialChar() {</span><span class="s3">\n    </span><span class="s1">ch = cookiesString.charAt(pos);</span><span class="s3">\n    </span><span class="s1">return ch !== </span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; ch !== </span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; ch !== </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">while (pos &lt; cookiesString.length) {</span><span class="s3">\n    </span><span class="s1">start = pos;</span><span class="s3">\n    </span><span class="s1">cookiesSeparatorFound = false;</span><span class="s3">\n    </span><span class="s1">while (skipWhitespace()) {</span><span class="s3">\n      </span><span class="s1">ch = cookiesString.charAt(pos);</span><span class="s3">\n      </span><span class="s1">if (ch === </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">lastComma = pos;</span><span class="s3">\n        </span><span class="s1">pos += 1;</span><span class="s3">\n        </span><span class="s1">skipWhitespace();</span><span class="s3">\n        </span><span class="s1">nextStart = pos;</span><span class="s3">\n        </span><span class="s1">while (pos &lt; cookiesString.length &amp;&amp; notSpecialChar()) {</span><span class="s3">\n          </span><span class="s1">pos += 1;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (pos &lt; cookiesString.length &amp;&amp; cookiesString.charAt(pos) === </span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">cookiesSeparatorFound = true;</span><span class="s3">\n          </span><span class="s1">pos = nextStart;</span><span class="s3">\n          </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, lastComma));</span><span class="s3">\n          </span><span class="s1">start = pos;</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">pos = lastComma + 1;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">pos += 1;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (!cookiesSeparatorFound || pos &gt;= cookiesString.length) {</span><span class="s3">\n      </span><span class="s1">cookiesStrings.push(cookiesString.substring(start, cookiesString.length));</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return cookiesStrings;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// src/request-cookies.ts</span><span class="s3">\n</span><span class="s1">var RequestCookies = class {</span><span class="s3">\n  </span><span class="s1">constructor(requestHeaders) {</span><span class="s3">\n    </span><span class="s1">/** @internal */</span><span class="s3">\n    </span><span class="s1">this._parsed = /* @__PURE__ */ new Map();</span><span class="s3">\n    </span><span class="s1">this._headers = requestHeaders;</span><span class="s3">\n    </span><span class="s1">const header = requestHeaders.get(</span><span class="s3">\&quot;</span><span class="s1">cookie</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (header) {</span><span class="s3">\n      </span><span class="s1">const parsed = parseCookie(header);</span><span class="s3">\n      </span><span class="s1">for (const [name, value] of parsed) {</span><span class="s3">\n        </span><span class="s1">this._parsed.set(name, { name, value });</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">[Symbol.iterator]() {</span><span class="s3">\n    </span><span class="s1">return this._parsed[Symbol.iterator]();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The amount of cookies received from the client</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">get size() {</span><span class="s3">\n    </span><span class="s1">return this._parsed.size;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">get(...args) {</span><span class="s3">\n    </span><span class="s1">const name = typeof args[0] === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? args[0] : args[0].name;</span><span class="s3">\n    </span><span class="s1">return this._parsed.get(name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">getAll(...args) {</span><span class="s3">\n    </span><span class="s1">var _a;</span><span class="s3">\n    </span><span class="s1">const all = Array.from(this._parsed);</span><span class="s3">\n    </span><span class="s1">if (!args.length) {</span><span class="s3">\n      </span><span class="s1">return all.map(([_, value]) =&gt; value);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const name = typeof args[0] === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? args[0] : (_a = args[0]) == null ? void 0 : _a.name;</span><span class="s3">\n    </span><span class="s1">return all.filter(([n]) =&gt; n === name).map(([_, value]) =&gt; value);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">has(name) {</span><span class="s3">\n    </span><span class="s1">return this._parsed.has(name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">set(...args) {</span><span class="s3">\n    </span><span class="s1">const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;</span><span class="s3">\n    </span><span class="s1">const map = this._parsed;</span><span class="s3">\n    </span><span class="s1">map.set(name, { name, value });</span><span class="s3">\n    </span><span class="s1">this._headers.set(</span><span class="s3">\n      \&quot;</span><span class="s1">cookie</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">Array.from(map).map(([_, value2]) =&gt; stringifyCookie(value2)).join(</span><span class="s3">\&quot;</span><span class="s1">; </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Delete the cookies matching the passed name or names in the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">delete(names) {</span><span class="s3">\n    </span><span class="s1">const map = this._parsed;</span><span class="s3">\n    </span><span class="s1">const result = !Array.isArray(names) ? map.delete(names) : names.map((name) =&gt; map.delete(name));</span><span class="s3">\n    </span><span class="s1">this._headers.set(</span><span class="s3">\n      \&quot;</span><span class="s1">cookie</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">Array.from(map).map(([_, value]) =&gt; stringifyCookie(value)).join(</span><span class="s3">\&quot;</span><span class="s1">; </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return result;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Delete all the cookies in the cookies in the request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">clear() {</span><span class="s3">\n    </span><span class="s1">this.delete(Array.from(this._parsed.keys()));</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Format the cookies in the request as a string for logging</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">[Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">edge-runtime.inspect.custom</span><span class="s3">\&quot;</span><span class="s1">)]() {</span><span class="s3">\n    </span><span class="s1">return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">toString() {</span><span class="s3">\n    </span><span class="s1">return [...this._parsed.values()].map((v) =&gt; `${v.name}=${encodeURIComponent(v.value)}`).join(</span><span class="s3">\&quot;</span><span class="s1">; </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// src/response-cookies.ts</span><span class="s3">\n</span><span class="s1">var ResponseCookies = class {</span><span class="s3">\n  </span><span class="s1">constructor(responseHeaders) {</span><span class="s3">\n    </span><span class="s1">/** @internal */</span><span class="s3">\n    </span><span class="s1">this._parsed = /* @__PURE__ */ new Map();</span><span class="s3">\n    </span><span class="s1">var _a, _b, _c;</span><span class="s3">\n    </span><span class="s1">this._headers = responseHeaders;</span><span class="s3">\n    </span><span class="s1">const setCookie = (_c = (_b = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders)) != null ? _b : responseHeaders.get(</span><span class="s3">\&quot;</span><span class="s1">set-cookie</span><span class="s3">\&quot;</span><span class="s1">)) != null ? _c : [];</span><span class="s3">\n    </span><span class="s1">const cookieStrings = Array.isArray(setCookie) ? setCookie : splitCookiesString(setCookie);</span><span class="s3">\n    </span><span class="s1">for (const cookieString of cookieStrings) {</span><span class="s3">\n      </span><span class="s1">const parsed = parseSetCookie(cookieString);</span><span class="s3">\n      </span><span class="s1">if (parsed)</span><span class="s3">\n        </span><span class="s1">this._parsed.set(parsed.name, parsed);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">get(...args) {</span><span class="s3">\n    </span><span class="s1">const key = typeof args[0] === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? args[0] : args[0].name;</span><span class="s3">\n    </span><span class="s1">return this._parsed.get(key);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">getAll(...args) {</span><span class="s3">\n    </span><span class="s1">var _a;</span><span class="s3">\n    </span><span class="s1">const all = Array.from(this._parsed.values());</span><span class="s3">\n    </span><span class="s1">if (!args.length) {</span><span class="s3">\n      </span><span class="s1">return all;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const key = typeof args[0] === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? args[0] : (_a = args[0]) == null ? void 0 : _a.name;</span><span class="s3">\n    </span><span class="s1">return all.filter((c) =&gt; c.name === key);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">has(name) {</span><span class="s3">\n    </span><span class="s1">return this._parsed.has(name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">set(...args) {</span><span class="s3">\n    </span><span class="s1">const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;</span><span class="s3">\n    </span><span class="s1">const map = this._parsed;</span><span class="s3">\n    </span><span class="s1">map.set(name, normalizeCookie({ name, value, ...cookie }));</span><span class="s3">\n    </span><span class="s1">replace(map, this._headers);</span><span class="s3">\n    </span><span class="s1">return this;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">delete(...args) {</span><span class="s3">\n    </span><span class="s1">const [name, options] = typeof args[0] === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">? [args[0]] : [args[0].name, args[0]];</span><span class="s3">\n    </span><span class="s1">return this.set({ ...options, name, value: </span><span class="s3">\&quot;\&quot;</span><span class="s1">, expires: /* @__PURE__ */ new Date(0) });</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">[Symbol.for(</span><span class="s3">\&quot;</span><span class="s1">edge-runtime.inspect.custom</span><span class="s3">\&quot;</span><span class="s1">)]() {</span><span class="s3">\n    </span><span class="s1">return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">toString() {</span><span class="s3">\n    </span><span class="s1">return [...this._parsed.values()].map(stringifyCookie).join(</span><span class="s3">\&quot;</span><span class="s1">; </span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">function replace(bag, headers) {</span><span class="s3">\n  </span><span class="s1">headers.delete(</span><span class="s3">\&quot;</span><span class="s1">set-cookie</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">for (const [, value] of bag) {</span><span class="s3">\n    </span><span class="s1">const serialized = stringifyCookie(value);</span><span class="s3">\n    </span><span class="s1">headers.append(</span><span class="s3">\&quot;</span><span class="s1">set-cookie</span><span class="s3">\&quot;</span><span class="s1">, serialized);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function normalizeCookie(cookie = { name: </span><span class="s3">\&quot;\&quot;</span><span class="s1">, value: </span><span class="s3">\&quot;\&quot; </span><span class="s1">}) {</span><span class="s3">\n  </span><span class="s1">if (typeof cookie.expires === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">cookie.expires = new Date(cookie.expires);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (cookie.maxAge) {</span><span class="s3">\n    </span><span class="s1">cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (cookie.path === null || cookie.path === void 0) {</span><span class="s3">\n    </span><span class="s1">cookie.path = </span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return cookie;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">// Annotate the CommonJS export names for ESM import in node:</span><span class="s3">\n</span><span class="s1">0 &amp;&amp; (module.exports = {</span><span class="s3">\n  </span><span class="s1">RequestCookies,</span><span class="s3">\n  </span><span class="s1">ResponseCookies,</span><span class="s3">\n  </span><span class="s1">parseCookie,</span><span class="s3">\n  </span><span class="s1">parseSetCookie,</span><span class="s3">\n  </span><span class="s1">stringifyCookie</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17582</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/spec-extension/cookies.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export {</span><span class="s3">\n  </span><span class="s1">RequestCookies,</span><span class="s3">\n  </span><span class="s1">ResponseCookies,</span><span class="s3">\n  </span><span class="s1">stringifyCookie,</span><span class="s3">\n</span><span class="s1">} from 'next/dist/compiled/@edge-runtime/cookies'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RequestCookies&quot;</span><span class="s0">,</span><span class="s1">&quot;ResponseCookies&quot;</span><span class="s0">,</span><span class="s1">&quot;stringifyCookie&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;AAAA,SACEA,cAAc,EACdC,eAAe,EACfC,eAAe,QACV,2CAA0C&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17589</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/spec-extension/request.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { I18NConfig } from '../../config-shared'</span><span class="s3">\n</span><span class="s1">import { NextURL } from '../next-url'</span><span class="s3">\n</span><span class="s1">import { toNodeOutgoingHttpHeaders, validateURL } from '../utils'</span><span class="s3">\n</span><span class="s1">import { RemovedUAError, RemovedPageError } from '../error'</span><span class="s3">\n</span><span class="s1">import { RequestCookies } from './cookies'</span><span class="s3">\n\n</span><span class="s1">export const INTERNALS = Symbol('internal request')</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This class extends the [Web `Request` API](https://developer.mozilla.org/docs/Web/API/Request) with additional convenience methods.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Read more: [Next.js Docs: `NextRequest`](https://nextjs.org/docs/app/api-reference/functions/next-request)</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export class NextRequest extends Request {</span><span class="s3">\n  </span><span class="s1">/** @internal */</span><span class="s3">\n  </span><span class="s1">[INTERNALS]: {</span><span class="s3">\n    </span><span class="s1">cookies: RequestCookies</span><span class="s3">\n    </span><span class="s1">url: string</span><span class="s3">\n    </span><span class="s1">nextUrl: NextURL</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">constructor(input: URL | RequestInfo, init: RequestInit = {}) {</span><span class="s3">\n    </span><span class="s1">const url =</span><span class="s3">\n      </span><span class="s1">typeof input !== 'string' &amp;&amp; 'url' in input ? input.url : String(input)</span><span class="s3">\n\n    </span><span class="s1">validateURL(url)</span><span class="s3">\n\n    </span><span class="s1">// node Request instance requires duplex option when a body</span><span class="s3">\n    </span><span class="s1">// is present or it errors, we don't handle this for</span><span class="s3">\n    </span><span class="s1">// Request being passed in since it would have already</span><span class="s3">\n    </span><span class="s1">// errored if this wasn't configured</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge') {</span><span class="s3">\n      </span><span class="s1">if (init.body &amp;&amp; init.duplex !== 'half') {</span><span class="s3">\n        </span><span class="s1">init.duplex = 'half'</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (input instanceof Request) super(input, init)</span><span class="s3">\n    </span><span class="s1">else super(url, init)</span><span class="s3">\n\n    </span><span class="s1">const nextUrl = new NextURL(url, {</span><span class="s3">\n      </span><span class="s1">headers: toNodeOutgoingHttpHeaders(this.headers),</span><span class="s3">\n      </span><span class="s1">nextConfig: init.nextConfig,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">this[INTERNALS] = {</span><span class="s3">\n      </span><span class="s1">cookies: new RequestCookies(this.headers),</span><span class="s3">\n      </span><span class="s1">nextUrl,</span><span class="s3">\n      </span><span class="s1">url: process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE</span><span class="s3">\n        </span><span class="s1">? url</span><span class="s3">\n        </span><span class="s1">: nextUrl.toString(),</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">[Symbol.for('edge-runtime.inspect.custom')]() {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">cookies: this.cookies,</span><span class="s3">\n      </span><span class="s1">nextUrl: this.nextUrl,</span><span class="s3">\n      </span><span class="s1">url: this.url,</span><span class="s3">\n      </span><span class="s1">// rest of props come from Request</span><span class="s3">\n      </span><span class="s1">bodyUsed: this.bodyUsed,</span><span class="s3">\n      </span><span class="s1">cache: this.cache,</span><span class="s3">\n      </span><span class="s1">credentials: this.credentials,</span><span class="s3">\n      </span><span class="s1">destination: this.destination,</span><span class="s3">\n      </span><span class="s1">headers: Object.fromEntries(this.headers),</span><span class="s3">\n      </span><span class="s1">integrity: this.integrity,</span><span class="s3">\n      </span><span class="s1">keepalive: this.keepalive,</span><span class="s3">\n      </span><span class="s1">method: this.method,</span><span class="s3">\n      </span><span class="s1">mode: this.mode,</span><span class="s3">\n      </span><span class="s1">redirect: this.redirect,</span><span class="s3">\n      </span><span class="s1">referrer: this.referrer,</span><span class="s3">\n      </span><span class="s1">referrerPolicy: this.referrerPolicy,</span><span class="s3">\n      </span><span class="s1">signal: this.signal,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public get cookies() {</span><span class="s3">\n    </span><span class="s1">return this[INTERNALS].cookies</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public get nextUrl() {</span><span class="s3">\n    </span><span class="s1">return this[INTERNALS].nextUrl</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @deprecated</span><span class="s3">\n   </span><span class="s1">* `page` has been deprecated in favour of `URLPattern`.</span><span class="s3">\n   </span><span class="s1">* Read more: https://nextjs.org/docs/messages/middleware-request-page</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get page() {</span><span class="s3">\n    </span><span class="s1">throw new RemovedPageError()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* @deprecated</span><span class="s3">\n   </span><span class="s1">* `ua` has been removed in favour of </span><span class="s3">\\</span><span class="s1">`userAgent</span><span class="s3">\\</span><span class="s1">` function.</span><span class="s3">\n   </span><span class="s1">* Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get ua() {</span><span class="s3">\n    </span><span class="s1">throw new RemovedUAError()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public get url() {</span><span class="s3">\n    </span><span class="s1">return this[INTERNALS].url</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface RequestInit extends globalThis.RequestInit {</span><span class="s3">\n  </span><span class="s1">nextConfig?: {</span><span class="s3">\n    </span><span class="s1">basePath?: string</span><span class="s3">\n    </span><span class="s1">i18n?: I18NConfig | null</span><span class="s3">\n    </span><span class="s1">trailingSlash?: boolean</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">signal?: AbortSignal</span><span class="s3">\n  </span><span class="s1">// see https://github.com/whatwg/fetch/pull/1457</span><span class="s3">\n  </span><span class="s1">duplex?: 'half'</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NextURL&quot;</span><span class="s0">,</span><span class="s1">&quot;toNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;validateURL&quot;</span><span class="s0">,</span><span class="s1">&quot;RemovedUAError&quot;</span><span class="s0">,</span><span class="s1">&quot;RemovedPageError&quot;</span><span class="s0">,</span><span class="s1">&quot;RequestCookies&quot;</span><span class="s0">,</span><span class="s1">&quot;INTERNALS&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;NextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;Request&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;init&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;duplex&quot;</span><span class="s0">,</span><span class="s1">&quot;nextUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_NO_MIDDLEWARE_URL_NORMALIZE&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;bodyUsed&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;credentials&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;integrity&quot;</span><span class="s0">,</span><span class="s1">&quot;keepalive&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;redirect&quot;</span><span class="s0">,</span><span class="s1">&quot;referrer&quot;</span><span class="s0">,</span><span class="s1">&quot;referrerPolicy&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;ua&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AACA,SAASA,OAAO,QAAQ,cAAa;AACrC,SAASC,yBAAyB,EAAEC,WAAW,QAAQ,WAAU;AACjE,SAASC,cAAc,EAAEC,gBAAgB,QAAQ,WAAU;;AAC3D,SAASC,cAAc,QAAQ,YAAW;;;;;AAEnC,MAAMC,YAAYC,OAAO,oBAAmB;AAO5C,MAAMC,oBAAoBC;IAQ/BC,YAAYC,KAAwB,EAAEC,OAAoB,CAAC,CAAC,CAAE;QAC5D,MAAMC,MACJ,OAAOF,UAAU,YAAY,SAASA,QAAQA,MAAME,GAAG,GAAGC,OAAOH;YAEnET,4KAAAA,EAAYW;QAEZ,2DAA2D;QAC3D,oDAAoD;QACpD,sDAAsD;QACtD,oCAAoC;QACpC,IAAIE,QAAQC,GAAG,CAACC,YAAY,KAAK,OAAQ;YACvC,IAAIL,KAAKM,IAAI,IAAIN,KAAKO,MAAM,KAAK,QAAQ;gBACvCP,KAAKO,MAAM,GAAG;YAChB;QACF;QAEA,IAAIR,iBAAiBF,SAAS,KAAK,CAACE,OAAOC;aACtC,KAAK,CAACC,KAAKD;QAEhB,MAAMQ,UAAU,IAAIpB,8KAAAA,CAAQa,KAAK;YAC/BQ,aAASpB,0LAAAA,EAA0B,IAAI,CAACoB,OAAO;YAC/CC,YAAYV,KAAKU,UAAU;QAC7B;QACA,IAAI,CAAChB,UAAU,GAAG;YAChBiB,SAAS,IAAIlB,mMAAAA,CAAe,IAAI,CAACgB,OAAO;YACxCD;YACAP,KAAKE,QAAQC,GAAG,CAACQ,0BACbX,QAD+C,kBAE/CO,QAAQK,QAAQ;QACtB;IACF;IAEA,CAAClB,OAAOmB,GAAG,CAAC,+BAA+B,GAAG;QAC5C,OAAO;YACLH,SAAS,IAAI,CAACA,OAAO;YACrBH,SAAS,IAAI,CAACA,OAAO;YACrBP,KAAK,IAAI,CAACA,GAAG;YACb,kCAAkC;YAClCc,UAAU,IAAI,CAACA,QAAQ;YACvBC,OAAO,IAAI,CAACA,KAAK;YACjBC,aAAa,IAAI,CAACA,WAAW;YAC7BC,aAAa,IAAI,CAACA,WAAW;YAC7BT,SAASU,OAAOC,WAAW,CAAC,IAAI,CAACX,OAAO;YACxCY,WAAW,IAAI,CAACA,SAAS;YACzBC,WAAW,IAAI,CAACA,SAAS;YACzBC,QAAQ,IAAI,CAACA,MAAM;YACnBC,MAAM,IAAI,CAACA,IAAI;YACfC,UAAU,IAAI,CAACA,QAAQ;YACvBC,UAAU,IAAI,CAACA,QAAQ;YACvBC,gBAAgB,IAAI,CAACA,cAAc;YACnCC,QAAQ,IAAI,CAACA,MAAM;QACrB;IACF;IAEA,IAAWjB,UAAU;QACnB,OAAO,IAAI,CAACjB,UAAU,CAACiB,OAAO;IAChC;IAEA,IAAWH,UAAU;QACnB,OAAO,IAAI,CAACd,UAAU,CAACc,OAAO;IAChC;IAEA;;;;GAIC,GACD,IAAWqB,OAAO;QAChB,MAAM,IAAIrC,iLAAAA;IACZ;IAEA;;;;GAIC,GACD,IAAWsC,KAAK;QACd,MAAM,IAAIvC,+KAAAA;IACZ;IAEA,IAAWU,MAAM;QACf,OAAO,IAAI,CAACP,UAAU,CAACO,GAAG;IAC5B;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17679</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/base-http/helpers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { BaseNextRequest, BaseNextResponse } from './'</span><span class="s3">\n</span><span class="s1">import type { NodeNextRequest, NodeNextResponse } from './node'</span><span class="s3">\n</span><span class="s1">import type { WebNextRequest, WebNextResponse } from './web'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This file provides some helpers that should be used in conjunction with</span><span class="s3">\n </span><span class="s1">* explicit environment checks. When combined with the environment checks, it</span><span class="s3">\n </span><span class="s1">* will ensure that the correct typings are used as well as enable code</span><span class="s3">\n </span><span class="s1">* elimination.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Type guard to determine if a request is a WebNextRequest. This does not</span><span class="s3">\n </span><span class="s1">* actually check the type of the request, but rather the runtime environment.</span><span class="s3">\n </span><span class="s1">* It's expected that when the runtime environment is the edge runtime, that any</span><span class="s3">\n </span><span class="s1">* base request is a WebNextRequest.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const isWebNextRequest = (req: BaseNextRequest): req is WebNextRequest =&gt;</span><span class="s3">\n  </span><span class="s1">process.env.NEXT_RUNTIME === 'edge'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Type guard to determine if a response is a WebNextResponse. This does not</span><span class="s3">\n </span><span class="s1">* actually check the type of the response, but rather the runtime environment.</span><span class="s3">\n </span><span class="s1">* It's expected that when the runtime environment is the edge runtime, that any</span><span class="s3">\n </span><span class="s1">* base response is a WebNextResponse.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const isWebNextResponse = (</span><span class="s3">\n  </span><span class="s1">res: BaseNextResponse</span><span class="s3">\n</span><span class="s1">): res is WebNextResponse =&gt; process.env.NEXT_RUNTIME === 'edge'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Type guard to determine if a request is a NodeNextRequest. This does not</span><span class="s3">\n </span><span class="s1">* actually check the type of the request, but rather the runtime environment.</span><span class="s3">\n </span><span class="s1">* It's expected that when the runtime environment is the node runtime, that any</span><span class="s3">\n </span><span class="s1">* base request is a NodeNextRequest.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const isNodeNextRequest = (</span><span class="s3">\n  </span><span class="s1">req: BaseNextRequest</span><span class="s3">\n</span><span class="s1">): req is NodeNextRequest =&gt; process.env.NEXT_RUNTIME !== 'edge'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Type guard to determine if a response is a NodeNextResponse. This does not</span><span class="s3">\n </span><span class="s1">* actually check the type of the response, but rather the runtime environment.</span><span class="s3">\n </span><span class="s1">* It's expected that when the runtime environment is the node runtime, that any</span><span class="s3">\n </span><span class="s1">* base response is a NodeNextResponse.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const isNodeNextResponse = (</span><span class="s3">\n  </span><span class="s1">res: BaseNextResponse</span><span class="s3">\n</span><span class="s1">): res is NodeNextResponse =&gt; process.env.NEXT_RUNTIME !== 'edge'</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isWebNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;isWebNextResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeNextResponse&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAIA;;;;;CAKC,GAED;;;;;CAKC,GACD;;;;;;;;;;AAAO,MAAMA,mBAAmB,CAACC,MAC/BC,QAAQC,GAAG,CAACC,YAAY,uBAAK,OAAM;AAQ9B,MAAMC,oBAAoB,CAC/BC,MAC2BJ,QAAQC,GAAG,CAACC,YAAY,uBAAK,OAAM;AAQzD,MAAMG,oBAAoB,CAC/BN,MAC2BC,QAAQC,GAAG,CAACC,YAAY,uBAAK,OAAM;AAQzD,MAAMI,qBAAqB,CAChCF,MAC4BJ,QAAQC,GAAG,CAACC,YAAY,uBAAK,OAAM&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17707</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/web/spec-extension/adapters/next-request.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { BaseNextRequest } from '../../../base-http'</span><span class="s3">\n</span><span class="s1">import type { NodeNextRequest } from '../../../base-http/node'</span><span class="s3">\n</span><span class="s1">import type { WebNextRequest } from '../../../base-http/web'</span><span class="s3">\n</span><span class="s1">import type { Writable } from 'node:stream'</span><span class="s3">\n\n</span><span class="s1">import { getRequestMeta } from '../../../request-meta'</span><span class="s3">\n</span><span class="s1">import { fromNodeOutgoingHttpHeaders } from '../../utils'</span><span class="s3">\n</span><span class="s1">import { NextRequest } from '../request'</span><span class="s3">\n</span><span class="s1">import { isNodeNextRequest, isWebNextRequest } from '../../../base-http/helpers'</span><span class="s3">\n\n</span><span class="s1">export const ResponseAbortedName = 'ResponseAborted'</span><span class="s3">\n</span><span class="s1">export class ResponseAborted extends Error {</span><span class="s3">\n  </span><span class="s1">public readonly name = ResponseAbortedName</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates an AbortController tied to the closing of a ServerResponse (or other</span><span class="s3">\n </span><span class="s1">* appropriate Writable).</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* If the `close` event is fired before the `finish` event, then we'll send the</span><span class="s3">\n </span><span class="s1">* `abort` signal.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createAbortController(response: Writable): AbortController {</span><span class="s3">\n  </span><span class="s1">const controller = new AbortController()</span><span class="s3">\n\n  </span><span class="s1">// If `finish` fires first, then `res.end()` has been called and the close is</span><span class="s3">\n  </span><span class="s1">// just us finishing the stream on our side. If `close` fires first, then we</span><span class="s3">\n  </span><span class="s1">// know the client disconnected before we finished.</span><span class="s3">\n  </span><span class="s1">response.once('close', () =&gt; {</span><span class="s3">\n    </span><span class="s1">if (response.writableFinished) return</span><span class="s3">\n\n    </span><span class="s1">controller.abort(new ResponseAborted())</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return controller</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates an AbortSignal tied to the closing of a ServerResponse (or other</span><span class="s3">\n </span><span class="s1">* appropriate Writable).</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This cannot be done with the request (IncomingMessage or Readable) because</span><span class="s3">\n </span><span class="s1">* the `abort` event will not fire if to data has been fully read (because that</span><span class="s3">\n </span><span class="s1">* will </span><span class="s3">\&quot;</span><span class="s1">close</span><span class="s3">\&quot; </span><span class="s1">the readable stream and nothing fires after that).</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function signalFromNodeResponse(response: Writable): AbortSignal {</span><span class="s3">\n  </span><span class="s1">const { errored, destroyed } = response</span><span class="s3">\n  </span><span class="s1">if (errored || destroyed) {</span><span class="s3">\n    </span><span class="s1">return AbortSignal.abort(errored ?? new ResponseAborted())</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const { signal } = createAbortController(response)</span><span class="s3">\n  </span><span class="s1">return signal</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class NextRequestAdapter {</span><span class="s3">\n  </span><span class="s1">public static fromBaseNextRequest(</span><span class="s3">\n    </span><span class="s1">request: BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">signal: AbortSignal</span><span class="s3">\n  </span><span class="s1">): NextRequest {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">// The type check here ensures that `req` is correctly typed, and the</span><span class="s3">\n      </span><span class="s1">// environment variable check provides dead code elimination.</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_RUNTIME === 'edge' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">isWebNextRequest(request)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return NextRequestAdapter.fromWebNextRequest(request)</span><span class="s3">\n    </span><span class="s1">} else if (</span><span class="s3">\n      </span><span class="s1">// The type check here ensures that `req` is correctly typed, and the</span><span class="s3">\n      </span><span class="s1">// environment variable check provides dead code elimination.</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_RUNTIME !== 'edge' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">isNodeNextRequest(request)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">return NextRequestAdapter.fromNodeNextRequest(request, signal)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">throw new Error('Invariant: Unsupported NextRequest type')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public static fromNodeNextRequest(</span><span class="s3">\n    </span><span class="s1">request: NodeNextRequest,</span><span class="s3">\n    </span><span class="s1">signal: AbortSignal</span><span class="s3">\n  </span><span class="s1">): NextRequest {</span><span class="s3">\n    </span><span class="s1">// HEAD and GET requests can not have a body.</span><span class="s3">\n    </span><span class="s1">let body: BodyInit | null = null</span><span class="s3">\n    </span><span class="s1">if (request.method !== 'GET' &amp;&amp; request.method !== 'HEAD' &amp;&amp; request.body) {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error - this is handled by undici, when streams/web land use it instead</span><span class="s3">\n      </span><span class="s1">body = request.body</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let url: URL</span><span class="s3">\n    </span><span class="s1">if (request.url.startsWith('http')) {</span><span class="s3">\n      </span><span class="s1">url = new URL(request.url)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Grab the full URL from the request metadata.</span><span class="s3">\n      </span><span class="s1">const base = getRequestMeta(request, 'initURL')</span><span class="s3">\n      </span><span class="s1">if (!base || !base.startsWith('http')) {</span><span class="s3">\n        </span><span class="s1">// Because the URL construction relies on the fact that the URL provided</span><span class="s3">\n        </span><span class="s1">// is absolute, we need to provide a base URL. We can't use the request</span><span class="s3">\n        </span><span class="s1">// URL because it's relative, so we use a dummy URL instead.</span><span class="s3">\n        </span><span class="s1">url = new URL(request.url, 'http://n')</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">url = new URL(request.url, base)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return new NextRequest(url, {</span><span class="s3">\n      </span><span class="s1">method: request.method,</span><span class="s3">\n      </span><span class="s1">headers: fromNodeOutgoingHttpHeaders(request.headers),</span><span class="s3">\n      </span><span class="s1">duplex: 'half',</span><span class="s3">\n      </span><span class="s1">signal,</span><span class="s3">\n      </span><span class="s1">// geo</span><span class="s3">\n      </span><span class="s1">// ip</span><span class="s3">\n      </span><span class="s1">// nextConfig</span><span class="s3">\n\n      </span><span class="s1">// body can not be passed if request was aborted</span><span class="s3">\n      </span><span class="s1">// or we get a Request body was disturbed error</span><span class="s3">\n      </span><span class="s1">...(signal.aborted</span><span class="s3">\n        </span><span class="s1">? {}</span><span class="s3">\n        </span><span class="s1">: {</span><span class="s3">\n            </span><span class="s1">body,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public static fromWebNextRequest(request: WebNextRequest): NextRequest {</span><span class="s3">\n    </span><span class="s1">// HEAD and GET requests can not have a body.</span><span class="s3">\n    </span><span class="s1">let body: ReadableStream | null = null</span><span class="s3">\n    </span><span class="s1">if (request.method !== 'GET' &amp;&amp; request.method !== 'HEAD') {</span><span class="s3">\n      </span><span class="s1">body = request.body</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return new NextRequest(request.url, {</span><span class="s3">\n      </span><span class="s1">method: request.method,</span><span class="s3">\n      </span><span class="s1">headers: fromNodeOutgoingHttpHeaders(request.headers),</span><span class="s3">\n      </span><span class="s1">duplex: 'half',</span><span class="s3">\n      </span><span class="s1">signal: request.request.signal,</span><span class="s3">\n      </span><span class="s1">// geo</span><span class="s3">\n      </span><span class="s1">// ip</span><span class="s3">\n      </span><span class="s1">// nextConfig</span><span class="s3">\n\n      </span><span class="s1">// body can not be passed if request was aborted</span><span class="s3">\n      </span><span class="s1">// or we get a Request body was disturbed error</span><span class="s3">\n      </span><span class="s1">...(request.request.signal.aborted</span><span class="s3">\n        </span><span class="s1">? {}</span><span class="s3">\n        </span><span class="s1">: {</span><span class="s3">\n            </span><span class="s1">body,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;fromNodeOutgoingHttpHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;NextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;isWebNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;ResponseAbortedName&quot;</span><span class="s0">,</span><span class="s1">&quot;ResponseAborted&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;createAbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;AbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;once&quot;</span><span class="s0">,</span><span class="s1">&quot;writableFinished&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;signalFromNodeResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;errored&quot;</span><span class="s0">,</span><span class="s1">&quot;destroyed&quot;</span><span class="s0">,</span><span class="s1">&quot;AbortSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;NextRequestAdapter&quot;</span><span class="s0">,</span><span class="s1">&quot;fromBaseNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;fromWebNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;fromNodeNextRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;duplex&quot;</span><span class="s0">,</span><span class="s1">&quot;aborted&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17831</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/client-component-renderer-logger.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { AppPageModule } from './route-modules/app-page/module'</span><span class="s3">\n\n</span><span class="s1">// Combined load times for loading client components</span><span class="s3">\n</span><span class="s1">let clientComponentLoadStart = 0</span><span class="s3">\n</span><span class="s1">let clientComponentLoadTimes = 0</span><span class="s3">\n</span><span class="s1">let clientComponentLoadCount = 0</span><span class="s3">\n\n</span><span class="s1">export function wrapClientComponentLoader(</span><span class="s3">\n  </span><span class="s1">ComponentMod: AppPageModule</span><span class="s3">\n</span><span class="s1">): AppPageModule['__next_app__'] {</span><span class="s3">\n  </span><span class="s1">if (!('performance' in globalThis)) {</span><span class="s3">\n    </span><span class="s1">return ComponentMod.__next_app__</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">require: (...args) =&gt; {</span><span class="s3">\n      </span><span class="s1">const startTime = performance.now()</span><span class="s3">\n\n      </span><span class="s1">if (clientComponentLoadStart === 0) {</span><span class="s3">\n        </span><span class="s1">clientComponentLoadStart = startTime</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">clientComponentLoadCount += 1</span><span class="s3">\n        </span><span class="s1">return ComponentMod.__next_app__.require(...args)</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">clientComponentLoadTimes += performance.now() - startTime</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">loadChunk: (...args) =&gt; {</span><span class="s3">\n      </span><span class="s1">const startTime = performance.now()</span><span class="s3">\n      </span><span class="s1">const result = ComponentMod.__next_app__.loadChunk(...args)</span><span class="s3">\n      </span><span class="s1">// Avoid wrapping `loadChunk`'s result in an extra promise in case something like React depends on its identity.</span><span class="s3">\n      </span><span class="s1">// We only need to know when it's settled.</span><span class="s3">\n      </span><span class="s1">result.finally(() =&gt; {</span><span class="s3">\n        </span><span class="s1">clientComponentLoadTimes += performance.now() - startTime</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">return result</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getClientComponentLoaderMetrics(</span><span class="s3">\n  </span><span class="s1">options: { reset?: boolean } = {}</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const metrics =</span><span class="s3">\n    </span><span class="s1">clientComponentLoadStart === 0</span><span class="s3">\n      </span><span class="s1">? undefined</span><span class="s3">\n      </span><span class="s1">: {</span><span class="s3">\n          </span><span class="s1">clientComponentLoadStart,</span><span class="s3">\n          </span><span class="s1">clientComponentLoadTimes,</span><span class="s3">\n          </span><span class="s1">clientComponentLoadCount,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (options.reset) {</span><span class="s3">\n    </span><span class="s1">clientComponentLoadStart = 0</span><span class="s3">\n    </span><span class="s1">clientComponentLoadTimes = 0</span><span class="s3">\n    </span><span class="s1">clientComponentLoadCount = 0</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return metrics</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;clientComponentLoadStart&quot;</span><span class="s0">,</span><span class="s1">&quot;clientComponentLoadTimes&quot;</span><span class="s0">,</span><span class="s1">&quot;clientComponentLoadCount&quot;</span><span class="s0">,</span><span class="s1">&quot;wrapClientComponentLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;ComponentMod&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;__next_app__&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;startTime&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;loadChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;finally&quot;</span><span class="s0">,</span><span class="s1">&quot;getClientComponentLoaderMetrics&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;metrics&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;reset&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAEA,oDAAoD;;;;;;;AACpD,IAAIA,2BAA2B;AAC/B,IAAIC,2BAA2B;AAC/B,IAAIC,2BAA2B;AAExB,SAASC,0BACdC,YAA2B;IAE3B,IAAI,CAAE,CAAA,iBAAiBC,UAAS,GAAI;QAClC,OAAOD,aAAaE,YAAY;IAClC;IAEA,OAAO;QACLC,SAAS,CAAC,GAAGC;YACX,MAAMC,YAAYC,YAAYC,GAAG;YAEjC,IAAIX,6BAA6B,GAAG;gBAClCA,2BAA2BS;YAC7B;YAEA,IAAI;gBACFP,4BAA4B;gBAC5B,OAAOE,aAAaE,YAAY,CAACC,OAAO,IAAIC;YAC9C,SAAU;gBACRP,4BAA4BS,YAAYC,GAAG,KAAKF;YAClD;QACF;QACAG,WAAW,CAAC,GAAGJ;YACb,MAAMC,YAAYC,YAAYC,GAAG;YACjC,MAAME,SAAST,aAAaE,YAAY,CAACM,SAAS,IAAIJ;YACtD,gHAAgH;YAChH,0CAA0C;YAC1CK,OAAOC,OAAO,CAAC;gBACbb,4BAA4BS,YAAYC,GAAG,KAAKF;YAClD;YACA,OAAOI;QACT;IACF;AACF;AAEO,SAASE,gCACdC,UAA+B,CAAC,CAAC;IAEjC,MAAMC,UACJjB,6BAA6B,IACzBkB,YACA;QACElB;QACAC;QACAC;IACF;IAEN,IAAIc,QAAQG,KAAK,EAAE;QACjBnB,2BAA2B;QAC3BC,2BAA2B;QAC3BC,2BAA2B;IAC7B;IAEA,OAAOe;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">17887</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/pipe-readable.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ServerResponse } from 'node:http'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ResponseAbortedName,</span><span class="s3">\n  </span><span class="s1">createAbortController,</span><span class="s3">\n</span><span class="s1">} from './web/spec-extension/adapters/next-request'</span><span class="s3">\n</span><span class="s1">import { DetachedPromise } from '../lib/detached-promise'</span><span class="s3">\n</span><span class="s1">import { getTracer } from './lib/trace/tracer'</span><span class="s3">\n</span><span class="s1">import { NextNodeServerSpan } from './lib/trace/constants'</span><span class="s3">\n</span><span class="s1">import { getClientComponentLoaderMetrics } from './client-component-renderer-logger'</span><span class="s3">\n\n</span><span class="s1">export function isAbortError(e: any): e is Error &amp; { name: 'AbortError' } {</span><span class="s3">\n  </span><span class="s1">return e?.name === 'AbortError' || e?.name === ResponseAbortedName</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createWriterFromResponse(</span><span class="s3">\n  </span><span class="s1">res: ServerResponse,</span><span class="s3">\n  </span><span class="s1">waitUntilForEnd?: Promise&lt;unknown&gt;</span><span class="s3">\n</span><span class="s1">): WritableStream&lt;Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">let started = false</span><span class="s3">\n\n  </span><span class="s1">// Create a promise that will resolve once the response has drained. See</span><span class="s3">\n  </span><span class="s1">// https://nodejs.org/api/stream.html#stream_event_drain</span><span class="s3">\n  </span><span class="s1">let drained = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n  </span><span class="s1">function onDrain() {</span><span class="s3">\n    </span><span class="s1">drained.resolve()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">res.on('drain', onDrain)</span><span class="s3">\n\n  </span><span class="s1">// If the finish event fires, it means we shouldn't block and wait for the</span><span class="s3">\n  </span><span class="s1">// drain event.</span><span class="s3">\n  </span><span class="s1">res.once('close', () =&gt; {</span><span class="s3">\n    </span><span class="s1">res.off('drain', onDrain)</span><span class="s3">\n    </span><span class="s1">drained.resolve()</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// Create a promise that will resolve once the response has finished. See</span><span class="s3">\n  </span><span class="s1">// https://nodejs.org/api/http.html#event-finish_1</span><span class="s3">\n  </span><span class="s1">const finished = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n  </span><span class="s1">res.once('finish', () =&gt; {</span><span class="s3">\n    </span><span class="s1">finished.resolve()</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// Create a writable stream that will write to the response.</span><span class="s3">\n  </span><span class="s1">return new WritableStream&lt;Uint8Array&gt;({</span><span class="s3">\n    </span><span class="s1">write: async (chunk) =&gt; {</span><span class="s3">\n      </span><span class="s1">// You'd think we'd want to use `start` instead of placing this in `write`</span><span class="s3">\n      </span><span class="s1">// but this ensures that we don't actually flush the headers until we've</span><span class="s3">\n      </span><span class="s1">// started writing chunks.</span><span class="s3">\n      </span><span class="s1">if (!started) {</span><span class="s3">\n        </span><span class="s1">started = true</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">'performance' in globalThis &amp;&amp;</span><span class="s3">\n          </span><span class="s1">process.env.NEXT_OTEL_PERFORMANCE_PREFIX</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">const metrics = getClientComponentLoaderMetrics()</span><span class="s3">\n          </span><span class="s1">if (metrics) {</span><span class="s3">\n            </span><span class="s1">performance.measure(</span><span class="s3">\n              </span><span class="s1">`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">start: metrics.clientComponentLoadStart,</span><span class="s3">\n                </span><span class="s1">end:</span><span class="s3">\n                  </span><span class="s1">metrics.clientComponentLoadStart +</span><span class="s3">\n                  </span><span class="s1">metrics.clientComponentLoadTimes,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">res.flushHeaders()</span><span class="s3">\n        </span><span class="s1">getTracer().trace(</span><span class="s3">\n          </span><span class="s1">NextNodeServerSpan.startResponse,</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">spanName: 'start response',</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">() =&gt; undefined</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const ok = res.write(chunk)</span><span class="s3">\n\n        </span><span class="s1">// Added by the `compression` middleware, this is a function that will</span><span class="s3">\n        </span><span class="s1">// flush the partially-compressed response to the client.</span><span class="s3">\n        </span><span class="s1">if ('flush' in res &amp;&amp; typeof res.flush === 'function') {</span><span class="s3">\n          </span><span class="s1">res.flush()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// If the write returns false, it means there's some backpressure, so</span><span class="s3">\n        </span><span class="s1">// wait until it's streamed before continuing.</span><span class="s3">\n        </span><span class="s1">if (!ok) {</span><span class="s3">\n          </span><span class="s1">await drained.promise</span><span class="s3">\n\n          </span><span class="s1">// Reset the drained promise so that we can wait for the next drain event.</span><span class="s3">\n          </span><span class="s1">drained = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">} catch (err) {</span><span class="s3">\n        </span><span class="s1">res.end()</span><span class="s3">\n        </span><span class="s1">throw new Error('failed to write chunk to response', { cause: err })</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">abort: (err) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (res.writableFinished) return</span><span class="s3">\n\n      </span><span class="s1">res.destroy(err)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">close: async () =&gt; {</span><span class="s3">\n      </span><span class="s1">// if a waitUntil promise was passed, wait for it to resolve before</span><span class="s3">\n      </span><span class="s1">// ending the response.</span><span class="s3">\n      </span><span class="s1">if (waitUntilForEnd) {</span><span class="s3">\n        </span><span class="s1">await waitUntilForEnd</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (res.writableFinished) return</span><span class="s3">\n\n      </span><span class="s1">res.end()</span><span class="s3">\n      </span><span class="s1">return finished.promise</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function pipeToNodeResponse(</span><span class="s3">\n  </span><span class="s1">readable: ReadableStream&lt;Uint8Array&gt;,</span><span class="s3">\n  </span><span class="s1">res: ServerResponse,</span><span class="s3">\n  </span><span class="s1">waitUntilForEnd?: Promise&lt;unknown&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">// If the response has already errored, then just return now.</span><span class="s3">\n    </span><span class="s1">const { errored, destroyed } = res</span><span class="s3">\n    </span><span class="s1">if (errored || destroyed) return</span><span class="s3">\n\n    </span><span class="s1">// Create a new AbortController so that we can abort the readable if the</span><span class="s3">\n    </span><span class="s1">// client disconnects.</span><span class="s3">\n    </span><span class="s1">const controller = createAbortController(res)</span><span class="s3">\n\n    </span><span class="s1">const writer = createWriterFromResponse(res, waitUntilForEnd)</span><span class="s3">\n\n    </span><span class="s1">await readable.pipeTo(writer, { signal: controller.signal })</span><span class="s3">\n  </span><span class="s1">} catch (err: any) {</span><span class="s3">\n    </span><span class="s1">// If this isn't related to an abort error, re-throw it.</span><span class="s3">\n    </span><span class="s1">if (isAbortError(err)) return</span><span class="s3">\n\n    </span><span class="s1">throw new Error('failed to pipe response', { cause: err })</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ResponseAbortedName&quot;</span><span class="s0">,</span><span class="s1">&quot;createAbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;NextNodeServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getClientComponentLoaderMetrics&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbortError&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;createWriterFromResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntilForEnd&quot;</span><span class="s0">,</span><span class="s1">&quot;started&quot;</span><span class="s0">,</span><span class="s1">&quot;drained&quot;</span><span class="s0">,</span><span class="s1">&quot;onDrain&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;once&quot;</span><span class="s0">,</span><span class="s1">&quot;off&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;WritableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;write&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_OTEL_PERFORMANCE_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;metrics&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;measure&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;clientComponentLoadStart&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;clientComponentLoadTimes&quot;</span><span class="s0">,</span><span class="s1">&quot;flushHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;startResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;ok&quot;</span><span class="s0">,</span><span class="s1">&quot;flush&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;writableFinished&quot;</span><span class="s0">,</span><span class="s1">&quot;destroy&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeToNodeResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;readable&quot;</span><span class="s0">,</span><span class="s1">&quot;errored&quot;</span><span class="s0">,</span><span class="s1">&quot;destroyed&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;writer&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeTo&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18018</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/redirect-status-code.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export enum RedirectStatusCode {</span><span class="s3">\n  </span><span class="s1">SeeOther = 303,</span><span class="s3">\n  </span><span class="s1">TemporaryRedirect = 307,</span><span class="s3">\n  </span><span class="s1">PermanentRedirect = 308,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RedirectStatusCode&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAO,IAAKA,qBAAAA,WAAAA,GAAAA,SAAAA,kBAAAA;;;;WAAAA;MAIX&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18032</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/redirect-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { RedirectStatusCode } from './redirect-status-code'</span><span class="s3">\n\n</span><span class="s1">export const REDIRECT_ERROR_CODE = 'NEXT_REDIRECT'</span><span class="s3">\n\n</span><span class="s1">export enum RedirectType {</span><span class="s3">\n  </span><span class="s1">push = 'push',</span><span class="s3">\n  </span><span class="s1">replace = 'replace',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type RedirectError = Error &amp; {</span><span class="s3">\n  </span><span class="s1">digest: `${typeof REDIRECT_ERROR_CODE};${RedirectType};${string};${RedirectStatusCode};`</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks an error to determine if it's an error generated by the</span><span class="s3">\n </span><span class="s1">* `redirect(url)` helper.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param error the error that may reference a redirect error</span><span class="s3">\n </span><span class="s1">* @returns true if the error is a redirect error</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isRedirectError(error: unknown): error is RedirectError {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof error !== 'object' ||</span><span class="s3">\n    </span><span class="s1">error === null ||</span><span class="s3">\n    </span><span class="s1">!('digest' in error) ||</span><span class="s3">\n    </span><span class="s1">typeof error.digest !== 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const digest = error.digest.split(';')</span><span class="s3">\n  </span><span class="s1">const [errorCode, type] = digest</span><span class="s3">\n  </span><span class="s1">const destination = digest.slice(2, -2).join(';')</span><span class="s3">\n  </span><span class="s1">const status = digest.at(-2)</span><span class="s3">\n\n  </span><span class="s1">const statusCode = Number(status)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">errorCode === REDIRECT_ERROR_CODE &amp;&amp;</span><span class="s3">\n    </span><span class="s1">(type === 'replace' || type === 'push') &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof destination === 'string' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!isNaN(statusCode) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">statusCode in RedirectStatusCode</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RedirectStatusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;REDIRECT_ERROR_CODE&quot;</span><span class="s0">,</span><span class="s1">&quot;RedirectType&quot;</span><span class="s0">,</span><span class="s1">&quot;isRedirectError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;errorCode&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;at&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;isNaN&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;AAAA,SAASA,kBAAkB,QAAQ,yBAAwB;;AAEpD,MAAMC,sBAAsB,gBAAe;AAE3C,IAAKC,eAAAA,WAAAA,GAAAA,SAAAA,YAAAA;;;WAAAA;MAGX;AAaM,SAASC,gBAAgBC,KAAc;IAC5C,IACE,OAAOA,UAAU,YACjBA,UAAU,QACV,CAAE,CAAA,YAAYA,KAAI,KAClB,OAAOA,MAAMC,MAAM,KAAK,UACxB;QACA,OAAO;IACT;IAEA,MAAMA,SAASD,MAAMC,MAAM,CAACC,KAAK,CAAC;IAClC,MAAM,CAACC,WAAWC,KAAK,GAAGH;IAC1B,MAAMI,cAAcJ,OAAOK,KAAK,CAAC,GAAG,CAAC,GAAGC,IAAI,CAAC;IAC7C,MAAMC,SAASP,OAAOQ,EAAE,CAAC,CAAC;IAE1B,MAAMC,aAAaC,OAAOH;IAE1B,OACEL,cAAcN,uBACbO,CAAAA,SAAS,aAAaA,SAAS,MAAK,KACrC,OAAOC,gBAAgB,YACvB,CAACO,MAAMF,eACPA,cAAcd,+MAAAA;AAElB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18063</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/client/components/is-next-router-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">isHTTPAccessFallbackError,</span><span class="s3">\n  </span><span class="s1">type HTTPAccessFallbackError,</span><span class="s3">\n</span><span class="s1">} from './http-access-fallback/http-access-fallback'</span><span class="s3">\n</span><span class="s1">import { isRedirectError, type RedirectError } from './redirect-error'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns true if the error is a navigation signal error. These errors are</span><span class="s3">\n </span><span class="s1">* thrown by user code to perform navigation operations and interrupt the React</span><span class="s3">\n </span><span class="s1">* render.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isNextRouterError(</span><span class="s3">\n  </span><span class="s1">error: unknown</span><span class="s3">\n</span><span class="s1">): error is RedirectError | HTTPAccessFallbackError {</span><span class="s3">\n  </span><span class="s1">return isRedirectError(error) || isHTTPAccessFallbackError(error)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isHTTPAccessFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;isRedirectError&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextRouterError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,SACEA,yBAAyB,QAEpB,8CAA6C;AACpD,SAASC,eAAe,QAA4B,mBAAkB;;;AAO/D,SAASC,kBACdC,KAAc;IAEd,WAAOF,mMAAAA,EAAgBE,cAAUH,oPAAAA,EAA0BG;AAC7D&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18078</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/shared/lib/is-plain-object.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;export function getObjectClassLabel(value: any): string {</span><span class="s3">\n  </span><span class="s1">return Object.prototype.toString.call(value)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isPlainObject(value: any): boolean {</span><span class="s3">\n  </span><span class="s1">if (getObjectClassLabel(value) !== '[object Object]') {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const prototype = Object.getPrototypeOf(value)</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* this used to be previously:</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* `return prototype === null || prototype === Object.prototype`</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* but Edge Runtime expose Object from vm, being that kind of type-checking wrongly fail.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* It was changed to the current implementation since it's resilient to serialization.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">return prototype === null || prototype.hasOwnProperty('isPrototypeOf')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getObjectClassLabel&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;prototype&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;call&quot;</span><span class="s0">,</span><span class="s1">&quot;isPlainObject&quot;</span><span class="s0">,</span><span class="s1">&quot;getPrototypeOf&quot;</span><span class="s0">,</span><span class="s1">&quot;hasOwnProperty&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAO,SAASA,oBAAoBC,KAAU;IAC5C,OAAOC,OAAOC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ;AACxC;AAEO,SAASK,cAAcL,KAAU;IACtC,IAAID,oBAAoBC,WAAW,mBAAmB;QACpD,OAAO;IACT;IAEA,MAAME,YAAYD,OAAOK,cAAc,CAACN;IAExC;;;;;;;;GAQC,GACD,OAAOE,cAAc,QAAQA,UAAUK,cAAc,CAAC;AACxD&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18106</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/is-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { isPlainObject } from '../shared/lib/is-plain-object'</span><span class="s3">\n\n</span><span class="s1">// We allow some additional attached properties for Next.js errors</span><span class="s3">\n</span><span class="s1">export interface NextError extends Error {</span><span class="s3">\n  </span><span class="s1">type?: string</span><span class="s3">\n  </span><span class="s1">page?: string</span><span class="s3">\n  </span><span class="s1">code?: string | number</span><span class="s3">\n  </span><span class="s1">cancelled?: boolean</span><span class="s3">\n  </span><span class="s1">digest?: number</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks whether the given value is a NextError.</span><span class="s3">\n </span><span class="s1">* This can be used to print a more detailed error message with properties like `code` &amp; `digest`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export default function isError(err: unknown): err is NextError {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">typeof err === 'object' &amp;&amp; err !== null &amp;&amp; 'name' in err &amp;&amp; 'message' in err</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function safeStringify(obj: any) {</span><span class="s3">\n  </span><span class="s1">const seen = new WeakSet()</span><span class="s3">\n\n  </span><span class="s1">return JSON.stringify(obj, (_key, value) =&gt; {</span><span class="s3">\n    </span><span class="s1">// If value is an object and already seen, replace with </span><span class="s3">\&quot;</span><span class="s1">[Circular]</span><span class="s3">\&quot;\n    </span><span class="s1">if (typeof value === 'object' &amp;&amp; value !== null) {</span><span class="s3">\n      </span><span class="s1">if (seen.has(value)) {</span><span class="s3">\n        </span><span class="s1">return '[Circular]'</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">seen.add(value)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return value</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getProperError(err: unknown): Error {</span><span class="s3">\n  </span><span class="s1">if (isError(err)) {</span><span class="s3">\n    </span><span class="s1">return err</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n    </span><span class="s1">// provide better error for case where `throw undefined`</span><span class="s3">\n    </span><span class="s1">// is called in development</span><span class="s3">\n    </span><span class="s1">if (typeof err === 'undefined') {</span><span class="s3">\n      </span><span class="s1">return new Error(</span><span class="s3">\n        </span><span class="s1">'An undefined error was thrown, ' +</span><span class="s3">\n          </span><span class="s1">'see here for more info: https://nextjs.org/docs/messages/threw-undefined'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (err === null) {</span><span class="s3">\n      </span><span class="s1">return new Error(</span><span class="s3">\n        </span><span class="s1">'A null error was thrown, ' +</span><span class="s3">\n          </span><span class="s1">'see here for more info: https://nextjs.org/docs/messages/threw-undefined'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new Error(isPlainObject(err) ? safeStringify(err) : err + '')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isPlainObject&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;safeStringify&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;seen&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakSet&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;_key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;getProperError&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,SAASA,aAAa,QAAQ,gCAA+B;;AAe9C,SAASC,QAAQC,GAAY;IAC1C,OACE,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,UAAUA,OAAO,aAAaA;AAE7E;AAEA,SAASC,cAAcC,GAAQ;IAC7B,MAAMC,OAAO,IAAIC;IAEjB,OAAOC,KAAKC,SAAS,CAACJ,KAAK,CAACK,MAAMC;QAChC,oEAAoE;QACpE,IAAI,OAAOA,UAAU,YAAYA,UAAU,MAAM;YAC/C,IAAIL,KAAKM,GAAG,CAACD,QAAQ;gBACnB,OAAO;YACT;YACAL,KAAKO,GAAG,CAACF;QACX;QACA,OAAOA;IACT;AACF;AAEO,SAASG,eAAeX,GAAY;IACzC,IAAID,QAAQC,MAAM;QAChB,OAAOA;IACT;IAEA,IAAIY,QAAQC,GAAG,CAACC,QAAQ,KAAK,WAAe;QAC1C,wDAAwD;QACxD,2BAA2B;QAC3B,IAAI,OAAOd,QAAQ,aAAa;YAC9B,OAAO,OAAA,cAGN,CAHM,IAAIe,MACT,oCACE,6EAFG,qBAAA;uBAAA;4BAAA;8BAAA;YAGP;QACF;QAEA,IAAIf,QAAQ,MAAM;YAChB,OAAO,OAAA,cAGN,CAHM,IAAIe,MACT,8BACE,6EAFG,qBAAA;uBAAA;4BAAA;8BAAA;YAGP;QACF;IACF;IAEA,OAAO,OAAA,cAA6D,CAA7D,IAAIA,UAAMjB,8LAAAA,EAAcE,OAAOC,cAAcD,OAAOA,MAAM,KAA1D,qBAAA;eAAA;oBAAA;sBAAA;IAA4D;AACrE&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18162</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/error-telemetry-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const ERROR_CODE_DELIMITER = '@'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Augments the digest field of errors thrown in React Server Components (RSC) with an error code.</span><span class="s3">\n </span><span class="s1">* Since RSC errors can only be serialized through the digest field, this provides a way to include</span><span class="s3">\n </span><span class="s1">* an additional error code that can be extracted client-side via `extractNextErrorCode`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* The error code is appended to the digest string with a semicolon separator, allowing it to be</span><span class="s3">\n </span><span class="s1">* parsed out later while preserving the original digest value.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const createDigestWithErrorCode = (</span><span class="s3">\n  </span><span class="s1">thrownValue: unknown,</span><span class="s3">\n  </span><span class="s1">originalDigest: string</span><span class="s3">\n</span><span class="s1">): string =&gt; {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof thrownValue === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">thrownValue !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'__NEXT_ERROR_CODE' in thrownValue</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return `${originalDigest}${ERROR_CODE_DELIMITER}${thrownValue.__NEXT_ERROR_CODE}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return originalDigest</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const extractNextErrorCode = (error: unknown): string | undefined =&gt; {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof error === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'__NEXT_ERROR_CODE' in error &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof error.__NEXT_ERROR_CODE === 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return error.__NEXT_ERROR_CODE</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">typeof error === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'digest' in error &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof error.digest === 'string'</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const segments = error.digest.split(ERROR_CODE_DELIMITER)</span><span class="s3">\n    </span><span class="s1">const errorCode = segments.find((segment) =&gt; segment.startsWith('E'))</span><span class="s3">\n    </span><span class="s1">return errorCode</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ERROR_CODE_DELIMITER&quot;</span><span class="s0">,</span><span class="s1">&quot;createDigestWithErrorCode&quot;</span><span class="s0">,</span><span class="s1">&quot;thrownValue&quot;</span><span class="s0">,</span><span class="s1">&quot;originalDigest&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_ERROR_CODE&quot;</span><span class="s0">,</span><span class="s1">&quot;extractNextErrorCode&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;errorCode&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,MAAMA,uBAAuB;AAUtB,MAAMC,4BAA4B,CACvCC,aACAC;IAEA,IACE,OAAOD,gBAAgB,YACvBA,gBAAgB,QAChB,uBAAuBA,aACvB;QACA,OAAO,GAAGC,iBAAiBH,uBAAuBE,YAAYE,iBAAiB,EAAE;IACnF;IACA,OAAOD;AACT,EAAC;AAEM,MAAME,uBAAuB,CAACC;IACnC,IACE,OAAOA,UAAU,YACjBA,UAAU,QACV,uBAAuBA,SACvB,OAAOA,MAAMF,iBAAiB,KAAK,UACnC;QACA,OAAOE,MAAMF,iBAAiB;IAChC;IAEA,IACE,OAAOE,UAAU,YACjBA,UAAU,QACV,YAAYA,SACZ,OAAOA,MAAMC,MAAM,KAAK,UACxB;QACA,MAAMC,WAAWF,MAAMC,MAAM,CAACE,KAAK,CAACT;QACpC,MAAMU,YAAYF,SAASG,IAAI,CAAC,CAACC,UAAYA,QAAQC,UAAU,CAAC;QAChE,OAAOH;IACT;IAEA,OAAOI;AACT,EAAC&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18190</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/react-large-shell-error.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// TODO: isWellKnownError -&gt; isNextInternalError</span><span class="s3">\n</span><span class="s1">// isReactLargeShellError -&gt; isWarning</span><span class="s3">\n</span><span class="s1">export function isReactLargeShellError(</span><span class="s3">\n  </span><span class="s1">error: unknown</span><span class="s3">\n</span><span class="s1">): error is Error &amp; { digest?: string } {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">typeof error === 'object' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error !== null &amp;&amp;</span><span class="s3">\n    </span><span class="s1">'message' in error &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof error.message === 'string' &amp;&amp;</span><span class="s3">\n    </span><span class="s1">error.message.startsWith('This rendered a large document (&gt;')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;isReactLargeShellError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,gDAAgD;AAChD,sCAAsC;;;;;AAC/B,SAASA,uBACdC,KAAc;IAEd,OACE,OAAOA,UAAU,YACjBA,UAAU,QACV,aAAaA,SACb,OAAOA,MAAMC,OAAO,KAAK,YACzBD,MAAMC,OAAO,CAACC,UAAU,CAAC;AAE7B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18203</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/create-error-handler.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ErrorInfo } from 'react'</span><span class="s3">\n\n</span><span class="s1">import stringHash from 'next/dist/compiled/string-hash'</span><span class="s3">\n</span><span class="s1">import { formatServerError } from '../../lib/format-server-error'</span><span class="s3">\n</span><span class="s1">import { SpanStatusCode, getTracer } from '../lib/trace/tracer'</span><span class="s3">\n</span><span class="s1">import { isAbortError } from '../pipe-readable'</span><span class="s3">\n</span><span class="s1">import { isBailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'</span><span class="s3">\n</span><span class="s1">import { isDynamicServerError } from '../../client/components/hooks-server-context'</span><span class="s3">\n</span><span class="s1">import { isNextRouterError } from '../../client/components/is-next-router-error'</span><span class="s3">\n</span><span class="s1">import { isPrerenderInterruptedError } from './dynamic-rendering'</span><span class="s3">\n</span><span class="s1">import { getProperError } from '../../lib/is-error'</span><span class="s3">\n</span><span class="s1">import { createDigestWithErrorCode } from '../../lib/error-telemetry-utils'</span><span class="s3">\n</span><span class="s1">import { isReactLargeShellError } from './react-large-shell-error'</span><span class="s3">\n\n</span><span class="s1">declare global {</span><span class="s3">\n  </span><span class="s1">var __next_log_error__: undefined | ((err: unknown) =&gt; void)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type RSCErrorHandler = (err: unknown) =&gt; string | undefined</span><span class="s3">\n</span><span class="s1">type SSRErrorHandler = (</span><span class="s3">\n  </span><span class="s1">err: unknown,</span><span class="s3">\n  </span><span class="s1">errorInfo?: ErrorInfo</span><span class="s3">\n</span><span class="s1">) =&gt; string | undefined</span><span class="s3">\n\n</span><span class="s1">export type DigestedError = Error &amp; { digest: string }</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns a digest for well-known Next.js errors, otherwise `undefined`. If a</span><span class="s3">\n </span><span class="s1">* digest is returned this also means that the error does not need to be</span><span class="s3">\n </span><span class="s1">* reported.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getDigestForWellKnownError(error: unknown): string | undefined {</span><span class="s3">\n  </span><span class="s1">// If we're bailing out to CSR, we don't need to log the error.</span><span class="s3">\n  </span><span class="s1">if (isBailoutToCSRError(error)) return error.digest</span><span class="s3">\n\n  </span><span class="s1">// If this is a navigation error, we don't need to log the error.</span><span class="s3">\n  </span><span class="s1">if (isNextRouterError(error)) return error.digest</span><span class="s3">\n\n  </span><span class="s1">// If this error occurs, we know that we should be stopping the static</span><span class="s3">\n  </span><span class="s1">// render. This is only thrown in static generation when PPR is not enabled,</span><span class="s3">\n  </span><span class="s1">// which causes the whole page to be marked as dynamic. We don't need to</span><span class="s3">\n  </span><span class="s1">// tell the user about this error, as it's not actionable.</span><span class="s3">\n  </span><span class="s1">if (isDynamicServerError(error)) return error.digest</span><span class="s3">\n\n  </span><span class="s1">// If this is a prerender interrupted error, we don't need to log the error.</span><span class="s3">\n  </span><span class="s1">if (isPrerenderInterruptedError(error)) return error.digest</span><span class="s3">\n\n  </span><span class="s1">return undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createFlightReactServerErrorHandler(</span><span class="s3">\n  </span><span class="s1">shouldFormatError: boolean,</span><span class="s3">\n  </span><span class="s1">onReactServerRenderError: (err: DigestedError) =&gt; void</span><span class="s3">\n</span><span class="s1">): RSCErrorHandler {</span><span class="s3">\n  </span><span class="s1">return (thrownValue: unknown) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (typeof thrownValue === 'string') {</span><span class="s3">\n      </span><span class="s1">// TODO-APP: look at using webcrypto instead. Requires a promise to be awaited.</span><span class="s3">\n      </span><span class="s1">return stringHash(thrownValue).toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If the response was closed, we don't need to log the error.</span><span class="s3">\n    </span><span class="s1">if (isAbortError(thrownValue)) return</span><span class="s3">\n\n    </span><span class="s1">const digest = getDigestForWellKnownError(thrownValue)</span><span class="s3">\n\n    </span><span class="s1">if (digest) {</span><span class="s3">\n      </span><span class="s1">return digest</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isReactLargeShellError(thrownValue)) {</span><span class="s3">\n      </span><span class="s1">// TODO: Aggregate</span><span class="s3">\n      </span><span class="s1">console.error(thrownValue)</span><span class="s3">\n      </span><span class="s1">return undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const err = getProperError(thrownValue) as DigestedError</span><span class="s3">\n\n    </span><span class="s1">// If the error already has a digest, respect the original digest,</span><span class="s3">\n    </span><span class="s1">// so it won't get re-generated into another new error.</span><span class="s3">\n    </span><span class="s1">if (!err.digest) {</span><span class="s3">\n      </span><span class="s1">// TODO-APP: look at using webcrypto instead. Requires a promise to be awaited.</span><span class="s3">\n      </span><span class="s1">err.digest = stringHash(err.message + err.stack || '').toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Format server errors in development to add more helpful error messages</span><span class="s3">\n    </span><span class="s1">if (shouldFormatError) {</span><span class="s3">\n      </span><span class="s1">formatServerError(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Record exception in an active span, if available.</span><span class="s3">\n    </span><span class="s1">const span = getTracer().getActiveScopeSpan()</span><span class="s3">\n    </span><span class="s1">if (span) {</span><span class="s3">\n      </span><span class="s1">span.recordException(err)</span><span class="s3">\n      </span><span class="s1">span.setAttribute('error.type', err.name)</span><span class="s3">\n      </span><span class="s1">span.setStatus({</span><span class="s3">\n        </span><span class="s1">code: SpanStatusCode.ERROR,</span><span class="s3">\n        </span><span class="s1">message: err.message,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">onReactServerRenderError(err)</span><span class="s3">\n\n    </span><span class="s1">return createDigestWithErrorCode(thrownValue, err.digest)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createHTMLReactServerErrorHandler(</span><span class="s3">\n  </span><span class="s1">shouldFormatError: boolean,</span><span class="s3">\n  </span><span class="s1">isNextExport: boolean,</span><span class="s3">\n  </span><span class="s1">reactServerErrors: Map&lt;string, DigestedError&gt;,</span><span class="s3">\n  </span><span class="s1">silenceLogger: boolean,</span><span class="s3">\n  </span><span class="s1">onReactServerRenderError: undefined | ((err: DigestedError) =&gt; void)</span><span class="s3">\n</span><span class="s1">): RSCErrorHandler {</span><span class="s3">\n  </span><span class="s1">return (thrownValue: unknown) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (typeof thrownValue === 'string') {</span><span class="s3">\n      </span><span class="s1">// TODO-APP: look at using webcrypto instead. Requires a promise to be awaited.</span><span class="s3">\n      </span><span class="s1">return stringHash(thrownValue).toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If the response was closed, we don't need to log the error.</span><span class="s3">\n    </span><span class="s1">if (isAbortError(thrownValue)) return</span><span class="s3">\n\n    </span><span class="s1">const digest = getDigestForWellKnownError(thrownValue)</span><span class="s3">\n\n    </span><span class="s1">if (digest) {</span><span class="s3">\n      </span><span class="s1">return digest</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isReactLargeShellError(thrownValue)) {</span><span class="s3">\n      </span><span class="s1">// TODO: Aggregate</span><span class="s3">\n      </span><span class="s1">console.error(thrownValue)</span><span class="s3">\n      </span><span class="s1">return undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const err = getProperError(thrownValue) as DigestedError</span><span class="s3">\n\n    </span><span class="s1">// If the error already has a digest, respect the original digest,</span><span class="s3">\n    </span><span class="s1">// so it won't get re-generated into another new error.</span><span class="s3">\n    </span><span class="s1">if (!err.digest) {</span><span class="s3">\n      </span><span class="s1">// TODO-APP: look at using webcrypto instead. Requires a promise to be awaited.</span><span class="s3">\n      </span><span class="s1">err.digest = stringHash(err.message + (err.stack || '')).toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// @TODO by putting this here and not at the top it is possible that</span><span class="s3">\n    </span><span class="s1">// we don't error the build in places we actually expect to</span><span class="s3">\n    </span><span class="s1">if (!reactServerErrors.has(err.digest)) {</span><span class="s3">\n      </span><span class="s1">reactServerErrors.set(err.digest, err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Format server errors in development to add more helpful error messages</span><span class="s3">\n    </span><span class="s1">if (shouldFormatError) {</span><span class="s3">\n      </span><span class="s1">formatServerError(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Don't log the suppressed error during export</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!(</span><span class="s3">\n        </span><span class="s1">isNextExport &amp;&amp;</span><span class="s3">\n        </span><span class="s1">err?.message?.includes(</span><span class="s3">\n          </span><span class="s1">'The specific message is omitted in production builds to avoid leaking sensitive details.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// Record exception in an active span, if available.</span><span class="s3">\n      </span><span class="s1">const span = getTracer().getActiveScopeSpan()</span><span class="s3">\n      </span><span class="s1">if (span) {</span><span class="s3">\n        </span><span class="s1">span.recordException(err)</span><span class="s3">\n        </span><span class="s1">span.setAttribute('error.type', err.name)</span><span class="s3">\n        </span><span class="s1">span.setStatus({</span><span class="s3">\n          </span><span class="s1">code: SpanStatusCode.ERROR,</span><span class="s3">\n          </span><span class="s1">message: err.message,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (!silenceLogger) {</span><span class="s3">\n        </span><span class="s1">onReactServerRenderError?.(err)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return createDigestWithErrorCode(thrownValue, err.digest)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createHTMLErrorHandler(</span><span class="s3">\n  </span><span class="s1">shouldFormatError: boolean,</span><span class="s3">\n  </span><span class="s1">isNextExport: boolean,</span><span class="s3">\n  </span><span class="s1">reactServerErrors: Map&lt;string, DigestedError&gt;,</span><span class="s3">\n  </span><span class="s1">allCapturedErrors: Array&lt;unknown&gt;,</span><span class="s3">\n  </span><span class="s1">silenceLogger: boolean,</span><span class="s3">\n  </span><span class="s1">onHTMLRenderSSRError: (err: DigestedError, errorInfo?: ErrorInfo) =&gt; void</span><span class="s3">\n</span><span class="s1">): SSRErrorHandler {</span><span class="s3">\n  </span><span class="s1">return (thrownValue: unknown, errorInfo?: ErrorInfo) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (isReactLargeShellError(thrownValue)) {</span><span class="s3">\n      </span><span class="s1">// TODO: Aggregate</span><span class="s3">\n      </span><span class="s1">console.error(thrownValue)</span><span class="s3">\n      </span><span class="s1">return undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let isSSRError = true</span><span class="s3">\n\n    </span><span class="s1">allCapturedErrors.push(thrownValue)</span><span class="s3">\n\n    </span><span class="s1">// If the response was closed, we don't need to log the error.</span><span class="s3">\n    </span><span class="s1">if (isAbortError(thrownValue)) return</span><span class="s3">\n\n    </span><span class="s1">const digest = getDigestForWellKnownError(thrownValue)</span><span class="s3">\n\n    </span><span class="s1">if (digest) {</span><span class="s3">\n      </span><span class="s1">return digest</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const err = getProperError(thrownValue) as DigestedError</span><span class="s3">\n    </span><span class="s1">// If the error already has a digest, respect the original digest,</span><span class="s3">\n    </span><span class="s1">// so it won't get re-generated into another new error.</span><span class="s3">\n    </span><span class="s1">if (err.digest) {</span><span class="s3">\n      </span><span class="s1">if (reactServerErrors.has(err.digest)) {</span><span class="s3">\n        </span><span class="s1">// This error is likely an obfuscated error from react-server.</span><span class="s3">\n        </span><span class="s1">// We recover the original error here.</span><span class="s3">\n        </span><span class="s1">thrownValue = reactServerErrors.get(err.digest)</span><span class="s3">\n        </span><span class="s1">isSSRError = false</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// The error is not from react-server but has a digest</span><span class="s3">\n        </span><span class="s1">// from other means so we don't need to produce a new one</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">err.digest = stringHash(</span><span class="s3">\n        </span><span class="s1">err.message + (errorInfo?.componentStack || err.stack || '')</span><span class="s3">\n      </span><span class="s1">).toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Format server errors in development to add more helpful error messages</span><span class="s3">\n    </span><span class="s1">if (shouldFormatError) {</span><span class="s3">\n      </span><span class="s1">formatServerError(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Don't log the suppressed error during export</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!(</span><span class="s3">\n        </span><span class="s1">isNextExport &amp;&amp;</span><span class="s3">\n        </span><span class="s1">err?.message?.includes(</span><span class="s3">\n          </span><span class="s1">'The specific message is omitted in production builds to avoid leaking sensitive details.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// Record exception in an active span, if available.</span><span class="s3">\n      </span><span class="s1">const span = getTracer().getActiveScopeSpan()</span><span class="s3">\n      </span><span class="s1">if (span) {</span><span class="s3">\n        </span><span class="s1">span.recordException(err)</span><span class="s3">\n        </span><span class="s1">span.setAttribute('error.type', err.name)</span><span class="s3">\n        </span><span class="s1">span.setStatus({</span><span class="s3">\n          </span><span class="s1">code: SpanStatusCode.ERROR,</span><span class="s3">\n          </span><span class="s1">message: err.message,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">!silenceLogger &amp;&amp;</span><span class="s3">\n        </span><span class="s1">// HTML errors contain RSC errors as well, filter them out before reporting</span><span class="s3">\n        </span><span class="s1">isSSRError</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">onHTMLRenderSSRError(err, errorInfo)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return createDigestWithErrorCode(thrownValue, err.digest)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function isUserLandError(err: any): boolean {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">!isAbortError(err) &amp;&amp; !isBailoutToCSRError(err) &amp;&amp; !isNextRouterError(err)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;stringHash&quot;</span><span class="s0">,</span><span class="s1">&quot;formatServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;SpanStatusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbortError&quot;</span><span class="s0">,</span><span class="s1">&quot;isBailoutToCSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextRouterError&quot;</span><span class="s0">,</span><span class="s1">&quot;isPrerenderInterruptedError&quot;</span><span class="s0">,</span><span class="s1">&quot;getProperError&quot;</span><span class="s0">,</span><span class="s1">&quot;createDigestWithErrorCode&quot;</span><span class="s0">,</span><span class="s1">&quot;isReactLargeShellError&quot;</span><span class="s0">,</span><span class="s1">&quot;getDigestForWellKnownError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;createFlightReactServerErrorHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldFormatError&quot;</span><span class="s0">,</span><span class="s1">&quot;onReactServerRenderError&quot;</span><span class="s0">,</span><span class="s1">&quot;thrownValue&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;span&quot;</span><span class="s0">,</span><span class="s1">&quot;getActiveScopeSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;recordException&quot;</span><span class="s0">,</span><span class="s1">&quot;setAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;setStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;createHTMLReactServerErrorHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextExport&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;silenceLogger&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;createHTMLErrorHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;allCapturedErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;onHTMLRenderSSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;errorInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;isSSRError&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;componentStack&quot;</span><span class="s0">,</span><span class="s1">&quot;isUserLandError&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18409</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/source-maps.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { SourceMap } from 'module'</span><span class="s3">\n</span><span class="s1">import { LRUCache } from './lru-cache'</span><span class="s3">\n\n</span><span class="s1">function noSourceMap(): SourceMap | undefined {</span><span class="s3">\n  </span><span class="s1">return undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Edge runtime does not implement `module`</span><span class="s3">\n</span><span class="s1">const nativeFindSourceMap =</span><span class="s3">\n  </span><span class="s1">process.env.NEXT_RUNTIME === 'edge'</span><span class="s3">\n    </span><span class="s1">? noSourceMap</span><span class="s3">\n    </span><span class="s1">: (require('module') as typeof import('module')).findSourceMap</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* https://tc39.es/source-map/#index-map</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">interface IndexSourceMapSection {</span><span class="s3">\n  </span><span class="s1">offset: {</span><span class="s3">\n    </span><span class="s1">line: number</span><span class="s3">\n    </span><span class="s1">column: number</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">map: BasicSourceMapPayload</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// TODO(veil): Upstream types</span><span class="s3">\n</span><span class="s1">/** https://tc39.es/ecma426/#sec-index-source-map */</span><span class="s3">\n</span><span class="s1">interface IndexSourceMap {</span><span class="s3">\n  </span><span class="s1">version: number</span><span class="s3">\n  </span><span class="s1">file: string</span><span class="s3">\n  </span><span class="s1">sections: IndexSourceMapSection[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/** https://tc39.es/ecma426/#sec-source-map-format */</span><span class="s3">\n</span><span class="s1">export interface BasicSourceMapPayload {</span><span class="s3">\n  </span><span class="s1">version: number</span><span class="s3">\n  </span><span class="s1">// TODO: Move to https://github.com/jridgewell/sourcemaps which is actively maintained</span><span class="s3">\n  </span><span class="s1">/** WARNING: `file` is optional. */</span><span class="s3">\n  </span><span class="s1">file: string</span><span class="s3">\n  </span><span class="s1">sourceRoot?: string</span><span class="s3">\n  </span><span class="s1">// TODO: Move to https://github.com/jridgewell/sourcemaps which is actively maintained</span><span class="s3">\n  </span><span class="s1">/** WARNING: `sources[number]` can be `null`. */</span><span class="s3">\n  </span><span class="s1">sources: Array&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">names: Array&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">mappings: string</span><span class="s3">\n  </span><span class="s1">ignoreList?: number[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type ModernSourceMapPayload = BasicSourceMapPayload | IndexSourceMap</span><span class="s3">\n\n</span><span class="s1">export function sourceMapIgnoreListsEverything(</span><span class="s3">\n  </span><span class="s1">sourceMap: BasicSourceMapPayload</span><span class="s3">\n</span><span class="s1">): boolean {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">sourceMap.ignoreList !== undefined &amp;&amp;</span><span class="s3">\n    </span><span class="s1">sourceMap.sources.length === sourceMap.ignoreList.length</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Finds the sourcemap payload applicable to a given frame.</span><span class="s3">\n </span><span class="s1">* Equal to the input unless an Index Source Map is used.</span><span class="s3">\n </span><span class="s1">* @param line0 - The line number of the frame, 0-based.</span><span class="s3">\n </span><span class="s1">* @param column0 - The column number of the frame, 0-based.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function findApplicableSourceMapPayload(</span><span class="s3">\n  </span><span class="s1">line0: number,</span><span class="s3">\n  </span><span class="s1">column0: number,</span><span class="s3">\n  </span><span class="s1">payload: ModernSourceMapPayload</span><span class="s3">\n</span><span class="s1">): BasicSourceMapPayload | undefined {</span><span class="s3">\n  </span><span class="s1">if ('sections' in payload) {</span><span class="s3">\n    </span><span class="s1">if (payload.sections.length === 0) {</span><span class="s3">\n      </span><span class="s1">return undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Sections must not overlap and must be sorted: https://tc39.es/source-map/#section-object</span><span class="s3">\n    </span><span class="s1">// Therefore the last section that has an offset less than or equal to the frame is the applicable one.</span><span class="s3">\n    </span><span class="s1">const sections = payload.sections</span><span class="s3">\n    </span><span class="s1">let left = 0</span><span class="s3">\n    </span><span class="s1">let right = sections.length - 1</span><span class="s3">\n    </span><span class="s1">let result: IndexSourceMapSection | null = null</span><span class="s3">\n\n    </span><span class="s1">while (left &lt;= right) {</span><span class="s3">\n      </span><span class="s1">// fast Math.floor</span><span class="s3">\n      </span><span class="s1">const middle = ~~((left + right) / 2)</span><span class="s3">\n      </span><span class="s1">const section = sections[middle]</span><span class="s3">\n      </span><span class="s1">const offset = section.offset</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">offset.line &lt; line0 ||</span><span class="s3">\n        </span><span class="s1">(offset.line === line0 &amp;&amp; offset.column &lt;= column0)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">result = section</span><span class="s3">\n        </span><span class="s1">left = middle + 1</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">right = middle - 1</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return result === null ? undefined : result.map</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return payload</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const didWarnAboutInvalidSourceMapDEV = new Set&lt;string&gt;()</span><span class="s3">\n\n</span><span class="s1">const findSourceMap: (scriptNameOrSourceURL: string) =&gt; SourceMap | undefined =</span><span class="s3">\n  </span><span class="s1">process.env.NEXT_RUNTIME === 'nodejs' &amp;&amp;</span><span class="s3">\n  </span><span class="s1">process.versions.node?.startsWith('18')</span><span class="s3">\n    </span><span class="s1">? // Node.js 18 has a horribly slow `findSourceMap` implementation</span><span class="s3">\n      </span><span class="s1">noSourceMap</span><span class="s3">\n    </span><span class="s1">: nativeFindSourceMap</span><span class="s3">\n\n</span><span class="s1">export function filterStackFrameDEV(</span><span class="s3">\n  </span><span class="s1">sourceURL: string,</span><span class="s3">\n  </span><span class="s1">functionName: string,</span><span class="s3">\n  </span><span class="s1">line1: number,</span><span class="s3">\n  </span><span class="s1">column1: number</span><span class="s3">\n</span><span class="s1">): boolean {</span><span class="s3">\n  </span><span class="s1">if (sourceURL === '') {</span><span class="s3">\n    </span><span class="s1">// The default implementation filters out &lt;anonymous&gt; stack frames</span><span class="s3">\n    </span><span class="s1">// but we want to retain them because current Server Components and</span><span class="s3">\n    </span><span class="s1">// built-in Components in parent stacks don't have source location.</span><span class="s3">\n    </span><span class="s1">// Filter out frames that show up in Promises to get good names in React's</span><span class="s3">\n    </span><span class="s1">// Server Request track until we come up with a better heuristic.</span><span class="s3">\n    </span><span class="s1">return functionName !== 'new Promise'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (sourceURL.startsWith('node:') || sourceURL.includes('node_modules')) {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">// Node.js loads source maps eagerly so this call is cheap.</span><span class="s3">\n    </span><span class="s1">// TODO: ESM sourcemaps are O(1) but CommonJS sourcemaps are O(Number of CJS modules).</span><span class="s3">\n    </span><span class="s1">// Make sure this doesn't adversely affect performance when CJS is used by Next.js.</span><span class="s3">\n    </span><span class="s1">const sourceMap = findSourceMap(sourceURL)</span><span class="s3">\n    </span><span class="s1">if (sourceMap === undefined) {</span><span class="s3">\n      </span><span class="s1">// No source map assoicated.</span><span class="s3">\n      </span><span class="s1">// TODO: Node.js types should reflect that `findSourceMap` can return `undefined`.</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const sourceMapPayload = findApplicableSourceMapPayload(</span><span class="s3">\n      </span><span class="s1">line1 - 1,</span><span class="s3">\n      </span><span class="s1">column1 - 1,</span><span class="s3">\n      </span><span class="s1">sourceMap.payload</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (sourceMapPayload === undefined) {</span><span class="s3">\n      </span><span class="s1">// No source map section applicable to the frame.</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return !sourceMapIgnoreListsEverything(sourceMapPayload)</span><span class="s3">\n  </span><span class="s1">} catch (cause) {</span><span class="s3">\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">// TODO: Share cache with patch-error-inspect</span><span class="s3">\n      </span><span class="s1">if (!didWarnAboutInvalidSourceMapDEV.has(sourceURL)) {</span><span class="s3">\n        </span><span class="s1">didWarnAboutInvalidSourceMapDEV.add(sourceURL)</span><span class="s3">\n        </span><span class="s1">// We should not log an actual error instance here because that will re-enter</span><span class="s3">\n        </span><span class="s1">// this codepath during error inspection and could lead to infinite recursion.</span><span class="s3">\n        </span><span class="s1">console.error(</span><span class="s3">\n          </span><span class="s1">`${sourceURL}: Invalid source map. Only conformant source maps can be used to filter stack frames. Cause: ${cause}`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const invalidSourceMap = Symbol('invalid-source-map')</span><span class="s3">\n</span><span class="s1">const sourceMapURLs = new LRUCache&lt;string | typeof invalidSourceMap&gt;(</span><span class="s3">\n  </span><span class="s1">512 * 1024 * 1024,</span><span class="s3">\n  </span><span class="s1">(url) =&gt;</span><span class="s3">\n    </span><span class="s1">url === invalidSourceMap</span><span class="s3">\n      </span><span class="s1">? // Ideally we'd account for key length. So we just guestimate a small source map</span><span class="s3">\n        </span><span class="s1">// so that we don't create a huge cache with empty source maps.</span><span class="s3">\n        </span><span class="s1">8 * 1024</span><span class="s3">\n      </span><span class="s1">: // these URLs contain only ASCII characters so .length is equal to Buffer.byteLength</span><span class="s3">\n        </span><span class="s1">url.length</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n</span><span class="s1">export function findSourceMapURLDEV(</span><span class="s3">\n  </span><span class="s1">scriptNameOrSourceURL: string</span><span class="s3">\n</span><span class="s1">): string | null {</span><span class="s3">\n  </span><span class="s1">let sourceMapURL = sourceMapURLs.get(scriptNameOrSourceURL)</span><span class="s3">\n  </span><span class="s1">if (sourceMapURL === undefined) {</span><span class="s3">\n    </span><span class="s1">let sourceMapPayload: ModernSourceMapPayload | undefined</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">sourceMapPayload = findSourceMap(scriptNameOrSourceURL)?.payload</span><span class="s3">\n    </span><span class="s1">} catch (cause) {</span><span class="s3">\n      </span><span class="s1">console.error(</span><span class="s3">\n        </span><span class="s1">`${scriptNameOrSourceURL}: Invalid source map. Only conformant source maps can be used to find the original code. Cause: ${cause}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (sourceMapPayload === undefined) {</span><span class="s3">\n      </span><span class="s1">sourceMapURL = invalidSourceMap</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// TODO: Might be more efficient to extract the relevant section from Index Maps.</span><span class="s3">\n      </span><span class="s1">// Unclear if that search is worth the smaller payload we have to stringify.</span><span class="s3">\n      </span><span class="s1">const sourceMapJSON = JSON.stringify(sourceMapPayload)</span><span class="s3">\n      </span><span class="s1">const sourceMapURLData = Buffer.from(sourceMapJSON, 'utf8').toString(</span><span class="s3">\n        </span><span class="s1">'base64'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">sourceMapURL = `data:application/json;base64,${sourceMapURLData}`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">sourceMapURLs.set(scriptNameOrSourceURL, sourceMapURL)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return sourceMapURL === invalidSourceMap ? null : sourceMapURL</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function devirtualizeReactServerURL(sourceURL: string): string {</span><span class="s3">\n  </span><span class="s1">if (sourceURL.startsWith('about://React/')) {</span><span class="s3">\n    </span><span class="s1">// about://React/Server/file://&lt;filename&gt;?42 =&gt; file://&lt;filename&gt;</span><span class="s3">\n    </span><span class="s1">const envIdx = sourceURL.indexOf('/', 'about://React/'.length)</span><span class="s3">\n    </span><span class="s1">const suffixIdx = sourceURL.lastIndexOf('?')</span><span class="s3">\n    </span><span class="s1">if (envIdx &gt; -1 &amp;&amp; suffixIdx &gt; -1) {</span><span class="s3">\n      </span><span class="s1">return decodeURI(sourceURL.slice(envIdx + 1, suffixIdx))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return sourceURL</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isAnonymousFrameLikelyJSNative(methodName: string): boolean {</span><span class="s3">\n  </span><span class="s1">// Anonymous frames can also be produced in React parent stacks either from</span><span class="s3">\n  </span><span class="s1">// host components or Server Components. We don't want to ignore those.</span><span class="s3">\n  </span><span class="s1">// This could hide user-space methods that are named like native JS methods but</span><span class="s3">\n  </span><span class="s1">// should you really do that?</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">// e.g. JSON.parse</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('JSON.') ||</span><span class="s3">\n    </span><span class="s1">// E.g. Promise.withResolves</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('Function.') ||</span><span class="s3">\n    </span><span class="s1">// various JS built-ins</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('Promise.') ||</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('Array.') ||</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('Set.') ||</span><span class="s3">\n    </span><span class="s1">methodName.startsWith('Map.')</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function ignoreListAnonymousStackFramesIfSandwiched&lt;Frame&gt;(</span><span class="s3">\n  </span><span class="s1">frames: Frame[],</span><span class="s3">\n  </span><span class="s1">isAnonymousFrame: (frame: Frame) =&gt; boolean,</span><span class="s3">\n  </span><span class="s1">isIgnoredFrame: (frame: Frame) =&gt; boolean,</span><span class="s3">\n  </span><span class="s1">getMethodName: (frame: Frame) =&gt; string,</span><span class="s3">\n  </span><span class="s1">/** only passes frames for which `isAnonymousFrame` and their method is a native JS method or `isIgnoredFrame` return true */</span><span class="s3">\n  </span><span class="s1">ignoreFrame: (frame: Frame) =&gt; void</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">for (let i = 1; i &lt; frames.length; i++) {</span><span class="s3">\n    </span><span class="s1">const currentFrame = frames[i]</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!(</span><span class="s3">\n        </span><span class="s1">isAnonymousFrame(currentFrame) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">isAnonymousFrameLikelyJSNative(getMethodName(currentFrame))</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const previousFrameIsIgnored = isIgnoredFrame(frames[i - 1])</span><span class="s3">\n    </span><span class="s1">if (previousFrameIsIgnored &amp;&amp; i &lt; frames.length - 1) {</span><span class="s3">\n      </span><span class="s1">let ignoreSandwich = false</span><span class="s3">\n      </span><span class="s1">let j = i + 1</span><span class="s3">\n      </span><span class="s1">for (j; j &lt; frames.length; j++) {</span><span class="s3">\n        </span><span class="s1">const nextFrame = frames[j]</span><span class="s3">\n        </span><span class="s1">const nextFrameIsAnonymous =</span><span class="s3">\n          </span><span class="s1">isAnonymousFrame(nextFrame) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">isAnonymousFrameLikelyJSNative(getMethodName(nextFrame))</span><span class="s3">\n        </span><span class="s1">if (nextFrameIsAnonymous) {</span><span class="s3">\n          </span><span class="s1">continue</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const nextFrameIsIgnored = isIgnoredFrame(nextFrame)</span><span class="s3">\n        </span><span class="s1">if (nextFrameIsIgnored) {</span><span class="s3">\n          </span><span class="s1">ignoreSandwich = true</span><span class="s3">\n          </span><span class="s1">break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (ignoreSandwich) {</span><span class="s3">\n        </span><span class="s1">for (i; i &lt; j; i++) {</span><span class="s3">\n          </span><span class="s1">ignoreFrame(frames[i])</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;LRUCache&quot;</span><span class="s0">,</span><span class="s1">&quot;noSourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;nativeFindSourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;findSourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapIgnoreListsEverything&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;findApplicableSourceMapPayload&quot;</span><span class="s0">,</span><span class="s1">&quot;line0&quot;</span><span class="s0">,</span><span class="s1">&quot;column0&quot;</span><span class="s0">,</span><span class="s1">&quot;payload&quot;</span><span class="s0">,</span><span class="s1">&quot;sections&quot;</span><span class="s0">,</span><span class="s1">&quot;left&quot;</span><span class="s0">,</span><span class="s1">&quot;right&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;middle&quot;</span><span class="s0">,</span><span class="s1">&quot;section&quot;</span><span class="s0">,</span><span class="s1">&quot;offset&quot;</span><span class="s0">,</span><span class="s1">&quot;line&quot;</span><span class="s0">,</span><span class="s1">&quot;column&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;didWarnAboutInvalidSourceMapDEV&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;versions&quot;</span><span class="s0">,</span><span class="s1">&quot;node&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;filterStackFrameDEV&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceURL&quot;</span><span class="s0">,</span><span class="s1">&quot;functionName&quot;</span><span class="s0">,</span><span class="s1">&quot;line1&quot;</span><span class="s0">,</span><span class="s1">&quot;column1&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapPayload&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidSourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapURLs&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;findSourceMapURLDEV&quot;</span><span class="s0">,</span><span class="s1">&quot;scriptNameOrSourceURL&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapURL&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapJSON&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapURLData&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;devirtualizeReactServerURL&quot;</span><span class="s0">,</span><span class="s1">&quot;envIdx&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;suffixIdx&quot;</span><span class="s0">,</span><span class="s1">&quot;lastIndexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURI&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;isAnonymousFrameLikelyJSNative&quot;</span><span class="s0">,</span><span class="s1">&quot;methodName&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreListAnonymousStackFramesIfSandwiched&quot;</span><span class="s0">,</span><span class="s1">&quot;frames&quot;</span><span class="s0">,</span><span class="s1">&quot;isAnonymousFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;isIgnoredFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;getMethodName&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;currentFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;previousFrameIsIgnored&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreSandwich&quot;</span><span class="s0">,</span><span class="s1">&quot;j&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFrameIsAnonymous&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFrameIsIgnored&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18584</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/collect-segment-data.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">CacheNodeSeedData,</span><span class="s3">\n  </span><span class="s1">FlightRouterState,</span><span class="s3">\n  </span><span class="s1">InitialRSCPayload,</span><span class="s3">\n  </span><span class="s1">DynamicParamTypesShort,</span><span class="s3">\n</span><span class="s1">} from './types'</span><span class="s3">\n</span><span class="s1">import type { ManifestNode } from '../../build/webpack/plugins/flight-manifest-plugin'</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">import { createFromReadableStream } from 'react-server-dom-webpack/client'</span><span class="s3">\n</span><span class="s1">// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">import { unstable_prerender as prerender } from 'react-server-dom-webpack/static'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">streamFromBuffer,</span><span class="s3">\n  </span><span class="s1">streamToBuffer,</span><span class="s3">\n</span><span class="s1">} from '../stream-utils/node-web-streams-helper'</span><span class="s3">\n</span><span class="s1">import { waitAtLeastOneReactRenderTask } from '../../lib/scheduler'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">HeadData,</span><span class="s3">\n  </span><span class="s1">LoadingModuleData,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/app-router-context.shared-runtime'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">type SegmentRequestKey,</span><span class="s3">\n  </span><span class="s1">createSegmentRequestKeyPart,</span><span class="s3">\n  </span><span class="s1">appendSegmentRequestKeyPart,</span><span class="s3">\n  </span><span class="s1">ROOT_SEGMENT_REQUEST_KEY,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/segment-cache/segment-value-encoding'</span><span class="s3">\n</span><span class="s1">import { getDigestForWellKnownError } from './create-error-handler'</span><span class="s3">\n\n</span><span class="s1">// Contains metadata about the route tree. The client must fetch this before</span><span class="s3">\n</span><span class="s1">// it can fetch any actual segment data.</span><span class="s3">\n</span><span class="s1">export type RootTreePrefetch = {</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n  </span><span class="s1">tree: TreePrefetch</span><span class="s3">\n  </span><span class="s1">head: HeadData</span><span class="s3">\n  </span><span class="s1">isHeadPartial: boolean</span><span class="s3">\n  </span><span class="s1">staleTime: number</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type TreePrefetch = {</span><span class="s3">\n  </span><span class="s1">name: string</span><span class="s3">\n  </span><span class="s1">paramType: DynamicParamTypesShort | null</span><span class="s3">\n  </span><span class="s1">// TODO: When clientParamParsing is enabled, this field is always null.</span><span class="s3">\n  </span><span class="s1">// Instead we parse the param on the client, allowing us to omit it from</span><span class="s3">\n  </span><span class="s1">// the prefetch response and increase its cacheability. Remove this field</span><span class="s3">\n  </span><span class="s1">// once clientParamParsing is enabled everywhere.</span><span class="s3">\n  </span><span class="s1">paramKey: string | null</span><span class="s3">\n\n  </span><span class="s1">// Child segments.</span><span class="s3">\n  </span><span class="s1">slots: null | {</span><span class="s3">\n    </span><span class="s1">[parallelRouteKey: string]: TreePrefetch</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Extra fields that only exist so we can reconstruct a FlightRouterState on</span><span class="s3">\n  </span><span class="s1">// the client. We may be able to unify TreePrefetch and FlightRouterState</span><span class="s3">\n  </span><span class="s1">// after some refactoring, but in the meantime it would be wasteful to add a</span><span class="s3">\n  </span><span class="s1">// bunch of new prefetch-only fields to FlightRouterState. So think of</span><span class="s3">\n  </span><span class="s1">// TreePrefetch as a superset of FlightRouterState.</span><span class="s3">\n  </span><span class="s1">isRootLayout: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type SegmentPrefetch = {</span><span class="s3">\n  </span><span class="s1">buildId: string</span><span class="s3">\n  </span><span class="s1">rsc: React.ReactNode | null</span><span class="s3">\n  </span><span class="s1">loading: LoadingModuleData | Promise&lt;LoadingModuleData&gt;</span><span class="s3">\n  </span><span class="s1">isPartial: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const filterStackFrame =</span><span class="s3">\n  </span><span class="s1">process.env.NODE_ENV !== 'production'</span><span class="s3">\n    </span><span class="s1">? (require('../lib/source-maps') as typeof import('../lib/source-maps'))</span><span class="s3">\n        </span><span class="s1">.filterStackFrameDEV</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n</span><span class="s1">const findSourceMapURL =</span><span class="s3">\n  </span><span class="s1">process.env.NODE_ENV !== 'production'</span><span class="s3">\n    </span><span class="s1">? (require('../lib/source-maps') as typeof import('../lib/source-maps'))</span><span class="s3">\n        </span><span class="s1">.findSourceMapURLDEV</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n\n</span><span class="s1">function onSegmentPrerenderError(error: unknown) {</span><span class="s3">\n  </span><span class="s1">const digest = getDigestForWellKnownError(error)</span><span class="s3">\n  </span><span class="s1">if (digest) {</span><span class="s3">\n    </span><span class="s1">return digest</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// We don't need to log the errors because we would have already done that</span><span class="s3">\n  </span><span class="s1">// when generating the original Flight stream for the whole page.</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function collectSegmentData(</span><span class="s3">\n  </span><span class="s1">isClientParamParsingEnabled: boolean,</span><span class="s3">\n  </span><span class="s1">fullPageDataBuffer: Buffer,</span><span class="s3">\n  </span><span class="s1">staleTime: number,</span><span class="s3">\n  </span><span class="s1">clientModules: ManifestNode,</span><span class="s3">\n  </span><span class="s1">serverConsumerManifest: any</span><span class="s3">\n</span><span class="s1">): Promise&lt;Map&lt;SegmentRequestKey, Buffer&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">// Traverse the router tree and generate a prefetch response for each segment.</span><span class="s3">\n\n  </span><span class="s1">// A mutable map to collect the results as we traverse the route tree.</span><span class="s3">\n  </span><span class="s1">const resultMap = new Map&lt;SegmentRequestKey, Buffer&gt;()</span><span class="s3">\n\n  </span><span class="s1">// Before we start, warm up the module cache by decoding the page data once.</span><span class="s3">\n  </span><span class="s1">// Then we can assume that any remaining async tasks that occur the next time</span><span class="s3">\n  </span><span class="s1">// are due to hanging promises caused by dynamic data access. Note we only</span><span class="s3">\n  </span><span class="s1">// have to do this once per page, not per individual segment.</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">await createFromReadableStream(streamFromBuffer(fullPageDataBuffer), {</span><span class="s3">\n      </span><span class="s1">findSourceMapURL,</span><span class="s3">\n      </span><span class="s1">serverConsumerManifest,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">await waitAtLeastOneReactRenderTask()</span><span class="s3">\n  </span><span class="s1">} catch {}</span><span class="s3">\n\n  </span><span class="s1">// Create an abort controller that we'll use to stop the stream.</span><span class="s3">\n  </span><span class="s1">const abortController = new AbortController()</span><span class="s3">\n  </span><span class="s1">const onCompletedProcessingRouteTree = async () =&gt; {</span><span class="s3">\n    </span><span class="s1">// Since all we're doing is decoding and re-encoding a cached prerender, if</span><span class="s3">\n    </span><span class="s1">// serializing the stream takes longer than a microtask, it must because of</span><span class="s3">\n    </span><span class="s1">// hanging promises caused by dynamic data.</span><span class="s3">\n    </span><span class="s1">await waitAtLeastOneReactRenderTask()</span><span class="s3">\n    </span><span class="s1">abortController.abort()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Generate a stream for the route tree prefetch. While we're walking the</span><span class="s3">\n  </span><span class="s1">// tree, we'll also spawn additional tasks to generate the segment prefetches.</span><span class="s3">\n  </span><span class="s1">// The promises for these tasks are pushed to a mutable array that we will</span><span class="s3">\n  </span><span class="s1">// await once the route tree is fully rendered.</span><span class="s3">\n  </span><span class="s1">const segmentTasks: Array&lt;Promise&lt;[SegmentRequestKey, Buffer]&gt;&gt; = []</span><span class="s3">\n  </span><span class="s1">const { prelude: treeStream } = await prerender(</span><span class="s3">\n    </span><span class="s1">// RootTreePrefetch is not a valid return type for a React component, but</span><span class="s3">\n    </span><span class="s1">// we need to use a component so that when we decode the original stream</span><span class="s3">\n    </span><span class="s1">// inside of it, the side effects are transferred to the new stream.</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error</span><span class="s3">\n    </span><span class="s1">&lt;PrefetchTreeData</span><span class="s3">\n      </span><span class="s1">isClientParamParsingEnabled={isClientParamParsingEnabled}</span><span class="s3">\n      </span><span class="s1">fullPageDataBuffer={fullPageDataBuffer}</span><span class="s3">\n      </span><span class="s1">serverConsumerManifest={serverConsumerManifest}</span><span class="s3">\n      </span><span class="s1">clientModules={clientModules}</span><span class="s3">\n      </span><span class="s1">staleTime={staleTime}</span><span class="s3">\n      </span><span class="s1">segmentTasks={segmentTasks}</span><span class="s3">\n      </span><span class="s1">onCompletedProcessingRouteTree={onCompletedProcessingRouteTree}</span><span class="s3">\n    </span><span class="s1">/&gt;,</span><span class="s3">\n    </span><span class="s1">clientModules,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">filterStackFrame,</span><span class="s3">\n      </span><span class="s1">signal: abortController.signal,</span><span class="s3">\n      </span><span class="s1">onError: onSegmentPrerenderError,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">// Write the route tree to a special `/_tree` segment.</span><span class="s3">\n  </span><span class="s1">const treeBuffer = await streamToBuffer(treeStream)</span><span class="s3">\n  </span><span class="s1">resultMap.set('/_tree' as SegmentRequestKey, treeBuffer)</span><span class="s3">\n\n  </span><span class="s1">// Now that we've finished rendering the route tree, all the segment tasks</span><span class="s3">\n  </span><span class="s1">// should have been spawned. Await them in parallel and write the segment</span><span class="s3">\n  </span><span class="s1">// prefetches to the result map.</span><span class="s3">\n  </span><span class="s1">for (const [segmentPath, buffer] of await Promise.all(segmentTasks)) {</span><span class="s3">\n    </span><span class="s1">resultMap.set(segmentPath, buffer)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return resultMap</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function PrefetchTreeData({</span><span class="s3">\n  </span><span class="s1">isClientParamParsingEnabled,</span><span class="s3">\n  </span><span class="s1">fullPageDataBuffer,</span><span class="s3">\n  </span><span class="s1">serverConsumerManifest,</span><span class="s3">\n  </span><span class="s1">clientModules,</span><span class="s3">\n  </span><span class="s1">staleTime,</span><span class="s3">\n  </span><span class="s1">segmentTasks,</span><span class="s3">\n  </span><span class="s1">onCompletedProcessingRouteTree,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">isClientParamParsingEnabled: boolean</span><span class="s3">\n  </span><span class="s1">fullPageDataBuffer: Buffer</span><span class="s3">\n  </span><span class="s1">serverConsumerManifest: any</span><span class="s3">\n  </span><span class="s1">clientModules: ManifestNode</span><span class="s3">\n  </span><span class="s1">staleTime: number</span><span class="s3">\n  </span><span class="s1">segmentTasks: Array&lt;Promise&lt;[SegmentRequestKey, Buffer]&gt;&gt;</span><span class="s3">\n  </span><span class="s1">onCompletedProcessingRouteTree: () =&gt; void</span><span class="s3">\n</span><span class="s1">}): Promise&lt;RootTreePrefetch | null&gt; {</span><span class="s3">\n  </span><span class="s1">// We're currently rendering a Flight response for the route tree prefetch.</span><span class="s3">\n  </span><span class="s1">// Inside this component, decode the Flight stream for the whole page. This is</span><span class="s3">\n  </span><span class="s1">// a hack to transfer the side effects from the original Flight stream (e.g.</span><span class="s3">\n  </span><span class="s1">// Float preloads) onto the Flight stream for the tree prefetch.</span><span class="s3">\n  </span><span class="s1">// TODO: React needs a better way to do this. Needed for Server Actions, too.</span><span class="s3">\n  </span><span class="s1">const initialRSCPayload: InitialRSCPayload = await createFromReadableStream(</span><span class="s3">\n    </span><span class="s1">createUnclosingPrefetchStream(streamFromBuffer(fullPageDataBuffer)),</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">findSourceMapURL,</span><span class="s3">\n      </span><span class="s1">serverConsumerManifest,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const buildId = initialRSCPayload.b</span><span class="s3">\n\n  </span><span class="s1">// FlightDataPath is an unsound type, hence the additional checks.</span><span class="s3">\n  </span><span class="s1">const flightDataPaths = initialRSCPayload.f</span><span class="s3">\n  </span><span class="s1">if (flightDataPaths.length !== 1 &amp;&amp; flightDataPaths[0].length !== 3) {</span><span class="s3">\n    </span><span class="s1">console.error(</span><span class="s3">\n      </span><span class="s1">'Internal Next.js error: InitialRSCPayload does not match the expected ' +</span><span class="s3">\n        </span><span class="s1">'shape for a prerendered page during segment prefetch generation.'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">return null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const flightRouterState: FlightRouterState = flightDataPaths[0][0]</span><span class="s3">\n  </span><span class="s1">const seedData: CacheNodeSeedData = flightDataPaths[0][1]</span><span class="s3">\n  </span><span class="s1">const head: HeadData = flightDataPaths[0][2]</span><span class="s3">\n\n  </span><span class="s1">// Compute the route metadata tree by traversing the FlightRouterState. As we</span><span class="s3">\n  </span><span class="s1">// walk the tree, we will also spawn a task to produce a prefetch response for</span><span class="s3">\n  </span><span class="s1">// each segment.</span><span class="s3">\n  </span><span class="s1">const tree = collectSegmentDataImpl(</span><span class="s3">\n    </span><span class="s1">isClientParamParsingEnabled,</span><span class="s3">\n    </span><span class="s1">flightRouterState,</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">seedData,</span><span class="s3">\n    </span><span class="s1">clientModules,</span><span class="s3">\n    </span><span class="s1">ROOT_SEGMENT_REQUEST_KEY,</span><span class="s3">\n    </span><span class="s1">segmentTasks</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const isHeadPartial = await isPartialRSCData(head, clientModules)</span><span class="s3">\n\n  </span><span class="s1">// Notify the abort controller that we're done processing the route tree.</span><span class="s3">\n  </span><span class="s1">// Anything async that happens after this point must be due to hanging</span><span class="s3">\n  </span><span class="s1">// promises in the original stream.</span><span class="s3">\n  </span><span class="s1">onCompletedProcessingRouteTree()</span><span class="s3">\n\n  </span><span class="s1">// Render the route tree to a special `/_tree` segment.</span><span class="s3">\n  </span><span class="s1">const treePrefetch: RootTreePrefetch = {</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">tree,</span><span class="s3">\n    </span><span class="s1">head,</span><span class="s3">\n    </span><span class="s1">isHeadPartial,</span><span class="s3">\n    </span><span class="s1">staleTime,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return treePrefetch</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function collectSegmentDataImpl(</span><span class="s3">\n  </span><span class="s1">isClientParamParsingEnabled: boolean,</span><span class="s3">\n  </span><span class="s1">route: FlightRouterState,</span><span class="s3">\n  </span><span class="s1">buildId: string,</span><span class="s3">\n  </span><span class="s1">seedData: CacheNodeSeedData | null,</span><span class="s3">\n  </span><span class="s1">clientModules: ManifestNode,</span><span class="s3">\n  </span><span class="s1">requestKey: SegmentRequestKey,</span><span class="s3">\n  </span><span class="s1">segmentTasks: Array&lt;Promise&lt;[string, Buffer]&gt;&gt;</span><span class="s3">\n</span><span class="s1">): TreePrefetch {</span><span class="s3">\n  </span><span class="s1">// Metadata about the segment. Sent as part of the tree prefetch. Null if</span><span class="s3">\n  </span><span class="s1">// there are no children.</span><span class="s3">\n  </span><span class="s1">let slotMetadata: { [parallelRouteKey: string]: TreePrefetch } | null = null</span><span class="s3">\n\n  </span><span class="s1">const children = route[1]</span><span class="s3">\n  </span><span class="s1">const seedDataChildren = seedData !== null ? seedData[2] : null</span><span class="s3">\n  </span><span class="s1">for (const parallelRouteKey in children) {</span><span class="s3">\n    </span><span class="s1">const childRoute = children[parallelRouteKey]</span><span class="s3">\n    </span><span class="s1">const childSegment = childRoute[0]</span><span class="s3">\n    </span><span class="s1">const childSeedData =</span><span class="s3">\n      </span><span class="s1">seedDataChildren !== null ? seedDataChildren[parallelRouteKey] : null</span><span class="s3">\n\n    </span><span class="s1">const childRequestKey = appendSegmentRequestKeyPart(</span><span class="s3">\n      </span><span class="s1">requestKey,</span><span class="s3">\n      </span><span class="s1">parallelRouteKey,</span><span class="s3">\n      </span><span class="s1">createSegmentRequestKeyPart(childSegment)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">const childTree = collectSegmentDataImpl(</span><span class="s3">\n      </span><span class="s1">isClientParamParsingEnabled,</span><span class="s3">\n      </span><span class="s1">childRoute,</span><span class="s3">\n      </span><span class="s1">buildId,</span><span class="s3">\n      </span><span class="s1">childSeedData,</span><span class="s3">\n      </span><span class="s1">clientModules,</span><span class="s3">\n      </span><span class="s1">childRequestKey,</span><span class="s3">\n      </span><span class="s1">segmentTasks</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (slotMetadata === null) {</span><span class="s3">\n      </span><span class="s1">slotMetadata = {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">slotMetadata[parallelRouteKey] = childTree</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (seedData !== null) {</span><span class="s3">\n    </span><span class="s1">// Spawn a task to write the segment data to a new Flight stream.</span><span class="s3">\n    </span><span class="s1">segmentTasks.push(</span><span class="s3">\n      </span><span class="s1">// Since we're already in the middle of a render, wait until after the</span><span class="s3">\n      </span><span class="s1">// current task to escape the current rendering context.</span><span class="s3">\n      </span><span class="s1">waitAtLeastOneReactRenderTask().then(() =&gt;</span><span class="s3">\n        </span><span class="s1">renderSegmentPrefetch(buildId, seedData, requestKey, clientModules)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">// This segment does not have any seed data. Skip generating a prefetch</span><span class="s3">\n    </span><span class="s1">// response for it. We'll still include it in the route tree, though.</span><span class="s3">\n    </span><span class="s1">// TODO: We should encode in the route tree whether a segment is missing</span><span class="s3">\n    </span><span class="s1">// so we don't attempt to fetch it for no reason. As of now this shouldn't</span><span class="s3">\n    </span><span class="s1">// ever happen in practice, though.</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const segment = route[0]</span><span class="s3">\n  </span><span class="s1">let name</span><span class="s3">\n  </span><span class="s1">let paramType: DynamicParamTypesShort | null = null</span><span class="s3">\n  </span><span class="s1">let paramKey: string | null = null</span><span class="s3">\n  </span><span class="s1">if (typeof segment === 'string') {</span><span class="s3">\n    </span><span class="s1">name = segment</span><span class="s3">\n    </span><span class="s1">paramKey = segment</span><span class="s3">\n    </span><span class="s1">paramType = null</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">name = segment[0]</span><span class="s3">\n    </span><span class="s1">paramKey = segment[1]</span><span class="s3">\n    </span><span class="s1">paramType = segment[2] as DynamicParamTypesShort</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Metadata about the segment. Sent to the client as part of the</span><span class="s3">\n  </span><span class="s1">// tree prefetch.</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">name,</span><span class="s3">\n    </span><span class="s1">paramType,</span><span class="s3">\n    </span><span class="s1">// This value is ommitted from the prefetch response when clientParamParsing</span><span class="s3">\n    </span><span class="s1">// is enabled. The flag only exists while we're testing the feature, in</span><span class="s3">\n    </span><span class="s1">// case there's a bug and we need to revert.</span><span class="s3">\n    </span><span class="s1">// TODO: Remove once clientParamParsing is enabled everywhere.</span><span class="s3">\n    </span><span class="s1">paramKey: isClientParamParsingEnabled ? null : paramKey,</span><span class="s3">\n    </span><span class="s1">slots: slotMetadata,</span><span class="s3">\n    </span><span class="s1">isRootLayout: route[4] === true,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function renderSegmentPrefetch(</span><span class="s3">\n  </span><span class="s1">buildId: string,</span><span class="s3">\n  </span><span class="s1">seedData: CacheNodeSeedData,</span><span class="s3">\n  </span><span class="s1">requestKey: SegmentRequestKey,</span><span class="s3">\n  </span><span class="s1">clientModules: ManifestNode</span><span class="s3">\n</span><span class="s1">): Promise&lt;[SegmentRequestKey, Buffer]&gt; {</span><span class="s3">\n  </span><span class="s1">// Render the segment data to a stream.</span><span class="s3">\n  </span><span class="s1">// In the future, this is where we can include additional metadata, like the</span><span class="s3">\n  </span><span class="s1">// stale time and cache tags.</span><span class="s3">\n  </span><span class="s1">const rsc = seedData[1]</span><span class="s3">\n  </span><span class="s1">const loading = seedData[3]</span><span class="s3">\n  </span><span class="s1">const segmentPrefetch: SegmentPrefetch = {</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">rsc,</span><span class="s3">\n    </span><span class="s1">loading,</span><span class="s3">\n    </span><span class="s1">isPartial: await isPartialRSCData(rsc, clientModules),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// Since all we're doing is decoding and re-encoding a cached prerender, if</span><span class="s3">\n  </span><span class="s1">// it takes longer than a microtask, it must because of hanging promises</span><span class="s3">\n  </span><span class="s1">// caused by dynamic data. Abort the stream at the end of the current task.</span><span class="s3">\n  </span><span class="s1">const abortController = new AbortController()</span><span class="s3">\n  </span><span class="s1">waitAtLeastOneReactRenderTask().then(() =&gt; abortController.abort())</span><span class="s3">\n  </span><span class="s1">const { prelude: segmentStream } = await prerender(</span><span class="s3">\n    </span><span class="s1">segmentPrefetch,</span><span class="s3">\n    </span><span class="s1">clientModules,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">filterStackFrame,</span><span class="s3">\n      </span><span class="s1">signal: abortController.signal,</span><span class="s3">\n      </span><span class="s1">onError: onSegmentPrerenderError,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const segmentBuffer = await streamToBuffer(segmentStream)</span><span class="s3">\n  </span><span class="s1">if (requestKey === ROOT_SEGMENT_REQUEST_KEY) {</span><span class="s3">\n    </span><span class="s1">return ['/_index' as SegmentRequestKey, segmentBuffer]</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return [requestKey, segmentBuffer]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function isPartialRSCData(</span><span class="s3">\n  </span><span class="s1">rsc: React.ReactNode,</span><span class="s3">\n  </span><span class="s1">clientModules: ManifestNode</span><span class="s3">\n</span><span class="s1">): Promise&lt;boolean&gt; {</span><span class="s3">\n  </span><span class="s1">// We can determine if a segment contains only partial data if it takes longer</span><span class="s3">\n  </span><span class="s1">// than a task to encode, because dynamic data is encoded as an infinite</span><span class="s3">\n  </span><span class="s1">// promise. We must do this in a separate Flight prerender from the one that</span><span class="s3">\n  </span><span class="s1">// actually generates the prefetch stream because we need to include</span><span class="s3">\n  </span><span class="s1">// `isPartial` in the stream itself.</span><span class="s3">\n  </span><span class="s1">let isPartial = false</span><span class="s3">\n  </span><span class="s1">const abortController = new AbortController()</span><span class="s3">\n  </span><span class="s1">waitAtLeastOneReactRenderTask().then(() =&gt; {</span><span class="s3">\n    </span><span class="s1">// If we haven't yet finished the outer task, then it must be because we</span><span class="s3">\n    </span><span class="s1">// accessed dynamic data.</span><span class="s3">\n    </span><span class="s1">isPartial = true</span><span class="s3">\n    </span><span class="s1">abortController.abort()</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">await prerender(rsc, clientModules, {</span><span class="s3">\n    </span><span class="s1">filterStackFrame,</span><span class="s3">\n    </span><span class="s1">signal: abortController.signal,</span><span class="s3">\n    </span><span class="s1">onError() {},</span><span class="s3">\n    </span><span class="s1">onPostpone() {</span><span class="s3">\n      </span><span class="s1">// If something postponed, i.e. when Cache Components is not enabled, we can</span><span class="s3">\n      </span><span class="s1">// infer that the RSC data is partial.</span><span class="s3">\n      </span><span class="s1">isPartial = true</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">return isPartial</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createUnclosingPrefetchStream(</span><span class="s3">\n  </span><span class="s1">originalFlightStream: ReadableStream&lt;Uint8Array&gt;</span><span class="s3">\n</span><span class="s1">): ReadableStream&lt;Uint8Array&gt; {</span><span class="s3">\n  </span><span class="s1">// When PPR is enabled, prefetch streams may contain references that never</span><span class="s3">\n  </span><span class="s1">// resolve, because that's how we encode dynamic data access. In the decoded</span><span class="s3">\n  </span><span class="s1">// object returned by the Flight client, these are reified into hanging</span><span class="s3">\n  </span><span class="s1">// promises that suspend during render, which is effectively what we want.</span><span class="s3">\n  </span><span class="s1">// The UI resolves when it switches to the dynamic data stream</span><span class="s3">\n  </span><span class="s1">// (via useDeferredValue(dynamic, static)).</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// However, the Flight implementation currently errors if the server closes</span><span class="s3">\n  </span><span class="s1">// the response before all the references are resolved. As a cheat to work</span><span class="s3">\n  </span><span class="s1">// around this, we wrap the original stream in a new stream that never closes,</span><span class="s3">\n  </span><span class="s1">// and therefore doesn't error.</span><span class="s3">\n  </span><span class="s1">const reader = originalFlightStream.getReader()</span><span class="s3">\n  </span><span class="s1">return new ReadableStream({</span><span class="s3">\n    </span><span class="s1">async pull(controller) {</span><span class="s3">\n      </span><span class="s1">while (true) {</span><span class="s3">\n        </span><span class="s1">const { done, value } = await reader.read()</span><span class="s3">\n        </span><span class="s1">if (!done) {</span><span class="s3">\n          </span><span class="s1">// Pass to the target stream and keep consuming the Flight response</span><span class="s3">\n          </span><span class="s1">// from the server.</span><span class="s3">\n          </span><span class="s1">controller.enqueue(value)</span><span class="s3">\n          </span><span class="s1">continue</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">// The server stream has closed. Exit, but intentionally do not close</span><span class="s3">\n        </span><span class="s1">// the target stream.</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;createFromReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_prerender&quot;</span><span class="s0">,</span><span class="s1">&quot;prerender&quot;</span><span class="s0">,</span><span class="s1">&quot;streamFromBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;streamToBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;waitAtLeastOneReactRenderTask&quot;</span><span class="s0">,</span><span class="s1">&quot;createSegmentRequestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;appendSegmentRequestKeyPart&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT_SEGMENT_REQUEST_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;getDigestForWellKnownError&quot;</span><span class="s0">,</span><span class="s1">&quot;filterStackFrame&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;filterStackFrameDEV&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;findSourceMapURL&quot;</span><span class="s0">,</span><span class="s1">&quot;findSourceMapURLDEV&quot;</span><span class="s0">,</span><span class="s1">&quot;onSegmentPrerenderError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;collectSegmentData&quot;</span><span class="s0">,</span><span class="s1">&quot;isClientParamParsingEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;fullPageDataBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;staleTime&quot;</span><span class="s0">,</span><span class="s1">&quot;clientModules&quot;</span><span class="s0">,</span><span class="s1">&quot;serverConsumerManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;resultMap&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;abortController&quot;</span><span class="s0">,</span><span class="s1">&quot;AbortController&quot;</span><span class="s0">,</span><span class="s1">&quot;onCompletedProcessingRouteTree&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentTasks&quot;</span><span class="s0">,</span><span class="s1">&quot;prelude&quot;</span><span class="s0">,</span><span class="s1">&quot;treeStream&quot;</span><span class="s0">,</span><span class="s1">&quot;PrefetchTreeData&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;onError&quot;</span><span class="s0">,</span><span class="s1">&quot;treeBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPath&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;initialRSCPayload&quot;</span><span class="s0">,</span><span class="s1">&quot;createUnclosingPrefetchStream&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;flightDataPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;f&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;flightRouterState&quot;</span><span class="s0">,</span><span class="s1">&quot;seedData&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;collectSegmentDataImpl&quot;</span><span class="s0">,</span><span class="s1">&quot;isHeadPartial&quot;</span><span class="s0">,</span><span class="s1">&quot;isPartialRSCData&quot;</span><span class="s0">,</span><span class="s1">&quot;treePrefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;requestKey&quot;</span><span class="s0">,</span><span class="s1">&quot;slotMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;seedDataChildren&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelRouteKey&quot;</span><span class="s0">,</span><span class="s1">&quot;childRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;childSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;childSeedData&quot;</span><span class="s0">,</span><span class="s1">&quot;childRequestKey&quot;</span><span class="s0">,</span><span class="s1">&quot;childTree&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSegmentPrefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;segment&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;paramType&quot;</span><span class="s0">,</span><span class="s1">&quot;paramKey&quot;</span><span class="s0">,</span><span class="s1">&quot;slots&quot;</span><span class="s0">,</span><span class="s1">&quot;isRootLayout&quot;</span><span class="s0">,</span><span class="s1">&quot;rsc&quot;</span><span class="s0">,</span><span class="s1">&quot;loading&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentPrefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;isPartial&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentStream&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;onPostpone&quot;</span><span class="s0">,</span><span class="s1">&quot;originalFlightStream&quot;</span><span class="s0">,</span><span class="s1">&quot;reader&quot;</span><span class="s0">,</span><span class="s1">&quot;getReader&quot;</span><span class="s0">,</span><span class="s1">&quot;ReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;pull&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;read&quot;</span><span class="s0">,</span><span class="s1">&quot;enqueue&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18860</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/clone-response.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;const noop = () =&gt; {}</span><span class="s3">\n\n</span><span class="s1">let registry: FinalizationRegistry&lt;WeakRef&lt;ReadableStream&gt;&gt; | undefined</span><span class="s3">\n\n</span><span class="s1">if (globalThis.FinalizationRegistry) {</span><span class="s3">\n  </span><span class="s1">registry = new FinalizationRegistry((weakRef: WeakRef&lt;ReadableStream&gt;) =&gt; {</span><span class="s3">\n    </span><span class="s1">const stream = weakRef.deref()</span><span class="s3">\n    </span><span class="s1">if (stream &amp;&amp; !stream.locked) {</span><span class="s3">\n      </span><span class="s1">stream.cancel('Response object has been garbage collected').then(noop)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Clones a response by teeing the body so we can return two independent</span><span class="s3">\n </span><span class="s1">* ReadableStreams from it. This avoids the bug in the undici library around</span><span class="s3">\n </span><span class="s1">* response cloning.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* After cloning, the original response's body will be consumed and closed.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @see https://github.com/vercel/next.js/pull/73274</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param original - The original response to clone.</span><span class="s3">\n </span><span class="s1">* @returns A tuple containing two independent clones of the original response.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function cloneResponse(original: Response): [Response, Response] {</span><span class="s3">\n  </span><span class="s1">// If the response has no body, then we can just return the original response</span><span class="s3">\n  </span><span class="s1">// twice because it's immutable.</span><span class="s3">\n  </span><span class="s1">if (!original.body) {</span><span class="s3">\n    </span><span class="s1">return [original, original]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const [body1, body2] = original.body.tee()</span><span class="s3">\n\n  </span><span class="s1">const cloned1 = new Response(body1, {</span><span class="s3">\n    </span><span class="s1">status: original.status,</span><span class="s3">\n    </span><span class="s1">statusText: original.statusText,</span><span class="s3">\n    </span><span class="s1">headers: original.headers,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">Object.defineProperty(cloned1, 'url', {</span><span class="s3">\n    </span><span class="s1">value: original.url,</span><span class="s3">\n    </span><span class="s1">// How the original response.url behaves</span><span class="s3">\n    </span><span class="s1">configurable: true,</span><span class="s3">\n    </span><span class="s1">enumerable: true,</span><span class="s3">\n    </span><span class="s1">writable: false,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// The Fetch Standard allows users to skip consuming the response body by</span><span class="s3">\n  </span><span class="s1">// relying on garbage collection to release connection resources.</span><span class="s3">\n  </span><span class="s1">// https://github.com/nodejs/undici?tab=readme-ov-file#garbage-collection</span><span class="s3">\n  </span><span class="s1">//</span><span class="s3">\n  </span><span class="s1">// To cancel the stream you then need to cancel both resulting branches.</span><span class="s3">\n  </span><span class="s1">// Teeing a stream will generally lock it for the duration, preventing other</span><span class="s3">\n  </span><span class="s1">// readers from locking it.</span><span class="s3">\n  </span><span class="s1">// https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/tee</span><span class="s3">\n\n  </span><span class="s1">// cloned2 is stored in a react cache and cloned for subsequent requests.</span><span class="s3">\n  </span><span class="s1">// It is the original request, and is is garbage collected by a</span><span class="s3">\n  </span><span class="s1">// FinalizationRegistry in Undici, but since we're tee-ing the stream</span><span class="s3">\n  </span><span class="s1">// ourselves, we need to cancel clone1's stream (the response returned from</span><span class="s3">\n  </span><span class="s1">// our dedupe fetch) when clone1 is reclaimed, otherwise we leak memory.</span><span class="s3">\n  </span><span class="s1">if (registry &amp;&amp; cloned1.body) {</span><span class="s3">\n    </span><span class="s1">registry.register(cloned1, new WeakRef(cloned1.body))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const cloned2 = new Response(body2, {</span><span class="s3">\n    </span><span class="s1">status: original.status,</span><span class="s3">\n    </span><span class="s1">statusText: original.statusText,</span><span class="s3">\n    </span><span class="s1">headers: original.headers,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">Object.defineProperty(cloned2, 'url', {</span><span class="s3">\n    </span><span class="s1">value: original.url,</span><span class="s3">\n    </span><span class="s1">// How the original response.url behaves</span><span class="s3">\n    </span><span class="s1">configurable: true,</span><span class="s3">\n    </span><span class="s1">enumerable: true,</span><span class="s3">\n    </span><span class="s1">writable: false,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return [cloned1, cloned2]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;noop&quot;</span><span class="s0">,</span><span class="s1">&quot;registry&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;FinalizationRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;weakRef&quot;</span><span class="s0">,</span><span class="s1">&quot;stream&quot;</span><span class="s0">,</span><span class="s1">&quot;deref&quot;</span><span class="s0">,</span><span class="s1">&quot;locked&quot;</span><span class="s0">,</span><span class="s1">&quot;cancel&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;original&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;body1&quot;</span><span class="s0">,</span><span class="s1">&quot;body2&quot;</span><span class="s0">,</span><span class="s1">&quot;tee&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned1&quot;</span><span class="s0">,</span><span class="s1">&quot;Response&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;statusText&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;configurable&quot;</span><span class="s0">,</span><span class="s1">&quot;enumerable&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;register&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakRef&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned2&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAAA,MAAMA,OAAO,KAAO;AAEpB,IAAIC;AAEJ,IAAIC,WAAWC,oBAAoB,EAAE;IACnCF,WAAW,IAAIE,qBAAqB,CAACC;QACnC,MAAMC,SAASD,QAAQE,KAAK;QAC5B,IAAID,UAAU,CAACA,OAAOE,MAAM,EAAE;YAC5BF,OAAOG,MAAM,CAAC,8CAA8CC,IAAI,CAACT;QACnE;IACF;AACF;AAcO,SAASU,cAAcC,QAAkB;IAC9C,6EAA6E;IAC7E,gCAAgC;IAChC,IAAI,CAACA,SAASC,IAAI,EAAE;QAClB,OAAO;YAACD;YAAUA;SAAS;IAC7B;IAEA,MAAM,CAACE,OAAOC,MAAM,GAAGH,SAASC,IAAI,CAACG,GAAG;IAExC,MAAMC,UAAU,IAAIC,SAASJ,OAAO;QAClCK,QAAQP,SAASO,MAAM;QACvBC,YAAYR,SAASQ,UAAU;QAC/BC,SAAST,SAASS,OAAO;IAC3B;IAEAC,OAAOC,cAAc,CAACN,SAAS,OAAO;QACpCO,OAAOZ,SAASa,GAAG;QACnB,wCAAwC;QACxCC,cAAc;QACdC,YAAY;QACZC,UAAU;IACZ;IAEA,yEAAyE;IACzE,iEAAiE;IACjE,yEAAyE;IACzE,EAAE;IACF,wEAAwE;IACxE,4EAA4E;IAC5E,2BAA2B;IAC3B,sEAAsE;IAEtE,yEAAyE;IACzE,+DAA+D;IAC/D,qEAAqE;IACrE,2EAA2E;IAC3E,wEAAwE;IACxE,IAAI1B,YAAYe,QAAQJ,IAAI,EAAE;QAC5BX,SAAS2B,QAAQ,CAACZ,SAAS,IAAIa,QAAQb,QAAQJ,IAAI;IACrD;IAEA,MAAMkB,UAAU,IAAIb,SAASH,OAAO;QAClCI,QAAQP,SAASO,MAAM;QACvBC,YAAYR,SAASQ,UAAU;QAC/BC,SAAST,SAASS,OAAO;IAC3B;IAEAC,OAAOC,cAAc,CAACQ,SAAS,OAAO;QACpCP,OAAOZ,SAASa,GAAG;QACnB,wCAAwC;QACxCC,cAAc;QACdC,YAAY;QACZC,UAAU;IACZ;IAEA,OAAO;QAACX;QAASc;KAAQ;AAC3B&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">18933</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/dedupe-fetch.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Based on https://github.com/facebook/react/blob/d4e78c42a94be027b4dc7ed2659a5fddfbf9bd4e/packages/react/src/ReactFetch.js</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">import * as React from 'react'</span><span class="s3">\n</span><span class="s1">import { cloneResponse } from './clone-response'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../../shared/lib/invariant-error'</span><span class="s3">\n\n</span><span class="s1">const simpleCacheKey = '[</span><span class="s3">\&quot;</span><span class="s1">GET</span><span class="s3">\&quot;</span><span class="s1">,[],null,</span><span class="s3">\&quot;</span><span class="s1">follow</span><span class="s3">\&quot;</span><span class="s1">,null,null,null,null]' // generateCacheKey(new Request('https://blank'));</span><span class="s3">\n\n</span><span class="s1">function generateCacheKey(request: Request): string {</span><span class="s3">\n  </span><span class="s1">// We pick the fields that goes into the key used to dedupe requests.</span><span class="s3">\n  </span><span class="s1">// We don't include the `cache` field, because we end up using whatever</span><span class="s3">\n  </span><span class="s1">// caching resulted from the first request.</span><span class="s3">\n  </span><span class="s1">// Notably we currently don't consider non-standard (or future) options.</span><span class="s3">\n  </span><span class="s1">// This might not be safe. TODO: warn for non-standard extensions differing.</span><span class="s3">\n  </span><span class="s1">// IF YOU CHANGE THIS UPDATE THE simpleCacheKey ABOVE.</span><span class="s3">\n  </span><span class="s1">return JSON.stringify([</span><span class="s3">\n    </span><span class="s1">request.method,</span><span class="s3">\n    </span><span class="s1">Array.from(request.headers.entries()),</span><span class="s3">\n    </span><span class="s1">request.mode,</span><span class="s3">\n    </span><span class="s1">request.redirect,</span><span class="s3">\n    </span><span class="s1">request.credentials,</span><span class="s3">\n    </span><span class="s1">request.referrer,</span><span class="s3">\n    </span><span class="s1">request.referrerPolicy,</span><span class="s3">\n    </span><span class="s1">request.integrity,</span><span class="s3">\n  </span><span class="s1">])</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type CacheEntry = [</span><span class="s3">\n  </span><span class="s1">key: string,</span><span class="s3">\n  </span><span class="s1">promise: Promise&lt;Response&gt;,</span><span class="s3">\n  </span><span class="s1">response: Response | null,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">export function createDedupeFetch(originalFetch: typeof fetch) {</span><span class="s3">\n  </span><span class="s1">const getCacheEntries = React.cache(</span><span class="s3">\n    </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars -- url is the cache key</span><span class="s3">\n    </span><span class="s1">(url: string): CacheEntry[] =&gt; []</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return function dedupeFetch(</span><span class="s3">\n    </span><span class="s1">resource: URL | RequestInfo,</span><span class="s3">\n    </span><span class="s1">options?: RequestInit</span><span class="s3">\n  </span><span class="s1">): Promise&lt;Response&gt; {</span><span class="s3">\n    </span><span class="s1">if (options &amp;&amp; options.signal) {</span><span class="s3">\n      </span><span class="s1">// If we're passed a signal, then we assume that</span><span class="s3">\n      </span><span class="s1">// someone else controls the lifetime of this object and opts out of</span><span class="s3">\n      </span><span class="s1">// caching. It's effectively the opt-out mechanism.</span><span class="s3">\n      </span><span class="s1">// Ideally we should be able to check this on the Request but</span><span class="s3">\n      </span><span class="s1">// it always gets initialized with its own signal so we don't</span><span class="s3">\n      </span><span class="s1">// know if it's supposed to override - unless we also override the</span><span class="s3">\n      </span><span class="s1">// Request constructor.</span><span class="s3">\n      </span><span class="s1">return originalFetch(resource, options)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Normalize the Request</span><span class="s3">\n    </span><span class="s1">let url: string</span><span class="s3">\n    </span><span class="s1">let cacheKey: string</span><span class="s3">\n    </span><span class="s1">if (typeof resource === 'string' &amp;&amp; !options) {</span><span class="s3">\n      </span><span class="s1">// Fast path.</span><span class="s3">\n      </span><span class="s1">cacheKey = simpleCacheKey</span><span class="s3">\n      </span><span class="s1">url = resource</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Normalize the request.</span><span class="s3">\n      </span><span class="s1">// if resource is not a string or a URL (its an instance of Request)</span><span class="s3">\n      </span><span class="s1">// then do not instantiate a new Request but instead</span><span class="s3">\n      </span><span class="s1">// reuse the request as to not disturb the body in the event it's a ReadableStream.</span><span class="s3">\n      </span><span class="s1">const request =</span><span class="s3">\n        </span><span class="s1">typeof resource === 'string' || resource instanceof URL</span><span class="s3">\n          </span><span class="s1">? new Request(resource, options)</span><span class="s3">\n          </span><span class="s1">: resource</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">(request.method !== 'GET' &amp;&amp; request.method !== 'HEAD') ||</span><span class="s3">\n        </span><span class="s1">request.keepalive</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">// We currently don't dedupe requests that might have side-effects. Those</span><span class="s3">\n        </span><span class="s1">// have to be explicitly cached. We assume that the request doesn't have a</span><span class="s3">\n        </span><span class="s1">// body if it's GET or HEAD.</span><span class="s3">\n        </span><span class="s1">// keepalive gets treated the same as if you passed a custom cache signal.</span><span class="s3">\n        </span><span class="s1">return originalFetch(resource, options)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">cacheKey = generateCacheKey(request)</span><span class="s3">\n      </span><span class="s1">url = request.url</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const cacheEntries = getCacheEntries(url)</span><span class="s3">\n    </span><span class="s1">for (let i = 0, j = cacheEntries.length; i &lt; j; i += 1) {</span><span class="s3">\n      </span><span class="s1">const [key, promise] = cacheEntries[i]</span><span class="s3">\n      </span><span class="s1">if (key === cacheKey) {</span><span class="s3">\n        </span><span class="s1">return promise.then(() =&gt; {</span><span class="s3">\n          </span><span class="s1">const response = cacheEntries[i][2]</span><span class="s3">\n          </span><span class="s1">if (!response) throw new InvariantError('No cached response')</span><span class="s3">\n\n          </span><span class="s1">// We're cloning the response using this utility because there exists</span><span class="s3">\n          </span><span class="s1">// a bug in the undici library around response cloning. See the</span><span class="s3">\n          </span><span class="s1">// following pull request for more details:</span><span class="s3">\n          </span><span class="s1">// https://github.com/vercel/next.js/pull/73274</span><span class="s3">\n          </span><span class="s1">const [cloned1, cloned2] = cloneResponse(response)</span><span class="s3">\n          </span><span class="s1">cacheEntries[i][2] = cloned2</span><span class="s3">\n          </span><span class="s1">return cloned1</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// We pass the original arguments here in case normalizing the Request</span><span class="s3">\n    </span><span class="s1">// doesn't include all the options in this environment.</span><span class="s3">\n    </span><span class="s1">const promise = originalFetch(resource, options)</span><span class="s3">\n    </span><span class="s1">const entry: CacheEntry = [cacheKey, promise, null]</span><span class="s3">\n    </span><span class="s1">cacheEntries.push(entry)</span><span class="s3">\n\n    </span><span class="s1">return promise.then((response) =&gt; {</span><span class="s3">\n      </span><span class="s1">// We're cloning the response using this utility because there exists</span><span class="s3">\n      </span><span class="s1">// a bug in the undici library around response cloning. See the</span><span class="s3">\n      </span><span class="s1">// following pull request for more details:</span><span class="s3">\n      </span><span class="s1">// https://github.com/vercel/next.js/pull/73274</span><span class="s3">\n      </span><span class="s1">const [cloned1, cloned2] = cloneResponse(response)</span><span class="s3">\n      </span><span class="s1">entry[2] = cloned2</span><span class="s3">\n      </span><span class="s1">return cloned1</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;simpleCacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;generateCacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;redirect&quot;</span><span class="s0">,</span><span class="s1">&quot;credentials&quot;</span><span class="s0">,</span><span class="s1">&quot;referrer&quot;</span><span class="s0">,</span><span class="s1">&quot;referrerPolicy&quot;</span><span class="s0">,</span><span class="s1">&quot;integrity&quot;</span><span class="s0">,</span><span class="s1">&quot;createDedupeFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;originalFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;dedupeFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;resource&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;Request&quot;</span><span class="s0">,</span><span class="s1">&quot;keepalive&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;j&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned1&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned2&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19046</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/lib/batcher.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { SchedulerFn } from './scheduler'</span><span class="s3">\n\n</span><span class="s1">import { DetachedPromise } from './detached-promise'</span><span class="s3">\n\n</span><span class="s1">type CacheKeyFn&lt;K, C extends string | number | null&gt; = (</span><span class="s3">\n  </span><span class="s1">key: K</span><span class="s3">\n</span><span class="s1">) =&gt; PromiseLike&lt;C&gt; | C</span><span class="s3">\n\n</span><span class="s1">type BatcherOptions&lt;K, C extends string | number | null&gt; = {</span><span class="s3">\n  </span><span class="s1">cacheKeyFn?: CacheKeyFn&lt;K, C&gt;</span><span class="s3">\n  </span><span class="s1">schedulerFn?: SchedulerFn&lt;void&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type WorkFn&lt;V, C&gt; = (</span><span class="s3">\n  </span><span class="s1">key: C,</span><span class="s3">\n  </span><span class="s1">resolve: (value: V | PromiseLike&lt;V&gt;) =&gt; void</span><span class="s3">\n</span><span class="s1">) =&gt; Promise&lt;V&gt;</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* A wrapper for a function that will only allow one call to the function to</span><span class="s3">\n </span><span class="s1">* execute at a time.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export class Batcher&lt;K, V, C extends string | number | null&gt; {</span><span class="s3">\n  </span><span class="s1">private readonly pending = new Map&lt;C, Promise&lt;V&gt;&gt;()</span><span class="s3">\n\n  </span><span class="s1">protected constructor(</span><span class="s3">\n    </span><span class="s1">private readonly cacheKeyFn?: CacheKeyFn&lt;K, C&gt;,</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* A function that will be called to schedule the wrapped function to be</span><span class="s3">\n     </span><span class="s1">* executed. This defaults to a function that will execute the function</span><span class="s3">\n     </span><span class="s1">* immediately.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">private readonly schedulerFn: SchedulerFn&lt;void&gt; = (fn) =&gt; fn()</span><span class="s3">\n  </span><span class="s1">) {}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Creates a new instance of PendingWrapper. If the key extends a string or</span><span class="s3">\n   </span><span class="s1">* number, the key will be used as the cache key. If the key is an object, a</span><span class="s3">\n   </span><span class="s1">* cache key function must be provided.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public static create&lt;K extends string | number | null, V&gt;(</span><span class="s3">\n    </span><span class="s1">options?: BatcherOptions&lt;K, K&gt;</span><span class="s3">\n  </span><span class="s1">): Batcher&lt;K, V, K&gt;</span><span class="s3">\n  </span><span class="s1">public static create&lt;K, V, C extends string | number | null&gt;(</span><span class="s3">\n    </span><span class="s1">options: BatcherOptions&lt;K, C&gt; &amp;</span><span class="s3">\n      </span><span class="s1">Required&lt;Pick&lt;BatcherOptions&lt;K, C&gt;, 'cacheKeyFn'&gt;&gt;</span><span class="s3">\n  </span><span class="s1">): Batcher&lt;K, V, C&gt;</span><span class="s3">\n  </span><span class="s1">public static create&lt;K, V, C extends string | number | null&gt;(</span><span class="s3">\n    </span><span class="s1">options?: BatcherOptions&lt;K, C&gt;</span><span class="s3">\n  </span><span class="s1">): Batcher&lt;K, V, C&gt; {</span><span class="s3">\n    </span><span class="s1">return new Batcher&lt;K, V, C&gt;(options?.cacheKeyFn, options?.schedulerFn)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Wraps a function in a promise that will be resolved or rejected only once</span><span class="s3">\n   </span><span class="s1">* for a given key. This will allow multiple calls to the function to be</span><span class="s3">\n   </span><span class="s1">* made, but only one will be executed at a time. The result of the first</span><span class="s3">\n   </span><span class="s1">* call will be returned to all callers.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param key the key to use for the cache</span><span class="s3">\n   </span><span class="s1">* @param fn the function to wrap</span><span class="s3">\n   </span><span class="s1">* @returns a promise that resolves to the result of the function</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public async batch(key: K, fn: WorkFn&lt;V, C&gt;): Promise&lt;V&gt; {</span><span class="s3">\n    </span><span class="s1">const cacheKey = (this.cacheKeyFn ? await this.cacheKeyFn(key) : key) as C</span><span class="s3">\n    </span><span class="s1">if (cacheKey === null) {</span><span class="s3">\n      </span><span class="s1">return fn(cacheKey, Promise.resolve)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const pending = this.pending.get(cacheKey)</span><span class="s3">\n    </span><span class="s1">if (pending) return pending</span><span class="s3">\n\n    </span><span class="s1">const { promise, resolve, reject } = new DetachedPromise&lt;V&gt;()</span><span class="s3">\n    </span><span class="s1">this.pending.set(cacheKey, promise)</span><span class="s3">\n\n    </span><span class="s1">this.schedulerFn(async () =&gt; {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">const result = await fn(cacheKey, resolve)</span><span class="s3">\n\n        </span><span class="s1">// Resolving a promise multiple times is a no-op, so we can safely</span><span class="s3">\n        </span><span class="s1">// resolve all pending promises with the same result.</span><span class="s3">\n        </span><span class="s1">resolve(result)</span><span class="s3">\n      </span><span class="s1">} catch (err) {</span><span class="s3">\n        </span><span class="s1">reject(err)</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">this.pending.delete(cacheKey)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">return promise</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;Batcher&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKeyFn&quot;</span><span class="s0">,</span><span class="s1">&quot;schedulerFn&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;pending&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;create&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;batch&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;AAEA,SAASA,eAAe,QAAQ,qBAAoB;;AAoB7C,MAAMC;IAGX,YACmBC,UAA6B,EAC9C;;;;KAIC,GACgBC,cAAiC,CAACC,KAAOA,IAAI,CAC9D;aAPiBF,UAAAA,GAAAA;aAMAC,WAAAA,GAAAA;aATFE,OAAAA,GAAU,IAAIC;IAU5B;IAcH,OAAcC,OACZC,OAA8B,EACZ;QAClB,OAAO,IAAIP,QAAiBO,WAAAA,OAAAA,KAAAA,IAAAA,QAASN,UAAU,EAAEM,WAAAA,OAAAA,KAAAA,IAAAA,QAASL,WAAW;IACvE;IAEA;;;;;;;;;GASC,GACD,MAAaM,MAAMC,GAAM,EAAEN,EAAgB,EAAc;QACvD,MAAMO,WAAY,IAAI,CAACT,UAAU,GAAG,MAAM,IAAI,CAACA,UAAU,CAACQ,OAAOA;QACjE,IAAIC,aAAa,MAAM;YACrB,OAAOP,GAAGO,UAAUC,QAAQC,OAAO;QACrC;QAEA,MAAMR,UAAU,IAAI,CAACA,OAAO,CAACS,GAAG,CAACH;QACjC,IAAIN,SAAS,OAAOA;QAEpB,MAAM,EAAEU,OAAO,EAAEF,OAAO,EAAEG,MAAM,EAAE,GAAG,IAAIhB,oLAAAA;QACzC,IAAI,CAACK,OAAO,CAACY,GAAG,CAACN,UAAUI;QAE3B,IAAI,CAACZ,WAAW,CAAC;YACf,IAAI;gBACF,MAAMe,SAAS,MAAMd,GAAGO,UAAUE;gBAElC,kEAAkE;gBAClE,qDAAqD;gBACrDA,QAAQK;YACV,EAAE,OAAOC,KAAK;gBACZH,OAAOG;YACT,SAAU;gBACR,IAAI,CAACd,OAAO,CAACe,MAAM,CAACT;YACtB;QACF;QAEA,OAAOI;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19102</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/response-cache/types.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders } from 'http'</span><span class="s3">\n</span><span class="s1">import type RenderResult from '../render-result'</span><span class="s3">\n</span><span class="s1">import type { CacheControl, Revalidate } from '../lib/cache-control'</span><span class="s3">\n</span><span class="s1">import type { RouteKind } from '../route-kind'</span><span class="s3">\n\n</span><span class="s1">export interface ResponseCacheBase {</span><span class="s3">\n  </span><span class="s1">get(</span><span class="s3">\n    </span><span class="s1">key: string | null,</span><span class="s3">\n    </span><span class="s1">responseGenerator: ResponseGenerator,</span><span class="s3">\n    </span><span class="s1">context: {</span><span class="s3">\n      </span><span class="s1">isOnDemandRevalidate?: boolean</span><span class="s3">\n      </span><span class="s1">isPrefetch?: boolean</span><span class="s3">\n      </span><span class="s1">incrementalCache: IncrementalCache</span><span class="s3">\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* This is a hint to the cache to help it determine what kind of route</span><span class="s3">\n       </span><span class="s1">* this is so it knows where to look up the cache entry from. If not</span><span class="s3">\n       </span><span class="s1">* provided it will test the filesystem to check.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">routeKind: RouteKind</span><span class="s3">\n\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* True if this is a fallback request.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">isFallback?: boolean</span><span class="s3">\n\n      </span><span class="s1">/**</span><span class="s3">\n       </span><span class="s1">* True if the route is enabled for PPR.</span><span class="s3">\n       </span><span class="s1">*/</span><span class="s3">\n      </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">): Promise&lt;ResponseCacheEntry | null&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// The server components HMR cache might store other data as well in the future,</span><span class="s3">\n</span><span class="s1">// at which point this should be refactored to a discriminated union type.</span><span class="s3">\n</span><span class="s1">export interface ServerComponentsHmrCache {</span><span class="s3">\n  </span><span class="s1">get(key: string): CachedFetchData | undefined</span><span class="s3">\n  </span><span class="s1">set(key: string, data: CachedFetchData): void</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type CachedFetchData = {</span><span class="s3">\n  </span><span class="s1">headers: Record&lt;string, string&gt;</span><span class="s3">\n  </span><span class="s1">body: string</span><span class="s3">\n  </span><span class="s1">url: string</span><span class="s3">\n  </span><span class="s1">status?: number</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const enum CachedRouteKind {</span><span class="s3">\n  </span><span class="s1">APP_PAGE = 'APP_PAGE',</span><span class="s3">\n  </span><span class="s1">APP_ROUTE = 'APP_ROUTE',</span><span class="s3">\n  </span><span class="s1">PAGES = 'PAGES',</span><span class="s3">\n  </span><span class="s1">FETCH = 'FETCH',</span><span class="s3">\n  </span><span class="s1">REDIRECT = 'REDIRECT',</span><span class="s3">\n  </span><span class="s1">IMAGE = 'IMAGE',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedFetchValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.FETCH</span><span class="s3">\n  </span><span class="s1">data: CachedFetchData</span><span class="s3">\n  </span><span class="s1">// tags are only present with file-system-cache</span><span class="s3">\n  </span><span class="s1">// fetch cache stores tags outside of cache entry</span><span class="s3">\n  </span><span class="s1">tags?: string[]</span><span class="s3">\n  </span><span class="s1">revalidate: number</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedRedirectValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.REDIRECT</span><span class="s3">\n  </span><span class="s1">props: Object</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedAppPageValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.APP_PAGE</span><span class="s3">\n  </span><span class="s1">// this needs to be a RenderResult so since renderResponse</span><span class="s3">\n  </span><span class="s1">// expects that type instead of a string</span><span class="s3">\n  </span><span class="s1">html: RenderResult</span><span class="s3">\n  </span><span class="s1">rscData: Buffer | undefined</span><span class="s3">\n  </span><span class="s1">status: number | undefined</span><span class="s3">\n  </span><span class="s1">postponed: string | undefined</span><span class="s3">\n  </span><span class="s1">headers: OutgoingHttpHeaders | undefined</span><span class="s3">\n  </span><span class="s1">segmentData: Map&lt;string, Buffer&gt; | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedPageValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.PAGES</span><span class="s3">\n  </span><span class="s1">// this needs to be a RenderResult so since renderResponse</span><span class="s3">\n  </span><span class="s1">// expects that type instead of a string</span><span class="s3">\n  </span><span class="s1">html: RenderResult</span><span class="s3">\n  </span><span class="s1">pageData: Object</span><span class="s3">\n  </span><span class="s1">status: number | undefined</span><span class="s3">\n  </span><span class="s1">headers: OutgoingHttpHeaders | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedRouteValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.APP_ROUTE</span><span class="s3">\n  </span><span class="s1">// this needs to be a RenderResult so since renderResponse</span><span class="s3">\n  </span><span class="s1">// expects that type instead of a string</span><span class="s3">\n  </span><span class="s1">body: Buffer</span><span class="s3">\n  </span><span class="s1">status: number</span><span class="s3">\n  </span><span class="s1">headers: OutgoingHttpHeaders</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface CachedImageValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.IMAGE</span><span class="s3">\n  </span><span class="s1">etag: string</span><span class="s3">\n  </span><span class="s1">upstreamEtag: string</span><span class="s3">\n  </span><span class="s1">buffer: Buffer</span><span class="s3">\n  </span><span class="s1">extension: string</span><span class="s3">\n  </span><span class="s1">isMiss?: boolean</span><span class="s3">\n  </span><span class="s1">isStale?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalCachedAppPageValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.APP_PAGE</span><span class="s3">\n  </span><span class="s1">// this needs to be a string since the cache expects to store</span><span class="s3">\n  </span><span class="s1">// the string value</span><span class="s3">\n  </span><span class="s1">html: string</span><span class="s3">\n  </span><span class="s1">rscData: Buffer | undefined</span><span class="s3">\n  </span><span class="s1">headers: OutgoingHttpHeaders | undefined</span><span class="s3">\n  </span><span class="s1">postponed: string | undefined</span><span class="s3">\n  </span><span class="s1">status: number | undefined</span><span class="s3">\n  </span><span class="s1">segmentData: Map&lt;string, Buffer&gt; | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalCachedPageValue {</span><span class="s3">\n  </span><span class="s1">kind: CachedRouteKind.PAGES</span><span class="s3">\n  </span><span class="s1">// this needs to be a string since the cache expects to store</span><span class="s3">\n  </span><span class="s1">// the string value</span><span class="s3">\n  </span><span class="s1">html: string</span><span class="s3">\n  </span><span class="s1">pageData: Object</span><span class="s3">\n  </span><span class="s1">headers: OutgoingHttpHeaders | undefined</span><span class="s3">\n  </span><span class="s1">status: number | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalResponseCacheEntry {</span><span class="s3">\n  </span><span class="s1">cacheControl?: CacheControl</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* timestamp in milliseconds to revalidate after</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">revalidateAfter?: Revalidate</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `-1` here dictates a blocking revalidate should be used</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isStale?: boolean | -1</span><span class="s3">\n  </span><span class="s1">isMiss?: boolean</span><span class="s3">\n  </span><span class="s1">value: Exclude&lt;IncrementalCacheValue, CachedFetchValue&gt; | null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalFetchCacheEntry {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* `-1` here dictates a blocking revalidate should be used</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isStale?: boolean | -1</span><span class="s3">\n  </span><span class="s1">value: CachedFetchValue</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type IncrementalCacheEntry =</span><span class="s3">\n  </span><span class="s1">| IncrementalResponseCacheEntry</span><span class="s3">\n  </span><span class="s1">| IncrementalFetchCacheEntry</span><span class="s3">\n\n</span><span class="s1">export type IncrementalCacheValue =</span><span class="s3">\n  </span><span class="s1">| CachedRedirectValue</span><span class="s3">\n  </span><span class="s1">| IncrementalCachedPageValue</span><span class="s3">\n  </span><span class="s1">| IncrementalCachedAppPageValue</span><span class="s3">\n  </span><span class="s1">| CachedImageValue</span><span class="s3">\n  </span><span class="s1">| CachedFetchValue</span><span class="s3">\n  </span><span class="s1">| CachedRouteValue</span><span class="s3">\n\n</span><span class="s1">export type ResponseCacheValue =</span><span class="s3">\n  </span><span class="s1">| CachedRedirectValue</span><span class="s3">\n  </span><span class="s1">| CachedPageValue</span><span class="s3">\n  </span><span class="s1">| CachedAppPageValue</span><span class="s3">\n  </span><span class="s1">| CachedImageValue</span><span class="s3">\n  </span><span class="s1">| CachedRouteValue</span><span class="s3">\n\n</span><span class="s1">export type ResponseCacheEntry = {</span><span class="s3">\n  </span><span class="s1">cacheControl?: CacheControl</span><span class="s3">\n  </span><span class="s1">value: ResponseCacheValue | null</span><span class="s3">\n  </span><span class="s1">isStale?: boolean | -1</span><span class="s3">\n  </span><span class="s1">isMiss?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* @param hasResolved whether the responseGenerator has resolved it's promise</span><span class="s3">\n </span><span class="s1">* @param previousCacheEntry the previous cache entry if it exists or the current</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type ResponseGenerator = (state: {</span><span class="s3">\n  </span><span class="s1">hasResolved: boolean</span><span class="s3">\n  </span><span class="s1">previousCacheEntry?: IncrementalResponseCacheEntry | null</span><span class="s3">\n  </span><span class="s1">isRevalidating?: boolean</span><span class="s3">\n  </span><span class="s1">span?: any</span><span class="s3">\n</span><span class="s1">}) =&gt; Promise&lt;ResponseCacheEntry | null&gt;</span><span class="s3">\n\n</span><span class="s1">export const enum IncrementalCacheKind {</span><span class="s3">\n  </span><span class="s1">APP_PAGE = 'APP_PAGE',</span><span class="s3">\n  </span><span class="s1">APP_ROUTE = 'APP_ROUTE',</span><span class="s3">\n  </span><span class="s1">PAGES = 'PAGES',</span><span class="s3">\n  </span><span class="s1">FETCH = 'FETCH',</span><span class="s3">\n  </span><span class="s1">IMAGE = 'IMAGE',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface GetIncrementalFetchCacheContext {</span><span class="s3">\n  </span><span class="s1">kind: IncrementalCacheKind.FETCH</span><span class="s3">\n  </span><span class="s1">revalidate?: Revalidate</span><span class="s3">\n  </span><span class="s1">fetchUrl?: string</span><span class="s3">\n  </span><span class="s1">fetchIdx?: number</span><span class="s3">\n  </span><span class="s1">tags?: string[]</span><span class="s3">\n  </span><span class="s1">softTags?: string[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface GetIncrementalResponseCacheContext {</span><span class="s3">\n  </span><span class="s1">kind: Exclude&lt;IncrementalCacheKind, IncrementalCacheKind.FETCH&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True if the route is enabled for PPR.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True if this is a fallback request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isFallback: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface SetIncrementalFetchCacheContext {</span><span class="s3">\n  </span><span class="s1">fetchCache: true</span><span class="s3">\n  </span><span class="s1">fetchUrl?: string</span><span class="s3">\n  </span><span class="s1">fetchIdx?: number</span><span class="s3">\n  </span><span class="s1">tags?: string[]</span><span class="s3">\n  </span><span class="s1">isImplicitBuildTimeCache?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface SetIncrementalResponseCacheContext {</span><span class="s3">\n  </span><span class="s1">fetchCache?: false</span><span class="s3">\n  </span><span class="s1">cacheControl?: CacheControl</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True if the route is enabled for PPR.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* True if this is a fallback request.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">isFallback?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalResponseCache {</span><span class="s3">\n  </span><span class="s1">get(</span><span class="s3">\n    </span><span class="s1">cacheKey: string,</span><span class="s3">\n    </span><span class="s1">ctx: GetIncrementalResponseCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;IncrementalResponseCacheEntry | null&gt;</span><span class="s3">\n  </span><span class="s1">set(</span><span class="s3">\n    </span><span class="s1">key: string,</span><span class="s3">\n    </span><span class="s1">data: Exclude&lt;IncrementalCacheValue, CachedFetchValue&gt; | null,</span><span class="s3">\n    </span><span class="s1">ctx: SetIncrementalResponseCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface IncrementalCache extends IncrementalResponseCache {</span><span class="s3">\n  </span><span class="s1">get(</span><span class="s3">\n    </span><span class="s1">cacheKey: string,</span><span class="s3">\n    </span><span class="s1">ctx: GetIncrementalFetchCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;IncrementalFetchCacheEntry | null&gt;</span><span class="s3">\n  </span><span class="s1">get(</span><span class="s3">\n    </span><span class="s1">cacheKey: string,</span><span class="s3">\n    </span><span class="s1">ctx: GetIncrementalResponseCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;IncrementalResponseCacheEntry | null&gt;</span><span class="s3">\n  </span><span class="s1">set(</span><span class="s3">\n    </span><span class="s1">key: string,</span><span class="s3">\n    </span><span class="s1">data: CachedFetchValue | null,</span><span class="s3">\n    </span><span class="s1">ctx: SetIncrementalFetchCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt;</span><span class="s3">\n  </span><span class="s1">set(</span><span class="s3">\n    </span><span class="s1">key: string,</span><span class="s3">\n    </span><span class="s1">data: Exclude&lt;IncrementalCacheValue, CachedFetchValue&gt; | null,</span><span class="s3">\n    </span><span class="s1">ctx: SetIncrementalResponseCacheContext</span><span class="s3">\n  </span><span class="s1">): Promise&lt;void&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;CachedRouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;IncrementalCacheKind&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AA+CO,IAAWA,kBAAAA,WAAAA,GAAAA,SAAAA,eAAAA;;;;;;;WAAAA;MAOjB;AA0IM,IAAWC,uBAAAA,WAAAA,GAAAA,SAAAA,oBAAAA;;;;;;WAAAA;MAMjB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19129</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/render-result.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { OutgoingHttpHeaders, ServerResponse } from 'http'</span><span class="s3">\n</span><span class="s1">import type { CacheControl } from './lib/cache-control'</span><span class="s3">\n</span><span class="s1">import type { FetchMetrics } from './base-http'</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">chainStreams,</span><span class="s3">\n  </span><span class="s1">streamFromBuffer,</span><span class="s3">\n  </span><span class="s1">streamFromString,</span><span class="s3">\n  </span><span class="s1">streamToString,</span><span class="s3">\n</span><span class="s1">} from './stream-utils/node-web-streams-helper'</span><span class="s3">\n</span><span class="s1">import { isAbortError, pipeToNodeResponse } from './pipe-readable'</span><span class="s3">\n</span><span class="s1">import type { RenderResumeDataCache } from './resume-data-cache/resume-data-cache'</span><span class="s3">\n</span><span class="s1">import { InvariantError } from '../shared/lib/invariant-error'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">HTML_CONTENT_TYPE_HEADER,</span><span class="s3">\n  </span><span class="s1">JSON_CONTENT_TYPE_HEADER,</span><span class="s3">\n  </span><span class="s1">TEXT_PLAIN_CONTENT_TYPE_HEADER,</span><span class="s3">\n</span><span class="s1">} from '../lib/constants'</span><span class="s3">\n</span><span class="s1">import type { RSC_CONTENT_TYPE_HEADER } from '../client/components/app-router-headers'</span><span class="s3">\n\n</span><span class="s1">type ContentTypeOption =</span><span class="s3">\n  </span><span class="s1">| typeof RSC_CONTENT_TYPE_HEADER // For App Page RSC responses</span><span class="s3">\n  </span><span class="s1">| typeof HTML_CONTENT_TYPE_HEADER // For App Page, Pages HTML responses</span><span class="s3">\n  </span><span class="s1">| typeof JSON_CONTENT_TYPE_HEADER // For API routes, Next.js data requests</span><span class="s3">\n  </span><span class="s1">| typeof TEXT_PLAIN_CONTENT_TYPE_HEADER // For simplified errors</span><span class="s3">\n\n</span><span class="s1">export type AppPageRenderResultMetadata = {</span><span class="s3">\n  </span><span class="s1">flightData?: Buffer</span><span class="s3">\n  </span><span class="s1">cacheControl?: CacheControl</span><span class="s3">\n  </span><span class="s1">staticBailoutInfo?: {</span><span class="s3">\n    </span><span class="s1">stack?: string</span><span class="s3">\n    </span><span class="s1">description?: string</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The postponed state if the render had postponed and needs to be resumed.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">postponed?: string</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The headers to set on the response that were added by the render.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">headers?: OutgoingHttpHeaders</span><span class="s3">\n  </span><span class="s1">statusCode?: number</span><span class="s3">\n  </span><span class="s1">fetchTags?: string</span><span class="s3">\n  </span><span class="s1">fetchMetrics?: FetchMetrics</span><span class="s3">\n\n  </span><span class="s1">segmentData?: Map&lt;string, Buffer&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* In development, the resume data cache is warmed up before the render. This</span><span class="s3">\n   </span><span class="s1">* is attached to the metadata so that it can be used during the render. When</span><span class="s3">\n   </span><span class="s1">* prerendering, the filled resume data cache is also attached to the metadata</span><span class="s3">\n   </span><span class="s1">* so that it can be used when prerendering matching fallback shells.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">renderResumeDataCache?: RenderResumeDataCache</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type PagesRenderResultMetadata = {</span><span class="s3">\n  </span><span class="s1">pageData?: any</span><span class="s3">\n  </span><span class="s1">cacheControl?: CacheControl</span><span class="s3">\n  </span><span class="s1">assetQueryString?: string</span><span class="s3">\n  </span><span class="s1">isNotFound?: boolean</span><span class="s3">\n  </span><span class="s1">isRedirect?: boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type StaticRenderResultMetadata = {}</span><span class="s3">\n\n</span><span class="s1">export type RenderResultMetadata = AppPageRenderResultMetadata &amp;</span><span class="s3">\n  </span><span class="s1">PagesRenderResultMetadata &amp;</span><span class="s3">\n  </span><span class="s1">StaticRenderResultMetadata</span><span class="s3">\n\n</span><span class="s1">export type RenderResultResponse =</span><span class="s3">\n  </span><span class="s1">| ReadableStream&lt;Uint8Array&gt;[]</span><span class="s3">\n  </span><span class="s1">| ReadableStream&lt;Uint8Array&gt;</span><span class="s3">\n  </span><span class="s1">| string</span><span class="s3">\n  </span><span class="s1">| Buffer</span><span class="s3">\n  </span><span class="s1">| null</span><span class="s3">\n\n</span><span class="s1">export type RenderResultOptions&lt;</span><span class="s3">\n  </span><span class="s1">Metadata extends RenderResultMetadata = RenderResultMetadata,</span><span class="s3">\n</span><span class="s1">&gt; = {</span><span class="s3">\n  </span><span class="s1">contentType: ContentTypeOption | null</span><span class="s3">\n  </span><span class="s1">waitUntil?: Promise&lt;unknown&gt;</span><span class="s3">\n  </span><span class="s1">metadata: Metadata</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default class RenderResult&lt;</span><span class="s3">\n  </span><span class="s1">Metadata extends RenderResultMetadata = RenderResultMetadata,</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The detected content type for the response. This is used to set the</span><span class="s3">\n   </span><span class="s1">* `Content-Type` header.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public readonly contentType: ContentTypeOption | null</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The metadata for the response. This is used to set the revalidation times</span><span class="s3">\n   </span><span class="s1">* and other metadata.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public readonly metadata: Readonly&lt;Metadata&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The response itself. This can be a string, a stream, or null. If it's a</span><span class="s3">\n   </span><span class="s1">* string, then it's a static response. If it's a stream, then it's a</span><span class="s3">\n   </span><span class="s1">* dynamic response. If it's null, then the response was not found or was</span><span class="s3">\n   </span><span class="s1">* already sent.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private response: RenderResultResponse</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* A render result that represents an empty response. This is used to</span><span class="s3">\n   </span><span class="s1">* represent a response that was not found or was already sent.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public static readonly EMPTY = new RenderResult&lt;StaticRenderResultMetadata&gt;(</span><span class="s3">\n    </span><span class="s1">null,</span><span class="s3">\n    </span><span class="s1">{ metadata: {}, contentType: null }</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Creates a new RenderResult instance from a static response.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param value the static response value</span><span class="s3">\n   </span><span class="s1">* @param contentType the content type of the response</span><span class="s3">\n   </span><span class="s1">* @returns a new RenderResult instance</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public static fromStatic(</span><span class="s3">\n    </span><span class="s1">value: string | Buffer,</span><span class="s3">\n    </span><span class="s1">contentType: ContentTypeOption</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return new RenderResult&lt;StaticRenderResultMetadata&gt;(value, {</span><span class="s3">\n      </span><span class="s1">metadata: {},</span><span class="s3">\n      </span><span class="s1">contentType,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private readonly waitUntil?: Promise&lt;unknown&gt;</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">response: RenderResultResponse,</span><span class="s3">\n    </span><span class="s1">{ contentType, waitUntil, metadata }: RenderResultOptions&lt;Metadata&gt;</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">this.response = response</span><span class="s3">\n    </span><span class="s1">this.contentType = contentType</span><span class="s3">\n    </span><span class="s1">this.metadata = metadata</span><span class="s3">\n    </span><span class="s1">this.waitUntil = waitUntil</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public assignMetadata(metadata: Metadata) {</span><span class="s3">\n    </span><span class="s1">Object.assign(this.metadata, metadata)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns true if the response is null. It can be null if the response was</span><span class="s3">\n   </span><span class="s1">* not found or was already sent.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get isNull(): boolean {</span><span class="s3">\n    </span><span class="s1">return this.response === null</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns false if the response is a string. It can be a string if the page</span><span class="s3">\n   </span><span class="s1">* was prerendered. If it's not, then it was generated dynamically.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public get isDynamic(): boolean {</span><span class="s3">\n    </span><span class="s1">return typeof this.response !== 'string'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns the response if it is a string. If the page was dynamic, this will</span><span class="s3">\n   </span><span class="s1">* return a promise if the `stream` option is true, or it will throw an error.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param stream Whether or not to return a promise if the response is dynamic</span><span class="s3">\n   </span><span class="s1">* @returns The response as a string</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public toUnchunkedString(stream?: false): string</span><span class="s3">\n  </span><span class="s1">public toUnchunkedString(stream: true): Promise&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">public toUnchunkedString(stream = false): Promise&lt;string&gt; | string {</span><span class="s3">\n    </span><span class="s1">if (this.response === null) {</span><span class="s3">\n      </span><span class="s1">// If the response is null, return an empty string. This behavior is</span><span class="s3">\n      </span><span class="s1">// intentional as we're now providing the `RenderResult.EMPTY` value.</span><span class="s3">\n      </span><span class="s1">return ''</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof this.response !== 'string') {</span><span class="s3">\n      </span><span class="s1">if (!stream) {</span><span class="s3">\n        </span><span class="s1">throw new InvariantError(</span><span class="s3">\n          </span><span class="s1">'dynamic responses cannot be unchunked. This is a bug in Next.js'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return streamToString(this.readable)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return this.response</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns a readable stream of the response.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private get readable(): ReadableStream&lt;Uint8Array&gt; {</span><span class="s3">\n    </span><span class="s1">if (this.response === null) {</span><span class="s3">\n      </span><span class="s1">// If the response is null, return an empty stream. This behavior is</span><span class="s3">\n      </span><span class="s1">// intentional as we're now providing the `RenderResult.EMPTY` value.</span><span class="s3">\n      </span><span class="s1">return new ReadableStream&lt;Uint8Array&gt;({</span><span class="s3">\n        </span><span class="s1">start(controller) {</span><span class="s3">\n          </span><span class="s1">controller.close()</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof this.response === 'string') {</span><span class="s3">\n      </span><span class="s1">return streamFromString(this.response)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (Buffer.isBuffer(this.response)) {</span><span class="s3">\n      </span><span class="s1">return streamFromBuffer(this.response)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// If the response is an array of streams, then chain them together.</span><span class="s3">\n    </span><span class="s1">if (Array.isArray(this.response)) {</span><span class="s3">\n      </span><span class="s1">return chainStreams(...this.response)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return this.response</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Coerces the response to an array of streams. This will convert the response</span><span class="s3">\n   </span><span class="s1">* to an array of streams if it is not already one.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @returns An array of streams</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">private coerce(): ReadableStream&lt;Uint8Array&gt;[] {</span><span class="s3">\n    </span><span class="s1">if (this.response === null) {</span><span class="s3">\n      </span><span class="s1">// If the response is null, return an empty stream. This behavior is</span><span class="s3">\n      </span><span class="s1">// intentional as we're now providing the `RenderResult.EMPTY` value.</span><span class="s3">\n      </span><span class="s1">return []</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof this.response === 'string') {</span><span class="s3">\n      </span><span class="s1">return [streamFromString(this.response)]</span><span class="s3">\n    </span><span class="s1">} else if (Array.isArray(this.response)) {</span><span class="s3">\n      </span><span class="s1">return this.response</span><span class="s3">\n    </span><span class="s1">} else if (Buffer.isBuffer(this.response)) {</span><span class="s3">\n      </span><span class="s1">return [streamFromBuffer(this.response)]</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">return [this.response]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Unshifts a new stream to the response. This will convert the response to an</span><span class="s3">\n   </span><span class="s1">* array of streams if it is not already one and will add the new stream to</span><span class="s3">\n   </span><span class="s1">* the start of the array. When this response is piped, all of the streams</span><span class="s3">\n   </span><span class="s1">* will be piped one after the other.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param readable The new stream to unshift</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public unshift(readable: ReadableStream&lt;Uint8Array&gt;): void {</span><span class="s3">\n    </span><span class="s1">// Coerce the response to an array of streams.</span><span class="s3">\n    </span><span class="s1">this.response = this.coerce()</span><span class="s3">\n\n    </span><span class="s1">// Add the new stream to the start of the array.</span><span class="s3">\n    </span><span class="s1">this.response.unshift(readable)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Chains a new stream to the response. This will convert the response to an</span><span class="s3">\n   </span><span class="s1">* array of streams if it is not already one and will add the new stream to</span><span class="s3">\n   </span><span class="s1">* the end. When this response is piped, all of the streams will be piped</span><span class="s3">\n   </span><span class="s1">* one after the other.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param readable The new stream to chain</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public push(readable: ReadableStream&lt;Uint8Array&gt;): void {</span><span class="s3">\n    </span><span class="s1">// Coerce the response to an array of streams.</span><span class="s3">\n    </span><span class="s1">this.response = this.coerce()</span><span class="s3">\n\n    </span><span class="s1">// Add the new stream to the end of the array.</span><span class="s3">\n    </span><span class="s1">this.response.push(readable)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Pipes the response to a writable stream. This will close/cancel the</span><span class="s3">\n   </span><span class="s1">* writable stream if an error is encountered. If this doesn't throw, then</span><span class="s3">\n   </span><span class="s1">* the writable stream will be closed or aborted.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param writable Writable stream to pipe the response to</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public async pipeTo(writable: WritableStream&lt;Uint8Array&gt;): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">await this.readable.pipeTo(writable, {</span><span class="s3">\n        </span><span class="s1">// We want to close the writable stream ourselves so that we can wait</span><span class="s3">\n        </span><span class="s1">// for the waitUntil promise to resolve before closing it. If an error</span><span class="s3">\n        </span><span class="s1">// is encountered, we'll abort the writable stream if we swallowed the</span><span class="s3">\n        </span><span class="s1">// error.</span><span class="s3">\n        </span><span class="s1">preventClose: true,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">// If there is a waitUntil promise, wait for it to resolve before</span><span class="s3">\n      </span><span class="s1">// closing the writable stream.</span><span class="s3">\n      </span><span class="s1">if (this.waitUntil) await this.waitUntil</span><span class="s3">\n\n      </span><span class="s1">// Close the writable stream.</span><span class="s3">\n      </span><span class="s1">await writable.close()</span><span class="s3">\n    </span><span class="s1">} catch (err) {</span><span class="s3">\n      </span><span class="s1">// If this is an abort error, we should abort the writable stream (as we</span><span class="s3">\n      </span><span class="s1">// took ownership of it when we started piping). We don't need to re-throw</span><span class="s3">\n      </span><span class="s1">// because we handled the error.</span><span class="s3">\n      </span><span class="s1">if (isAbortError(err)) {</span><span class="s3">\n        </span><span class="s1">// Abort the writable stream if an error is encountered.</span><span class="s3">\n        </span><span class="s1">await writable.abort(err)</span><span class="s3">\n\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// We're not aborting the writer here as when this method throws it's not</span><span class="s3">\n      </span><span class="s1">// clear as to how so the caller should assume it's their responsibility</span><span class="s3">\n      </span><span class="s1">// to clean up the writer.</span><span class="s3">\n      </span><span class="s1">throw err</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Pipes the response to a node response. This will close/cancel the node</span><span class="s3">\n   </span><span class="s1">* response if an error is encountered.</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param res</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public async pipeToNodeResponse(res: ServerResponse) {</span><span class="s3">\n    </span><span class="s1">await pipeToNodeResponse(this.readable, res, this.waitUntil)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;chainStreams&quot;</span><span class="s0">,</span><span class="s1">&quot;streamFromBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;streamFromString&quot;</span><span class="s0">,</span><span class="s1">&quot;streamToString&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbortError&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeToNodeResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;InvariantError&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderResult&quot;</span><span class="s0">,</span><span class="s1">&quot;EMPTY&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;contentType&quot;</span><span class="s0">,</span><span class="s1">&quot;fromStatic&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;assignMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;isNull&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;toUnchunkedString&quot;</span><span class="s0">,</span><span class="s1">&quot;stream&quot;</span><span class="s0">,</span><span class="s1">&quot;readable&quot;</span><span class="s0">,</span><span class="s1">&quot;ReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;controller&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;coerce&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;pipeTo&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;preventClose&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;abort&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19323</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/response-cache/utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n  </span><span class="s1">CachedRouteKind,</span><span class="s3">\n  </span><span class="s1">IncrementalCacheKind,</span><span class="s3">\n  </span><span class="s1">type CachedAppPageValue,</span><span class="s3">\n  </span><span class="s1">type CachedPageValue,</span><span class="s3">\n  </span><span class="s1">type IncrementalResponseCacheEntry,</span><span class="s3">\n  </span><span class="s1">type ResponseCacheEntry,</span><span class="s3">\n</span><span class="s1">} from './types'</span><span class="s3">\n\n</span><span class="s1">import RenderResult from '../render-result'</span><span class="s3">\n</span><span class="s1">import { RouteKind } from '../route-kind'</span><span class="s3">\n</span><span class="s1">import { HTML_CONTENT_TYPE_HEADER } from '../../lib/constants'</span><span class="s3">\n\n</span><span class="s1">export async function fromResponseCacheEntry(</span><span class="s3">\n  </span><span class="s1">cacheEntry: ResponseCacheEntry</span><span class="s3">\n</span><span class="s1">): Promise&lt;IncrementalResponseCacheEntry&gt; {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">...cacheEntry,</span><span class="s3">\n    </span><span class="s1">value:</span><span class="s3">\n      </span><span class="s1">cacheEntry.value?.kind === CachedRouteKind.PAGES</span><span class="s3">\n        </span><span class="s1">? {</span><span class="s3">\n            </span><span class="s1">kind: CachedRouteKind.PAGES,</span><span class="s3">\n            </span><span class="s1">html: await cacheEntry.value.html.toUnchunkedString(true),</span><span class="s3">\n            </span><span class="s1">pageData: cacheEntry.value.pageData,</span><span class="s3">\n            </span><span class="s1">headers: cacheEntry.value.headers,</span><span class="s3">\n            </span><span class="s1">status: cacheEntry.value.status,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">: cacheEntry.value?.kind === CachedRouteKind.APP_PAGE</span><span class="s3">\n          </span><span class="s1">? {</span><span class="s3">\n              </span><span class="s1">kind: CachedRouteKind.APP_PAGE,</span><span class="s3">\n              </span><span class="s1">html: await cacheEntry.value.html.toUnchunkedString(true),</span><span class="s3">\n              </span><span class="s1">postponed: cacheEntry.value.postponed,</span><span class="s3">\n              </span><span class="s1">rscData: cacheEntry.value.rscData,</span><span class="s3">\n              </span><span class="s1">headers: cacheEntry.value.headers,</span><span class="s3">\n              </span><span class="s1">status: cacheEntry.value.status,</span><span class="s3">\n              </span><span class="s1">segmentData: cacheEntry.value.segmentData,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">: cacheEntry.value,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function toResponseCacheEntry(</span><span class="s3">\n  </span><span class="s1">response: IncrementalResponseCacheEntry | null</span><span class="s3">\n</span><span class="s1">): Promise&lt;ResponseCacheEntry | null&gt; {</span><span class="s3">\n  </span><span class="s1">if (!response) return null</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">isMiss: response.isMiss,</span><span class="s3">\n    </span><span class="s1">isStale: response.isStale,</span><span class="s3">\n    </span><span class="s1">cacheControl: response.cacheControl,</span><span class="s3">\n    </span><span class="s1">value:</span><span class="s3">\n      </span><span class="s1">response.value?.kind === CachedRouteKind.PAGES</span><span class="s3">\n        </span><span class="s1">? ({</span><span class="s3">\n            </span><span class="s1">kind: CachedRouteKind.PAGES,</span><span class="s3">\n            </span><span class="s1">html: RenderResult.fromStatic(</span><span class="s3">\n              </span><span class="s1">response.value.html,</span><span class="s3">\n              </span><span class="s1">HTML_CONTENT_TYPE_HEADER</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n            </span><span class="s1">pageData: response.value.pageData,</span><span class="s3">\n            </span><span class="s1">headers: response.value.headers,</span><span class="s3">\n            </span><span class="s1">status: response.value.status,</span><span class="s3">\n          </span><span class="s1">} satisfies CachedPageValue)</span><span class="s3">\n        </span><span class="s1">: response.value?.kind === CachedRouteKind.APP_PAGE</span><span class="s3">\n          </span><span class="s1">? ({</span><span class="s3">\n              </span><span class="s1">kind: CachedRouteKind.APP_PAGE,</span><span class="s3">\n              </span><span class="s1">html: RenderResult.fromStatic(</span><span class="s3">\n                </span><span class="s1">response.value.html,</span><span class="s3">\n                </span><span class="s1">HTML_CONTENT_TYPE_HEADER</span><span class="s3">\n              </span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">rscData: response.value.rscData,</span><span class="s3">\n              </span><span class="s1">headers: response.value.headers,</span><span class="s3">\n              </span><span class="s1">status: response.value.status,</span><span class="s3">\n              </span><span class="s1">postponed: response.value.postponed,</span><span class="s3">\n              </span><span class="s1">segmentData: response.value.segmentData,</span><span class="s3">\n            </span><span class="s1">} satisfies CachedAppPageValue)</span><span class="s3">\n          </span><span class="s1">: response.value,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function routeKindToIncrementalCacheKind(</span><span class="s3">\n  </span><span class="s1">routeKind: RouteKind</span><span class="s3">\n</span><span class="s1">): Exclude&lt;IncrementalCacheKind, IncrementalCacheKind.FETCH&gt; {</span><span class="s3">\n  </span><span class="s1">switch (routeKind) {</span><span class="s3">\n    </span><span class="s1">case RouteKind.PAGES:</span><span class="s3">\n      </span><span class="s1">return IncrementalCacheKind.PAGES</span><span class="s3">\n    </span><span class="s1">case RouteKind.APP_PAGE:</span><span class="s3">\n      </span><span class="s1">return IncrementalCacheKind.APP_PAGE</span><span class="s3">\n    </span><span class="s1">case RouteKind.IMAGE:</span><span class="s3">\n      </span><span class="s1">return IncrementalCacheKind.IMAGE</span><span class="s3">\n    </span><span class="s1">case RouteKind.APP_ROUTE:</span><span class="s3">\n      </span><span class="s1">return IncrementalCacheKind.APP_ROUTE</span><span class="s3">\n    </span><span class="s1">case RouteKind.PAGES_API:</span><span class="s3">\n      </span><span class="s1">// Pages Router API routes are not cached in the incremental cache.</span><span class="s3">\n      </span><span class="s1">throw new Error(`Unexpected route kind ${routeKind}`)</span><span class="s3">\n    </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">return routeKind satisfies never</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;CachedRouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;IncrementalCacheKind&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderResult&quot;</span><span class="s0">,</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;HTML_CONTENT_TYPE_HEADER&quot;</span><span class="s0">,</span><span class="s1">&quot;fromResponseCacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;html&quot;</span><span class="s0">,</span><span class="s1">&quot;toUnchunkedString&quot;</span><span class="s0">,</span><span class="s1">&quot;pageData&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;postponed&quot;</span><span class="s0">,</span><span class="s1">&quot;rscData&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentData&quot;</span><span class="s0">,</span><span class="s1">&quot;toResponseCacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiss&quot;</span><span class="s0">,</span><span class="s1">&quot;isStale&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheControl&quot;</span><span class="s0">,</span><span class="s1">&quot;fromStatic&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKindToIncrementalCacheKind&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKind&quot;</span><span class="s0">,</span><span class="s1">&quot;IMAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_ROUTE&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_API&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19409</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/response-cache/index.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">ResponseCacheEntry,</span><span class="s3">\n  </span><span class="s1">ResponseGenerator,</span><span class="s3">\n  </span><span class="s1">ResponseCacheBase,</span><span class="s3">\n  </span><span class="s1">IncrementalResponseCacheEntry,</span><span class="s3">\n  </span><span class="s1">IncrementalResponseCache,</span><span class="s3">\n</span><span class="s1">} from './types'</span><span class="s3">\n\n</span><span class="s1">import { Batcher } from '../../lib/batcher'</span><span class="s3">\n</span><span class="s1">import { scheduleOnNextTick } from '../../lib/scheduler'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">fromResponseCacheEntry,</span><span class="s3">\n  </span><span class="s1">routeKindToIncrementalCacheKind,</span><span class="s3">\n  </span><span class="s1">toResponseCacheEntry,</span><span class="s3">\n</span><span class="s1">} from './utils'</span><span class="s3">\n</span><span class="s1">import type { RouteKind } from '../route-kind'</span><span class="s3">\n\n</span><span class="s1">export * from './types'</span><span class="s3">\n\n</span><span class="s1">export default class ResponseCache implements ResponseCacheBase {</span><span class="s3">\n  </span><span class="s1">private readonly batcher = Batcher.create&lt;</span><span class="s3">\n    </span><span class="s1">{ key: string; isOnDemandRevalidate: boolean },</span><span class="s3">\n    </span><span class="s1">IncrementalResponseCacheEntry | null,</span><span class="s3">\n    </span><span class="s1">string</span><span class="s3">\n  </span><span class="s1">&gt;({</span><span class="s3">\n    </span><span class="s1">// Ensure on-demand revalidate doesn't block normal requests, it should be</span><span class="s3">\n    </span><span class="s1">// safe to run an on-demand revalidate for the same key as a normal request.</span><span class="s3">\n    </span><span class="s1">cacheKeyFn: ({ key, isOnDemandRevalidate }) =&gt;</span><span class="s3">\n      </span><span class="s1">`${key}-${isOnDemandRevalidate ? '1' : '0'}`,</span><span class="s3">\n    </span><span class="s1">// We wait to do any async work until after we've added our promise to</span><span class="s3">\n    </span><span class="s1">// `pendingResponses` to ensure that any any other calls will reuse the</span><span class="s3">\n    </span><span class="s1">// same promise until we've fully finished our work.</span><span class="s3">\n    </span><span class="s1">schedulerFn: scheduleOnNextTick,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">private previousCacheItem?: {</span><span class="s3">\n    </span><span class="s1">key: string</span><span class="s3">\n    </span><span class="s1">entry: IncrementalResponseCacheEntry | null</span><span class="s3">\n    </span><span class="s1">expiresAt: number</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// we don't use minimal_mode name here as this.minimal_mode is</span><span class="s3">\n  </span><span class="s1">// statically replace for server runtimes but we need it to</span><span class="s3">\n  </span><span class="s1">// be dynamic here</span><span class="s3">\n  </span><span class="s1">private minimal_mode?: boolean</span><span class="s3">\n\n  </span><span class="s1">constructor(minimal_mode: boolean) {</span><span class="s3">\n    </span><span class="s1">this.minimal_mode = minimal_mode</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async get(</span><span class="s3">\n    </span><span class="s1">key: string | null,</span><span class="s3">\n    </span><span class="s1">responseGenerator: ResponseGenerator,</span><span class="s3">\n    </span><span class="s1">context: {</span><span class="s3">\n      </span><span class="s1">routeKind: RouteKind</span><span class="s3">\n      </span><span class="s1">isOnDemandRevalidate?: boolean</span><span class="s3">\n      </span><span class="s1">isPrefetch?: boolean</span><span class="s3">\n      </span><span class="s1">incrementalCache: IncrementalResponseCache</span><span class="s3">\n      </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n      </span><span class="s1">isFallback?: boolean</span><span class="s3">\n      </span><span class="s1">waitUntil?: (prom: Promise&lt;any&gt;) =&gt; void</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">): Promise&lt;ResponseCacheEntry | null&gt; {</span><span class="s3">\n    </span><span class="s1">// If there is no key for the cache, we can't possibly look this up in the</span><span class="s3">\n    </span><span class="s1">// cache so just return the result of the response generator.</span><span class="s3">\n    </span><span class="s1">if (!key) {</span><span class="s3">\n      </span><span class="s1">return responseGenerator({ hasResolved: false, previousCacheEntry: null })</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const {</span><span class="s3">\n      </span><span class="s1">incrementalCache,</span><span class="s3">\n      </span><span class="s1">isOnDemandRevalidate = false,</span><span class="s3">\n      </span><span class="s1">isFallback = false,</span><span class="s3">\n      </span><span class="s1">isRoutePPREnabled = false,</span><span class="s3">\n      </span><span class="s1">waitUntil,</span><span class="s3">\n    </span><span class="s1">} = context</span><span class="s3">\n\n    </span><span class="s1">const response = await this.batcher.batch(</span><span class="s3">\n      </span><span class="s1">{ key, isOnDemandRevalidate },</span><span class="s3">\n      </span><span class="s1">(cacheKey, resolve) =&gt; {</span><span class="s3">\n        </span><span class="s1">const prom = (async () =&gt; {</span><span class="s3">\n          </span><span class="s1">// We keep the previous cache entry around to leverage when the</span><span class="s3">\n          </span><span class="s1">// incremental cache is disabled in minimal mode.</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">this.minimal_mode &amp;&amp;</span><span class="s3">\n            </span><span class="s1">this.previousCacheItem?.key === cacheKey &amp;&amp;</span><span class="s3">\n            </span><span class="s1">this.previousCacheItem.expiresAt &gt; Date.now()</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">return this.previousCacheItem.entry</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Coerce the kindHint into a given kind for the incremental cache.</span><span class="s3">\n          </span><span class="s1">const kind = routeKindToIncrementalCacheKind(context.routeKind)</span><span class="s3">\n\n          </span><span class="s1">let resolved = false</span><span class="s3">\n          </span><span class="s1">let cachedResponse: IncrementalResponseCacheEntry | null = null</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">cachedResponse = !this.minimal_mode</span><span class="s3">\n              </span><span class="s1">? await incrementalCache.get(key, {</span><span class="s3">\n                  </span><span class="s1">kind,</span><span class="s3">\n                  </span><span class="s1">isRoutePPREnabled: context.isRoutePPREnabled,</span><span class="s3">\n                  </span><span class="s1">isFallback,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">: null</span><span class="s3">\n\n            </span><span class="s1">if (cachedResponse &amp;&amp; !isOnDemandRevalidate) {</span><span class="s3">\n              </span><span class="s1">resolve(cachedResponse)</span><span class="s3">\n              </span><span class="s1">resolved = true</span><span class="s3">\n\n              </span><span class="s1">if (!cachedResponse.isStale || context.isPrefetch) {</span><span class="s3">\n                </span><span class="s1">// The cached value is still valid, so we don't need</span><span class="s3">\n                </span><span class="s1">// to update it yet.</span><span class="s3">\n                </span><span class="s1">return null</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const cacheEntry = await responseGenerator({</span><span class="s3">\n              </span><span class="s1">hasResolved: resolved,</span><span class="s3">\n              </span><span class="s1">previousCacheEntry: cachedResponse,</span><span class="s3">\n              </span><span class="s1">isRevalidating: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">// If the cache entry couldn't be generated, we don't want to cache</span><span class="s3">\n            </span><span class="s1">// the result.</span><span class="s3">\n            </span><span class="s1">if (!cacheEntry) {</span><span class="s3">\n              </span><span class="s1">// Unset the previous cache item if it was set.</span><span class="s3">\n              </span><span class="s1">if (this.minimal_mode) this.previousCacheItem = undefined</span><span class="s3">\n              </span><span class="s1">return null</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const resolveValue = await fromResponseCacheEntry({</span><span class="s3">\n              </span><span class="s1">...cacheEntry,</span><span class="s3">\n              </span><span class="s1">isMiss: !cachedResponse,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">if (!resolveValue) {</span><span class="s3">\n              </span><span class="s1">// Unset the previous cache item if it was set.</span><span class="s3">\n              </span><span class="s1">if (this.minimal_mode) this.previousCacheItem = undefined</span><span class="s3">\n              </span><span class="s1">return null</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// For on-demand revalidate wait to resolve until cache is set.</span><span class="s3">\n            </span><span class="s1">// Otherwise resolve now.</span><span class="s3">\n            </span><span class="s1">if (!isOnDemandRevalidate &amp;&amp; !resolved) {</span><span class="s3">\n              </span><span class="s1">resolve(resolveValue)</span><span class="s3">\n              </span><span class="s1">resolved = true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// We want to persist the result only if it has a cache control value</span><span class="s3">\n            </span><span class="s1">// defined.</span><span class="s3">\n            </span><span class="s1">if (resolveValue.cacheControl) {</span><span class="s3">\n              </span><span class="s1">if (this.minimal_mode) {</span><span class="s3">\n                </span><span class="s1">this.previousCacheItem = {</span><span class="s3">\n                  </span><span class="s1">key: cacheKey,</span><span class="s3">\n                  </span><span class="s1">entry: resolveValue,</span><span class="s3">\n                  </span><span class="s1">expiresAt: Date.now() + 1000,</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">await incrementalCache.set(key, resolveValue.value, {</span><span class="s3">\n                  </span><span class="s1">cacheControl: resolveValue.cacheControl,</span><span class="s3">\n                  </span><span class="s1">isRoutePPREnabled,</span><span class="s3">\n                  </span><span class="s1">isFallback,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">return resolveValue</span><span class="s3">\n          </span><span class="s1">} catch (err) {</span><span class="s3">\n            </span><span class="s1">// When a path is erroring we automatically re-set the existing cache</span><span class="s3">\n            </span><span class="s1">// with new revalidate and expire times to prevent non-stop retrying.</span><span class="s3">\n            </span><span class="s1">if (cachedResponse?.cacheControl) {</span><span class="s3">\n              </span><span class="s1">const newRevalidate = Math.min(</span><span class="s3">\n                </span><span class="s1">Math.max(cachedResponse.cacheControl.revalidate || 3, 3),</span><span class="s3">\n                </span><span class="s1">30</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n\n              </span><span class="s1">const newExpire =</span><span class="s3">\n                </span><span class="s1">cachedResponse.cacheControl.expire === undefined</span><span class="s3">\n                  </span><span class="s1">? undefined</span><span class="s3">\n                  </span><span class="s1">: Math.max(</span><span class="s3">\n                      </span><span class="s1">newRevalidate + 3,</span><span class="s3">\n                      </span><span class="s1">cachedResponse.cacheControl.expire</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n\n              </span><span class="s1">await incrementalCache.set(key, cachedResponse.value, {</span><span class="s3">\n                </span><span class="s1">cacheControl: { revalidate: newRevalidate, expire: newExpire },</span><span class="s3">\n                </span><span class="s1">isRoutePPREnabled,</span><span class="s3">\n                </span><span class="s1">isFallback,</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// While revalidating in the background we can't reject as we already</span><span class="s3">\n            </span><span class="s1">// resolved the cache entry so log the error here.</span><span class="s3">\n            </span><span class="s1">if (resolved) {</span><span class="s3">\n              </span><span class="s1">console.error(err)</span><span class="s3">\n              </span><span class="s1">return null</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// We haven't resolved yet, so let's throw to indicate an error.</span><span class="s3">\n            </span><span class="s1">throw err</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">})()</span><span class="s3">\n\n        </span><span class="s1">// we need to ensure background revalidates are</span><span class="s3">\n        </span><span class="s1">// passed to waitUntil</span><span class="s3">\n        </span><span class="s1">if (waitUntil) {</span><span class="s3">\n          </span><span class="s1">waitUntil(prom)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return prom</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">return toResponseCacheEntry(response)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;Batcher&quot;</span><span class="s0">,</span><span class="s1">&quot;scheduleOnNextTick&quot;</span><span class="s0">,</span><span class="s1">&quot;fromResponseCacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKindToIncrementalCacheKind&quot;</span><span class="s0">,</span><span class="s1">&quot;toResponseCacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;ResponseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;minimal_mode&quot;</span><span class="s0">,</span><span class="s1">&quot;batcher&quot;</span><span class="s0">,</span><span class="s1">&quot;create&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKeyFn&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;isOnDemandRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;schedulerFn&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;responseGenerator&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;hasResolved&quot;</span><span class="s0">,</span><span class="s1">&quot;previousCacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;incrementalCache&quot;</span><span class="s0">,</span><span class="s1">&quot;isFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;isRoutePPREnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;batch&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;prom&quot;</span><span class="s0">,</span><span class="s1">&quot;previousCacheItem&quot;</span><span class="s0">,</span><span class="s1">&quot;expiresAt&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKind&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;isStale&quot;</span><span class="s0">,</span><span class="s1">&quot;isPrefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;isRevalidating&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveValue&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiss&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheControl&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;newRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;min&quot;</span><span class="s0">,</span><span class="s1">&quot;max&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;newExpire&quot;</span><span class="s0">,</span><span class="s1">&quot;expire&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">19558</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/lib/patch-fetch.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type {</span><span class="s3">\n  </span><span class="s1">WorkAsyncStorage,</span><span class="s3">\n  </span><span class="s1">WorkStore,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">import { AppRenderSpan, NextNodeServerSpan } from './trace/constants'</span><span class="s3">\n</span><span class="s1">import { getTracer, SpanKind } from './trace/tracer'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">CACHE_ONE_YEAR,</span><span class="s3">\n  </span><span class="s1">INFINITE_CACHE,</span><span class="s3">\n  </span><span class="s1">NEXT_CACHE_TAG_MAX_ITEMS,</span><span class="s3">\n  </span><span class="s1">NEXT_CACHE_TAG_MAX_LENGTH,</span><span class="s3">\n</span><span class="s1">} from '../../lib/constants'</span><span class="s3">\n</span><span class="s1">import { markCurrentScopeAsDynamic } from '../app-render/dynamic-rendering'</span><span class="s3">\n</span><span class="s1">import { makeHangingPromise } from '../dynamic-rendering-utils'</span><span class="s3">\n</span><span class="s1">import type { FetchMetric } from '../base-http'</span><span class="s3">\n</span><span class="s1">import { createDedupeFetch } from './dedupe-fetch'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getCacheSignal,</span><span class="s3">\n  </span><span class="s1">type RevalidateStore,</span><span class="s3">\n  </span><span class="s1">type WorkUnitAsyncStorage,</span><span class="s3">\n</span><span class="s1">} from '../app-render/work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">CachedRouteKind,</span><span class="s3">\n  </span><span class="s1">IncrementalCacheKind,</span><span class="s3">\n  </span><span class="s1">type CachedFetchData,</span><span class="s3">\n  </span><span class="s1">type ServerComponentsHmrCache,</span><span class="s3">\n  </span><span class="s1">type SetIncrementalFetchCacheContext,</span><span class="s3">\n</span><span class="s1">} from '../response-cache'</span><span class="s3">\n</span><span class="s1">import { waitAtLeastOneReactRenderTask } from '../../lib/scheduler'</span><span class="s3">\n</span><span class="s1">import { cloneResponse } from './clone-response'</span><span class="s3">\n</span><span class="s1">import type { IncrementalCache } from './incremental-cache'</span><span class="s3">\n\n</span><span class="s1">const isEdgeRuntime = process.env.NEXT_RUNTIME === 'edge'</span><span class="s3">\n\n</span><span class="s1">type Fetcher = typeof fetch</span><span class="s3">\n\n</span><span class="s1">type PatchedFetcher = Fetcher &amp; {</span><span class="s3">\n  </span><span class="s1">readonly __nextPatched: true</span><span class="s3">\n  </span><span class="s1">readonly __nextGetStaticStore: () =&gt; WorkAsyncStorage</span><span class="s3">\n  </span><span class="s1">readonly _nextOriginalFetch: Fetcher</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const NEXT_PATCH_SYMBOL = Symbol.for('next-patch')</span><span class="s3">\n\n</span><span class="s1">function isFetchPatched() {</span><span class="s3">\n  </span><span class="s1">return (globalThis as Record&lt;symbol, unknown&gt;)[NEXT_PATCH_SYMBOL] === true</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function validateRevalidate(</span><span class="s3">\n  </span><span class="s1">revalidateVal: unknown,</span><span class="s3">\n  </span><span class="s1">route: string</span><span class="s3">\n</span><span class="s1">): undefined | number {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">let normalizedRevalidate: number | undefined = undefined</span><span class="s3">\n\n    </span><span class="s1">if (revalidateVal === false) {</span><span class="s3">\n      </span><span class="s1">normalizedRevalidate = INFINITE_CACHE</span><span class="s3">\n    </span><span class="s1">} else if (</span><span class="s3">\n      </span><span class="s1">typeof revalidateVal === 'number' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!isNaN(revalidateVal) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">revalidateVal &gt; -1</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">normalizedRevalidate = revalidateVal</span><span class="s3">\n    </span><span class="s1">} else if (typeof revalidateVal !== 'undefined') {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`Invalid revalidate value </span><span class="s3">\&quot;</span><span class="s1">${revalidateVal}</span><span class="s3">\&quot; </span><span class="s1">on </span><span class="s3">\&quot;</span><span class="s1">${route}</span><span class="s3">\&quot;</span><span class="s1">, must be a non-negative number or false`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return normalizedRevalidate</span><span class="s3">\n  </span><span class="s1">} catch (err: any) {</span><span class="s3">\n    </span><span class="s1">// handle client component error from attempting to check revalidate value</span><span class="s3">\n    </span><span class="s1">if (err instanceof Error &amp;&amp; err.message.includes('Invalid revalidate')) {</span><span class="s3">\n      </span><span class="s1">throw err</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function validateTags(tags: any[], description: string) {</span><span class="s3">\n  </span><span class="s1">const validTags: string[] = []</span><span class="s3">\n  </span><span class="s1">const invalidTags: Array&lt;{</span><span class="s3">\n    </span><span class="s1">tag: any</span><span class="s3">\n    </span><span class="s1">reason: string</span><span class="s3">\n  </span><span class="s1">}&gt; = []</span><span class="s3">\n\n  </span><span class="s1">for (let i = 0; i &lt; tags.length; i++) {</span><span class="s3">\n    </span><span class="s1">const tag = tags[i]</span><span class="s3">\n\n    </span><span class="s1">if (typeof tag !== 'string') {</span><span class="s3">\n      </span><span class="s1">invalidTags.push({ tag, reason: 'invalid type, must be a string' })</span><span class="s3">\n    </span><span class="s1">} else if (tag.length &gt; NEXT_CACHE_TAG_MAX_LENGTH) {</span><span class="s3">\n      </span><span class="s1">invalidTags.push({</span><span class="s3">\n        </span><span class="s1">tag,</span><span class="s3">\n        </span><span class="s1">reason: `exceeded max length of ${NEXT_CACHE_TAG_MAX_LENGTH}`,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">validTags.push(tag)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (validTags.length &gt; NEXT_CACHE_TAG_MAX_ITEMS) {</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">`Warning: exceeded max tag count for ${description}, dropped tags:`,</span><span class="s3">\n        </span><span class="s1">tags.slice(i).join(', ')</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">break</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (invalidTags.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">console.warn(`Warning: invalid tags passed to ${description}: `)</span><span class="s3">\n\n    </span><span class="s1">for (const { tag, reason } of invalidTags) {</span><span class="s3">\n      </span><span class="s1">console.log(`tag: </span><span class="s3">\&quot;</span><span class="s1">${tag}</span><span class="s3">\&quot; </span><span class="s1">${reason}`)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return validTags</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function trackFetchMetric(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">ctx: Omit&lt;FetchMetric, 'end' | 'idx'&gt;</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (!workStore.shouldTrackFetchMetrics) {</span><span class="s3">\n    </span><span class="s1">return</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">workStore.fetchMetrics ??= []</span><span class="s3">\n\n  </span><span class="s1">workStore.fetchMetrics.push({</span><span class="s3">\n    </span><span class="s1">...ctx,</span><span class="s3">\n    </span><span class="s1">end: performance.timeOrigin + performance.now(),</span><span class="s3">\n    </span><span class="s1">idx: workStore.nextFetchId || 0,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function createCachedPrerenderResponse(</span><span class="s3">\n  </span><span class="s1">res: Response,</span><span class="s3">\n  </span><span class="s1">cacheKey: string,</span><span class="s3">\n  </span><span class="s1">incrementalCacheContext: SetIncrementalFetchCacheContext | undefined,</span><span class="s3">\n  </span><span class="s1">incrementalCache: IncrementalCache,</span><span class="s3">\n  </span><span class="s1">revalidate: number,</span><span class="s3">\n  </span><span class="s1">handleUnlock: () =&gt; Promise&lt;void&gt; | void</span><span class="s3">\n</span><span class="s1">): Promise&lt;Response&gt; {</span><span class="s3">\n  </span><span class="s1">// We are prerendering at build time or revalidate time with cacheComponents so we</span><span class="s3">\n  </span><span class="s1">// need to buffer the response so we can guarantee it can be read in a</span><span class="s3">\n  </span><span class="s1">// microtask.</span><span class="s3">\n  </span><span class="s1">const bodyBuffer = await res.arrayBuffer()</span><span class="s3">\n\n  </span><span class="s1">const fetchedData = {</span><span class="s3">\n    </span><span class="s1">headers: Object.fromEntries(res.headers.entries()),</span><span class="s3">\n    </span><span class="s1">body: Buffer.from(bodyBuffer).toString('base64'),</span><span class="s3">\n    </span><span class="s1">status: res.status,</span><span class="s3">\n    </span><span class="s1">url: res.url,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// We can skip setting the serverComponentsHmrCache because we aren't in dev</span><span class="s3">\n  </span><span class="s1">// mode.</span><span class="s3">\n\n  </span><span class="s1">if (incrementalCacheContext) {</span><span class="s3">\n    </span><span class="s1">await incrementalCache.set(</span><span class="s3">\n      </span><span class="s1">cacheKey,</span><span class="s3">\n      </span><span class="s1">{ kind: CachedRouteKind.FETCH, data: fetchedData, revalidate },</span><span class="s3">\n      </span><span class="s1">incrementalCacheContext</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">await handleUnlock()</span><span class="s3">\n\n  </span><span class="s1">// We return a new Response to the caller.</span><span class="s3">\n  </span><span class="s1">return new Response(bodyBuffer, {</span><span class="s3">\n    </span><span class="s1">headers: res.headers,</span><span class="s3">\n    </span><span class="s1">status: res.status,</span><span class="s3">\n    </span><span class="s1">statusText: res.statusText,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function createCachedDynamicResponse(</span><span class="s3">\n  </span><span class="s1">workStore: WorkStore,</span><span class="s3">\n  </span><span class="s1">res: Response,</span><span class="s3">\n  </span><span class="s1">cacheKey: string,</span><span class="s3">\n  </span><span class="s1">incrementalCacheContext: SetIncrementalFetchCacheContext | undefined,</span><span class="s3">\n  </span><span class="s1">incrementalCache: IncrementalCache,</span><span class="s3">\n  </span><span class="s1">serverComponentsHmrCache: ServerComponentsHmrCache | undefined,</span><span class="s3">\n  </span><span class="s1">revalidate: number,</span><span class="s3">\n  </span><span class="s1">input: RequestInfo | URL,</span><span class="s3">\n  </span><span class="s1">handleUnlock: () =&gt; Promise&lt;void&gt; | void</span><span class="s3">\n</span><span class="s1">): Promise&lt;Response&gt; {</span><span class="s3">\n  </span><span class="s1">// We're cloning the response using this utility because there exists a bug in</span><span class="s3">\n  </span><span class="s1">// the undici library around response cloning. See the following pull request</span><span class="s3">\n  </span><span class="s1">// for more details: https://github.com/vercel/next.js/pull/73274</span><span class="s3">\n  </span><span class="s1">const [cloned1, cloned2] = cloneResponse(res)</span><span class="s3">\n\n  </span><span class="s1">// We are dynamically rendering including dev mode. We want to return the</span><span class="s3">\n  </span><span class="s1">// response to the caller as soon as possible because it might stream over a</span><span class="s3">\n  </span><span class="s1">// very long time.</span><span class="s3">\n  </span><span class="s1">const cacheSetPromise = cloned1</span><span class="s3">\n    </span><span class="s1">.arrayBuffer()</span><span class="s3">\n    </span><span class="s1">.then(async (arrayBuffer) =&gt; {</span><span class="s3">\n      </span><span class="s1">const bodyBuffer = Buffer.from(arrayBuffer)</span><span class="s3">\n\n      </span><span class="s1">const fetchedData = {</span><span class="s3">\n        </span><span class="s1">headers: Object.fromEntries(cloned1.headers.entries()),</span><span class="s3">\n        </span><span class="s1">body: bodyBuffer.toString('base64'),</span><span class="s3">\n        </span><span class="s1">status: cloned1.status,</span><span class="s3">\n        </span><span class="s1">url: cloned1.url,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">serverComponentsHmrCache?.set(cacheKey, fetchedData)</span><span class="s3">\n\n      </span><span class="s1">if (incrementalCacheContext) {</span><span class="s3">\n        </span><span class="s1">await incrementalCache.set(</span><span class="s3">\n          </span><span class="s1">cacheKey,</span><span class="s3">\n          </span><span class="s1">{ kind: CachedRouteKind.FETCH, data: fetchedData, revalidate },</span><span class="s3">\n          </span><span class="s1">incrementalCacheContext</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">.catch((error) =&gt; console.warn(`Failed to set fetch cache`, input, error))</span><span class="s3">\n    </span><span class="s1">.finally(handleUnlock)</span><span class="s3">\n\n  </span><span class="s1">const pendingRevalidateKey = `cache-set-${cacheKey}`</span><span class="s3">\n  </span><span class="s1">workStore.pendingRevalidates ??= {}</span><span class="s3">\n\n  </span><span class="s1">if (pendingRevalidateKey in workStore.pendingRevalidates) {</span><span class="s3">\n    </span><span class="s1">// there is already a pending revalidate entry that we need to await to</span><span class="s3">\n    </span><span class="s1">// avoid race conditions</span><span class="s3">\n    </span><span class="s1">await workStore.pendingRevalidates[pendingRevalidateKey]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">workStore.pendingRevalidates[pendingRevalidateKey] = cacheSetPromise.finally(</span><span class="s3">\n    </span><span class="s1">() =&gt; {</span><span class="s3">\n      </span><span class="s1">// If the pending revalidate is not present in the store, then we have</span><span class="s3">\n      </span><span class="s1">// nothing to delete.</span><span class="s3">\n      </span><span class="s1">if (!workStore.pendingRevalidates?.[pendingRevalidateKey]) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">delete workStore.pendingRevalidates[pendingRevalidateKey]</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return cloned2</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface PatchableModule {</span><span class="s3">\n  </span><span class="s1">workAsyncStorage: WorkAsyncStorage</span><span class="s3">\n  </span><span class="s1">workUnitAsyncStorage: WorkUnitAsyncStorage</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function createPatchedFetcher(</span><span class="s3">\n  </span><span class="s1">originFetch: Fetcher,</span><span class="s3">\n  </span><span class="s1">{ workAsyncStorage, workUnitAsyncStorage }: PatchableModule</span><span class="s3">\n</span><span class="s1">): PatchedFetcher {</span><span class="s3">\n  </span><span class="s1">// Create the patched fetch function.</span><span class="s3">\n  </span><span class="s1">const patched = async function fetch(</span><span class="s3">\n    </span><span class="s1">input: RequestInfo | URL,</span><span class="s3">\n    </span><span class="s1">init: RequestInit | undefined</span><span class="s3">\n  </span><span class="s1">): Promise&lt;Response&gt; {</span><span class="s3">\n    </span><span class="s1">let url: URL | undefined</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">url = new URL(input instanceof Request ? input.url : input)</span><span class="s3">\n      </span><span class="s1">url.username = ''</span><span class="s3">\n      </span><span class="s1">url.password = ''</span><span class="s3">\n    </span><span class="s1">} catch {</span><span class="s3">\n      </span><span class="s1">// Error caused by malformed URL should be handled by native fetch</span><span class="s3">\n      </span><span class="s1">url = undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const fetchUrl = url?.href ?? ''</span><span class="s3">\n    </span><span class="s1">const method = init?.method?.toUpperCase() || 'GET'</span><span class="s3">\n\n    </span><span class="s1">// Do create a new span trace for internal fetches in the</span><span class="s3">\n    </span><span class="s1">// non-verbose mode.</span><span class="s3">\n    </span><span class="s1">const isInternal = (init?.next as any)?.internal === true</span><span class="s3">\n    </span><span class="s1">const hideSpan = process.env.NEXT_OTEL_FETCH_DISABLED === '1'</span><span class="s3">\n    </span><span class="s1">// We don't track fetch metrics for internal fetches</span><span class="s3">\n    </span><span class="s1">// so it's not critical that we have a start time, as it won't be recorded.</span><span class="s3">\n    </span><span class="s1">// This is to workaround a flaky issue where performance APIs might</span><span class="s3">\n    </span><span class="s1">// not be available and will require follow-up investigation.</span><span class="s3">\n    </span><span class="s1">const fetchStart: number | undefined = isInternal</span><span class="s3">\n      </span><span class="s1">? undefined</span><span class="s3">\n      </span><span class="s1">: performance.timeOrigin + performance.now()</span><span class="s3">\n\n    </span><span class="s1">const workStore = workAsyncStorage.getStore()</span><span class="s3">\n    </span><span class="s1">const workUnitStore = workUnitAsyncStorage.getStore()</span><span class="s3">\n\n    </span><span class="s1">// During static generation we track cache reads so we can reason about when they fill</span><span class="s3">\n    </span><span class="s1">let cacheSignal = workUnitStore ? getCacheSignal(workUnitStore) : null</span><span class="s3">\n    </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n      </span><span class="s1">cacheSignal.beginRead()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const result = getTracer().trace(</span><span class="s3">\n      </span><span class="s1">isInternal ? NextNodeServerSpan.internalFetch : AppRenderSpan.fetch,</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">hideSpan,</span><span class="s3">\n        </span><span class="s1">kind: SpanKind.CLIENT,</span><span class="s3">\n        </span><span class="s1">spanName: ['fetch', method, fetchUrl].filter(Boolean).join(' '),</span><span class="s3">\n        </span><span class="s1">attributes: {</span><span class="s3">\n          </span><span class="s1">'http.url': fetchUrl,</span><span class="s3">\n          </span><span class="s1">'http.method': method,</span><span class="s3">\n          </span><span class="s1">'net.peer.name': url?.hostname,</span><span class="s3">\n          </span><span class="s1">'net.peer.port': url?.port || undefined,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">async () =&gt; {</span><span class="s3">\n        </span><span class="s1">// If this is an internal fetch, we should not do any special treatment.</span><span class="s3">\n        </span><span class="s1">if (isInternal) {</span><span class="s3">\n          </span><span class="s1">return originFetch(input, init)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// If the workStore is not available, we can't do any</span><span class="s3">\n        </span><span class="s1">// special treatment of fetch, therefore fallback to the original</span><span class="s3">\n        </span><span class="s1">// fetch implementation.</span><span class="s3">\n        </span><span class="s1">if (!workStore) {</span><span class="s3">\n          </span><span class="s1">return originFetch(input, init)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// We should also fallback to the original fetch implementation if we</span><span class="s3">\n        </span><span class="s1">// are in draft mode, it does not constitute a static generation.</span><span class="s3">\n        </span><span class="s1">if (workStore.isDraftMode) {</span><span class="s3">\n          </span><span class="s1">return originFetch(input, init)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const isRequestInput =</span><span class="s3">\n          </span><span class="s1">input &amp;&amp;</span><span class="s3">\n          </span><span class="s1">typeof input === 'object' &amp;&amp;</span><span class="s3">\n          </span><span class="s1">typeof (input as Request).method === 'string'</span><span class="s3">\n\n        </span><span class="s1">const getRequestMeta = (field: string) =&gt; {</span><span class="s3">\n          </span><span class="s1">// If request input is present but init is not, retrieve from input first.</span><span class="s3">\n          </span><span class="s1">const value = (init as any)?.[field]</span><span class="s3">\n          </span><span class="s1">return value || (isRequestInput ? (input as any)[field] : null)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">let finalRevalidate: number | undefined = undefined</span><span class="s3">\n        </span><span class="s1">const getNextField = (field: 'revalidate' | 'tags') =&gt; {</span><span class="s3">\n          </span><span class="s1">return typeof init?.next?.[field] !== 'undefined'</span><span class="s3">\n            </span><span class="s1">? init?.next?.[field]</span><span class="s3">\n            </span><span class="s1">: isRequestInput</span><span class="s3">\n              </span><span class="s1">? (input as any).next?.[field]</span><span class="s3">\n              </span><span class="s1">: undefined</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">// RequestInit doesn't keep extra fields e.g. next so it's</span><span class="s3">\n        </span><span class="s1">// only available if init is used separate</span><span class="s3">\n        </span><span class="s1">const originalFetchRevalidate = getNextField('revalidate')</span><span class="s3">\n        </span><span class="s1">let currentFetchRevalidate = originalFetchRevalidate</span><span class="s3">\n        </span><span class="s1">const tags: string[] = validateTags(</span><span class="s3">\n          </span><span class="s1">getNextField('tags') || [],</span><span class="s3">\n          </span><span class="s1">`fetch ${input.toString()}`</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">let revalidateStore: RevalidateStore | undefined</span><span class="s3">\n\n        </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n          </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n            </span><span class="s1">case 'prerender':</span><span class="s3">\n            </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n            </span><span class="s1">// TODO: Stop accumulating tags in client prerender. (fallthrough)</span><span class="s3">\n            </span><span class="s1">case 'prerender-client':</span><span class="s3">\n            </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n            </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n            </span><span class="s1">case 'cache':</span><span class="s3">\n            </span><span class="s1">case 'private-cache':</span><span class="s3">\n              </span><span class="s1">revalidateStore = workUnitStore</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">case 'request':</span><span class="s3">\n            </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (revalidateStore) {</span><span class="s3">\n          </span><span class="s1">if (Array.isArray(tags)) {</span><span class="s3">\n            </span><span class="s1">// Collect tags onto parent caches or parent prerenders.</span><span class="s3">\n            </span><span class="s1">const collectedTags =</span><span class="s3">\n              </span><span class="s1">revalidateStore.tags ?? (revalidateStore.tags = [])</span><span class="s3">\n            </span><span class="s1">for (const tag of tags) {</span><span class="s3">\n              </span><span class="s1">if (!collectedTags.includes(tag)) {</span><span class="s3">\n                </span><span class="s1">collectedTags.push(tag)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const implicitTags = workUnitStore?.implicitTags</span><span class="s3">\n\n        </span><span class="s1">let pageFetchCacheMode = workStore.fetchCache</span><span class="s3">\n\n        </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n          </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n            </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n              </span><span class="s1">// Inside unstable-cache we treat it the same as force-no-store on</span><span class="s3">\n              </span><span class="s1">// the page.</span><span class="s3">\n              </span><span class="s1">pageFetchCacheMode = 'force-no-store'</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">case 'prerender':</span><span class="s3">\n            </span><span class="s1">case 'prerender-client':</span><span class="s3">\n            </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n            </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n            </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n            </span><span class="s1">case 'request':</span><span class="s3">\n            </span><span class="s1">case 'cache':</span><span class="s3">\n            </span><span class="s1">case 'private-cache':</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const isUsingNoStore = !!workStore.isUnstableNoStore</span><span class="s3">\n\n        </span><span class="s1">let currentFetchCacheConfig = getRequestMeta('cache')</span><span class="s3">\n        </span><span class="s1">let cacheReason = ''</span><span class="s3">\n        </span><span class="s1">let cacheWarning: string | undefined</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">typeof currentFetchCacheConfig === 'string' &amp;&amp;</span><span class="s3">\n          </span><span class="s1">typeof currentFetchRevalidate !== 'undefined'</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">// If the revalidate value conflicts with the cache value, we should warn the user and unset the conflicting values.</span><span class="s3">\n          </span><span class="s1">const isConflictingRevalidate =</span><span class="s3">\n            </span><span class="s1">// revalidate: 0 and cache: force-cache</span><span class="s3">\n            </span><span class="s1">(currentFetchCacheConfig === 'force-cache' &amp;&amp;</span><span class="s3">\n              </span><span class="s1">currentFetchRevalidate === 0) ||</span><span class="s3">\n            </span><span class="s1">// revalidate: &gt;0 or revalidate: false and cache: no-store</span><span class="s3">\n            </span><span class="s1">(currentFetchCacheConfig === 'no-store' &amp;&amp;</span><span class="s3">\n              </span><span class="s1">(currentFetchRevalidate &gt; 0 || currentFetchRevalidate === false))</span><span class="s3">\n\n          </span><span class="s1">if (isConflictingRevalidate) {</span><span class="s3">\n            </span><span class="s1">cacheWarning = `Specified </span><span class="s3">\&quot;</span><span class="s1">cache: ${currentFetchCacheConfig}</span><span class="s3">\&quot; </span><span class="s1">and </span><span class="s3">\&quot;</span><span class="s1">revalidate: ${currentFetchRevalidate}</span><span class="s3">\&quot;</span><span class="s1">, only one should be specified.`</span><span class="s3">\n            </span><span class="s1">currentFetchCacheConfig = undefined</span><span class="s3">\n            </span><span class="s1">currentFetchRevalidate = undefined</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const hasExplicitFetchCacheOptOut =</span><span class="s3">\n          </span><span class="s1">// fetch config itself signals not to cache</span><span class="s3">\n          </span><span class="s1">currentFetchCacheConfig === 'no-cache' ||</span><span class="s3">\n          </span><span class="s1">currentFetchCacheConfig === 'no-store' ||</span><span class="s3">\n          </span><span class="s1">// the fetch isn't explicitly caching and the segment level cache config signals not to cache</span><span class="s3">\n          </span><span class="s1">// note: `pageFetchCacheMode` is also set by being in an unstable_cache context.</span><span class="s3">\n          </span><span class="s1">pageFetchCacheMode === 'force-no-store' ||</span><span class="s3">\n          </span><span class="s1">pageFetchCacheMode === 'only-no-store'</span><span class="s3">\n\n        </span><span class="s1">// If no explicit fetch cache mode is set, but dynamic = `force-dynamic` is set,</span><span class="s3">\n        </span><span class="s1">// we shouldn't consider caching the fetch. This is because the `dynamic` cache</span><span class="s3">\n        </span><span class="s1">// is considered a </span><span class="s3">\&quot;</span><span class="s1">top-level</span><span class="s3">\&quot; </span><span class="s1">cache mode, whereas something like `fetchCache` is more</span><span class="s3">\n        </span><span class="s1">// fine-grained. Top-level modes are responsible for setting reasonable defaults for the</span><span class="s3">\n        </span><span class="s1">// other configurations.</span><span class="s3">\n        </span><span class="s1">const noFetchConfigAndForceDynamic =</span><span class="s3">\n          </span><span class="s1">!pageFetchCacheMode &amp;&amp;</span><span class="s3">\n          </span><span class="s1">!currentFetchCacheConfig &amp;&amp;</span><span class="s3">\n          </span><span class="s1">!currentFetchRevalidate &amp;&amp;</span><span class="s3">\n          </span><span class="s1">workStore.forceDynamic</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">// force-cache was specified without a revalidate value. We set the revalidate value to false</span><span class="s3">\n          </span><span class="s1">// which will signal the cache to not revalidate</span><span class="s3">\n          </span><span class="s1">currentFetchCacheConfig === 'force-cache' &amp;&amp;</span><span class="s3">\n          </span><span class="s1">typeof currentFetchRevalidate === 'undefined'</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">currentFetchRevalidate = false</span><span class="s3">\n        </span><span class="s1">} else if (</span><span class="s3">\n          </span><span class="s1">hasExplicitFetchCacheOptOut ||</span><span class="s3">\n          </span><span class="s1">noFetchConfigAndForceDynamic</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">currentFetchRevalidate = 0</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">currentFetchCacheConfig === 'no-cache' ||</span><span class="s3">\n          </span><span class="s1">currentFetchCacheConfig === 'no-store'</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">cacheReason = `cache: ${currentFetchCacheConfig}`</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">finalRevalidate = validateRevalidate(</span><span class="s3">\n          </span><span class="s1">currentFetchRevalidate,</span><span class="s3">\n          </span><span class="s1">workStore.route</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">const _headers = getRequestMeta('headers')</span><span class="s3">\n        </span><span class="s1">const initHeaders: Headers =</span><span class="s3">\n          </span><span class="s1">typeof _headers?.get === 'function'</span><span class="s3">\n            </span><span class="s1">? _headers</span><span class="s3">\n            </span><span class="s1">: new Headers(_headers || {})</span><span class="s3">\n\n        </span><span class="s1">const hasUnCacheableHeader =</span><span class="s3">\n          </span><span class="s1">initHeaders.get('authorization') || initHeaders.get('cookie')</span><span class="s3">\n\n        </span><span class="s1">const isUnCacheableMethod = !['get', 'head'].includes(</span><span class="s3">\n          </span><span class="s1">getRequestMeta('method')?.toLowerCase() || 'get'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">/**</span><span class="s3">\n         </span><span class="s1">* We automatically disable fetch caching under the following conditions:</span><span class="s3">\n         </span><span class="s1">* - Fetch cache configs are not set. Specifically:</span><span class="s3">\n         </span><span class="s1">*    - A page fetch cache mode is not set (export const fetchCache=...)</span><span class="s3">\n         </span><span class="s1">*    - A fetch cache mode is not set in the fetch call (fetch(url, { cache: ... }))</span><span class="s3">\n         </span><span class="s1">*      or the fetch cache mode is set to 'default'</span><span class="s3">\n         </span><span class="s1">*    - A fetch revalidate value is not set in the fetch call (fetch(url, { revalidate: ... }))</span><span class="s3">\n         </span><span class="s1">* - OR the fetch comes after a configuration that triggered dynamic rendering (e.g., reading cookies())</span><span class="s3">\n         </span><span class="s1">*   and the fetch was considered uncacheable (e.g., POST method or has authorization headers)</span><span class="s3">\n         </span><span class="s1">*/</span><span class="s3">\n        </span><span class="s1">const hasNoExplicitCacheConfig =</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line eqeqeq</span><span class="s3">\n          </span><span class="s1">pageFetchCacheMode == undefined &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line eqeqeq</span><span class="s3">\n          </span><span class="s1">(currentFetchCacheConfig == undefined ||</span><span class="s3">\n            </span><span class="s1">// when considering whether to opt into the default </span><span class="s3">\&quot;</span><span class="s1">no-cache</span><span class="s3">\&quot; </span><span class="s1">fetch semantics,</span><span class="s3">\n            </span><span class="s1">// a </span><span class="s3">\&quot;</span><span class="s1">default</span><span class="s3">\&quot; </span><span class="s1">cache config should be treated the same as no cache config</span><span class="s3">\n            </span><span class="s1">currentFetchCacheConfig === 'default') &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line eqeqeq</span><span class="s3">\n          </span><span class="s1">currentFetchRevalidate == undefined</span><span class="s3">\n\n        </span><span class="s1">let autoNoCache = Boolean(</span><span class="s3">\n          </span><span class="s1">(hasUnCacheableHeader || isUnCacheableMethod) &amp;&amp;</span><span class="s3">\n            </span><span class="s1">revalidateStore?.revalidate === 0</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">let isImplicitBuildTimeCache = false</span><span class="s3">\n\n        </span><span class="s1">if (!autoNoCache &amp;&amp; hasNoExplicitCacheConfig) {</span><span class="s3">\n          </span><span class="s1">// We don't enable automatic no-cache behavior during build-time</span><span class="s3">\n          </span><span class="s1">// prerendering so that we can still leverage the fetch cache between</span><span class="s3">\n          </span><span class="s1">// export workers.</span><span class="s3">\n          </span><span class="s1">if (workStore.isBuildTimePrerendering) {</span><span class="s3">\n            </span><span class="s1">isImplicitBuildTimeCache = true</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">autoNoCache = true</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// If we have no cache config, and we're in Dynamic I/O prerendering,</span><span class="s3">\n        </span><span class="s1">// it'll be a dynamic call. We don't have to issue that dynamic call.</span><span class="s3">\n        </span><span class="s1">if (hasNoExplicitCacheConfig &amp;&amp; workUnitStore !== undefined) {</span><span class="s3">\n          </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n            </span><span class="s1">case 'prerender':</span><span class="s3">\n            </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n            </span><span class="s1">// While we don't want to do caching in the client scope we know the</span><span class="s3">\n            </span><span class="s1">// fetch will be dynamic for cacheComponents so we may as well avoid the</span><span class="s3">\n            </span><span class="s1">// call here. (fallthrough)</span><span class="s3">\n            </span><span class="s1">case 'prerender-client':</span><span class="s3">\n              </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n                </span><span class="s1">cacheSignal.endRead()</span><span class="s3">\n                </span><span class="s1">cacheSignal = null</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">return makeHangingPromise&lt;Response&gt;(</span><span class="s3">\n                </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n                </span><span class="s1">workStore.route,</span><span class="s3">\n                </span><span class="s1">'fetch()'</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n            </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n            </span><span class="s1">case 'request':</span><span class="s3">\n            </span><span class="s1">case 'cache':</span><span class="s3">\n            </span><span class="s1">case 'private-cache':</span><span class="s3">\n            </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">switch (pageFetchCacheMode) {</span><span class="s3">\n          </span><span class="s1">case 'force-no-store': {</span><span class="s3">\n            </span><span class="s1">cacheReason = 'fetchCache = force-no-store'</span><span class="s3">\n            </span><span class="s1">break</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">case 'only-no-store': {</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">currentFetchCacheConfig === 'force-cache' ||</span><span class="s3">\n              </span><span class="s1">(typeof finalRevalidate !== 'undefined' &amp;&amp; finalRevalidate &gt; 0)</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                </span><span class="s1">`cache: 'force-cache' used on fetch for ${fetchUrl} with 'export const fetchCache = 'only-no-store'`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">cacheReason = 'fetchCache = only-no-store'</span><span class="s3">\n            </span><span class="s1">break</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">case 'only-cache': {</span><span class="s3">\n            </span><span class="s1">if (currentFetchCacheConfig === 'no-store') {</span><span class="s3">\n              </span><span class="s1">throw new Error(</span><span class="s3">\n                </span><span class="s1">`cache: 'no-store' used on fetch for ${fetchUrl} with 'export const fetchCache = 'only-cache'`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">break</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">case 'force-cache': {</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">typeof currentFetchRevalidate === 'undefined' ||</span><span class="s3">\n              </span><span class="s1">currentFetchRevalidate === 0</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">cacheReason = 'fetchCache = force-cache'</span><span class="s3">\n              </span><span class="s1">finalRevalidate = INFINITE_CACHE</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">break</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">case 'default-cache':</span><span class="s3">\n          </span><span class="s1">case 'default-no-store':</span><span class="s3">\n          </span><span class="s1">case 'auto':</span><span class="s3">\n          </span><span class="s1">case undefined:</span><span class="s3">\n            </span><span class="s1">// sometimes we won't match the above cases. the reason we don't move</span><span class="s3">\n            </span><span class="s1">// everything to this switch is the use of autoNoCache which is not a fetchCacheMode</span><span class="s3">\n            </span><span class="s1">// I suspect this could be unified with fetchCacheMode however in which case we could</span><span class="s3">\n            </span><span class="s1">// simplify the switch case and ensure we have an exhaustive switch handling all modes</span><span class="s3">\n            </span><span class="s1">break</span><span class="s3">\n          </span><span class="s1">default:</span><span class="s3">\n            </span><span class="s1">pageFetchCacheMode satisfies never</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (typeof finalRevalidate === 'undefined') {</span><span class="s3">\n          </span><span class="s1">if (pageFetchCacheMode === 'default-cache' &amp;&amp; !isUsingNoStore) {</span><span class="s3">\n            </span><span class="s1">finalRevalidate = INFINITE_CACHE</span><span class="s3">\n            </span><span class="s1">cacheReason = 'fetchCache = default-cache'</span><span class="s3">\n          </span><span class="s1">} else if (pageFetchCacheMode === 'default-no-store') {</span><span class="s3">\n            </span><span class="s1">finalRevalidate = 0</span><span class="s3">\n            </span><span class="s1">cacheReason = 'fetchCache = default-no-store'</span><span class="s3">\n          </span><span class="s1">} else if (isUsingNoStore) {</span><span class="s3">\n            </span><span class="s1">finalRevalidate = 0</span><span class="s3">\n            </span><span class="s1">cacheReason = 'noStore call'</span><span class="s3">\n          </span><span class="s1">} else if (autoNoCache) {</span><span class="s3">\n            </span><span class="s1">finalRevalidate = 0</span><span class="s3">\n            </span><span class="s1">cacheReason = 'auto no cache'</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">// TODO: should we consider this case an invariant?</span><span class="s3">\n            </span><span class="s1">cacheReason = 'auto cache'</span><span class="s3">\n            </span><span class="s1">finalRevalidate = revalidateStore</span><span class="s3">\n              </span><span class="s1">? revalidateStore.revalidate</span><span class="s3">\n              </span><span class="s1">: INFINITE_CACHE</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} else if (!cacheReason) {</span><span class="s3">\n          </span><span class="s1">cacheReason = `revalidate: ${finalRevalidate}`</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">// when force static is configured we don't bail from</span><span class="s3">\n          </span><span class="s1">// `revalidate: 0` values</span><span class="s3">\n          </span><span class="s1">!(workStore.forceStatic &amp;&amp; finalRevalidate === 0) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// we don't consider autoNoCache to switch to dynamic for ISR</span><span class="s3">\n          </span><span class="s1">!autoNoCache &amp;&amp;</span><span class="s3">\n          </span><span class="s1">// If the revalidate value isn't currently set or the value is less</span><span class="s3">\n          </span><span class="s1">// than the current revalidate value, we should update the revalidate</span><span class="s3">\n          </span><span class="s1">// value.</span><span class="s3">\n          </span><span class="s1">revalidateStore &amp;&amp;</span><span class="s3">\n          </span><span class="s1">finalRevalidate &lt; revalidateStore.revalidate</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">// If we were setting the revalidate value to 0, we should try to</span><span class="s3">\n          </span><span class="s1">// postpone instead first.</span><span class="s3">\n          </span><span class="s1">if (finalRevalidate === 0) {</span><span class="s3">\n            </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n              </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n                </span><span class="s1">case 'prerender':</span><span class="s3">\n                </span><span class="s1">case 'prerender-client':</span><span class="s3">\n                </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n                  </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n                    </span><span class="s1">cacheSignal.endRead()</span><span class="s3">\n                    </span><span class="s1">cacheSignal = null</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">return makeHangingPromise&lt;Response&gt;(</span><span class="s3">\n                    </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n                    </span><span class="s1">workStore.route,</span><span class="s3">\n                    </span><span class="s1">'fetch()'</span><span class="s3">\n                  </span><span class="s1">)</span><span class="s3">\n                </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n                </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n                </span><span class="s1">case 'request':</span><span class="s3">\n                </span><span class="s1">case 'cache':</span><span class="s3">\n                </span><span class="s1">case 'private-cache':</span><span class="s3">\n                </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n                  </span><span class="s1">break</span><span class="s3">\n                </span><span class="s1">default:</span><span class="s3">\n                  </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">markCurrentScopeAsDynamic(</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">workUnitStore,</span><span class="s3">\n              </span><span class="s1">`revalidate: 0 fetch ${input} ${workStore.route}`</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// We only want to set the revalidate store's revalidate time if it</span><span class="s3">\n          </span><span class="s1">// was explicitly set for the fetch call, i.e.</span><span class="s3">\n          </span><span class="s1">// originalFetchRevalidate.</span><span class="s3">\n          </span><span class="s1">if (revalidateStore &amp;&amp; originalFetchRevalidate === finalRevalidate) {</span><span class="s3">\n            </span><span class="s1">revalidateStore.revalidate = finalRevalidate</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const isCacheableRevalidate =</span><span class="s3">\n          </span><span class="s1">typeof finalRevalidate === 'number' &amp;&amp; finalRevalidate &gt; 0</span><span class="s3">\n\n        </span><span class="s1">let cacheKey: string | undefined</span><span class="s3">\n        </span><span class="s1">const { incrementalCache } = workStore</span><span class="s3">\n        </span><span class="s1">let isHmrRefresh = false</span><span class="s3">\n        </span><span class="s1">let serverComponentsHmrCache: ServerComponentsHmrCache | undefined</span><span class="s3">\n\n        </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n          </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n            </span><span class="s1">case 'request':</span><span class="s3">\n            </span><span class="s1">case 'cache':</span><span class="s3">\n            </span><span class="s1">case 'private-cache':</span><span class="s3">\n              </span><span class="s1">isHmrRefresh = workUnitStore.isHmrRefresh ?? false</span><span class="s3">\n              </span><span class="s1">serverComponentsHmrCache = workUnitStore.serverComponentsHmrCache</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">case 'prerender':</span><span class="s3">\n            </span><span class="s1">case 'prerender-client':</span><span class="s3">\n            </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n            </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n            </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n            </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">incrementalCache &amp;&amp;</span><span class="s3">\n          </span><span class="s1">(isCacheableRevalidate || serverComponentsHmrCache)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">cacheKey = await incrementalCache.generateCacheKey(</span><span class="s3">\n              </span><span class="s1">fetchUrl,</span><span class="s3">\n              </span><span class="s1">isRequestInput ? (input as RequestInit) : init</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">} catch (err) {</span><span class="s3">\n            </span><span class="s1">console.error(`Failed to generate cache key for`, input)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const fetchIdx = workStore.nextFetchId ?? 1</span><span class="s3">\n        </span><span class="s1">workStore.nextFetchId = fetchIdx + 1</span><span class="s3">\n\n        </span><span class="s1">let handleUnlock: () =&gt; Promise&lt;void&gt; | void = () =&gt; {}</span><span class="s3">\n\n        </span><span class="s1">const doOriginalFetch = async (</span><span class="s3">\n          </span><span class="s1">isStale?: boolean,</span><span class="s3">\n          </span><span class="s1">cacheReasonOverride?: string</span><span class="s3">\n        </span><span class="s1">) =&gt; {</span><span class="s3">\n          </span><span class="s1">const requestInputFields = [</span><span class="s3">\n            </span><span class="s1">'cache',</span><span class="s3">\n            </span><span class="s1">'credentials',</span><span class="s3">\n            </span><span class="s1">'headers',</span><span class="s3">\n            </span><span class="s1">'integrity',</span><span class="s3">\n            </span><span class="s1">'keepalive',</span><span class="s3">\n            </span><span class="s1">'method',</span><span class="s3">\n            </span><span class="s1">'mode',</span><span class="s3">\n            </span><span class="s1">'redirect',</span><span class="s3">\n            </span><span class="s1">'referrer',</span><span class="s3">\n            </span><span class="s1">'referrerPolicy',</span><span class="s3">\n            </span><span class="s1">'window',</span><span class="s3">\n            </span><span class="s1">'duplex',</span><span class="s3">\n\n            </span><span class="s1">// don't pass through signal when revalidating</span><span class="s3">\n            </span><span class="s1">...(isStale ? [] : ['signal']),</span><span class="s3">\n          </span><span class="s1">]</span><span class="s3">\n\n          </span><span class="s1">if (isRequestInput) {</span><span class="s3">\n            </span><span class="s1">const reqInput: Request = input as any</span><span class="s3">\n            </span><span class="s1">const reqOptions: RequestInit = {</span><span class="s3">\n              </span><span class="s1">body: (reqInput as any)._ogBody || reqInput.body,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">for (const field of requestInputFields) {</span><span class="s3">\n              </span><span class="s1">// @ts-expect-error custom fields</span><span class="s3">\n              </span><span class="s1">reqOptions[field] = reqInput[field]</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">input = new Request(reqInput.url, reqOptions)</span><span class="s3">\n          </span><span class="s1">} else if (init) {</span><span class="s3">\n            </span><span class="s1">const { _ogBody, body, signal, ...otherInput } =</span><span class="s3">\n              </span><span class="s1">init as RequestInit &amp; { _ogBody?: any }</span><span class="s3">\n            </span><span class="s1">init = {</span><span class="s3">\n              </span><span class="s1">...otherInput,</span><span class="s3">\n              </span><span class="s1">body: _ogBody || body,</span><span class="s3">\n              </span><span class="s1">signal: isStale ? undefined : signal,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// add metadata to init without editing the original</span><span class="s3">\n          </span><span class="s1">const clonedInit = {</span><span class="s3">\n            </span><span class="s1">...init,</span><span class="s3">\n            </span><span class="s1">next: { ...init?.next, fetchType: 'origin', fetchIdx },</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return originFetch(input, clonedInit)</span><span class="s3">\n            </span><span class="s1">.then(async (res) =&gt; {</span><span class="s3">\n              </span><span class="s1">if (!isStale &amp;&amp; fetchStart) {</span><span class="s3">\n                </span><span class="s1">trackFetchMetric(workStore, {</span><span class="s3">\n                  </span><span class="s1">start: fetchStart,</span><span class="s3">\n                  </span><span class="s1">url: fetchUrl,</span><span class="s3">\n                  </span><span class="s1">cacheReason: cacheReasonOverride || cacheReason,</span><span class="s3">\n                  </span><span class="s1">cacheStatus:</span><span class="s3">\n                    </span><span class="s1">finalRevalidate === 0 || cacheReasonOverride</span><span class="s3">\n                      </span><span class="s1">? 'skip'</span><span class="s3">\n                      </span><span class="s1">: 'miss',</span><span class="s3">\n                  </span><span class="s1">cacheWarning,</span><span class="s3">\n                  </span><span class="s1">status: res.status,</span><span class="s3">\n                  </span><span class="s1">method: clonedInit.method || 'GET',</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">res.status === 200 &amp;&amp;</span><span class="s3">\n                </span><span class="s1">incrementalCache &amp;&amp;</span><span class="s3">\n                </span><span class="s1">cacheKey &amp;&amp;</span><span class="s3">\n                </span><span class="s1">(isCacheableRevalidate || serverComponentsHmrCache)</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">const normalizedRevalidate =</span><span class="s3">\n                  </span><span class="s1">finalRevalidate &gt;= INFINITE_CACHE</span><span class="s3">\n                    </span><span class="s1">? CACHE_ONE_YEAR</span><span class="s3">\n                    </span><span class="s1">: finalRevalidate</span><span class="s3">\n\n                </span><span class="s1">const incrementalCacheConfig:</span><span class="s3">\n                  </span><span class="s1">| SetIncrementalFetchCacheContext</span><span class="s3">\n                  </span><span class="s1">| undefined = isCacheableRevalidate</span><span class="s3">\n                  </span><span class="s1">? {</span><span class="s3">\n                      </span><span class="s1">fetchCache: true,</span><span class="s3">\n                      </span><span class="s1">fetchUrl,</span><span class="s3">\n                      </span><span class="s1">fetchIdx,</span><span class="s3">\n                      </span><span class="s1">tags,</span><span class="s3">\n                      </span><span class="s1">isImplicitBuildTimeCache,</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">: undefined</span><span class="s3">\n\n                </span><span class="s1">switch (workUnitStore?.type) {</span><span class="s3">\n                  </span><span class="s1">case 'prerender':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-client':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n                    </span><span class="s1">return createCachedPrerenderResponse(</span><span class="s3">\n                      </span><span class="s1">res,</span><span class="s3">\n                      </span><span class="s1">cacheKey,</span><span class="s3">\n                      </span><span class="s1">incrementalCacheConfig,</span><span class="s3">\n                      </span><span class="s1">incrementalCache,</span><span class="s3">\n                      </span><span class="s1">normalizedRevalidate,</span><span class="s3">\n                      </span><span class="s1">handleUnlock</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n                  </span><span class="s1">case 'request':</span><span class="s3">\n                  </span><span class="s1">case 'cache':</span><span class="s3">\n                  </span><span class="s1">case 'private-cache':</span><span class="s3">\n                  </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n                  </span><span class="s1">case undefined:</span><span class="s3">\n                    </span><span class="s1">return createCachedDynamicResponse(</span><span class="s3">\n                      </span><span class="s1">workStore,</span><span class="s3">\n                      </span><span class="s1">res,</span><span class="s3">\n                      </span><span class="s1">cacheKey,</span><span class="s3">\n                      </span><span class="s1">incrementalCacheConfig,</span><span class="s3">\n                      </span><span class="s1">incrementalCache,</span><span class="s3">\n                      </span><span class="s1">serverComponentsHmrCache,</span><span class="s3">\n                      </span><span class="s1">normalizedRevalidate,</span><span class="s3">\n                      </span><span class="s1">input,</span><span class="s3">\n                      </span><span class="s1">handleUnlock</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">default:</span><span class="s3">\n                    </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">// we had response that we determined shouldn't be cached so we return it</span><span class="s3">\n              </span><span class="s1">// and don't cache it. This also needs to unlock the cache lock we acquired.</span><span class="s3">\n              </span><span class="s1">await handleUnlock()</span><span class="s3">\n\n              </span><span class="s1">return res</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">.catch((error) =&gt; {</span><span class="s3">\n              </span><span class="s1">handleUnlock()</span><span class="s3">\n              </span><span class="s1">throw error</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">let cacheReasonOverride</span><span class="s3">\n        </span><span class="s1">let isForegroundRevalidate = false</span><span class="s3">\n        </span><span class="s1">let isHmrRefreshCache = false</span><span class="s3">\n\n        </span><span class="s1">if (cacheKey &amp;&amp; incrementalCache) {</span><span class="s3">\n          </span><span class="s1">let cachedFetchData: CachedFetchData | undefined</span><span class="s3">\n\n          </span><span class="s1">if (isHmrRefresh &amp;&amp; serverComponentsHmrCache) {</span><span class="s3">\n            </span><span class="s1">cachedFetchData = serverComponentsHmrCache.get(cacheKey)</span><span class="s3">\n            </span><span class="s1">isHmrRefreshCache = true</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (isCacheableRevalidate &amp;&amp; !cachedFetchData) {</span><span class="s3">\n            </span><span class="s1">handleUnlock = await incrementalCache.lock(cacheKey)</span><span class="s3">\n            </span><span class="s1">const entry = workStore.isOnDemandRevalidate</span><span class="s3">\n              </span><span class="s1">? null</span><span class="s3">\n              </span><span class="s1">: await incrementalCache.get(cacheKey, {</span><span class="s3">\n                  </span><span class="s1">kind: IncrementalCacheKind.FETCH,</span><span class="s3">\n                  </span><span class="s1">revalidate: finalRevalidate,</span><span class="s3">\n                  </span><span class="s1">fetchUrl,</span><span class="s3">\n                  </span><span class="s1">fetchIdx,</span><span class="s3">\n                  </span><span class="s1">tags,</span><span class="s3">\n                  </span><span class="s1">softTags: implicitTags?.tags,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">if (hasNoExplicitCacheConfig &amp;&amp; workUnitStore) {</span><span class="s3">\n              </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n                </span><span class="s1">case 'prerender':</span><span class="s3">\n                </span><span class="s1">case 'prerender-client':</span><span class="s3">\n                </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n                  </span><span class="s1">// We sometimes use the cache to dedupe fetches that do not</span><span class="s3">\n                  </span><span class="s1">// specify a cache configuration. In these cases we want to</span><span class="s3">\n                  </span><span class="s1">// make sure we still exclude them from prerenders if</span><span class="s3">\n                  </span><span class="s1">// cacheComponents is on so we introduce an artificial task boundary</span><span class="s3">\n                  </span><span class="s1">// here.</span><span class="s3">\n                  </span><span class="s1">await waitAtLeastOneReactRenderTask()</span><span class="s3">\n                  </span><span class="s1">break</span><span class="s3">\n                </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n                </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n                </span><span class="s1">case 'request':</span><span class="s3">\n                </span><span class="s1">case 'cache':</span><span class="s3">\n                </span><span class="s1">case 'private-cache':</span><span class="s3">\n                </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n                  </span><span class="s1">break</span><span class="s3">\n                </span><span class="s1">default:</span><span class="s3">\n                  </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">if (entry) {</span><span class="s3">\n              </span><span class="s1">await handleUnlock()</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">// in dev, incremental cache response will be null in case the browser adds `cache-control: no-cache` in the request headers</span><span class="s3">\n              </span><span class="s1">cacheReasonOverride = 'cache-control: no-cache (hard refresh)'</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">if (entry?.value &amp;&amp; entry.value.kind === CachedRouteKind.FETCH) {</span><span class="s3">\n              </span><span class="s1">// when stale and is revalidating we wait for fresh data</span><span class="s3">\n              </span><span class="s1">// so the revalidated entry has the updated data</span><span class="s3">\n              </span><span class="s1">if (workStore.isRevalidate &amp;&amp; entry.isStale) {</span><span class="s3">\n                </span><span class="s1">isForegroundRevalidate = true</span><span class="s3">\n              </span><span class="s1">} else {</span><span class="s3">\n                </span><span class="s1">if (entry.isStale) {</span><span class="s3">\n                  </span><span class="s1">workStore.pendingRevalidates ??= {}</span><span class="s3">\n                  </span><span class="s1">if (!workStore.pendingRevalidates[cacheKey]) {</span><span class="s3">\n                    </span><span class="s1">const pendingRevalidate = doOriginalFetch(true)</span><span class="s3">\n                      </span><span class="s1">.then(async (response) =&gt; ({</span><span class="s3">\n                        </span><span class="s1">body: await response.arrayBuffer(),</span><span class="s3">\n                        </span><span class="s1">headers: response.headers,</span><span class="s3">\n                        </span><span class="s1">status: response.status,</span><span class="s3">\n                        </span><span class="s1">statusText: response.statusText,</span><span class="s3">\n                      </span><span class="s1">}))</span><span class="s3">\n                      </span><span class="s1">.finally(() =&gt; {</span><span class="s3">\n                        </span><span class="s1">workStore.pendingRevalidates ??= {}</span><span class="s3">\n                        </span><span class="s1">delete workStore.pendingRevalidates[cacheKey || '']</span><span class="s3">\n                      </span><span class="s1">})</span><span class="s3">\n\n                    </span><span class="s1">// Attach the empty catch here so we don't get a </span><span class="s3">\&quot;</span><span class="s1">unhandled</span><span class="s3">\n                    </span><span class="s1">// promise rejection</span><span class="s3">\&quot; </span><span class="s1">warning.</span><span class="s3">\n                    </span><span class="s1">pendingRevalidate.catch(console.error)</span><span class="s3">\n\n                    </span><span class="s1">workStore.pendingRevalidates[cacheKey] = pendingRevalidate</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n\n                </span><span class="s1">cachedFetchData = entry.value.data</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (cachedFetchData) {</span><span class="s3">\n            </span><span class="s1">if (fetchStart) {</span><span class="s3">\n              </span><span class="s1">trackFetchMetric(workStore, {</span><span class="s3">\n                </span><span class="s1">start: fetchStart,</span><span class="s3">\n                </span><span class="s1">url: fetchUrl,</span><span class="s3">\n                </span><span class="s1">cacheReason,</span><span class="s3">\n                </span><span class="s1">cacheStatus: isHmrRefreshCache ? 'hmr' : 'hit',</span><span class="s3">\n                </span><span class="s1">cacheWarning,</span><span class="s3">\n                </span><span class="s1">status: cachedFetchData.status || 200,</span><span class="s3">\n                </span><span class="s1">method: init?.method || 'GET',</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const response = new Response(</span><span class="s3">\n              </span><span class="s1">Buffer.from(cachedFetchData.body, 'base64'),</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">headers: cachedFetchData.headers,</span><span class="s3">\n                </span><span class="s1">status: cachedFetchData.status,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n\n            </span><span class="s1">Object.defineProperty(response, 'url', {</span><span class="s3">\n              </span><span class="s1">value: cachedFetchData.url,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">return response</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (workStore.isStaticGeneration &amp;&amp; init &amp;&amp; typeof init === 'object') {</span><span class="s3">\n          </span><span class="s1">const { cache } = init</span><span class="s3">\n\n          </span><span class="s1">// Delete `cache` property as Cloudflare Workers will throw an error</span><span class="s3">\n          </span><span class="s1">if (isEdgeRuntime) delete init.cache</span><span class="s3">\n\n          </span><span class="s1">if (cache === 'no-store') {</span><span class="s3">\n            </span><span class="s1">// If enabled, we should bail out of static generation.</span><span class="s3">\n            </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n              </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n                </span><span class="s1">case 'prerender':</span><span class="s3">\n                </span><span class="s1">case 'prerender-client':</span><span class="s3">\n                </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n                  </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n                    </span><span class="s1">cacheSignal.endRead()</span><span class="s3">\n                    </span><span class="s1">cacheSignal = null</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">return makeHangingPromise&lt;Response&gt;(</span><span class="s3">\n                    </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n                    </span><span class="s1">workStore.route,</span><span class="s3">\n                    </span><span class="s1">'fetch()'</span><span class="s3">\n                  </span><span class="s1">)</span><span class="s3">\n                </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n                </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n                </span><span class="s1">case 'request':</span><span class="s3">\n                </span><span class="s1">case 'cache':</span><span class="s3">\n                </span><span class="s1">case 'private-cache':</span><span class="s3">\n                </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n                  </span><span class="s1">break</span><span class="s3">\n                </span><span class="s1">default:</span><span class="s3">\n                  </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">markCurrentScopeAsDynamic(</span><span class="s3">\n              </span><span class="s1">workStore,</span><span class="s3">\n              </span><span class="s1">workUnitStore,</span><span class="s3">\n              </span><span class="s1">`no-store fetch ${input} ${workStore.route}`</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const hasNextConfig = 'next' in init</span><span class="s3">\n          </span><span class="s1">const { next = {} } = init</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">typeof next.revalidate === 'number' &amp;&amp;</span><span class="s3">\n            </span><span class="s1">revalidateStore &amp;&amp;</span><span class="s3">\n            </span><span class="s1">next.revalidate &lt; revalidateStore.revalidate</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">if (next.revalidate === 0) {</span><span class="s3">\n              </span><span class="s1">// If enabled, we should bail out of static generation.</span><span class="s3">\n              </span><span class="s1">if (workUnitStore) {</span><span class="s3">\n                </span><span class="s1">switch (workUnitStore.type) {</span><span class="s3">\n                  </span><span class="s1">case 'prerender':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-client':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-runtime':</span><span class="s3">\n                    </span><span class="s1">return makeHangingPromise&lt;Response&gt;(</span><span class="s3">\n                      </span><span class="s1">workUnitStore.renderSignal,</span><span class="s3">\n                      </span><span class="s1">workStore.route,</span><span class="s3">\n                      </span><span class="s1">'fetch()'</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">case 'request':</span><span class="s3">\n                  </span><span class="s1">case 'cache':</span><span class="s3">\n                  </span><span class="s1">case 'private-cache':</span><span class="s3">\n                  </span><span class="s1">case 'unstable-cache':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-legacy':</span><span class="s3">\n                  </span><span class="s1">case 'prerender-ppr':</span><span class="s3">\n                    </span><span class="s1">break</span><span class="s3">\n                  </span><span class="s1">default:</span><span class="s3">\n                    </span><span class="s1">workUnitStore satisfies never</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">markCurrentScopeAsDynamic(</span><span class="s3">\n                </span><span class="s1">workStore,</span><span class="s3">\n                </span><span class="s1">workUnitStore,</span><span class="s3">\n                </span><span class="s1">`revalidate: 0 fetch ${input} ${workStore.route}`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">if (!workStore.forceStatic || next.revalidate !== 0) {</span><span class="s3">\n              </span><span class="s1">revalidateStore.revalidate = next.revalidate</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (hasNextConfig) delete init.next</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// if we are revalidating the whole page via time or on-demand and</span><span class="s3">\n        </span><span class="s1">// the fetch cache entry is stale we should still de-dupe the</span><span class="s3">\n        </span><span class="s1">// origin hit if it's a cache-able entry</span><span class="s3">\n        </span><span class="s1">if (cacheKey &amp;&amp; isForegroundRevalidate) {</span><span class="s3">\n          </span><span class="s1">const pendingRevalidateKey = cacheKey</span><span class="s3">\n          </span><span class="s1">workStore.pendingRevalidates ??= {}</span><span class="s3">\n          </span><span class="s1">let pendingRevalidate =</span><span class="s3">\n            </span><span class="s1">workStore.pendingRevalidates[pendingRevalidateKey]</span><span class="s3">\n\n          </span><span class="s1">if (pendingRevalidate) {</span><span class="s3">\n            </span><span class="s1">const revalidatedResult: {</span><span class="s3">\n              </span><span class="s1">body: ArrayBuffer</span><span class="s3">\n              </span><span class="s1">headers: Headers</span><span class="s3">\n              </span><span class="s1">status: number</span><span class="s3">\n              </span><span class="s1">statusText: string</span><span class="s3">\n            </span><span class="s1">} = await pendingRevalidate</span><span class="s3">\n            </span><span class="s1">return new Response(revalidatedResult.body, {</span><span class="s3">\n              </span><span class="s1">headers: revalidatedResult.headers,</span><span class="s3">\n              </span><span class="s1">status: revalidatedResult.status,</span><span class="s3">\n              </span><span class="s1">statusText: revalidatedResult.statusText,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// We used to just resolve the Response and clone it however for</span><span class="s3">\n          </span><span class="s1">// static generation with cacheComponents we need the response to be able to</span><span class="s3">\n          </span><span class="s1">// be resolved in a microtask and cloning the response will never have</span><span class="s3">\n          </span><span class="s1">// a body that can resolve in a microtask in node (as observed through</span><span class="s3">\n          </span><span class="s1">// experimentation) So instead we await the body and then when it is</span><span class="s3">\n          </span><span class="s1">// available we construct manually cloned Response objects with the</span><span class="s3">\n          </span><span class="s1">// body as an ArrayBuffer. This will be resolvable in a microtask</span><span class="s3">\n          </span><span class="s1">// making it compatible with cacheComponents.</span><span class="s3">\n          </span><span class="s1">const pendingResponse = doOriginalFetch(true, cacheReasonOverride)</span><span class="s3">\n            </span><span class="s1">// We're cloning the response using this utility because there</span><span class="s3">\n            </span><span class="s1">// exists a bug in the undici library around response cloning.</span><span class="s3">\n            </span><span class="s1">// See the following pull request for more details:</span><span class="s3">\n            </span><span class="s1">// https://github.com/vercel/next.js/pull/73274</span><span class="s3">\n            </span><span class="s1">.then(cloneResponse)</span><span class="s3">\n\n          </span><span class="s1">pendingRevalidate = pendingResponse</span><span class="s3">\n            </span><span class="s1">.then(async (responses) =&gt; {</span><span class="s3">\n              </span><span class="s1">const response = responses[0]</span><span class="s3">\n              </span><span class="s1">return {</span><span class="s3">\n                </span><span class="s1">body: await response.arrayBuffer(),</span><span class="s3">\n                </span><span class="s1">headers: response.headers,</span><span class="s3">\n                </span><span class="s1">status: response.status,</span><span class="s3">\n                </span><span class="s1">statusText: response.statusText,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">.finally(() =&gt; {</span><span class="s3">\n              </span><span class="s1">// If the pending revalidate is not present in the store, then</span><span class="s3">\n              </span><span class="s1">// we have nothing to delete.</span><span class="s3">\n              </span><span class="s1">if (!workStore.pendingRevalidates?.[pendingRevalidateKey]) {</span><span class="s3">\n                </span><span class="s1">return</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">delete workStore.pendingRevalidates[pendingRevalidateKey]</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n\n          </span><span class="s1">// Attach the empty catch here so we don't get a </span><span class="s3">\&quot;</span><span class="s1">unhandled promise</span><span class="s3">\n          </span><span class="s1">// rejection</span><span class="s3">\&quot; </span><span class="s1">warning</span><span class="s3">\n          </span><span class="s1">pendingRevalidate.catch(() =&gt; {})</span><span class="s3">\n\n          </span><span class="s1">workStore.pendingRevalidates[pendingRevalidateKey] = pendingRevalidate</span><span class="s3">\n\n          </span><span class="s1">return pendingResponse.then((responses) =&gt; responses[1])</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">return doOriginalFetch(false, cacheReasonOverride)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">return await result</span><span class="s3">\n      </span><span class="s1">} finally {</span><span class="s3">\n        </span><span class="s1">if (cacheSignal) {</span><span class="s3">\n          </span><span class="s1">cacheSignal.endRead()</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return result</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Attach the necessary properties to the patched fetch function.</span><span class="s3">\n  </span><span class="s1">// We don't use this to determine if the fetch function has been patched,</span><span class="s3">\n  </span><span class="s1">// but for external consumers to determine if the fetch function has been</span><span class="s3">\n  </span><span class="s1">// patched.</span><span class="s3">\n  </span><span class="s1">patched.__nextPatched = true as const</span><span class="s3">\n  </span><span class="s1">patched.__nextGetStaticStore = () =&gt; workAsyncStorage</span><span class="s3">\n  </span><span class="s1">patched._nextOriginalFetch = originFetch</span><span class="s3">\n  </span><span class="s1">;(globalThis as Record&lt;symbol, unknown&gt;)[NEXT_PATCH_SYMBOL] = true</span><span class="s3">\n\n  </span><span class="s1">// Assign the function name also as a name property, so that it's preserved</span><span class="s3">\n  </span><span class="s1">// even when mangling is enabled.</span><span class="s3">\n  </span><span class="s1">Object.defineProperty(patched, 'name', { value: 'fetch', writable: false })</span><span class="s3">\n\n  </span><span class="s1">return patched</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// we patch fetch to collect cache information used for</span><span class="s3">\n</span><span class="s1">// determining if a page is static or not</span><span class="s3">\n</span><span class="s1">export function patchFetch(options: PatchableModule) {</span><span class="s3">\n  </span><span class="s1">// If we've already patched fetch, we should not patch it again.</span><span class="s3">\n  </span><span class="s1">if (isFetchPatched()) return</span><span class="s3">\n\n  </span><span class="s1">// Grab the original fetch function. We'll attach this so we can use it in</span><span class="s3">\n  </span><span class="s1">// the patched fetch function.</span><span class="s3">\n  </span><span class="s1">const original = createDedupeFetch(globalThis.fetch)</span><span class="s3">\n\n  </span><span class="s1">// Set the global fetch to the patched fetch.</span><span class="s3">\n  </span><span class="s1">globalThis.fetch = createPatchedFetcher(original, options)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AppRenderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NextNodeServerSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getTracer&quot;</span><span class="s0">,</span><span class="s1">&quot;SpanKind&quot;</span><span class="s0">,</span><span class="s1">&quot;CACHE_ONE_YEAR&quot;</span><span class="s0">,</span><span class="s1">&quot;INFINITE_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_ITEMS&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_CACHE_TAG_MAX_LENGTH&quot;</span><span class="s0">,</span><span class="s1">&quot;markCurrentScopeAsDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;makeHangingPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;createDedupeFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;CachedRouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;IncrementalCacheKind&quot;</span><span class="s0">,</span><span class="s1">&quot;waitAtLeastOneReactRenderTask&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;isEdgeRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_PATCH_SYMBOL&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;isFetchPatched&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;validateRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidateVal&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;isNaN&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;validateTags&quot;</span><span class="s0">,</span><span class="s1">&quot;tags&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;validTags&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidTags&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;tag&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;trackFetchMetric&quot;</span><span class="s0">,</span><span class="s1">&quot;workStore&quot;</span><span class="s0">,</span><span class="s1">&quot;ctx&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldTrackFetchMetrics&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchMetrics&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;timeOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;idx&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFetchId&quot;</span><span class="s0">,</span><span class="s1">&quot;createCachedPrerenderResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;incrementalCacheContext&quot;</span><span class="s0">,</span><span class="s1">&quot;incrementalCache&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;handleUnlock&quot;</span><span class="s0">,</span><span class="s1">&quot;bodyBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;arrayBuffer&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchedData&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;FETCH&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;Response&quot;</span><span class="s0">,</span><span class="s1">&quot;statusText&quot;</span><span class="s0">,</span><span class="s1">&quot;createCachedDynamicResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;serverComponentsHmrCache&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned1&quot;</span><span class="s0">,</span><span class="s1">&quot;cloned2&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheSetPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;finally&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingRevalidateKey&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingRevalidates&quot;</span><span class="s0">,</span><span class="s1">&quot;createPatchedFetcher&quot;</span><span class="s0">,</span><span class="s1">&quot;originFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;patched&quot;</span><span class="s0">,</span><span class="s1">&quot;fetch&quot;</span><span class="s0">,</span><span class="s1">&quot;init&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;Request&quot;</span><span class="s0">,</span><span class="s1">&quot;username&quot;</span><span class="s0">,</span><span class="s1">&quot;password&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;toUpperCase&quot;</span><span class="s0">,</span><span class="s1">&quot;isInternal&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;internal&quot;</span><span class="s0">,</span><span class="s1">&quot;hideSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_OTEL_FETCH_DISABLED&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchStart&quot;</span><span class="s0">,</span><span class="s1">&quot;getStore&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitStore&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;beginRead&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;internalFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;isDraftMode&quot;</span><span class="s0">,</span><span class="s1">&quot;isRequestInput&quot;</span><span class="s0">,</span><span class="s1">&quot;field&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;finalRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextField&quot;</span><span class="s0">,</span><span class="s1">&quot;originalFetchRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;currentFetchRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidateStore&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;collectedTags&quot;</span><span class="s0">,</span><span class="s1">&quot;implicitTags&quot;</span><span class="s0">,</span><span class="s1">&quot;pageFetchCacheMode&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchCache&quot;</span><span class="s0">,</span><span class="s1">&quot;isUsingNoStore&quot;</span><span class="s0">,</span><span class="s1">&quot;isUnstableNoStore&quot;</span><span class="s0">,</span><span class="s1">&quot;currentFetchCacheConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheReason&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheWarning&quot;</span><span class="s0">,</span><span class="s1">&quot;isConflictingRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;hasExplicitFetchCacheOptOut&quot;</span><span class="s0">,</span><span class="s1">&quot;noFetchConfigAndForceDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;forceDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;_headers&quot;</span><span class="s0">,</span><span class="s1">&quot;initHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;Headers&quot;</span><span class="s0">,</span><span class="s1">&quot;hasUnCacheableHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;isUnCacheableMethod&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;hasNoExplicitCacheConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;autoNoCache&quot;</span><span class="s0">,</span><span class="s1">&quot;isImplicitBuildTimeCache&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuildTimePrerendering&quot;</span><span class="s0">,</span><span class="s1">&quot;endRead&quot;</span><span class="s0">,</span><span class="s1">&quot;renderSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;forceStatic&quot;</span><span class="s0">,</span><span class="s1">&quot;isCacheableRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;isHmrRefresh&quot;</span><span class="s0">,</span><span class="s1">&quot;generateCacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchIdx&quot;</span><span class="s0">,</span><span class="s1">&quot;doOriginalFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;isStale&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheReasonOverride&quot;</span><span class="s0">,</span><span class="s1">&quot;requestInputFields&quot;</span><span class="s0">,</span><span class="s1">&quot;reqInput&quot;</span><span class="s0">,</span><span class="s1">&quot;reqOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;_ogBody&quot;</span><span class="s0">,</span><span class="s1">&quot;signal&quot;</span><span class="s0">,</span><span class="s1">&quot;otherInput&quot;</span><span class="s0">,</span><span class="s1">&quot;clonedInit&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchType&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;incrementalCacheConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;isForegroundRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;isHmrRefreshCache&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedFetchData&quot;</span><span class="s0">,</span><span class="s1">&quot;lock&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;isOnDemandRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;softTags&quot;</span><span class="s0">,</span><span class="s1">&quot;isRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;defineProperty&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticGeneration&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;hasNextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidatedResult&quot;</span><span class="s0">,</span><span class="s1">&quot;pendingResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;responses&quot;</span><span class="s0">,</span><span class="s1">&quot;__nextPatched&quot;</span><span class="s0">,</span><span class="s1">&quot;__nextGetStaticStore&quot;</span><span class="s0">,</span><span class="s1">&quot;_nextOriginalFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;writable&quot;</span><span class="s0">,</span><span class="s1">&quot;patchFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;original&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">20438</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js &lt;module evaluation&gt;</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">20444</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js/__nextjs-internal-proxy.cjs&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// This file is generated by next-core EcmascriptClientReferenceModule.</span><span class="s3">\n</span><span class="s1">const { createClientModuleProxy } = require(</span><span class="s3">\&quot;</span><span class="s1">react-server-dom-turbopack/server</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">__turbopack_context__.n(createClientModuleProxy(</span><span class="s3">\&quot;</span><span class="s1">[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,uEAAuE;AACvE,MAAM,EAAE,uBAAuB,EAAE;AAEjC,sBAAsB,CAAC,CAAC,wBAAwB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">20451</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/next-devtools/userspace/app/segment-explorer-node.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;'use client'</span><span class="s3">\n\n</span><span class="s1">import type { ReactNode } from 'react'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">useState,</span><span class="s3">\n  </span><span class="s1">createContext,</span><span class="s3">\n  </span><span class="s1">useContext,</span><span class="s3">\n  </span><span class="s1">use,</span><span class="s3">\n  </span><span class="s1">useMemo,</span><span class="s3">\n  </span><span class="s1">useCallback,</span><span class="s3">\n</span><span class="s1">} from 'react'</span><span class="s3">\n</span><span class="s1">import { useLayoutEffect } from 'react'</span><span class="s3">\n</span><span class="s1">import { dispatcher } from 'next/dist/compiled/next-devtools'</span><span class="s3">\n</span><span class="s1">import { notFound } from '../../../client/components/not-found'</span><span class="s3">\n\n</span><span class="s1">export type SegmentBoundaryType =</span><span class="s3">\n  </span><span class="s1">| 'not-found'</span><span class="s3">\n  </span><span class="s1">| 'error'</span><span class="s3">\n  </span><span class="s1">| 'loading'</span><span class="s3">\n  </span><span class="s1">| 'global-error'</span><span class="s3">\n\n</span><span class="s1">export const SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE =</span><span class="s3">\n  </span><span class="s1">'NEXT_DEVTOOLS_SIMULATED_ERROR'</span><span class="s3">\n\n</span><span class="s1">export type SegmentNodeState = {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n  </span><span class="s1">boundaryType: string | null</span><span class="s3">\n  </span><span class="s1">setBoundaryType: (type: SegmentBoundaryType | null) =&gt; void</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function SegmentTrieNode({</span><span class="s3">\n  </span><span class="s1">type,</span><span class="s3">\n  </span><span class="s1">pagePath,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n</span><span class="s1">}): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">const { boundaryType, setBoundaryType } = useSegmentState()</span><span class="s3">\n  </span><span class="s1">const nodeState: SegmentNodeState = useMemo(() =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">type,</span><span class="s3">\n      </span><span class="s1">pagePath,</span><span class="s3">\n      </span><span class="s1">boundaryType,</span><span class="s3">\n      </span><span class="s1">setBoundaryType,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [type, pagePath, boundaryType, setBoundaryType])</span><span class="s3">\n\n  </span><span class="s1">// Use `useLayoutEffect` to ensure the state is updated during suspense.</span><span class="s3">\n  </span><span class="s1">// `useEffect` won't work as the state is preserved during suspense.</span><span class="s3">\n  </span><span class="s1">useLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">dispatcher.segmentExplorerNodeAdd(nodeState)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">dispatcher.segmentExplorerNodeRemove(nodeState)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [nodeState])</span><span class="s3">\n\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function NotFoundSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">notFound()</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function ErrorSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">throw new Error(SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const forever = new Promise(() =&gt; {})</span><span class="s3">\n</span><span class="s1">function LoadingSegmentNode(): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">use(forever)</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentViewStateNode({ page }: { page: string }) {</span><span class="s3">\n  </span><span class="s1">useLayoutEffect(() =&gt; {</span><span class="s3">\n    </span><span class="s1">dispatcher.segmentExplorerUpdateRouteState(page)</span><span class="s3">\n    </span><span class="s1">return () =&gt; {</span><span class="s3">\n      </span><span class="s1">dispatcher.segmentExplorerUpdateRouteState('')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}, [page])</span><span class="s3">\n  </span><span class="s1">return null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentBoundaryTriggerNode() {</span><span class="s3">\n  </span><span class="s1">const { boundaryType } = useSegmentState()</span><span class="s3">\n  </span><span class="s1">let segmentNode: React.ReactNode = null</span><span class="s3">\n  </span><span class="s1">if (boundaryType === 'loading') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;LoadingSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">} else if (boundaryType === 'not-found') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;NotFoundSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">} else if (boundaryType === 'error') {</span><span class="s3">\n    </span><span class="s1">segmentNode = &lt;ErrorSegmentNode /&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return segmentNode</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function SegmentViewNode({</span><span class="s3">\n  </span><span class="s1">type,</span><span class="s3">\n  </span><span class="s1">pagePath,</span><span class="s3">\n  </span><span class="s1">children,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">type: string</span><span class="s3">\n  </span><span class="s1">pagePath: string</span><span class="s3">\n  </span><span class="s1">children?: ReactNode</span><span class="s3">\n</span><span class="s1">}): React.ReactNode {</span><span class="s3">\n  </span><span class="s1">const segmentNode = (</span><span class="s3">\n    </span><span class="s1">&lt;SegmentTrieNode key={type} type={type} pagePath={pagePath} /&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;&gt;</span><span class="s3">\n      </span><span class="s1">{segmentNode}</span><span class="s3">\n      </span><span class="s1">{children}</span><span class="s3">\n    </span><span class="s1">&lt;/&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const SegmentStateContext = createContext&lt;{</span><span class="s3">\n  </span><span class="s1">boundaryType: SegmentBoundaryType | null</span><span class="s3">\n  </span><span class="s1">setBoundaryType: (type: SegmentBoundaryType | null) =&gt; void</span><span class="s3">\n</span><span class="s1">}&gt;({</span><span class="s3">\n  </span><span class="s1">boundaryType: null,</span><span class="s3">\n  </span><span class="s1">setBoundaryType: () =&gt; {},</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">export function SegmentStateProvider({ children }: { children: ReactNode }) {</span><span class="s3">\n  </span><span class="s1">const [boundaryType, setBoundaryType] = useState&lt;SegmentBoundaryType | null&gt;(</span><span class="s3">\n    </span><span class="s1">null</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const [errorBoundaryKey, setErrorBoundaryKey] = useState(0)</span><span class="s3">\n  </span><span class="s1">const reloadBoundary = useCallback(</span><span class="s3">\n    </span><span class="s1">() =&gt; setErrorBoundaryKey((prev) =&gt; prev + 1),</span><span class="s3">\n    </span><span class="s1">[]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const setBoundaryTypeAndReload = useCallback(</span><span class="s3">\n    </span><span class="s1">(type: SegmentBoundaryType | null) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (type === null) {</span><span class="s3">\n        </span><span class="s1">reloadBoundary()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">setBoundaryType(type)</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">[reloadBoundary]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;SegmentStateContext.Provider</span><span class="s3">\n      </span><span class="s1">key={errorBoundaryKey}</span><span class="s3">\n      </span><span class="s1">value={{</span><span class="s3">\n        </span><span class="s1">boundaryType,</span><span class="s3">\n        </span><span class="s1">setBoundaryType: setBoundaryTypeAndReload,</span><span class="s3">\n      </span><span class="s1">}}</span><span class="s3">\n    </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">{children}</span><span class="s3">\n    </span><span class="s1">&lt;/SegmentStateContext.Provider&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function useSegmentState() {</span><span class="s3">\n  </span><span class="s1">return useContext(SegmentStateContext)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;useState&quot;</span><span class="s0">,</span><span class="s1">&quot;createContext&quot;</span><span class="s0">,</span><span class="s1">&quot;useContext&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;useMemo&quot;</span><span class="s0">,</span><span class="s1">&quot;useCallback&quot;</span><span class="s0">,</span><span class="s1">&quot;useLayoutEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;dispatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;notFound&quot;</span><span class="s0">,</span><span class="s1">&quot;SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentTrieNode&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;boundaryType&quot;</span><span class="s0">,</span><span class="s1">&quot;setBoundaryType&quot;</span><span class="s0">,</span><span class="s1">&quot;useSegmentState&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeState&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerNodeAdd&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerNodeRemove&quot;</span><span class="s0">,</span><span class="s1">&quot;NotFoundSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;ErrorSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;forever&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;LoadingSegmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewStateNode&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentExplorerUpdateRouteState&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentBoundaryTriggerNode&quot;</span><span class="s0">,</span><span class="s1">&quot;segmentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewNode&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentStateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentStateProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;errorBoundaryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;setErrorBoundaryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;reloadBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;prev&quot;</span><span class="s0">,</span><span class="s1">&quot;setBoundaryTypeAndReload&quot;</span><span class="s0">,</span><span class="s1">&quot;Provider&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}},</span>
    <span class="s0">{</span><span class="s1">&quot;offset&quot;</span><span class="s0">: {</span><span class="s1">&quot;line&quot;</span><span class="s0">: </span><span class="s2">20459</span><span class="s0">, </span><span class="s1">&quot;column&quot;</span><span class="s0">: </span><span class="s2">0</span><span class="s0">}, </span><span class="s1">&quot;map&quot;</span><span class="s0">: {</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;file:///Users/dh/WebstormProjects/bluestag/node_modules/next/dist/src/server/app-render/entry-base.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">createTemporaryReferenceSet,</span><span class="s3">\n  </span><span class="s1">renderToReadableStream,</span><span class="s3">\n  </span><span class="s1">decodeReply,</span><span class="s3">\n  </span><span class="s1">decodeAction,</span><span class="s3">\n  </span><span class="s1">decodeFormState,</span><span class="s3">\n</span><span class="s1">} from 'react-server-dom-webpack/server'</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">export { unstable_prerender as prerender } from 'react-server-dom-webpack/static'</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line import/no-extraneous-dependencies</span><span class="s3">\n</span><span class="s1">export { captureOwnerStack } from 'react'</span><span class="s3">\n\n</span><span class="s1">export { default as LayoutRouter } from '../../client/components/layout-router'</span><span class="s3">\n</span><span class="s1">export { default as RenderFromTemplateContext } from '../../client/components/render-from-template-context'</span><span class="s3">\n</span><span class="s1">export { workAsyncStorage } from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">export { workUnitAsyncStorage } from './work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">export { actionAsyncStorage } from '../app-render/action-async-storage.external'</span><span class="s3">\n\n</span><span class="s1">export { ClientPageRoot } from '../../client/components/client-page'</span><span class="s3">\n</span><span class="s1">export { ClientSegmentRoot } from '../../client/components/client-segment'</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">createServerSearchParamsForServerPage,</span><span class="s3">\n  </span><span class="s1">createPrerenderSearchParamsForClientPage,</span><span class="s3">\n</span><span class="s1">} from '../request/search-params'</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">createServerParamsForServerSegment,</span><span class="s3">\n  </span><span class="s1">createPrerenderParamsForClientSegment,</span><span class="s3">\n</span><span class="s1">} from '../request/params'</span><span class="s3">\n</span><span class="s1">export * as serverHooks from '../../client/components/hooks-server-context'</span><span class="s3">\n</span><span class="s1">export { HTTPAccessFallbackBoundary } from '../../client/components/http-access-fallback/error-boundary'</span><span class="s3">\n</span><span class="s1">export { createMetadataComponents } from '../../lib/metadata/metadata'</span><span class="s3">\n</span><span class="s1">export {</span><span class="s3">\n  </span><span class="s1">MetadataBoundary,</span><span class="s3">\n  </span><span class="s1">ViewportBoundary,</span><span class="s3">\n  </span><span class="s1">OutletBoundary,</span><span class="s3">\n  </span><span class="s1">RootLayoutBoundary,</span><span class="s3">\n</span><span class="s1">} from '../../lib/framework/boundary-components'</span><span class="s3">\n\n</span><span class="s1">export { preloadStyle, preloadFont, preconnect } from './rsc/preloads'</span><span class="s3">\n</span><span class="s1">export { Postpone } from './rsc/postpone'</span><span class="s3">\n</span><span class="s1">export { taintObjectReference } from './rsc/taint'</span><span class="s3">\n</span><span class="s1">export { collectSegmentData } from './collect-segment-data'</span><span class="s3">\n\n</span><span class="s1">import { workAsyncStorage } from '../app-render/work-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { workUnitAsyncStorage } from './work-unit-async-storage.external'</span><span class="s3">\n</span><span class="s1">import { patchFetch as _patchFetch } from '../lib/patch-fetch'</span><span class="s3">\n\n</span><span class="s1">let SegmentViewNode: typeof import('../../next-devtools/userspace/app/segment-explorer-node').SegmentViewNode =</span><span class="s3">\n  </span><span class="s1">() =&gt; null</span><span class="s3">\n</span><span class="s1">let SegmentViewStateNode: typeof import('../../next-devtools/userspace/app/segment-explorer-node').SegmentViewStateNode =</span><span class="s3">\n  </span><span class="s1">() =&gt; null</span><span class="s3">\n</span><span class="s1">if (process.env.NODE_ENV === 'development') {</span><span class="s3">\n  </span><span class="s1">const mod =</span><span class="s3">\n    </span><span class="s1">require('../../next-devtools/userspace/app/segment-explorer-node') as typeof import('../../next-devtools/userspace/app/segment-explorer-node')</span><span class="s3">\n  </span><span class="s1">SegmentViewNode = mod.SegmentViewNode</span><span class="s3">\n  </span><span class="s1">SegmentViewStateNode = mod.SegmentViewStateNode</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// For hot-reloader</span><span class="s3">\n</span><span class="s1">declare global {</span><span class="s3">\n  </span><span class="s1">var __next__clear_chunk_cache__: (() =&gt; void) | null | undefined</span><span class="s3">\n  </span><span class="s1">var __turbopack_clear_chunk_cache__: () =&gt; void | null | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">// hot-reloader modules are not bundled so we need to inject `__next__clear_chunk_cache__`</span><span class="s3">\n</span><span class="s1">// into globalThis from this file which is bundled.</span><span class="s3">\n</span><span class="s1">if (process.env.TURBOPACK) {</span><span class="s3">\n  </span><span class="s1">globalThis.__next__clear_chunk_cache__ = __turbopack_clear_chunk_cache__</span><span class="s3">\n</span><span class="s1">} else {</span><span class="s3">\n  </span><span class="s1">// Webpack does not have chunks on the server</span><span class="s3">\n  </span><span class="s1">globalThis.__next__clear_chunk_cache__ = null</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// patchFetch makes use of APIs such as `React.unstable_postpone` which are only available</span><span class="s3">\n</span><span class="s1">// in the experimental channel of React, so export it from here so that it comes from the bundled runtime</span><span class="s3">\n</span><span class="s1">export function patchFetch() {</span><span class="s3">\n  </span><span class="s1">return _patchFetch({</span><span class="s3">\n    </span><span class="s1">workAsyncStorage,</span><span class="s3">\n    </span><span class="s1">workUnitAsyncStorage,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Development only</span><span class="s3">\n</span><span class="s1">export { SegmentViewNode, SegmentViewStateNode }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;createTemporaryReferenceSet&quot;</span><span class="s0">,</span><span class="s1">&quot;renderToReadableStream&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeReply&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeAction&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeFormState&quot;</span><span class="s0">,</span><span class="s1">&quot;unstable_prerender&quot;</span><span class="s0">,</span><span class="s1">&quot;prerender&quot;</span><span class="s0">,</span><span class="s1">&quot;captureOwnerStack&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;LayoutRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;RenderFromTemplateContext&quot;</span><span class="s0">,</span><span class="s1">&quot;workAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;workUnitAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;actionAsyncStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;ClientPageRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;ClientSegmentRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerSearchParamsForServerPage&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderSearchParamsForClientPage&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerParamsForServerSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;createPrerenderParamsForClientSegment&quot;</span><span class="s0">,</span><span class="s1">&quot;serverHooks&quot;</span><span class="s0">,</span><span class="s1">&quot;HTTPAccessFallbackBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;createMetadataComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;MetadataBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;ViewportBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;OutletBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;RootLayoutBoundary&quot;</span><span class="s0">,</span><span class="s1">&quot;preloadStyle&quot;</span><span class="s0">,</span><span class="s1">&quot;preloadFont&quot;</span><span class="s0">,</span><span class="s1">&quot;preconnect&quot;</span><span class="s0">,</span><span class="s1">&quot;Postpone&quot;</span><span class="s0">,</span><span class="s1">&quot;taintObjectReference&quot;</span><span class="s0">,</span><span class="s1">&quot;collectSegmentData&quot;</span><span class="s0">,</span><span class="s1">&quot;patchFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;_patchFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewNode&quot;</span><span class="s0">,</span><span class="s1">&quot;SegmentViewStateNode&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;__next__clear_chunk_cache__&quot;</span><span class="s0">,</span><span class="s1">&quot;__turbopack_clear_chunk_cache__&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;AAAA,6DAA6D;;;;;;;;;AAC7D,SACEA,2BAA2B,EAC3BC,sBAAsB,EACtBC,WAAW,EACXC,YAAY,EACZC,eAAe,QACV,kCAAiC;AAExC,6DAA6D;AAC7D,SAASC,sBAAsBC,SAAS,QAAQ,kCAAiC;AAEjF,6DAA6D;AAC7D,SAASC,iBAAiB,QAAQ,QAAO;AAEzC,SAASC,WAAWC,YAAY,QAAQ,wCAAuC;AAC/E,SAASD,WAAWE,yBAAyB,QAAQ,uDAAsD;AAC3G,SAASC,gBAAgB,QAAQ,4CAA2C;AAC5E,SAASC,oBAAoB,QAAQ,qCAAoC;AACzE,SAASC,kBAAkB,QAAQ,8CAA6C;AAEhF,SAASC,cAAc,QAAQ,sCAAqC;AACpE,SAASC,iBAAiB,QAAQ,yCAAwC;AAC1E,SACEC,qCAAqC,EACrCC,wCAAwC,QACnC,2BAA0B;AACjC,SACEC,kCAAkC,EAClCC,qCAAqC,QAChC,oBAAmB;AAC1B,OAAO,KAAKC,WAAW,MAAM,+CAA8C;AAC3E,SAASC,0BAA0B,QAAQ,8DAA6D;AACxG,SAASC,wBAAwB,QAAQ,8BAA6B;AACtE,SACEC,gBAAgB,EAChBC,gBAAgB,EAChBC,cAAc,EACdC,kBAAkB,QACb,0CAAyC;AAEhD,SAASC,YAAY,EAAEC,WAAW,EAAEC,UAAU,QAAQ,iBAAgB;AACtE,SAASC,QAAQ,QAAQ,iBAAgB;AACzC,SAASC,oBAAoB,QAAQ,cAAa;AAClD,SAASC,kBAAkB,QAAQ,yBAAwB;AAI3D,SAASC,cAAcC,WAAW,QAAQ,qBAAoB;;;;;;;;;;;;;;;;;;;;;;;;AAE9D,IAAIC,kBACF,IAAM;AACR,IAAIC,uBACF,IAAM;AACR,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,WAAe;IAC1C,MAAMC,MACJC,QAAQ;IACVN,kBAAkBK,IAAIL,eAAe;IACrCC,uBAAuBI,IAAIJ,oBAAoB;AACjD;AAOA,0FAA0F;AAC1F,mDAAmD;AACnD,IAAIC,QAAQC,GAAG,CAACI,SAAS,eAAE;IACzBC,WAAWC,2BAA2B,GAAGC;AAC3C,OAAO;;AAOA,SAASZ;IACd,WAAOC,oLAAAA,EAAY;0BACjBvB,uRAAAA;8BACAC,2SAAAA;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">],</span><span class="s1">&quot;debugId&quot;</span><span class="s0">:</span><span class="s4">null</span><span class="s0">}}]</span>
<span class="s0">}</span></pre>
</body>
</html>