<html>
<head>
<title>hot-reloader-webpack.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
hot-reloader-webpack.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/dev/hot-reloader-webpack.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { NextConfigComplete } from '../config-shared'</span><span class="s3">\n</span><span class="s1">import type { CustomRoutes } from '../../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import type { Duplex } from 'stream'</span><span class="s3">\n</span><span class="s1">import type { Telemetry } from '../../telemetry/storage'</span><span class="s3">\n</span><span class="s1">import type { IncomingMessage, ServerResponse } from 'http'</span><span class="s3">\n</span><span class="s1">import type { UrlObject } from 'url'</span><span class="s3">\n</span><span class="s1">import type { RouteDefinition } from '../route-definitions/route-definition'</span><span class="s3">\n\n</span><span class="s1">import { type webpack, StringXor } from 'next/dist/compiled/webpack/webpack'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getOverlayMiddleware,</span><span class="s3">\n  </span><span class="s1">getSourceMapMiddleware,</span><span class="s3">\n</span><span class="s1">} from './middleware-webpack'</span><span class="s3">\n</span><span class="s1">import { WebpackHotMiddleware } from './hot-middleware'</span><span class="s3">\n</span><span class="s1">import { join, relative, isAbsolute, posix, dirname } from 'path'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">createEntrypoints,</span><span class="s3">\n  </span><span class="s1">createPagesMapping,</span><span class="s3">\n  </span><span class="s1">finalizeEntrypoint,</span><span class="s3">\n  </span><span class="s1">getClientEntry,</span><span class="s3">\n  </span><span class="s1">getEdgeServerEntry,</span><span class="s3">\n  </span><span class="s1">getAppEntry,</span><span class="s3">\n  </span><span class="s1">runDependingOnPageType,</span><span class="s3">\n  </span><span class="s1">getStaticInfoIncludingLayouts,</span><span class="s3">\n  </span><span class="s1">getInstrumentationEntry,</span><span class="s3">\n</span><span class="s1">} from '../../build/entries'</span><span class="s3">\n</span><span class="s1">import { watchCompilers } from '../../build/output'</span><span class="s3">\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import getBaseWebpackConfig, {</span><span class="s3">\n  </span><span class="s1">getCacheDirectories,</span><span class="s3">\n  </span><span class="s1">loadProjectInfo,</span><span class="s3">\n</span><span class="s1">} from '../../build/webpack-config'</span><span class="s3">\n</span><span class="s1">import { APP_DIR_ALIAS, WEBPACK_LAYERS } from '../../lib/constants'</span><span class="s3">\n</span><span class="s1">import { recursiveDelete } from '../../lib/recursive-delete'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">BLOCKED_PAGES,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_AMP,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_MAIN,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,</span><span class="s3">\n  </span><span class="s1">COMPILER_NAMES,</span><span class="s3">\n  </span><span class="s1">RSC_MODULE_TYPES,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import type { __ApiPreviewProps } from '../api-utils'</span><span class="s3">\n</span><span class="s1">import { getPathMatch } from '../../shared/lib/router/utils/path-match'</span><span class="s3">\n</span><span class="s1">import { findPageFile } from '../lib/find-page-file'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">BUILDING,</span><span class="s3">\n  </span><span class="s1">getEntries,</span><span class="s3">\n  </span><span class="s1">EntryTypes,</span><span class="s3">\n  </span><span class="s1">getInvalidator,</span><span class="s3">\n  </span><span class="s1">onDemandEntryHandler,</span><span class="s3">\n</span><span class="s1">} from './on-demand-entry-handler'</span><span class="s3">\n</span><span class="s1">import { denormalizePagePath } from '../../shared/lib/page-path/denormalize-page-path'</span><span class="s3">\n</span><span class="s1">import { normalizePathSep } from '../../shared/lib/page-path/normalize-path-sep'</span><span class="s3">\n</span><span class="s1">import getRouteFromEntrypoint from '../get-route-from-entrypoint'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">difference,</span><span class="s3">\n  </span><span class="s1">isInstrumentationHookFile,</span><span class="s3">\n  </span><span class="s1">isMiddlewareFile,</span><span class="s3">\n  </span><span class="s1">isMiddlewareFilename,</span><span class="s3">\n</span><span class="s1">} from '../../build/utils'</span><span class="s3">\n</span><span class="s1">import { DecodeError } from '../../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import { type Span, trace } from '../../trace'</span><span class="s3">\n</span><span class="s1">import { getProperError } from '../../lib/is-error'</span><span class="s3">\n</span><span class="s1">import ws from 'next/dist/compiled/ws'</span><span class="s3">\n</span><span class="s1">import { existsSync, promises as fs } from 'fs'</span><span class="s3">\n</span><span class="s1">import type { UnwrapPromise } from '../../lib/coalesced-function'</span><span class="s3">\n</span><span class="s1">import { parseVersionInfo } from './parse-version-info'</span><span class="s3">\n</span><span class="s1">import type { VersionInfo } from './parse-version-info'</span><span class="s3">\n</span><span class="s1">import { isAPIRoute } from '../../lib/is-api-route'</span><span class="s3">\n</span><span class="s1">import { getRouteLoaderEntry } from '../../build/webpack/loaders/next-route-loader'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">isInternalComponent,</span><span class="s3">\n  </span><span class="s1">isNonRoutePagesPage,</span><span class="s3">\n</span><span class="s1">} from '../../lib/is-internal-component'</span><span class="s3">\n</span><span class="s1">import { RouteKind } from '../route-kind'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">HMR_ACTIONS_SENT_TO_BROWSER,</span><span class="s3">\n  </span><span class="s1">type NextJsHotReloaderInterface,</span><span class="s3">\n</span><span class="s1">} from './hot-reloader-types'</span><span class="s3">\n</span><span class="s1">import type { HMR_ACTION_TYPES } from './hot-reloader-types'</span><span class="s3">\n</span><span class="s1">import type { WebpackError } from 'webpack'</span><span class="s3">\n</span><span class="s1">import { PAGE_TYPES } from '../../lib/page-types'</span><span class="s3">\n</span><span class="s1">import { FAST_REFRESH_RUNTIME_RELOAD } from './messages'</span><span class="s3">\n</span><span class="s1">import { getNodeDebugType } from '../lib/utils'</span><span class="s3">\n</span><span class="s1">import { getNextErrorFeedbackMiddleware } from '../../next-devtools/server/get-next-error-feedback-middleware'</span><span class="s3">\n</span><span class="s1">import { getDevOverlayFontMiddleware } from '../../next-devtools/server/font/get-dev-overlay-font-middleware'</span><span class="s3">\n</span><span class="s1">import { getDisableDevIndicatorMiddleware } from '../../next-devtools/server/dev-indicator-middleware'</span><span class="s3">\n</span><span class="s1">import getWebpackBundler from '../../shared/lib/get-webpack-bundler'</span><span class="s3">\n</span><span class="s1">import { getRestartDevServerMiddleware } from '../../next-devtools/server/restart-dev-server-middleware'</span><span class="s3">\n</span><span class="s1">import { checkPersistentCacheInvalidationAndCleanup } from '../../build/webpack/cache-invalidation'</span><span class="s3">\n</span><span class="s1">import { receiveBrowserLogsWebpack } from './browser-logs/receive-logs'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">devToolsConfigMiddleware,</span><span class="s3">\n  </span><span class="s1">getDevToolsConfig,</span><span class="s3">\n</span><span class="s1">} from '../../next-devtools/server/devtools-config-middleware'</span><span class="s3">\n\n</span><span class="s1">const MILLISECONDS_IN_NANOSECOND = BigInt(1_000_000)</span><span class="s3">\n\n</span><span class="s1">function diff(a: Set&lt;any&gt;, b: Set&lt;any&gt;) {</span><span class="s3">\n  </span><span class="s1">return new Set([...a].filter((v) =&gt; !b.has(v)))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const wsServer = new ws.Server({ noServer: true })</span><span class="s3">\n\n</span><span class="s1">export async function renderScriptError(</span><span class="s3">\n  </span><span class="s1">res: ServerResponse,</span><span class="s3">\n  </span><span class="s1">error: Error,</span><span class="s3">\n  </span><span class="s1">{ verbose = true } = {}</span><span class="s3">\n</span><span class="s1">): Promise&lt;{ finished: true | undefined }&gt; {</span><span class="s3">\n  </span><span class="s1">// Asks CDNs and others to not to cache the errored page</span><span class="s3">\n  </span><span class="s1">res.setHeader(</span><span class="s3">\n    </span><span class="s1">'Cache-Control',</span><span class="s3">\n    </span><span class="s1">'no-cache, no-store, max-age=0, must-revalidate'</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if ((error as any).code === 'ENOENT') {</span><span class="s3">\n    </span><span class="s1">return { finished: undefined }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (verbose) {</span><span class="s3">\n    </span><span class="s1">console.error(error.stack)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">res.statusCode = 500</span><span class="s3">\n  </span><span class="s1">res.end('500 - Internal Error')</span><span class="s3">\n  </span><span class="s1">return { finished: true }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function addCorsSupport(req: IncomingMessage, res: ServerResponse) {</span><span class="s3">\n  </span><span class="s1">// Only rewrite CORS handling when URL matches a hot-reloader middleware</span><span class="s3">\n  </span><span class="s1">if (!req.url!.startsWith('/__next')) {</span><span class="s3">\n    </span><span class="s1">return { preflight: false }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!req.headers.origin) {</span><span class="s3">\n    </span><span class="s1">return { preflight: false }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">res.setHeader('Access-Control-Allow-Origin', req.headers.origin)</span><span class="s3">\n  </span><span class="s1">res.setHeader('Access-Control-Allow-Methods', 'OPTIONS, GET')</span><span class="s3">\n  </span><span class="s1">// Based on https://github.com/primus/access-control/blob/4cf1bc0e54b086c91e6aa44fb14966fa5ef7549c/index.js#L158</span><span class="s3">\n  </span><span class="s1">if (req.headers['access-control-request-headers']) {</span><span class="s3">\n    </span><span class="s1">res.setHeader(</span><span class="s3">\n      </span><span class="s1">'Access-Control-Allow-Headers',</span><span class="s3">\n      </span><span class="s1">req.headers['access-control-request-headers'] as string</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (req.method === 'OPTIONS') {</span><span class="s3">\n    </span><span class="s1">res.writeHead(200)</span><span class="s3">\n    </span><span class="s1">res.end()</span><span class="s3">\n    </span><span class="s1">return { preflight: true }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return { preflight: false }</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const matchNextPageBundleRequest = getPathMatch(</span><span class="s3">\n  </span><span class="s1">'/_next/static/chunks/pages/:path*.js(</span><span class="s3">\\\\</span><span class="s1">.map|)'</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">// Iteratively look up the issuer till it ends up at the root</span><span class="s3">\n</span><span class="s1">function findEntryModule(</span><span class="s3">\n  </span><span class="s1">module: webpack.Module,</span><span class="s3">\n  </span><span class="s1">compilation: webpack.Compilation</span><span class="s3">\n</span><span class="s1">): any {</span><span class="s3">\n  </span><span class="s1">for (;;) {</span><span class="s3">\n    </span><span class="s1">const issuer = compilation.moduleGraph.getIssuer(module)</span><span class="s3">\n    </span><span class="s1">if (!issuer) return module</span><span class="s3">\n    </span><span class="s1">module = issuer</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function erroredPages(compilation: webpack.Compilation) {</span><span class="s3">\n  </span><span class="s1">const failedPages: { [page: string]: WebpackError[] } = {}</span><span class="s3">\n  </span><span class="s1">for (const error of compilation.errors) {</span><span class="s3">\n    </span><span class="s1">if (!error.module) {</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const entryModule = findEntryModule(error.module, compilation)</span><span class="s3">\n    </span><span class="s1">const { name } = entryModule</span><span class="s3">\n    </span><span class="s1">if (!name) {</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Only pages have to be reloaded</span><span class="s3">\n    </span><span class="s1">const enhancedName = getRouteFromEntrypoint(name)</span><span class="s3">\n\n    </span><span class="s1">if (!enhancedName) {</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!failedPages[enhancedName]) {</span><span class="s3">\n      </span><span class="s1">failedPages[enhancedName] = []</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">failedPages[enhancedName].push(error)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return failedPages</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function getVersionInfo(): Promise&lt;VersionInfo&gt; {</span><span class="s3">\n  </span><span class="s1">let installed = '0.0.0'</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">installed = require('next/package.json').version</span><span class="s3">\n\n    </span><span class="s1">let res</span><span class="s3">\n\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">// use NPM registry regardless user using Yarn</span><span class="s3">\n      </span><span class="s1">res = await fetch('https://registry.npmjs.org/-/package/next/dist-tags')</span><span class="s3">\n    </span><span class="s1">} catch {</span><span class="s3">\n      </span><span class="s1">// ignore fetch errors</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!res || !res.ok) return { installed, staleness: 'unknown' }</span><span class="s3">\n\n    </span><span class="s1">const { latest, canary } = await res.json()</span><span class="s3">\n\n    </span><span class="s1">return parseVersionInfo({ installed, latest, canary })</span><span class="s3">\n  </span><span class="s1">} catch (e: any) {</span><span class="s3">\n    </span><span class="s1">console.error(e)</span><span class="s3">\n    </span><span class="s1">return { installed, staleness: 'unknown' }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default class HotReloaderWebpack implements NextJsHotReloaderInterface {</span><span class="s3">\n  </span><span class="s1">private hasAmpEntrypoints: boolean</span><span class="s3">\n  </span><span class="s1">private hasAppRouterEntrypoints: boolean</span><span class="s3">\n  </span><span class="s1">private hasPagesRouterEntrypoints: boolean</span><span class="s3">\n  </span><span class="s1">private dir: string</span><span class="s3">\n  </span><span class="s1">private buildId: string</span><span class="s3">\n  </span><span class="s1">private encryptionKey: string</span><span class="s3">\n  </span><span class="s1">private middlewares: ((</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n    </span><span class="s1">res: ServerResponse,</span><span class="s3">\n    </span><span class="s1">next: () =&gt; void</span><span class="s3">\n  </span><span class="s1">) =&gt; Promise&lt;void&gt;)[]</span><span class="s3">\n  </span><span class="s1">private pagesDir?: string</span><span class="s3">\n  </span><span class="s1">private distDir: string</span><span class="s3">\n  </span><span class="s1">private webpackHotMiddleware?: WebpackHotMiddleware</span><span class="s3">\n  </span><span class="s1">private config: NextConfigComplete</span><span class="s3">\n  </span><span class="s1">private clientStats: webpack.Stats | null</span><span class="s3">\n  </span><span class="s1">private clientError: Error | null = null</span><span class="s3">\n  </span><span class="s1">private serverError: Error | null = null</span><span class="s3">\n  </span><span class="s1">private hmrServerError: Error | null = null</span><span class="s3">\n  </span><span class="s1">private serverPrevDocumentHash: string | null</span><span class="s3">\n  </span><span class="s1">private serverChunkNames?: Set&lt;string&gt;</span><span class="s3">\n  </span><span class="s1">private prevChunkNames?: Set&lt;any&gt;</span><span class="s3">\n  </span><span class="s1">private onDemandEntries?: ReturnType&lt;typeof onDemandEntryHandler&gt;</span><span class="s3">\n  </span><span class="s1">private previewProps: __ApiPreviewProps</span><span class="s3">\n  </span><span class="s1">private watcher: any</span><span class="s3">\n  </span><span class="s1">private rewrites: CustomRoutes['rewrites']</span><span class="s3">\n  </span><span class="s1">private fallbackWatcher: any</span><span class="s3">\n  </span><span class="s1">private hotReloaderSpan: Span</span><span class="s3">\n  </span><span class="s1">private pagesMapping: { [key: string]: string } = {}</span><span class="s3">\n  </span><span class="s1">private appDir?: string</span><span class="s3">\n  </span><span class="s1">private telemetry: Telemetry</span><span class="s3">\n  </span><span class="s1">private resetFetch: () =&gt; void</span><span class="s3">\n  </span><span class="s1">private versionInfo: VersionInfo = {</span><span class="s3">\n    </span><span class="s1">staleness: 'unknown',</span><span class="s3">\n    </span><span class="s1">installed: '0.0.0',</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">private devtoolsFrontendUrl: string | undefined</span><span class="s3">\n  </span><span class="s1">private reloadAfterInvalidation: boolean = false</span><span class="s3">\n  </span><span class="s1">private isSrcDir: boolean</span><span class="s3">\n\n  </span><span class="s1">public serverStats: webpack.Stats | null</span><span class="s3">\n  </span><span class="s1">public edgeServerStats: webpack.Stats | null</span><span class="s3">\n  </span><span class="s1">public multiCompiler?: webpack.MultiCompiler</span><span class="s3">\n  </span><span class="s1">public activeWebpackConfigs?: Array&lt;</span><span class="s3">\n    </span><span class="s1">UnwrapPromise&lt;ReturnType&lt;typeof getBaseWebpackConfig&gt;&gt;</span><span class="s3">\n  </span><span class="s1">&gt;</span><span class="s3">\n\n  </span><span class="s1">constructor(</span><span class="s3">\n    </span><span class="s1">dir: string,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">config,</span><span class="s3">\n      </span><span class="s1">isSrcDir,</span><span class="s3">\n      </span><span class="s1">pagesDir,</span><span class="s3">\n      </span><span class="s1">distDir,</span><span class="s3">\n      </span><span class="s1">buildId,</span><span class="s3">\n      </span><span class="s1">encryptionKey,</span><span class="s3">\n      </span><span class="s1">previewProps,</span><span class="s3">\n      </span><span class="s1">rewrites,</span><span class="s3">\n      </span><span class="s1">appDir,</span><span class="s3">\n      </span><span class="s1">telemetry,</span><span class="s3">\n      </span><span class="s1">resetFetch,</span><span class="s3">\n    </span><span class="s1">}: {</span><span class="s3">\n      </span><span class="s1">config: NextConfigComplete</span><span class="s3">\n      </span><span class="s1">isSrcDir: boolean</span><span class="s3">\n      </span><span class="s1">pagesDir?: string</span><span class="s3">\n      </span><span class="s1">distDir: string</span><span class="s3">\n      </span><span class="s1">buildId: string</span><span class="s3">\n      </span><span class="s1">encryptionKey: string</span><span class="s3">\n      </span><span class="s1">previewProps: __ApiPreviewProps</span><span class="s3">\n      </span><span class="s1">rewrites: CustomRoutes['rewrites']</span><span class="s3">\n      </span><span class="s1">appDir?: string</span><span class="s3">\n      </span><span class="s1">telemetry: Telemetry</span><span class="s3">\n      </span><span class="s1">resetFetch: () =&gt; void</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">this.hasAmpEntrypoints = false</span><span class="s3">\n    </span><span class="s1">this.hasAppRouterEntrypoints = false</span><span class="s3">\n    </span><span class="s1">this.hasPagesRouterEntrypoints = false</span><span class="s3">\n    </span><span class="s1">this.buildId = buildId</span><span class="s3">\n    </span><span class="s1">this.encryptionKey = encryptionKey</span><span class="s3">\n    </span><span class="s1">this.dir = dir</span><span class="s3">\n    </span><span class="s1">this.isSrcDir = isSrcDir</span><span class="s3">\n    </span><span class="s1">this.middlewares = []</span><span class="s3">\n    </span><span class="s1">this.pagesDir = pagesDir</span><span class="s3">\n    </span><span class="s1">this.appDir = appDir</span><span class="s3">\n    </span><span class="s1">this.distDir = distDir</span><span class="s3">\n    </span><span class="s1">this.clientStats = null</span><span class="s3">\n    </span><span class="s1">this.serverStats = null</span><span class="s3">\n    </span><span class="s1">this.edgeServerStats = null</span><span class="s3">\n    </span><span class="s1">this.serverPrevDocumentHash = null</span><span class="s3">\n    </span><span class="s1">this.telemetry = telemetry</span><span class="s3">\n    </span><span class="s1">this.resetFetch = resetFetch</span><span class="s3">\n\n    </span><span class="s1">this.config = config</span><span class="s3">\n    </span><span class="s1">this.previewProps = previewProps</span><span class="s3">\n    </span><span class="s1">this.rewrites = rewrites</span><span class="s3">\n    </span><span class="s1">this.hotReloaderSpan = trace('hot-reloader', undefined, {</span><span class="s3">\n      </span><span class="s1">version: process.env.__NEXT_VERSION as string,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">// Ensure the hotReloaderSpan is flushed immediately as it's the parentSpan for all processing</span><span class="s3">\n    </span><span class="s1">// of the current `next dev` invocation.</span><span class="s3">\n    </span><span class="s1">this.hotReloaderSpan.stop()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async run(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n    </span><span class="s1">res: ServerResponse,</span><span class="s3">\n    </span><span class="s1">parsedUrl: UrlObject</span><span class="s3">\n  </span><span class="s1">): Promise&lt;{ finished?: true }&gt; {</span><span class="s3">\n    </span><span class="s1">// Usually CORS support is not needed for the hot-reloader (this is dev only feature)</span><span class="s3">\n    </span><span class="s1">// With when the app runs for multi-zones support behind a proxy,</span><span class="s3">\n    </span><span class="s1">// the current page is trying to access this URL via assetPrefix.</span><span class="s3">\n    </span><span class="s1">// That's when the CORS support is needed.</span><span class="s3">\n    </span><span class="s1">const { preflight } = addCorsSupport(req, res)</span><span class="s3">\n    </span><span class="s1">if (preflight) {</span><span class="s3">\n      </span><span class="s1">return {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// When a request comes in that is a page bundle, e.g. /_next/static/&lt;buildid&gt;/pages/index.js</span><span class="s3">\n    </span><span class="s1">// we have to compile the page using on-demand-entries, this middleware will handle doing that</span><span class="s3">\n    </span><span class="s1">// by adding the page to on-demand-entries, waiting till it's done</span><span class="s3">\n    </span><span class="s1">// and then the bundle will be served like usual by the actual route in server/index.js</span><span class="s3">\n    </span><span class="s1">const handlePageBundleRequest = async (</span><span class="s3">\n      </span><span class="s1">pageBundleRes: ServerResponse,</span><span class="s3">\n      </span><span class="s1">parsedPageBundleUrl: UrlObject</span><span class="s3">\n    </span><span class="s1">): Promise&lt;{ finished?: true }&gt; =&gt; {</span><span class="s3">\n      </span><span class="s1">const { pathname } = parsedPageBundleUrl</span><span class="s3">\n      </span><span class="s1">if (!pathname) return {}</span><span class="s3">\n\n      </span><span class="s1">const params = matchNextPageBundleRequest(pathname)</span><span class="s3">\n      </span><span class="s1">if (!params) return {}</span><span class="s3">\n\n      </span><span class="s1">let decodedPagePath: string</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">decodedPagePath = `/${params.path</span><span class="s3">\n          </span><span class="s1">.map((param: string) =&gt; decodeURIComponent(param))</span><span class="s3">\n          </span><span class="s1">.join('/')}`</span><span class="s3">\n      </span><span class="s1">} catch (_) {</span><span class="s3">\n        </span><span class="s1">throw new DecodeError('failed to decode param')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">const page = denormalizePagePath(decodedPagePath)</span><span class="s3">\n\n      </span><span class="s1">if (page === '/_error' || BLOCKED_PAGES.indexOf(page) === -1) {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">await this.ensurePage({ page, clientOnly: true, url: req.url })</span><span class="s3">\n        </span><span class="s1">} catch (error) {</span><span class="s3">\n          </span><span class="s1">return await renderScriptError(pageBundleRes, getProperError(error))</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const errors = await this.getCompilationErrors(page)</span><span class="s3">\n        </span><span class="s1">if (errors.length &gt; 0) {</span><span class="s3">\n          </span><span class="s1">return await renderScriptError(pageBundleRes, errors[0], {</span><span class="s3">\n            </span><span class="s1">verbose: false,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { finished } = await handlePageBundleRequest(res, parsedUrl)</span><span class="s3">\n\n    </span><span class="s1">for (const middleware of this.middlewares) {</span><span class="s3">\n      </span><span class="s1">let calledNext = false</span><span class="s3">\n\n      </span><span class="s1">await middleware(req, res, () =&gt; {</span><span class="s3">\n        </span><span class="s1">calledNext = true</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">if (!calledNext) {</span><span class="s3">\n        </span><span class="s1">return { finished: true }</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return { finished }</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public setHmrServerError(error: Error | null): void {</span><span class="s3">\n    </span><span class="s1">this.hmrServerError = error</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public clearHmrServerError(): void {</span><span class="s3">\n    </span><span class="s1">if (this.hmrServerError) {</span><span class="s3">\n      </span><span class="s1">this.setHmrServerError(null)</span><span class="s3">\n      </span><span class="s1">this.send({</span><span class="s3">\n        </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE,</span><span class="s3">\n        </span><span class="s1">data: 'clear hmr server error',</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected async refreshServerComponents(hash: string): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">this.send({</span><span class="s3">\n      </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES,</span><span class="s3">\n      </span><span class="s1">hash,</span><span class="s3">\n      </span><span class="s1">// TODO: granular reloading of changes</span><span class="s3">\n      </span><span class="s1">// entrypoints: serverComponentChanges,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public onHMR(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage,</span><span class="s3">\n    </span><span class="s1">_socket: Duplex,</span><span class="s3">\n    </span><span class="s1">head: Buffer,</span><span class="s3">\n    </span><span class="s1">callback: (client: ws.WebSocket) =&gt; void</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">wsServer.handleUpgrade(req, req.socket, head, (client) =&gt; {</span><span class="s3">\n      </span><span class="s1">this.webpackHotMiddleware?.onHMR(client)</span><span class="s3">\n      </span><span class="s1">this.onDemandEntries?.onHMR(client, () =&gt; this.hmrServerError)</span><span class="s3">\n      </span><span class="s1">callback(client)</span><span class="s3">\n\n      </span><span class="s1">client.addEventListener('message', async ({ data }) =&gt; {</span><span class="s3">\n        </span><span class="s1">data = typeof data !== 'string' ? data.toString() : data</span><span class="s3">\n\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">const payload = JSON.parse(data)</span><span class="s3">\n\n          </span><span class="s1">let traceChild:</span><span class="s3">\n            </span><span class="s1">| {</span><span class="s3">\n                </span><span class="s1">name: string</span><span class="s3">\n                </span><span class="s1">startTime?: bigint</span><span class="s3">\n                </span><span class="s1">endTime?: bigint</span><span class="s3">\n                </span><span class="s1">attrs?: Record&lt;string, number | string | undefined | string[]&gt;</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">| undefined</span><span class="s3">\n\n          </span><span class="s1">switch (payload.event) {</span><span class="s3">\n            </span><span class="s1">case 'span-end': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.spanName,</span><span class="s3">\n                </span><span class="s1">startTime:</span><span class="s3">\n                  </span><span class="s1">BigInt(Math.floor(payload.startTime)) *</span><span class="s3">\n                  </span><span class="s1">MILLISECONDS_IN_NANOSECOND,</span><span class="s3">\n                </span><span class="s1">attrs: payload.attributes,</span><span class="s3">\n                </span><span class="s1">endTime:</span><span class="s3">\n                  </span><span class="s1">BigInt(Math.floor(payload.endTime)) *</span><span class="s3">\n                  </span><span class="s1">MILLISECONDS_IN_NANOSECOND,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-hmr-latency': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.event,</span><span class="s3">\n                </span><span class="s1">startTime:</span><span class="s3">\n                  </span><span class="s1">BigInt(payload.startTime) * MILLISECONDS_IN_NANOSECOND,</span><span class="s3">\n                </span><span class="s1">endTime: BigInt(payload.endTime) * MILLISECONDS_IN_NANOSECOND,</span><span class="s3">\n                </span><span class="s1">attrs: {</span><span class="s3">\n                  </span><span class="s1">updatedModules: payload.updatedModules.map((m: string) =&gt;</span><span class="s3">\n                    </span><span class="s1">m</span><span class="s3">\n                      </span><span class="s1">.replace(`(${WEBPACK_LAYERS.appPagesBrowser})/`, '')</span><span class="s3">\n                      </span><span class="s1">.replace(/^</span><span class="s3">\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">//, '[project]/')</span><span class="s3">\n                  </span><span class="s1">),</span><span class="s3">\n                  </span><span class="s1">page: payload.page,</span><span class="s3">\n                  </span><span class="s1">isPageHidden: payload.isPageHidden,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-reload-page':</span><span class="s3">\n            </span><span class="s1">case 'client-success': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.event,</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-error': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.event,</span><span class="s3">\n                </span><span class="s1">attrs: { errorCount: payload.errorCount },</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-warning': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.event,</span><span class="s3">\n                </span><span class="s1">attrs: { warningCount: payload.warningCount },</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-removed-page':</span><span class="s3">\n            </span><span class="s1">case 'client-added-page': {</span><span class="s3">\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: payload.event,</span><span class="s3">\n                </span><span class="s1">attrs: { page: payload.page || '' },</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-full-reload': {</span><span class="s3">\n              </span><span class="s1">const { event, stackTrace, hadRuntimeError } = payload</span><span class="s3">\n\n              </span><span class="s1">traceChild = {</span><span class="s3">\n                </span><span class="s1">name: event,</span><span class="s3">\n                </span><span class="s1">attrs: { stackTrace: stackTrace ?? '' },</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">if (hadRuntimeError) {</span><span class="s3">\n                </span><span class="s1">Log.warn(FAST_REFRESH_RUNTIME_RELOAD)</span><span class="s3">\n                </span><span class="s1">break</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">let fileMessage = ''</span><span class="s3">\n              </span><span class="s1">if (stackTrace) {</span><span class="s3">\n                </span><span class="s1">const file = /Aborted because (.+) is not accepted/.exec(</span><span class="s3">\n                  </span><span class="s1">stackTrace</span><span class="s3">\n                </span><span class="s1">)?.[1]</span><span class="s3">\n                </span><span class="s1">if (file) {</span><span class="s3">\n                  </span><span class="s1">// `file` is filepath in `pages/` but it can be a webpack url.</span><span class="s3">\n                  </span><span class="s1">// If it's a webpack loader URL, it will include the app-pages layer</span><span class="s3">\n                  </span><span class="s1">if (file.startsWith(`(${WEBPACK_LAYERS.appPagesBrowser})/`)) {</span><span class="s3">\n                    </span><span class="s1">const fileUrl = new URL(file, 'file://')</span><span class="s3">\n                    </span><span class="s1">const cwd = process.cwd()</span><span class="s3">\n                    </span><span class="s1">const modules = fileUrl.searchParams</span><span class="s3">\n                      </span><span class="s1">.getAll('modules')</span><span class="s3">\n                      </span><span class="s1">.map((filepath) =&gt; filepath.slice(cwd.length + 1))</span><span class="s3">\n                      </span><span class="s1">.filter(</span><span class="s3">\n                        </span><span class="s1">(filepath) =&gt; !filepath.startsWith('node_modules')</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n\n                    </span><span class="s1">if (modules.length &gt; 0) {</span><span class="s3">\n                      </span><span class="s1">fileMessage = ` when ${modules.join(', ')} changed`</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">} else if (</span><span class="s3">\n                    </span><span class="s1">// Handle known webpack layers</span><span class="s3">\n                    </span><span class="s1">file.startsWith(`(${WEBPACK_LAYERS.pagesDirBrowser})/`)</span><span class="s3">\n                  </span><span class="s1">) {</span><span class="s3">\n                    </span><span class="s1">const cleanedFilePath = file.slice(</span><span class="s3">\n                      </span><span class="s1">`(${WEBPACK_LAYERS.pagesDirBrowser})/`.length</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n\n                    </span><span class="s1">fileMessage = ` when ${cleanedFilePath} changed`</span><span class="s3">\n                  </span><span class="s1">} else {</span><span class="s3">\n                    </span><span class="s1">fileMessage = ` when ${file} changed`</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n\n              </span><span class="s1">Log.warn(</span><span class="s3">\n                </span><span class="s1">`Fast Refresh had to perform a full reload${fileMessage}. Read more: https://nextjs.org/docs/messages/fast-refresh-reload`</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'browser-logs': {</span><span class="s3">\n              </span><span class="s1">if (this.config.experimental.browserDebugInfoInTerminal) {</span><span class="s3">\n                </span><span class="s1">await receiveBrowserLogsWebpack({</span><span class="s3">\n                  </span><span class="s1">entries: payload.entries,</span><span class="s3">\n                  </span><span class="s1">router: payload.router,</span><span class="s3">\n                  </span><span class="s1">sourceType: payload.sourceType,</span><span class="s3">\n                  </span><span class="s1">clientStats: () =&gt; this.clientStats,</span><span class="s3">\n                  </span><span class="s1">serverStats: () =&gt; this.serverStats,</span><span class="s3">\n                  </span><span class="s1">edgeServerStats: () =&gt; this.edgeServerStats,</span><span class="s3">\n                  </span><span class="s1">rootDirectory: this.dir,</span><span class="s3">\n                  </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n                  </span><span class="s1">config: this.config.experimental.browserDebugInfoInTerminal,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">default: {</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (traceChild) {</span><span class="s3">\n            </span><span class="s1">this.hotReloaderSpan.manualTraceChild(</span><span class="s3">\n              </span><span class="s1">traceChild.name,</span><span class="s3">\n              </span><span class="s1">traceChild.startTime,</span><span class="s3">\n              </span><span class="s1">traceChild.endTime,</span><span class="s3">\n              </span><span class="s1">{ ...traceChild.attrs, clientId: payload.id }</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} catch (_) {</span><span class="s3">\n          </span><span class="s1">// invalid WebSocket message</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async clean(span: Span): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">return span</span><span class="s3">\n      </span><span class="s1">.traceChild('clean')</span><span class="s3">\n      </span><span class="s1">.traceAsyncFn(() =&gt;</span><span class="s3">\n        </span><span class="s1">recursiveDelete(join(this.dir, this.config.distDir), /^cache/)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async getWebpackConfig(span: Span) {</span><span class="s3">\n    </span><span class="s1">const webpackConfigSpan = span.traceChild('get-webpack-config')</span><span class="s3">\n\n    </span><span class="s1">const pageExtensions = this.config.pageExtensions</span><span class="s3">\n\n    </span><span class="s1">return webpackConfigSpan.traceAsyncFn(async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const pagePaths = !this.pagesDir</span><span class="s3">\n        </span><span class="s1">? ([] as (string | null)[])</span><span class="s3">\n        </span><span class="s1">: await webpackConfigSpan</span><span class="s3">\n            </span><span class="s1">.traceChild('get-page-paths')</span><span class="s3">\n            </span><span class="s1">.traceAsyncFn(() =&gt;</span><span class="s3">\n              </span><span class="s1">Promise.all([</span><span class="s3">\n                </span><span class="s1">findPageFile(this.pagesDir!, '/_app', pageExtensions, false),</span><span class="s3">\n                </span><span class="s1">findPageFile(</span><span class="s3">\n                  </span><span class="s1">this.pagesDir!,</span><span class="s3">\n                  </span><span class="s1">'/_document',</span><span class="s3">\n                  </span><span class="s1">pageExtensions,</span><span class="s3">\n                  </span><span class="s1">false</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">])</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">this.pagesMapping = await webpackConfigSpan</span><span class="s3">\n        </span><span class="s1">.traceChild('create-pages-mapping')</span><span class="s3">\n        </span><span class="s1">.traceAsyncFn(() =&gt;</span><span class="s3">\n          </span><span class="s1">createPagesMapping({</span><span class="s3">\n            </span><span class="s1">isDev: true,</span><span class="s3">\n            </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n            </span><span class="s1">pagesType: PAGE_TYPES.PAGES,</span><span class="s3">\n            </span><span class="s1">pagePaths: pagePaths.filter(</span><span class="s3">\n              </span><span class="s1">(i: string | null): i is string =&gt; typeof i === 'string'</span><span class="s3">\n            </span><span class="s1">),</span><span class="s3">\n            </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n            </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const entrypoints = await webpackConfigSpan</span><span class="s3">\n        </span><span class="s1">.traceChild('create-entrypoints')</span><span class="s3">\n        </span><span class="s1">.traceAsyncFn(() =&gt;</span><span class="s3">\n          </span><span class="s1">createEntrypoints({</span><span class="s3">\n            </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n            </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n            </span><span class="s1">config: this.config,</span><span class="s3">\n            </span><span class="s1">envFiles: [],</span><span class="s3">\n            </span><span class="s1">isDev: true,</span><span class="s3">\n            </span><span class="s1">pages: this.pagesMapping,</span><span class="s3">\n            </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n            </span><span class="s1">previewMode: this.previewProps,</span><span class="s3">\n            </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n            </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const commonWebpackOptions = {</span><span class="s3">\n        </span><span class="s1">dev: true,</span><span class="s3">\n        </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n        </span><span class="s1">encryptionKey: this.encryptionKey,</span><span class="s3">\n        </span><span class="s1">config: this.config,</span><span class="s3">\n        </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n        </span><span class="s1">rewrites: this.rewrites,</span><span class="s3">\n        </span><span class="s1">originalRewrites: this.config._originalRewrites,</span><span class="s3">\n        </span><span class="s1">originalRedirects: this.config._originalRedirects,</span><span class="s3">\n        </span><span class="s1">runWebpackSpan: this.hotReloaderSpan,</span><span class="s3">\n        </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n        </span><span class="s1">previewProps: this.previewProps,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return webpackConfigSpan</span><span class="s3">\n        </span><span class="s1">.traceChild('generate-webpack-config')</span><span class="s3">\n        </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n          </span><span class="s1">const info = await loadProjectInfo({</span><span class="s3">\n            </span><span class="s1">dir: this.dir,</span><span class="s3">\n            </span><span class="s1">config: commonWebpackOptions.config,</span><span class="s3">\n            </span><span class="s1">dev: true,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">return Promise.all([</span><span class="s3">\n            </span><span class="s1">// order is important here</span><span class="s3">\n            </span><span class="s1">getBaseWebpackConfig(this.dir, {</span><span class="s3">\n              </span><span class="s1">...commonWebpackOptions,</span><span class="s3">\n              </span><span class="s1">compilerType: COMPILER_NAMES.client,</span><span class="s3">\n              </span><span class="s1">entrypoints: entrypoints.client,</span><span class="s3">\n              </span><span class="s1">...info,</span><span class="s3">\n            </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">getBaseWebpackConfig(this.dir, {</span><span class="s3">\n              </span><span class="s1">...commonWebpackOptions,</span><span class="s3">\n              </span><span class="s1">compilerType: COMPILER_NAMES.server,</span><span class="s3">\n              </span><span class="s1">entrypoints: entrypoints.server,</span><span class="s3">\n              </span><span class="s1">...info,</span><span class="s3">\n            </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">getBaseWebpackConfig(this.dir, {</span><span class="s3">\n              </span><span class="s1">...commonWebpackOptions,</span><span class="s3">\n              </span><span class="s1">compilerType: COMPILER_NAMES.edgeServer,</span><span class="s3">\n              </span><span class="s1">entrypoints: entrypoints.edgeServer,</span><span class="s3">\n              </span><span class="s1">...info,</span><span class="s3">\n            </span><span class="s1">}),</span><span class="s3">\n          </span><span class="s1">])</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async buildFallbackError(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">if (this.fallbackWatcher) return</span><span class="s3">\n\n    </span><span class="s1">const info = await loadProjectInfo({</span><span class="s3">\n      </span><span class="s1">dir: this.dir,</span><span class="s3">\n      </span><span class="s1">config: this.config,</span><span class="s3">\n      </span><span class="s1">dev: true,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">const fallbackConfig = await getBaseWebpackConfig(this.dir, {</span><span class="s3">\n      </span><span class="s1">previewProps: this.previewProps,</span><span class="s3">\n      </span><span class="s1">runWebpackSpan: this.hotReloaderSpan,</span><span class="s3">\n      </span><span class="s1">dev: true,</span><span class="s3">\n      </span><span class="s1">compilerType: COMPILER_NAMES.client,</span><span class="s3">\n      </span><span class="s1">config: this.config,</span><span class="s3">\n      </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n      </span><span class="s1">encryptionKey: this.encryptionKey,</span><span class="s3">\n      </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n      </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n      </span><span class="s1">rewrites: {</span><span class="s3">\n        </span><span class="s1">beforeFiles: [],</span><span class="s3">\n        </span><span class="s1">afterFiles: [],</span><span class="s3">\n        </span><span class="s1">fallback: [],</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">originalRewrites: {</span><span class="s3">\n        </span><span class="s1">beforeFiles: [],</span><span class="s3">\n        </span><span class="s1">afterFiles: [],</span><span class="s3">\n        </span><span class="s1">fallback: [],</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">originalRedirects: [],</span><span class="s3">\n      </span><span class="s1">isDevFallback: true,</span><span class="s3">\n      </span><span class="s1">entrypoints: (</span><span class="s3">\n        </span><span class="s1">await createEntrypoints({</span><span class="s3">\n          </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n          </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n          </span><span class="s1">config: this.config,</span><span class="s3">\n          </span><span class="s1">envFiles: [],</span><span class="s3">\n          </span><span class="s1">isDev: true,</span><span class="s3">\n          </span><span class="s1">pages: {</span><span class="s3">\n            </span><span class="s1">'/_app': 'next/dist/pages/_app',</span><span class="s3">\n            </span><span class="s1">'/_error': 'next/dist/pages/_error',</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n          </span><span class="s1">previewMode: this.previewProps,</span><span class="s3">\n          </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n          </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">).client,</span><span class="s3">\n      </span><span class="s1">...info,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const fallbackCompiler = getWebpackBundler()(fallbackConfig)</span><span class="s3">\n\n    </span><span class="s1">this.fallbackWatcher = await new Promise((resolve) =&gt; {</span><span class="s3">\n      </span><span class="s1">let bootedFallbackCompiler = false</span><span class="s3">\n      </span><span class="s1">fallbackCompiler.watch(</span><span class="s3">\n        </span><span class="s1">// @ts-ignore webpack supports an array of watchOptions when using a multiCompiler</span><span class="s3">\n        </span><span class="s1">fallbackConfig.watchOptions,</span><span class="s3">\n        </span><span class="s1">// Errors are handled separately</span><span class="s3">\n        </span><span class="s1">(_err: any) =&gt; {</span><span class="s3">\n          </span><span class="s1">if (!bootedFallbackCompiler) {</span><span class="s3">\n            </span><span class="s1">bootedFallbackCompiler = true</span><span class="s3">\n            </span><span class="s1">resolve(true)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private async tracedGetVersionInfo(span: Span) {</span><span class="s3">\n    </span><span class="s1">const versionInfoSpan = span.traceChild('get-version-info')</span><span class="s3">\n    </span><span class="s1">return versionInfoSpan.traceAsyncFn&lt;VersionInfo&gt;(async () =&gt;</span><span class="s3">\n      </span><span class="s1">getVersionInfo()</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async start(): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">const startSpan = this.hotReloaderSpan.traceChild('start')</span><span class="s3">\n    </span><span class="s1">startSpan.stop() // Stop immediately to create an artificial parent span</span><span class="s3">\n\n    </span><span class="s1">this.versionInfo = await this.tracedGetVersionInfo(startSpan)</span><span class="s3">\n\n    </span><span class="s1">const nodeDebugType = getNodeDebugType()</span><span class="s3">\n    </span><span class="s1">if (nodeDebugType &amp;&amp; !this.devtoolsFrontendUrl) {</span><span class="s3">\n      </span><span class="s1">const debugPort = process.debugPort</span><span class="s3">\n      </span><span class="s1">let debugInfo</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">// It requires to use 127.0.0.1 instead of localhost for server-side fetching.</span><span class="s3">\n        </span><span class="s1">const debugInfoList = await fetch(</span><span class="s3">\n          </span><span class="s1">`http://127.0.0.1:${debugPort}/json/list`</span><span class="s3">\n        </span><span class="s1">).then((res) =&gt; res.json())</span><span class="s3">\n        </span><span class="s1">// There will be only one item for current process, so always get the first item.</span><span class="s3">\n        </span><span class="s1">debugInfo = debugInfoList[0]</span><span class="s3">\n      </span><span class="s1">} catch {}</span><span class="s3">\n      </span><span class="s1">if (debugInfo) {</span><span class="s3">\n        </span><span class="s1">this.devtoolsFrontendUrl = debugInfo.devtoolsFrontendUrl</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">await this.clean(startSpan)</span><span class="s3">\n    </span><span class="s1">// Ensure distDir exists before writing package.json</span><span class="s3">\n    </span><span class="s1">await fs.mkdir(this.distDir, { recursive: true })</span><span class="s3">\n\n    </span><span class="s1">const initialDevToolsConfig = await getDevToolsConfig(this.distDir)</span><span class="s3">\n\n    </span><span class="s1">const distPackageJsonPath = join(this.distDir, 'package.json')</span><span class="s3">\n    </span><span class="s1">// Ensure commonjs handling is used for files in the distDir (generally .next)</span><span class="s3">\n    </span><span class="s1">// Files outside of the distDir can be </span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">module</span><span class="s3">\&quot;\n    </span><span class="s1">await fs.writeFile(distPackageJsonPath, '{</span><span class="s3">\&quot;</span><span class="s1">type</span><span class="s3">\&quot;</span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">commonjs</span><span class="s3">\&quot;</span><span class="s1">}')</span><span class="s3">\n\n    </span><span class="s1">this.activeWebpackConfigs = await this.getWebpackConfig(startSpan)</span><span class="s3">\n\n    </span><span class="s1">for (const config of this.activeWebpackConfigs) {</span><span class="s3">\n      </span><span class="s1">const defaultEntry = config.entry</span><span class="s3">\n      </span><span class="s1">config.entry = async (...args) =&gt; {</span><span class="s3">\n        </span><span class="s1">const outputPath = this.multiCompiler?.outputPath || ''</span><span class="s3">\n        </span><span class="s1">const entries = getEntries(outputPath)</span><span class="s3">\n        </span><span class="s1">// @ts-ignore entry is always a function</span><span class="s3">\n        </span><span class="s1">const entrypoints = await defaultEntry(...args)</span><span class="s3">\n        </span><span class="s1">const isClientCompilation = config.name === COMPILER_NAMES.client</span><span class="s3">\n        </span><span class="s1">const isNodeServerCompilation = config.name === COMPILER_NAMES.server</span><span class="s3">\n        </span><span class="s1">const isEdgeServerCompilation =</span><span class="s3">\n          </span><span class="s1">config.name === COMPILER_NAMES.edgeServer</span><span class="s3">\n\n        </span><span class="s1">await Promise.all(</span><span class="s3">\n          </span><span class="s1">Object.keys(entries).map(async (entryKey) =&gt; {</span><span class="s3">\n            </span><span class="s1">const entryData = entries[entryKey]</span><span class="s3">\n            </span><span class="s1">const { bundlePath, dispose } = entryData</span><span class="s3">\n\n            </span><span class="s1">const result =</span><span class="s3">\n              </span><span class="s1">/^(client|server|edge-server)@(app|pages|root)@(.*)/g.exec(</span><span class="s3">\n                </span><span class="s1">entryKey</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">const [, key /* pageType */, , page] = result! // this match should always happen</span><span class="s3">\n\n            </span><span class="s1">if (key === COMPILER_NAMES.client &amp;&amp; !isClientCompilation) return</span><span class="s3">\n            </span><span class="s1">if (key === COMPILER_NAMES.server &amp;&amp; !isNodeServerCompilation)</span><span class="s3">\n              </span><span class="s1">return</span><span class="s3">\n            </span><span class="s1">if (key === COMPILER_NAMES.edgeServer &amp;&amp; !isEdgeServerCompilation)</span><span class="s3">\n              </span><span class="s1">return</span><span class="s3">\n\n            </span><span class="s1">const isEntry = entryData.type === EntryTypes.ENTRY</span><span class="s3">\n            </span><span class="s1">const isChildEntry = entryData.type === EntryTypes.CHILD_ENTRY</span><span class="s3">\n\n            </span><span class="s1">// Check if the page was removed or disposed and remove it</span><span class="s3">\n            </span><span class="s1">if (isEntry) {</span><span class="s3">\n              </span><span class="s1">const pageExists =</span><span class="s3">\n                </span><span class="s1">!dispose &amp;&amp; existsSync(entryData.absolutePagePath)</span><span class="s3">\n              </span><span class="s1">if (!pageExists) {</span><span class="s3">\n                </span><span class="s1">delete entries[entryKey]</span><span class="s3">\n                </span><span class="s1">return</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// For child entries, if it has an entry file and it's gone, remove it</span><span class="s3">\n            </span><span class="s1">if (isChildEntry) {</span><span class="s3">\n              </span><span class="s1">if (entryData.absoluteEntryFilePath) {</span><span class="s3">\n                </span><span class="s1">const pageExists =</span><span class="s3">\n                  </span><span class="s1">!dispose &amp;&amp; existsSync(entryData.absoluteEntryFilePath)</span><span class="s3">\n                </span><span class="s1">if (!pageExists) {</span><span class="s3">\n                  </span><span class="s1">delete entries[entryKey]</span><span class="s3">\n                  </span><span class="s1">return</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// Ensure _error is considered a `pages` page.</span><span class="s3">\n            </span><span class="s1">if (page === '/_error') {</span><span class="s3">\n              </span><span class="s1">this.hasPagesRouterEntrypoints = true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const hasAppDir = !!this.appDir</span><span class="s3">\n            </span><span class="s1">const isAppPath = hasAppDir &amp;&amp; bundlePath.startsWith('app/')</span><span class="s3">\n            </span><span class="s1">const staticInfo = isEntry</span><span class="s3">\n              </span><span class="s1">? await getStaticInfoIncludingLayouts({</span><span class="s3">\n                  </span><span class="s1">isInsideAppDir: isAppPath,</span><span class="s3">\n                  </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n                  </span><span class="s1">pageFilePath: entryData.absolutePagePath,</span><span class="s3">\n                  </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n                  </span><span class="s1">config: this.config,</span><span class="s3">\n                  </span><span class="s1">isDev: true,</span><span class="s3">\n                  </span><span class="s1">page,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">: undefined</span><span class="s3">\n\n            </span><span class="s1">if (staticInfo?.type === PAGE_TYPES.PAGES) {</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">staticInfo.config?.config?.amp === true ||</span><span class="s3">\n                </span><span class="s1">staticInfo.config?.config?.amp === 'hybrid'</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">this.hasAmpEntrypoints = true</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const isServerComponent =</span><span class="s3">\n              </span><span class="s1">isAppPath &amp;&amp; staticInfo?.rsc !== RSC_MODULE_TYPES.client</span><span class="s3">\n\n            </span><span class="s1">const pageType: PAGE_TYPES = entryData.bundlePath.startsWith(</span><span class="s3">\n              </span><span class="s1">'pages/'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">? PAGE_TYPES.PAGES</span><span class="s3">\n              </span><span class="s1">: entryData.bundlePath.startsWith('app/')</span><span class="s3">\n                </span><span class="s1">? PAGE_TYPES.APP</span><span class="s3">\n                </span><span class="s1">: PAGE_TYPES.ROOT</span><span class="s3">\n\n            </span><span class="s1">if (pageType === 'pages') {</span><span class="s3">\n              </span><span class="s1">this.hasPagesRouterEntrypoints = true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">if (pageType === 'app') {</span><span class="s3">\n              </span><span class="s1">this.hasAppRouterEntrypoints = true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const isInstrumentation =</span><span class="s3">\n              </span><span class="s1">isInstrumentationHookFile(page) &amp;&amp; pageType === PAGE_TYPES.ROOT</span><span class="s3">\n\n            </span><span class="s1">let pageRuntime = staticInfo?.runtime</span><span class="s3">\n\n            </span><span class="s1">runDependingOnPageType({</span><span class="s3">\n              </span><span class="s1">page,</span><span class="s3">\n              </span><span class="s1">pageRuntime,</span><span class="s3">\n              </span><span class="s1">pageType,</span><span class="s3">\n              </span><span class="s1">onEdgeServer: () =&gt; {</span><span class="s3">\n                </span><span class="s1">// TODO-APP: verify if child entry should support.</span><span class="s3">\n                </span><span class="s1">if (!isEdgeServerCompilation || !isEntry) return</span><span class="s3">\n                </span><span class="s1">entries[entryKey].status = BUILDING</span><span class="s3">\n\n                </span><span class="s1">if (isInstrumentation) {</span><span class="s3">\n                  </span><span class="s1">const normalizedBundlePath = bundlePath.replace('src/', '')</span><span class="s3">\n                  </span><span class="s1">entrypoints[normalizedBundlePath] = finalizeEntrypoint({</span><span class="s3">\n                    </span><span class="s1">compilerType: COMPILER_NAMES.edgeServer,</span><span class="s3">\n                    </span><span class="s1">name: normalizedBundlePath,</span><span class="s3">\n                    </span><span class="s1">value: getInstrumentationEntry({</span><span class="s3">\n                      </span><span class="s1">absolutePagePath: entryData.absolutePagePath,</span><span class="s3">\n                      </span><span class="s1">isEdgeServer: true,</span><span class="s3">\n                      </span><span class="s1">isDev: true,</span><span class="s3">\n                    </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">isServerComponent: true,</span><span class="s3">\n                    </span><span class="s1">hasAppDir,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                  </span><span class="s1">return</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">const appDirLoader = isAppPath</span><span class="s3">\n                  </span><span class="s1">? getAppEntry({</span><span class="s3">\n                      </span><span class="s1">name: bundlePath,</span><span class="s3">\n                      </span><span class="s1">page,</span><span class="s3">\n                      </span><span class="s1">appPaths: entryData.appPaths,</span><span class="s3">\n                      </span><span class="s1">pagePath: posix.join(</span><span class="s3">\n                        </span><span class="s1">APP_DIR_ALIAS,</span><span class="s3">\n                        </span><span class="s1">relative(</span><span class="s3">\n                          </span><span class="s1">this.appDir!,</span><span class="s3">\n                          </span><span class="s1">entryData.absolutePagePath</span><span class="s3">\n                        </span><span class="s1">).replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n                      </span><span class="s1">),</span><span class="s3">\n                      </span><span class="s1">appDir: this.appDir!,</span><span class="s3">\n                      </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n                      </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n                      </span><span class="s1">isDev: true,</span><span class="s3">\n                      </span><span class="s1">tsconfigPath: this.config.typescript.tsconfigPath,</span><span class="s3">\n                      </span><span class="s1">basePath: this.config.basePath,</span><span class="s3">\n                      </span><span class="s1">assetPrefix: this.config.assetPrefix,</span><span class="s3">\n                      </span><span class="s1">nextConfigOutput: this.config.output,</span><span class="s3">\n                      </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                      </span><span class="s1">middlewareConfig: Buffer.from(</span><span class="s3">\n                        </span><span class="s1">JSON.stringify(staticInfo?.middleware || {})</span><span class="s3">\n                      </span><span class="s1">).toString('base64'),</span><span class="s3">\n                      </span><span class="s1">isGlobalNotFoundEnabled: this.config.experimental</span><span class="s3">\n                        </span><span class="s1">.globalNotFound</span><span class="s3">\n                        </span><span class="s1">? true</span><span class="s3">\n                        </span><span class="s1">: undefined,</span><span class="s3">\n                    </span><span class="s1">}).import</span><span class="s3">\n                  </span><span class="s1">: undefined</span><span class="s3">\n\n                </span><span class="s1">entrypoints[bundlePath] = finalizeEntrypoint({</span><span class="s3">\n                  </span><span class="s1">compilerType: COMPILER_NAMES.edgeServer,</span><span class="s3">\n                  </span><span class="s1">name: bundlePath,</span><span class="s3">\n                  </span><span class="s1">value: getEdgeServerEntry({</span><span class="s3">\n                    </span><span class="s1">absolutePagePath: entryData.absolutePagePath,</span><span class="s3">\n                    </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n                    </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n                    </span><span class="s1">bundlePath,</span><span class="s3">\n                    </span><span class="s1">config: this.config,</span><span class="s3">\n                    </span><span class="s1">isDev: true,</span><span class="s3">\n                    </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">pages: this.pagesMapping,</span><span class="s3">\n                    </span><span class="s1">isServerComponent,</span><span class="s3">\n                    </span><span class="s1">appDirLoader,</span><span class="s3">\n                    </span><span class="s1">pagesType: isAppPath ? PAGE_TYPES.APP : PAGE_TYPES.PAGES,</span><span class="s3">\n                    </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                  </span><span class="s1">}),</span><span class="s3">\n                  </span><span class="s1">hasAppDir,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">onClient: () =&gt; {</span><span class="s3">\n                </span><span class="s1">if (!isClientCompilation) return</span><span class="s3">\n                </span><span class="s1">if (isChildEntry) {</span><span class="s3">\n                  </span><span class="s1">entries[entryKey].status = BUILDING</span><span class="s3">\n                  </span><span class="s1">entrypoints[bundlePath] = finalizeEntrypoint({</span><span class="s3">\n                    </span><span class="s1">name: bundlePath,</span><span class="s3">\n                    </span><span class="s1">compilerType: COMPILER_NAMES.client,</span><span class="s3">\n                    </span><span class="s1">value: entryData.request,</span><span class="s3">\n                    </span><span class="s1">hasAppDir,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else {</span><span class="s3">\n                  </span><span class="s1">entries[entryKey].status = BUILDING</span><span class="s3">\n                  </span><span class="s1">entrypoints[bundlePath] = finalizeEntrypoint({</span><span class="s3">\n                    </span><span class="s1">name: bundlePath,</span><span class="s3">\n                    </span><span class="s1">compilerType: COMPILER_NAMES.client,</span><span class="s3">\n                    </span><span class="s1">value: getClientEntry({</span><span class="s3">\n                      </span><span class="s1">absolutePagePath: entryData.absolutePagePath,</span><span class="s3">\n                      </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">hasAppDir,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">onServer: () =&gt; {</span><span class="s3">\n                </span><span class="s1">// TODO-APP: verify if child entry should support.</span><span class="s3">\n                </span><span class="s1">if (!isNodeServerCompilation || !isEntry) return</span><span class="s3">\n                </span><span class="s1">entries[entryKey].status = BUILDING</span><span class="s3">\n                </span><span class="s1">let relativeRequest = relative(</span><span class="s3">\n                  </span><span class="s1">config.context!,</span><span class="s3">\n                  </span><span class="s1">entryData.absolutePagePath</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n                </span><span class="s1">if (</span><span class="s3">\n                  </span><span class="s1">!isAbsolute(relativeRequest) &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">!relativeRequest.startsWith('../')</span><span class="s3">\n                </span><span class="s1">) {</span><span class="s3">\n                  </span><span class="s1">relativeRequest = `./${relativeRequest}`</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n\n                </span><span class="s1">let value: { import: string; layer?: string } | string</span><span class="s3">\n                </span><span class="s1">if (isInstrumentation) {</span><span class="s3">\n                  </span><span class="s1">value = getInstrumentationEntry({</span><span class="s3">\n                    </span><span class="s1">absolutePagePath: entryData.absolutePagePath,</span><span class="s3">\n                    </span><span class="s1">isEdgeServer: false,</span><span class="s3">\n                    </span><span class="s1">isDev: true,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                  </span><span class="s1">entrypoints[bundlePath] = finalizeEntrypoint({</span><span class="s3">\n                    </span><span class="s1">compilerType: COMPILER_NAMES.server,</span><span class="s3">\n                    </span><span class="s1">name: bundlePath,</span><span class="s3">\n                    </span><span class="s1">isServerComponent: true,</span><span class="s3">\n                    </span><span class="s1">value,</span><span class="s3">\n                    </span><span class="s1">hasAppDir,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else if (isMiddlewareFile(page)) {</span><span class="s3">\n                  </span><span class="s1">value = getEdgeServerEntry({</span><span class="s3">\n                    </span><span class="s1">absolutePagePath: entryData.absolutePagePath,</span><span class="s3">\n                    </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n                    </span><span class="s1">buildId: this.buildId,</span><span class="s3">\n                    </span><span class="s1">bundlePath,</span><span class="s3">\n                    </span><span class="s1">config: this.config,</span><span class="s3">\n                    </span><span class="s1">isDev: true,</span><span class="s3">\n                    </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">pages: this.pagesMapping,</span><span class="s3">\n                    </span><span class="s1">isServerComponent,</span><span class="s3">\n                    </span><span class="s1">pagesType: PAGE_TYPES.PAGES,</span><span class="s3">\n                    </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else if (isAppPath) {</span><span class="s3">\n                  </span><span class="s1">// This path normalization is critical for webpack to resolve the next internals as entry.</span><span class="s3">\n                  </span><span class="s1">const pagePath = entryData.absolutePagePath.startsWith(</span><span class="s3">\n                    </span><span class="s1">dirname(require.resolve('next/package.json'))</span><span class="s3">\n                  </span><span class="s1">)</span><span class="s3">\n                    </span><span class="s1">? entryData.absolutePagePath</span><span class="s3">\n                    </span><span class="s1">: posix.join(</span><span class="s3">\n                        </span><span class="s1">APP_DIR_ALIAS,</span><span class="s3">\n                        </span><span class="s1">relative(</span><span class="s3">\n                          </span><span class="s1">this.appDir!,</span><span class="s3">\n                          </span><span class="s1">entryData.absolutePagePath</span><span class="s3">\n                        </span><span class="s1">).replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">value = getAppEntry({</span><span class="s3">\n                    </span><span class="s1">name: bundlePath,</span><span class="s3">\n                    </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">appPaths: entryData.appPaths,</span><span class="s3">\n                    </span><span class="s1">pagePath,</span><span class="s3">\n                    </span><span class="s1">appDir: this.appDir!,</span><span class="s3">\n                    </span><span class="s1">pageExtensions: this.config.pageExtensions,</span><span class="s3">\n                    </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n                    </span><span class="s1">isDev: true,</span><span class="s3">\n                    </span><span class="s1">tsconfigPath: this.config.typescript.tsconfigPath,</span><span class="s3">\n                    </span><span class="s1">basePath: this.config.basePath,</span><span class="s3">\n                    </span><span class="s1">assetPrefix: this.config.assetPrefix,</span><span class="s3">\n                    </span><span class="s1">nextConfigOutput: this.config.output,</span><span class="s3">\n                    </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                    </span><span class="s1">middlewareConfig: Buffer.from(</span><span class="s3">\n                      </span><span class="s1">JSON.stringify(staticInfo?.middleware || {})</span><span class="s3">\n                    </span><span class="s1">).toString('base64'),</span><span class="s3">\n                    </span><span class="s1">isGlobalNotFoundEnabled: this.config.experimental</span><span class="s3">\n                      </span><span class="s1">.globalNotFound</span><span class="s3">\n                      </span><span class="s1">? true</span><span class="s3">\n                      </span><span class="s1">: undefined,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else if (isAPIRoute(page)) {</span><span class="s3">\n                  </span><span class="s1">value = getRouteLoaderEntry({</span><span class="s3">\n                    </span><span class="s1">kind: RouteKind.PAGES_API,</span><span class="s3">\n                    </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">absolutePagePath: relativeRequest,</span><span class="s3">\n                    </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                    </span><span class="s1">middlewareConfig: staticInfo?.middleware || {},</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else if (</span><span class="s3">\n                  </span><span class="s1">!isMiddlewareFile(page) &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">!isInternalComponent(relativeRequest) &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">!isNonRoutePagesPage(page) &amp;&amp;</span><span class="s3">\n                  </span><span class="s1">!isInstrumentation</span><span class="s3">\n                </span><span class="s1">) {</span><span class="s3">\n                  </span><span class="s1">value = getRouteLoaderEntry({</span><span class="s3">\n                    </span><span class="s1">kind: RouteKind.PAGES,</span><span class="s3">\n                    </span><span class="s1">page,</span><span class="s3">\n                    </span><span class="s1">pages: this.pagesMapping,</span><span class="s3">\n                    </span><span class="s1">absolutePagePath: relativeRequest,</span><span class="s3">\n                    </span><span class="s1">preferredRegion: staticInfo?.preferredRegion,</span><span class="s3">\n                    </span><span class="s1">middlewareConfig: staticInfo?.middleware ?? {},</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">} else {</span><span class="s3">\n                  </span><span class="s1">value = relativeRequest</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n\n                </span><span class="s1">entrypoints[bundlePath] = finalizeEntrypoint({</span><span class="s3">\n                  </span><span class="s1">compilerType: COMPILER_NAMES.server,</span><span class="s3">\n                  </span><span class="s1">name: bundlePath,</span><span class="s3">\n                  </span><span class="s1">isServerComponent,</span><span class="s3">\n                  </span><span class="s1">value,</span><span class="s3">\n                  </span><span class="s1">hasAppDir,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">if (!this.hasAmpEntrypoints) {</span><span class="s3">\n          </span><span class="s1">delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_AMP]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (!this.hasPagesRouterEntrypoints) {</span><span class="s3">\n          </span><span class="s1">delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_MAIN]</span><span class="s3">\n          </span><span class="s1">delete entrypoints['pages/_app']</span><span class="s3">\n          </span><span class="s1">delete entrypoints['pages/_error']</span><span class="s3">\n          </span><span class="s1">delete entrypoints['/_error']</span><span class="s3">\n          </span><span class="s1">delete entrypoints['pages/_document']</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">// Remove React Refresh entrypoint chunk as `app` doesn't require it.</span><span class="s3">\n        </span><span class="s1">if (!this.hasAmpEntrypoints &amp;&amp; !this.hasPagesRouterEntrypoints) {</span><span class="s3">\n          </span><span class="s1">delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">if (!this.hasAppRouterEntrypoints) {</span><span class="s3">\n          </span><span class="s1">delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_MAIN_APP]</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">return entrypoints</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Enable building of client compilation before server compilation in development</span><span class="s3">\n    </span><span class="s1">// @ts-ignore webpack 5</span><span class="s3">\n    </span><span class="s1">this.activeWebpackConfigs.parallelism = 1</span><span class="s3">\n\n    </span><span class="s1">await Promise.all(</span><span class="s3">\n      </span><span class="s1">Array.from(getCacheDirectories(this.activeWebpackConfigs)).map(</span><span class="s3">\n        </span><span class="s1">checkPersistentCacheInvalidationAndCleanup</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.multiCompiler = getWebpackBundler()(</span><span class="s3">\n      </span><span class="s1">this.activeWebpackConfigs</span><span class="s3">\n    </span><span class="s1">) as unknown as webpack.MultiCompiler</span><span class="s3">\n\n    </span><span class="s1">// Copy over the filesystem so that it is shared between all compilers.</span><span class="s3">\n    </span><span class="s1">const inputFileSystem = this.multiCompiler.compilers[0].inputFileSystem</span><span class="s3">\n    </span><span class="s1">for (const compiler of this.multiCompiler.compilers) {</span><span class="s3">\n      </span><span class="s1">compiler.inputFileSystem = inputFileSystem</span><span class="s3">\n      </span><span class="s1">// This is set for the initial compile. After that Watching class in webpack adds it.</span><span class="s3">\n      </span><span class="s1">compiler.fsStartTime = Date.now()</span><span class="s3">\n      </span><span class="s1">// Ensure NodeEnvironmentPlugin doesn't purge the inputFileSystem. Purging is handled in `done` below.</span><span class="s3">\n      </span><span class="s1">compiler.hooks.beforeRun.intercept({</span><span class="s3">\n        </span><span class="s1">register(tapInfo: any) {</span><span class="s3">\n          </span><span class="s1">if (tapInfo.name === 'NodeEnvironmentPlugin') {</span><span class="s3">\n            </span><span class="s1">return null</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return tapInfo</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.hooks.done.tap('NextjsHotReloader', () =&gt; {</span><span class="s3">\n      </span><span class="s1">inputFileSystem?.purge?.()</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">watchCompilers(</span><span class="s3">\n      </span><span class="s1">this.multiCompiler.compilers[0],</span><span class="s3">\n      </span><span class="s1">this.multiCompiler.compilers[1],</span><span class="s3">\n      </span><span class="s1">this.multiCompiler.compilers[2]</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// Watch for changes to client/server page files so we can tell when just</span><span class="s3">\n    </span><span class="s1">// the server file changes and trigger a reload for GS(S)P pages</span><span class="s3">\n    </span><span class="s1">const changedClientPages = new Set&lt;string&gt;()</span><span class="s3">\n    </span><span class="s1">const changedServerPages = new Set&lt;string&gt;()</span><span class="s3">\n    </span><span class="s1">const changedEdgeServerPages = new Set&lt;string&gt;()</span><span class="s3">\n\n    </span><span class="s1">const changedServerComponentPages = new Set&lt;string&gt;()</span><span class="s3">\n    </span><span class="s1">const changedCSSImportPages = new Set&lt;string&gt;()</span><span class="s3">\n\n    </span><span class="s1">const prevClientPageHashes = new Map&lt;string, string&gt;()</span><span class="s3">\n    </span><span class="s1">const prevServerPageHashes = new Map&lt;string, string&gt;()</span><span class="s3">\n    </span><span class="s1">const prevEdgeServerPageHashes = new Map&lt;string, string&gt;()</span><span class="s3">\n    </span><span class="s1">const prevCSSImportModuleHashes = new Map&lt;string, string&gt;()</span><span class="s3">\n\n    </span><span class="s1">const pageExtensionRegex = new RegExp(</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">.(?:${this.config.pageExtensions.join('|')})$`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">const trackPageChanges =</span><span class="s3">\n      </span><span class="s1">(</span><span class="s3">\n        </span><span class="s1">pageHashMap: Map&lt;string, string&gt;,</span><span class="s3">\n        </span><span class="s1">changedItems: Set&lt;string&gt;,</span><span class="s3">\n        </span><span class="s1">serverComponentChangedItems?: Set&lt;string&gt;</span><span class="s3">\n      </span><span class="s1">) =&gt;</span><span class="s3">\n      </span><span class="s1">(stats: webpack.Compilation) =&gt; {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">stats.entrypoints.forEach((entry, key) =&gt; {</span><span class="s3">\n            </span><span class="s1">if (</span><span class="s3">\n              </span><span class="s1">key.startsWith('pages/') ||</span><span class="s3">\n              </span><span class="s1">key.startsWith('app/') ||</span><span class="s3">\n              </span><span class="s1">isMiddlewareFilename(key)</span><span class="s3">\n            </span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">// TODO this doesn't handle on demand loaded chunks</span><span class="s3">\n              </span><span class="s1">entry.chunks.forEach((chunk) =&gt; {</span><span class="s3">\n                </span><span class="s1">if (chunk.id === key) {</span><span class="s3">\n                  </span><span class="s1">const modsIterable: any =</span><span class="s3">\n                    </span><span class="s1">stats.chunkGraph.getChunkModulesIterable(chunk)</span><span class="s3">\n\n                  </span><span class="s1">let hasCSSModuleChanges = false</span><span class="s3">\n                  </span><span class="s1">let chunksHash = new StringXor()</span><span class="s3">\n                  </span><span class="s1">let chunksHashServerLayer = new StringXor()</span><span class="s3">\n\n                  </span><span class="s1">modsIterable.forEach((mod: any) =&gt; {</span><span class="s3">\n                    </span><span class="s1">if (</span><span class="s3">\n                      </span><span class="s1">mod.resource &amp;&amp;</span><span class="s3">\n                      </span><span class="s1">mod.resource.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/').includes(key) &amp;&amp;</span><span class="s3">\n                      </span><span class="s1">// Shouldn't match CSS modules, etc.</span><span class="s3">\n                      </span><span class="s1">pageExtensionRegex.test(mod.resource)</span><span class="s3">\n                    </span><span class="s1">) {</span><span class="s3">\n                      </span><span class="s1">// use original source to calculate hash since mod.hash</span><span class="s3">\n                      </span><span class="s1">// includes the source map in development which changes</span><span class="s3">\n                      </span><span class="s1">// every time for both server and client so we calculate</span><span class="s3">\n                      </span><span class="s1">// the hash without the source map for the page module</span><span class="s3">\n                      </span><span class="s1">const hash = (</span><span class="s3">\n                        </span><span class="s1">require('crypto') as typeof import('crypto')</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">.createHash('sha1')</span><span class="s3">\n                        </span><span class="s1">.update(mod.originalSource().buffer())</span><span class="s3">\n                        </span><span class="s1">.digest()</span><span class="s3">\n                        </span><span class="s1">.toString('hex')</span><span class="s3">\n\n                      </span><span class="s1">if (</span><span class="s3">\n                        </span><span class="s1">mod.layer === WEBPACK_LAYERS.reactServerComponents &amp;&amp;</span><span class="s3">\n                        </span><span class="s1">mod?.buildInfo?.rsc?.type !== 'client'</span><span class="s3">\n                      </span><span class="s1">) {</span><span class="s3">\n                        </span><span class="s1">chunksHashServerLayer.add(hash)</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n\n                      </span><span class="s1">chunksHash.add(hash)</span><span class="s3">\n                    </span><span class="s1">} else {</span><span class="s3">\n                      </span><span class="s1">// for non-pages we can use the module hash directly</span><span class="s3">\n                      </span><span class="s1">const hash = stats.chunkGraph.getModuleHash(</span><span class="s3">\n                        </span><span class="s1">mod,</span><span class="s3">\n                        </span><span class="s1">chunk.runtime</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n\n                      </span><span class="s1">if (</span><span class="s3">\n                        </span><span class="s1">mod.layer === WEBPACK_LAYERS.reactServerComponents &amp;&amp;</span><span class="s3">\n                        </span><span class="s1">mod?.buildInfo?.rsc?.type !== 'client'</span><span class="s3">\n                      </span><span class="s1">) {</span><span class="s3">\n                        </span><span class="s1">chunksHashServerLayer.add(hash)</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n\n                      </span><span class="s1">chunksHash.add(hash)</span><span class="s3">\n\n                      </span><span class="s1">// Both CSS import changes from server and client</span><span class="s3">\n                      </span><span class="s1">// components are tracked.</span><span class="s3">\n                      </span><span class="s1">if (</span><span class="s3">\n                        </span><span class="s1">key.startsWith('app/') &amp;&amp;</span><span class="s3">\n                        </span><span class="s1">/</span><span class="s3">\\</span><span class="s1">.(css|scss|sass)$/.test(mod.resource || '')</span><span class="s3">\n                      </span><span class="s1">) {</span><span class="s3">\n                        </span><span class="s1">const resourceKey = mod.layer + ':' + mod.resource</span><span class="s3">\n                        </span><span class="s1">const prevHash =</span><span class="s3">\n                          </span><span class="s1">prevCSSImportModuleHashes.get(resourceKey)</span><span class="s3">\n                        </span><span class="s1">if (prevHash &amp;&amp; prevHash !== hash) {</span><span class="s3">\n                          </span><span class="s1">hasCSSModuleChanges = true</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n                        </span><span class="s1">prevCSSImportModuleHashes.set(resourceKey, hash)</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n\n                  </span><span class="s1">const prevHash = pageHashMap.get(key)</span><span class="s3">\n                  </span><span class="s1">const curHash = chunksHash.toString()</span><span class="s3">\n                  </span><span class="s1">if (prevHash &amp;&amp; prevHash !== curHash) {</span><span class="s3">\n                    </span><span class="s1">changedItems.add(key)</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">pageHashMap.set(key, curHash)</span><span class="s3">\n\n                  </span><span class="s1">if (serverComponentChangedItems) {</span><span class="s3">\n                    </span><span class="s1">const serverKey =</span><span class="s3">\n                      </span><span class="s1">WEBPACK_LAYERS.reactServerComponents + ':' + key</span><span class="s3">\n                    </span><span class="s1">const prevServerHash = pageHashMap.get(serverKey)</span><span class="s3">\n                    </span><span class="s1">const curServerHash = chunksHashServerLayer.toString()</span><span class="s3">\n                    </span><span class="s1">if (prevServerHash &amp;&amp; prevServerHash !== curServerHash) {</span><span class="s3">\n                      </span><span class="s1">serverComponentChangedItems.add(key)</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">pageHashMap.set(serverKey, curServerHash)</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n\n                  </span><span class="s1">if (hasCSSModuleChanges) {</span><span class="s3">\n                    </span><span class="s1">changedCSSImportPages.add(key)</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">} catch (err) {</span><span class="s3">\n          </span><span class="s1">console.error(err)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.compilers[0].hooks.emit.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForClient',</span><span class="s3">\n      </span><span class="s1">trackPageChanges(prevClientPageHashes, changedClientPages)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.multiCompiler.compilers[1].hooks.emit.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForServer',</span><span class="s3">\n      </span><span class="s1">trackPageChanges(</span><span class="s3">\n        </span><span class="s1">prevServerPageHashes,</span><span class="s3">\n        </span><span class="s1">changedServerPages,</span><span class="s3">\n        </span><span class="s1">changedServerComponentPages</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.multiCompiler.compilers[2].hooks.emit.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForServer',</span><span class="s3">\n      </span><span class="s1">trackPageChanges(</span><span class="s3">\n        </span><span class="s1">prevEdgeServerPageHashes,</span><span class="s3">\n        </span><span class="s1">changedEdgeServerPages,</span><span class="s3">\n        </span><span class="s1">changedServerComponentPages</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// This plugin watches for changes to _document.js and notifies the client side that it should reload the page</span><span class="s3">\n    </span><span class="s1">this.multiCompiler.compilers[1].hooks.failed.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForServer',</span><span class="s3">\n      </span><span class="s1">(err: Error) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.serverError = err</span><span class="s3">\n        </span><span class="s1">this.serverStats = null</span><span class="s3">\n        </span><span class="s1">this.serverChunkNames = undefined</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.compilers[2].hooks.done.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForServer',</span><span class="s3">\n      </span><span class="s1">(stats) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.serverError = null</span><span class="s3">\n        </span><span class="s1">this.edgeServerStats = stats</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.compilers[1].hooks.done.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForServer',</span><span class="s3">\n      </span><span class="s1">(stats) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.serverError = null</span><span class="s3">\n        </span><span class="s1">this.serverStats = stats</span><span class="s3">\n\n        </span><span class="s1">if (!this.pagesDir) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const { compilation } = stats</span><span class="s3">\n\n        </span><span class="s1">// We only watch `_document` for changes on the server compilation</span><span class="s3">\n        </span><span class="s1">// the rest of the files will be triggered by the client compilation</span><span class="s3">\n        </span><span class="s1">const documentChunk = compilation.namedChunks.get('pages/_document')</span><span class="s3">\n        </span><span class="s1">// If the document chunk can't be found we do nothing</span><span class="s3">\n        </span><span class="s1">if (!documentChunk) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// Initial value</span><span class="s3">\n        </span><span class="s1">if (this.serverPrevDocumentHash === null) {</span><span class="s3">\n          </span><span class="s1">this.serverPrevDocumentHash = documentChunk.hash || null</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// If _document.js didn't change we don't trigger a reload.</span><span class="s3">\n        </span><span class="s1">if (documentChunk.hash === this.serverPrevDocumentHash) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// As document chunk will change if new app pages are joined,</span><span class="s3">\n        </span><span class="s1">// since react bundle is different it will effect the chunk hash.</span><span class="s3">\n        </span><span class="s1">// So we diff the chunk changes, if there's only new app page chunk joins,</span><span class="s3">\n        </span><span class="s1">// then we don't trigger a reload by checking pages/_document chunk change.</span><span class="s3">\n        </span><span class="s1">if (this.appDir) {</span><span class="s3">\n          </span><span class="s1">const chunkNames = new Set(compilation.namedChunks.keys())</span><span class="s3">\n          </span><span class="s1">const diffChunkNames = difference&lt;string&gt;(</span><span class="s3">\n            </span><span class="s1">this.serverChunkNames || new Set(),</span><span class="s3">\n            </span><span class="s1">chunkNames</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">diffChunkNames.length === 0 ||</span><span class="s3">\n            </span><span class="s1">diffChunkNames.every((chunkName) =&gt; chunkName.startsWith('app/'))</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">this.serverChunkNames = chunkNames</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">this.serverPrevDocumentHash = documentChunk.hash || null</span><span class="s3">\n\n        </span><span class="s1">// Notify reload to reload the page, as _document.js was changed (different hash)</span><span class="s3">\n        </span><span class="s1">this.send({</span><span class="s3">\n          </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE,</span><span class="s3">\n          </span><span class="s1">data: '_document has changed',</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.hooks.done.tap('NextjsHotReloaderForServer', (stats) =&gt; {</span><span class="s3">\n      </span><span class="s1">const reloadAfterInvalidation = this.reloadAfterInvalidation</span><span class="s3">\n      </span><span class="s1">this.reloadAfterInvalidation = false</span><span class="s3">\n\n      </span><span class="s1">const serverOnlyChanges = difference&lt;string&gt;(</span><span class="s3">\n        </span><span class="s1">changedServerPages,</span><span class="s3">\n        </span><span class="s1">changedClientPages</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const edgeServerOnlyChanges = difference&lt;string&gt;(</span><span class="s3">\n        </span><span class="s1">changedEdgeServerPages,</span><span class="s3">\n        </span><span class="s1">changedClientPages</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const pageChanges = serverOnlyChanges</span><span class="s3">\n        </span><span class="s1">.concat(edgeServerOnlyChanges)</span><span class="s3">\n        </span><span class="s1">.filter((key) =&gt; key.startsWith('pages/'))</span><span class="s3">\n\n      </span><span class="s1">const middlewareChanges = [</span><span class="s3">\n        </span><span class="s1">...Array.from(changedEdgeServerPages),</span><span class="s3">\n        </span><span class="s1">...Array.from(changedServerPages),</span><span class="s3">\n      </span><span class="s1">].filter((name) =&gt; isMiddlewareFilename(name))</span><span class="s3">\n\n      </span><span class="s1">if (middlewareChanges.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">this.send({</span><span class="s3">\n          </span><span class="s1">event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (pageChanges.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">this.send({</span><span class="s3">\n          </span><span class="s1">event: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,</span><span class="s3">\n          </span><span class="s1">pages: serverOnlyChanges.map((pg) =&gt;</span><span class="s3">\n            </span><span class="s1">denormalizePagePath(pg.slice('pages'.length))</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">changedServerComponentPages.size ||</span><span class="s3">\n        </span><span class="s1">changedCSSImportPages.size ||</span><span class="s3">\n        </span><span class="s1">reloadAfterInvalidation</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">this.resetFetch()</span><span class="s3">\n        </span><span class="s1">this.refreshServerComponents(stats.hash)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">changedClientPages.clear()</span><span class="s3">\n      </span><span class="s1">changedServerPages.clear()</span><span class="s3">\n      </span><span class="s1">changedEdgeServerPages.clear()</span><span class="s3">\n      </span><span class="s1">changedServerComponentPages.clear()</span><span class="s3">\n      </span><span class="s1">changedCSSImportPages.clear()</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">this.multiCompiler.compilers[0].hooks.failed.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForClient',</span><span class="s3">\n      </span><span class="s1">(err: Error) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.clientError = err</span><span class="s3">\n        </span><span class="s1">this.clientStats = null</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">this.multiCompiler.compilers[0].hooks.done.tap(</span><span class="s3">\n      </span><span class="s1">'NextjsHotReloaderForClient',</span><span class="s3">\n      </span><span class="s1">(stats) =&gt; {</span><span class="s3">\n        </span><span class="s1">this.clientError = null</span><span class="s3">\n        </span><span class="s1">this.clientStats = stats</span><span class="s3">\n\n        </span><span class="s1">const { compilation } = stats</span><span class="s3">\n        </span><span class="s1">const chunkNames = new Set(</span><span class="s3">\n          </span><span class="s1">[...compilation.namedChunks.keys()].filter(</span><span class="s3">\n            </span><span class="s1">(name) =&gt; !!getRouteFromEntrypoint(name)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">if (this.prevChunkNames) {</span><span class="s3">\n          </span><span class="s1">// detect chunks which have to be replaced with a new template</span><span class="s3">\n          </span><span class="s1">// e.g, pages/index.js &lt;-&gt; pages/_error.js</span><span class="s3">\n          </span><span class="s1">const addedPages = diff(chunkNames, this.prevChunkNames!)</span><span class="s3">\n          </span><span class="s1">const removedPages = diff(this.prevChunkNames!, chunkNames)</span><span class="s3">\n\n          </span><span class="s1">if (addedPages.size &gt; 0) {</span><span class="s3">\n            </span><span class="s1">for (const addedPage of addedPages) {</span><span class="s3">\n              </span><span class="s1">const page = getRouteFromEntrypoint(addedPage)</span><span class="s3">\n              </span><span class="s1">this.send({</span><span class="s3">\n                </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.ADDED_PAGE,</span><span class="s3">\n                </span><span class="s1">data: [page],</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (removedPages.size &gt; 0) {</span><span class="s3">\n            </span><span class="s1">for (const removedPage of removedPages) {</span><span class="s3">\n              </span><span class="s1">const page = getRouteFromEntrypoint(removedPage)</span><span class="s3">\n              </span><span class="s1">this.send({</span><span class="s3">\n                </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.REMOVED_PAGE,</span><span class="s3">\n                </span><span class="s1">data: [page],</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">this.prevChunkNames = chunkNames</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">this.webpackHotMiddleware = new WebpackHotMiddleware(</span><span class="s3">\n      </span><span class="s1">this.multiCompiler.compilers,</span><span class="s3">\n      </span><span class="s1">this.versionInfo,</span><span class="s3">\n      </span><span class="s1">this.devtoolsFrontendUrl,</span><span class="s3">\n      </span><span class="s1">initialDevToolsConfig</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">let booted = false</span><span class="s3">\n\n    </span><span class="s1">this.watcher = await new Promise((resolve) =&gt; {</span><span class="s3">\n      </span><span class="s1">const watcher = this.multiCompiler?.watch(</span><span class="s3">\n        </span><span class="s1">// @ts-ignore webpack supports an array of watchOptions when using a multiCompiler</span><span class="s3">\n        </span><span class="s1">this.activeWebpackConfigs.map((config) =&gt; config.watchOptions!),</span><span class="s3">\n        </span><span class="s1">// Errors are handled separately</span><span class="s3">\n        </span><span class="s1">(_err: any) =&gt; {</span><span class="s3">\n          </span><span class="s1">if (!booted) {</span><span class="s3">\n            </span><span class="s1">booted = true</span><span class="s3">\n            </span><span class="s1">resolve(watcher)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">this.onDemandEntries = onDemandEntryHandler({</span><span class="s3">\n      </span><span class="s1">hotReloader: this,</span><span class="s3">\n      </span><span class="s1">multiCompiler: this.multiCompiler,</span><span class="s3">\n      </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n      </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n      </span><span class="s1">rootDir: this.dir,</span><span class="s3">\n      </span><span class="s1">nextConfig: this.config,</span><span class="s3">\n      </span><span class="s1">...(this.config.onDemandEntries as {</span><span class="s3">\n        </span><span class="s1">maxInactiveAge: number</span><span class="s3">\n        </span><span class="s1">pagesBufferLength: number</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">this.middlewares = [</span><span class="s3">\n      </span><span class="s1">getOverlayMiddleware({</span><span class="s3">\n        </span><span class="s1">rootDirectory: this.dir,</span><span class="s3">\n        </span><span class="s1">isSrcDir: this.isSrcDir,</span><span class="s3">\n        </span><span class="s1">clientStats: () =&gt; this.clientStats,</span><span class="s3">\n        </span><span class="s1">serverStats: () =&gt; this.serverStats,</span><span class="s3">\n        </span><span class="s1">edgeServerStats: () =&gt; this.edgeServerStats,</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">getSourceMapMiddleware({</span><span class="s3">\n        </span><span class="s1">clientStats: () =&gt; this.clientStats,</span><span class="s3">\n        </span><span class="s1">serverStats: () =&gt; this.serverStats,</span><span class="s3">\n        </span><span class="s1">edgeServerStats: () =&gt; this.edgeServerStats,</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">getNextErrorFeedbackMiddleware(this.telemetry),</span><span class="s3">\n      </span><span class="s1">getDevOverlayFontMiddleware(),</span><span class="s3">\n      </span><span class="s1">getDisableDevIndicatorMiddleware(),</span><span class="s3">\n      </span><span class="s1">getRestartDevServerMiddleware({</span><span class="s3">\n        </span><span class="s1">telemetry: this.telemetry,</span><span class="s3">\n        </span><span class="s1">webpackCacheDirectories:</span><span class="s3">\n          </span><span class="s1">this.activeWebpackConfigs != null</span><span class="s3">\n            </span><span class="s1">? getCacheDirectories(this.activeWebpackConfigs)</span><span class="s3">\n            </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">devToolsConfigMiddleware({</span><span class="s3">\n        </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n        </span><span class="s1">sendUpdateSignal: (data) =&gt; {</span><span class="s3">\n          </span><span class="s1">// Update the in-memory devToolsConfig value</span><span class="s3">\n          </span><span class="s1">// which will be used for the next onHMR call.</span><span class="s3">\n          </span><span class="s1">this.webpackHotMiddleware?.updateDevToolsConfig(data)</span><span class="s3">\n\n          </span><span class="s1">this.send({</span><span class="s3">\n            </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG,</span><span class="s3">\n            </span><span class="s1">data,</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public invalidate(</span><span class="s3">\n    </span><span class="s1">{ reloadAfterInvalidation }: { reloadAfterInvalidation: boolean } = {</span><span class="s3">\n      </span><span class="s1">reloadAfterInvalidation: false,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// Cache the `reloadAfterInvalidation` flag, and use it to reload the page when compilation is done</span><span class="s3">\n    </span><span class="s1">this.reloadAfterInvalidation = reloadAfterInvalidation</span><span class="s3">\n    </span><span class="s1">const outputPath = this.multiCompiler?.outputPath</span><span class="s3">\n    </span><span class="s1">if (outputPath) {</span><span class="s3">\n      </span><span class="s1">getInvalidator(outputPath)?.invalidate()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async getCompilationErrors(page: string) {</span><span class="s3">\n    </span><span class="s1">const getErrors = ({ compilation }: webpack.Stats) =&gt; {</span><span class="s3">\n      </span><span class="s1">const failedPages = erroredPages(compilation)</span><span class="s3">\n      </span><span class="s1">const normalizedPage = normalizePathSep(page)</span><span class="s3">\n      </span><span class="s1">// If there is an error related to the requesting page we display it instead of the first error</span><span class="s3">\n      </span><span class="s1">return failedPages[normalizedPage]?.length &gt; 0</span><span class="s3">\n        </span><span class="s1">? failedPages[normalizedPage]</span><span class="s3">\n        </span><span class="s1">: compilation.errors</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (this.clientError) {</span><span class="s3">\n      </span><span class="s1">return [this.clientError]</span><span class="s3">\n    </span><span class="s1">} else if (this.serverError) {</span><span class="s3">\n      </span><span class="s1">return [this.serverError]</span><span class="s3">\n    </span><span class="s1">} else if (this.clientStats?.hasErrors()) {</span><span class="s3">\n      </span><span class="s1">return getErrors(this.clientStats)</span><span class="s3">\n    </span><span class="s1">} else if (this.serverStats?.hasErrors()) {</span><span class="s3">\n      </span><span class="s1">return getErrors(this.serverStats)</span><span class="s3">\n    </span><span class="s1">} else if (this.edgeServerStats?.hasErrors()) {</span><span class="s3">\n      </span><span class="s1">return getErrors(this.edgeServerStats)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">return []</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public send(action: HMR_ACTION_TYPES): void {</span><span class="s3">\n    </span><span class="s1">this.webpackHotMiddleware!.publish(action)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async ensurePage({</span><span class="s3">\n    </span><span class="s1">page,</span><span class="s3">\n    </span><span class="s1">clientOnly,</span><span class="s3">\n    </span><span class="s1">appPaths,</span><span class="s3">\n    </span><span class="s1">definition,</span><span class="s3">\n    </span><span class="s1">isApp,</span><span class="s3">\n    </span><span class="s1">url,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">page: string</span><span class="s3">\n    </span><span class="s1">clientOnly: boolean</span><span class="s3">\n    </span><span class="s1">appPaths?: ReadonlyArray&lt;string&gt; | null</span><span class="s3">\n    </span><span class="s1">isApp?: boolean</span><span class="s3">\n    </span><span class="s1">definition?: RouteDefinition</span><span class="s3">\n    </span><span class="s1">url?: string</span><span class="s3">\n  </span><span class="s1">}): Promise&lt;void&gt; {</span><span class="s3">\n    </span><span class="s1">return this.hotReloaderSpan</span><span class="s3">\n      </span><span class="s1">.traceChild('ensure-page', {</span><span class="s3">\n        </span><span class="s1">inputPage: page,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n        </span><span class="s1">// Make sure we don't re-build or dispose prebuilt pages</span><span class="s3">\n        </span><span class="s1">if (page !== '/_error' &amp;&amp; BLOCKED_PAGES.indexOf(page) !== -1) {</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const error = clientOnly</span><span class="s3">\n          </span><span class="s1">? this.clientError</span><span class="s3">\n          </span><span class="s1">: this.serverError || this.clientError</span><span class="s3">\n        </span><span class="s1">if (error) {</span><span class="s3">\n          </span><span class="s1">throw error</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">return this.onDemandEntries?.ensurePage({</span><span class="s3">\n          </span><span class="s1">page,</span><span class="s3">\n          </span><span class="s1">appPaths,</span><span class="s3">\n          </span><span class="s1">definition,</span><span class="s3">\n          </span><span class="s1">isApp,</span><span class="s3">\n          </span><span class="s1">url,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public close() {</span><span class="s3">\n    </span><span class="s1">this.webpackHotMiddleware?.close()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;HotReloaderWebpack&quot;</span><span class="s0">,</span><span class="s1">&quot;getVersionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;matchNextPageBundleRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;renderScriptError&quot;</span><span class="s0">,</span><span class="s1">&quot;MILLISECONDS_IN_NANOSECOND&quot;</span><span class="s0">,</span><span class="s1">&quot;BigInt&quot;</span><span class="s0">,</span><span class="s1">&quot;diff&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;wsServer&quot;</span><span class="s0">,</span><span class="s1">&quot;ws&quot;</span><span class="s0">,</span><span class="s1">&quot;Server&quot;</span><span class="s0">,</span><span class="s1">&quot;noServer&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;verbose&quot;</span><span class="s0">,</span><span class="s1">&quot;setHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;statusCode&quot;</span><span class="s0">,</span><span class="s1">&quot;end&quot;</span><span class="s0">,</span><span class="s1">&quot;addCorsSupport&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;preflight&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;origin&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;writeHead&quot;</span><span class="s0">,</span><span class="s1">&quot;getPathMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;findEntryModule&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;compilation&quot;</span><span class="s0">,</span><span class="s1">&quot;issuer&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;getIssuer&quot;</span><span class="s0">,</span><span class="s1">&quot;erroredPages&quot;</span><span class="s0">,</span><span class="s1">&quot;failedPages&quot;</span><span class="s0">,</span><span class="s1">&quot;errors&quot;</span><span class="s0">,</span><span class="s1">&quot;entryModule&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;enhancedName&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteFromEntrypoint&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;installed&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;fetch&quot;</span><span class="s0">,</span><span class="s1">&quot;ok&quot;</span><span class="s0">,</span><span class="s1">&quot;staleness&quot;</span><span class="s0">,</span><span class="s1">&quot;latest&quot;</span><span class="s0">,</span><span class="s1">&quot;canary&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;parseVersionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;isSrcDir&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;encryptionKey&quot;</span><span class="s0">,</span><span class="s1">&quot;previewProps&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;telemetry&quot;</span><span class="s0">,</span><span class="s1">&quot;resetFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;clientError&quot;</span><span class="s0">,</span><span class="s1">&quot;serverError&quot;</span><span class="s0">,</span><span class="s1">&quot;hmrServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesMapping&quot;</span><span class="s0">,</span><span class="s1">&quot;versionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;reloadAfterInvalidation&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAmpEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAppRouterEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;hasPagesRouterEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewares&quot;</span><span class="s0">,</span><span class="s1">&quot;clientStats&quot;</span><span class="s0">,</span><span class="s1">&quot;serverStats&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServerStats&quot;</span><span class="s0">,</span><span class="s1">&quot;serverPrevDocumentHash&quot;</span><span class="s0">,</span><span class="s1">&quot;hotReloaderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_VERSION&quot;</span><span class="s0">,</span><span class="s1">&quot;stop&quot;</span><span class="s0">,</span><span class="s1">&quot;run&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;handlePageBundleRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;pageBundleRes&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedPageBundleUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;decodedPagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;DecodeError&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;denormalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;BLOCKED_PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;ensurePage&quot;</span><span class="s0">,</span><span class="s1">&quot;clientOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;getProperError&quot;</span><span class="s0">,</span><span class="s1">&quot;getCompilationErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;calledNext&quot;</span><span class="s0">,</span><span class="s1">&quot;setHmrServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;clearHmrServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;send&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;HMR_ACTIONS_SENT_TO_BROWSER&quot;</span><span class="s0">,</span><span class="s1">&quot;RELOAD_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;refreshServerComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_COMPONENT_CHANGES&quot;</span><span class="s0">,</span><span class="s1">&quot;onHMR&quot;</span><span class="s0">,</span><span class="s1">&quot;_socket&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;callback&quot;</span><span class="s0">,</span><span class="s1">&quot;handleUpgrade&quot;</span><span class="s0">,</span><span class="s1">&quot;socket&quot;</span><span class="s0">,</span><span class="s1">&quot;client&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackHotMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;onDemandEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;addEventListener&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;payload&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;traceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;startTime&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;floor&quot;</span><span class="s0">,</span><span class="s1">&quot;attrs&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;endTime&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedModules&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS&quot;</span><span class="s0">,</span><span class="s1">&quot;appPagesBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;isPageHidden&quot;</span><span class="s0">,</span><span class="s1">&quot;errorCount&quot;</span><span class="s0">,</span><span class="s1">&quot;warningCount&quot;</span><span class="s0">,</span><span class="s1">&quot;stackTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;hadRuntimeError&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;FAST_REFRESH_RUNTIME_RELOAD&quot;</span><span class="s0">,</span><span class="s1">&quot;fileMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;fileUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;URL&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;getAll&quot;</span><span class="s0">,</span><span class="s1">&quot;filepath&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDirBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanedFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;browserDebugInfoInTerminal&quot;</span><span class="s0">,</span><span class="s1">&quot;receiveBrowserLogsWebpack&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;router&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceType&quot;</span><span class="s0">,</span><span class="s1">&quot;rootDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;manualTraceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;clientId&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;clean&quot;</span><span class="s0">,</span><span class="s1">&quot;span&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;recursiveDelete&quot;</span><span class="s0">,</span><span class="s1">&quot;getWebpackConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackConfigSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePaths&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;findPageFile&quot;</span><span class="s0">,</span><span class="s1">&quot;createPagesMapping&quot;</span><span class="s0">,</span><span class="s1">&quot;isDev&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesType&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGE_TYPES&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;createEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;envFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;pages&quot;</span><span class="s0">,</span><span class="s1">&quot;previewMode&quot;</span><span class="s0">,</span><span class="s1">&quot;rootDir&quot;</span><span class="s0">,</span><span class="s1">&quot;commonWebpackOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;originalRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;_originalRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;originalRedirects&quot;</span><span class="s0">,</span><span class="s1">&quot;_originalRedirects&quot;</span><span class="s0">,</span><span class="s1">&quot;runWebpackSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;loadProjectInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getBaseWebpackConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;compilerType&quot;</span><span class="s0">,</span><span class="s1">&quot;COMPILER_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;server&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;buildFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackWatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;isDevFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;getWebpackBundler&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;bootedFallbackCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;watch&quot;</span><span class="s0">,</span><span class="s1">&quot;watchOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;_err&quot;</span><span class="s0">,</span><span class="s1">&quot;tracedGetVersionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;versionInfoSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;startSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;getNodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;devtoolsFrontendUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;debugPort&quot;</span><span class="s0">,</span><span class="s1">&quot;debugInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;debugInfoList&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;mkdir&quot;</span><span class="s0">,</span><span class="s1">&quot;recursive&quot;</span><span class="s0">,</span><span class="s1">&quot;initialDevToolsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevToolsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;distPackageJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;activeWebpackConfigs&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;outputPath&quot;</span><span class="s0">,</span><span class="s1">&quot;multiCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;getEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;isClientCompilation&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeServerCompilation&quot;</span><span class="s0">,</span><span class="s1">&quot;isEdgeServerCompilation&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;entryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;entryData&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;dispose&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;isEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;EntryTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;ENTRY&quot;</span><span class="s0">,</span><span class="s1">&quot;isChildEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;CHILD_ENTRY&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExists&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;absolutePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteEntryFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAppDir&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;staticInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getStaticInfoIncludingLayouts&quot;</span><span class="s0">,</span><span class="s1">&quot;isInsideAppDir&quot;</span><span class="s0">,</span><span class="s1">&quot;pageFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;amp&quot;</span><span class="s0">,</span><span class="s1">&quot;isServerComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;rsc&quot;</span><span class="s0">,</span><span class="s1">&quot;RSC_MODULE_TYPES&quot;</span><span class="s0">,</span><span class="s1">&quot;pageType&quot;</span><span class="s0">,</span><span class="s1">&quot;APP&quot;</span><span class="s0">,</span><span class="s1">&quot;ROOT&quot;</span><span class="s0">,</span><span class="s1">&quot;isInstrumentation&quot;</span><span class="s0">,</span><span class="s1">&quot;isInstrumentationHookFile&quot;</span><span class="s0">,</span><span class="s1">&quot;pageRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;runtime&quot;</span><span class="s0">,</span><span class="s1">&quot;runDependingOnPageType&quot;</span><span class="s0">,</span><span class="s1">&quot;onEdgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILDING&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedBundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;finalizeEntrypoint&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;getInstrumentationEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;isEdgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;getAppEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;appPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;pagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;posix&quot;</span><span class="s0">,</span><span class="s1">&quot;APP_DIR_ALIAS&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;tsconfigPath&quot;</span><span class="s0">,</span><span class="s1">&quot;typescript&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;assetPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfigOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;preferredRegion&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;isGlobalNotFoundEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;globalNotFound&quot;</span><span class="s0">,</span><span class="s1">&quot;import&quot;</span><span class="s0">,</span><span class="s1">&quot;getEdgeServerEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;onClient&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;getClientEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;onServer&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbsolute&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiddlewareFile&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;isAPIRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;getRouteLoaderEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;RouteKind&quot;</span><span class="s0">,</span><span class="s1">&quot;PAGES_API&quot;</span><span class="s0">,</span><span class="s1">&quot;isInternalComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;isNonRoutePagesPage&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_AMP&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_MAIN&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_MAIN_APP&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelism&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheDirectories&quot;</span><span class="s0">,</span><span class="s1">&quot;checkPersistentCacheInvalidationAndCleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;inputFileSystem&quot;</span><span class="s0">,</span><span class="s1">&quot;compilers&quot;</span><span class="s0">,</span><span class="s1">&quot;compiler&quot;</span><span class="s0">,</span><span class="s1">&quot;fsStartTime&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;hooks&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeRun&quot;</span><span class="s0">,</span><span class="s1">&quot;intercept&quot;</span><span class="s0">,</span><span class="s1">&quot;register&quot;</span><span class="s0">,</span><span class="s1">&quot;tapInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;tap&quot;</span><span class="s0">,</span><span class="s1">&quot;purge&quot;</span><span class="s0">,</span><span class="s1">&quot;watchCompilers&quot;</span><span class="s0">,</span><span class="s1">&quot;changedClientPages&quot;</span><span class="s0">,</span><span class="s1">&quot;changedServerPages&quot;</span><span class="s0">,</span><span class="s1">&quot;changedEdgeServerPages&quot;</span><span class="s0">,</span><span class="s1">&quot;changedServerComponentPages&quot;</span><span class="s0">,</span><span class="s1">&quot;changedCSSImportPages&quot;</span><span class="s0">,</span><span class="s1">&quot;prevClientPageHashes&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;prevServerPageHashes&quot;</span><span class="s0">,</span><span class="s1">&quot;prevEdgeServerPageHashes&quot;</span><span class="s0">,</span><span class="s1">&quot;prevCSSImportModuleHashes&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensionRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;trackPageChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;pageHashMap&quot;</span><span class="s0">,</span><span class="s1">&quot;changedItems&quot;</span><span class="s0">,</span><span class="s1">&quot;serverComponentChangedItems&quot;</span><span class="s0">,</span><span class="s1">&quot;stats&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;isMiddlewareFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;chunks&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;modsIterable&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;getChunkModulesIterable&quot;</span><span class="s0">,</span><span class="s1">&quot;hasCSSModuleChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;chunksHash&quot;</span><span class="s0">,</span><span class="s1">&quot;StringXor&quot;</span><span class="s0">,</span><span class="s1">&quot;chunksHashServerLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;resource&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;createHash&quot;</span><span class="s0">,</span><span class="s1">&quot;update&quot;</span><span class="s0">,</span><span class="s1">&quot;originalSource&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;layer&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;buildInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;getModuleHash&quot;</span><span class="s0">,</span><span class="s1">&quot;resourceKey&quot;</span><span class="s0">,</span><span class="s1">&quot;prevHash&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;curHash&quot;</span><span class="s0">,</span><span class="s1">&quot;serverKey&quot;</span><span class="s0">,</span><span class="s1">&quot;prevServerHash&quot;</span><span class="s0">,</span><span class="s1">&quot;curServerHash&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;emit&quot;</span><span class="s0">,</span><span class="s1">&quot;failed&quot;</span><span class="s0">,</span><span class="s1">&quot;serverChunkNames&quot;</span><span class="s0">,</span><span class="s1">&quot;documentChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;namedChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkNames&quot;</span><span class="s0">,</span><span class="s1">&quot;diffChunkNames&quot;</span><span class="s0">,</span><span class="s1">&quot;difference&quot;</span><span class="s0">,</span><span class="s1">&quot;every&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkName&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOnlyChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServerOnlyChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;pageChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_CHANGES&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_ONLY_CHANGES&quot;</span><span class="s0">,</span><span class="s1">&quot;pg&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;clear&quot;</span><span class="s0">,</span><span class="s1">&quot;prevChunkNames&quot;</span><span class="s0">,</span><span class="s1">&quot;addedPages&quot;</span><span class="s0">,</span><span class="s1">&quot;removedPages&quot;</span><span class="s0">,</span><span class="s1">&quot;addedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;ADDED_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;removedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;REMOVED_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;WebpackHotMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;booted&quot;</span><span class="s0">,</span><span class="s1">&quot;watcher&quot;</span><span class="s0">,</span><span class="s1">&quot;onDemandEntryHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;hotReloader&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getOverlayMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourceMapMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextErrorFeedbackMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevOverlayFontMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getDisableDevIndicatorMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getRestartDevServerMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackCacheDirectories&quot;</span><span class="s0">,</span><span class="s1">&quot;devToolsConfigMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;sendUpdateSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;updateDevToolsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;DEVTOOLS_CONFIG&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;getInvalidator&quot;</span><span class="s0">,</span><span class="s1">&quot;getErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePathSep&quot;</span><span class="s0">,</span><span class="s1">&quot;hasErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;publish&quot;</span><span class="s0">,</span><span class="s1">&quot;definition&quot;</span><span class="s0">,</span><span class="s1">&quot;isApp&quot;</span><span class="s0">,</span><span class="s1">&quot;inputPage&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>