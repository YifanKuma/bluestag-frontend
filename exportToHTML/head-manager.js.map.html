<html>
<head>
<title>head-manager.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
head-manager.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/client/head-manager.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { setAttributesFromProps } from './set-attributes-from-props'</span><span class="s3">\n\n</span><span class="s1">import type { JSX } from 'react'</span><span class="s3">\n\n</span><span class="s1">function reactElementToDOM({ type, props }: JSX.Element): HTMLElement {</span><span class="s3">\n  </span><span class="s1">const el: HTMLElement = document.createElement(type)</span><span class="s3">\n  </span><span class="s1">setAttributesFromProps(el, props)</span><span class="s3">\n\n  </span><span class="s1">const { children, dangerouslySetInnerHTML } = props</span><span class="s3">\n  </span><span class="s1">if (dangerouslySetInnerHTML) {</span><span class="s3">\n    </span><span class="s1">el.innerHTML = dangerouslySetInnerHTML.__html || ''</span><span class="s3">\n  </span><span class="s1">} else if (children) {</span><span class="s3">\n    </span><span class="s1">el.textContent =</span><span class="s3">\n      </span><span class="s1">typeof children === 'string'</span><span class="s3">\n        </span><span class="s1">? children</span><span class="s3">\n        </span><span class="s1">: Array.isArray(children)</span><span class="s3">\n          </span><span class="s1">? children.join('')</span><span class="s3">\n          </span><span class="s1">: ''</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return el</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* When a `nonce` is present on an element, browsers such as Chrome and Firefox strip it out of the</span><span class="s3">\n </span><span class="s1">* actual HTML attributes for security reasons *when the element is added to the document*. Thus,</span><span class="s3">\n </span><span class="s1">* given two equivalent elements that have nonces, `Element,isEqualNode()` will return false if one</span><span class="s3">\n </span><span class="s1">* of those elements gets added to the document. Although the `element.nonce` property will be the</span><span class="s3">\n </span><span class="s1">* same for both elements, the one that was added to the document will return an empty string for</span><span class="s3">\n </span><span class="s1">* its nonce HTML attribute value.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This custom `isEqualNode()` function therefore removes the nonce value from the `newTag` before</span><span class="s3">\n </span><span class="s1">* comparing it to `oldTag`, restoring it afterwards.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* For more information, see:</span><span class="s3">\n </span><span class="s1">* https://bugs.chromium.org/p/chromium/issues/detail?id=1211471#c12</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function isEqualNode(oldTag: Element, newTag: Element) {</span><span class="s3">\n  </span><span class="s1">if (oldTag instanceof HTMLElement &amp;&amp; newTag instanceof HTMLElement) {</span><span class="s3">\n    </span><span class="s1">const nonce = newTag.getAttribute('nonce')</span><span class="s3">\n    </span><span class="s1">// Only strip the nonce if `oldTag` has had it stripped. An element's nonce attribute will not</span><span class="s3">\n    </span><span class="s1">// be stripped if there is no content security policy response header that includes a nonce.</span><span class="s3">\n    </span><span class="s1">if (nonce &amp;&amp; !oldTag.getAttribute('nonce')) {</span><span class="s3">\n      </span><span class="s1">const cloneTag = newTag.cloneNode(true) as typeof newTag</span><span class="s3">\n      </span><span class="s1">cloneTag.setAttribute('nonce', '')</span><span class="s3">\n      </span><span class="s1">cloneTag.nonce = nonce</span><span class="s3">\n      </span><span class="s1">return nonce === oldTag.nonce &amp;&amp; oldTag.isEqualNode(cloneTag)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return oldTag.isEqualNode(newTag)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function updateElements(type: string, components: JSX.Element[]) {</span><span class="s3">\n  </span><span class="s1">const headEl = document.querySelector('head')</span><span class="s3">\n  </span><span class="s1">if (!headEl) return</span><span class="s3">\n\n  </span><span class="s1">const oldTags = new Set(headEl.querySelectorAll(`${type}[data-next-head]`))</span><span class="s3">\n\n  </span><span class="s1">if (type === 'meta') {</span><span class="s3">\n    </span><span class="s1">const metaCharset = headEl.querySelector('meta[charset]')</span><span class="s3">\n    </span><span class="s1">if (metaCharset !== null) {</span><span class="s3">\n      </span><span class="s1">oldTags.add(metaCharset)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const newTags: Element[] = []</span><span class="s3">\n  </span><span class="s1">for (let i = 0; i &lt; components.length; i++) {</span><span class="s3">\n    </span><span class="s1">const component = components[i]</span><span class="s3">\n    </span><span class="s1">const newTag = reactElementToDOM(component)</span><span class="s3">\n    </span><span class="s1">newTag.setAttribute('data-next-head', '')</span><span class="s3">\n\n    </span><span class="s1">let isNew = true</span><span class="s3">\n    </span><span class="s1">for (const oldTag of oldTags) {</span><span class="s3">\n      </span><span class="s1">if (isEqualNode(oldTag, newTag)) {</span><span class="s3">\n        </span><span class="s1">oldTags.delete(oldTag)</span><span class="s3">\n        </span><span class="s1">isNew = false</span><span class="s3">\n        </span><span class="s1">break</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isNew) {</span><span class="s3">\n      </span><span class="s1">newTags.push(newTag)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const oldTag of oldTags) {</span><span class="s3">\n    </span><span class="s1">oldTag.parentNode?.removeChild(oldTag)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const newTag of newTags) {</span><span class="s3">\n    </span><span class="s1">// meta[charset] must be first element so special case</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">newTag.tagName.toLowerCase() === 'meta' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">newTag.getAttribute('charset') !== null</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">headEl.prepend(newTag)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">headEl.appendChild(newTag)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default function initHeadManager(): {</span><span class="s3">\n  </span><span class="s1">mountedInstances: Set&lt;unknown&gt;</span><span class="s3">\n  </span><span class="s1">updateHead: (head: JSX.Element[]) =&gt; void</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">mountedInstances: new Set(),</span><span class="s3">\n    </span><span class="s1">updateHead: (head: JSX.Element[]) =&gt; {</span><span class="s3">\n      </span><span class="s1">const tags: Record&lt;string, JSX.Element[]&gt; = {}</span><span class="s3">\n\n      </span><span class="s1">head.forEach((h) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">// If the font tag is loaded only on client navigation</span><span class="s3">\n          </span><span class="s1">// it won't be inlined. In this case revert to the original behavior</span><span class="s3">\n          </span><span class="s1">h.type === 'link' &amp;&amp;</span><span class="s3">\n          </span><span class="s1">h.props['data-optimized-fonts']</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">document.querySelector(`style[data-href=</span><span class="s3">\&quot;</span><span class="s1">${h.props['data-href']}</span><span class="s3">\&quot;</span><span class="s1">]`)</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">h.props.href = h.props['data-href']</span><span class="s3">\n            </span><span class="s1">h.props['data-href'] = undefined</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const components = tags[h.type] || []</span><span class="s3">\n        </span><span class="s1">components.push(h)</span><span class="s3">\n        </span><span class="s1">tags[h.type] = components</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">const titleComponent = tags.title ? tags.title[0] : null</span><span class="s3">\n      </span><span class="s1">let title = ''</span><span class="s3">\n      </span><span class="s1">if (titleComponent) {</span><span class="s3">\n        </span><span class="s1">const { children } = titleComponent.props</span><span class="s3">\n        </span><span class="s1">title =</span><span class="s3">\n          </span><span class="s1">typeof children === 'string'</span><span class="s3">\n            </span><span class="s1">? children</span><span class="s3">\n            </span><span class="s1">: Array.isArray(children)</span><span class="s3">\n              </span><span class="s1">? children.join('')</span><span class="s3">\n              </span><span class="s1">: ''</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">if (title !== document.title) document.title = title</span><span class="s3">\n      </span><span class="s1">;['meta', 'base', 'link', 'style', 'script'].forEach((type) =&gt; {</span><span class="s3">\n        </span><span class="s1">updateElements(type, tags[type] || [])</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;initHeadManager&quot;</span><span class="s0">,</span><span class="s1">&quot;isEqualNode&quot;</span><span class="s0">,</span><span class="s1">&quot;reactElementToDOM&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;el&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;createElement&quot;</span><span class="s0">,</span><span class="s1">&quot;setAttributesFromProps&quot;</span><span class="s0">,</span><span class="s1">&quot;children&quot;</span><span class="s0">,</span><span class="s1">&quot;dangerouslySetInnerHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;innerHTML&quot;</span><span class="s0">,</span><span class="s1">&quot;__html&quot;</span><span class="s0">,</span><span class="s1">&quot;textContent&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;oldTag&quot;</span><span class="s0">,</span><span class="s1">&quot;newTag&quot;</span><span class="s0">,</span><span class="s1">&quot;HTMLElement&quot;</span><span class="s0">,</span><span class="s1">&quot;nonce&quot;</span><span class="s0">,</span><span class="s1">&quot;getAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneTag&quot;</span><span class="s0">,</span><span class="s1">&quot;cloneNode&quot;</span><span class="s0">,</span><span class="s1">&quot;setAttribute&quot;</span><span class="s0">,</span><span class="s1">&quot;updateElements&quot;</span><span class="s0">,</span><span class="s1">&quot;components&quot;</span><span class="s0">,</span><span class="s1">&quot;headEl&quot;</span><span class="s0">,</span><span class="s1">&quot;querySelector&quot;</span><span class="s0">,</span><span class="s1">&quot;oldTags&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;querySelectorAll&quot;</span><span class="s0">,</span><span class="s1">&quot;metaCharset&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;newTags&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;component&quot;</span><span class="s0">,</span><span class="s1">&quot;isNew&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;parentNode&quot;</span><span class="s0">,</span><span class="s1">&quot;removeChild&quot;</span><span class="s0">,</span><span class="s1">&quot;tagName&quot;</span><span class="s0">,</span><span class="s1">&quot;toLowerCase&quot;</span><span class="s0">,</span><span class="s1">&quot;prepend&quot;</span><span class="s0">,</span><span class="s1">&quot;appendChild&quot;</span><span class="s0">,</span><span class="s1">&quot;mountedInstances&quot;</span><span class="s0">,</span><span class="s1">&quot;updateHead&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;tags&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;h&quot;</span><span class="s0">,</span><span class="s1">&quot;href&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;titleComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>