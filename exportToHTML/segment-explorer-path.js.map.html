<html>
<head>
<title>segment-explorer-path.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
segment-explorer-path.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/app-render/segment-explorer-path.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { LoaderTree } from '../lib/app-dir-module'</span><span class="s3">\n\n</span><span class="s1">export const BUILTIN_PREFIX = '__next_builtin__'</span><span class="s3">\n\n</span><span class="s1">const nextInternalPrefixRegex =</span><span class="s3">\n  </span><span class="s1">/^(.*[</span><span class="s3">\\\\</span><span class="s1">/])?next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]client[</span><span class="s3">\\\\</span><span class="s1">/]components[</span><span class="s3">\\\\</span><span class="s1">/]builtin[</span><span class="s3">\\\\</span><span class="s1">/]/</span><span class="s3">\n\n</span><span class="s1">export function normalizeConventionFilePath(</span><span class="s3">\n  </span><span class="s1">projectDir: string,</span><span class="s3">\n  </span><span class="s1">conventionPath: string | undefined</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// Turbopack project path is formed as: </span><span class="s3">\&quot;</span><span class="s1">&lt;project root&gt;/&lt;cwd&gt;</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n  </span><span class="s1">// When project root is not the working directory, we can extract the relative project root path.</span><span class="s3">\n  </span><span class="s1">// This is mostly used for running Next.js inside a monorepo.</span><span class="s3">\n  </span><span class="s1">const cwd = process.env.NEXT_RUNTIME === 'edge' ? '' : process.cwd()</span><span class="s3">\n  </span><span class="s1">const relativeProjectRoot = projectDir.replace(cwd, '')</span><span class="s3">\n\n  </span><span class="s1">let relativePath = (conventionPath || '')</span><span class="s3">\n    </span><span class="s1">// remove turbopack [project] prefix</span><span class="s3">\n    </span><span class="s1">.replace(/^</span><span class="s3">\\</span><span class="s1">[project</span><span class="s3">\\</span><span class="s1">]/, '')</span><span class="s3">\n    </span><span class="s1">// remove turbopack relative project path, everything after [project] and before the working directory.</span><span class="s3">\n    </span><span class="s1">.replace(relativeProjectRoot, '')</span><span class="s3">\n    </span><span class="s1">// remove the project root from the path</span><span class="s3">\n    </span><span class="s1">.replace(projectDir, '')</span><span class="s3">\n    </span><span class="s1">// remove cwd prefix</span><span class="s3">\n    </span><span class="s1">.replace(cwd, '')</span><span class="s3">\n    </span><span class="s1">// remove /(src/)?app/ dir prefix</span><span class="s3">\n    </span><span class="s1">.replace(/^([</span><span class="s3">\\\\</span><span class="s1">/])*(src[</span><span class="s3">\\\\</span><span class="s1">/])?app[</span><span class="s3">\\\\</span><span class="s1">/]/, '')</span><span class="s3">\n\n  </span><span class="s1">// If it's internal file only keep the filename, strip nextjs internal prefix</span><span class="s3">\n  </span><span class="s1">if (nextInternalPrefixRegex.test(relativePath)) {</span><span class="s3">\n    </span><span class="s1">relativePath = relativePath.replace(nextInternalPrefixRegex, '')</span><span class="s3">\n    </span><span class="s1">// Add a special prefix to let segment explorer know it's a built-in component</span><span class="s3">\n    </span><span class="s1">relativePath = `${BUILTIN_PREFIX}${relativePath}`</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return relativePath.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// if a filepath is a builtin file. e.g.</span><span class="s3">\n</span><span class="s1">// .../project/node_modules/next/dist/client/components/builtin/global-error.js -&gt; true</span><span class="s3">\n</span><span class="s1">// .../project/app/global-error.js -&gt; false</span><span class="s3">\n</span><span class="s1">export const isNextjsBuiltinFilePath = (filePath: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">return nextInternalPrefixRegex.test(filePath)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const BOUNDARY_SUFFIX = '@boundary'</span><span class="s3">\n</span><span class="s1">export function normalizeBoundaryFilename(filename: string) {</span><span class="s3">\n  </span><span class="s1">return filename</span><span class="s3">\n    </span><span class="s1">.replace(new RegExp(`^${BUILTIN_PREFIX}`), '')</span><span class="s3">\n    </span><span class="s1">.replace(new RegExp(`${BOUNDARY_SUFFIX}$`), '')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const BOUNDARY_PREFIX = 'boundary:'</span><span class="s3">\n</span><span class="s1">export function isBoundaryFile(fileType: string) {</span><span class="s3">\n  </span><span class="s1">return fileType.startsWith(BOUNDARY_PREFIX)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// if a filename is a builtin file.</span><span class="s3">\n</span><span class="s1">// __next_builtin__global-error.js -&gt; true</span><span class="s3">\n</span><span class="s1">// page.js -&gt; false</span><span class="s3">\n</span><span class="s1">export function isBuiltinBoundaryFile(fileType: string) {</span><span class="s3">\n  </span><span class="s1">return fileType.startsWith(BUILTIN_PREFIX)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getBoundaryOriginFileType(fileType: string) {</span><span class="s3">\n  </span><span class="s1">return fileType.replace(BOUNDARY_PREFIX, '')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getConventionPathByType(</span><span class="s3">\n  </span><span class="s1">tree: LoaderTree,</span><span class="s3">\n  </span><span class="s1">dir: string,</span><span class="s3">\n  </span><span class="s1">conventionType:</span><span class="s3">\n    </span><span class="s1">| 'layout'</span><span class="s3">\n    </span><span class="s1">| 'template'</span><span class="s3">\n    </span><span class="s1">| 'page'</span><span class="s3">\n    </span><span class="s1">| 'not-found'</span><span class="s3">\n    </span><span class="s1">| 'error'</span><span class="s3">\n    </span><span class="s1">| 'loading'</span><span class="s3">\n    </span><span class="s1">| 'forbidden'</span><span class="s3">\n    </span><span class="s1">| 'unauthorized'</span><span class="s3">\n    </span><span class="s1">| 'defaultPage'</span><span class="s3">\n    </span><span class="s1">| 'global-error'</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const modules = tree[2]</span><span class="s3">\n  </span><span class="s1">const conventionPath = modules[conventionType]</span><span class="s3">\n    </span><span class="s1">? modules[conventionType][1]</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n  </span><span class="s1">if (conventionPath) {</span><span class="s3">\n    </span><span class="s1">return normalizeConventionFilePath(dir, conventionPath)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;BOUNDARY_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;BOUNDARY_SUFFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILTIN_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;getBoundaryOriginFileType&quot;</span><span class="s0">,</span><span class="s1">&quot;getConventionPathByType&quot;</span><span class="s0">,</span><span class="s1">&quot;isBoundaryFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuiltinBoundaryFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextjsBuiltinFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeBoundaryFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeConventionFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;nextInternalPrefixRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;projectDir&quot;</span><span class="s0">,</span><span class="s1">&quot;conventionPath&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeProjectRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;relativePath&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;filePath&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;fileType&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;tree&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;conventionType&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;;;;;;;;;IAqDaA,eAAe;eAAfA;;IAPAC,eAAe;eAAfA;;IA5CAC,cAAc;eAAdA;;IA+DGC,yBAAyB;eAAzBA;;IAIAC,uBAAuB;eAAvBA;;IAfAC,cAAc;eAAdA;;IAOAC,qBAAqB;eAArBA;;IAnBHC,uBAAuB;eAAvBA;;IAKGC,yBAAyB;eAAzBA;;IAxCAC,2BAA2B;eAA3BA;;;AALT,MAAMP,iBAAiB;AAE9B,MAAMQ,0BACJ;AAEK,SAASD,4BACdE,UAAkB,EAClBC,cAAkC;IAElC,+DAA+D;IAC/D,iGAAiG;IACjG,6DAA6D;IAC7D,MAAMC,MAAMC,QAAQC,GAAG,CAACC,YAAY,KAAK,SAAS,KAAKF,QAAQD,GAAG;IAClE,MAAMI,sBAAsBN,WAAWO,OAAO,CAACL,KAAK;IAEpD,IAAIM,eAAe,AAACP,CAAAA,kBAAkB,EAAC,CACrC,oCAAoC;KACnCM,OAAO,CAAC,gBAAgB,GACzB,uGAAuG;KACtGA,OAAO,CAACD,qBAAqB,GAC9B,wCAAwC;KACvCC,OAAO,CAACP,YAAY,GACrB,oBAAoB;KACnBO,OAAO,CAACL,KAAK,GACd,iCAAiC;KAChCK,OAAO,CAAC,gCAAgC;IAE3C,6EAA6E;IAC7E,IAAIR,wBAAwBU,IAAI,CAACD,eAAe;QAC9CA,eAAeA,aAAaD,OAAO,CAACR,yBAAyB;QAC7D,8EAA8E;QAC9ES,eAAe,GAAGjB,iBAAiBiB,cAAc;IACnD;IAEA,OAAOA,aAAaD,OAAO,CAAC,OAAO;AACrC;AAKO,MAAMX,0BAA0B,CAACc;IACtC,OAAOX,wBAAwBU,IAAI,CAACC;AACtC;AAEO,MAAMpB,kBAAkB;AACxB,SAASO,0BAA0Bc,QAAgB;IACxD,OAAOA,SACJJ,OAAO,CAAC,IAAIK,OAAO,CAAC,CAAC,EAAErB,gBAAgB,GAAG,IAC1CgB,OAAO,CAAC,IAAIK,OAAO,GAAGtB,gBAAgB,CAAC,CAAC,GAAG;AAChD;AAEO,MAAMD,kBAAkB;AACxB,SAASK,eAAemB,QAAgB;IAC7C,OAAOA,SAASC,UAAU,CAACzB;AAC7B;AAKO,SAASM,sBAAsBkB,QAAgB;IACpD,OAAOA,SAASC,UAAU,CAACvB;AAC7B;AAEO,SAASC,0BAA0BqB,QAAgB;IACxD,OAAOA,SAASN,OAAO,CAAClB,iBAAiB;AAC3C;AAEO,SAASI,wBACdsB,IAAgB,EAChBC,GAAW,EACXC,cAUkB;IAElB,MAAMC,UAAUH,IAAI,CAAC,EAAE;IACvB,MAAMd,iBAAiBiB,OAAO,CAACD,eAAe,GAC1CC,OAAO,CAACD,eAAe,CAAC,EAAE,GAC1BE;IACJ,IAAIlB,gBAAgB;QAClB,OAAOH,4BAA4BkB,KAAKf;IAC1C;IACA,OAAOkB;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>