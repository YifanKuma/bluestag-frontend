<html>
<head>
<title>createExtensionPattern.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
createExtensionPattern.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;createExtensionPattern.js&quot;</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_constants&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;RFC3966_EXTN_PREFIX&quot;</span><span class="s0">,</span><span class="s1">&quot;getExtensionDigitsPattern&quot;</span><span class="s0">,</span><span class="s1">&quot;maxLength&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;VALID_DIGITS&quot;</span><span class="s0">,</span><span class="s1">&quot;createExtensionPattern&quot;</span><span class="s0">,</span><span class="s1">&quot;purpose&quot;</span><span class="s0">,</span><span class="s1">&quot;extLimitAfterExplicitLabel&quot;</span><span class="s0">,</span><span class="s1">&quot;extLimitAfterLikelyLabel&quot;</span><span class="s0">,</span><span class="s1">&quot;extLimitAfterAmbiguousChar&quot;</span><span class="s0">,</span><span class="s1">&quot;extLimitWhenNotSure&quot;</span><span class="s0">,</span><span class="s1">&quot;possibleSeparatorsBetweenNumberAndExtLabel&quot;</span><span class="s0">,</span><span class="s1">&quot;possibleCharsAfterExtLabel&quot;</span><span class="s0">,</span><span class="s1">&quot;optionalExtnSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;explicitExtLabels&quot;</span><span class="s0">,</span><span class="s1">&quot;ambiguousExtLabels&quot;</span><span class="s0">,</span><span class="s1">&quot;ambiguousSeparator&quot;</span><span class="s0">,</span><span class="s1">&quot;possibleSeparatorsNumberExtLabelNoComma&quot;</span><span class="s0">,</span><span class="s1">&quot;autoDiallingAndExtLabelsFound&quot;</span><span class="s0">,</span><span class="s1">&quot;rfcExtn&quot;</span><span class="s0">,</span><span class="s1">&quot;explicitExtn&quot;</span><span class="s0">,</span><span class="s1">&quot;ambiguousExtn&quot;</span><span class="s0">,</span><span class="s1">&quot;americanStyleExtnWithSuffix&quot;</span><span class="s0">,</span><span class="s1">&quot;autoDiallingExtn&quot;</span><span class="s0">,</span><span class="s1">&quot;onlyCommasExtn&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../source/helpers/extension/createExtensionPattern.js&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { VALID_DIGITS } from '../../constants.js'</span><span class="s3">\r\n\r\n</span><span class="s1">// The RFC 3966 format for extensions.</span><span class="s3">\r\n</span><span class="s1">const RFC3966_EXTN_PREFIX = ';ext='</span><span class="s3">\r\n\r\n</span><span class="s1">/**</span><span class="s3">\r\n </span><span class="s1">* Helper method for constructing regular expressions for parsing. Creates</span><span class="s3">\r\n </span><span class="s1">* an expression that captures up to max_length digits.</span><span class="s3">\r\n </span><span class="s1">* @return {string} RegEx pattern to capture extension digits.</span><span class="s3">\r\n </span><span class="s1">*/</span><span class="s3">\r\n</span><span class="s1">const getExtensionDigitsPattern = (maxLength) =&gt; `([${VALID_DIGITS}]{1,${maxLength}})`</span><span class="s3">\r\n\r\n</span><span class="s1">/**</span><span class="s3">\r\n </span><span class="s1">* Helper initialiser method to create the regular-expression pattern to match</span><span class="s3">\r\n </span><span class="s1">* extensions.</span><span class="s3">\r\n </span><span class="s1">* Copy-pasted from Google's `libphonenumber`:</span><span class="s3">\r\n </span><span class="s1">* https://github.com/google/libphonenumber/blob/55b2646ec9393f4d3d6661b9c82ef9e258e8b829/javascript/i18n/phonenumbers/phonenumberutil.js#L759-L766</span><span class="s3">\r\n </span><span class="s1">* @return {string} RegEx pattern to capture extensions.</span><span class="s3">\r\n </span><span class="s1">*/</span><span class="s3">\r\n</span><span class="s1">export default function createExtensionPattern(purpose) {</span><span class="s3">\r\n\t</span><span class="s1">// We cap the maximum length of an extension based on the ambiguity of the way</span><span class="s3">\r\n\t</span><span class="s1">// the extension is prefixed. As per ITU, the officially allowed length for</span><span class="s3">\r\n\t</span><span class="s1">// extensions is actually 40, but we don't support this since we haven't seen real</span><span class="s3">\r\n\t</span><span class="s1">// examples and this introduces many false interpretations as the extension labels</span><span class="s3">\r\n\t</span><span class="s1">// are not standardized.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var extLimitAfterExplicitLabel = '20';</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var extLimitAfterLikelyLabel = '15';</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var extLimitAfterAmbiguousChar = '9';</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var extLimitWhenNotSure = '6';</span><span class="s3">\r\n\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var possibleSeparatorsBetweenNumberAndExtLabel = </span><span class="s3">\&quot;</span><span class="s1">[ </span><span class="s3">\\</span><span class="s1">u00A0</span><span class="s3">\\\\</span><span class="s1">t,]*</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">// Optional full stop (.) or colon, followed by zero or more spaces/tabs/commas.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var possibleCharsAfterExtLabel = </span><span class="s3">\&quot;</span><span class="s1">[:</span><span class="s3">\\\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">uFF0E]?[ </span><span class="s3">\\</span><span class="s1">u00A0</span><span class="s3">\\\\</span><span class="s1">t,-]*</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var optionalExtnSuffix = </span><span class="s3">\&quot;</span><span class="s1">#?</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\r\n\t</span><span class="s1">// Here the extension is called out in more explicit way, i.e mentioning it obvious</span><span class="s3">\r\n\t</span><span class="s1">// patterns like </span><span class="s3">\&quot;</span><span class="s1">ext.</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var explicitExtLabels =</span><span class="s3">\r\n\t  \&quot;</span><span class="s1">(?:e?xt(?:ensi(?:o</span><span class="s3">\\</span><span class="s1">u0301?|</span><span class="s3">\\</span><span class="s1">u00F3))?n?|</span><span class="s3">\\</span><span class="s1">uFF45?</span><span class="s3">\\</span><span class="s1">uFF58</span><span class="s3">\\</span><span class="s1">uFF54</span><span class="s3">\\</span><span class="s1">uFF4E?|</span><span class="s3">\\</span><span class="s1">u0434</span><span class="s3">\\</span><span class="s1">u043E</span><span class="s3">\\</span><span class="s1">u0431|anexo)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">// One-character symbols that can be used to indicate an extension, and less</span><span class="s3">\r\n\t</span><span class="s1">// commonly used or more ambiguous extension labels.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var ambiguousExtLabels = </span><span class="s3">\&quot;</span><span class="s1">(?:[x</span><span class="s3">\\</span><span class="s1">uFF58#</span><span class="s3">\\</span><span class="s1">uFF03~</span><span class="s3">\\</span><span class="s1">uFF5E]|int|</span><span class="s3">\\</span><span class="s1">uFF49</span><span class="s3">\\</span><span class="s1">uFF4E</span><span class="s3">\\</span><span class="s1">uFF54)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">// When extension is not separated clearly.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var ambiguousSeparator = </span><span class="s3">\&quot;</span><span class="s1">[- ]+</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">// This is the same as possibleSeparatorsBetweenNumberAndExtLabel, but not matching</span><span class="s3">\r\n\t</span><span class="s1">// comma as extension label may have it.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var possibleSeparatorsNumberExtLabelNoComma = </span><span class="s3">\&quot;</span><span class="s1">[ </span><span class="s3">\\</span><span class="s1">u00A0</span><span class="s3">\\\\</span><span class="s1">t]*</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\t</span><span class="s1">// </span><span class="s3">\&quot;</span><span class="s1">,,</span><span class="s3">\&quot; </span><span class="s1">is commonly used for auto dialling the extension when connected. First</span><span class="s3">\r\n\t</span><span class="s1">// comma is matched through possibleSeparatorsBetweenNumberAndExtLabel, so we do</span><span class="s3">\r\n\t</span><span class="s1">// not repeat it here. Semi-colon works in Iphone and Android also to pop up a</span><span class="s3">\r\n\t</span><span class="s1">// button with the extension number following.</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var autoDiallingAndExtLabelsFound = </span><span class="s3">\&quot;</span><span class="s1">(?:,{2}|;)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var rfcExtn = RFC3966_EXTN_PREFIX</span><span class="s3">\r\n\t     </span><span class="s1">+ getExtensionDigitsPattern(extLimitAfterExplicitLabel);</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var explicitExtn = possibleSeparatorsBetweenNumberAndExtLabel + explicitExtLabels</span><span class="s3">\r\n\t     </span><span class="s1">+ possibleCharsAfterExtLabel</span><span class="s3">\r\n\t     </span><span class="s1">+ getExtensionDigitsPattern(extLimitAfterExplicitLabel)</span><span class="s3">\r\n\t     </span><span class="s1">+ optionalExtnSuffix;</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var ambiguousExtn = possibleSeparatorsBetweenNumberAndExtLabel + ambiguousExtLabels</span><span class="s3">\r\n\t     </span><span class="s1">+ possibleCharsAfterExtLabel</span><span class="s3">\r\n\t</span><span class="s1">+ getExtensionDigitsPattern(extLimitAfterAmbiguousChar)</span><span class="s3">\r\n\t</span><span class="s1">+ optionalExtnSuffix;</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var americanStyleExtnWithSuffix = ambiguousSeparator</span><span class="s3">\r\n\t</span><span class="s1">+ getExtensionDigitsPattern(extLimitWhenNotSure) + </span><span class="s3">\&quot;</span><span class="s1">#</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\r\n\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var autoDiallingExtn = possibleSeparatorsNumberExtLabelNoComma</span><span class="s3">\r\n\t     </span><span class="s1">+ autoDiallingAndExtLabelsFound + possibleCharsAfterExtLabel</span><span class="s3">\r\n\t     </span><span class="s1">+ getExtensionDigitsPattern(extLimitAfterLikelyLabel)</span><span class="s3">\r\n\t</span><span class="s1">+ optionalExtnSuffix;</span><span class="s3">\r\n\t</span><span class="s1">/** @type {string} */</span><span class="s3">\r\n\t</span><span class="s1">var onlyCommasExtn = possibleSeparatorsNumberExtLabelNoComma</span><span class="s3">\r\n\t    </span><span class="s1">+ </span><span class="s3">\&quot;</span><span class="s1">(?:,)+</span><span class="s3">\&quot; </span><span class="s1">+ possibleCharsAfterExtLabel</span><span class="s3">\r\n\t    </span><span class="s1">+ getExtensionDigitsPattern(extLimitAfterAmbiguousChar)</span><span class="s3">\r\n\t    </span><span class="s1">+ optionalExtnSuffix;</span><span class="s3">\r\n\r\n\t</span><span class="s1">// The first regular expression covers RFC 3966 format, where the extension is added</span><span class="s3">\r\n\t</span><span class="s1">// using </span><span class="s3">\&quot;</span><span class="s1">;ext=</span><span class="s3">\&quot;</span><span class="s1">. The second more generic where extension is mentioned with explicit</span><span class="s3">\r\n\t</span><span class="s1">// labels like </span><span class="s3">\&quot;</span><span class="s1">ext:</span><span class="s3">\&quot;</span><span class="s1">. In both the above cases we allow more numbers in extension than</span><span class="s3">\r\n\t</span><span class="s1">// any other extension labels. The third one captures when single character extension</span><span class="s3">\r\n\t</span><span class="s1">// labels or less commonly used labels are used. In such cases we capture fewer</span><span class="s3">\r\n\t</span><span class="s1">// extension digits in order to reduce the chance of falsely interpreting two</span><span class="s3">\r\n\t</span><span class="s1">// numbers beside each other as a number + extension. The fourth one covers the</span><span class="s3">\r\n\t</span><span class="s1">// special case of American numbers where the extension is written with a hash</span><span class="s3">\r\n\t</span><span class="s1">// at the end, such as </span><span class="s3">\&quot;</span><span class="s1">- 503#</span><span class="s3">\&quot;</span><span class="s1">. The fifth one is exclusively for extension</span><span class="s3">\r\n\t</span><span class="s1">// autodialling formats which are used when dialling and in this case we accept longer</span><span class="s3">\r\n\t</span><span class="s1">// extensions. The last one is more liberal on the number of commas that acts as</span><span class="s3">\r\n\t</span><span class="s1">// extension labels, so we have a strict cap on the number of digits in such extensions.</span><span class="s3">\r\n\t</span><span class="s1">return rfcExtn + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;\r\n\t       </span><span class="s1">+ explicitExtn + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;\r\n\t       </span><span class="s1">+ ambiguousExtn + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;\r\n\t       </span><span class="s1">+ americanStyleExtnWithSuffix + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;\r\n\t       </span><span class="s1">+ autoDiallingExtn + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot;\r\n\t       </span><span class="s1">+ onlyCommasExtn;</span><span class="s3">\r\n</span><span class="s1">}&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA;AACA,IAAMC,mBAAmB,GAAG,OAAO;;AAEnC;AACA;AACA;AACA;AACA;AACA,IAAMC,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAIC,SAAS;EAAA,YAAAC,MAAA,CAAUC,uBAAY,UAAAD,MAAA,CAAOD,SAAS;AAAA,CAAI;;AAEtF;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASG,sBAAsBA,CAACC,OAAO,EAAE;EACvD;EACA;EACA;EACA;EACA;EACA;EACA,IAAIC,0BAA0B,GAAG,IAAI;EACrC;EACA,IAAIC,wBAAwB,GAAG,IAAI;EACnC;EACA,IAAIC,0BAA0B,GAAG,GAAG;EACpC;EACA,IAAIC,mBAAmB,GAAG,GAAG;;EAE7B;EACA,IAAIC,0CAA0C,GAAG,cAAgB;EACjE;EACA;EACA,IAAIC,0BAA0B,GAAG,4BAA8B;EAC/D;EACA,IAAIC,kBAAkB,GAAG,IAAI;;EAE7B;EACA;EACA;EACA,IAAIC,iBAAiB,GACnB,0FAA4F;EAC9F;EACA;EACA;EACA,IAAIC,kBAAkB,GAAG,oDAAoD;EAC7E;EACA;EACA,IAAIC,kBAAkB,GAAG,OAAO;EAChC;EACA;EACA;EACA,IAAIC,uCAAuC,GAAG,aAAe;EAC7D;EACA;EACA;EACA;EACA;EACA,IAAIC,6BAA6B,GAAG,YAAY;;EAEhD;EACA,IAAIC,OAAO,GAAGnB,mBAAmB,GAC1BC,yBAAyB,CAACM,0BAA0B,CAAC;EAC5D;EACA,IAAIa,YAAY,GAAGT,0CAA0C,GAAGG,iBAAiB,GAC1EF,0BAA0B,GAC1BX,yBAAyB,CAACM,0BAA0B,CAAC,GACrDM,kBAAkB;EACzB;EACA,IAAIQ,aAAa,GAAGV,0CAA0C,GAAGI,kBAAkB,GAC5EH,0BAA0B,GAC/BX,yBAAyB,CAACQ,0BAA0B,CAAC,GACrDI,kBAAkB;EACpB;EACA,IAAIS,2BAA2B,GAAGN,kBAAkB,GAClDf,yBAAyB,CAACS,mBAAmB,CAAC,GAAG,GAAG;;EAEtD;EACA,IAAIa,gBAAgB,GAAGN,uCAAuC,GACvDC,6BAA6B,GAAGN,0BAA0B,GAC1DX,yBAAyB,CAACO,wBAAwB,CAAC,GACxDK,kBAAkB;EACpB;EACA,IAAIW,cAAc,GAAGP,uCAAuC,GACtD,QAAQ,GAAGL,0BAA0B,GACrCX,yBAAyB,CAACQ,0BAA0B,CAAC,GACrDI,kBAAkB;;EAExB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,OAAOM,OAAO,GAAG,GAAG,GACXC,YAAY,GAAG,GAAG,GAClBC,aAAa,GAAG,GAAG,GACnBC,2BAA2B,GAAG,GAAG,GACjCC,gBAAgB,GAAG,GAAG,GACtBC,cAAc;AACxB&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[]}</span></pre>
</body>
</html>