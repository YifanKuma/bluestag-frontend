<html>
<head>
<title>middleware-testing-utils.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
middleware-testing-utils.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/experimental/testing/server/middleware-testing-utils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { IncomingHttpHeaders } from 'http'</span><span class="s3">\n</span><span class="s1">import { getMiddlewareMatchers } from '../../../build/analysis/get-page-static-info'</span><span class="s3">\n</span><span class="s1">import { getMiddlewareRouteMatcher } from '../../../shared/lib/router/utils/middleware-route-matcher'</span><span class="s3">\n</span><span class="s1">import type { NextConfig } from '../../../server/config-shared'</span><span class="s3">\n</span><span class="s1">import { parseUrl } from '../../../lib/url'</span><span class="s3">\n</span><span class="s1">import { constructRequest } from './utils'</span><span class="s3">\n</span><span class="s1">import type { MiddlewareConfigMatcherInput } from '../../../build/segment-config/middleware/middleware-config'</span><span class="s3">\n\n</span><span class="s1">export interface MiddlewareSourceConfig {</span><span class="s3">\n  </span><span class="s1">matcher?: MiddlewareConfigMatcherInput</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Checks whether the middleware config will match the provide URL and request</span><span class="s3">\n </span><span class="s1">* information such as headers and cookies. This function is useful for</span><span class="s3">\n </span><span class="s1">* unit tests to assert that middleware is matching (and therefore executing)</span><span class="s3">\n </span><span class="s1">* only when it should be.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function unstable_doesMiddlewareMatch({</span><span class="s3">\n  </span><span class="s1">config,</span><span class="s3">\n  </span><span class="s1">url,</span><span class="s3">\n  </span><span class="s1">headers,</span><span class="s3">\n  </span><span class="s1">cookies,</span><span class="s3">\n  </span><span class="s1">nextConfig,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">config: MiddlewareSourceConfig</span><span class="s3">\n  </span><span class="s1">url: string</span><span class="s3">\n  </span><span class="s1">headers?: IncomingHttpHeaders</span><span class="s3">\n  </span><span class="s1">cookies?: Record&lt;string, string&gt;</span><span class="s3">\n  </span><span class="s1">nextConfig?: NextConfig</span><span class="s3">\n</span><span class="s1">}): boolean {</span><span class="s3">\n  </span><span class="s1">if (!config.matcher) {</span><span class="s3">\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const matchers = getMiddlewareMatchers(config.matcher, nextConfig ?? {})</span><span class="s3">\n  </span><span class="s1">const routeMatchFn = getMiddlewareRouteMatcher(matchers)</span><span class="s3">\n  </span><span class="s1">const { pathname, searchParams = new URLSearchParams() } = parseUrl(url) || {}</span><span class="s3">\n  </span><span class="s1">const request = constructRequest({ url, headers, cookies })</span><span class="s3">\n  </span><span class="s1">return routeMatchFn(pathname, request, Object.fromEntries(searchParams))</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;unstable_doesMiddlewareMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;getMiddlewareMatchers&quot;</span><span class="s0">,</span><span class="s1">&quot;routeMatchFn&quot;</span><span class="s0">,</span><span class="s1">&quot;getMiddlewareRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;searchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;URLSearchParams&quot;</span><span class="s0">,</span><span class="s1">&quot;parseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;constructRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAkBgBA;;;eAAAA;;;mCAjBsB;wCACI;qBAEjB;uBACQ;AAa1B,SAASA,6BAA6B,EAC3CC,MAAM,EACNC,GAAG,EACHC,OAAO,EACPC,OAAO,EACPC,UAAU,EAOX;IACC,IAAI,CAACJ,OAAOK,OAAO,EAAE;QACnB,OAAO;IACT;IACA,MAAMC,WAAWC,IAAAA,wCAAqB,EAACP,OAAOK,OAAO,EAAED,cAAc,CAAC;IACtE,MAAMI,eAAeC,IAAAA,iDAAyB,EAACH;IAC/C,MAAM,EAAEI,QAAQ,EAAEC,eAAe,IAAIC,iBAAiB,EAAE,GAAGC,IAAAA,aAAQ,EAACZ,QAAQ,CAAC;IAC7E,MAAMa,UAAUC,IAAAA,uBAAgB,EAAC;QAAEd;QAAKC;QAASC;IAAQ;IACzD,OAAOK,aAAaE,UAAUI,SAASE,OAAOC,WAAW,CAACN;AAC5D&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>