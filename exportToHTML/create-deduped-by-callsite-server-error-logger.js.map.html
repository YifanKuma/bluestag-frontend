<html>
<head>
<title>create-deduped-by-callsite-server-error-logger.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
create-deduped-by-callsite-server-error-logger.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/server/create-deduped-by-callsite-server-error-logger.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import * as React from 'react'</span><span class="s3">\n\n</span><span class="s1">const errorRef: { current: null | Error } = { current: null }</span><span class="s3">\n\n</span><span class="s1">// React.cache is currently only available in canary/experimental React channels.</span><span class="s3">\n</span><span class="s1">const cache =</span><span class="s3">\n  </span><span class="s1">typeof React.cache === 'function'</span><span class="s3">\n    </span><span class="s1">? React.cache</span><span class="s3">\n    </span><span class="s1">: (fn: (key: unknown) =&gt; void) =&gt; fn</span><span class="s3">\n\n</span><span class="s1">// When Cache Components is enabled, we record these as errors so that they</span><span class="s3">\n</span><span class="s1">// are captured by the dev overlay as it's more critical to fix these</span><span class="s3">\n</span><span class="s1">// when enabled.</span><span class="s3">\n</span><span class="s1">const logErrorOrWarn = process.env.__NEXT_CACHE_COMPONENTS</span><span class="s3">\n  </span><span class="s1">? console.error</span><span class="s3">\n  </span><span class="s1">: console.warn</span><span class="s3">\n\n</span><span class="s1">// We don't want to dedupe across requests.</span><span class="s3">\n</span><span class="s1">// The developer might've just attempted to fix the warning so we should warn again if it still happens.</span><span class="s3">\n</span><span class="s1">const flushCurrentErrorIfNew = cache(</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-unused-vars -- cache key</span><span class="s3">\n  </span><span class="s1">(key: unknown) =&gt; {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">logErrorOrWarn(errorRef.current)</span><span class="s3">\n    </span><span class="s1">} finally {</span><span class="s3">\n      </span><span class="s1">errorRef.current = null</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates a function that logs an error message that is deduped by the userland</span><span class="s3">\n </span><span class="s1">* callsite.</span><span class="s3">\n </span><span class="s1">* This requires no indirection between the call of this function and the userland</span><span class="s3">\n </span><span class="s1">* callsite i.e. there's only a single library frame above this.</span><span class="s3">\n </span><span class="s1">* Do not use on the Client where sourcemaps and ignore listing might be enabled.</span><span class="s3">\n </span><span class="s1">* Only use that for warnings need a fix independent of the callstack.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param getMessage</span><span class="s3">\n </span><span class="s1">* @returns</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createDedupedByCallsiteServerErrorLoggerDev&lt;Args extends any[]&gt;(</span><span class="s3">\n  </span><span class="s1">getMessage: (...args: Args) =&gt; Error</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return function logDedupedError(...args: Args) {</span><span class="s3">\n    </span><span class="s1">const message = getMessage(...args)</span><span class="s3">\n\n    </span><span class="s1">if (process.env.NODE_ENV !== 'production') {</span><span class="s3">\n      </span><span class="s1">const callStackFrames = new Error().stack?.split('</span><span class="s3">\\</span><span class="s1">n')</span><span class="s3">\n      </span><span class="s1">if (callStackFrames === undefined || callStackFrames.length &lt; 4) {</span><span class="s3">\n        </span><span class="s1">logErrorOrWarn(message)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">// Error:</span><span class="s3">\n        </span><span class="s1">//   logDedupedError</span><span class="s3">\n        </span><span class="s1">//   asyncApiBeingAccessedSynchronously</span><span class="s3">\n        </span><span class="s1">//   &lt;userland callsite&gt;</span><span class="s3">\n        </span><span class="s1">// TODO: This breaks if sourcemaps with ignore lists are enabled.</span><span class="s3">\n        </span><span class="s1">const key = callStackFrames[4]</span><span class="s3">\n        </span><span class="s1">errorRef.current = message</span><span class="s3">\n        </span><span class="s1">flushCurrentErrorIfNew(key)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">logErrorOrWarn(message)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;createDedupedByCallsiteServerErrorLoggerDev&quot;</span><span class="s0">,</span><span class="s1">&quot;errorRef&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;logErrorOrWarn&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_CACHE_COMPONENTS&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;flushCurrentErrorIfNew&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;getMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;logDedupedError&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;callStackFrames&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;stack&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAyCgBA;;;eAAAA;;;+DAzCO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvB,MAAMC,WAAsC;IAAEC,SAAS;AAAK;AAE5D,iFAAiF;AACjF,MAAMC,QACJ,OAAOC,OAAMD,KAAK,KAAK,aACnBC,OAAMD,KAAK,GACX,CAACE,KAA+BA;AAEtC,2EAA2E;AAC3E,qEAAqE;AACrE,gBAAgB;AAChB,MAAMC,iBAAiBC,QAAQC,GAAG,CAACC,uBAAuB,GACtDC,QAAQC,KAAK,GACbD,QAAQE,IAAI;AAEhB,2CAA2C;AAC3C,wGAAwG;AACxG,MAAMC,yBAAyBV,MAC7B,0EAA0E;AAC1E,CAACW;IACC,IAAI;QACFR,eAAeL,SAASC,OAAO;IACjC,SAAU;QACRD,SAASC,OAAO,GAAG;IACrB;AACF;AAcK,SAASF,4CACde,UAAoC;IAEpC,OAAO,SAASC,gBAAgB,GAAGC,IAAU;QAC3C,MAAMC,UAAUH,cAAcE;QAE9B,IAAIV,QAAQC,GAAG,CAACW,QAAQ,KAAK,cAAc;gBACjB;YAAxB,MAAMC,mBAAkB,SAAA,IAAIC,QAAQC,KAAK,qBAAjB,OAAmBC,KAAK,CAAC;YACjD,IAAIH,oBAAoBI,aAAaJ,gBAAgBK,MAAM,GAAG,GAAG;gBAC/DnB,eAAeY;YACjB,OAAO;gBACL,SAAS;gBACT,oBAAoB;gBACpB,uCAAuC;gBACvC,wBAAwB;gBACxB,iEAAiE;gBACjE,MAAMJ,MAAMM,eAAe,CAAC,EAAE;gBAC9BnB,SAASC,OAAO,GAAGgB;gBACnBL,uBAAuBC;YACzB;QACF,OAAO;YACLR,eAAeY;QACjB;IACF;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>