<html>
<head>
<title>next-trace-entrypoints-plugin.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
next-trace-entrypoints-plugin.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/build/webpack/plugins/next-trace-entrypoints-plugin.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import nodePath from 'path'</span><span class="s3">\n</span><span class="s1">import type { Span } from '../../../trace'</span><span class="s3">\n</span><span class="s1">import isError from '../../../lib/is-error'</span><span class="s3">\n</span><span class="s1">import { nodeFileTrace } from 'next/dist/compiled/@vercel/nft'</span><span class="s3">\n</span><span class="s1">import type { NodeFileTraceReasons } from 'next/dist/compiled/@vercel/nft'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">CLIENT_REFERENCE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">TRACE_OUTPUT_VERSION,</span><span class="s3">\n  </span><span class="s1">type CompilerNameValues,</span><span class="s3">\n</span><span class="s1">} from '../../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { webpack, sources } from 'next/dist/compiled/webpack/webpack'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NODE_ESM_RESOLVE_OPTIONS,</span><span class="s3">\n  </span><span class="s1">NODE_RESOLVE_OPTIONS,</span><span class="s3">\n</span><span class="s1">} from '../../webpack-config'</span><span class="s3">\n</span><span class="s1">import type { NextConfigComplete } from '../../../server/config-shared'</span><span class="s3">\n</span><span class="s1">import picomatch from 'next/dist/compiled/picomatch'</span><span class="s3">\n</span><span class="s1">import { getModuleBuildInfo } from '../loaders/get-module-build-info'</span><span class="s3">\n</span><span class="s1">import { getPageFilePath } from '../../entries'</span><span class="s3">\n</span><span class="s1">import { resolveExternal } from '../../handle-externals'</span><span class="s3">\n</span><span class="s1">import { isMetadataRouteFile } from '../../../lib/metadata/is-metadata-route'</span><span class="s3">\n</span><span class="s1">import { getCompilationSpan } from '../utils'</span><span class="s3">\n\n</span><span class="s1">const PLUGIN_NAME = 'TraceEntryPointsPlugin'</span><span class="s3">\n</span><span class="s1">export const TRACE_IGNORES = [</span><span class="s3">\n  </span><span class="s1">'**/*/next/dist/server/next.js',</span><span class="s3">\n  </span><span class="s1">'**/*/next/dist/bin/next',</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">const NOT_TRACEABLE = [</span><span class="s3">\n  </span><span class="s1">'.wasm',</span><span class="s3">\n  </span><span class="s1">'.png',</span><span class="s3">\n  </span><span class="s1">'.jpg',</span><span class="s3">\n  </span><span class="s1">'.jpeg',</span><span class="s3">\n  </span><span class="s1">'.gif',</span><span class="s3">\n  </span><span class="s1">'.webp',</span><span class="s3">\n  </span><span class="s1">'.avif',</span><span class="s3">\n  </span><span class="s1">'.ico',</span><span class="s3">\n  </span><span class="s1">'.bmp',</span><span class="s3">\n  </span><span class="s1">'.svg',</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">function getModuleFromDependency(</span><span class="s3">\n  </span><span class="s1">compilation: any,</span><span class="s3">\n  </span><span class="s1">dep: any</span><span class="s3">\n</span><span class="s1">): webpack.Module &amp; { resource?: string; request?: string } {</span><span class="s3">\n  </span><span class="s1">return compilation.moduleGraph.getModule(dep)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function getFilesMapFromReasons(</span><span class="s3">\n  </span><span class="s1">fileList: Set&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">reasons: NodeFileTraceReasons,</span><span class="s3">\n  </span><span class="s1">ignoreFn?: (file: string, parent?: string) =&gt; Boolean</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">// this uses the reasons tree to collect files specific to a</span><span class="s3">\n  </span><span class="s1">// certain parent allowing us to not have to trace each parent</span><span class="s3">\n  </span><span class="s1">// separately</span><span class="s3">\n  </span><span class="s1">const parentFilesMap = new Map&lt;string, Map&lt;string, { ignored: boolean }&gt;&gt;()</span><span class="s3">\n\n  </span><span class="s1">function propagateToParents(</span><span class="s3">\n    </span><span class="s1">parents: Set&lt;string&gt;,</span><span class="s3">\n    </span><span class="s1">file: string,</span><span class="s3">\n    </span><span class="s1">seen = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">for (const parent of parents || []) {</span><span class="s3">\n      </span><span class="s1">if (!seen.has(parent)) {</span><span class="s3">\n        </span><span class="s1">seen.add(parent)</span><span class="s3">\n        </span><span class="s1">let parentFiles = parentFilesMap.get(parent)</span><span class="s3">\n\n        </span><span class="s1">if (!parentFiles) {</span><span class="s3">\n          </span><span class="s1">parentFiles = new Map()</span><span class="s3">\n          </span><span class="s1">parentFilesMap.set(parent, parentFiles)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const ignored = Boolean(ignoreFn?.(file, parent))</span><span class="s3">\n        </span><span class="s1">parentFiles.set(file, { ignored })</span><span class="s3">\n\n        </span><span class="s1">const parentReason = reasons.get(parent)</span><span class="s3">\n\n        </span><span class="s1">if (parentReason?.parents) {</span><span class="s3">\n          </span><span class="s1">propagateToParents(parentReason.parents, file, seen)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const file of fileList!) {</span><span class="s3">\n    </span><span class="s1">const reason = reasons!.get(file)</span><span class="s3">\n    </span><span class="s1">const isInitial =</span><span class="s3">\n      </span><span class="s1">reason?.type.length === 1 &amp;&amp; reason.type.includes('initial')</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">!reason ||</span><span class="s3">\n      </span><span class="s1">!reason.parents ||</span><span class="s3">\n      </span><span class="s1">(isInitial &amp;&amp; reason.parents.size === 0)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">continue</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">propagateToParents(reason.parents, file)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return parentFilesMap</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface TurbotraceAction {</span><span class="s3">\n  </span><span class="s1">action: 'print' | 'annotate'</span><span class="s3">\n  </span><span class="s1">input: string[]</span><span class="s3">\n  </span><span class="s1">contextDirectory: string</span><span class="s3">\n  </span><span class="s1">processCwd: string</span><span class="s3">\n  </span><span class="s1">showAll?: boolean</span><span class="s3">\n  </span><span class="s1">memoryLimit?: number</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface BuildTraceContext {</span><span class="s3">\n  </span><span class="s1">entriesTrace?: {</span><span class="s3">\n    </span><span class="s1">action: TurbotraceAction</span><span class="s3">\n    </span><span class="s1">appDir: string</span><span class="s3">\n    </span><span class="s1">outputPath: string</span><span class="s3">\n    </span><span class="s1">depModArray: string[]</span><span class="s3">\n    </span><span class="s1">entryNameMap: Record&lt;string, string&gt;</span><span class="s3">\n    </span><span class="s1">absolutePathByEntryName: Record&lt;string, string&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">chunksTrace?: {</span><span class="s3">\n    </span><span class="s1">action: TurbotraceAction</span><span class="s3">\n    </span><span class="s1">outputPath: string</span><span class="s3">\n    </span><span class="s1">entryNameFilesMap: Record&lt;string, Array&lt;string&gt;&gt;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class TraceEntryPointsPlugin implements webpack.WebpackPluginInstance {</span><span class="s3">\n  </span><span class="s1">public buildTraceContext: BuildTraceContext = {}</span><span class="s3">\n\n  </span><span class="s1">private rootDir: string</span><span class="s3">\n  </span><span class="s1">private appDir: string | undefined</span><span class="s3">\n  </span><span class="s1">private pagesDir: string | undefined</span><span class="s3">\n  </span><span class="s1">private appDirEnabled?: boolean</span><span class="s3">\n  </span><span class="s1">private tracingRoot: string</span><span class="s3">\n  </span><span class="s1">private entryTraces: Map&lt;string, Map&lt;string, { bundled: boolean }&gt;&gt;</span><span class="s3">\n  </span><span class="s1">private traceIgnores: string[]</span><span class="s3">\n  </span><span class="s1">private esmExternals?: NextConfigComplete['experimental']['esmExternals']</span><span class="s3">\n  </span><span class="s1">private compilerType: CompilerNameValues</span><span class="s3">\n\n  </span><span class="s1">constructor({</span><span class="s3">\n    </span><span class="s1">rootDir,</span><span class="s3">\n    </span><span class="s1">appDir,</span><span class="s3">\n    </span><span class="s1">pagesDir,</span><span class="s3">\n    </span><span class="s1">compilerType,</span><span class="s3">\n    </span><span class="s1">appDirEnabled,</span><span class="s3">\n    </span><span class="s1">traceIgnores,</span><span class="s3">\n    </span><span class="s1">esmExternals,</span><span class="s3">\n    </span><span class="s1">outputFileTracingRoot,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">rootDir: string</span><span class="s3">\n    </span><span class="s1">compilerType: CompilerNameValues</span><span class="s3">\n    </span><span class="s1">appDir: string | undefined</span><span class="s3">\n    </span><span class="s1">pagesDir: string | undefined</span><span class="s3">\n    </span><span class="s1">appDirEnabled?: boolean</span><span class="s3">\n    </span><span class="s1">traceIgnores?: string[]</span><span class="s3">\n    </span><span class="s1">outputFileTracingRoot?: string</span><span class="s3">\n    </span><span class="s1">esmExternals?: NextConfigComplete['experimental']['esmExternals']</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">this.rootDir = rootDir</span><span class="s3">\n    </span><span class="s1">this.appDir = appDir</span><span class="s3">\n    </span><span class="s1">this.pagesDir = pagesDir</span><span class="s3">\n    </span><span class="s1">this.entryTraces = new Map()</span><span class="s3">\n    </span><span class="s1">this.esmExternals = esmExternals</span><span class="s3">\n    </span><span class="s1">this.appDirEnabled = appDirEnabled</span><span class="s3">\n    </span><span class="s1">this.traceIgnores = traceIgnores || []</span><span class="s3">\n    </span><span class="s1">this.tracingRoot = outputFileTracingRoot || rootDir</span><span class="s3">\n    </span><span class="s1">this.compilerType = compilerType</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Here we output all traced assets and webpack chunks to a</span><span class="s3">\n  </span><span class="s1">// ${page}.js.nft.json file</span><span class="s3">\n  </span><span class="s1">async createTraceAssets(compilation: webpack.Compilation, span: Span) {</span><span class="s3">\n    </span><span class="s1">const outputPath = compilation.outputOptions.path || ''</span><span class="s3">\n\n    </span><span class="s1">await span.traceChild('create-trace-assets').traceAsyncFn(async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const entryFilesMap = new Map&lt;any, Set&lt;string&gt;&gt;()</span><span class="s3">\n      </span><span class="s1">const chunksToTrace = new Set&lt;string&gt;()</span><span class="s3">\n      </span><span class="s1">const entryNameFilesMap = new Map&lt;string, Array&lt;string&gt;&gt;()</span><span class="s3">\n\n      </span><span class="s1">const isTraceable = (file: string) =&gt;</span><span class="s3">\n        </span><span class="s1">!NOT_TRACEABLE.some((suffix) =&gt; {</span><span class="s3">\n          </span><span class="s1">return file.endsWith(suffix)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">for (const entrypoint of compilation.entrypoints.values()) {</span><span class="s3">\n        </span><span class="s1">const entryFiles = new Set&lt;string&gt;()</span><span class="s3">\n\n        </span><span class="s1">for (const chunk of entrypoint</span><span class="s3">\n          </span><span class="s1">.getEntrypointChunk()</span><span class="s3">\n          </span><span class="s1">.getAllReferencedChunks()) {</span><span class="s3">\n          </span><span class="s1">for (const file of chunk.files) {</span><span class="s3">\n            </span><span class="s1">if (isTraceable(file)) {</span><span class="s3">\n              </span><span class="s1">const filePath = nodePath.join(outputPath, file)</span><span class="s3">\n              </span><span class="s1">chunksToTrace.add(filePath)</span><span class="s3">\n              </span><span class="s1">entryFiles.add(filePath)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">for (const file of chunk.auxiliaryFiles) {</span><span class="s3">\n            </span><span class="s1">if (isTraceable(file)) {</span><span class="s3">\n              </span><span class="s1">const filePath = nodePath.join(outputPath, file)</span><span class="s3">\n              </span><span class="s1">chunksToTrace.add(filePath)</span><span class="s3">\n              </span><span class="s1">entryFiles.add(filePath)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">entryFilesMap.set(entrypoint, entryFiles)</span><span class="s3">\n        </span><span class="s1">entryNameFilesMap.set(entrypoint.name || '', [...entryFiles])</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// startTrace existed and callable</span><span class="s3">\n      </span><span class="s1">this.buildTraceContext.chunksTrace = {</span><span class="s3">\n        </span><span class="s1">action: {</span><span class="s3">\n          </span><span class="s1">action: 'annotate',</span><span class="s3">\n          </span><span class="s1">input: [...chunksToTrace],</span><span class="s3">\n          </span><span class="s1">contextDirectory: this.tracingRoot,</span><span class="s3">\n          </span><span class="s1">processCwd: this.rootDir,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">outputPath,</span><span class="s3">\n        </span><span class="s1">entryNameFilesMap: Object.fromEntries(entryNameFilesMap),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// server compiler outputs to `server/chunks` so we traverse up</span><span class="s3">\n      </span><span class="s1">// one, but edge-server does not so don't for that one</span><span class="s3">\n      </span><span class="s1">const outputPrefix = this.compilerType === 'server' ? '../' : ''</span><span class="s3">\n\n      </span><span class="s1">for (const [entrypoint, entryFiles] of entryFilesMap) {</span><span class="s3">\n        </span><span class="s1">const traceOutputName = `${outputPrefix}${entrypoint.name}.js.nft.json`</span><span class="s3">\n        </span><span class="s1">const traceOutputPath = nodePath.dirname(</span><span class="s3">\n          </span><span class="s1">nodePath.join(outputPath, traceOutputName)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">// don't include the entry itself in the trace</span><span class="s3">\n        </span><span class="s1">entryFiles.delete(</span><span class="s3">\n          </span><span class="s1">nodePath.join(outputPath, `${outputPrefix}${entrypoint.name}.js`)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">if (entrypoint.name.startsWith('app/') &amp;&amp; this.appDir) {</span><span class="s3">\n          </span><span class="s1">const appDirRelativeEntryPath =</span><span class="s3">\n            </span><span class="s1">this.buildTraceContext.entriesTrace?.absolutePathByEntryName[</span><span class="s3">\n              </span><span class="s1">entrypoint.name</span><span class="s3">\n            </span><span class="s1">]?.replace(this.appDir, '')</span><span class="s3">\n\n          </span><span class="s1">const entryIsStaticMetadataRoute =</span><span class="s3">\n            </span><span class="s1">appDirRelativeEntryPath &amp;&amp;</span><span class="s3">\n            </span><span class="s1">isMetadataRouteFile(appDirRelativeEntryPath, [], true)</span><span class="s3">\n\n          </span><span class="s1">// Include the client reference manifest in the trace, but not for</span><span class="s3">\n          </span><span class="s1">// static metadata routes, for which we don't generate those.</span><span class="s3">\n          </span><span class="s1">if (!entryIsStaticMetadataRoute) {</span><span class="s3">\n            </span><span class="s1">entryFiles.add(</span><span class="s3">\n              </span><span class="s1">nodePath.join(</span><span class="s3">\n                </span><span class="s1">outputPath,</span><span class="s3">\n                </span><span class="s1">outputPrefix,</span><span class="s3">\n                </span><span class="s1">entrypoint.name.replace(/%5F/g, '_') +</span><span class="s3">\n                  </span><span class="s1">'_' +</span><span class="s3">\n                  </span><span class="s1">CLIENT_REFERENCE_MANIFEST +</span><span class="s3">\n                  </span><span class="s1">'.js'</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const finalFiles: string[] = []</span><span class="s3">\n\n        </span><span class="s1">await Promise.all(</span><span class="s3">\n          </span><span class="s1">[</span><span class="s3">\n            </span><span class="s1">...new Set([</span><span class="s3">\n              </span><span class="s1">...entryFiles,</span><span class="s3">\n              </span><span class="s1">...(this.entryTraces.get(entrypoint.name)?.keys() || []),</span><span class="s3">\n            </span><span class="s1">]),</span><span class="s3">\n          </span><span class="s1">].map(async (file) =&gt; {</span><span class="s3">\n            </span><span class="s1">const fileInfo = this.entryTraces.get(entrypoint.name)?.get(file)</span><span class="s3">\n\n            </span><span class="s1">const relativeFile = nodePath</span><span class="s3">\n              </span><span class="s1">.relative(traceOutputPath, file)</span><span class="s3">\n              </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n\n            </span><span class="s1">if (file) {</span><span class="s3">\n              </span><span class="s1">if (!fileInfo?.bundled) {</span><span class="s3">\n                </span><span class="s1">finalFiles.push(relativeFile)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">compilation.emitAsset(</span><span class="s3">\n          </span><span class="s1">traceOutputName,</span><span class="s3">\n          </span><span class="s1">new sources.RawSource(</span><span class="s3">\n            </span><span class="s1">JSON.stringify({</span><span class="s3">\n              </span><span class="s1">version: TRACE_OUTPUT_VERSION,</span><span class="s3">\n              </span><span class="s1">files: finalFiles,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">) as unknown as webpack.sources.RawSource</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">tapfinishModules(</span><span class="s3">\n    </span><span class="s1">compilation: webpack.Compilation,</span><span class="s3">\n    </span><span class="s1">traceEntrypointsPluginSpan: Span,</span><span class="s3">\n    </span><span class="s1">doResolve: (</span><span class="s3">\n      </span><span class="s1">request: string,</span><span class="s3">\n      </span><span class="s1">parent: string,</span><span class="s3">\n      </span><span class="s1">job: import('@vercel/nft/out/node-file-trace').Job,</span><span class="s3">\n      </span><span class="s1">isEsmRequested: boolean</span><span class="s3">\n    </span><span class="s1">) =&gt; Promise&lt;string&gt;,</span><span class="s3">\n    </span><span class="s1">readlink: any,</span><span class="s3">\n    </span><span class="s1">stat: any</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">compilation.hooks.finishModules.tapAsync(</span><span class="s3">\n      </span><span class="s1">PLUGIN_NAME,</span><span class="s3">\n      </span><span class="s1">async (_stats: any, callback: any) =&gt; {</span><span class="s3">\n        </span><span class="s1">const finishModulesSpan =</span><span class="s3">\n          </span><span class="s1">traceEntrypointsPluginSpan.traceChild('finish-modules')</span><span class="s3">\n        </span><span class="s1">await finishModulesSpan</span><span class="s3">\n          </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n            </span><span class="s1">// we create entry -&gt; module maps so that we can</span><span class="s3">\n            </span><span class="s1">// look them up faster instead of having to iterate</span><span class="s3">\n            </span><span class="s1">// over the compilation modules list</span><span class="s3">\n            </span><span class="s1">const entryNameMap = new Map&lt;string, string&gt;()</span><span class="s3">\n            </span><span class="s1">const entryModMap = new Map&lt;string, any&gt;()</span><span class="s3">\n            </span><span class="s1">const additionalEntries = new Map&lt;string, Map&lt;string, any&gt;&gt;()</span><span class="s3">\n            </span><span class="s1">const absolutePathByEntryName = new Map&lt;string, string&gt;()</span><span class="s3">\n\n            </span><span class="s1">const depModMap = new Map&lt;string, any&gt;()</span><span class="s3">\n\n            </span><span class="s1">await finishModulesSpan</span><span class="s3">\n              </span><span class="s1">.traceChild('get-entries')</span><span class="s3">\n              </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n                </span><span class="s1">for (const [name, entry] of compilation.entries.entries()) {</span><span class="s3">\n                  </span><span class="s1">const normalizedName = name?.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n\n                  </span><span class="s1">const isPage = normalizedName.startsWith('pages/')</span><span class="s3">\n                  </span><span class="s1">const isApp =</span><span class="s3">\n                    </span><span class="s1">this.appDirEnabled &amp;&amp; normalizedName.startsWith('app/')</span><span class="s3">\n\n                  </span><span class="s1">if (isApp || isPage) {</span><span class="s3">\n                    </span><span class="s1">for (const dep of entry.dependencies) {</span><span class="s3">\n                      </span><span class="s1">if (!dep) continue</span><span class="s3">\n                      </span><span class="s1">const entryMod = getModuleFromDependency(compilation, dep)</span><span class="s3">\n\n                      </span><span class="s1">// Handle case where entry is a loader coming from Next.js.</span><span class="s3">\n                      </span><span class="s1">// For example edge-loader or app-loader.</span><span class="s3">\n                      </span><span class="s1">if (entryMod &amp;&amp; entryMod.resource === '') {</span><span class="s3">\n                        </span><span class="s1">const moduleBuildInfo = getModuleBuildInfo(entryMod)</span><span class="s3">\n                        </span><span class="s1">// All loaders that are used to create entries have a `route` property on the buildInfo.</span><span class="s3">\n                        </span><span class="s1">if (moduleBuildInfo.route) {</span><span class="s3">\n                          </span><span class="s1">const absolutePath = getPageFilePath({</span><span class="s3">\n                            </span><span class="s1">absolutePagePath:</span><span class="s3">\n                              </span><span class="s1">moduleBuildInfo.route.absolutePagePath,</span><span class="s3">\n                            </span><span class="s1">rootDir: this.rootDir,</span><span class="s3">\n                            </span><span class="s1">appDir: this.appDir,</span><span class="s3">\n                            </span><span class="s1">pagesDir: this.pagesDir,</span><span class="s3">\n                          </span><span class="s1">})</span><span class="s3">\n\n                          </span><span class="s1">// Ensures we don't handle non-pages.</span><span class="s3">\n                          </span><span class="s1">if (</span><span class="s3">\n                            </span><span class="s1">(this.pagesDir &amp;&amp;</span><span class="s3">\n                              </span><span class="s1">absolutePath.startsWith(this.pagesDir)) ||</span><span class="s3">\n                            </span><span class="s1">(this.appDir &amp;&amp;</span><span class="s3">\n                              </span><span class="s1">absolutePath.startsWith(this.appDir))</span><span class="s3">\n                          </span><span class="s1">) {</span><span class="s3">\n                            </span><span class="s1">entryModMap.set(absolutePath, entryMod)</span><span class="s3">\n                            </span><span class="s1">entryNameMap.set(absolutePath, name)</span><span class="s3">\n                            </span><span class="s1">absolutePathByEntryName.set(name, absolutePath)</span><span class="s3">\n                          </span><span class="s1">}</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n\n                        </span><span class="s1">// If there was no `route` property, we can assume that it was something custom instead.</span><span class="s3">\n                        </span><span class="s1">// In order to trace these we add them to the additionalEntries map.</span><span class="s3">\n                        </span><span class="s1">if (entryMod.request) {</span><span class="s3">\n                          </span><span class="s1">let curMap = additionalEntries.get(name)</span><span class="s3">\n\n                          </span><span class="s1">if (!curMap) {</span><span class="s3">\n                            </span><span class="s1">curMap = new Map()</span><span class="s3">\n                            </span><span class="s1">additionalEntries.set(name, curMap)</span><span class="s3">\n                          </span><span class="s1">}</span><span class="s3">\n                          </span><span class="s1">depModMap.set(entryMod.request, entryMod)</span><span class="s3">\n                          </span><span class="s1">curMap.set(entryMod.resource, entryMod)</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n\n                      </span><span class="s1">if (entryMod &amp;&amp; entryMod.resource) {</span><span class="s3">\n                        </span><span class="s1">entryNameMap.set(entryMod.resource, name)</span><span class="s3">\n                        </span><span class="s1">entryModMap.set(entryMod.resource, entryMod)</span><span class="s3">\n\n                        </span><span class="s1">let curMap = additionalEntries.get(name)</span><span class="s3">\n\n                        </span><span class="s1">if (!curMap) {</span><span class="s3">\n                          </span><span class="s1">curMap = new Map()</span><span class="s3">\n                          </span><span class="s1">additionalEntries.set(name, curMap)</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n                        </span><span class="s1">depModMap.set(entryMod.resource, entryMod)</span><span class="s3">\n                        </span><span class="s1">curMap.set(entryMod.resource, entryMod)</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">const readFile = async (</span><span class="s3">\n              </span><span class="s1">path: string</span><span class="s3">\n            </span><span class="s1">): Promise&lt;Buffer | string | null&gt; =&gt; {</span><span class="s3">\n              </span><span class="s1">const mod = depModMap.get(path) || entryModMap.get(path)</span><span class="s3">\n\n              </span><span class="s1">// map the transpiled source when available to avoid</span><span class="s3">\n              </span><span class="s1">// parse errors in node-file-trace</span><span class="s3">\n              </span><span class="s1">let source: Buffer | string = mod?.originalSource?.()?.buffer()</span><span class="s3">\n              </span><span class="s1">return source || ''</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const entryPaths = Array.from(entryModMap.keys())</span><span class="s3">\n\n            </span><span class="s1">const collectDependencies = async (mod: any, parent: string) =&gt; {</span><span class="s3">\n              </span><span class="s1">if (!mod || !mod.dependencies) return</span><span class="s3">\n\n              </span><span class="s1">for (const dep of mod.dependencies) {</span><span class="s3">\n                </span><span class="s1">const depMod = getModuleFromDependency(compilation, dep)</span><span class="s3">\n\n                </span><span class="s1">if (depMod?.resource &amp;&amp; !depModMap.get(depMod.resource)) {</span><span class="s3">\n                  </span><span class="s1">depModMap.set(depMod.resource, depMod)</span><span class="s3">\n                  </span><span class="s1">await collectDependencies(depMod, parent)</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">const entriesToTrace = [...entryPaths]</span><span class="s3">\n\n            </span><span class="s1">for (const entry of entryPaths) {</span><span class="s3">\n              </span><span class="s1">await collectDependencies(entryModMap.get(entry), entry)</span><span class="s3">\n              </span><span class="s1">const entryName = entryNameMap.get(entry)!</span><span class="s3">\n              </span><span class="s1">const curExtraEntries = additionalEntries.get(entryName)</span><span class="s3">\n\n              </span><span class="s1">if (curExtraEntries) {</span><span class="s3">\n                </span><span class="s1">entriesToTrace.push(...curExtraEntries.keys())</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const contextDirectory = this.tracingRoot</span><span class="s3">\n            </span><span class="s1">const chunks = [...entriesToTrace]</span><span class="s3">\n\n            </span><span class="s1">this.buildTraceContext.entriesTrace = {</span><span class="s3">\n              </span><span class="s1">action: {</span><span class="s3">\n                </span><span class="s1">action: 'print',</span><span class="s3">\n                </span><span class="s1">input: chunks,</span><span class="s3">\n                </span><span class="s1">contextDirectory,</span><span class="s3">\n                </span><span class="s1">processCwd: this.rootDir,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">appDir: this.rootDir,</span><span class="s3">\n              </span><span class="s1">depModArray: Array.from(depModMap.keys()),</span><span class="s3">\n              </span><span class="s1">entryNameMap: Object.fromEntries(entryNameMap),</span><span class="s3">\n              </span><span class="s1">absolutePathByEntryName: Object.fromEntries(</span><span class="s3">\n                </span><span class="s1">absolutePathByEntryName</span><span class="s3">\n              </span><span class="s1">),</span><span class="s3">\n              </span><span class="s1">outputPath: compilation.outputOptions.path!,</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">let fileList: Set&lt;string&gt;</span><span class="s3">\n            </span><span class="s1">let reasons: NodeFileTraceReasons</span><span class="s3">\n            </span><span class="s1">const ignores = [</span><span class="s3">\n              </span><span class="s1">...TRACE_IGNORES,</span><span class="s3">\n              </span><span class="s1">...this.traceIgnores,</span><span class="s3">\n              </span><span class="s1">'**/node_modules/**',</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n\n            </span><span class="s1">// pre-compile the ignore matcher to avoid repeating on every ignoreFn call</span><span class="s3">\n            </span><span class="s1">const isIgnoreMatcher = picomatch(ignores, {</span><span class="s3">\n              </span><span class="s1">contains: true,</span><span class="s3">\n              </span><span class="s1">dot: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">const ignoreFn = (path: string) =&gt; {</span><span class="s3">\n              </span><span class="s1">return isIgnoreMatcher(path)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">await finishModulesSpan</span><span class="s3">\n              </span><span class="s1">.traceChild('node-file-trace-plugin', {</span><span class="s3">\n                </span><span class="s1">traceEntryCount: entriesToTrace.length + '',</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n                </span><span class="s1">const result = await nodeFileTrace(entriesToTrace, {</span><span class="s3">\n                  </span><span class="s1">base: this.tracingRoot,</span><span class="s3">\n                  </span><span class="s1">processCwd: this.rootDir,</span><span class="s3">\n                  </span><span class="s1">readFile,</span><span class="s3">\n                  </span><span class="s1">readlink,</span><span class="s3">\n                  </span><span class="s1">stat,</span><span class="s3">\n                  </span><span class="s1">resolve: doResolve</span><span class="s3">\n                    </span><span class="s1">? async (id, parent, job, isCjs) =&gt; {</span><span class="s3">\n                        </span><span class="s1">return doResolve(id, parent, job, !isCjs)</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">: undefined,</span><span class="s3">\n                  </span><span class="s1">ignore: ignoreFn,</span><span class="s3">\n                  </span><span class="s1">mixedModules: true,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">// @ts-ignore</span><span class="s3">\n                </span><span class="s1">fileList = result.fileList</span><span class="s3">\n                </span><span class="s1">result.esmFileList.forEach((file) =&gt; fileList.add(file))</span><span class="s3">\n                </span><span class="s1">reasons = result.reasons</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n\n            </span><span class="s1">await finishModulesSpan</span><span class="s3">\n              </span><span class="s1">.traceChild('collect-traced-files')</span><span class="s3">\n              </span><span class="s1">.traceAsyncFn(() =&gt; {</span><span class="s3">\n                </span><span class="s1">const parentFilesMap = getFilesMapFromReasons(</span><span class="s3">\n                  </span><span class="s1">fileList,</span><span class="s3">\n                  </span><span class="s1">reasons,</span><span class="s3">\n                  </span><span class="s1">(file) =&gt; {</span><span class="s3">\n                    </span><span class="s1">// if a file was imported and a loader handled it</span><span class="s3">\n                    </span><span class="s1">// we don't include it in the trace e.g.</span><span class="s3">\n                    </span><span class="s1">// static image imports, CSS imports</span><span class="s3">\n                    </span><span class="s1">file = nodePath.join(this.tracingRoot, file)</span><span class="s3">\n                    </span><span class="s1">const depMod = depModMap.get(file)</span><span class="s3">\n                    </span><span class="s1">const isAsset = reasons</span><span class="s3">\n                      </span><span class="s1">.get(nodePath.relative(this.tracingRoot, file))</span><span class="s3">\n                      </span><span class="s1">?.type.includes('asset')</span><span class="s3">\n\n                    </span><span class="s1">return (</span><span class="s3">\n                      </span><span class="s1">!isAsset &amp;&amp;</span><span class="s3">\n                      </span><span class="s1">Array.isArray(depMod?.loaders) &amp;&amp;</span><span class="s3">\n                      </span><span class="s1">depMod.loaders.length &gt; 0</span><span class="s3">\n                    </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n\n                </span><span class="s1">for (const entry of entryPaths) {</span><span class="s3">\n                  </span><span class="s1">const entryName = entryNameMap.get(entry)!</span><span class="s3">\n                  </span><span class="s1">const normalizedEntry = nodePath.relative(</span><span class="s3">\n                    </span><span class="s1">this.tracingRoot,</span><span class="s3">\n                    </span><span class="s1">entry</span><span class="s3">\n                  </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">const curExtraEntries = additionalEntries.get(entryName)</span><span class="s3">\n                  </span><span class="s1">const finalDeps = new Map&lt;string, { bundled: boolean }&gt;()</span><span class="s3">\n\n                  </span><span class="s1">// ensure we include entry source file as well for</span><span class="s3">\n                  </span><span class="s1">// hash comparison</span><span class="s3">\n                  </span><span class="s1">finalDeps.set(entry, {</span><span class="s3">\n                    </span><span class="s1">bundled: true,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n\n                  </span><span class="s1">for (const [dep, info] of parentFilesMap</span><span class="s3">\n                    </span><span class="s1">.get(normalizedEntry)</span><span class="s3">\n                    </span><span class="s1">?.entries() || []) {</span><span class="s3">\n                    </span><span class="s1">finalDeps.set(nodePath.join(this.tracingRoot, dep), {</span><span class="s3">\n                      </span><span class="s1">bundled: info.ignored,</span><span class="s3">\n                    </span><span class="s1">})</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n\n                  </span><span class="s1">if (curExtraEntries) {</span><span class="s3">\n                    </span><span class="s1">for (const extraEntry of curExtraEntries.keys()) {</span><span class="s3">\n                      </span><span class="s1">const normalizedExtraEntry = nodePath.relative(</span><span class="s3">\n                        </span><span class="s1">this.tracingRoot,</span><span class="s3">\n                        </span><span class="s1">extraEntry</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n                      </span><span class="s1">finalDeps.set(extraEntry, { bundled: false })</span><span class="s3">\n\n                      </span><span class="s1">for (const [dep, info] of parentFilesMap</span><span class="s3">\n                        </span><span class="s1">.get(normalizedExtraEntry)</span><span class="s3">\n                        </span><span class="s1">?.entries() || []) {</span><span class="s3">\n                        </span><span class="s1">finalDeps.set(nodePath.join(this.tracingRoot, dep), {</span><span class="s3">\n                          </span><span class="s1">bundled: info.ignored,</span><span class="s3">\n                        </span><span class="s1">})</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">this.entryTraces.set(entryName, finalDeps)</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">.then(</span><span class="s3">\n            </span><span class="s1">() =&gt; callback(),</span><span class="s3">\n            </span><span class="s1">(err) =&gt; callback(err)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">apply(compiler: webpack.Compiler) {</span><span class="s3">\n    </span><span class="s1">compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation) =&gt; {</span><span class="s3">\n      </span><span class="s1">const compilationSpan =</span><span class="s3">\n        </span><span class="s1">getCompilationSpan(compilation) || getCompilationSpan(compiler)!</span><span class="s3">\n      </span><span class="s1">const traceEntrypointsPluginSpan = compilationSpan.traceChild(</span><span class="s3">\n        </span><span class="s1">'next-trace-entrypoint-plugin'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const readlink = async (path: string): Promise&lt;string | null&gt; =&gt; {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">return await new Promise((resolve, reject) =&gt; {</span><span class="s3">\n            </span><span class="s1">;(</span><span class="s3">\n              </span><span class="s1">compilation.inputFileSystem</span><span class="s3">\n                </span><span class="s1">.readlink as typeof import('fs').readlink</span><span class="s3">\n            </span><span class="s1">)(path, (err, link) =&gt; {</span><span class="s3">\n              </span><span class="s1">if (err) return reject(err)</span><span class="s3">\n              </span><span class="s1">resolve(link)</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">} catch (e) {</span><span class="s3">\n          </span><span class="s1">if (</span><span class="s3">\n            </span><span class="s1">isError(e) &amp;&amp;</span><span class="s3">\n            </span><span class="s1">(e.code === 'EINVAL' || e.code === 'ENOENT' || e.code === 'UNKNOWN')</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">return null</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">throw e</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const stat = async (path: string): Promise&lt;import('fs').Stats | null&gt; =&gt; {</span><span class="s3">\n        </span><span class="s1">try {</span><span class="s3">\n          </span><span class="s1">return await new Promise((resolve, reject) =&gt; {</span><span class="s3">\n            </span><span class="s1">;(compilation.inputFileSystem.stat as typeof import('fs').stat)(</span><span class="s3">\n              </span><span class="s1">path,</span><span class="s3">\n              </span><span class="s1">(err, stats) =&gt; {</span><span class="s3">\n                </span><span class="s1">if (err) return reject(err)</span><span class="s3">\n                </span><span class="s1">resolve(stats)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">} catch (e) {</span><span class="s3">\n          </span><span class="s1">if (isError(e) &amp;&amp; (e.code === 'ENOENT' || e.code === 'ENOTDIR')) {</span><span class="s3">\n            </span><span class="s1">return null</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">throw e</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">traceEntrypointsPluginSpan.traceFn(() =&gt; {</span><span class="s3">\n        </span><span class="s1">compilation.hooks.processAssets.tapAsync(</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">name: PLUGIN_NAME,</span><span class="s3">\n            </span><span class="s1">stage: webpack.Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">(_, callback: any) =&gt; {</span><span class="s3">\n            </span><span class="s1">this.createTraceAssets(compilation, traceEntrypointsPluginSpan)</span><span class="s3">\n              </span><span class="s1">.then(() =&gt; callback())</span><span class="s3">\n              </span><span class="s1">.catch((err) =&gt; callback(err))</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">let resolver = compilation.resolverFactory.get('normal')</span><span class="s3">\n\n        </span><span class="s1">function getPkgName(name: string) {</span><span class="s3">\n          </span><span class="s1">const segments = name.split('/')</span><span class="s3">\n          </span><span class="s1">if (name[0] === '@' &amp;&amp; segments.length &gt; 1)</span><span class="s3">\n            </span><span class="s1">return segments.length &gt; 1 ? segments.slice(0, 2).join('/') : null</span><span class="s3">\n          </span><span class="s1">return segments.length ? segments[0] : null</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const getResolve = (</span><span class="s3">\n          </span><span class="s1">options: Parameters&lt;typeof resolver.withOptions&gt;[0]</span><span class="s3">\n        </span><span class="s1">) =&gt; {</span><span class="s3">\n          </span><span class="s1">const curResolver = resolver.withOptions(options)</span><span class="s3">\n\n          </span><span class="s1">return (</span><span class="s3">\n            </span><span class="s1">parent: string,</span><span class="s3">\n            </span><span class="s1">request: string,</span><span class="s3">\n            </span><span class="s1">job: import('@vercel/nft/out/node-file-trace').Job</span><span class="s3">\n          </span><span class="s1">) =&gt;</span><span class="s3">\n            </span><span class="s1">new Promise&lt;[string, boolean]&gt;((resolve, reject) =&gt; {</span><span class="s3">\n              </span><span class="s1">const context = nodePath.dirname(parent)</span><span class="s3">\n\n              </span><span class="s1">curResolver.resolve(</span><span class="s3">\n                </span><span class="s1">{},</span><span class="s3">\n                </span><span class="s1">context,</span><span class="s3">\n                </span><span class="s1">request,</span><span class="s3">\n                </span><span class="s1">{</span><span class="s3">\n                  </span><span class="s1">fileDependencies: compilation.fileDependencies,</span><span class="s3">\n                  </span><span class="s1">missingDependencies: compilation.missingDependencies,</span><span class="s3">\n                  </span><span class="s1">contextDependencies: compilation.contextDependencies,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">async (err: any, result?, resContext?) =&gt; {</span><span class="s3">\n                  </span><span class="s1">if (err) return reject(err)</span><span class="s3">\n\n                  </span><span class="s1">if (!result) {</span><span class="s3">\n                    </span><span class="s1">return reject(new Error('module not found'))</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n\n                  </span><span class="s1">// webpack resolver doesn't strip loader query info</span><span class="s3">\n                  </span><span class="s1">// from the result so use path instead</span><span class="s3">\n                  </span><span class="s1">if (result.includes('?') || result.includes('!')) {</span><span class="s3">\n                    </span><span class="s1">result = resContext?.path || result</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n\n                  </span><span class="s1">try {</span><span class="s3">\n                    </span><span class="s1">// we need to collect all parent package.json's used</span><span class="s3">\n                    </span><span class="s1">// as webpack's resolve doesn't expose this and parent</span><span class="s3">\n                    </span><span class="s1">// package.json could be needed for resolving e.g. stylis</span><span class="s3">\n                    </span><span class="s1">// stylis/package.json -&gt; stylis/dist/umd/package.json</span><span class="s3">\n                    </span><span class="s1">if (result.includes('node_modules')) {</span><span class="s3">\n                      </span><span class="s1">let requestPath = result</span><span class="s3">\n                        </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n                        </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">0/g, '')</span><span class="s3">\n\n                      </span><span class="s1">if (</span><span class="s3">\n                        </span><span class="s1">!nodePath.isAbsolute(request) &amp;&amp;</span><span class="s3">\n                        </span><span class="s1">request.includes('/') &amp;&amp;</span><span class="s3">\n                        </span><span class="s1">resContext?.descriptionFileRoot</span><span class="s3">\n                      </span><span class="s1">) {</span><span class="s3">\n                        </span><span class="s1">requestPath = (</span><span class="s3">\n                          </span><span class="s1">resContext.descriptionFileRoot +</span><span class="s3">\n                          </span><span class="s1">request.slice(getPkgName(request)?.length || 0) +</span><span class="s3">\n                          </span><span class="s1">nodePath.sep +</span><span class="s3">\n                          </span><span class="s1">'package.json'</span><span class="s3">\n                        </span><span class="s1">)</span><span class="s3">\n                          </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/')</span><span class="s3">\n                          </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">0/g, '')</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n\n                      </span><span class="s1">const rootSeparatorIndex = requestPath.indexOf('/')</span><span class="s3">\n                      </span><span class="s1">let separatorIndex: number</span><span class="s3">\n                      </span><span class="s1">while (</span><span class="s3">\n                        </span><span class="s1">(separatorIndex = requestPath.lastIndexOf('/')) &gt;</span><span class="s3">\n                        </span><span class="s1">rootSeparatorIndex</span><span class="s3">\n                      </span><span class="s1">) {</span><span class="s3">\n                        </span><span class="s1">requestPath = requestPath.slice(0, separatorIndex)</span><span class="s3">\n                        </span><span class="s1">const curPackageJsonPath = `${requestPath}/package.json`</span><span class="s3">\n                        </span><span class="s1">if (await job.isFile(curPackageJsonPath)) {</span><span class="s3">\n                          </span><span class="s1">await job.emitFile(</span><span class="s3">\n                            </span><span class="s1">await job.realpath(curPackageJsonPath),</span><span class="s3">\n                            </span><span class="s1">'resolve',</span><span class="s3">\n                            </span><span class="s1">parent</span><span class="s3">\n                          </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n                      </span><span class="s1">}</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">} catch (_err) {</span><span class="s3">\n                    </span><span class="s1">// we failed to resolve the package.json boundary,</span><span class="s3">\n                    </span><span class="s1">// we don't block emitting the initial asset from this</span><span class="s3">\n                  </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">resolve([result, options.dependencyType === 'esm'])</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const CJS_RESOLVE_OPTIONS = {</span><span class="s3">\n          </span><span class="s1">...NODE_RESOLVE_OPTIONS,</span><span class="s3">\n          </span><span class="s1">fullySpecified: undefined,</span><span class="s3">\n          </span><span class="s1">modules: undefined,</span><span class="s3">\n          </span><span class="s1">extensions: undefined,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const BASE_CJS_RESOLVE_OPTIONS = {</span><span class="s3">\n          </span><span class="s1">...CJS_RESOLVE_OPTIONS,</span><span class="s3">\n          </span><span class="s1">alias: false,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const ESM_RESOLVE_OPTIONS = {</span><span class="s3">\n          </span><span class="s1">...NODE_ESM_RESOLVE_OPTIONS,</span><span class="s3">\n          </span><span class="s1">fullySpecified: undefined,</span><span class="s3">\n          </span><span class="s1">modules: undefined,</span><span class="s3">\n          </span><span class="s1">extensions: undefined,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">const BASE_ESM_RESOLVE_OPTIONS = {</span><span class="s3">\n          </span><span class="s1">...ESM_RESOLVE_OPTIONS,</span><span class="s3">\n          </span><span class="s1">alias: false,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const doResolve = async (</span><span class="s3">\n          </span><span class="s1">request: string,</span><span class="s3">\n          </span><span class="s1">parent: string,</span><span class="s3">\n          </span><span class="s1">job: import('@vercel/nft/out/node-file-trace').Job,</span><span class="s3">\n          </span><span class="s1">isEsmRequested: boolean</span><span class="s3">\n        </span><span class="s1">): Promise&lt;string&gt; =&gt; {</span><span class="s3">\n          </span><span class="s1">const context = nodePath.dirname(parent)</span><span class="s3">\n          </span><span class="s1">// When in esm externals mode, and using import, we resolve with</span><span class="s3">\n          </span><span class="s1">// ESM resolving options.</span><span class="s3">\n          </span><span class="s1">const { res } = await resolveExternal(</span><span class="s3">\n            </span><span class="s1">this.rootDir,</span><span class="s3">\n            </span><span class="s1">this.esmExternals,</span><span class="s3">\n            </span><span class="s1">context,</span><span class="s3">\n            </span><span class="s1">request,</span><span class="s3">\n            </span><span class="s1">isEsmRequested,</span><span class="s3">\n            </span><span class="s1">(options) =&gt; (_: string, resRequest: string) =&gt; {</span><span class="s3">\n              </span><span class="s1">return getResolve(options)(parent, resRequest, job)</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">undefined,</span><span class="s3">\n            </span><span class="s1">undefined,</span><span class="s3">\n            </span><span class="s1">ESM_RESOLVE_OPTIONS,</span><span class="s3">\n            </span><span class="s1">CJS_RESOLVE_OPTIONS,</span><span class="s3">\n            </span><span class="s1">BASE_ESM_RESOLVE_OPTIONS,</span><span class="s3">\n            </span><span class="s1">BASE_CJS_RESOLVE_OPTIONS</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n\n          </span><span class="s1">if (!res) {</span><span class="s3">\n            </span><span class="s1">throw new Error(`failed to resolve ${request} from ${parent}`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">return res.replace(/</span><span class="s3">\\</span><span class="s1">0/g, '')</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">this.tapfinishModules(</span><span class="s3">\n          </span><span class="s1">compilation,</span><span class="s3">\n          </span><span class="s1">traceEntrypointsPluginSpan,</span><span class="s3">\n          </span><span class="s1">doResolve,</span><span class="s3">\n          </span><span class="s1">readlink,</span><span class="s3">\n          </span><span class="s1">stat</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;TRACE_IGNORES&quot;</span><span class="s0">,</span><span class="s1">&quot;TraceEntryPointsPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;getFilesMapFromReasons&quot;</span><span class="s0">,</span><span class="s1">&quot;PLUGIN_NAME&quot;</span><span class="s0">,</span><span class="s1">&quot;NOT_TRACEABLE&quot;</span><span class="s0">,</span><span class="s1">&quot;getModuleFromDependency&quot;</span><span class="s0">,</span><span class="s1">&quot;compilation&quot;</span><span class="s0">,</span><span class="s1">&quot;dep&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleGraph&quot;</span><span class="s0">,</span><span class="s1">&quot;getModule&quot;</span><span class="s0">,</span><span class="s1">&quot;fileList&quot;</span><span class="s0">,</span><span class="s1">&quot;reasons&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreFn&quot;</span><span class="s0">,</span><span class="s1">&quot;parentFilesMap&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;propagateToParents&quot;</span><span class="s0">,</span><span class="s1">&quot;parents&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;seen&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;parent&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;parentFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;ignored&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;parentReason&quot;</span><span class="s0">,</span><span class="s1">&quot;reason&quot;</span><span class="s0">,</span><span class="s1">&quot;isInitial&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;rootDir&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;compilerType&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;traceIgnores&quot;</span><span class="s0">,</span><span class="s1">&quot;esmExternals&quot;</span><span class="s0">,</span><span class="s1">&quot;outputFileTracingRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;buildTraceContext&quot;</span><span class="s0">,</span><span class="s1">&quot;entryTraces&quot;</span><span class="s0">,</span><span class="s1">&quot;tracingRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;createTraceAssets&quot;</span><span class="s0">,</span><span class="s1">&quot;span&quot;</span><span class="s0">,</span><span class="s1">&quot;outputPath&quot;</span><span class="s0">,</span><span class="s1">&quot;outputOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;traceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;entryFilesMap&quot;</span><span class="s0">,</span><span class="s1">&quot;chunksToTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;entryNameFilesMap&quot;</span><span class="s0">,</span><span class="s1">&quot;isTraceable&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;suffix&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoint&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;entryFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;getEntrypointChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;getAllReferencedChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;files&quot;</span><span class="s0">,</span><span class="s1">&quot;filePath&quot;</span><span class="s0">,</span><span class="s1">&quot;nodePath&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;auxiliaryFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;chunksTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;contextDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;processCwd&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;fromEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;outputPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;traceOutputName&quot;</span><span class="s0">,</span><span class="s1">&quot;traceOutputPath&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirRelativeEntryPath&quot;</span><span class="s0">,</span><span class="s1">&quot;entriesTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;absolutePathByEntryName&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;entryIsStaticMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_REFERENCE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;finalFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;fileInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;bundled&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;emitAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">,</span><span class="s1">&quot;RawSource&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;TRACE_OUTPUT_VERSION&quot;</span><span class="s0">,</span><span class="s1">&quot;tapfinishModules&quot;</span><span class="s0">,</span><span class="s1">&quot;traceEntrypointsPluginSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;doResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;readlink&quot;</span><span class="s0">,</span><span class="s1">&quot;stat&quot;</span><span class="s0">,</span><span class="s1">&quot;hooks&quot;</span><span class="s0">,</span><span class="s1">&quot;finishModules&quot;</span><span class="s0">,</span><span class="s1">&quot;tapAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;_stats&quot;</span><span class="s0">,</span><span class="s1">&quot;callback&quot;</span><span class="s0">,</span><span class="s1">&quot;finishModulesSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;entryNameMap&quot;</span><span class="s0">,</span><span class="s1">&quot;entryModMap&quot;</span><span class="s0">,</span><span class="s1">&quot;additionalEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;depModMap&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedName&quot;</span><span class="s0">,</span><span class="s1">&quot;isPage&quot;</span><span class="s0">,</span><span class="s1">&quot;isApp&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;entryMod&quot;</span><span class="s0">,</span><span class="s1">&quot;resource&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleBuildInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getModuleBuildInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;absolutePath&quot;</span><span class="s0">,</span><span class="s1">&quot;getPageFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;absolutePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;curMap&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;originalSource&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;entryPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;collectDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;depMod&quot;</span><span class="s0">,</span><span class="s1">&quot;entriesToTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;entryName&quot;</span><span class="s0">,</span><span class="s1">&quot;curExtraEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;chunks&quot;</span><span class="s0">,</span><span class="s1">&quot;depModArray&quot;</span><span class="s0">,</span><span class="s1">&quot;ignores&quot;</span><span class="s0">,</span><span class="s1">&quot;isIgnoreMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;picomatch&quot;</span><span class="s0">,</span><span class="s1">&quot;contains&quot;</span><span class="s0">,</span><span class="s1">&quot;dot&quot;</span><span class="s0">,</span><span class="s1">&quot;traceEntryCount&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeFileTrace&quot;</span><span class="s0">,</span><span class="s1">&quot;base&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;job&quot;</span><span class="s0">,</span><span class="s1">&quot;isCjs&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;ignore&quot;</span><span class="s0">,</span><span class="s1">&quot;mixedModules&quot;</span><span class="s0">,</span><span class="s1">&quot;esmFileList&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;isAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;loaders&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;finalDeps&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;extraEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedExtraEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;compiler&quot;</span><span class="s0">,</span><span class="s1">&quot;tap&quot;</span><span class="s0">,</span><span class="s1">&quot;compilationSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;getCompilationSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;inputFileSystem&quot;</span><span class="s0">,</span><span class="s1">&quot;link&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;isError&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;stats&quot;</span><span class="s0">,</span><span class="s1">&quot;traceFn&quot;</span><span class="s0">,</span><span class="s1">&quot;processAssets&quot;</span><span class="s0">,</span><span class="s1">&quot;stage&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack&quot;</span><span class="s0">,</span><span class="s1">&quot;Compilation&quot;</span><span class="s0">,</span><span class="s1">&quot;PROCESS_ASSETS_STAGE_SUMMARIZE&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;resolver&quot;</span><span class="s0">,</span><span class="s1">&quot;resolverFactory&quot;</span><span class="s0">,</span><span class="s1">&quot;getPkgName&quot;</span><span class="s0">,</span><span class="s1">&quot;segments&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;curResolver&quot;</span><span class="s0">,</span><span class="s1">&quot;withOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;fileDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;missingDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;contextDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;resContext&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;requestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;isAbsolute&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptionFileRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;sep&quot;</span><span class="s0">,</span><span class="s1">&quot;rootSeparatorIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;separatorIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;lastIndexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;curPackageJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;isFile&quot;</span><span class="s0">,</span><span class="s1">&quot;emitFile&quot;</span><span class="s0">,</span><span class="s1">&quot;realpath&quot;</span><span class="s0">,</span><span class="s1">&quot;_err&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencyType&quot;</span><span class="s0">,</span><span class="s1">&quot;CJS_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;fullySpecified&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;BASE_CJS_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;alias&quot;</span><span class="s0">,</span><span class="s1">&quot;ESM_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ESM_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;BASE_ESM_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;isEsmRequested&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveExternal&quot;</span><span class="s0">,</span><span class="s1">&quot;resRequest&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>