<html>
<head>
<title>label-has-associated-control.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #0033b3;}
.s1 { color: #080808;}
.s2 { color: #080808;}
.s3 { color: #871094; font-style: italic;}
.s4 { color: #067d17;}
.s5 { color: #006dcc;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
label-has-associated-control.md</font>
</center></td></tr></table>
<pre><span class="s0"># </span><span class="s2">jsx-a11y/label-has-associated-control</span>

<span class="s2">üíº This rule is enabled in the following configs</span><span class="s1">: </span><span class="s2">‚òëÔ∏è `recommended`, üîí `strict`.</span>

<span class="s1">&lt;!-- end auto-generated rule header --&gt;</span>

<span class="s2">Enforce that a label tag has a text label and an associated control.</span>

<span class="s2">There are two supported ways to associate a label with a control</span><span class="s1">:</span>

<span class="s0">- </span><span class="s2">Wrapping a control in a label tag.</span>
<span class="s0">- </span><span class="s2">Adding `htmlFor` to a label and assigning it a DOM ID string that indicates an input on the page.</span>

<span class="s2">This rule checks that any `label` tag </span><span class="s1">(</span><span class="s2">or an indicated custom component that will output a `label` tag</span><span class="s1">) </span><span class="s2">either </span><span class="s1">(</span><span class="s2">1</span><span class="s1">) </span><span class="s2">wraps an `input` element </span><span class="s1">(</span><span class="s2">or an indicated custom component that will output an `input` tag</span><span class="s1">) </span><span class="s2">or </span><span class="s1">(</span><span class="s2">2</span><span class="s1">) </span><span class="s2">has an `htmlFor` attribute and that the `label` tag has text content.</span>

<span class="s0">## </span><span class="s2">How do I resolve this error?</span>

<span class="s0">### </span><span class="s2">Case</span><span class="s1">: </span><span class="s2">I just want a text label associated with an input.</span>

<span class="s2">The simplest way to achieve an association between a label and an input is to wrap the input in the label.</span>

<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">&lt;label&gt;</span>
  <span class="s4">Surname</span>
  <span class="s4">&lt;input type=&quot;text&quot; /&gt;</span>
<span class="s4">&lt;/label&gt;</span>
<span class="s0">```</span>

<span class="s2">All modern browsers and assistive technology will associate the label with the control.</span>

<span class="s0">### </span><span class="s2">Case</span><span class="s1">: </span><span class="s2">The label is a sibling of the control.</span>

<span class="s2">In this case, use `htmlFor` and an ID to associate the controls.</span>

<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">&lt;label htmlFor={domId}&gt;Surname&lt;/label&gt;</span>
<span class="s4">&lt;input type=&quot;text&quot; id={domId} /&gt;</span>
<span class="s0">```</span>

<span class="s0">### </span><span class="s2">Case</span><span class="s1">: </span><span class="s2">My label and input components are custom components.</span>

<span class="s2">You can configure the rule to be aware of your custom components.</span>

<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">&lt;CustomInputLabel label=&quot;Surname&quot;&gt;</span>
  <span class="s4">&lt;CustomInput type=&quot;text&quot; value={value} /&gt;</span>
<span class="s4">&lt;/CustomInputLabel&gt;</span>
<span class="s0">```</span>

<span class="s2">And the configuration</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">json</span>
<span class="s4">{</span>
  <span class="s4">&quot;rules&quot;: {</span>
    <span class="s4">&quot;jsx-a11y/label-has-associated-control&quot;: [ 2, {</span>
      <span class="s4">&quot;labelComponents&quot;: [&quot;CustomInputLabel&quot;],</span>
      <span class="s4">&quot;labelAttributes&quot;: [&quot;label&quot;],</span>
      <span class="s4">&quot;controlComponents&quot;: [&quot;CustomInput&quot;],</span>
      <span class="s4">&quot;depth&quot;: 3,</span>
    <span class="s4">}],</span>
  <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s0">### </span><span class="s2">Case</span><span class="s1">: </span><span class="s2">I have two labels for the same input</span>

<span class="s2">If the second `label` is in a different part of the HTML, then the second one can only contain `htmlFor` but not nesting. You will probably need eslint override comment on the second label.</span>

<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">{/* eslint jsx-a11y/label-has-associated-control: [&quot;error&quot;, { assert: &quot;either&quot; } ] */}</span>
<span class="s4">&lt;label htmlFor=&quot;a&quot;&gt;</span>
  <span class="s4">Username:</span>
<span class="s4">&lt;/label&gt;</span>
<span class="s4">...</span>
<span class="s4">&lt;label htmlFor=&quot;a&quot;&gt;</span>
  <span class="s4">&lt;input id=&quot;a&quot; /&gt;</span>
<span class="s4">&lt;/label&gt;</span>
<span class="s0">```</span>

<span class="s0">## </span><span class="s2">How to manage IDs of `input`</span>

<span class="s2">A common way to think of `id` with libraries like React is, `id`s should be avoided since it must be unique on the page, and components need to be reusable. Hence it is tempted to generate `id` during render-time if `id` is required. </span><span class="s1">*</span><span class="s2">However</span><span class="s1">:*</span>

<span class="s2">IDs shouldn't be generated in the browser, so that server and client rendering are deterministic. Render-time uuids aren't just a hack, they're actually broken and should never be used.</span>

<span class="s2">To restate, </span><span class="s1">**</span><span class="s2">every ID needs to be deterministic</span><span class="s1">**</span><span class="s2">, on the server and the client, and guaranteed to be unique on the page. EG</span><span class="s1">: </span><span class="s2">For each input, a required ID prop can be passed down from as far up the tree as possible to guarantee uniqueness.</span>

<span class="s0">## </span><span class="s2">Rule options</span>

<span class="s2">This rule takes one optional object argument of type object</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">json</span>
<span class="s4">{</span>
  <span class="s4">&quot;rules&quot;: {</span>
    <span class="s4">&quot;jsx-a11y/label-has-associated-control&quot;: [ 2, {</span>
      <span class="s4">&quot;labelComponents&quot;: [&quot;CustomLabel&quot;],</span>
      <span class="s4">&quot;labelAttributes&quot;: [&quot;inputLabel&quot;],</span>
      <span class="s4">&quot;controlComponents&quot;: [&quot;CustomInput&quot;],</span>
      <span class="s4">&quot;assert&quot;: &quot;both&quot;,</span>
      <span class="s4">&quot;depth&quot;: 3,</span>
    <span class="s4">}],</span>
  <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s2">`labelComponents` is a list of custom React Component names that should be checked for an associated control.</span>

<span class="s2">`labelAttributes` is a list of attributes to check on the label component and its children for a label. Use this if you have a custom component that uses a string passed on a prop to render an HTML `label`, for example.</span>

<span class="s2">`controlComponents` is a list of custom React Components names that will output an input element. </span><span class="s1">[</span><span class="s2">Glob format</span><span class="s1">](</span><span class="s5">https://linuxhint.com/bash_globbing_tutorial/</span><span class="s1">) </span><span class="s2">is also supported for specifying names </span><span class="s1">(</span><span class="s2">e.g., `Label</span><span class="s1">*</span><span class="s2">` matches `LabelComponent` but not `CustomLabel`, `????Label` matches `LinkLabel` but not `CustomLabel`</span><span class="s1">)</span><span class="s2">.</span>

<span class="s2">`assert` asserts that the label has htmlFor, a nested label, both or either. Available options</span><span class="s1">: </span><span class="s2">`</span><span class="s1">'</span><span class="s2">htmlFor', </span><span class="s1">'</span><span class="s2">nesting', </span><span class="s1">'</span><span class="s2">both', </span><span class="s1">'</span><span class="s2">either'`.</span>

<span class="s2">`depth` </span><span class="s1">(</span><span class="s2">default 2, max 25</span><span class="s1">) </span><span class="s2">is an integer that determines how deep within a `JSXElement` label the rule should look for text content or an element with a label to determine if the `label` element will have an accessible label.</span>

<span class="s0">### </span><span class="s2">Fail</span>
<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">function Foo(props) {</span>
  <span class="s4">return &lt;label {...props} /&gt;</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s0">### </span><span class="s2">Succeed</span>
<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">function Foo(props) {</span>
    <span class="s4">const {</span>
        <span class="s4">htmlFor,</span>
        <span class="s4">...otherProps</span>
    <span class="s4">} = props;</span>

   <span class="s4">return &lt;label htmlFor={htmlFor} {...otherProps} /&gt;</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s0">### </span><span class="s2">Fail</span>
<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">&lt;input type=&quot;text&quot; /&gt;</span>
<span class="s4">&lt;label&gt;Surname&lt;/label&gt;</span>
<span class="s0">```</span>

<span class="s0">### </span><span class="s2">Succeed</span>
<span class="s0">```</span><span class="s3">jsx</span>
<span class="s4">&lt;label&gt;</span>
  <span class="s4">&lt;input type=&quot;text&quot; /&gt;</span>
  <span class="s4">Surname</span>
<span class="s4">&lt;/label&gt;</span>
<span class="s0">```</span>

<span class="s0">## </span><span class="s2">Accessibility guidelines</span>
<span class="s0">- </span><span class="s1">[</span><span class="s2">WCAG 1.3.1</span><span class="s1">](</span><span class="s5">https://www.w3.org/WAI/WCAG21/Understanding/info-and-relationships</span><span class="s1">)</span>
<span class="s0">- </span><span class="s1">[</span><span class="s2">WCAG 3.3.2</span><span class="s1">](</span><span class="s5">https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions</span><span class="s1">)</span>
<span class="s0">- </span><span class="s1">[</span><span class="s2">WCAG 4.1.2</span><span class="s1">](</span><span class="s5">https://www.w3.org/WAI/WCAG21/Understanding/name-role-value</span><span class="s1">)</span>
</pre>
</body>
</html>