<html>
<head>
<title>route-announcer.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
route-announcer.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/client/route-announcer.tsx&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import React from 'react'</span><span class="s3">\n</span><span class="s1">import { useRouter } from './router'</span><span class="s3">\n\n</span><span class="s1">const nextjsRouteAnnouncerStyles: React.CSSProperties = {</span><span class="s3">\n  </span><span class="s1">border: 0,</span><span class="s3">\n  </span><span class="s1">clip: 'rect(0 0 0 0)',</span><span class="s3">\n  </span><span class="s1">height: '1px',</span><span class="s3">\n  </span><span class="s1">margin: '-1px',</span><span class="s3">\n  </span><span class="s1">overflow: 'hidden',</span><span class="s3">\n  </span><span class="s1">padding: 0,</span><span class="s3">\n  </span><span class="s1">position: 'absolute',</span><span class="s3">\n  </span><span class="s1">top: 0,</span><span class="s3">\n  </span><span class="s1">width: '1px',</span><span class="s3">\n\n  </span><span class="s1">// https://medium.com/@jessebeach/beware-smushed-off-screen-accessible-text-5952a4c2cbfe</span><span class="s3">\n  </span><span class="s1">whiteSpace: 'nowrap',</span><span class="s3">\n  </span><span class="s1">wordWrap: 'normal',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const RouteAnnouncer = () =&gt; {</span><span class="s3">\n  </span><span class="s1">const { asPath } = useRouter()</span><span class="s3">\n  </span><span class="s1">const [routeAnnouncement, setRouteAnnouncement] = React.useState('')</span><span class="s3">\n\n  </span><span class="s1">// Only announce the path change, but not for the first load because screen</span><span class="s3">\n  </span><span class="s1">// reader will do that automatically.</span><span class="s3">\n  </span><span class="s1">const previouslyLoadedPath = React.useRef(asPath)</span><span class="s3">\n\n  </span><span class="s1">// Every time the path changes, announce the new page’s title following this</span><span class="s3">\n  </span><span class="s1">// priority: first the document title (from head), otherwise the first h1, or</span><span class="s3">\n  </span><span class="s1">// if none of these exist, then the pathname from the URL. This methodology is</span><span class="s3">\n  </span><span class="s1">// inspired by Marcy Sutton’s accessible client routing user testing. More</span><span class="s3">\n  </span><span class="s1">// information can be found here:</span><span class="s3">\n  </span><span class="s1">// https://www.gatsbyjs.com/blog/2019-07-11-user-testing-accessible-client-routing/</span><span class="s3">\n  </span><span class="s1">React.useEffect(</span><span class="s3">\n    </span><span class="s1">() =&gt; {</span><span class="s3">\n      </span><span class="s1">// If the path hasn't change, we do nothing.</span><span class="s3">\n      </span><span class="s1">if (previouslyLoadedPath.current === asPath) return</span><span class="s3">\n      </span><span class="s1">previouslyLoadedPath.current = asPath</span><span class="s3">\n\n      </span><span class="s1">if (document.title) {</span><span class="s3">\n        </span><span class="s1">setRouteAnnouncement(document.title)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">const pageHeader = document.querySelector('h1')</span><span class="s3">\n        </span><span class="s1">const content = pageHeader?.innerText ?? pageHeader?.textContent</span><span class="s3">\n\n        </span><span class="s1">setRouteAnnouncement(content || asPath)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">// TODO: switch to pathname + query object of dynamic route requirements</span><span class="s3">\n    </span><span class="s1">[asPath]</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">&lt;p</span><span class="s3">\n      </span><span class="s1">aria-live=</span><span class="s3">\&quot;</span><span class="s1">assertive</span><span class="s3">\&quot; </span><span class="s1">// Make the announcement immediately.</span><span class="s3">\n      </span><span class="s1">id=</span><span class="s3">\&quot;</span><span class="s1">__next-route-announcer__</span><span class="s3">\&quot;\n      </span><span class="s1">role=</span><span class="s3">\&quot;</span><span class="s1">alert</span><span class="s3">\&quot;\n      </span><span class="s1">style={nextjsRouteAnnouncerStyles}</span><span class="s3">\n    </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">{routeAnnouncement}</span><span class="s3">\n    </span><span class="s1">&lt;/p&gt;</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default RouteAnnouncer</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RouteAnnouncer&quot;</span><span class="s0">,</span><span class="s1">&quot;nextjsRouteAnnouncerStyles&quot;</span><span class="s0">,</span><span class="s1">&quot;border&quot;</span><span class="s0">,</span><span class="s1">&quot;clip&quot;</span><span class="s0">,</span><span class="s1">&quot;height&quot;</span><span class="s0">,</span><span class="s1">&quot;margin&quot;</span><span class="s0">,</span><span class="s1">&quot;overflow&quot;</span><span class="s0">,</span><span class="s1">&quot;padding&quot;</span><span class="s0">,</span><span class="s1">&quot;position&quot;</span><span class="s0">,</span><span class="s1">&quot;top&quot;</span><span class="s0">,</span><span class="s1">&quot;width&quot;</span><span class="s0">,</span><span class="s1">&quot;whiteSpace&quot;</span><span class="s0">,</span><span class="s1">&quot;wordWrap&quot;</span><span class="s0">,</span><span class="s1">&quot;asPath&quot;</span><span class="s0">,</span><span class="s1">&quot;useRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;routeAnnouncement&quot;</span><span class="s0">,</span><span class="s1">&quot;setRouteAnnouncement&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;useState&quot;</span><span class="s0">,</span><span class="s1">&quot;previouslyLoadedPath&quot;</span><span class="s0">,</span><span class="s1">&quot;useRef&quot;</span><span class="s0">,</span><span class="s1">&quot;useEffect&quot;</span><span class="s0">,</span><span class="s1">&quot;current&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;pageHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;querySelector&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;innerText&quot;</span><span class="s0">,</span><span class="s1">&quot;textContent&quot;</span><span class="s0">,</span><span class="s1">&quot;p&quot;</span><span class="s0">,</span><span class="s1">&quot;aria-live&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;role&quot;</span><span class="s0">,</span><span class="s1">&quot;style&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;;;;;;IAmBaA,cAAc;eAAdA;;IA6Cb,OAA6B;eAA7B;;;;;gEAhEkB;wBACQ;AAE1B,MAAMC,6BAAkD;IACtDC,QAAQ;IACRC,MAAM;IACNC,QAAQ;IACRC,QAAQ;IACRC,UAAU;IACVC,SAAS;IACTC,UAAU;IACVC,KAAK;IACLC,OAAO;IAEP,wFAAwF;IACxFC,YAAY;IACZC,UAAU;AACZ;AAEO,MAAMZ,iBAAiB;IAC5B,MAAM,EAAEa,MAAM,EAAE,GAAGC,IAAAA,iBAAS;IAC5B,MAAM,CAACC,mBAAmBC,qBAAqB,GAAGC,cAAK,CAACC,QAAQ,CAAC;IAEjE,2EAA2E;IAC3E,qCAAqC;IACrC,MAAMC,uBAAuBF,cAAK,CAACG,MAAM,CAACP;IAE1C,4EAA4E;IAC5E,6EAA6E;IAC7E,8EAA8E;IAC9E,0EAA0E;IAC1E,iCAAiC;IACjC,mFAAmF;IACnFI,cAAK,CAACI,SAAS,CACb;QACE,4CAA4C;QAC5C,IAAIF,qBAAqBG,OAAO,KAAKT,QAAQ;QAC7CM,qBAAqBG,OAAO,GAAGT;QAE/B,IAAIU,SAASC,KAAK,EAAE;YAClBR,qBAAqBO,SAASC,KAAK;QACrC,OAAO;YACL,MAAMC,aAAaF,SAASG,aAAa,CAAC;gBAC1BD;YAAhB,MAAME,UAAUF,CAAAA,wBAAAA,8BAAAA,WAAYG,SAAS,YAArBH,wBAAyBA,8BAAAA,WAAYI,WAAW;YAEhEb,qBAAqBW,WAAWd;QAClC;IACF,GACA,wEAAwE;IACxE;QAACA;KAAO;IAGV,qBACE,qBAACiB;QACCC,aAAU,YAAY,qCAAqC;;QAC3DC,IAAG;QACHC,MAAK;QACLC,OAAOjC;kBAENc;;AAGP;MAEA,WAAef&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>