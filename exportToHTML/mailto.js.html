<html>
<head>
<title>mailto.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #0033b3;}
.s1 { color: #080808;}
.s2 { color: #067d17;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #0037a6;}
.s5 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
mailto.js</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">{ pctEncChar, pctDecChars, unescapeComponent } from </span><span class="s2">&quot;../uri&quot;</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">punycode from </span><span class="s2">&quot;punycode&quot;</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{ merge, subexp, toUpperCase, toArray } from </span><span class="s2">&quot;../util&quot;</span><span class="s1">;</span>
<span class="s0">const </span><span class="s1">O = {};</span>
<span class="s0">const </span><span class="s1">isIRI = </span><span class="s0">true</span><span class="s1">;</span>
<span class="s3">//RFC 3986</span>
<span class="s0">const </span><span class="s1">UNRESERVED$$ = </span><span class="s2">&quot;[A-Za-z0-9</span><span class="s4">\\</span><span class="s2">-</span><span class="s4">\\</span><span class="s2">.</span><span class="s4">\\</span><span class="s2">_</span><span class="s4">\\</span><span class="s2">~&quot; </span><span class="s1">+ (isIRI ? </span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">xA0-</span><span class="s4">\\</span><span class="s2">u200D</span><span class="s4">\\</span><span class="s2">u2010-</span><span class="s4">\\</span><span class="s2">u2029</span><span class="s4">\\</span><span class="s2">u202F-</span><span class="s4">\\</span><span class="s2">uD7FF</span><span class="s4">\\</span><span class="s2">uF900-</span><span class="s4">\\</span><span class="s2">uFDCF</span><span class="s4">\\</span><span class="s2">uFDF0-</span><span class="s4">\\</span><span class="s2">uFFEF&quot; </span><span class="s1">: </span><span class="s2">&quot;&quot;</span><span class="s1">) + </span><span class="s2">&quot;]&quot;</span><span class="s1">;</span>
<span class="s0">const </span><span class="s1">HEXDIG$$ = </span><span class="s2">&quot;[0-9A-Fa-f]&quot;</span><span class="s1">; </span><span class="s3">//case-insensitive</span>
<span class="s0">const </span><span class="s1">PCT_ENCODED$ = subexp(subexp(</span><span class="s2">&quot;%[EFef]&quot; </span><span class="s1">+ HEXDIG$$ + </span><span class="s2">&quot;%&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$ + </span><span class="s2">&quot;%&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$) + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ subexp(</span><span class="s2">&quot;%[89A-Fa-f]&quot; </span><span class="s1">+ HEXDIG$$ + </span><span class="s2">&quot;%&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$) + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ subexp(</span><span class="s2">&quot;%&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$)); </span><span class="s3">//expanded</span>
<span class="s3">//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] &amp; ; =</span>
<span class="s3">//const ATEXT$$ = &quot;[A-Za-z0-9\\!\\#\\$\\%\\&amp;\\'\\*\\+\\-\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~]&quot;;</span>
<span class="s3">//const WSP$$ = &quot;[\\x20\\x09]&quot;;</span>
<span class="s3">//const OBS_QTEXT$$ = &quot;[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]&quot;;  //(%d1-8 / %d11-12 / %d14-31 / %d127)</span>
<span class="s3">//const QTEXT$$ = merge(&quot;[\\x21\\x23-\\x5B\\x5D-\\x7E]&quot;, OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext</span>
<span class="s3">//const VCHAR$$ = &quot;[\\x21-\\x7E]&quot;;</span>
<span class="s3">//const WSP$$ = &quot;[\\x20\\x09]&quot;;</span>
<span class="s3">//const OBS_QP$ = subexp(&quot;\\\\&quot; + merge(&quot;[\\x00\\x0D\\x0A]&quot;, OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext</span>
<span class="s3">//const FWS$ = subexp(subexp(WSP$$ + &quot;*&quot; + &quot;\\x0D\\x0A&quot;) + &quot;?&quot; + WSP$$ + &quot;+&quot;);</span>
<span class="s3">//const QUOTED_PAIR$ = subexp(subexp(&quot;\\\\&quot; + subexp(VCHAR$$ + &quot;|&quot; + WSP$$)) + &quot;|&quot; + OBS_QP$);</span>
<span class="s3">//const QUOTED_STRING$ = subexp('\\&quot;' + subexp(FWS$ + &quot;?&quot; + QCONTENT$) + &quot;*&quot; + FWS$ + &quot;?&quot; + '\\&quot;');</span>
<span class="s0">const </span><span class="s1">ATEXT$$ = </span><span class="s2">&quot;[A-Za-z0-9</span><span class="s4">\\</span><span class="s2">!</span><span class="s4">\\</span><span class="s2">$</span><span class="s4">\\</span><span class="s2">%</span><span class="s4">\\</span><span class="s2">'</span><span class="s4">\\</span><span class="s2">*</span><span class="s4">\\</span><span class="s2">+</span><span class="s4">\\</span><span class="s2">-</span><span class="s4">\\</span><span class="s2">^</span><span class="s4">\\</span><span class="s2">_</span><span class="s4">\\</span><span class="s2">`</span><span class="s4">\\</span><span class="s2">{</span><span class="s4">\\</span><span class="s2">|</span><span class="s4">\\</span><span class="s2">}</span><span class="s4">\\</span><span class="s2">~]&quot;</span><span class="s1">;</span>
<span class="s0">const </span><span class="s1">QTEXT$$ = </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">!</span><span class="s4">\\</span><span class="s2">$</span><span class="s4">\\</span><span class="s2">%</span><span class="s4">\\</span><span class="s2">'</span><span class="s4">\\</span><span class="s2">(</span><span class="s4">\\</span><span class="s2">)</span><span class="s4">\\</span><span class="s2">*</span><span class="s4">\\</span><span class="s2">+</span><span class="s4">\\</span><span class="s2">,</span><span class="s4">\\</span><span class="s2">-</span><span class="s4">\\</span><span class="s2">.0-9</span><span class="s4">\\</span><span class="s2">&lt;</span><span class="s4">\\</span><span class="s2">&gt;A-Z</span><span class="s4">\\</span><span class="s2">x5E-</span><span class="s4">\\</span><span class="s2">x7E]&quot;</span><span class="s1">;</span>
<span class="s0">const </span><span class="s1">VCHAR$$ = merge(QTEXT$$, </span><span class="s2">&quot;[</span><span class="s4">\\\&quot;\\\\</span><span class="s2">]&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">DOT_ATOM_TEXT$ = subexp(ATEXT$$ + </span><span class="s2">&quot;+&quot; </span><span class="s1">+ subexp(</span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">.&quot; </span><span class="s1">+ ATEXT$$ + </span><span class="s2">&quot;+&quot;</span><span class="s1">) + </span><span class="s2">&quot;*&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">QUOTED_PAIR$ = subexp(</span><span class="s2">&quot;</span><span class="s4">\\\\</span><span class="s2">&quot; </span><span class="s1">+ VCHAR$$);</span>
<span class="s0">const </span><span class="s1">QCONTENT$ = subexp(QTEXT$$ + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ QUOTED_PAIR$);</span>
<span class="s0">const </span><span class="s1">QUOTED_STRING$ = subexp(</span><span class="s2">'</span><span class="s4">\\</span><span class="s2">&quot;' </span><span class="s1">+ QCONTENT$ + </span><span class="s2">&quot;*&quot; </span><span class="s1">+ </span><span class="s2">'</span><span class="s4">\\</span><span class="s2">&quot;'</span><span class="s1">);</span>
<span class="s3">//RFC 6068</span>
<span class="s0">const </span><span class="s1">DTEXT_NO_OBS$$ = </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">x21-</span><span class="s4">\\</span><span class="s2">x5A</span><span class="s4">\\</span><span class="s2">x5E-</span><span class="s4">\\</span><span class="s2">x7E]&quot;</span><span class="s1">; </span><span class="s3">//%d33-90 / %d94-126</span>
<span class="s0">const </span><span class="s1">SOME_DELIMS$$ = </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">!</span><span class="s4">\\</span><span class="s2">$</span><span class="s4">\\</span><span class="s2">'</span><span class="s4">\\</span><span class="s2">(</span><span class="s4">\\</span><span class="s2">)</span><span class="s4">\\</span><span class="s2">*</span><span class="s4">\\</span><span class="s2">+</span><span class="s4">\\</span><span class="s2">,</span><span class="s4">\\</span><span class="s2">;</span><span class="s4">\\</span><span class="s2">:</span><span class="s4">\\</span><span class="s2">@]&quot;</span><span class="s1">;</span>
<span class="s0">const </span><span class="s1">QCHAR$ = subexp(UNRESERVED$$ + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ PCT_ENCODED$ + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ SOME_DELIMS$$);</span>
<span class="s0">const </span><span class="s1">DOMAIN$ = subexp(DOT_ATOM_TEXT$ + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ </span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">[&quot; </span><span class="s1">+ DTEXT_NO_OBS$$ + </span><span class="s2">&quot;*&quot; </span><span class="s1">+ </span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">]&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + </span><span class="s2">&quot;|&quot; </span><span class="s1">+ QUOTED_STRING$);</span>
<span class="s0">const </span><span class="s1">ADDR_SPEC$ = subexp(LOCAL_PART$ + </span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">@&quot; </span><span class="s1">+ DOMAIN$);</span>
<span class="s0">const </span><span class="s1">TO$ = subexp(ADDR_SPEC$ + subexp(</span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">,&quot; </span><span class="s1">+ ADDR_SPEC$) + </span><span class="s2">&quot;*&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">HFNAME$ = subexp(QCHAR$ + </span><span class="s2">&quot;*&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">HFVALUE$ = HFNAME$;</span>
<span class="s0">const </span><span class="s1">HFIELD$ = subexp(HFNAME$ + </span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">=&quot; </span><span class="s1">+ HFVALUE$);</span>
<span class="s0">const </span><span class="s1">HFIELDS2$ = subexp(HFIELD$ + subexp(</span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">&amp;&quot; </span><span class="s1">+ HFIELD$) + </span><span class="s2">&quot;*&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">HFIELDS$ = subexp(</span><span class="s2">&quot;</span><span class="s4">\\</span><span class="s2">?&quot; </span><span class="s1">+ HFIELDS2$);</span>
<span class="s0">const </span><span class="s1">MAILTO_URI = </span><span class="s0">new </span><span class="s1">RegExp(</span><span class="s2">&quot;^mailto</span><span class="s4">\\</span><span class="s2">:&quot; </span><span class="s1">+ TO$ + </span><span class="s2">&quot;?&quot; </span><span class="s1">+ HFIELDS$ + </span><span class="s2">&quot;?$&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">UNRESERVED = </span><span class="s0">new </span><span class="s1">RegExp(UNRESERVED$$, </span><span class="s2">&quot;g&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">PCT_ENCODED = </span><span class="s0">new </span><span class="s1">RegExp(PCT_ENCODED$, </span><span class="s2">&quot;g&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">NOT_LOCAL_PART = </span><span class="s0">new </span><span class="s1">RegExp(merge(</span><span class="s2">&quot;[^]&quot;</span><span class="s1">, ATEXT$$, </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">.]&quot;</span><span class="s1">, </span><span class="s2">'[</span><span class="s4">\\</span><span class="s2">&quot;]'</span><span class="s1">, VCHAR$$), </span><span class="s2">&quot;g&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">NOT_DOMAIN = </span><span class="s0">new </span><span class="s1">RegExp(merge(</span><span class="s2">&quot;[^]&quot;</span><span class="s1">, ATEXT$$, </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">.]&quot;</span><span class="s1">, </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">[]&quot;</span><span class="s1">, DTEXT_NO_OBS$$, </span><span class="s2">&quot;[</span><span class="s4">\\</span><span class="s2">]]&quot;</span><span class="s1">), </span><span class="s2">&quot;g&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">NOT_HFNAME = </span><span class="s0">new </span><span class="s1">RegExp(merge(</span><span class="s2">&quot;[^]&quot;</span><span class="s1">, UNRESERVED$$, SOME_DELIMS$$), </span><span class="s2">&quot;g&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">NOT_HFVALUE = NOT_HFNAME;</span>
<span class="s0">const </span><span class="s1">TO = </span><span class="s0">new </span><span class="s1">RegExp(</span><span class="s2">&quot;^&quot; </span><span class="s1">+ TO$ + </span><span class="s2">&quot;$&quot;</span><span class="s1">);</span>
<span class="s0">const </span><span class="s1">HFIELDS = </span><span class="s0">new </span><span class="s1">RegExp(</span><span class="s2">&quot;^&quot; </span><span class="s1">+ HFIELDS2$ + </span><span class="s2">&quot;$&quot;</span><span class="s1">);</span>
<span class="s0">function </span><span class="s1">decodeUnreserved(str) {</span>
    <span class="s0">const </span><span class="s1">decStr = pctDecChars(str);</span>
    <span class="s0">return </span><span class="s1">(!decStr.match(UNRESERVED) ? str : decStr);</span>
<span class="s1">}</span>
<span class="s0">const </span><span class="s1">handler = {</span>
    <span class="s1">scheme: </span><span class="s2">&quot;mailto&quot;</span><span class="s1">,</span>
    <span class="s1">parse: </span><span class="s0">function </span><span class="s1">(components, options) {</span>
        <span class="s0">const </span><span class="s1">mailtoComponents = components;</span>
        <span class="s0">const </span><span class="s1">to = mailtoComponents.to = (mailtoComponents.path ? mailtoComponents.path.split(</span><span class="s2">&quot;,&quot;</span><span class="s1">) : []);</span>
        <span class="s1">mailtoComponents.path = undefined;</span>
        <span class="s0">if </span><span class="s1">(mailtoComponents.query) {</span>
            <span class="s0">let </span><span class="s1">unknownHeaders = </span><span class="s0">false</span><span class="s1">;</span>
            <span class="s0">const </span><span class="s1">headers = {};</span>
            <span class="s0">const </span><span class="s1">hfields = mailtoComponents.query.split(</span><span class="s2">&quot;&amp;&quot;</span><span class="s1">);</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">x = </span><span class="s5">0</span><span class="s1">, xl = hfields.length; x &lt; xl; ++x) {</span>
                <span class="s0">const </span><span class="s1">hfield = hfields[x].split(</span><span class="s2">&quot;=&quot;</span><span class="s1">);</span>
                <span class="s0">switch </span><span class="s1">(hfield[</span><span class="s5">0</span><span class="s1">]) {</span>
                    <span class="s0">case </span><span class="s2">&quot;to&quot;</span><span class="s1">:</span>
                        <span class="s0">const </span><span class="s1">toAddrs = hfield[</span><span class="s5">1</span><span class="s1">].split(</span><span class="s2">&quot;,&quot;</span><span class="s1">);</span>
                        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">x = </span><span class="s5">0</span><span class="s1">, xl = toAddrs.length; x &lt; xl; ++x) {</span>
                            <span class="s1">to.push(toAddrs[x]);</span>
                        <span class="s1">}</span>
                        <span class="s0">break</span><span class="s1">;</span>
                    <span class="s0">case </span><span class="s2">&quot;subject&quot;</span><span class="s1">:</span>
                        <span class="s1">mailtoComponents.subject = unescapeComponent(hfield[</span><span class="s5">1</span><span class="s1">], options);</span>
                        <span class="s0">break</span><span class="s1">;</span>
                    <span class="s0">case </span><span class="s2">&quot;body&quot;</span><span class="s1">:</span>
                        <span class="s1">mailtoComponents.body = unescapeComponent(hfield[</span><span class="s5">1</span><span class="s1">], options);</span>
                        <span class="s0">break</span><span class="s1">;</span>
                    <span class="s0">default</span><span class="s1">:</span>
                        <span class="s1">unknownHeaders = </span><span class="s0">true</span><span class="s1">;</span>
                        <span class="s1">headers[unescapeComponent(hfield[</span><span class="s5">0</span><span class="s1">], options)] = unescapeComponent(hfield[</span><span class="s5">1</span><span class="s1">], options);</span>
                        <span class="s0">break</span><span class="s1">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(unknownHeaders)</span>
                <span class="s1">mailtoComponents.headers = headers;</span>
        <span class="s1">}</span>
        <span class="s1">mailtoComponents.query = undefined;</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">x = </span><span class="s5">0</span><span class="s1">, xl = to.length; x &lt; xl; ++x) {</span>
            <span class="s0">const </span><span class="s1">addr = to[x].split(</span><span class="s2">&quot;@&quot;</span><span class="s1">);</span>
            <span class="s1">addr[</span><span class="s5">0</span><span class="s1">] = unescapeComponent(addr[</span><span class="s5">0</span><span class="s1">]);</span>
            <span class="s0">if </span><span class="s1">(!options.unicodeSupport) {</span>
                <span class="s3">//convert Unicode IDN -&gt; ASCII IDN</span>
                <span class="s0">try </span><span class="s1">{</span>
                    <span class="s1">addr[</span><span class="s5">1</span><span class="s1">] = punycode.toASCII(unescapeComponent(addr[</span><span class="s5">1</span><span class="s1">], options).toLowerCase());</span>
                <span class="s1">}</span>
                <span class="s0">catch </span><span class="s1">(e) {</span>
                    <span class="s1">mailtoComponents.error = mailtoComponents.error || </span><span class="s2">&quot;Email address's domain name can not be converted to ASCII via punycode: &quot; </span><span class="s1">+ e;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">else </span><span class="s1">{</span>
                <span class="s1">addr[</span><span class="s5">1</span><span class="s1">] = unescapeComponent(addr[</span><span class="s5">1</span><span class="s1">], options).toLowerCase();</span>
            <span class="s1">}</span>
            <span class="s1">to[x] = addr.join(</span><span class="s2">&quot;@&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">mailtoComponents;</span>
    <span class="s1">},</span>
    <span class="s1">serialize: </span><span class="s0">function </span><span class="s1">(mailtoComponents, options) {</span>
        <span class="s0">const </span><span class="s1">components = mailtoComponents;</span>
        <span class="s0">const </span><span class="s1">to = toArray(mailtoComponents.to);</span>
        <span class="s0">if </span><span class="s1">(to) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">let </span><span class="s1">x = </span><span class="s5">0</span><span class="s1">, xl = to.length; x &lt; xl; ++x) {</span>
                <span class="s0">const </span><span class="s1">toAddr = String(to[x]);</span>
                <span class="s0">const </span><span class="s1">atIdx = toAddr.lastIndexOf(</span><span class="s2">&quot;@&quot;</span><span class="s1">);</span>
                <span class="s0">const </span><span class="s1">localPart = (toAddr.slice(</span><span class="s5">0</span><span class="s1">, atIdx)).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);</span>
                <span class="s0">let </span><span class="s1">domain = toAddr.slice(atIdx + </span><span class="s5">1</span><span class="s1">);</span>
                <span class="s3">//convert IDN via punycode</span>
                <span class="s0">try </span><span class="s1">{</span>
                    <span class="s1">domain = (!options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));</span>
                <span class="s1">}</span>
                <span class="s0">catch </span><span class="s1">(e) {</span>
                    <span class="s1">components.error = components.error || </span><span class="s2">&quot;Email address's domain name can not be converted to &quot; </span><span class="s1">+ (!options.iri ? </span><span class="s2">&quot;ASCII&quot; </span><span class="s1">: </span><span class="s2">&quot;Unicode&quot;</span><span class="s1">) + </span><span class="s2">&quot; via punycode: &quot; </span><span class="s1">+ e;</span>
                <span class="s1">}</span>
                <span class="s1">to[x] = localPart + </span><span class="s2">&quot;@&quot; </span><span class="s1">+ domain;</span>
            <span class="s1">}</span>
            <span class="s1">components.path = to.join(</span><span class="s2">&quot;,&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s0">const </span><span class="s1">headers = mailtoComponents.headers = mailtoComponents.headers || {};</span>
        <span class="s0">if </span><span class="s1">(mailtoComponents.subject)</span>
            <span class="s1">headers[</span><span class="s2">&quot;subject&quot;</span><span class="s1">] = mailtoComponents.subject;</span>
        <span class="s0">if </span><span class="s1">(mailtoComponents.body)</span>
            <span class="s1">headers[</span><span class="s2">&quot;body&quot;</span><span class="s1">] = mailtoComponents.body;</span>
        <span class="s0">const </span><span class="s1">fields = [];</span>
        <span class="s0">for </span><span class="s1">(</span><span class="s0">const </span><span class="s1">name </span><span class="s0">in </span><span class="s1">headers) {</span>
            <span class="s0">if </span><span class="s1">(headers[name] !== O[name]) {</span>
                <span class="s1">fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) +</span>
                    <span class="s2">&quot;=&quot; </span><span class="s1">+</span>
                    <span class="s1">headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(fields.length) {</span>
            <span class="s1">components.query = fields.join(</span><span class="s2">&quot;&amp;&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">components;</span>
    <span class="s1">}</span>
<span class="s1">};</span>
<span class="s0">export default </span><span class="s1">handler;</span>
<span class="s3">//# sourceMappingURL=mailto.js.map</span></pre>
</body>
</html>