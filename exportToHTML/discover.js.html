<html>
<head>
<title>discover.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #1750eb;}
.s4 { color: #8c8c8c; font-style: italic;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
discover.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s1">createMetadataExportsCode: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">createStaticMetadataFromRoute: </span><span class="s2">null</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">_export(target, all) {</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">name </span><span class="s2">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s1">createMetadataExportsCode: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">createMetadataExportsCode;</span>
    <span class="s1">},</span>
    <span class="s1">createStaticMetadataFromRoute: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">createStaticMetadataFromRoute;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_path = </span><span class="s4">/*#__PURE__*/ </span><span class="s1">_interop_require_default(require(</span><span class="s0">&quot;path&quot;</span><span class="s1">));</span>
<span class="s2">const </span><span class="s1">_querystring = require(</span><span class="s0">&quot;querystring&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_ismetadataroute = require(</span><span class="s0">&quot;../../../../lib/metadata/is-metadata-route&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">_constants = require(</span><span class="s0">&quot;../../../../lib/constants&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">_interop_require_default(obj) {</span>
    <span class="s2">return </span><span class="s1">obj &amp;&amp; obj.__esModule ? obj : {</span>
        <span class="s2">default</span><span class="s1">: obj</span>
    <span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">const </span><span class="s1">METADATA_TYPE = </span><span class="s0">'metadata'</span><span class="s1">;</span>
<span class="s2">const </span><span class="s1">NUMERIC_SUFFIX_ARRAY = Array(</span><span class="s3">10</span><span class="s1">).fill(</span><span class="s3">0</span><span class="s1">);</span>
<span class="s4">// Produce all compositions with filename (icon, apple-icon, etc.) with extensions (png, jpg, etc.)</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">enumMetadataFiles(dir, filename, extensions, { metadataResolver, </span><span class="s4">// When set to true, possible filename without extension could: icon, icon0, ..., icon9</span>
<span class="s1">numericSuffix }) {</span>
    <span class="s2">const </span><span class="s1">collectedFiles = [];</span>
    <span class="s4">// Collect &lt;filename&gt;.&lt;ext&gt;, &lt;filename&gt;[].&lt;ext&gt;</span>
    <span class="s2">const </span><span class="s1">possibleFileNames = [</span>
        <span class="s1">filename</span>
    <span class="s1">].concat(numericSuffix ? NUMERIC_SUFFIX_ARRAY.map((_, index)=&gt;filename + index) : []);</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">name of possibleFileNames){</span>
        <span class="s2">const </span><span class="s1">resolved = </span><span class="s2">await </span><span class="s1">metadataResolver(dir, name, extensions);</span>
        <span class="s2">if </span><span class="s1">(resolved) {</span>
            <span class="s1">collectedFiles.push(resolved);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">collectedFiles;</span>
<span class="s1">}</span>
<span class="s1">async </span><span class="s2">function </span><span class="s1">createStaticMetadataFromRoute(resolvedDir, { segment, metadataResolver, isRootLayoutOrRootPage, pageExtensions, basePath }) {</span>
    <span class="s2">let </span><span class="s1">hasStaticMetadataFiles = </span><span class="s2">false</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">staticImagesMetadata = {</span>
        <span class="s1">icon: [],</span>
        <span class="s1">apple: [],</span>
        <span class="s1">twitter: [],</span>
        <span class="s1">openGraph: [],</span>
        <span class="s1">manifest: undefined</span>
    <span class="s1">};</span>
    <span class="s1">async </span><span class="s2">function </span><span class="s1">collectIconModuleIfExists(type) {</span>
        <span class="s2">if </span><span class="s1">(type === </span><span class="s0">'manifest'</span><span class="s1">) {</span>
            <span class="s2">const </span><span class="s1">staticManifestExtension = [</span>
                <span class="s0">'webmanifest'</span><span class="s1">,</span>
                <span class="s0">'json'</span>
            <span class="s1">];</span>
            <span class="s2">const </span><span class="s1">manifestFile = </span><span class="s2">await </span><span class="s1">enumMetadataFiles(resolvedDir, </span><span class="s0">'manifest'</span><span class="s1">, staticManifestExtension.concat(pageExtensions), {</span>
                <span class="s1">metadataResolver,</span>
                <span class="s1">numericSuffix: </span><span class="s2">false</span>
            <span class="s1">});</span>
            <span class="s2">if </span><span class="s1">(manifestFile.length &gt; </span><span class="s3">0</span><span class="s1">) {</span>
                <span class="s1">hasStaticMetadataFiles = </span><span class="s2">true</span><span class="s1">;</span>
                <span class="s2">const </span><span class="s1">{ name, ext } = _path.default.parse(manifestFile[</span><span class="s3">0</span><span class="s1">]);</span>
                <span class="s2">const </span><span class="s1">extension = staticManifestExtension.includes(ext.slice(</span><span class="s3">1</span><span class="s1">)) ? ext.slice(</span><span class="s3">1</span><span class="s1">) : </span><span class="s0">'webmanifest'</span><span class="s1">;</span>
                <span class="s1">staticImagesMetadata.manifest = JSON.stringify(</span><span class="s0">`</span><span class="s1">${basePath}</span><span class="s0">/</span><span class="s1">${name}</span><span class="s0">.</span><span class="s1">${extension}</span><span class="s0">`</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s2">return</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s2">const </span><span class="s1">isFavicon = type === </span><span class="s0">'favicon'</span><span class="s1">;</span>
        <span class="s2">const </span><span class="s1">resolvedMetadataFiles = </span><span class="s2">await </span><span class="s1">enumMetadataFiles(resolvedDir, _ismetadataroute.STATIC_METADATA_IMAGES[type].filename, [</span>
            <span class="s1">..._ismetadataroute.STATIC_METADATA_IMAGES[type].extensions,</span>
            <span class="s1">...isFavicon ? [] : pageExtensions</span>
        <span class="s1">], {</span>
            <span class="s1">metadataResolver,</span>
            <span class="s1">numericSuffix: !isFavicon</span>
        <span class="s1">});</span>
        <span class="s1">resolvedMetadataFiles.sort((a, b)=&gt;a.localeCompare(b)).forEach((filepath)=&gt;{</span>
            <span class="s2">const </span><span class="s1">imageModuleImportSource = </span><span class="s0">`next-metadata-image-loader?</span><span class="s1">${(</span><span class="s3">0</span><span class="s1">, _querystring.stringify)({</span>
                <span class="s1">type,</span>
                <span class="s1">segment,</span>
                <span class="s1">basePath,</span>
                <span class="s1">pageExtensions</span>
            <span class="s1">})}</span><span class="s0">!</span><span class="s1">${filepath}</span><span class="s0">?</span><span class="s1">${_constants.WEBPACK_RESOURCE_QUERIES.metadata}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s2">const </span><span class="s1">imageModule = </span><span class="s0">`(async (props) =&gt; (await import(/* webpackMode: &quot;eager&quot; */ </span><span class="s1">${JSON.stringify(imageModuleImportSource)}</span><span class="s0">)).default(props))`</span><span class="s1">;</span>
            <span class="s1">hasStaticMetadataFiles = </span><span class="s2">true</span><span class="s1">;</span>
            <span class="s2">if </span><span class="s1">(type === </span><span class="s0">'favicon'</span><span class="s1">) {</span>
                <span class="s1">staticImagesMetadata.icon.unshift(imageModule);</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s1">staticImagesMetadata[type].push(imageModule);</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
    <span class="s4">// Intentionally make these serial to reuse directory access cache.</span>
    <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'icon'</span><span class="s1">);</span>
    <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'apple'</span><span class="s1">);</span>
    <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'openGraph'</span><span class="s1">);</span>
    <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'twitter'</span><span class="s1">);</span>
    <span class="s2">if </span><span class="s1">(isRootLayoutOrRootPage) {</span>
        <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'favicon'</span><span class="s1">);</span>
        <span class="s2">await </span><span class="s1">collectIconModuleIfExists(</span><span class="s0">'manifest'</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">hasStaticMetadataFiles ? staticImagesMetadata : </span><span class="s2">null</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">createMetadataExportsCode(metadata) {</span>
    <span class="s2">return </span><span class="s1">metadata ? </span><span class="s0">`</span><span class="s1">${METADATA_TYPE}</span><span class="s0">: { 
    icon: [</span><span class="s1">${metadata.icon.join(</span><span class="s0">','</span><span class="s1">)}</span><span class="s0">], 
    apple: [</span><span class="s1">${metadata.apple.join(</span><span class="s0">','</span><span class="s1">)}</span><span class="s0">], 
    openGraph: [</span><span class="s1">${metadata.openGraph.join(</span><span class="s0">','</span><span class="s1">)}</span><span class="s0">], 
    twitter: [</span><span class="s1">${metadata.twitter.join(</span><span class="s0">','</span><span class="s1">)}</span><span class="s0">], 
    manifest: </span><span class="s1">${metadata.manifest ? metadata.manifest : </span><span class="s0">'undefined'</span><span class="s1">}</span>
  <span class="s0">}` </span><span class="s1">: </span><span class="s0">''</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s4">//# sourceMappingURL=discover.js.map</span></pre>
</body>
</html>