<html>
<head>
<title>cached-route-matcher-provider.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
cached-route-matcher-provider.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../src/server/route-matcher-providers/helpers/cached-route-matcher-provider.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { RouteMatcherProvider } from '../route-matcher-provider'</span><span class="s3">\n</span><span class="s1">import type { RouteMatcher } from '../../route-matchers/route-matcher'</span><span class="s3">\n\n</span><span class="s1">interface LoaderComparable&lt;D&gt; {</span><span class="s3">\n  </span><span class="s1">load(): Promise&lt;D&gt;</span><span class="s3">\n  </span><span class="s1">compare(left: D, right: D): boolean</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* This will memoize the matchers if the loaded data is comparable.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export abstract class CachedRouteMatcherProvider&lt;</span><span class="s3">\n  </span><span class="s1">M extends RouteMatcher = RouteMatcher,</span><span class="s3">\n  </span><span class="s1">D = any,</span><span class="s3">\n</span><span class="s1">&gt; implements RouteMatcherProvider&lt;M&gt;</span><span class="s3">\n</span><span class="s1">{</span><span class="s3">\n  </span><span class="s1">private data?: D</span><span class="s3">\n  </span><span class="s1">private cached: ReadonlyArray&lt;M&gt; = []</span><span class="s3">\n\n  </span><span class="s1">constructor(private readonly loader: LoaderComparable&lt;D&gt;) {}</span><span class="s3">\n\n  </span><span class="s1">protected abstract transform(data: D): Promise&lt;ReadonlyArray&lt;M&gt;&gt;</span><span class="s3">\n\n  </span><span class="s1">public async matchers(): Promise&lt;readonly M[]&gt; {</span><span class="s3">\n    </span><span class="s1">const data = await this.loader.load()</span><span class="s3">\n    </span><span class="s1">if (!data) return []</span><span class="s3">\n\n    </span><span class="s1">// Return the cached matchers if the data has not changed.</span><span class="s3">\n    </span><span class="s1">if (this.data &amp;&amp; this.loader.compare(this.data, data)) return this.cached</span><span class="s3">\n    </span><span class="s1">this.data = data</span><span class="s3">\n\n    </span><span class="s1">// Transform the manifest into matchers.</span><span class="s3">\n    </span><span class="s1">const matchers = await this.transform(data)</span><span class="s3">\n\n    </span><span class="s1">// Cache the matchers.</span><span class="s3">\n    </span><span class="s1">this.cached = matchers</span><span class="s3">\n\n    </span><span class="s1">return matchers</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;CachedRouteMatcherProvider&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;loader&quot;</span><span class="s0">,</span><span class="s1">&quot;cached&quot;</span><span class="s0">,</span><span class="s1">&quot;matchers&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;load&quot;</span><span class="s0">,</span><span class="s1">&quot;compare&quot;</span><span class="s0">,</span><span class="s1">&quot;transform&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAWsBA;;;eAAAA;;;AAAf,MAAeA;IAQpBC,YAAY,AAAiBC,MAA2B,CAAE;aAA7BA,SAAAA;aAFrBC,SAA2B,EAAE;IAEsB;IAI3D,MAAaC,WAAkC;QAC7C,MAAMC,OAAO,MAAM,IAAI,CAACH,MAAM,CAACI,IAAI;QACnC,IAAI,CAACD,MAAM,OAAO,EAAE;QAEpB,0DAA0D;QAC1D,IAAI,IAAI,CAACA,IAAI,IAAI,IAAI,CAACH,MAAM,CAACK,OAAO,CAAC,IAAI,CAACF,IAAI,EAAEA,OAAO,OAAO,IAAI,CAACF,MAAM;QACzE,IAAI,CAACE,IAAI,GAAGA;QAEZ,wCAAwC;QACxC,MAAMD,WAAW,MAAM,IAAI,CAACI,SAAS,CAACH;QAEtC,sBAAsB;QACtB,IAAI,CAACF,MAAM,GAAGC;QAEd,OAAOA;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>