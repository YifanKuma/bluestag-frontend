<html>
<head>
<title>match-path-data.ts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #0033b3;}
.s1 { color: #080808;}
.s2 { color: #067d17;}
.s3 { color: #8c8c8c; font-style: italic;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
match-path-data.ts</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">{ join, dirname } from </span><span class="s2">&quot;path&quot;</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{ removeExtension } from </span><span class="s2">&quot;../../filesystem&quot;</span><span class="s1">;</span>

<span class="s0">export interface </span><span class="s1">OneTest {</span>
  <span class="s1">readonly name: string;</span>
  <span class="s1">readonly only?: boolean;</span>
  <span class="s1">readonly skip?: boolean;</span>
  <span class="s1">readonly absoluteBaseUrl: string;</span>
  <span class="s1">readonly paths: { [key: string]: Array&lt;string&gt; };</span>
  <span class="s1">readonly mainFields?: string[];</span>
  <span class="s1">readonly addMatchAll?: boolean;</span>
  <span class="s1">readonly existingFiles: ReadonlyArray&lt;string&gt;;</span>
  <span class="s1">readonly requestedModule: string;</span>
  <span class="s1">readonly extensions: ReadonlyArray&lt;string&gt;;</span>
  <span class="s1">readonly packageJson?: {};</span>
  <span class="s1">readonly expectedPath: string | undefined;</span>
<span class="s1">}</span>

<span class="s0">const </span><span class="s1">defaultExtensionsWhenRunningInTsNode = [</span>
  <span class="s2">&quot;.js&quot;</span><span class="s1">,</span>
  <span class="s2">&quot;.json&quot;</span><span class="s1">,</span>
  <span class="s2">&quot;.node&quot;</span><span class="s1">,</span>
  <span class="s2">&quot;.ts&quot;</span><span class="s1">,</span>
  <span class="s2">&quot;.tsx&quot;</span><span class="s1">,</span>
<span class="s1">];</span>

<span class="s0">export const </span><span class="s1">tests: ReadonlyArray&lt;OneTest&gt; = [</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should locate path that matches with star and exists&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {</span>
      <span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">],</span>
    <span class="s1">},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: dirname(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve to correct path when many are specified&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {</span>
      <span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;foo1/*&quot;</span><span class="s1">, </span><span class="s2">&quot;foo2/*&quot;</span><span class="s1">, </span><span class="s2">&quot;location/*&quot;</span><span class="s1">, </span><span class="s2">&quot;foo3/*&quot;</span><span class="s1">],</span>
    <span class="s1">},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.ts&quot;</span><span class="s1">],</span>
    <span class="s1">expectedPath: dirname(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name:</span>
      <span class="s2">&quot;should locate path that matches with star and prioritize pattern with longest prefix&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {</span>
      <span class="s2">&quot;*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">],</span>
      <span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">],</span>
    <span class="s1">},</span>
    <span class="s1">existingFiles: [</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;lib&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">),</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">),</span>
    <span class="s1">],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: dirname(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should locate path that matches with star and exists with extension&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib.myext&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.js&quot;</span><span class="s1">, </span><span class="s2">&quot;.myext&quot;</span><span class="s1">],</span>
    <span class="s1">expectedPath: removeExtension(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib.myext&quot;</span><span class="s1">)),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve request with extension specified&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;test.jpg&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/test.jpg&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;test.jpg&quot;</span><span class="s1">),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should locate path that matches without star and exists&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {</span>
      <span class="s2">&quot;lib/foo&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/foo&quot;</span><span class="s1">],</span>
    <span class="s1">},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;foo.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/foo&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: removeExtension(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;foo.ts&quot;</span><span class="s1">)),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve to parent folder when filename is in subfolder&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: dirname(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve from main field in package.json&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">packageJson: { main: </span><span class="s2">&quot;./kalle.ts&quot; </span><span class="s1">},</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.ts&quot;</span><span class="s1">),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve from main field in package.json (js)&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib.js&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">)],</span>
    <span class="s1">packageJson: { main: </span><span class="s2">&quot;./kalle.js&quot; </span><span class="s1">},</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib.js&quot;</span><span class="s1">,</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.ts&quot;</span><span class="s1">, </span><span class="s2">&quot;.js&quot;</span><span class="s1">],</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib.js&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve from list of fields by priority in package.json&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">mainFields: [</span><span class="s2">&quot;missing&quot;</span><span class="s1">, </span><span class="s2">&quot;browser&quot;</span><span class="s1">, </span><span class="s2">&quot;main&quot;</span><span class="s1">],</span>
    <span class="s1">packageJson: { main: </span><span class="s2">&quot;./main.js&quot;</span><span class="s1">, browser: </span><span class="s2">&quot;./browser.js&quot; </span><span class="s1">},</span>
    <span class="s1">existingFiles: [</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;main.js&quot;</span><span class="s1">), </span><span class="s3">// mainFilePath</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;browser.js&quot;</span><span class="s1">), </span><span class="s3">// browserFilePath</span>
    <span class="s1">],</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.ts&quot;</span><span class="s1">, </span><span class="s2">&quot;.js&quot;</span><span class="s1">],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylibjs&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;browser.js&quot;</span><span class="s1">),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should ignore field mappings to missing files in package.json&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">mainFields: [</span><span class="s2">&quot;browser&quot;</span><span class="s1">, </span><span class="s2">&quot;main&quot;</span><span class="s1">],</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylibjs&quot;</span><span class="s1">,</span>
    <span class="s1">packageJson: {</span>
      <span class="s1">main: </span><span class="s2">&quot;./kalle.js&quot;</span><span class="s1">,</span>
      <span class="s1">browser: </span><span class="s2">&quot;./nope.js&quot;</span><span class="s1">,</span>
    <span class="s1">},</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.ts&quot;</span><span class="s1">, </span><span class="s2">&quot;.js&quot;</span><span class="s1">],</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should ignore advanced field mappings in package.json&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">),</span>
      <span class="s1">join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;browser.js&quot;</span><span class="s1">),</span>
    <span class="s1">],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylibjs&quot;</span><span class="s1">,</span>
    <span class="s1">packageJson: {</span>
      <span class="s1">main: </span><span class="s2">&quot;./kalle.js&quot;</span><span class="s1">,</span>
      <span class="s1">browser: { mylibjs: </span><span class="s2">&quot;./browser.js&quot;</span><span class="s1">, </span><span class="s2">&quot;./kalle.js&quot;</span><span class="s1">: </span><span class="s2">&quot;./browser.js&quot; </span><span class="s1">},</span>
    <span class="s1">},</span>
    <span class="s1">extensions: [</span><span class="s2">&quot;.ts&quot;</span><span class="s1">, </span><span class="s2">&quot;.js&quot;</span><span class="s1">],</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylibjs&quot;</span><span class="s1">, </span><span class="s2">&quot;kalle.js&quot;</span><span class="s1">),</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve to with the help of baseUrl when not explicitly set&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: dirname(join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should not resolve with the help of baseUrl when asked not to&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {},</span>
    <span class="s1">addMatchAll: </span><span class="s0">false</span><span class="s1">,</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: undefined,</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should not locate path that does not match&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: { </span><span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">] },</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: undefined,</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should not resolve typings file (index.d.ts)&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {</span>
      <span class="s2">&quot;lib/*&quot;</span><span class="s1">: [</span><span class="s2">&quot;location/*&quot;</span><span class="s1">],</span>
    <span class="s1">},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;location&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.d.ts&quot;</span><span class="s1">)],</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;lib/mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: undefined,</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
  <span class="s1">{</span>
    <span class="s1">name: </span><span class="s2">&quot;should resolve main file with cjs file extension&quot;</span><span class="s1">,</span>
    <span class="s1">absoluteBaseUrl: </span><span class="s2">&quot;/root/&quot;</span><span class="s1">,</span>
    <span class="s1">paths: {},</span>
    <span class="s1">existingFiles: [join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.cjs&quot;</span><span class="s1">)],</span>
    <span class="s1">packageJson: {</span>
      <span class="s1">main: </span><span class="s2">&quot;./index.cjs&quot;</span><span class="s1">,</span>
    <span class="s1">},</span>
    <span class="s1">requestedModule: </span><span class="s2">&quot;mylib&quot;</span><span class="s1">,</span>
    <span class="s1">expectedPath: join(</span><span class="s2">&quot;/root&quot;</span><span class="s1">, </span><span class="s2">&quot;mylib&quot;</span><span class="s1">, </span><span class="s2">&quot;index.cjs&quot;</span><span class="s1">),</span>
    <span class="s1">extensions: defaultExtensionsWhenRunningInTsNode,</span>
  <span class="s1">},</span>
<span class="s1">];</span>
</pre>
</body>
</html>