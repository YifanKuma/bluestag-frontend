<html>
<head>
<title>json5</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #080808;}
.s2 { color: #067d17;}
.s3 { color: #0033b3;}
.s4 { color: #1750eb;}
.s5 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
json5</font>
</center></td></tr></table>
<pre><span class="s0">#!/usr/bin/env node</span>
<span class="s2">'use strict'</span><span class="s1">;</span><span class="s3">var </span><span class="s1">_fs=require(</span><span class="s2">'fs'</span><span class="s1">);</span><span class="s3">var </span><span class="s1">_fs2=_interopRequireDefault(_fs);</span><span class="s3">var </span><span class="s1">_path=require(</span><span class="s2">'path'</span><span class="s1">);</span><span class="s3">var </span><span class="s1">_path2=_interopRequireDefault(_path);</span><span class="s3">var </span><span class="s1">_minimist=require(</span><span class="s2">'minimist'</span><span class="s1">);</span><span class="s3">var </span><span class="s1">_minimist2=_interopRequireDefault(_minimist);</span><span class="s3">var </span><span class="s1">_package=require(</span><span class="s2">'../package.json'</span><span class="s1">);</span><span class="s3">var </span><span class="s1">_package2=_interopRequireDefault(_package);</span><span class="s3">var </span><span class="s1">_=require(</span><span class="s2">'./'</span><span class="s1">);</span><span class="s3">var </span><span class="s1">_2=_interopRequireDefault(_);</span><span class="s3">function </span><span class="s1">_interopRequireDefault(obj){</span><span class="s3">return </span><span class="s1">obj&amp;&amp;obj.__esModule?obj:{</span><span class="s3">default</span><span class="s1">:obj}}</span><span class="s3">var </span><span class="s1">argv=(</span><span class="s4">0</span><span class="s1">,_minimist2.default)(process.argv.slice(</span><span class="s4">2</span><span class="s1">),{alias:{</span><span class="s2">'convert'</span><span class="s1">:</span><span class="s2">'c'</span><span class="s1">,</span><span class="s2">'space'</span><span class="s1">:</span><span class="s2">'s'</span><span class="s1">,</span><span class="s2">'validate'</span><span class="s1">:</span><span class="s2">'v'</span><span class="s1">,</span><span class="s2">'out-file'</span><span class="s1">:</span><span class="s2">'o'</span><span class="s1">,</span><span class="s2">'version'</span><span class="s1">:</span><span class="s2">'V'</span><span class="s1">,</span><span class="s2">'help'</span><span class="s1">:</span><span class="s2">'h'</span><span class="s1">},boolean:[</span><span class="s2">'convert'</span><span class="s1">,</span><span class="s2">'validate'</span><span class="s1">,</span><span class="s2">'version'</span><span class="s1">,</span><span class="s2">'help'</span><span class="s1">],string:[</span><span class="s2">'space'</span><span class="s1">,</span><span class="s2">'out-file'</span><span class="s1">]});</span><span class="s3">if</span><span class="s1">(argv.version){version()}</span><span class="s3">else if</span><span class="s1">(argv.help){usage()}</span><span class="s3">else</span><span class="s1">{</span><span class="s3">var </span><span class="s1">inFilename=argv._[</span><span class="s4">0</span><span class="s1">];</span><span class="s3">var </span><span class="s1">readStream=</span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(inFilename){readStream=_fs2.default.createReadStream(inFilename)}</span><span class="s3">else</span><span class="s1">{readStream=process.stdin}</span><span class="s3">var </span><span class="s1">json5=</span><span class="s2">''</span><span class="s1">;readStream.on(</span><span class="s2">'data'</span><span class="s1">,</span><span class="s3">function</span><span class="s1">(data){json5+=data});readStream.on(</span><span class="s2">'end'</span><span class="s1">,</span><span class="s3">function</span><span class="s1">(){</span><span class="s3">var </span><span class="s1">space=</span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(argv.space===</span><span class="s2">'t'</span><span class="s1">||argv.space===</span><span class="s2">'tab'</span><span class="s1">){space=</span><span class="s2">'</span><span class="s5">\t</span><span class="s2">'</span><span class="s1">}</span><span class="s3">else</span><span class="s1">{space=Number(argv.space)}</span><span class="s3">var </span><span class="s1">value=</span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span><span class="s3">try</span><span class="s1">{value=_2.default.parse(json5);</span><span class="s3">if</span><span class="s1">(!argv.validate){</span><span class="s3">var </span><span class="s1">json=JSON.stringify(value,</span><span class="s3">null</span><span class="s1">,space);</span><span class="s3">var </span><span class="s1">writeStream=</span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(argv.convert&amp;&amp;inFilename&amp;&amp;!argv.o){</span><span class="s3">var </span><span class="s1">parsedFilename=_path2.default.parse(inFilename);</span><span class="s3">var </span><span class="s1">outFilename=_path2.default.format(Object.assign(parsedFilename,{base:_path2.default.basename(parsedFilename.base,parsedFilename.ext)+</span><span class="s2">'.json'</span><span class="s1">}));writeStream=_fs2.default.createWriteStream(outFilename)}</span><span class="s3">else if</span><span class="s1">(argv.o){writeStream=_fs2.default.createWriteStream(argv.o)}</span><span class="s3">else</span><span class="s1">{writeStream=process.stdout}writeStream.write(json)}}</span><span class="s3">catch</span><span class="s1">(err){console.error(err.message);process.exit(</span><span class="s4">1</span><span class="s1">)}})}</span><span class="s3">function </span><span class="s1">version(){console.log(_package2.default.version)}</span><span class="s3">function </span><span class="s1">usage(){console.log(</span><span class="s2">'</span><span class="s5">\n  </span><span class="s2">Usage: json5 [options] &lt;file&gt;</span><span class="s5">\n\n  </span><span class="s2">If &lt;file&gt; is not provided, then STDIN is used.</span><span class="s5">\n\n  </span><span class="s2">Options:</span><span class="s5">\n\n    </span><span class="s2">-s, --space              The number of spaces to indent or </span><span class="s5">\'</span><span class="s2">t</span><span class="s5">\' </span><span class="s2">for tabs</span><span class="s5">\n    </span><span class="s2">-o, --out-file [file]    Output to the specified file, otherwise STDOUT</span><span class="s5">\n    </span><span class="s2">-v, --validate           Validate JSON5 but do not output JSON</span><span class="s5">\n    </span><span class="s2">-V, --version            Output the version number</span><span class="s5">\n    </span><span class="s2">-h, --help               Output usage information'</span><span class="s1">)}</span></pre>
</body>
</html>