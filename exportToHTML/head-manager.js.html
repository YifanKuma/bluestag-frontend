<html>
<head>
<title>head-manager.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #1750eb;}
.s4 { color: #8c8c8c; font-style: italic;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
head-manager.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; (module.exports = {</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">isEqualNode: </span><span class="s2">null</span>
<span class="s1">});</span>
<span class="s2">function </span><span class="s1">_export(target, all) {</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">var </span><span class="s1">name </span><span class="s2">in </span><span class="s1">all)Object.defineProperty(target, name, {</span>
        <span class="s1">enumerable: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">get: all[name]</span>
    <span class="s1">});</span>
<span class="s1">}</span>
<span class="s1">_export(exports, {</span>
    <span class="s2">default</span><span class="s1">: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">initHeadManager;</span>
    <span class="s1">},</span>
    <span class="s1">isEqualNode: </span><span class="s2">function</span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">isEqualNode;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s2">const </span><span class="s1">_setattributesfromprops = require(</span><span class="s0">&quot;./set-attributes-from-props&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">reactElementToDOM(param) {</span>
    <span class="s2">let </span><span class="s1">{ type, props } = param;</span>
    <span class="s2">const </span><span class="s1">el = document.createElement(type);</span>
    <span class="s1">(</span><span class="s3">0</span><span class="s1">, _setattributesfromprops.setAttributesFromProps)(el, props);</span>
    <span class="s2">const </span><span class="s1">{ children, dangerouslySetInnerHTML } = props;</span>
    <span class="s2">if </span><span class="s1">(dangerouslySetInnerHTML) {</span>
        <span class="s1">el.innerHTML = dangerouslySetInnerHTML.__html || </span><span class="s0">''</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(children) {</span>
        <span class="s1">el.textContent = </span><span class="s2">typeof </span><span class="s1">children === </span><span class="s0">'string' </span><span class="s1">? children : Array.isArray(children) ? children.join(</span><span class="s0">''</span><span class="s1">) : </span><span class="s0">''</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">el;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">isEqualNode(oldTag, newTag) {</span>
    <span class="s2">if </span><span class="s1">(oldTag </span><span class="s2">instanceof </span><span class="s1">HTMLElement &amp;&amp; newTag </span><span class="s2">instanceof </span><span class="s1">HTMLElement) {</span>
        <span class="s2">const </span><span class="s1">nonce = newTag.getAttribute(</span><span class="s0">'nonce'</span><span class="s1">);</span>
        <span class="s4">// Only strip the nonce if `oldTag` has had it stripped. An element's nonce attribute will not</span>
        <span class="s4">// be stripped if there is no content security policy response header that includes a nonce.</span>
        <span class="s2">if </span><span class="s1">(nonce &amp;&amp; !oldTag.getAttribute(</span><span class="s0">'nonce'</span><span class="s1">)) {</span>
            <span class="s2">const </span><span class="s1">cloneTag = newTag.cloneNode(</span><span class="s2">true</span><span class="s1">);</span>
            <span class="s1">cloneTag.setAttribute(</span><span class="s0">'nonce'</span><span class="s1">, </span><span class="s0">''</span><span class="s1">);</span>
            <span class="s1">cloneTag.nonce = nonce;</span>
            <span class="s2">return </span><span class="s1">nonce === oldTag.nonce &amp;&amp; oldTag.isEqualNode(cloneTag);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">oldTag.isEqualNode(newTag);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">updateElements(type, components) {</span>
    <span class="s2">const </span><span class="s1">headEl = document.querySelector(</span><span class="s0">'head'</span><span class="s1">);</span>
    <span class="s2">if </span><span class="s1">(!headEl) </span><span class="s2">return</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">oldTags = </span><span class="s2">new </span><span class="s1">Set(headEl.querySelectorAll(</span><span class="s0">&quot;&quot; </span><span class="s1">+ type + </span><span class="s0">&quot;[data-next-head]&quot;</span><span class="s1">));</span>
    <span class="s2">if </span><span class="s1">(type === </span><span class="s0">'meta'</span><span class="s1">) {</span>
        <span class="s2">const </span><span class="s1">metaCharset = headEl.querySelector(</span><span class="s0">'meta[charset]'</span><span class="s1">);</span>
        <span class="s2">if </span><span class="s1">(metaCharset !== </span><span class="s2">null</span><span class="s1">) {</span>
            <span class="s1">oldTags.add(metaCharset);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">const </span><span class="s1">newTags = [];</span>
    <span class="s2">for</span><span class="s1">(</span><span class="s2">let </span><span class="s1">i = </span><span class="s3">0</span><span class="s1">; i &lt; components.length; i++){</span>
        <span class="s2">const </span><span class="s1">component = components[i];</span>
        <span class="s2">const </span><span class="s1">newTag = reactElementToDOM(component);</span>
        <span class="s1">newTag.setAttribute(</span><span class="s0">'data-next-head'</span><span class="s1">, </span><span class="s0">''</span><span class="s1">);</span>
        <span class="s2">let </span><span class="s1">isNew = </span><span class="s2">true</span><span class="s1">;</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">oldTag of oldTags){</span>
            <span class="s2">if </span><span class="s1">(isEqualNode(oldTag, newTag)) {</span>
                <span class="s1">oldTags.delete(oldTag);</span>
                <span class="s1">isNew = </span><span class="s2">false</span><span class="s1">;</span>
                <span class="s2">break</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">(isNew) {</span>
            <span class="s1">newTags.push(newTag);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">oldTag of oldTags){</span>
        <span class="s2">var </span><span class="s1">_oldTag_parentNode;</span>
        <span class="s1">(_oldTag_parentNode = oldTag.parentNode) == </span><span class="s2">null </span><span class="s1">? </span><span class="s2">void </span><span class="s3">0 </span><span class="s1">: _oldTag_parentNode.removeChild(oldTag);</span>
    <span class="s1">}</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">newTag of newTags){</span>
        <span class="s4">// meta[charset] must be first element so special case</span>
        <span class="s2">if </span><span class="s1">(newTag.tagName.toLowerCase() === </span><span class="s0">'meta' </span><span class="s1">&amp;&amp; newTag.getAttribute(</span><span class="s0">'charset'</span><span class="s1">) !== </span><span class="s2">null</span><span class="s1">) {</span>
            <span class="s1">headEl.prepend(newTag);</span>
        <span class="s1">}</span>
        <span class="s1">headEl.appendChild(newTag);</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">initHeadManager() {</span>
    <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">mountedInstances: </span><span class="s2">new </span><span class="s1">Set(),</span>
        <span class="s1">updateHead: (head)=&gt;{</span>
            <span class="s2">const </span><span class="s1">tags = {};</span>
            <span class="s1">head.forEach((h)=&gt;{</span>
                <span class="s2">if </span><span class="s1">(</span><span class="s4">// If the font tag is loaded only on client navigation</span>
                <span class="s4">// it won't be inlined. In this case revert to the original behavior</span>
                <span class="s1">h.type === </span><span class="s0">'link' </span><span class="s1">&amp;&amp; h.props[</span><span class="s0">'data-optimized-fonts'</span><span class="s1">]) {</span>
                    <span class="s2">if </span><span class="s1">(document.querySelector(</span><span class="s0">'style[data-href=&quot;' </span><span class="s1">+ h.props[</span><span class="s0">'data-href'</span><span class="s1">] + </span><span class="s0">'&quot;]'</span><span class="s1">)) {</span>
                        <span class="s2">return</span><span class="s1">;</span>
                    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                        <span class="s1">h.props.href = h.props[</span><span class="s0">'data-href'</span><span class="s1">];</span>
                        <span class="s1">h.props[</span><span class="s0">'data-href'</span><span class="s1">] = undefined;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
                <span class="s2">const </span><span class="s1">components = tags[h.type] || [];</span>
                <span class="s1">components.push(h);</span>
                <span class="s1">tags[h.type] = components;</span>
            <span class="s1">});</span>
            <span class="s2">const </span><span class="s1">titleComponent = tags.title ? tags.title[</span><span class="s3">0</span><span class="s1">] : </span><span class="s2">null</span><span class="s1">;</span>
            <span class="s2">let </span><span class="s1">title = </span><span class="s0">''</span><span class="s1">;</span>
            <span class="s2">if </span><span class="s1">(titleComponent) {</span>
                <span class="s2">const </span><span class="s1">{ children } = titleComponent.props;</span>
                <span class="s1">title = </span><span class="s2">typeof </span><span class="s1">children === </span><span class="s0">'string' </span><span class="s1">? children : Array.isArray(children) ? children.join(</span><span class="s0">''</span><span class="s1">) : </span><span class="s0">''</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">if </span><span class="s1">(title !== document.title) document.title = title;</span>
            <span class="s1">[</span>
                <span class="s0">'meta'</span><span class="s1">,</span>
                <span class="s0">'base'</span><span class="s1">,</span>
                <span class="s0">'link'</span><span class="s1">,</span>
                <span class="s0">'style'</span><span class="s1">,</span>
                <span class="s0">'script'</span>
            <span class="s1">].forEach((type)=&gt;{</span>
                <span class="s1">updateElements(type, tags[type] || []);</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
    <span class="s1">};</span>
<span class="s1">}</span>

<span class="s2">if </span><span class="s1">((</span><span class="s2">typeof </span><span class="s1">exports.default === </span><span class="s0">'function' </span><span class="s1">|| (</span><span class="s2">typeof </span><span class="s1">exports.default === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; exports.default !== </span><span class="s2">null</span><span class="s1">)) &amp;&amp; </span><span class="s2">typeof </span><span class="s1">exports.default.__esModule === </span><span class="s0">'undefined'</span><span class="s1">) {</span>
  <span class="s1">Object.defineProperty(exports.default, </span><span class="s0">'__esModule'</span><span class="s1">, { value: </span><span class="s2">true </span><span class="s1">});</span>
  <span class="s1">Object.assign(exports.default, exports);</span>
  <span class="s1">module.exports = exports.default;</span>
<span class="s1">}</span>

<span class="s4">//# sourceMappingURL=head-manager.js.map</span></pre>
</body>
</html>