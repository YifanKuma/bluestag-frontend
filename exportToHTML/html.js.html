<html>
<head>
<title>html.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #8c8c8c; font-style: italic;}
.s2 { color: #080808;}
.s3 { color: #067d17;}
.s4 { color: #0033b3;}
.s5 { color: #264eff;}
.s6 { color: #1750eb;}
.s7 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
html.js</font>
</center></td></tr></table>
<pre><span class="s0">/**</span>
 <span class="s0">* </span><span class="s1">@fileoverview </span><span class="s0">HTML reporter</span>
 <span class="s0">* </span><span class="s1">@author </span><span class="s0">Julian Laval</span>
 <span class="s0">*/</span>
<span class="s3">&quot;use strict&quot;</span><span class="s2">;</span>

<span class="s0">//------------------------------------------------------------------------------</span>
<span class="s0">// Helpers</span>
<span class="s0">//------------------------------------------------------------------------------</span>

<span class="s4">const </span><span class="s2">encodeHTML = (</span><span class="s4">function </span><span class="s2">() {</span>
	<span class="s4">const </span><span class="s2">encodeHTMLRules = {</span>
		<span class="s3">&quot;&amp;&quot;</span><span class="s2">: </span><span class="s3">&quot;&amp;#38;&quot;</span><span class="s2">,</span>
		<span class="s3">&quot;&lt;&quot;</span><span class="s2">: </span><span class="s3">&quot;&amp;#60;&quot;</span><span class="s2">,</span>
		<span class="s3">&quot;&gt;&quot;</span><span class="s2">: </span><span class="s3">&quot;&amp;#62;&quot;</span><span class="s2">,</span>
		<span class="s3">'&quot;'</span><span class="s2">: </span><span class="s3">&quot;&amp;#34;&quot;</span><span class="s2">,</span>
		<span class="s3">&quot;'&quot;</span><span class="s2">: </span><span class="s3">&quot;&amp;#39;&quot;</span><span class="s2">,</span>
	<span class="s2">};</span>
	<span class="s4">const </span><span class="s2">matchHTML = </span><span class="s5">/[&amp;&lt;&gt;&quot;']/gu</span><span class="s2">;</span>

	<span class="s4">return function </span><span class="s2">(code) {</span>
		<span class="s4">return </span><span class="s2">code</span>
			<span class="s2">? code.toString().replace(matchHTML, m =&gt; encodeHTMLRules[m] || m)</span>
			<span class="s2">: </span><span class="s3">&quot;&quot;</span><span class="s2">;</span>
	<span class="s2">};</span>
<span class="s2">})();</span>

<span class="s0">/**</span>
 <span class="s0">* Get the final HTML document.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} it data for the document.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML document.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">pageTemplate(it) {</span>
	<span class="s4">const </span><span class="s2">{ reportColor, reportSummary, date, results } = it;</span>

	<span class="s4">return </span><span class="s3">`</span>
<span class="s3">&lt;!DOCTYPE html&gt; 
&lt;html&gt; 
    &lt;head&gt; 
        &lt;meta charset=&quot;UTF-8&quot;&gt; 
        &lt;title&gt;ESLint Report&lt;/title&gt; 
        &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; sizes=&quot;any&quot; href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAHaAAAB2gGFomX7AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABD1JREFUWMPFl11sk2UUx3/nbYtjxS1MF7MLMTECMgSTtSSyrQkLhAj7UBPnDSEGoxegGzMwojhXVpmTAA5iYpSoMQa8GBhFOrMFk03buei6yRAlcmOM0SEmU9d90b19jxcM1o5+sGnsc/e+z/l6ztf/HFFVMnns6QieeOCHBePGsHM+wrOtvLG2C4WRVDSSygNV7sCjlspxwDnPB44aols/DXk+mbMBmx/6OseITF1CuOtfevkPh2Uu+/jbdX8lujSScRlT5r7/QDlAfsRmfzmpnkQ/H3H13gf6bBrBn1uqK8WylgEnU8eZmk1repbfchJG1TyKyIKEwuBHFd3lD3naY3O1siiwXsVoBV2VgM1ht/QQUJk2ByqKghsQziYQ8ifKgexIXmuyzC4r67Y7R+xPAfuB/Nn3Cpva+0s7khpQVtZtd4bt51BWxtBYAiciprG7c7D4SixzU9PYalDL6110Ifb/w8W9eY7JqFeFHbO8fPGyLHwwFHJNJTSgwtVTB9oaw9BlQ+tO93vOxypoaQnfEYlI43SeCHDC4TDq9+51/h5fxr33q0ZfV9g04wat9Q943rjJgCp3952W2i8Bi6eDvdsfKj0cK/DYMRyXL4/sUJUmIHd2zYMezsvLaamp4WpcWN3BXSiHpuMwbGbZlnZ8tXY4rgosy+G7oRwQ0cAsd28YGgqfU5UjCZQDLALxDg+Hv/P5Rqvj4hwrS8izXzWb4spwc1GgENFnkpWRzxeuB+ssUHgLdb9UVdt8vpGdKQpze7n7y1U3DBChNRUuqOo9c+0+qpKKxyZqtAIYla7gY4JszAAQri93BSsMRZoyBcUC+w3Q3AyOA4sNhAOZ0q7Iq0b2vUNvK5zPgP+/H8+Zetdoa6uOikhdGurxebwvJY8Iz3V1rTMNAH+opEuQj5KTT/qA1yC+wyUjBm12OidaUtCcPNNX2h0Hx2JG69VulANZAJZJwfU7rzd/FHixuXniTdM0m4GtSQT7bTartqEh9yfImUEzkwKZmTwmo5a5JwkYBfcDL01/RkR5y8iWhtPBknB8ZxwtU9UjwOrrKCeizzc25nTGg1F/turEHoU9wMLpDvWKf8DTmNCAKnd/tqUTF4ElMXJ+A5rWDJS+41WsGWzALhJ+ErBWrLj9g+pqojHxlXJX8HGUg0BsR/x1yhxf3jm4cSzpQFLp6tmi6PEE7g1ZhtZ91ufpSZUAFa6gC+UoQslNaSmypT1U8mHKiUgEKS8KfgF4EpYunFI16tsHin+OG0LcgQK7yj7g6cSzpva2D3hKVNG0Y3mVO1BkqfSlmJrHBQ4uvM12gJHc6ETW8HZVfMRmXvyxxNC1Z/o839zyXlDuCr4nsC11J+MXueaVJWn6yPv+/pJtc9oLTNN4AeTvNGByd3rlhE2x9s5pLwDoHCy+grDzWmOZ95lUtLYj5Bma126Y8eX0/zj/ADxGyViSg4BXAAAAAElFTkSuQmCC&quot;&gt; 
        &lt;link rel=&quot;icon&quot; type=&quot;image/svg+xml&quot; href=&quot;data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PScwIDAgMjk0LjgyNSAyNTguOTgyJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPg0KPHBhdGggZmlsbD0nIzgwODBGMicgZD0nTTk3LjAyMSw5OS4wMTZsNDguNDMyLTI3Ljk2MmMxLjIxMi0wLjcsMi43MDYtMC43LDMuOTE4LDBsNDguNDMzLDI3Ljk2MiBjMS4yMTEsMC43LDEuOTU5LDEuOTkzLDEuOTU5LDMuMzkzdjU1LjkyNGMwLDEuMzk5LTAuNzQ4LDIuNjkzLTEuOTU5LDMuMzk0bC00OC40MzMsMjcuOTYyYy0xLjIxMiwwLjctMi43MDYsMC43LTMuOTE4LDAgbC00OC40MzItMjcuOTYyYy0xLjIxMi0wLjctMS45NTktMS45OTQtMS45NTktMy4zOTR2LTU1LjkyNEM5NS4wNjMsMTAxLjAwOSw5NS44MSw5OS43MTYsOTcuMDIxLDk5LjAxNicvPg0KPHBhdGggZmlsbD0nIzRCMzJDMycgZD0nTTI3My4zMzYsMTI0LjQ4OEwyMTUuNDY5LDIzLjgxNmMtMi4xMDItMy42NC01Ljk4NS02LjMyNS0xMC4xODgtNi4zMjVIODkuNTQ1IGMtNC4yMDQsMC04LjA4OCwyLjY4NS0xMC4xOSw2LjMyNWwtNTcuODY3LDEwMC40NWMtMi4xMDIsMy42NDEtMi4xMDIsOC4yMzYsMCwxMS44NzdsNTcuODY3LDk5Ljg0NyBjMi4xMDIsMy42NCw1Ljk4Niw1LjUwMSwxMC4xOSw1LjUwMWgxMTUuNzM1YzQuMjAzLDAsOC4wODctMS44MDUsMTAuMTg4LTUuNDQ2bDU3Ljg2Ny0xMDAuMDEgQzI3NS40MzksMTMyLjM5NiwyNzUuNDM5LDEyOC4xMjgsMjczLjMzNiwxMjQuNDg4IE0yMjUuNDE5LDE3Mi44OThjMCwxLjQ4LTAuODkxLDIuODQ5LTIuMTc0LDMuNTlsLTczLjcxLDQyLjUyNyBjLTEuMjgyLDAuNzQtMi44ODgsMC43NC00LjE3LDBsLTczLjc2Ny00Mi41MjdjLTEuMjgyLTAuNzQxLTIuMTc5LTIuMTA5LTIuMTc5LTMuNTlWODcuODQzYzAtMS40ODEsMC44ODQtMi44NDksMi4xNjctMy41OSBsNzMuNzA3LTQyLjUyN2MxLjI4Mi0wLjc0MSwyLjg4Ni0wLjc0MSw0LjE2OCwwbDczLjc3Miw0Mi41MjdjMS4yODMsMC43NDEsMi4xODYsMi4xMDksMi4xODYsMy41OVYxNzIuODk4eicvPg0KPC9zdmc+&quot;&gt; 
        &lt;style&gt; 
            body { 
                font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; 
                font-size: 16px; 
                font-weight: normal; 
                margin: 0; 
                padding: 0; 
                color: #333; 
            } 
 
            #overview { 
                padding: 20px 30px; 
            } 
 
            td, 
            th { 
                padding: 5px 10px; 
            } 
 
            h1 { 
                margin: 0; 
            } 
 
            table { 
                margin: 30px; 
                width: calc(100% - 60px); 
                max-width: 1000px; 
                border-radius: 5px; 
                border: 1px solid #ddd; 
                border-spacing: 0; 
            } 
 
            th { 
                font-weight: 400; 
                font-size: medium; 
                text-align: left; 
                cursor: pointer; 
            } 
 
            td.clr-1, 
            td.clr-2, 
            th span { 
                font-weight: 700; 
            } 
 
            th span { 
                float: right; 
                margin-left: 20px; 
            } 
 
            th span::after { 
                content: &quot;&quot;; 
                clear: both; 
                display: block; 
            } 
 
            tr:last-child td { 
                border-bottom: none; 
            } 
 
            tr td:first-child, 
            tr td:last-child { 
                color: #9da0a4; 
            } 
 
            #overview.bg-0, 
            tr.bg-0 th { 
                color: #468847; 
                background: #dff0d8; 
                border-bottom: 1px solid #d6e9c6; 
            } 
 
            #overview.bg-1, 
            tr.bg-1 th { 
                color: #f0ad4e; 
                background: #fcf8e3; 
                border-bottom: 1px solid #fbeed5; 
            } 
 
            #overview.bg-2, 
            tr.bg-2 th { 
                color: #b94a48; 
                background: #f2dede; 
                border-bottom: 1px solid #eed3d7; 
            } 
 
            td { 
                border-bottom: 1px solid #ddd; 
            } 
 
            td.clr-1 { 
                color: #f0ad4e; 
            } 
 
            td.clr-2 { 
                color: #b94a48; 
            } 
 
            td a { 
                color: #3a33d1; 
                text-decoration: none; 
            } 
 
            td a:hover { 
                color: #272296; 
                text-decoration: underline; 
            } 
        &lt;/style&gt; 
    &lt;/head&gt; 
    &lt;body&gt; 
        &lt;div id=&quot;overview&quot; class=&quot;bg-</span><span class="s2">${reportColor}</span><span class="s3">&quot;&gt; 
            &lt;h1&gt;ESLint Report&lt;/h1&gt; 
            &lt;div&gt; 
                &lt;span&gt;</span><span class="s2">${reportSummary}</span><span class="s3">&lt;/span&gt; - Generated on </span><span class="s2">${date}</span>
            <span class="s3">&lt;/div&gt; 
        &lt;/div&gt; 
        &lt;table&gt; 
            &lt;tbody&gt; 
                </span><span class="s2">${results}</span>
            <span class="s3">&lt;/tbody&gt; 
        &lt;/table&gt; 
        &lt;script type=&quot;text/javascript&quot;&gt; 
            var groups = document.querySelectorAll(&quot;tr[data-group]&quot;); 
            for (i = 0; i &lt; groups.length; i++) { 
                groups[i].addEventListener(&quot;click&quot;, function() { 
                    var inGroup = document.getElementsByClassName(this.getAttribute(&quot;data-group&quot;)); 
                    this.innerHTML = (this.innerHTML.indexOf(&quot;+&quot;) &gt; -1) ? this.innerHTML.replace(&quot;+&quot;, &quot;-&quot;) : this.innerHTML.replace(&quot;-&quot;, &quot;+&quot;); 
                    for (var j = 0; j &lt; inGroup.length; j++) { 
                        inGroup[j].style.display = (inGroup[j].style.display !== &quot;none&quot;) ? &quot;none&quot; : &quot;table-row&quot;; 
                    } 
                }); 
            } 
        &lt;/script&gt; 
    &lt;/body&gt; 
&lt;/html&gt; 
`</span><span class="s2">.trimStart();</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Given a word and a count, append an s if count is not one.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{string} word A word in its singular form.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{number} count A number controlling whether word should be pluralized.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} The original word with an s on the end if count is not one.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">pluralize(word, count) {</span>
	<span class="s4">return </span><span class="s2">count === </span><span class="s6">1 </span><span class="s2">? word : </span><span class="s3">`</span><span class="s2">${word}</span><span class="s3">s`</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Renders text along the template of x problems (x errors, x warnings)</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{string} totalErrors Total errors</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{string} totalWarnings Total warnings</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} The formatted string, pluralized where necessary</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">renderSummary(totalErrors, totalWarnings) {</span>
	<span class="s4">const </span><span class="s2">totalProblems = totalErrors + totalWarnings;</span>
	<span class="s4">let </span><span class="s2">renderedText = </span><span class="s3">`</span><span class="s2">${totalProblems} ${pluralize(</span><span class="s3">&quot;problem&quot;</span><span class="s2">, totalProblems)}</span><span class="s3">`</span><span class="s2">;</span>

	<span class="s4">if </span><span class="s2">(totalProblems !== </span><span class="s6">0</span><span class="s2">) {</span>
		<span class="s2">renderedText += </span><span class="s3">` (</span><span class="s2">${totalErrors} ${pluralize(</span><span class="s3">&quot;error&quot;</span><span class="s2">, totalErrors)}</span><span class="s3">, </span><span class="s2">${totalWarnings} ${pluralize(</span><span class="s3">&quot;warning&quot;</span><span class="s2">, totalWarnings)}</span><span class="s3">)`</span><span class="s2">;</span>
	<span class="s2">}</span>
	<span class="s4">return </span><span class="s2">renderedText;</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Get the color based on whether there are errors/warnings...</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{string} totalErrors Total errors</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{string} totalWarnings Total warnings</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{number} The color code (0 = green, 1 = yellow, 2 = red)</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">renderColor(totalErrors, totalWarnings) {</span>
	<span class="s4">if </span><span class="s2">(totalErrors !== </span><span class="s6">0</span><span class="s2">) {</span>
		<span class="s4">return </span><span class="s6">2</span><span class="s2">;</span>
	<span class="s2">}</span>
	<span class="s4">if </span><span class="s2">(totalWarnings !== </span><span class="s6">0</span><span class="s2">) {</span>
		<span class="s4">return </span><span class="s6">1</span><span class="s2">;</span>
	<span class="s2">}</span>
	<span class="s4">return </span><span class="s6">0</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Get HTML (table row) describing a single message.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} it data for the message.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML (table row) describing the message.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">messageTemplate(it) {</span>
	<span class="s4">const </span><span class="s2">{</span>
		<span class="s2">parentIndex,</span>
		<span class="s2">lineNumber,</span>
		<span class="s2">columnNumber,</span>
		<span class="s2">severityNumber,</span>
		<span class="s2">severityName,</span>
		<span class="s2">message,</span>
		<span class="s2">ruleUrl,</span>
		<span class="s2">ruleId,</span>
	<span class="s2">} = it;</span>

	<span class="s4">return </span><span class="s3">`</span>
<span class="s3">&lt;tr style=&quot;display: none;&quot; class=&quot;f-</span><span class="s2">${parentIndex}</span><span class="s3">&quot;&gt; 
    &lt;td&gt;</span><span class="s2">${lineNumber}</span><span class="s3">:</span><span class="s2">${columnNumber}</span><span class="s3">&lt;/td&gt; 
    &lt;td class=&quot;clr-</span><span class="s2">${severityNumber}</span><span class="s3">&quot;&gt;</span><span class="s2">${severityName}</span><span class="s3">&lt;/td&gt; 
    &lt;td&gt;</span><span class="s2">${encodeHTML(message)}</span><span class="s3">&lt;/td&gt; 
    &lt;td&gt; 
        &lt;a href=&quot;</span><span class="s2">${ruleUrl ? ruleUrl : </span><span class="s3">&quot;&quot;</span><span class="s2">}</span><span class="s3">&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;</span><span class="s2">${ruleId ? ruleId : </span><span class="s3">&quot;&quot;</span><span class="s2">}</span><span class="s3">&lt;/a&gt; 
    &lt;/td&gt; 
&lt;/tr&gt; 
`</span><span class="s2">.trimStart();</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Get HTML (table rows) describing the messages.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Array} messages Messages.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{number} parentIndex Index of the parent HTML row.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} rulesMeta Dictionary containing metadata for each rule executed by the analysis.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML (table rows) describing the messages.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">renderMessages(messages, parentIndex, rulesMeta) {</span>
	<span class="s0">/**</span>
	 <span class="s0">* Get HTML (table row) describing a message.</span>
	 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} message Message.</span>
	 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML (table row) describing a message.</span>
	 <span class="s0">*/</span>
	<span class="s4">return </span><span class="s2">messages</span>
		<span class="s2">.map(message =&gt; {</span>
			<span class="s4">const </span><span class="s2">lineNumber = message.line || </span><span class="s6">0</span><span class="s2">;</span>
			<span class="s4">const </span><span class="s2">columnNumber = message.column || </span><span class="s6">0</span><span class="s2">;</span>
			<span class="s4">let </span><span class="s2">ruleUrl;</span>

			<span class="s4">if </span><span class="s2">(rulesMeta) {</span>
				<span class="s4">const </span><span class="s2">meta = rulesMeta[message.ruleId];</span>

				<span class="s4">if </span><span class="s2">(meta &amp;&amp; meta.docs &amp;&amp; meta.docs.url) {</span>
					<span class="s2">ruleUrl = meta.docs.url;</span>
				<span class="s2">}</span>
			<span class="s2">}</span>

			<span class="s4">return </span><span class="s2">messageTemplate({</span>
				<span class="s2">parentIndex,</span>
				<span class="s2">lineNumber,</span>
				<span class="s2">columnNumber,</span>
				<span class="s2">severityNumber: message.severity,</span>
				<span class="s2">severityName: message.severity === </span><span class="s6">1 </span><span class="s2">? </span><span class="s3">&quot;Warning&quot; </span><span class="s2">: </span><span class="s3">&quot;Error&quot;</span><span class="s2">,</span>
				<span class="s2">message: message.message,</span>
				<span class="s2">ruleId: message.ruleId,</span>
				<span class="s2">ruleUrl,</span>
			<span class="s2">});</span>
		<span class="s2">})</span>
		<span class="s2">.join(</span><span class="s3">&quot;</span><span class="s7">\n</span><span class="s3">&quot;</span><span class="s2">);</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Get HTML (table row) describing the result for a single file.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} it data for the file.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML (table row) describing the result for the file.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">resultTemplate(it) {</span>
	<span class="s4">const </span><span class="s2">{ color, index, filePath, summary } = it;</span>

	<span class="s4">return </span><span class="s3">`</span>
<span class="s3">&lt;tr class=&quot;bg-</span><span class="s2">${color}</span><span class="s3">&quot; data-group=&quot;f-</span><span class="s2">${index}</span><span class="s3">&quot;&gt; 
    &lt;th colspan=&quot;4&quot;&gt; 
        [+] </span><span class="s2">${encodeHTML(filePath)}</span>
        <span class="s3">&lt;span&gt;</span><span class="s2">${encodeHTML(summary)}</span><span class="s3">&lt;/span&gt; 
    &lt;/th&gt; 
&lt;/tr&gt; 
`</span><span class="s2">.trimStart();</span>
<span class="s2">}</span>

<span class="s0">/**</span>
 <span class="s0">* Render the results.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Array} results Test results.</span>
 <span class="s0">* </span><span class="s1">@param </span><span class="s0">{Object} rulesMeta Dictionary containing metadata for each rule executed by the analysis.</span>
 <span class="s0">* </span><span class="s1">@returns </span><span class="s0">{string} HTML string describing the results.</span>
 <span class="s0">*/</span>
<span class="s4">function </span><span class="s2">renderResults(results, rulesMeta) {</span>
	<span class="s4">return </span><span class="s2">results</span>
		<span class="s2">.map(</span>
			<span class="s2">(result, index) =&gt;</span>
				<span class="s2">resultTemplate({</span>
					<span class="s2">index,</span>
					<span class="s2">color: renderColor(result.errorCount, result.warningCount),</span>
					<span class="s2">filePath: result.filePath,</span>
					<span class="s2">summary: renderSummary(</span>
						<span class="s2">result.errorCount,</span>
						<span class="s2">result.warningCount,</span>
					<span class="s2">),</span>
				<span class="s2">}) + renderMessages(result.messages, index, rulesMeta),</span>
		<span class="s2">)</span>
		<span class="s2">.join(</span><span class="s3">&quot;</span><span class="s7">\n</span><span class="s3">&quot;</span><span class="s2">);</span>
<span class="s2">}</span>

<span class="s0">//------------------------------------------------------------------------------</span>
<span class="s0">// Public Interface</span>
<span class="s0">//------------------------------------------------------------------------------</span>

<span class="s2">module.exports = </span><span class="s4">function </span><span class="s2">(results, data) {</span>
	<span class="s4">let </span><span class="s2">totalErrors, totalWarnings;</span>

	<span class="s4">const </span><span class="s2">metaData = data ? data.rulesMeta : {};</span>

	<span class="s2">totalErrors = </span><span class="s6">0</span><span class="s2">;</span>
	<span class="s2">totalWarnings = </span><span class="s6">0</span><span class="s2">;</span>

	<span class="s0">// Iterate over results to get totals</span>
	<span class="s2">results.forEach(result =&gt; {</span>
		<span class="s2">totalErrors += result.errorCount;</span>
		<span class="s2">totalWarnings += result.warningCount;</span>
	<span class="s2">});</span>

	<span class="s4">return </span><span class="s2">pageTemplate({</span>
		<span class="s2">date: </span><span class="s4">new </span><span class="s2">Date(),</span>
		<span class="s2">reportColor: renderColor(totalErrors, totalWarnings),</span>
		<span class="s2">reportSummary: renderSummary(totalErrors, totalWarnings),</span>
		<span class="s2">results: renderResults(results, metaData),</span>
	<span class="s2">});</span>
<span class="s2">};</span>
</pre>
</body>
</html>