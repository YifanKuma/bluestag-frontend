<html>
<head>
<title>format-webpack-messages.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #080808;}
.s2 { color: #067d17;}
.s3 { color: #0033b3;}
.s4 { color: #0037a6;}
.s5 { color: #1750eb;}
.s6 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
format-webpack-messages.js</font>
</center></td></tr></table>
<pre><span class="s0">/**</span>
<span class="s0">MIT License</span>

<span class="s0">Copyright (c) 2015-present, Facebook, Inc.</span>

<span class="s0">Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="s0">of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="s0">in the Software without restriction, including without limitation the rights</span>
<span class="s0">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="s0">copies of the Software, and to permit persons to whom the Software is</span>
<span class="s0">furnished to do so, subject to the following conditions:</span>

<span class="s0">The above copyright notice and this permission notice shall be included in all</span>
<span class="s0">copies or substantial portions of the Software.</span>

<span class="s0">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="s0">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="s0">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="s0">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="s0">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="s0">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="s0">SOFTWARE.</span>
<span class="s0">*/ </span><span class="s2">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s2">&quot;__esModule&quot;</span><span class="s1">, {</span>
    <span class="s1">value: </span><span class="s3">true</span>
<span class="s1">});</span>
<span class="s1">Object.defineProperty(exports, </span><span class="s2">&quot;default&quot;</span><span class="s1">, {</span>
    <span class="s1">enumerable: </span><span class="s3">true</span><span class="s1">,</span>
    <span class="s1">get: </span><span class="s3">function</span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s1">formatWebpackMessages;</span>
    <span class="s1">}</span>
<span class="s1">});</span>
<span class="s3">const </span><span class="s1">_interop_require_default = require(</span><span class="s2">&quot;@swc/helpers/_/_interop_require_default&quot;</span><span class="s1">);</span>
<span class="s3">const </span><span class="s1">_stripansi = </span><span class="s0">/*#__PURE__*/ </span><span class="s1">_interop_require_default._(require(</span><span class="s2">&quot;next/dist/compiled/strip-ansi&quot;</span><span class="s1">));</span>
<span class="s0">// This file is based on https://github.com/facebook/create-react-app/blob/7b1a32be6ec9f99a6c9a3c66813f3ac09c4736b9/packages/react-dev-utils/formatWebpackMessages.js</span>
<span class="s0">// It's been edited to remove chalk and CRA-specific logic</span>
<span class="s3">const </span><span class="s1">friendlySyntaxErrorLabel = </span><span class="s2">'Syntax error:'</span><span class="s1">;</span>
<span class="s3">const </span><span class="s1">WEBPACK_BREAKING_CHANGE_POLYFILLS = </span><span class="s2">'</span><span class="s4">\n\n</span><span class="s2">BREAKING CHANGE: webpack &lt; 5 used to include polyfills for node.js core modules by default.'</span><span class="s1">;</span>
<span class="s3">function </span><span class="s1">isLikelyASyntaxError(message) {</span>
    <span class="s3">return </span><span class="s1">(</span><span class="s5">0</span><span class="s1">, _stripansi.default)(message).includes(friendlySyntaxErrorLabel);</span>
<span class="s1">}</span>
<span class="s3">let </span><span class="s1">hadMissingSassError = </span><span class="s3">false</span><span class="s1">;</span>
<span class="s0">// Cleans up webpack error messages.</span>
<span class="s3">function </span><span class="s1">formatMessage(message, verbose, importTraceNote) {</span>
    <span class="s0">// TODO: Replace this once webpack 5 is stable</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s1">message === </span><span class="s2">'object' </span><span class="s1">&amp;&amp; message.message) {</span>
        <span class="s3">const </span><span class="s1">filteredModuleTrace = message.moduleTrace &amp;&amp; message.moduleTrace.filter((trace)=&gt;!</span><span class="s6">/next-(middleware|client-pages|route|edge-function)-loader\.js/</span><span class="s1">.test(trace.originName));</span>
        <span class="s3">let </span><span class="s1">body = message.message;</span>
        <span class="s3">const </span><span class="s1">breakingChangeIndex = body.indexOf(WEBPACK_BREAKING_CHANGE_POLYFILLS);</span>
        <span class="s3">if </span><span class="s1">(breakingChangeIndex &gt;= </span><span class="s5">0</span><span class="s1">) {</span>
            <span class="s1">body = body.slice(</span><span class="s5">0</span><span class="s1">, breakingChangeIndex);</span>
        <span class="s1">}</span>
        <span class="s1">message = (message.moduleName ? (</span><span class="s5">0</span><span class="s1">, _stripansi.default)(message.moduleName) + </span><span class="s2">'</span><span class="s4">\n</span><span class="s2">' </span><span class="s1">: </span><span class="s2">''</span><span class="s1">) + (message.file ? (</span><span class="s5">0</span><span class="s1">, _stripansi.default)(message.file) + </span><span class="s2">'</span><span class="s4">\n</span><span class="s2">' </span><span class="s1">: </span><span class="s2">''</span><span class="s1">) + body + (message.details &amp;&amp; verbose ? </span><span class="s2">'</span><span class="s4">\n</span><span class="s2">' </span><span class="s1">+ message.details : </span><span class="s2">''</span><span class="s1">) + (filteredModuleTrace &amp;&amp; filteredModuleTrace.length ? (importTraceNote || </span><span class="s2">'</span><span class="s4">\n\n</span><span class="s2">Import trace for requested module:'</span><span class="s1">) + filteredModuleTrace.map((trace)=&gt;</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot; </span><span class="s1">+ trace.moduleName).join(</span><span class="s2">''</span><span class="s1">) : </span><span class="s2">''</span><span class="s1">) + (message.stack &amp;&amp; verbose ? </span><span class="s2">'</span><span class="s4">\n</span><span class="s2">' </span><span class="s1">+ message.stack : </span><span class="s2">''</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s3">let </span><span class="s1">lines = message.split(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
    <span class="s0">// Strip Webpack-added headers off errors/warnings</span>
    <span class="s0">// https://github.com/webpack/webpack/blob/master/lib/ModuleError.js</span>
    <span class="s1">lines = lines.filter((line)=&gt;!</span><span class="s6">/Module [A-z ]+\(from/</span><span class="s1">.test(line));</span>
    <span class="s0">// Transform parsing error into syntax error</span>
    <span class="s0">// TODO: move this to our ESLint formatter?</span>
    <span class="s1">lines = lines.map((line)=&gt;{</span>
        <span class="s3">const </span><span class="s1">parsingError = </span><span class="s6">/Line (\d+):(?:(\d+):)?\s*Parsing error: (.+)$/</span><span class="s1">.exec(line);</span>
        <span class="s3">if </span><span class="s1">(!parsingError) {</span>
            <span class="s3">return </span><span class="s1">line;</span>
        <span class="s1">}</span>
        <span class="s3">const </span><span class="s1">[, errorLine, errorColumn, errorMessage] = parsingError;</span>
        <span class="s3">return </span><span class="s1">friendlySyntaxErrorLabel + </span><span class="s2">&quot; &quot; </span><span class="s1">+ errorMessage + </span><span class="s2">&quot; (&quot; </span><span class="s1">+ errorLine + </span><span class="s2">&quot;:&quot; </span><span class="s1">+ errorColumn + </span><span class="s2">&quot;)&quot;</span><span class="s1">;</span>
    <span class="s1">});</span>
    <span class="s1">message = lines.join(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
    <span class="s0">// Smoosh syntax errors (commonly found in CSS)</span>
    <span class="s1">message = message.replace(</span><span class="s6">/SyntaxError\s+\((\d+):(\d+)\)\s*(.+?)\n/g</span><span class="s1">, </span><span class="s2">&quot;&quot; </span><span class="s1">+ friendlySyntaxErrorLabel + </span><span class="s2">&quot; $3 ($1:$2)</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s1">);</span>
    <span class="s0">// Clean up export errors</span>
    <span class="s1">message = message.replace(</span><span class="s6">/^.*export '(.+?)' was not found in '(.+?)'.*$/gm</span><span class="s1">, </span><span class="s2">&quot;Attempted import error: '$1' is not exported from '$2'.&quot;</span><span class="s1">);</span>
    <span class="s1">message = message.replace(</span><span class="s6">/^.*export 'default' \(imported as '(.+?)'\) was not found in '(.+?)'.*$/gm</span><span class="s1">, </span><span class="s2">&quot;Attempted import error: '$2' does not contain a default export (imported as '$1').&quot;</span><span class="s1">);</span>
    <span class="s1">message = message.replace(</span><span class="s6">/^.*export '(.+?)' \(imported as '(.+?)'\) was not found in '(.+?)'.*$/gm</span><span class="s1">, </span><span class="s2">&quot;Attempted import error: '$1' is not exported from '$3' (imported as '$2').&quot;</span><span class="s1">);</span>
    <span class="s1">lines = message.split(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
    <span class="s0">// Remove leading newline</span>
    <span class="s3">if </span><span class="s1">(lines.length &gt; </span><span class="s5">2 </span><span class="s1">&amp;&amp; lines[</span><span class="s5">1</span><span class="s1">].trim() === </span><span class="s2">''</span><span class="s1">) {</span>
        <span class="s1">lines.splice(</span><span class="s5">1</span><span class="s1">, </span><span class="s5">1</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s0">// Cleans up verbose &quot;module not found&quot; messages for files and packages.</span>
    <span class="s3">if </span><span class="s1">(lines[</span><span class="s5">1</span><span class="s1">] &amp;&amp; lines[</span><span class="s5">1</span><span class="s1">].startsWith(</span><span class="s2">'Module not found: '</span><span class="s1">)) {</span>
        <span class="s1">lines = [</span>
            <span class="s1">lines[</span><span class="s5">0</span><span class="s1">],</span>
            <span class="s1">lines[</span><span class="s5">1</span><span class="s1">].replace(</span><span class="s2">'Error: '</span><span class="s1">, </span><span class="s2">''</span><span class="s1">).replace(</span><span class="s2">'Module not found: Cannot find file:'</span><span class="s1">, </span><span class="s2">'Cannot find file:'</span><span class="s1">),</span>
            <span class="s1">...lines.slice(</span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s0">// Add helpful message for users trying to use Sass for the first time</span>
    <span class="s3">if </span><span class="s1">(lines[</span><span class="s5">1</span><span class="s1">] &amp;&amp; lines[</span><span class="s5">1</span><span class="s1">].match(</span><span class="s6">/Cannot find module.+sass/</span><span class="s1">)) {</span>
        <span class="s0">// ./file.module.scss (&lt;&lt;loader info&gt;&gt;) =&gt; ./file.module.scss</span>
        <span class="s3">const </span><span class="s1">firstLine = lines[</span><span class="s5">0</span><span class="s1">].split(</span><span class="s2">'!'</span><span class="s1">);</span>
        <span class="s1">lines[</span><span class="s5">0</span><span class="s1">] = firstLine[firstLine.length - </span><span class="s5">1</span><span class="s1">];</span>
        <span class="s1">lines[</span><span class="s5">1</span><span class="s1">] = </span><span class="s2">&quot;To use Next.js' built-in Sass support, you first need to install `sass`.</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s1">;</span>
        <span class="s1">lines[</span><span class="s5">1</span><span class="s1">] += </span><span class="s2">'Run `npm i sass` or `yarn add sass` inside your workspace.</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">;</span>
        <span class="s1">lines[</span><span class="s5">1</span><span class="s1">] += </span><span class="s2">'</span><span class="s4">\n</span><span class="s2">Learn more: https://nextjs.org/docs/messages/install-sass'</span><span class="s1">;</span>
        <span class="s0">// dispose of unhelpful stack trace</span>
        <span class="s1">lines = lines.slice(</span><span class="s5">0</span><span class="s1">, </span><span class="s5">2</span><span class="s1">);</span>
        <span class="s1">hadMissingSassError = </span><span class="s3">true</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s3">else if </span><span class="s1">(hadMissingSassError &amp;&amp; message.match(</span><span class="s6">/(sass-loader|resolve-url-loader: CSS error)/</span><span class="s1">)) {</span>
        <span class="s0">// dispose of unhelpful stack trace following missing sass module</span>
        <span class="s1">lines = [];</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(!verbose) {</span>
        <span class="s1">message = lines.join(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
        <span class="s0">// Internal stacks are generally useless so we strip them... with the</span>
        <span class="s0">// exception of stacks containing `webpack:` because they're normally</span>
        <span class="s0">// from user code generated by Webpack. For more information see</span>
        <span class="s0">// https://github.com/facebook/create-react-app/pull/1050</span>
        <span class="s1">message = message.replace(</span><span class="s6">/^\s*at\s((?!webpack:).)*:\d+:\d+[\s)]*(\n|$)/gm</span><span class="s1">, </span><span class="s2">''</span><span class="s1">) </span><span class="s0">// at ... ...:x:y</span>
        <span class="s1">;</span>
        <span class="s1">message = message.replace(</span><span class="s6">/^\s*at\s&lt;anonymous&gt;(\n|$)/gm</span><span class="s1">, </span><span class="s2">''</span><span class="s1">) </span><span class="s0">// at &lt;anonymous&gt;</span>
        <span class="s1">;</span>
        <span class="s1">message = message.replace(</span><span class="s6">/File was processed with these loaders:\n(.+[\\/](next[\\/]dist[\\/].+|@next[\\/]react-refresh-utils[\\/]loader)\.js\n)*You may need an additional loader to handle the result of these loaders.\n/g</span><span class="s1">, </span><span class="s2">''</span><span class="s1">);</span>
        <span class="s1">lines = message.split(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s0">// Remove duplicated newlines</span>
    <span class="s1">lines = lines.filter((line, index, arr)=&gt;index === </span><span class="s5">0 </span><span class="s1">|| line.trim() !== </span><span class="s2">'' </span><span class="s1">|| line.trim() !== arr[index - </span><span class="s5">1</span><span class="s1">].trim());</span>
    <span class="s0">// Reassemble the message</span>
    <span class="s1">message = lines.join(</span><span class="s2">'</span><span class="s4">\n</span><span class="s2">'</span><span class="s1">);</span>
    <span class="s3">return </span><span class="s1">message.trim();</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s1">formatWebpackMessages(json, verbose) {</span>
    <span class="s3">const </span><span class="s1">formattedErrors = json.errors.map((message)=&gt;{</span>
        <span class="s3">const </span><span class="s1">isUnknownNextFontError = message.message.includes(</span><span class="s2">'An error occurred in `next/font`.'</span><span class="s1">);</span>
        <span class="s3">return </span><span class="s1">formatMessage(message, isUnknownNextFontError || verbose);</span>
    <span class="s1">});</span>
    <span class="s3">const </span><span class="s1">formattedWarnings = json.warnings.map((message)=&gt;{</span>
        <span class="s3">return </span><span class="s1">formatMessage(message, verbose);</span>
    <span class="s1">});</span>
    <span class="s0">// Reorder errors to put the most relevant ones first.</span>
    <span class="s3">let </span><span class="s1">reactServerComponentsError = -</span><span class="s5">1</span><span class="s1">;</span>
    <span class="s3">for</span><span class="s1">(</span><span class="s3">let </span><span class="s1">i = </span><span class="s5">0</span><span class="s1">; i &lt; formattedErrors.length; i++){</span>
        <span class="s3">const </span><span class="s1">error = formattedErrors[i];</span>
        <span class="s3">if </span><span class="s1">(error.includes(</span><span class="s2">'ReactServerComponentsError'</span><span class="s1">)) {</span>
            <span class="s1">reactServerComponentsError = i;</span>
            <span class="s3">break</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s0">// Move the reactServerComponentsError to the top if it exists</span>
    <span class="s3">if </span><span class="s1">(reactServerComponentsError !== -</span><span class="s5">1</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s1">error = formattedErrors.splice(reactServerComponentsError, </span><span class="s5">1</span><span class="s1">);</span>
        <span class="s1">formattedErrors.unshift(error[</span><span class="s5">0</span><span class="s1">]);</span>
    <span class="s1">}</span>
    <span class="s3">const </span><span class="s1">result = {</span>
        <span class="s1">...json,</span>
        <span class="s1">errors: formattedErrors,</span>
        <span class="s1">warnings: formattedWarnings</span>
    <span class="s1">};</span>
    <span class="s3">if </span><span class="s1">(!verbose &amp;&amp; result.errors.some(isLikelyASyntaxError)) {</span>
        <span class="s0">// If there are any syntax errors, show just them.</span>
        <span class="s1">result.errors = result.errors.filter(isLikelyASyntaxError);</span>
        <span class="s1">result.warnings = [];</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s1">result;</span>
<span class="s1">}</span>

<span class="s0">//# sourceMappingURL=format-webpack-messages.js.map</span></pre>
</body>
</html>