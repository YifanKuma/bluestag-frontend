<html>
<head>
<title>scheduler-unstable_post_task.production.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8c8c8c; font-style: italic;}
.s1 { color: #8c8c8c; font-style: italic;}
.s2 { color: #080808;}
.s3 { color: #067d17;}
.s4 { color: #0033b3;}
.s5 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
scheduler-unstable_post_task.production.js</font>
</center></td></tr></table>
<pre><span class="s0">/**</span>
 <span class="s0">* </span><span class="s1">@license </span><span class="s0">React</span>
 <span class="s0">* scheduler-unstable_post_task.production.js</span>
 <span class="s0">*</span>
 <span class="s0">* Copyright (c) Meta Platforms, Inc. and affiliates.</span>
 <span class="s0">*</span>
 <span class="s0">* This source code is licensed under the MIT license found in the</span>
 <span class="s0">* LICENSE file in the root directory of this source tree.</span>
 <span class="s0">*/</span>

<span class="s3">&quot;use strict&quot;</span><span class="s2">;</span>
<span class="s4">var </span><span class="s2">perf = window.performance,</span>
  <span class="s2">setTimeout = window.setTimeout,</span>
  <span class="s2">scheduler = global.scheduler,</span>
  <span class="s2">getCurrentTime = perf.now.bind(perf),</span>
  <span class="s2">deadline = </span><span class="s5">0</span><span class="s2">,</span>
  <span class="s2">currentPriorityLevel_DEPRECATED = </span><span class="s5">3</span><span class="s2">;</span>
<span class="s4">function </span><span class="s2">runTask(priorityLevel, postTaskPriority, node, callback) {</span>
  <span class="s2">deadline = getCurrentTime() + </span><span class="s5">5</span><span class="s2">;</span>
  <span class="s4">try </span><span class="s2">{</span>
    <span class="s2">currentPriorityLevel_DEPRECATED = priorityLevel;</span>
    <span class="s4">var </span><span class="s2">result = callback(!</span><span class="s5">1</span><span class="s2">);</span>
    <span class="s4">if </span><span class="s2">(</span><span class="s3">&quot;function&quot; </span><span class="s2">=== </span><span class="s4">typeof </span><span class="s2">result) {</span>
      <span class="s4">var </span><span class="s2">continuationOptions = { signal: node._controller.signal },</span>
        <span class="s2">nextTask = runTask.bind(</span>
          <span class="s4">null</span><span class="s2">,</span>
          <span class="s2">priorityLevel,</span>
          <span class="s2">postTaskPriority,</span>
          <span class="s2">node,</span>
          <span class="s2">result</span>
        <span class="s2">);</span>
      <span class="s4">void </span><span class="s5">0 </span><span class="s2">!== scheduler.yield</span>
        <span class="s2">? scheduler</span>
            <span class="s2">.yield(continuationOptions)</span>
            <span class="s2">.then(nextTask)</span>
            <span class="s2">.catch(handleAbortError)</span>
        <span class="s2">: scheduler</span>
            <span class="s2">.postTask(nextTask, continuationOptions)</span>
            <span class="s2">.catch(handleAbortError);</span>
    <span class="s2">}</span>
  <span class="s2">} </span><span class="s4">catch </span><span class="s2">(error) {</span>
    <span class="s2">setTimeout(</span><span class="s4">function </span><span class="s2">() {</span>
      <span class="s4">throw </span><span class="s2">error;</span>
    <span class="s2">});</span>
  <span class="s2">} </span><span class="s4">finally </span><span class="s2">{</span>
    <span class="s2">currentPriorityLevel_DEPRECATED = </span><span class="s5">3</span><span class="s2">;</span>
  <span class="s2">}</span>
<span class="s2">}</span>
<span class="s4">function </span><span class="s2">handleAbortError() {}</span>
<span class="s2">exports.unstable_IdlePriority = </span><span class="s5">5</span><span class="s2">;</span>
<span class="s2">exports.unstable_ImmediatePriority = </span><span class="s5">1</span><span class="s2">;</span>
<span class="s2">exports.unstable_LowPriority = </span><span class="s5">4</span><span class="s2">;</span>
<span class="s2">exports.unstable_NormalPriority = </span><span class="s5">3</span><span class="s2">;</span>
<span class="s2">exports.unstable_Profiling = </span><span class="s4">null</span><span class="s2">;</span>
<span class="s2">exports.unstable_UserBlockingPriority = </span><span class="s5">2</span><span class="s2">;</span>
<span class="s2">exports.unstable_cancelCallback = </span><span class="s4">function </span><span class="s2">(node) {</span>
  <span class="s2">node._controller.abort();</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_forceFrameRate = </span><span class="s4">function </span><span class="s2">() {};</span>
<span class="s2">exports.unstable_getCurrentPriorityLevel = </span><span class="s4">function </span><span class="s2">() {</span>
  <span class="s4">return </span><span class="s2">currentPriorityLevel_DEPRECATED;</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_next = </span><span class="s4">function </span><span class="s2">(callback) {</span>
  <span class="s4">switch </span><span class="s2">(currentPriorityLevel_DEPRECATED) {</span>
    <span class="s4">case </span><span class="s5">1</span><span class="s2">:</span>
    <span class="s4">case </span><span class="s5">2</span><span class="s2">:</span>
    <span class="s4">case </span><span class="s5">3</span><span class="s2">:</span>
      <span class="s4">var </span><span class="s2">priorityLevel = </span><span class="s5">3</span><span class="s2">;</span>
      <span class="s4">break</span><span class="s2">;</span>
    <span class="s4">default</span><span class="s2">:</span>
      <span class="s2">priorityLevel = currentPriorityLevel_DEPRECATED;</span>
  <span class="s2">}</span>
  <span class="s4">var </span><span class="s2">previousPriorityLevel = currentPriorityLevel_DEPRECATED;</span>
  <span class="s2">currentPriorityLevel_DEPRECATED = priorityLevel;</span>
  <span class="s4">try </span><span class="s2">{</span>
    <span class="s4">return </span><span class="s2">callback();</span>
  <span class="s2">} </span><span class="s4">finally </span><span class="s2">{</span>
    <span class="s2">currentPriorityLevel_DEPRECATED = previousPriorityLevel;</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_now = getCurrentTime;</span>
<span class="s2">exports.unstable_requestPaint = </span><span class="s4">function </span><span class="s2">() {};</span>
<span class="s2">exports.unstable_runWithPriority = </span><span class="s4">function </span><span class="s2">(priorityLevel, callback) {</span>
  <span class="s4">var </span><span class="s2">previousPriorityLevel = currentPriorityLevel_DEPRECATED;</span>
  <span class="s2">currentPriorityLevel_DEPRECATED = priorityLevel;</span>
  <span class="s4">try </span><span class="s2">{</span>
    <span class="s4">return </span><span class="s2">callback();</span>
  <span class="s2">} </span><span class="s4">finally </span><span class="s2">{</span>
    <span class="s2">currentPriorityLevel_DEPRECATED = previousPriorityLevel;</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_scheduleCallback = </span><span class="s4">function </span><span class="s2">(</span>
  <span class="s2">priorityLevel,</span>
  <span class="s2">callback,</span>
  <span class="s2">options</span>
<span class="s2">) {</span>
  <span class="s4">switch </span><span class="s2">(priorityLevel) {</span>
    <span class="s4">case </span><span class="s5">1</span><span class="s2">:</span>
    <span class="s4">case </span><span class="s5">2</span><span class="s2">:</span>
      <span class="s4">var </span><span class="s2">postTaskPriority = </span><span class="s3">&quot;user-blocking&quot;</span><span class="s2">;</span>
      <span class="s4">break</span><span class="s2">;</span>
    <span class="s4">case </span><span class="s5">4</span><span class="s2">:</span>
    <span class="s4">case </span><span class="s5">3</span><span class="s2">:</span>
      <span class="s2">postTaskPriority = </span><span class="s3">&quot;user-visible&quot;</span><span class="s2">;</span>
      <span class="s4">break</span><span class="s2">;</span>
    <span class="s4">case </span><span class="s5">5</span><span class="s2">:</span>
      <span class="s2">postTaskPriority = </span><span class="s3">&quot;background&quot;</span><span class="s2">;</span>
      <span class="s4">break</span><span class="s2">;</span>
    <span class="s4">default</span><span class="s2">:</span>
      <span class="s2">postTaskPriority = </span><span class="s3">&quot;user-visible&quot;</span><span class="s2">;</span>
  <span class="s2">}</span>
  <span class="s4">var </span><span class="s2">controller = </span><span class="s4">new </span><span class="s2">TaskController({ priority: postTaskPriority });</span>
  <span class="s2">options = {</span>
    <span class="s2">delay: </span><span class="s3">&quot;object&quot; </span><span class="s2">=== </span><span class="s4">typeof </span><span class="s2">options &amp;&amp; </span><span class="s4">null </span><span class="s2">!== options ? options.delay : </span><span class="s5">0</span><span class="s2">,</span>
    <span class="s2">signal: controller.signal</span>
  <span class="s2">};</span>
  <span class="s2">controller = { _controller: controller };</span>
  <span class="s2">scheduler</span>
    <span class="s2">.postTask(</span>
      <span class="s2">runTask.bind(</span><span class="s4">null</span><span class="s2">, priorityLevel, postTaskPriority, controller, callback),</span>
      <span class="s2">options</span>
    <span class="s2">)</span>
    <span class="s2">.catch(handleAbortError);</span>
  <span class="s4">return </span><span class="s2">controller;</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_shouldYield = </span><span class="s4">function </span><span class="s2">() {</span>
  <span class="s4">return </span><span class="s2">getCurrentTime() &gt;= deadline;</span>
<span class="s2">};</span>
<span class="s2">exports.unstable_wrapCallback = </span><span class="s4">function </span><span class="s2">(callback) {</span>
  <span class="s4">var </span><span class="s2">parentPriorityLevel = currentPriorityLevel_DEPRECATED;</span>
  <span class="s4">return function </span><span class="s2">() {</span>
    <span class="s4">var </span><span class="s2">previousPriorityLevel = currentPriorityLevel_DEPRECATED;</span>
    <span class="s2">currentPriorityLevel_DEPRECATED = parentPriorityLevel;</span>
    <span class="s4">try </span><span class="s2">{</span>
      <span class="s4">return </span><span class="s2">callback();</span>
    <span class="s2">} </span><span class="s4">finally </span><span class="s2">{</span>
      <span class="s2">currentPriorityLevel_DEPRECATED = previousPriorityLevel;</span>
    <span class="s2">}</span>
  <span class="s2">};</span>
<span class="s2">};</span>
</pre>
</body>
</html>