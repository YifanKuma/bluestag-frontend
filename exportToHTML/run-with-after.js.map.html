<html>
<head>
<title>run-with-after.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
run-with-after.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/after/run-with-after.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { DetachedPromise } from '../../lib/detached-promise'</span><span class="s3">\n</span><span class="s1">import { CloseController } from '../web/web-on-close'</span><span class="s3">\n</span><span class="s1">import type { AfterContextOpts } from './after-context'</span><span class="s3">\n</span><span class="s1">import { AwaiterOnce } from './awaiter'</span><span class="s3">\n\n</span><span class="s1">type Ctx = {</span><span class="s3">\n  </span><span class="s1">waitUntil: NonNullable&lt;AfterContextOpts['waitUntil']&gt;</span><span class="s3">\n  </span><span class="s1">onClose: NonNullable&lt;AfterContextOpts['onClose']&gt;</span><span class="s3">\n  </span><span class="s1">onTaskError: NonNullable&lt;AfterContextOpts['onTaskError']&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export class AfterRunner {</span><span class="s3">\n  </span><span class="s1">private awaiter = new AwaiterOnce()</span><span class="s3">\n  </span><span class="s1">private closeController = new CloseController()</span><span class="s3">\n  </span><span class="s1">private finishedWithoutErrors = new DetachedPromise&lt;void&gt;()</span><span class="s3">\n\n  </span><span class="s1">readonly context: Ctx = {</span><span class="s3">\n    </span><span class="s1">waitUntil: this.awaiter.waitUntil.bind(this.awaiter),</span><span class="s3">\n    </span><span class="s1">onClose: this.closeController.onClose.bind(this.closeController),</span><span class="s3">\n    </span><span class="s1">onTaskError: (error) =&gt; this.finishedWithoutErrors.reject(error),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async executeAfter() {</span><span class="s3">\n    </span><span class="s1">this.closeController.dispatchClose()</span><span class="s3">\n    </span><span class="s1">await this.awaiter.awaiting()</span><span class="s3">\n\n    </span><span class="s1">// if we got an error while running the callbacks,</span><span class="s3">\n    </span><span class="s1">// thenthis is a noop, because the promise is already rejected</span><span class="s3">\n    </span><span class="s1">this.finishedWithoutErrors.resolve()</span><span class="s3">\n\n    </span><span class="s1">return this.finishedWithoutErrors.promise</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AfterRunner&quot;</span><span class="s0">,</span><span class="s1">&quot;executeAfter&quot;</span><span class="s0">,</span><span class="s1">&quot;closeController&quot;</span><span class="s0">,</span><span class="s1">&quot;dispatchClose&quot;</span><span class="s0">,</span><span class="s1">&quot;awaiter&quot;</span><span class="s0">,</span><span class="s1">&quot;awaiting&quot;</span><span class="s0">,</span><span class="s1">&quot;finishedWithoutErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;promise&quot;</span><span class="s0">,</span><span class="s1">&quot;AwaiterOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;CloseController&quot;</span><span class="s0">,</span><span class="s1">&quot;DetachedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;onClose&quot;</span><span class="s0">,</span><span class="s1">&quot;onTaskError&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAWaA;;;eAAAA;;;iCAXmB;4BACA;yBAEJ;AAQrB,MAAMA;IAWX,MAAaC,eAAe;QAC1B,IAAI,CAACC,eAAe,CAACC,aAAa;QAClC,MAAM,IAAI,CAACC,OAAO,CAACC,QAAQ;QAE3B,kDAAkD;QAClD,8DAA8D;QAC9D,IAAI,CAACC,qBAAqB,CAACC,OAAO;QAElC,OAAO,IAAI,CAACD,qBAAqB,CAACE,OAAO;IAC3C;;aAnBQJ,UAAU,IAAIK,oBAAW;aACzBP,kBAAkB,IAAIQ,2BAAe;aACrCJ,wBAAwB,IAAIK,gCAAe;aAE1CC,UAAe;YACtBC,WAAW,IAAI,CAACT,OAAO,CAACS,SAAS,CAACC,IAAI,CAAC,IAAI,CAACV,OAAO;YACnDW,SAAS,IAAI,CAACb,eAAe,CAACa,OAAO,CAACD,IAAI,CAAC,IAAI,CAACZ,eAAe;YAC/Dc,aAAa,CAACC,QAAU,IAAI,CAACX,qBAAqB,CAACY,MAAM,CAACD;QAC5D;;AAYF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>