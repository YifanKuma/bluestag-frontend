<html>
<head>
<title>eslintrc-universal.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #0033b3;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #8c8c8c; font-style: italic;}
.s5 { color: #1750eb;}
.s6 { color: #0037a6;}
.s7 { color: #264eff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslintrc-universal.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s1">Object.defineProperty(exports, </span><span class="s0">'__esModule'</span><span class="s1">, { value: </span><span class="s2">true </span><span class="s1">});</span>

<span class="s2">var </span><span class="s1">util = require(</span><span class="s0">'node:util'</span><span class="s1">);</span>
<span class="s2">var </span><span class="s1">path = require(</span><span class="s0">'node:path'</span><span class="s1">);</span>
<span class="s2">var </span><span class="s1">Ajv = require(</span><span class="s0">'ajv'</span><span class="s1">);</span>
<span class="s2">var </span><span class="s1">globals = require(</span><span class="s0">'globals'</span><span class="s1">);</span>

<span class="s2">function </span><span class="s1">_interopDefaultLegacy (e) { </span><span class="s2">return </span><span class="s1">e &amp;&amp; </span><span class="s2">typeof </span><span class="s1">e === </span><span class="s0">'object' </span><span class="s1">&amp;&amp; </span><span class="s0">'default' </span><span class="s2">in </span><span class="s1">e ? e : { </span><span class="s0">'default'</span><span class="s1">: e }; }</span>

<span class="s2">var </span><span class="s1">util__default = </span><span class="s3">/*#__PURE__*/</span><span class="s1">_interopDefaultLegacy(util);</span>
<span class="s2">var </span><span class="s1">path__default = </span><span class="s3">/*#__PURE__*/</span><span class="s1">_interopDefaultLegacy(path);</span>
<span class="s2">var </span><span class="s1">Ajv__default = </span><span class="s3">/*#__PURE__*/</span><span class="s1">_interopDefaultLegacy(Ajv);</span>
<span class="s2">var </span><span class="s1">globals__default = </span><span class="s3">/*#__PURE__*/</span><span class="s1">_interopDefaultLegacy(globals);</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Config file operations. This file must be usable in the browser,</span>
 <span class="s3">* so no Node-specific code can be here.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Nicholas C. Zakas</span>
 <span class="s3">*/</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Private</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">RULE_SEVERITY_STRINGS = [</span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">],</span>
    <span class="s1">RULE_SEVERITY = RULE_SEVERITY_STRINGS.reduce((map, value, index) =&gt; {</span>
        <span class="s1">map[value] = index;</span>
        <span class="s2">return </span><span class="s1">map;</span>
    <span class="s1">}, {}),</span>
    <span class="s1">VALID_SEVERITIES = </span><span class="s2">new </span><span class="s1">Set([</span><span class="s5">0</span><span class="s1">, </span><span class="s5">1</span><span class="s1">, </span><span class="s5">2</span><span class="s1">, </span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">]);</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Public Interface</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s3">/**</span>
 <span class="s3">* Normalizes the severity value of a rule's configuration to a number</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(number|string|[number, ...*]|[string, ...*])} ruleConfig A rule's configuration value, generally</span>
 <span class="s3">* received from the user. A valid config value is either 0, 1, 2, the string &quot;off&quot; (treated the same as 0),</span>
 <span class="s3">* the string &quot;warn&quot; (treated the same as 1), the string &quot;error&quot; (treated the same as 2), or an array</span>
 <span class="s3">* whose first element is one of the above values. Strings are matched case-insensitively.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{(0|1|2)} The numeric severity value if the config value was valid, otherwise 0.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">getRuleSeverity(ruleConfig) {</span>
    <span class="s2">const </span><span class="s1">severityValue = Array.isArray(ruleConfig) ? ruleConfig[</span><span class="s5">0</span><span class="s1">] : ruleConfig;</span>

    <span class="s2">if </span><span class="s1">(severityValue === </span><span class="s5">0 </span><span class="s1">|| severityValue === </span><span class="s5">1 </span><span class="s1">|| severityValue === </span><span class="s5">2</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">severityValue;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">severityValue === </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">RULE_SEVERITY[severityValue.toLowerCase()] || </span><span class="s5">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s5">0</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Converts old-style severity settings (0, 1, 2) into new-style</span>
 <span class="s3">* severity settings (off, warn, error) for all rules. Assumption is that severity</span>
 <span class="s3">* values have already been validated as correct.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} config The config object to normalize.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">normalizeToStrings(config) {</span>

    <span class="s2">if </span><span class="s1">(config.rules) {</span>
        <span class="s1">Object.keys(config.rules).forEach(ruleId =&gt; {</span>
            <span class="s2">const </span><span class="s1">ruleConfig = config.rules[ruleId];</span>

            <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">ruleConfig === </span><span class="s0">&quot;number&quot;</span><span class="s1">) {</span>
                <span class="s1">config.rules[ruleId] = RULE_SEVERITY_STRINGS[ruleConfig] || RULE_SEVERITY_STRINGS[</span><span class="s5">0</span><span class="s1">];</span>
            <span class="s1">} </span><span class="s2">else if </span><span class="s1">(Array.isArray(ruleConfig) &amp;&amp; </span><span class="s2">typeof </span><span class="s1">ruleConfig[</span><span class="s5">0</span><span class="s1">] === </span><span class="s0">&quot;number&quot;</span><span class="s1">) {</span>
                <span class="s1">ruleConfig[</span><span class="s5">0</span><span class="s1">] = RULE_SEVERITY_STRINGS[ruleConfig[</span><span class="s5">0</span><span class="s1">]] || RULE_SEVERITY_STRINGS[</span><span class="s5">0</span><span class="s1">];</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Determines if the severity for the given rule configuration represents an error.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{int|string|Array} ruleConfig The configuration for an individual rule.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{boolean} True if the rule represents an error, false if not.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">isErrorSeverity(ruleConfig) {</span>
    <span class="s2">return </span><span class="s1">getRuleSeverity(ruleConfig) === </span><span class="s5">2</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Checks whether a given config has valid severity or not.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{number|string|Array} ruleConfig The configuration for an individual rule.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{boolean} `true` if the configuration has valid severity.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">isValidSeverity(ruleConfig) {</span>
    <span class="s2">let </span><span class="s1">severity = Array.isArray(ruleConfig) ? ruleConfig[</span><span class="s5">0</span><span class="s1">] : ruleConfig;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">severity === </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s1">severity = severity.toLowerCase();</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">VALID_SEVERITIES.has(severity);</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Checks whether every rule of a given config has valid severity or not.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} config The configuration for rules.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{boolean} `true` if the configuration has valid severity.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">isEverySeverityValid(config) {</span>
    <span class="s2">return </span><span class="s1">Object.keys(config).every(ruleId =&gt; isValidSeverity(config[ruleId]));</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Normalizes a value for a global in a config</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(boolean|string|null)} configuredValue The value given for a global in configuration or in</span>
 <span class="s3">* a global directive comment</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{(&quot;readable&quot;|&quot;writeable&quot;|&quot;off&quot;)} The value normalized as a string</span>
 <span class="s3">* </span><span class="s4">@throws </span><span class="s3">Error if global value is invalid</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">normalizeConfigGlobal(configuredValue) {</span>
    <span class="s2">switch </span><span class="s1">(configuredValue) {</span>
        <span class="s2">case </span><span class="s0">&quot;off&quot;</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s0">&quot;off&quot;</span><span class="s1">;</span>

        <span class="s2">case true</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;true&quot;</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;writeable&quot;</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;writable&quot;</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s0">&quot;writable&quot;</span><span class="s1">;</span>

        <span class="s2">case null</span><span class="s1">:</span>
        <span class="s2">case false</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;false&quot;</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;readable&quot;</span><span class="s1">:</span>
        <span class="s2">case </span><span class="s0">&quot;readonly&quot;</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s0">&quot;readonly&quot;</span><span class="s1">;</span>

        <span class="s2">default</span><span class="s1">:</span>
            <span class="s2">throw new </span><span class="s1">Error(</span><span class="s0">`'</span><span class="s1">${configuredValue}</span><span class="s0">' is not a valid configuration for a global (use 'readonly', 'writable', or 'off')`</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">ConfigOps = {</span>
    <span class="s1">__proto__: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">getRuleSeverity: getRuleSeverity,</span>
    <span class="s1">normalizeToStrings: normalizeToStrings,</span>
    <span class="s1">isErrorSeverity: isErrorSeverity,</span>
    <span class="s1">isValidSeverity: isValidSeverity,</span>
    <span class="s1">isEverySeverityValid: isEverySeverityValid,</span>
    <span class="s1">normalizeConfigGlobal: normalizeConfigGlobal</span>
<span class="s1">};</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Provide the function that emits deprecation warnings.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Toru Nagashima &lt;http://github.com/mysticatea&gt;</span>
 <span class="s3">*/</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Private</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s3">// Defitions for deprecation warnings.</span>
<span class="s2">const </span><span class="s1">deprecationWarningMessages = {</span>
    <span class="s1">ESLINT_LEGACY_ECMAFEATURES:</span>
        <span class="s0">&quot;The 'ecmaFeatures' config file property is deprecated and has no effect.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_LOAD:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;Please use a config file per project or the '--config' option.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_SUPPRESS:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;Please remove it or add 'root:true' to the config files in your &quot; </span><span class="s1">+</span>
        <span class="s0">&quot;projects in order to avoid loading '~/.eslintrc.*' accidentally.&quot;</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">sourceFileErrorCache = </span><span class="s2">new </span><span class="s1">Set();</span>

<span class="s3">/**</span>
 <span class="s3">* Emits a deprecation warning containing a given filepath. A new deprecation warning is emitted</span>
 <span class="s3">* for each unique file path, but repeated invocations with the same file path have no effect.</span>
 <span class="s3">* No warnings are emitted if the `--no-deprecation` or `--no-warnings` Node runtime flags are active.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of the configuration source to report the warning for.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} errorCode The warning message to show.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">emitDeprecationWarning(source, errorCode) {</span>
    <span class="s2">const </span><span class="s1">cacheKey = JSON.stringify({ source, errorCode });</span>

    <span class="s2">if </span><span class="s1">(sourceFileErrorCache.has(cacheKey)) {</span>
        <span class="s2">return</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s1">sourceFileErrorCache.add(cacheKey);</span>

    <span class="s2">const </span><span class="s1">rel = path__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].relative(process.cwd(), source);</span>
    <span class="s2">const </span><span class="s1">message = deprecationWarningMessages[errorCode];</span>

    <span class="s1">process.emitWarning(</span>
        <span class="s0">`</span><span class="s1">${message} </span><span class="s0">(found in &quot;</span><span class="s1">${rel}</span><span class="s0">&quot;)`</span><span class="s1">,</span>
        <span class="s0">&quot;DeprecationWarning&quot;</span><span class="s1">,</span>
        <span class="s1">errorCode</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">The instance of Ajv validator.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Evgeny Poberezkin</span>
 <span class="s3">*/</span>

<span class="s3">//-----------------------------------------------------------------------------</span>
<span class="s3">// Helpers</span>
<span class="s3">//-----------------------------------------------------------------------------</span>

<span class="s3">/* 
 * Copied from ajv/lib/refs/json-schema-draft-04.json 
 * The MIT License (MIT) 
 * Copyright (c) 2015-2017 Evgeny Poberezkin 
 */</span>
<span class="s2">const </span><span class="s1">metaSchema = {</span>
    <span class="s1">id: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">$schema: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">description: </span><span class="s0">&quot;Core schema meta-schema&quot;</span><span class="s1">,</span>
    <span class="s1">definitions: {</span>
        <span class="s1">schemaArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s5">1</span><span class="s1">,</span>
            <span class="s1">items: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s1">positiveInteger: {</span>
            <span class="s1">type: </span><span class="s0">&quot;integer&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s5">0</span>
        <span class="s1">},</span>
        <span class="s1">positiveIntegerDefault0: {</span>
            <span class="s1">allOf: [{ $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">}, { </span><span class="s2">default</span><span class="s1">: </span><span class="s5">0 </span><span class="s1">}]</span>
        <span class="s1">},</span>
        <span class="s1">simpleTypes: {</span>
            <span class="s2">enum</span><span class="s1">: [</span><span class="s0">&quot;array&quot;</span><span class="s1">, </span><span class="s0">&quot;boolean&quot;</span><span class="s1">, </span><span class="s0">&quot;integer&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">, </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s0">&quot;object&quot;</span><span class="s1">, </span><span class="s0">&quot;string&quot;</span><span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
            <span class="s1">minItems: </span><span class="s5">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s2">true</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
    <span class="s1">properties: {</span>
        <span class="s1">id: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">$schema: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">title: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">description: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s2">default</span><span class="s1">: { },</span>
        <span class="s1">multipleOf: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s5">0</span><span class="s1">,</span>
            <span class="s1">exclusiveMinimum: </span><span class="s2">true</span>
        <span class="s1">},</span>
        <span class="s1">maximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMaximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s2">default</span><span class="s1">: </span><span class="s2">false</span>
        <span class="s1">},</span>
        <span class="s1">minimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMinimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s2">default</span><span class="s1">: </span><span class="s2">false</span>
        <span class="s1">},</span>
        <span class="s1">maxLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">pattern: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span><span class="s1">,</span>
            <span class="s1">format: </span><span class="s0">&quot;regex&quot;</span>
        <span class="s1">},</span>
        <span class="s1">additionalItems: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">items: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">maxItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">uniqueItems: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s2">default</span><span class="s1">: </span><span class="s2">false</span>
        <span class="s1">},</span>
        <span class="s1">maxProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">required: { $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">},</span>
        <span class="s1">additionalProperties: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">definitions: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">properties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">patternProperties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s2">default</span><span class="s1">: { }</span>
        <span class="s1">},</span>
        <span class="s1">dependencies: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: {</span>
                <span class="s1">anyOf: [</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">}</span>
                <span class="s1">]</span>
            <span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s2">enum</span><span class="s1">: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s5">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s2">true</span>
        <span class="s1">},</span>
        <span class="s1">type: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                    <span class="s1">minItems: </span><span class="s5">1</span><span class="s1">,</span>
                    <span class="s1">uniqueItems: </span><span class="s2">true</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">format: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
        <span class="s1">allOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">anyOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">oneOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">not: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">dependencies: {</span>
        <span class="s1">exclusiveMaximum: [</span><span class="s0">&quot;maximum&quot;</span><span class="s1">],</span>
        <span class="s1">exclusiveMinimum: [</span><span class="s0">&quot;minimum&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s2">default</span><span class="s1">: { }</span>
<span class="s1">};</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Public Interface</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s2">var </span><span class="s1">ajvOrig = (additionalOptions = {}) =&gt; {</span>
    <span class="s2">const </span><span class="s1">ajv = </span><span class="s2">new </span><span class="s1">Ajv__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({</span>
        <span class="s1">meta: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">useDefaults: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">validateSchema: </span><span class="s2">false</span><span class="s1">,</span>
        <span class="s1">missingRefs: </span><span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
        <span class="s1">verbose: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">schemaId: </span><span class="s0">&quot;auto&quot;</span><span class="s1">,</span>
        <span class="s1">...additionalOptions</span>
    <span class="s1">});</span>

    <span class="s1">ajv.addMetaSchema(metaSchema);</span>
    <span class="s3">// eslint-disable-next-line no-underscore-dangle -- part of the API</span>
    <span class="s1">ajv._opts.defaultMeta = metaSchema.id;</span>

    <span class="s2">return </span><span class="s1">ajv;</span>
<span class="s1">};</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Applies default rule options</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">JoshuaKGoldberg</span>
 <span class="s3">*/</span>

<span class="s3">/**</span>
 <span class="s3">* Check if the variable contains an object strictly rejecting arrays</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{unknown} value an object</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{boolean} Whether value is an object</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">isObjectNotArray(value) {</span>
    <span class="s2">return typeof </span><span class="s1">value === </span><span class="s0">&quot;object&quot; </span><span class="s1">&amp;&amp; value !== </span><span class="s2">null </span><span class="s1">&amp;&amp; !Array.isArray(value);</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Deeply merges second on top of first, creating a new {} object if needed.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{T} first Base, default value.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{U} second User-specified value.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{T | U | (T &amp; U)} Merged equivalent of second on top of first.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">deepMergeObjects(first, second) {</span>
    <span class="s2">if </span><span class="s1">(second === </span><span class="s2">void </span><span class="s5">0</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">first;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(!isObjectNotArray(first) || !isObjectNotArray(second)) {</span>
        <span class="s2">return </span><span class="s1">second;</span>
    <span class="s1">}</span>

    <span class="s2">const </span><span class="s1">result = { ...first, ...second };</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">key of Object.keys(second)) {</span>
        <span class="s2">if </span><span class="s1">(Object.prototype.propertyIsEnumerable.call(first, key)) {</span>
            <span class="s1">result[key] = deepMergeObjects(first[key], second[key]);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">result;</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Deeply merges second on top of first, creating a new [] array if needed.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{T[] | undefined} first Base, default values.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{U[] | undefined} second User-specified values.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{(T | U | (T &amp; U))[]} Merged equivalent of second on top of first.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">deepMergeArrays(first, second) {</span>
    <span class="s2">if </span><span class="s1">(!first || !second) {</span>
        <span class="s2">return </span><span class="s1">second || first || [];</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">[</span>
        <span class="s1">...first.map((value, i) =&gt; deepMergeObjects(value, second[i])),</span>
        <span class="s1">...second.slice(first.length)</span>
    <span class="s1">];</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Defines a schema for configs.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Sylvan Mably</span>
 <span class="s3">*/</span>

<span class="s2">const </span><span class="s1">baseConfigProperties = {</span>
    <span class="s1">$schema: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">env: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s2">extends</span><span class="s1">: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
    <span class="s1">globals: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">overrides: {</span>
        <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
        <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/overrideConfig&quot; </span><span class="s1">},</span>
        <span class="s1">additionalItems: </span><span class="s2">false</span>
    <span class="s1">},</span>
    <span class="s1">parser: { type: [</span><span class="s0">&quot;string&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">] },</span>
    <span class="s1">parserOptions: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">plugins: { type: </span><span class="s0">&quot;array&quot; </span><span class="s1">},</span>
    <span class="s1">processor: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">rules: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">settings: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">noInlineConfig: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
    <span class="s1">reportUnusedDisableDirectives: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>

    <span class="s1">ecmaFeatures: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">} </span><span class="s3">// deprecated; logs a warning when used</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">configSchema = {</span>
    <span class="s1">definitions: {</span>
        <span class="s1">stringOrStrings: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s2">false</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringOrStringsRequired: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s2">false</span><span class="s1">,</span>
                    <span class="s1">minItems: </span><span class="s5">1</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>

        <span class="s3">// Config at top-level.</span>
        <span class="s1">objectConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">root: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">ignorePatterns: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s1">...baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">additionalProperties: </span><span class="s2">false</span>
        <span class="s1">},</span>

        <span class="s3">// Config in `overrides`.</span>
        <span class="s1">overrideConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">excludedFiles: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s1">files: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStringsRequired&quot; </span><span class="s1">},</span>
                <span class="s1">...baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">required: [</span><span class="s0">&quot;files&quot;</span><span class="s1">],</span>
            <span class="s1">additionalProperties: </span><span class="s2">false</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">$ref: </span><span class="s0">&quot;#/definitions/objectConfig&quot;</span>
<span class="s1">};</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Defines environment settings and globals.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Elan Shanker</span>
 <span class="s3">*/</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Helpers</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s3">/**</span>
 <span class="s3">* Get the object that has difference.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Record&lt;string,boolean&gt;} current The newer object.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Record&lt;string,boolean&gt;} prev The older object.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{Record&lt;string,boolean&gt;} The difference object.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">getDiff(current, prev) {</span>
    <span class="s2">const </span><span class="s1">retv = {};</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">[key, value] of Object.entries(current)) {</span>
        <span class="s2">if </span><span class="s1">(!Object.hasOwn(prev, key)) {</span>
            <span class="s1">retv[key] = value;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">retv;</span>
<span class="s1">}</span>

<span class="s2">const </span><span class="s1">newGlobals2015 = getDiff(globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].es2015, globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].es5); </span><span class="s3">// 19 variables such as Promise, Map, ...</span>
<span class="s2">const </span><span class="s1">newGlobals2017 = {</span>
    <span class="s1">Atomics: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">SharedArrayBuffer: </span><span class="s2">false</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">newGlobals2020 = {</span>
    <span class="s1">BigInt: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">BigInt64Array: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">BigUint64Array: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">globalThis: </span><span class="s2">false</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">newGlobals2021 = {</span>
    <span class="s1">AggregateError: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">FinalizationRegistry: </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s1">WeakRef: </span><span class="s2">false</span>
<span class="s1">};</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Public Interface</span>
<span class="s3">//------------------------------------------------------------------------------</span>

<span class="s3">/** </span><span class="s4">@type </span><span class="s3">{Map&lt;string, import(&quot;../lib/shared/types&quot;).Environment&gt;} */</span>
<span class="s2">var </span><span class="s1">environments = </span><span class="s2">new </span><span class="s1">Map(Object.entries({</span>

    <span class="s3">// Language</span>
    <span class="s1">builtin: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].es5</span>
    <span class="s1">},</span>
    <span class="s1">es6: {</span>
        <span class="s1">globals: newGlobals2015,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2015: {</span>
        <span class="s1">globals: newGlobals2015,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2016: {</span>
        <span class="s1">globals: newGlobals2015,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">7</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2017: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">8</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2018: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">9</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2019: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">10</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2020: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017, ...newGlobals2020 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">11</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2021: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017, ...newGlobals2020, ...newGlobals2021 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">12</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2022: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017, ...newGlobals2020, ...newGlobals2021 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">13</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2023: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017, ...newGlobals2020, ...newGlobals2021 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">14</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2024: {</span>
        <span class="s1">globals: { ...newGlobals2015, ...newGlobals2017, ...newGlobals2020, ...newGlobals2021 },</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s5">15</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s3">// Platforms</span>
    <span class="s1">browser: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].browser</span>
    <span class="s1">},</span>
    <span class="s1">node: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].node,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s2">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">][</span><span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s1">worker: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].worker</span>
    <span class="s1">},</span>
    <span class="s1">serviceworker: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].serviceworker</span>
    <span class="s1">},</span>

    <span class="s3">// Frameworks</span>
    <span class="s1">commonjs: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].commonjs,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s2">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">amd: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].amd</span>
    <span class="s1">},</span>
    <span class="s1">mocha: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].mocha</span>
    <span class="s1">},</span>
    <span class="s1">jasmine: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].jasmine</span>
    <span class="s1">},</span>
    <span class="s1">jest: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].jest</span>
    <span class="s1">},</span>
    <span class="s1">phantomjs: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].phantomjs</span>
    <span class="s1">},</span>
    <span class="s1">jquery: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].jquery</span>
    <span class="s1">},</span>
    <span class="s1">qunit: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].qunit</span>
    <span class="s1">},</span>
    <span class="s1">prototypejs: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].prototypejs</span>
    <span class="s1">},</span>
    <span class="s1">shelljs: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].shelljs</span>
    <span class="s1">},</span>
    <span class="s1">meteor: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].meteor</span>
    <span class="s1">},</span>
    <span class="s1">mongo: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].mongo</span>
    <span class="s1">},</span>
    <span class="s1">protractor: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].protractor</span>
    <span class="s1">},</span>
    <span class="s1">applescript: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].applescript</span>
    <span class="s1">},</span>
    <span class="s1">nashorn: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].nashorn</span>
    <span class="s1">},</span>
    <span class="s1">atomtest: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].atomtest</span>
    <span class="s1">},</span>
    <span class="s1">embertest: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].embertest</span>
    <span class="s1">},</span>
    <span class="s1">webextensions: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].webextensions</span>
    <span class="s1">},</span>
    <span class="s1">greasemonkey: {</span>
        <span class="s1">globals: globals__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].greasemonkey</span>
    <span class="s1">}</span>
<span class="s1">}));</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Validates configs.</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Brandon Mills</span>
 <span class="s3">*/</span>

<span class="s2">const </span><span class="s1">ajv = ajvOrig();</span>

<span class="s2">const </span><span class="s1">ruleValidators = </span><span class="s2">new </span><span class="s1">WeakMap();</span>
<span class="s2">const </span><span class="s1">noop = Function.prototype;</span>

<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s3">// Private</span>
<span class="s3">//------------------------------------------------------------------------------</span>
<span class="s2">let </span><span class="s1">validateSchema;</span>
<span class="s2">const </span><span class="s1">severityMap = {</span>
    <span class="s1">error: </span><span class="s5">2</span><span class="s1">,</span>
    <span class="s1">warn: </span><span class="s5">1</span><span class="s1">,</span>
    <span class="s1">off: </span><span class="s5">0</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">validated = </span><span class="s2">new </span><span class="s1">WeakSet();</span>

<span class="s3">// JSON schema that disallows passing any options</span>
<span class="s2">const </span><span class="s1">noOptionsSchema = Object.freeze({</span>
    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
    <span class="s1">minItems: </span><span class="s5">0</span><span class="s1">,</span>
    <span class="s1">maxItems: </span><span class="s5">0</span>
<span class="s1">});</span>

<span class="s3">//-----------------------------------------------------------------------------</span>
<span class="s3">// Exports</span>
<span class="s3">//-----------------------------------------------------------------------------</span>

<span class="s3">/**</span>
 <span class="s3">* Validator for configuration objects.</span>
 <span class="s3">*/</span>
<span class="s2">class </span><span class="s1">ConfigValidator {</span>
    <span class="s1">constructor({ builtInRules = </span><span class="s2">new </span><span class="s1">Map() } = {}) {</span>
        <span class="s2">this</span><span class="s1">.builtInRules = builtInRules;</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Gets a complete options schema for a rule.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Rule} rule A rule object</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{TypeError} If `meta.schema` is specified but is not an array, object or `false`.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{Object|null} JSON Schema for the rule's options.</span>
     <span class="s3">*      `null` if rule wasn't passed or its `meta.schema` is `false`.</span>
     <span class="s3">*/</span>
    <span class="s1">getRuleOptionsSchema(rule) {</span>
        <span class="s2">if </span><span class="s1">(!rule) {</span>
            <span class="s2">return null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(!rule.meta) {</span>
            <span class="s2">return </span><span class="s1">{ ...noOptionsSchema }; </span><span class="s3">// default if `meta.schema` is not specified</span>
        <span class="s1">}</span>

        <span class="s2">const </span><span class="s1">schema = rule.meta.schema;</span>

        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">schema === </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>
            <span class="s2">return </span><span class="s1">{ ...noOptionsSchema }; </span><span class="s3">// default if `meta.schema` is not specified</span>
        <span class="s1">}</span>

        <span class="s3">// `schema:false` is an allowed explicit opt-out of options validation for the rule</span>
        <span class="s2">if </span><span class="s1">(schema === </span><span class="s2">false</span><span class="s1">) {</span>
            <span class="s2">return null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">schema !== </span><span class="s0">&quot;object&quot; </span><span class="s1">|| schema === </span><span class="s2">null</span><span class="s1">) {</span>
            <span class="s2">throw new </span><span class="s1">TypeError(</span><span class="s0">&quot;Rule's `meta.schema` must be an array or object&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s3">// ESLint-specific array form needs to be converted into a valid JSON Schema definition</span>
        <span class="s2">if </span><span class="s1">(Array.isArray(schema)) {</span>
            <span class="s2">if </span><span class="s1">(schema.length) {</span>
                <span class="s2">return </span><span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: schema,</span>
                    <span class="s1">minItems: </span><span class="s5">0</span><span class="s1">,</span>
                    <span class="s1">maxItems: schema.length</span>
                <span class="s1">};</span>
            <span class="s1">}</span>

            <span class="s3">// `schema:[]` is an explicit way to specify that the rule does not accept any options</span>
            <span class="s2">return </span><span class="s1">{ ...noOptionsSchema };</span>
        <span class="s1">}</span>

        <span class="s3">// `schema:&lt;object&gt;` is assumed to be a valid JSON Schema definition</span>
        <span class="s2">return </span><span class="s1">schema;</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates a rule's severity and returns the severity value. Throws an error if the severity is invalid.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{options} options The given options for the rule.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{number|string} The rule's severity value</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the severity is invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateRuleSeverity(options) {</span>
        <span class="s2">const </span><span class="s1">severity = Array.isArray(options) ? options[</span><span class="s5">0</span><span class="s1">] : options;</span>
        <span class="s2">const </span><span class="s1">normSeverity = </span><span class="s2">typeof </span><span class="s1">severity === </span><span class="s0">&quot;string&quot; </span><span class="s1">? severityMap[severity.toLowerCase()] : severity;</span>

        <span class="s2">if </span><span class="s1">(normSeverity === </span><span class="s5">0 </span><span class="s1">|| normSeverity === </span><span class="s5">1 </span><span class="s1">|| normSeverity === </span><span class="s5">2</span><span class="s1">) {</span>
            <span class="s2">return </span><span class="s1">normSeverity;</span>
        <span class="s1">}</span>

        <span class="s2">throw new </span><span class="s1">Error(</span><span class="s0">`</span><span class="s6">\t</span><span class="s0">Severity should be one of the following: 0 = off, 1 = warn, 2 = error (you passed '</span><span class="s1">${util__default[</span><span class="s0">&quot;default&quot;</span><span class="s1">].inspect(severity).replace(</span><span class="s7">/'/gu</span><span class="s1">, </span><span class="s0">&quot;</span><span class="s6">\&quot;</span><span class="s0">&quot;</span><span class="s1">).replace(</span><span class="s7">/\n/gu</span><span class="s1">, </span><span class="s0">&quot;&quot;</span><span class="s1">)}</span><span class="s0">').</span><span class="s6">\n</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates the non-severity options passed to a rule, based on its schema.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{{create: Function}} rule The rule to validate</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Array} localOptions The options for the rule, excluding severity</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the options are invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateRuleSchema(rule, localOptions) {</span>
        <span class="s2">if </span><span class="s1">(!ruleValidators.has(rule)) {</span>
            <span class="s2">try </span><span class="s1">{</span>
                <span class="s2">const </span><span class="s1">schema = </span><span class="s2">this</span><span class="s1">.getRuleOptionsSchema(rule);</span>

                <span class="s2">if </span><span class="s1">(schema) {</span>
                    <span class="s1">ruleValidators.set(rule, ajv.compile(schema));</span>
                <span class="s1">}</span>
            <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
                <span class="s2">const </span><span class="s1">errorWithCode = </span><span class="s2">new </span><span class="s1">Error(err.message, { cause: err });</span>

                <span class="s1">errorWithCode.code = </span><span class="s0">&quot;ESLINT_INVALID_RULE_OPTIONS_SCHEMA&quot;</span><span class="s1">;</span>

                <span class="s2">throw </span><span class="s1">errorWithCode;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s2">const </span><span class="s1">validateRule = ruleValidators.get(rule);</span>

        <span class="s2">if </span><span class="s1">(validateRule) {</span>
            <span class="s2">const </span><span class="s1">mergedOptions = deepMergeArrays(rule.meta?.defaultOptions, localOptions);</span>

            <span class="s1">validateRule(mergedOptions);</span>

            <span class="s2">if </span><span class="s1">(validateRule.errors) {</span>
                <span class="s2">throw new </span><span class="s1">Error(validateRule.errors.map(</span>
                    <span class="s1">error =&gt; </span><span class="s0">`</span><span class="s6">\t</span><span class="s0">Value </span><span class="s1">${JSON.stringify(error.data)} ${error.message}</span><span class="s0">.</span><span class="s6">\n</span><span class="s0">`</span>
                <span class="s1">).join(</span><span class="s0">&quot;&quot;</span><span class="s1">));</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates a rule's options against its schema.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{{create: Function}|null} rule The rule that the config is being validated for</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} ruleId The rule's unique name.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Array|number} options The given options for the rule.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string|null} source The name of the configuration source to report in any errors. If null or undefined,</span>
     <span class="s3">* no source is prepended to the message.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the options are invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateRuleOptions(rule, ruleId, options, source = </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">try </span><span class="s1">{</span>
            <span class="s2">const </span><span class="s1">severity = </span><span class="s2">this</span><span class="s1">.validateRuleSeverity(options);</span>

            <span class="s2">if </span><span class="s1">(severity !== </span><span class="s5">0</span><span class="s1">) {</span>
                <span class="s2">this</span><span class="s1">.validateRuleSchema(rule, Array.isArray(options) ? options.slice(</span><span class="s5">1</span><span class="s1">) : []);</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
            <span class="s2">let </span><span class="s1">enhancedMessage = err.code === </span><span class="s0">&quot;ESLINT_INVALID_RULE_OPTIONS_SCHEMA&quot;</span>
                <span class="s1">? </span><span class="s0">`Error while processing options validation schema of rule '</span><span class="s1">${ruleId}</span><span class="s0">': </span><span class="s1">${err.message}</span><span class="s0">`</span>
                <span class="s1">: </span><span class="s0">`Configuration for rule &quot;</span><span class="s1">${ruleId}</span><span class="s0">&quot; is invalid:</span><span class="s6">\n</span><span class="s1">${err.message}</span><span class="s0">`</span><span class="s1">;</span>

            <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">source === </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
                <span class="s1">enhancedMessage = </span><span class="s0">`</span><span class="s1">${source}</span><span class="s0">:</span><span class="s6">\n\t</span><span class="s1">${enhancedMessage}</span><span class="s0">`</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s2">const </span><span class="s1">enhancedError = </span><span class="s2">new </span><span class="s1">Error(enhancedMessage, { cause: err });</span>

            <span class="s2">if </span><span class="s1">(err.code) {</span>
                <span class="s1">enhancedError.code = err.code;</span>
            <span class="s1">}</span>

            <span class="s2">throw </span><span class="s1">enhancedError;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates an environment object</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} environment The environment config object to validate.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(envId:string) =&gt; Object} [getAdditionalEnv] A map from strings to loaded environments.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the environment is invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateEnvironment(</span>
        <span class="s1">environment,</span>
        <span class="s1">source,</span>
        <span class="s1">getAdditionalEnv = noop</span>
    <span class="s1">) {</span>

        <span class="s3">// not having an environment is ok</span>
        <span class="s2">if </span><span class="s1">(!environment) {</span>
            <span class="s2">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s1">Object.keys(environment).forEach(id =&gt; {</span>
            <span class="s2">const </span><span class="s1">env = getAdditionalEnv(id) || environments.get(id) || </span><span class="s2">null</span><span class="s1">;</span>

            <span class="s2">if </span><span class="s1">(!env) {</span>
                <span class="s2">const </span><span class="s1">message = </span><span class="s0">`</span><span class="s1">${source}</span><span class="s0">:</span><span class="s6">\n\t</span><span class="s0">Environment key &quot;</span><span class="s1">${id}</span><span class="s0">&quot; is unknown</span><span class="s6">\n</span><span class="s0">`</span><span class="s1">;</span>

                <span class="s2">throw new </span><span class="s1">Error(message);</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates a rules config object</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} rulesConfig The rules config object to validate.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(ruleId:string) =&gt; Object} getAdditionalRule A map from strings to loaded rules</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">*/</span>
    <span class="s1">validateRules(</span>
        <span class="s1">rulesConfig,</span>
        <span class="s1">source,</span>
        <span class="s1">getAdditionalRule = noop</span>
    <span class="s1">) {</span>
        <span class="s2">if </span><span class="s1">(!rulesConfig) {</span>
            <span class="s2">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s1">Object.keys(rulesConfig).forEach(id =&gt; {</span>
            <span class="s2">const </span><span class="s1">rule = getAdditionalRule(id) || </span><span class="s2">this</span><span class="s1">.builtInRules.get(id) || </span><span class="s2">null</span><span class="s1">;</span>

            <span class="s2">this</span><span class="s1">.validateRuleOptions(rule, id, rulesConfig[id], source);</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates a `globals` section of a config file</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} globalsConfig The `globals` section</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string|null} source The name of the configuration source to report in the event of an error.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">*/</span>
    <span class="s1">validateGlobals(globalsConfig, source = </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">if </span><span class="s1">(!globalsConfig) {</span>
            <span class="s2">return</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s1">Object.entries(globalsConfig)</span>
            <span class="s1">.forEach(([configuredGlobal, configuredValue]) =&gt; {</span>
                <span class="s2">try </span><span class="s1">{</span>
                    <span class="s1">normalizeConfigGlobal(configuredValue);</span>
                <span class="s1">} </span><span class="s2">catch </span><span class="s1">(err) {</span>
                    <span class="s2">throw new </span><span class="s1">Error(</span><span class="s0">`ESLint configuration of global '</span><span class="s1">${configuredGlobal}</span><span class="s0">' in </span><span class="s1">${source} </span><span class="s0">is invalid:</span><span class="s6">\n</span><span class="s1">${err.message}</span><span class="s0">`</span><span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validate `processor` configuration.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string|undefined} processorName The processor name.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of config file.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(id:string) =&gt; Processor} getProcessor The getter of defined processors.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the processor is invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateProcessor(processorName, source, getProcessor) {</span>
        <span class="s2">if </span><span class="s1">(processorName &amp;&amp; !getProcessor(processorName)) {</span>
            <span class="s2">throw new </span><span class="s1">Error(</span><span class="s0">`ESLint configuration of processor in '</span><span class="s1">${source}</span><span class="s0">' is invalid: '</span><span class="s1">${processorName}</span><span class="s0">' was not found.`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Formats an array of schema validation errors.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Array} errors An array of error messages to format.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{string} Formatted error message</span>
     <span class="s3">*/</span>
    <span class="s1">formatErrors(errors) {</span>
        <span class="s2">return </span><span class="s1">errors.map(error =&gt; {</span>
            <span class="s2">if </span><span class="s1">(error.keyword === </span><span class="s0">&quot;additionalProperties&quot;</span><span class="s1">) {</span>
                <span class="s2">const </span><span class="s1">formattedPropertyPath = error.dataPath.length ? </span><span class="s0">`</span><span class="s1">${error.dataPath.slice(</span><span class="s5">1</span><span class="s1">)}</span><span class="s0">.</span><span class="s1">${error.params.additionalProperty}</span><span class="s0">` </span><span class="s1">: error.params.additionalProperty;</span>

                <span class="s2">return </span><span class="s0">`Unexpected top-level property &quot;</span><span class="s1">${formattedPropertyPath}</span><span class="s0">&quot;`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">if </span><span class="s1">(error.keyword === </span><span class="s0">&quot;type&quot;</span><span class="s1">) {</span>
                <span class="s2">const </span><span class="s1">formattedField = error.dataPath.slice(</span><span class="s5">1</span><span class="s1">);</span>
                <span class="s2">const </span><span class="s1">formattedExpectedType = Array.isArray(error.schema) ? error.schema.join(</span><span class="s0">&quot;/&quot;</span><span class="s1">) : error.schema;</span>
                <span class="s2">const </span><span class="s1">formattedValue = JSON.stringify(error.data);</span>

                <span class="s2">return </span><span class="s0">`Property &quot;</span><span class="s1">${formattedField}</span><span class="s0">&quot; is the wrong type (expected </span><span class="s1">${formattedExpectedType} </span><span class="s0">but got </span><span class="s6">\`</span><span class="s1">${formattedValue}</span><span class="s6">\`</span><span class="s0">)`</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s2">const </span><span class="s1">field = error.dataPath[</span><span class="s5">0</span><span class="s1">] === </span><span class="s0">&quot;.&quot; </span><span class="s1">? error.dataPath.slice(</span><span class="s5">1</span><span class="s1">) : error.dataPath;</span>

            <span class="s2">return </span><span class="s0">`&quot;</span><span class="s1">${field}</span><span class="s0">&quot; </span><span class="s1">${error.message}</span><span class="s0">. Value: </span><span class="s1">${JSON.stringify(error.data)}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">}).map(message =&gt; </span><span class="s0">`</span><span class="s6">\t</span><span class="s0">- </span><span class="s1">${message}</span><span class="s0">.</span><span class="s6">\n</span><span class="s0">`</span><span class="s1">).join(</span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates the top level properties of the config object.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} config The config object to validate.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">* </span><span class="s4">@throws </span><span class="s3">{Error} If the config is invalid.</span>
     <span class="s3">*/</span>
    <span class="s1">validateConfigSchema(config, source = </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">validateSchema = validateSchema || ajv.compile(configSchema);</span>

        <span class="s2">if </span><span class="s1">(!validateSchema(config)) {</span>
            <span class="s2">throw new </span><span class="s1">Error(</span><span class="s0">`ESLint configuration in </span><span class="s1">${source} </span><span class="s0">is invalid:</span><span class="s6">\n</span><span class="s1">${</span><span class="s2">this</span><span class="s1">.formatErrors(validateSchema.errors)}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(Object.hasOwn(config, </span><span class="s0">&quot;ecmaFeatures&quot;</span><span class="s1">)) {</span>
            <span class="s1">emitDeprecationWarning(source, </span><span class="s0">&quot;ESLINT_LEGACY_ECMAFEATURES&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validates an entire config object.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{Object} config The config object to validate.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} source The name of the configuration source to report in any errors.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(ruleId:string) =&gt; Object} [getAdditionalRule] A map from strings to loaded rules.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{(envId:string) =&gt; Object} [getAdditionalEnv] A map from strings to loaded envs.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">*/</span>
    <span class="s1">validate(config, source, getAdditionalRule, getAdditionalEnv) {</span>
        <span class="s2">this</span><span class="s1">.validateConfigSchema(config, source);</span>
        <span class="s2">this</span><span class="s1">.validateRules(config.rules, source, getAdditionalRule);</span>
        <span class="s2">this</span><span class="s1">.validateEnvironment(config.env, source, getAdditionalEnv);</span>
        <span class="s2">this</span><span class="s1">.validateGlobals(config.globals, source);</span>

        <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">override of config.overrides || []) {</span>
            <span class="s2">this</span><span class="s1">.validateRules(override.rules, source, getAdditionalRule);</span>
            <span class="s2">this</span><span class="s1">.validateEnvironment(override.env, source, getAdditionalEnv);</span>
            <span class="s2">this</span><span class="s1">.validateGlobals(config.globals, source);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Validate config array object.</span>
     <span class="s3">* </span><span class="s4">@param </span><span class="s3">{ConfigArray} configArray The config array to validate.</span>
     <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{void}</span>
     <span class="s3">*/</span>
    <span class="s1">validateConfigArray(configArray) {</span>
        <span class="s2">const </span><span class="s1">getPluginEnv = Map.prototype.get.bind(configArray.pluginEnvironments);</span>
        <span class="s2">const </span><span class="s1">getPluginProcessor = Map.prototype.get.bind(configArray.pluginProcessors);</span>
        <span class="s2">const </span><span class="s1">getPluginRule = Map.prototype.get.bind(configArray.pluginRules);</span>

        <span class="s3">// Validate.</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">const </span><span class="s1">element of configArray) {</span>
            <span class="s2">if </span><span class="s1">(validated.has(element)) {</span>
                <span class="s2">continue</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s1">validated.add(element);</span>

            <span class="s2">this</span><span class="s1">.validateEnvironment(element.env, element.name, getPluginEnv);</span>
            <span class="s2">this</span><span class="s1">.validateGlobals(element.globals, element.name);</span>
            <span class="s2">this</span><span class="s1">.validateProcessor(element.processor, element.name, getPluginProcessor);</span>
            <span class="s2">this</span><span class="s1">.validateRules(element.rules, element.name, getPluginRule);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Common helpers for naming of plugins, formatters and configs</span>
 <span class="s3">*/</span>

<span class="s2">const </span><span class="s1">NAMESPACE_REGEX = </span><span class="s7">/^@.*\//iu</span><span class="s1">;</span>

<span class="s3">/**</span>
 <span class="s3">* Brings package name to correct format based on prefix</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} name The name of the package.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} prefix Can be either &quot;eslint-plugin&quot;, &quot;eslint-config&quot; or &quot;eslint-formatter&quot;</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{string} Normalized name of the package</span>
 <span class="s3">* </span><span class="s4">@private</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">normalizePackageName(name, prefix) {</span>
    <span class="s2">let </span><span class="s1">normalizedName = name;</span>

    <span class="s3">/**</span>
     <span class="s3">* On Windows, name can come in with Windows slashes instead of Unix slashes.</span>
     <span class="s3">* Normalize to Unix first to avoid errors later on.</span>
     <span class="s3">* https://github.com/eslint/eslint/issues/5644</span>
     <span class="s3">*/</span>
    <span class="s2">if </span><span class="s1">(normalizedName.includes(</span><span class="s0">&quot;</span><span class="s6">\\</span><span class="s0">&quot;</span><span class="s1">)) {</span>
        <span class="s1">normalizedName = normalizedName.replace(</span><span class="s7">/\\/gu</span><span class="s1">, </span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(normalizedName.charAt(</span><span class="s5">0</span><span class="s1">) === </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>

        <span class="s3">/**</span>
         <span class="s3">* it's a scoped package</span>
         <span class="s3">* package name is the prefix, or just a username</span>
         <span class="s3">*/</span>
        <span class="s2">const </span><span class="s1">scopedPackageShortcutRegex = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`^(@[^/]+)(?:/(?:</span><span class="s1">${prefix}</span><span class="s0">)?)?$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">),</span>
            <span class="s1">scopedPackageNameRegex = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`^</span><span class="s1">${prefix}</span><span class="s0">(-|$)`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">);</span>

        <span class="s2">if </span><span class="s1">(scopedPackageShortcutRegex.test(normalizedName)) {</span>
            <span class="s1">normalizedName = normalizedName.replace(scopedPackageShortcutRegex, </span><span class="s0">`$1/</span><span class="s1">${prefix}</span><span class="s0">`</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(!scopedPackageNameRegex.test(normalizedName.split(</span><span class="s0">&quot;/&quot;</span><span class="s1">)[</span><span class="s5">1</span><span class="s1">])) {</span>

            <span class="s3">/**</span>
             <span class="s3">* for scoped packages, insert the prefix after the first / unless</span>
             <span class="s3">* the path is already @scope/eslint or @scope/eslint-xxx-yyy</span>
             <span class="s3">*/</span>
            <span class="s1">normalizedName = normalizedName.replace(</span><span class="s7">/^@([^/]+)\/(.*)$/u</span><span class="s1">, </span><span class="s0">`@$1/</span><span class="s1">${prefix}</span><span class="s0">-$2`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(!normalizedName.startsWith(</span><span class="s0">`</span><span class="s1">${prefix}</span><span class="s0">-`</span><span class="s1">)) {</span>
        <span class="s1">normalizedName = </span><span class="s0">`</span><span class="s1">${prefix}</span><span class="s0">-</span><span class="s1">${normalizedName}</span><span class="s0">`</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">normalizedName;</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Removes the prefix from a fullname.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} fullname The term which may have the prefix.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} prefix The prefix to remove.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{string} The term without prefix.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">getShorthandName(fullname, prefix) {</span>
    <span class="s2">if </span><span class="s1">(fullname[</span><span class="s5">0</span><span class="s1">] === </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>
        <span class="s2">let </span><span class="s1">matchResult = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`^(@[^/]+)/</span><span class="s1">${prefix}</span><span class="s0">$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).exec(fullname);</span>

        <span class="s2">if </span><span class="s1">(matchResult) {</span>
            <span class="s2">return </span><span class="s1">matchResult[</span><span class="s5">1</span><span class="s1">];</span>
        <span class="s1">}</span>

        <span class="s1">matchResult = </span><span class="s2">new </span><span class="s1">RegExp(</span><span class="s0">`^(@[^/]+)/</span><span class="s1">${prefix}</span><span class="s0">-(.+)$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).exec(fullname);</span>
        <span class="s2">if </span><span class="s1">(matchResult) {</span>
            <span class="s2">return </span><span class="s0">`</span><span class="s1">${matchResult[</span><span class="s5">1</span><span class="s1">]}</span><span class="s0">/</span><span class="s1">${matchResult[</span><span class="s5">2</span><span class="s1">]}</span><span class="s0">`</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(fullname.startsWith(</span><span class="s0">`</span><span class="s1">${prefix}</span><span class="s0">-`</span><span class="s1">)) {</span>
        <span class="s2">return </span><span class="s1">fullname.slice(prefix.length + </span><span class="s5">1</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">fullname;</span>
<span class="s1">}</span>

<span class="s3">/**</span>
 <span class="s3">* Gets the scope (namespace) of a term.</span>
 <span class="s3">* </span><span class="s4">@param </span><span class="s3">{string} term The term which may have the namespace.</span>
 <span class="s3">* </span><span class="s4">@returns </span><span class="s3">{string} The namespace of the term if it has one.</span>
 <span class="s3">*/</span>
<span class="s2">function </span><span class="s1">getNamespaceFromTerm(term) {</span>
    <span class="s2">const </span><span class="s1">match = term.match(NAMESPACE_REGEX);</span>

    <span class="s2">return </span><span class="s1">match ? match[</span><span class="s5">0</span><span class="s1">] : </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">naming = {</span>
    <span class="s1">__proto__: </span><span class="s2">null</span><span class="s1">,</span>
    <span class="s1">normalizePackageName: normalizePackageName,</span>
    <span class="s1">getShorthandName: getShorthandName,</span>
    <span class="s1">getNamespaceFromTerm: getNamespaceFromTerm</span>
<span class="s1">};</span>

<span class="s3">/**</span>
 <span class="s3">* </span><span class="s4">@fileoverview </span><span class="s3">Package exports for @eslint/eslintrc</span>
 <span class="s3">* </span><span class="s4">@author </span><span class="s3">Nicholas C. Zakas</span>
 <span class="s3">*/</span>

<span class="s3">//-----------------------------------------------------------------------------</span>
<span class="s3">// Exports</span>
<span class="s3">//-----------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">Legacy = {</span>
    <span class="s1">environments,</span>

    <span class="s3">// shared</span>
    <span class="s1">ConfigOps,</span>
    <span class="s1">ConfigValidator,</span>
    <span class="s1">naming</span>
<span class="s1">};</span>

<span class="s1">exports.Legacy = Legacy;</span>
<span class="s3">//# sourceMappingURL=eslintrc-universal.cjs.map</span>
</pre>
</body>
</html>