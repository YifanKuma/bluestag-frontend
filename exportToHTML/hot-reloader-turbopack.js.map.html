<html>
<head>
<title>hot-reloader-turbopack.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
hot-reloader-turbopack.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/dev/hot-reloader-turbopack.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { Socket } from 'net'</span><span class="s3">\n</span><span class="s1">import { mkdir, writeFile } from 'fs/promises'</span><span class="s3">\n</span><span class="s1">import { join, extname, relative } from 'path'</span><span class="s3">\n</span><span class="s1">import { pathToFileURL } from 'url'</span><span class="s3">\n\n</span><span class="s1">import ws from 'next/dist/compiled/ws'</span><span class="s3">\n\n</span><span class="s1">import type { OutputState } from '../../build/output/store'</span><span class="s3">\n</span><span class="s1">import { store as consoleStore } from '../../build/output/store'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">CompilationError,</span><span class="s3">\n  </span><span class="s1">HMR_ACTION_TYPES,</span><span class="s3">\n  </span><span class="s1">NextJsHotReloaderInterface,</span><span class="s3">\n  </span><span class="s1">ReloadPageAction,</span><span class="s3">\n  </span><span class="s1">SyncAction,</span><span class="s3">\n  </span><span class="s1">TurbopackConnectedAction,</span><span class="s3">\n</span><span class="s1">} from './hot-reloader-types'</span><span class="s3">\n</span><span class="s1">import { HMR_ACTIONS_SENT_TO_BROWSER } from './hot-reloader-types'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Update as TurbopackUpdate,</span><span class="s3">\n  </span><span class="s1">Endpoint,</span><span class="s3">\n  </span><span class="s1">WrittenEndpoint,</span><span class="s3">\n  </span><span class="s1">TurbopackResult,</span><span class="s3">\n  </span><span class="s1">Project,</span><span class="s3">\n  </span><span class="s1">Entrypoints,</span><span class="s3">\n</span><span class="s1">} from '../../build/swc/types'</span><span class="s3">\n</span><span class="s1">import { createDefineEnv } from '../../build/swc'</span><span class="s3">\n</span><span class="s1">import * as Log from '../../build/output/log'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getVersionInfo,</span><span class="s3">\n  </span><span class="s1">matchNextPageBundleRequest,</span><span class="s3">\n</span><span class="s1">} from './hot-reloader-webpack'</span><span class="s3">\n</span><span class="s1">import { BLOCKED_PAGES } from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getOverlayMiddleware,</span><span class="s3">\n  </span><span class="s1">getSourceMapMiddleware,</span><span class="s3">\n</span><span class="s1">} from './middleware-turbopack'</span><span class="s3">\n</span><span class="s1">import { PageNotFoundError } from '../../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import { debounce } from '../utils'</span><span class="s3">\n</span><span class="s1">import { deleteCache } from './require-cache'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">clearAllModuleContexts,</span><span class="s3">\n  </span><span class="s1">clearModuleContext,</span><span class="s3">\n</span><span class="s1">} from '../lib/render-server'</span><span class="s3">\n</span><span class="s1">import { denormalizePagePath } from '../../shared/lib/page-path/denormalize-page-path'</span><span class="s3">\n</span><span class="s1">import { trace } from '../../trace'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">AssetMapper,</span><span class="s3">\n  </span><span class="s1">type ChangeSubscriptions,</span><span class="s3">\n  </span><span class="s1">type ClientState,</span><span class="s3">\n  </span><span class="s1">handleEntrypoints,</span><span class="s3">\n  </span><span class="s1">handlePagesErrorRoute,</span><span class="s3">\n  </span><span class="s1">handleRouteType,</span><span class="s3">\n  </span><span class="s1">hasEntrypointForKey,</span><span class="s3">\n  </span><span class="s1">msToNs,</span><span class="s3">\n  </span><span class="s1">type ReadyIds,</span><span class="s3">\n  </span><span class="s1">type SendHmr,</span><span class="s3">\n  </span><span class="s1">type StartBuilding,</span><span class="s3">\n  </span><span class="s1">processTopLevelIssues,</span><span class="s3">\n  </span><span class="s1">printNonFatalIssue,</span><span class="s3">\n  </span><span class="s1">normalizedPageToTurbopackStructureRoute,</span><span class="s3">\n</span><span class="s1">} from './turbopack-utils'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">propagateServerField,</span><span class="s3">\n  </span><span class="s1">type ServerFields,</span><span class="s3">\n  </span><span class="s1">type SetupOpts,</span><span class="s3">\n</span><span class="s1">} from '../lib/router-utils/setup-dev-bundler'</span><span class="s3">\n</span><span class="s1">import { TurbopackManifestLoader } from '../../shared/lib/turbopack/manifest-loader'</span><span class="s3">\n</span><span class="s1">import { findPagePathData } from './on-demand-entry-handler'</span><span class="s3">\n</span><span class="s1">import type { RouteDefinition } from '../route-definitions/route-definition'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">type EntryKey,</span><span class="s3">\n  </span><span class="s1">getEntryKey,</span><span class="s3">\n  </span><span class="s1">splitEntryKey,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/turbopack/entry-key'</span><span class="s3">\n</span><span class="s1">import { FAST_REFRESH_RUNTIME_RELOAD } from './messages'</span><span class="s3">\n</span><span class="s1">import { generateEncryptionKeyBase64 } from '../app-render/encryption-utils-server'</span><span class="s3">\n</span><span class="s1">import { isAppPageRouteDefinition } from '../route-definitions/app-page-route-definition'</span><span class="s3">\n</span><span class="s1">import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'</span><span class="s3">\n</span><span class="s1">import type { ModernSourceMapPayload } from '../lib/source-maps'</span><span class="s3">\n</span><span class="s1">import { getNodeDebugType } from '../lib/utils'</span><span class="s3">\n</span><span class="s1">import { isMetadataRouteFile } from '../../lib/metadata/is-metadata-route'</span><span class="s3">\n</span><span class="s1">import { setBundlerFindSourceMapImplementation } from '../patch-error-inspect'</span><span class="s3">\n</span><span class="s1">import { getNextErrorFeedbackMiddleware } from '../../next-devtools/server/get-next-error-feedback-middleware'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">formatIssue,</span><span class="s3">\n  </span><span class="s1">getTurbopackJsConfig,</span><span class="s3">\n  </span><span class="s1">isPersistentCachingEnabled,</span><span class="s3">\n  </span><span class="s1">isWellKnownError,</span><span class="s3">\n  </span><span class="s1">processIssues,</span><span class="s3">\n  </span><span class="s1">renderStyledStringToErrorAnsi,</span><span class="s3">\n  </span><span class="s1">type EntryIssuesMap,</span><span class="s3">\n  </span><span class="s1">type TopLevelIssuesMap,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/turbopack/utils'</span><span class="s3">\n</span><span class="s1">import { getDevOverlayFontMiddleware } from '../../next-devtools/server/font/get-dev-overlay-font-middleware'</span><span class="s3">\n</span><span class="s1">import { devIndicatorServerState } from './dev-indicator-server-state'</span><span class="s3">\n</span><span class="s1">import { getDisableDevIndicatorMiddleware } from '../../next-devtools/server/dev-indicator-middleware'</span><span class="s3">\n</span><span class="s1">import { getRestartDevServerMiddleware } from '../../next-devtools/server/restart-dev-server-middleware'</span><span class="s3">\n</span><span class="s1">import { backgroundLogCompilationEvents } from '../../shared/lib/turbopack/compilation-events'</span><span class="s3">\n</span><span class="s1">import { getSupportedBrowsers } from '../../build/utils'</span><span class="s3">\n</span><span class="s1">import { receiveBrowserLogsTurbopack } from './browser-logs/receive-logs'</span><span class="s3">\n</span><span class="s1">import { normalizePath } from '../../lib/normalize-path'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">devToolsConfigMiddleware,</span><span class="s3">\n  </span><span class="s1">getDevToolsConfig,</span><span class="s3">\n</span><span class="s1">} from '../../next-devtools/server/devtools-config-middleware'</span><span class="s3">\n\n</span><span class="s1">const wsServer = new ws.Server({ noServer: true })</span><span class="s3">\n</span><span class="s1">const isTestMode = !!(</span><span class="s3">\n  </span><span class="s1">process.env.NEXT_TEST_MODE ||</span><span class="s3">\n  </span><span class="s1">process.env.__NEXT_TEST_MODE ||</span><span class="s3">\n  </span><span class="s1">process.env.DEBUG</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">const sessionId = Math.floor(Number.MAX_SAFE_INTEGER * Math.random())</span><span class="s3">\n\n</span><span class="s1">declare const __next__clear_chunk_cache__: (() =&gt; void) | null | undefined</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Replaces turbopack:///[project] with the specified project in the `source` field.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function rewriteTurbopackSources(</span><span class="s3">\n  </span><span class="s1">projectRoot: string,</span><span class="s3">\n  </span><span class="s1">sourceMap: ModernSourceMapPayload</span><span class="s3">\n</span><span class="s1">): void {</span><span class="s3">\n  </span><span class="s1">if ('sections' in sourceMap) {</span><span class="s3">\n    </span><span class="s1">for (const section of sourceMap.sections) {</span><span class="s3">\n      </span><span class="s1">rewriteTurbopackSources(projectRoot, section.map)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">for (let i = 0; i &lt; sourceMap.sources.length; i++) {</span><span class="s3">\n      </span><span class="s1">sourceMap.sources[i] = pathToFileURL(</span><span class="s3">\n        </span><span class="s1">join(</span><span class="s3">\n          </span><span class="s1">projectRoot,</span><span class="s3">\n          </span><span class="s1">sourceMap.sources[i].replace(/turbopack:</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">/</span><span class="s3">\\</span><span class="s1">[project</span><span class="s3">\\</span><span class="s1">]/, '')</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">).toString()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getSourceMapFromTurbopack(</span><span class="s3">\n  </span><span class="s1">project: Project,</span><span class="s3">\n  </span><span class="s1">projectRoot: string,</span><span class="s3">\n  </span><span class="s1">sourceURL: string</span><span class="s3">\n</span><span class="s1">): ModernSourceMapPayload | undefined {</span><span class="s3">\n  </span><span class="s1">let sourceMapJson: string | null = null</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">sourceMapJson = project.getSourceMapSync(sourceURL)</span><span class="s3">\n  </span><span class="s1">} catch (err) {}</span><span class="s3">\n\n  </span><span class="s1">if (sourceMapJson === null) {</span><span class="s3">\n    </span><span class="s1">return undefined</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">const payload: ModernSourceMapPayload = JSON.parse(sourceMapJson)</span><span class="s3">\n    </span><span class="s1">// The sourcemap from Turbopack is not yet written to disk so its `sources`</span><span class="s3">\n    </span><span class="s1">// are not absolute paths yet. We need to rewrite them to be absolute paths.</span><span class="s3">\n    </span><span class="s1">rewriteTurbopackSources(projectRoot, payload)</span><span class="s3">\n    </span><span class="s1">return payload</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function createHotReloaderTurbopack(</span><span class="s3">\n  </span><span class="s1">opts: SetupOpts &amp; { isSrcDir: boolean },</span><span class="s3">\n  </span><span class="s1">serverFields: ServerFields,</span><span class="s3">\n  </span><span class="s1">distDir: string,</span><span class="s3">\n  </span><span class="s1">resetFetch: () =&gt; void</span><span class="s3">\n</span><span class="s1">): Promise&lt;NextJsHotReloaderInterface&gt; {</span><span class="s3">\n  </span><span class="s1">const dev = true</span><span class="s3">\n  </span><span class="s1">const buildId = 'development'</span><span class="s3">\n  </span><span class="s1">const { nextConfig, dir: projectPath } = opts</span><span class="s3">\n\n  </span><span class="s1">const { loadBindings } =</span><span class="s3">\n    </span><span class="s1">require('../../build/swc') as typeof import('../../build/swc')</span><span class="s3">\n\n  </span><span class="s1">let bindings = await loadBindings()</span><span class="s3">\n\n  </span><span class="s1">// For the debugging purpose, check if createNext or equivalent next instance setup in test cases</span><span class="s3">\n  </span><span class="s1">// works correctly. Normally `run-test` hides output so only will be visible when `--debug` flag is used.</span><span class="s3">\n  </span><span class="s1">if (isTestMode) {</span><span class="s3">\n    </span><span class="s1">;(require('console') as typeof import('console')).log(</span><span class="s3">\n      </span><span class="s1">'Creating turbopack project',</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">dir: projectPath,</span><span class="s3">\n        </span><span class="s1">testMode: isTestMode,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const hasRewrites =</span><span class="s3">\n    </span><span class="s1">opts.fsChecker.rewrites.afterFiles.length &gt; 0 ||</span><span class="s3">\n    </span><span class="s1">opts.fsChecker.rewrites.beforeFiles.length &gt; 0 ||</span><span class="s3">\n    </span><span class="s1">opts.fsChecker.rewrites.fallback.length &gt; 0</span><span class="s3">\n\n  </span><span class="s1">const hotReloaderSpan = trace('hot-reloader', undefined, {</span><span class="s3">\n    </span><span class="s1">version: process.env.__NEXT_VERSION as string,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">// Ensure the hotReloaderSpan is flushed immediately as it's the parentSpan for all processing</span><span class="s3">\n  </span><span class="s1">// of the current `next dev` invocation.</span><span class="s3">\n  </span><span class="s1">hotReloaderSpan.stop()</span><span class="s3">\n\n  </span><span class="s1">const encryptionKey = await generateEncryptionKeyBase64({</span><span class="s3">\n    </span><span class="s1">isBuild: false,</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// TODO: Implement</span><span class="s3">\n  </span><span class="s1">let clientRouterFilters: any</span><span class="s3">\n  </span><span class="s1">if (nextConfig.experimental.clientRouterFilter) {</span><span class="s3">\n    </span><span class="s1">// TODO this need to be set correctly for persistent caching to work</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const supportedBrowsers = getSupportedBrowsers(projectPath, dev)</span><span class="s3">\n  </span><span class="s1">const currentNodeJsVersion = process.versions.node</span><span class="s3">\n\n  </span><span class="s1">const rootPath =</span><span class="s3">\n    </span><span class="s1">opts.nextConfig.turbopack?.root ||</span><span class="s3">\n    </span><span class="s1">opts.nextConfig.outputFileTracingRoot ||</span><span class="s3">\n    </span><span class="s1">projectPath</span><span class="s3">\n  </span><span class="s1">const project = await bindings.turbo.createProject(</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">rootPath,</span><span class="s3">\n      </span><span class="s1">projectPath: normalizePath(relative(rootPath, projectPath) || '.'),</span><span class="s3">\n      </span><span class="s1">distDir,</span><span class="s3">\n      </span><span class="s1">nextConfig: opts.nextConfig,</span><span class="s3">\n      </span><span class="s1">jsConfig: await getTurbopackJsConfig(projectPath, nextConfig),</span><span class="s3">\n      </span><span class="s1">watch: {</span><span class="s3">\n        </span><span class="s1">enable: dev,</span><span class="s3">\n        </span><span class="s1">pollIntervalMs: nextConfig.watchOptions?.pollIntervalMs,</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">dev,</span><span class="s3">\n      </span><span class="s1">env: process.env as Record&lt;string, string&gt;,</span><span class="s3">\n      </span><span class="s1">defineEnv: createDefineEnv({</span><span class="s3">\n        </span><span class="s1">isTurbopack: true,</span><span class="s3">\n        </span><span class="s1">clientRouterFilters,</span><span class="s3">\n        </span><span class="s1">config: nextConfig,</span><span class="s3">\n        </span><span class="s1">dev,</span><span class="s3">\n        </span><span class="s1">distDir,</span><span class="s3">\n        </span><span class="s1">projectPath,</span><span class="s3">\n        </span><span class="s1">fetchCacheKeyPrefix: opts.nextConfig.experimental.fetchCacheKeyPrefix,</span><span class="s3">\n        </span><span class="s1">hasRewrites,</span><span class="s3">\n        </span><span class="s1">// TODO: Implement</span><span class="s3">\n        </span><span class="s1">middlewareMatchers: undefined,</span><span class="s3">\n        </span><span class="s1">rewrites: opts.fsChecker.rewrites,</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">buildId,</span><span class="s3">\n      </span><span class="s1">encryptionKey,</span><span class="s3">\n      </span><span class="s1">previewProps: opts.fsChecker.prerenderManifest.preview,</span><span class="s3">\n      </span><span class="s1">browserslistQuery: supportedBrowsers.join(', '),</span><span class="s3">\n      </span><span class="s1">noMangling: false,</span><span class="s3">\n      </span><span class="s1">currentNodeJsVersion,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">persistentCaching: isPersistentCachingEnabled(opts.nextConfig),</span><span class="s3">\n      </span><span class="s1">memoryLimit: opts.nextConfig.experimental?.turbopackMemoryLimit,</span><span class="s3">\n      </span><span class="s1">isShortSession: false,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">backgroundLogCompilationEvents(project, {</span><span class="s3">\n    </span><span class="s1">eventTypes: ['StartupCacheInvalidationEvent', 'TimingEvent'],</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">setBundlerFindSourceMapImplementation(</span><span class="s3">\n    </span><span class="s1">getSourceMapFromTurbopack.bind(null, project, projectPath)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">opts.onDevServerCleanup?.(async () =&gt; {</span><span class="s3">\n    </span><span class="s1">setBundlerFindSourceMapImplementation(() =&gt; undefined)</span><span class="s3">\n    </span><span class="s1">await project.onExit()</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">const entrypointsSubscription = project.entrypointsSubscribe()</span><span class="s3">\n\n  </span><span class="s1">const currentWrittenEntrypoints: Map&lt;EntryKey, WrittenEndpoint&gt; = new Map()</span><span class="s3">\n  </span><span class="s1">const currentEntrypoints: Entrypoints = {</span><span class="s3">\n    </span><span class="s1">global: {</span><span class="s3">\n      </span><span class="s1">app: undefined,</span><span class="s3">\n      </span><span class="s1">document: undefined,</span><span class="s3">\n      </span><span class="s1">error: undefined,</span><span class="s3">\n\n      </span><span class="s1">middleware: undefined,</span><span class="s3">\n      </span><span class="s1">instrumentation: undefined,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n\n    </span><span class="s1">page: new Map(),</span><span class="s3">\n    </span><span class="s1">app: new Map(),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const currentTopLevelIssues: TopLevelIssuesMap = new Map()</span><span class="s3">\n  </span><span class="s1">const currentEntryIssues: EntryIssuesMap = new Map()</span><span class="s3">\n\n  </span><span class="s1">const manifestLoader = new TurbopackManifestLoader({</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n    </span><span class="s1">encryptionKey,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// Dev specific</span><span class="s3">\n  </span><span class="s1">const changeSubscriptions: ChangeSubscriptions = new Map()</span><span class="s3">\n  </span><span class="s1">const serverPathState = new Map&lt;string, string&gt;()</span><span class="s3">\n  </span><span class="s1">const readyIds: ReadyIds = new Set()</span><span class="s3">\n  </span><span class="s1">let currentEntriesHandlingResolve: ((value?: unknown) =&gt; void) | undefined</span><span class="s3">\n  </span><span class="s1">let currentEntriesHandling = new Promise(</span><span class="s3">\n    </span><span class="s1">(resolve) =&gt; (currentEntriesHandlingResolve = resolve)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const assetMapper = new AssetMapper()</span><span class="s3">\n\n  </span><span class="s1">function clearRequireCache(</span><span class="s3">\n    </span><span class="s1">key: EntryKey,</span><span class="s3">\n    </span><span class="s1">writtenEndpoint: WrittenEndpoint,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">force,</span><span class="s3">\n    </span><span class="s1">}: {</span><span class="s3">\n      </span><span class="s1">// Always clear the cache, don't check if files have changed</span><span class="s3">\n      </span><span class="s1">force?: boolean</span><span class="s3">\n    </span><span class="s1">} = {}</span><span class="s3">\n  </span><span class="s1">): boolean {</span><span class="s3">\n    </span><span class="s1">if (force) {</span><span class="s3">\n      </span><span class="s1">for (const { path, contentHash } of writtenEndpoint.serverPaths) {</span><span class="s3">\n        </span><span class="s1">serverPathState.set(path, contentHash)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">// Figure out if the server files have changed</span><span class="s3">\n      </span><span class="s1">let hasChange = false</span><span class="s3">\n      </span><span class="s1">for (const { path, contentHash } of writtenEndpoint.serverPaths) {</span><span class="s3">\n        </span><span class="s1">// We ignore source maps</span><span class="s3">\n        </span><span class="s1">if (path.endsWith('.map')) continue</span><span class="s3">\n        </span><span class="s1">const localKey = `${key}:${path}`</span><span class="s3">\n        </span><span class="s1">const localHash = serverPathState.get(localKey)</span><span class="s3">\n        </span><span class="s1">const globalHash = serverPathState.get(path)</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">(localHash &amp;&amp; localHash !== contentHash) ||</span><span class="s3">\n          </span><span class="s1">(globalHash &amp;&amp; globalHash !== contentHash)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">hasChange = true</span><span class="s3">\n          </span><span class="s1">serverPathState.set(key, contentHash)</span><span class="s3">\n          </span><span class="s1">serverPathState.set(path, contentHash)</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">if (!localHash) {</span><span class="s3">\n            </span><span class="s1">serverPathState.set(key, contentHash)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">if (!globalHash) {</span><span class="s3">\n            </span><span class="s1">serverPathState.set(path, contentHash)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (!hasChange) {</span><span class="s3">\n        </span><span class="s1">return false</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">resetFetch()</span><span class="s3">\n\n    </span><span class="s1">// Not available in:</span><span class="s3">\n    </span><span class="s1">// - Pages Router (no server-side HMR)</span><span class="s3">\n    </span><span class="s1">// - Edge Runtime (uses browser runtime which already disposes chunks individually)</span><span class="s3">\n    </span><span class="s1">if (typeof __next__clear_chunk_cache__ === 'function') {</span><span class="s3">\n      </span><span class="s1">__next__clear_chunk_cache__()</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const serverPaths = writtenEndpoint.serverPaths.map(({ path: p }) =&gt;</span><span class="s3">\n      </span><span class="s1">join(distDir, p)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">for (const file of serverPaths) {</span><span class="s3">\n      </span><span class="s1">clearModuleContext(file)</span><span class="s3">\n      </span><span class="s1">deleteCache(file)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const buildingIds = new Set()</span><span class="s3">\n\n  </span><span class="s1">const startBuilding: StartBuilding = (id, requestUrl, forceRebuild) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (!forceRebuild &amp;&amp; readyIds.has(id)) {</span><span class="s3">\n      </span><span class="s1">return () =&gt; {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (buildingIds.size === 0) {</span><span class="s3">\n      </span><span class="s1">consoleStore.setState(</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">loading: true,</span><span class="s3">\n          </span><span class="s1">trigger: id,</span><span class="s3">\n          </span><span class="s1">url: requestUrl,</span><span class="s3">\n        </span><span class="s1">} as OutputState,</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">buildingIds.add(id)</span><span class="s3">\n    </span><span class="s1">return function finishBuilding() {</span><span class="s3">\n      </span><span class="s1">if (buildingIds.size === 0) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">readyIds.add(id)</span><span class="s3">\n      </span><span class="s1">buildingIds.delete(id)</span><span class="s3">\n      </span><span class="s1">if (buildingIds.size === 0) {</span><span class="s3">\n        </span><span class="s1">hmrEventHappened = false</span><span class="s3">\n        </span><span class="s1">consoleStore.setState(</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">loading: false,</span><span class="s3">\n          </span><span class="s1">} as OutputState,</span><span class="s3">\n          </span><span class="s1">true</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let hmrEventHappened = false</span><span class="s3">\n  </span><span class="s1">let hmrHash = 0</span><span class="s3">\n\n  </span><span class="s1">const clients = new Set&lt;ws&gt;()</span><span class="s3">\n  </span><span class="s1">const clientStates = new WeakMap&lt;ws, ClientState&gt;()</span><span class="s3">\n\n  </span><span class="s1">function sendToClient(client: ws, payload: HMR_ACTION_TYPES) {</span><span class="s3">\n    </span><span class="s1">client.send(JSON.stringify(payload))</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function sendEnqueuedMessages() {</span><span class="s3">\n    </span><span class="s1">for (const [, issueMap] of currentEntryIssues) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">[...issueMap.values()].filter((i) =&gt; i.severity !== 'warning').length &gt;</span><span class="s3">\n        </span><span class="s1">0</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">// During compilation errors we want to delay the HMR events until errors are fixed</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">for (const client of clients) {</span><span class="s3">\n      </span><span class="s1">const state = clientStates.get(client)</span><span class="s3">\n      </span><span class="s1">if (!state) {</span><span class="s3">\n        </span><span class="s1">continue</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">for (const [, issueMap] of state.clientIssues) {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">[...issueMap.values()].filter((i) =&gt; i.severity !== 'warning')</span><span class="s3">\n            </span><span class="s1">.length &gt; 0</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">// During compilation errors we want to delay the HMR events until errors are fixed</span><span class="s3">\n          </span><span class="s1">return</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">for (const payload of state.hmrPayloads.values()) {</span><span class="s3">\n        </span><span class="s1">sendToClient(client, payload)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">state.hmrPayloads.clear()</span><span class="s3">\n\n      </span><span class="s1">if (state.turbopackUpdates.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">sendToClient(client, {</span><span class="s3">\n          </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_MESSAGE,</span><span class="s3">\n          </span><span class="s1">data: state.turbopackUpdates,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">state.turbopackUpdates.length = 0</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const sendEnqueuedMessagesDebounce = debounce(sendEnqueuedMessages, 2)</span><span class="s3">\n\n  </span><span class="s1">const sendHmr: SendHmr = (id: string, payload: HMR_ACTION_TYPES) =&gt; {</span><span class="s3">\n    </span><span class="s1">for (const client of clients) {</span><span class="s3">\n      </span><span class="s1">clientStates.get(client)?.hmrPayloads.set(id, payload)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">hmrEventHappened = true</span><span class="s3">\n    </span><span class="s1">sendEnqueuedMessagesDebounce()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function sendTurbopackMessage(payload: TurbopackUpdate) {</span><span class="s3">\n    </span><span class="s1">// TODO(PACK-2049): For some reason we end up emitting hundreds of issues messages on bigger apps,</span><span class="s3">\n    </span><span class="s1">//   a lot of which are duplicates.</span><span class="s3">\n    </span><span class="s1">//   They are currently not handled on the client at all, so might as well not send them for now.</span><span class="s3">\n    </span><span class="s1">payload.diagnostics = []</span><span class="s3">\n    </span><span class="s1">payload.issues = []</span><span class="s3">\n\n    </span><span class="s1">for (const client of clients) {</span><span class="s3">\n      </span><span class="s1">clientStates.get(client)?.turbopackUpdates.push(payload)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">hmrEventHappened = true</span><span class="s3">\n    </span><span class="s1">sendEnqueuedMessagesDebounce()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function subscribeToChanges(</span><span class="s3">\n    </span><span class="s1">key: EntryKey,</span><span class="s3">\n    </span><span class="s1">includeIssues: boolean,</span><span class="s3">\n    </span><span class="s1">endpoint: Endpoint,</span><span class="s3">\n    </span><span class="s1">makePayload: (</span><span class="s3">\n      </span><span class="s1">change: TurbopackResult,</span><span class="s3">\n      </span><span class="s1">hash: string</span><span class="s3">\n    </span><span class="s1">) =&gt; Promise&lt;HMR_ACTION_TYPES&gt; | HMR_ACTION_TYPES | void,</span><span class="s3">\n    </span><span class="s1">onError?: (</span><span class="s3">\n      </span><span class="s1">error: Error</span><span class="s3">\n    </span><span class="s1">) =&gt; Promise&lt;HMR_ACTION_TYPES&gt; | HMR_ACTION_TYPES | void</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (changeSubscriptions.has(key)) {</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { side } = splitEntryKey(key)</span><span class="s3">\n\n    </span><span class="s1">const changedPromise = endpoint[`${side}Changed`](includeIssues)</span><span class="s3">\n    </span><span class="s1">changeSubscriptions.set(key, changedPromise)</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">const changed = await changedPromise</span><span class="s3">\n\n      </span><span class="s1">for await (const change of changed) {</span><span class="s3">\n        </span><span class="s1">processIssues(currentEntryIssues, key, change, false, true)</span><span class="s3">\n        </span><span class="s1">// TODO: Get an actual content hash from Turbopack.</span><span class="s3">\n        </span><span class="s1">const payload = await makePayload(change, String(++hmrHash))</span><span class="s3">\n        </span><span class="s1">if (payload) {</span><span class="s3">\n          </span><span class="s1">sendHmr(key, payload)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">changeSubscriptions.delete(key)</span><span class="s3">\n      </span><span class="s1">const payload = await onError?.(e as Error)</span><span class="s3">\n      </span><span class="s1">if (payload) {</span><span class="s3">\n        </span><span class="s1">sendHmr(key, payload)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">changeSubscriptions.delete(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function unsubscribeFromChanges(key: EntryKey) {</span><span class="s3">\n    </span><span class="s1">const subscription = await changeSubscriptions.get(key)</span><span class="s3">\n    </span><span class="s1">if (subscription) {</span><span class="s3">\n      </span><span class="s1">await subscription.return?.()</span><span class="s3">\n      </span><span class="s1">changeSubscriptions.delete(key)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">currentEntryIssues.delete(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function subscribeToHmrEvents(client: ws, id: string) {</span><span class="s3">\n    </span><span class="s1">const key = getEntryKey('assets', 'client', id)</span><span class="s3">\n    </span><span class="s1">if (!hasEntrypointForKey(currentEntrypoints, key, assetMapper)) {</span><span class="s3">\n      </span><span class="s1">// maybe throw an error / force the client to reload?</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const state = clientStates.get(client)</span><span class="s3">\n    </span><span class="s1">if (!state || state.subscriptions.has(id)) {</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const subscription = project!.hmrEvents(id)</span><span class="s3">\n    </span><span class="s1">state.subscriptions.set(id, subscription)</span><span class="s3">\n\n    </span><span class="s1">// The subscription will always emit once, which is the initial</span><span class="s3">\n    </span><span class="s1">// computation. This is not a change, so swallow it.</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">await subscription.next()</span><span class="s3">\n\n      </span><span class="s1">for await (const data of subscription) {</span><span class="s3">\n        </span><span class="s1">processIssues(state.clientIssues, key, data, false, true)</span><span class="s3">\n        </span><span class="s1">if (data.type !== 'issues') {</span><span class="s3">\n          </span><span class="s1">sendTurbopackMessage(data)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">// The client might be using an HMR session from a previous server, tell them</span><span class="s3">\n      </span><span class="s1">// to fully reload the page to resolve the issue. We can't use</span><span class="s3">\n      </span><span class="s1">// `hotReloader.send` since that would force every connected client to</span><span class="s3">\n      </span><span class="s1">// reload, only this client is out of date.</span><span class="s3">\n      </span><span class="s1">const reloadAction: ReloadPageAction = {</span><span class="s3">\n        </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE,</span><span class="s3">\n        </span><span class="s1">data: `error in HMR event subscription for ${id}: ${e}`,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">sendToClient(client, reloadAction)</span><span class="s3">\n      </span><span class="s1">client.close()</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function unsubscribeFromHmrEvents(client: ws, id: string) {</span><span class="s3">\n    </span><span class="s1">const state = clientStates.get(client)</span><span class="s3">\n    </span><span class="s1">if (!state) {</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const subscription = state.subscriptions.get(id)</span><span class="s3">\n    </span><span class="s1">subscription?.return!()</span><span class="s3">\n\n    </span><span class="s1">const key = getEntryKey('assets', 'client', id)</span><span class="s3">\n    </span><span class="s1">state.clientIssues.delete(key)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">async function handleEntrypointsSubscription() {</span><span class="s3">\n    </span><span class="s1">for await (const entrypoints of entrypointsSubscription) {</span><span class="s3">\n      </span><span class="s1">if (!currentEntriesHandlingResolve) {</span><span class="s3">\n        </span><span class="s1">currentEntriesHandling = new Promise(</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line no-loop-func</span><span class="s3">\n          </span><span class="s1">(resolve) =&gt; (currentEntriesHandlingResolve = resolve)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">processTopLevelIssues(currentTopLevelIssues, entrypoints)</span><span class="s3">\n\n      </span><span class="s1">await handleEntrypoints({</span><span class="s3">\n        </span><span class="s1">entrypoints,</span><span class="s3">\n\n        </span><span class="s1">currentEntrypoints,</span><span class="s3">\n\n        </span><span class="s1">currentEntryIssues,</span><span class="s3">\n        </span><span class="s1">manifestLoader,</span><span class="s3">\n        </span><span class="s1">devRewrites: opts.fsChecker.rewrites,</span><span class="s3">\n        </span><span class="s1">productionRewrites: undefined,</span><span class="s3">\n        </span><span class="s1">logErrors: true,</span><span class="s3">\n\n        </span><span class="s1">dev: {</span><span class="s3">\n          </span><span class="s1">assetMapper,</span><span class="s3">\n          </span><span class="s1">changeSubscriptions,</span><span class="s3">\n          </span><span class="s1">clients,</span><span class="s3">\n          </span><span class="s1">clientStates,</span><span class="s3">\n          </span><span class="s1">serverFields,</span><span class="s3">\n\n          </span><span class="s1">hooks: {</span><span class="s3">\n            </span><span class="s1">handleWrittenEndpoint: (id, result, forceDeleteCache) =&gt; {</span><span class="s3">\n              </span><span class="s1">currentWrittenEntrypoints.set(id, result)</span><span class="s3">\n              </span><span class="s1">return clearRequireCache(id, result, { force: forceDeleteCache })</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">propagateServerField: propagateServerField.bind(null, opts),</span><span class="s3">\n            </span><span class="s1">sendHmr,</span><span class="s3">\n            </span><span class="s1">startBuilding,</span><span class="s3">\n            </span><span class="s1">subscribeToChanges,</span><span class="s3">\n            </span><span class="s1">unsubscribeFromChanges,</span><span class="s3">\n            </span><span class="s1">unsubscribeFromHmrEvents,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">currentEntriesHandlingResolve!()</span><span class="s3">\n      </span><span class="s1">currentEntriesHandlingResolve = undefined</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">await mkdir(join(distDir, 'server'), { recursive: true })</span><span class="s3">\n  </span><span class="s1">await mkdir(join(distDir, 'static', buildId), { recursive: true })</span><span class="s3">\n  </span><span class="s1">await writeFile(</span><span class="s3">\n    </span><span class="s1">join(distDir, 'package.json'),</span><span class="s3">\n    </span><span class="s1">JSON.stringify(</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">type: 'commonjs',</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">null,</span><span class="s3">\n      </span><span class="s1">2</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const middlewares = [</span><span class="s3">\n    </span><span class="s1">getOverlayMiddleware({</span><span class="s3">\n      </span><span class="s1">project,</span><span class="s3">\n      </span><span class="s1">projectPath,</span><span class="s3">\n      </span><span class="s1">isSrcDir: opts.isSrcDir,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">getSourceMapMiddleware(project),</span><span class="s3">\n    </span><span class="s1">getNextErrorFeedbackMiddleware(opts.telemetry),</span><span class="s3">\n    </span><span class="s1">getDevOverlayFontMiddleware(),</span><span class="s3">\n    </span><span class="s1">getDisableDevIndicatorMiddleware(),</span><span class="s3">\n    </span><span class="s1">getRestartDevServerMiddleware({</span><span class="s3">\n      </span><span class="s1">telemetry: opts.telemetry,</span><span class="s3">\n      </span><span class="s1">turbopackProject: project,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">devToolsConfigMiddleware({</span><span class="s3">\n      </span><span class="s1">distDir,</span><span class="s3">\n      </span><span class="s1">sendUpdateSignal: (data) =&gt; {</span><span class="s3">\n        </span><span class="s1">hotReloader.send({</span><span class="s3">\n          </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG,</span><span class="s3">\n          </span><span class="s1">data,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n\n  </span><span class="s1">const versionInfoPromise = getVersionInfo()</span><span class="s3">\n\n  </span><span class="s1">let devtoolsFrontendUrl: string | undefined</span><span class="s3">\n  </span><span class="s1">const nodeDebugType = getNodeDebugType()</span><span class="s3">\n  </span><span class="s1">if (nodeDebugType) {</span><span class="s3">\n    </span><span class="s1">const debugPort = process.debugPort</span><span class="s3">\n    </span><span class="s1">let debugInfo</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">// It requires to use 127.0.0.1 instead of localhost for server-side fetching.</span><span class="s3">\n      </span><span class="s1">const debugInfoList = await fetch(</span><span class="s3">\n        </span><span class="s1">`http://127.0.0.1:${debugPort}/json/list`</span><span class="s3">\n      </span><span class="s1">).then((res) =&gt; res.json())</span><span class="s3">\n      </span><span class="s1">debugInfo = debugInfoList[0]</span><span class="s3">\n    </span><span class="s1">} catch {}</span><span class="s3">\n    </span><span class="s1">if (debugInfo) {</span><span class="s3">\n      </span><span class="s1">devtoolsFrontendUrl = debugInfo.devtoolsFrontendUrl</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const hotReloader: NextJsHotReloaderInterface = {</span><span class="s3">\n    </span><span class="s1">turbopackProject: project,</span><span class="s3">\n    </span><span class="s1">activeWebpackConfigs: undefined,</span><span class="s3">\n    </span><span class="s1">serverStats: null,</span><span class="s3">\n    </span><span class="s1">edgeServerStats: null,</span><span class="s3">\n    </span><span class="s1">async run(req, res, _parsedUrl) {</span><span class="s3">\n      </span><span class="s1">// intercept page chunks request and ensure them with turbopack</span><span class="s3">\n      </span><span class="s1">if (req.url?.startsWith('/_next/static/chunks/pages/')) {</span><span class="s3">\n        </span><span class="s1">const params = matchNextPageBundleRequest(req.url)</span><span class="s3">\n\n        </span><span class="s1">if (params) {</span><span class="s3">\n          </span><span class="s1">const decodedPagePath = `/${params.path</span><span class="s3">\n            </span><span class="s1">.map((param: string) =&gt; decodeURIComponent(param))</span><span class="s3">\n            </span><span class="s1">.join('/')}`</span><span class="s3">\n\n          </span><span class="s1">const denormalizedPagePath = denormalizePagePath(decodedPagePath)</span><span class="s3">\n\n          </span><span class="s1">await hotReloader</span><span class="s3">\n            </span><span class="s1">.ensurePage({</span><span class="s3">\n              </span><span class="s1">page: denormalizedPagePath,</span><span class="s3">\n              </span><span class="s1">clientOnly: false,</span><span class="s3">\n              </span><span class="s1">definition: undefined,</span><span class="s3">\n              </span><span class="s1">url: req.url,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">.catch(console.error)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">for (const middleware of middlewares) {</span><span class="s3">\n        </span><span class="s1">let calledNext = false</span><span class="s3">\n\n        </span><span class="s1">await middleware(req, res, () =&gt; {</span><span class="s3">\n          </span><span class="s1">calledNext = true</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">if (!calledNext) {</span><span class="s3">\n          </span><span class="s1">return { finished: true }</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Request was not finished.</span><span class="s3">\n      </span><span class="s1">return { finished: undefined }</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n\n    </span><span class="s1">// TODO: Figure out if socket type can match the NextJsHotReloaderInterface</span><span class="s3">\n    </span><span class="s1">onHMR(req, socket: Socket, head, onUpgrade) {</span><span class="s3">\n      </span><span class="s1">wsServer.handleUpgrade(req, socket, head, (client) =&gt; {</span><span class="s3">\n        </span><span class="s1">onUpgrade(client)</span><span class="s3">\n        </span><span class="s1">const clientIssues: EntryIssuesMap = new Map()</span><span class="s3">\n        </span><span class="s1">const subscriptions: Map&lt;string, AsyncIterator&lt;any&gt;&gt; = new Map()</span><span class="s3">\n\n        </span><span class="s1">clients.add(client)</span><span class="s3">\n        </span><span class="s1">clientStates.set(client, {</span><span class="s3">\n          </span><span class="s1">clientIssues,</span><span class="s3">\n          </span><span class="s1">hmrPayloads: new Map(),</span><span class="s3">\n          </span><span class="s1">turbopackUpdates: [],</span><span class="s3">\n          </span><span class="s1">subscriptions,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">client.on('close', () =&gt; {</span><span class="s3">\n          </span><span class="s1">// Remove active subscriptions</span><span class="s3">\n          </span><span class="s1">for (const subscription of subscriptions.values()) {</span><span class="s3">\n            </span><span class="s1">subscription.return?.()</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">clientStates.delete(client)</span><span class="s3">\n          </span><span class="s1">clients.delete(client)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">client.addEventListener('message', async ({ data }) =&gt; {</span><span class="s3">\n          </span><span class="s1">const parsedData = JSON.parse(</span><span class="s3">\n            </span><span class="s1">typeof data !== 'string' ? data.toString() : data</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n\n          </span><span class="s1">// Next.js messages</span><span class="s3">\n          </span><span class="s1">switch (parsedData.event) {</span><span class="s3">\n            </span><span class="s1">case 'span-end': {</span><span class="s3">\n              </span><span class="s1">hotReloaderSpan.manualTraceChild(</span><span class="s3">\n                </span><span class="s1">parsedData.spanName,</span><span class="s3">\n                </span><span class="s1">msToNs(parsedData.startTime),</span><span class="s3">\n                </span><span class="s1">msToNs(parsedData.endTime),</span><span class="s3">\n                </span><span class="s1">parsedData.attributes</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">case 'client-hmr-latency': // { id, startTime, endTime, page, updatedModules, isPageHidden }</span><span class="s3">\n              </span><span class="s1">hotReloaderSpan.manualTraceChild(</span><span class="s3">\n                </span><span class="s1">parsedData.event,</span><span class="s3">\n                </span><span class="s1">msToNs(parsedData.startTime),</span><span class="s3">\n                </span><span class="s1">msToNs(parsedData.endTime),</span><span class="s3">\n                </span><span class="s1">{</span><span class="s3">\n                  </span><span class="s1">updatedModules: parsedData.updatedModules,</span><span class="s3">\n                  </span><span class="s1">page: parsedData.page,</span><span class="s3">\n                  </span><span class="s1">isPageHidden: parsedData.isPageHidden,</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n\n            </span><span class="s1">case 'client-error': // { errorCount, clientId }</span><span class="s3">\n            </span><span class="s1">case 'client-warning': // { warningCount, clientId }</span><span class="s3">\n            </span><span class="s1">case 'client-success': // { clientId }</span><span class="s3">\n            </span><span class="s1">case 'server-component-reload-page': // { clientId }</span><span class="s3">\n            </span><span class="s1">case 'client-reload-page': // { clientId }</span><span class="s3">\n            </span><span class="s1">case 'client-removed-page': // { page }</span><span class="s3">\n            </span><span class="s1">case 'client-full-reload': // { stackTrace, hadRuntimeError }</span><span class="s3">\n              </span><span class="s1">const { hadRuntimeError, dependencyChain } = parsedData</span><span class="s3">\n              </span><span class="s1">if (hadRuntimeError) {</span><span class="s3">\n                </span><span class="s1">Log.warn(FAST_REFRESH_RUNTIME_RELOAD)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">if (</span><span class="s3">\n                </span><span class="s1">Array.isArray(dependencyChain) &amp;&amp;</span><span class="s3">\n                </span><span class="s1">typeof dependencyChain[0] === 'string'</span><span class="s3">\n              </span><span class="s1">) {</span><span class="s3">\n                </span><span class="s1">const cleanedModulePath = dependencyChain[0]</span><span class="s3">\n                  </span><span class="s1">.replace(/^</span><span class="s3">\\</span><span class="s1">[project</span><span class="s3">\\</span><span class="s1">]/, '.')</span><span class="s3">\n                  </span><span class="s1">.replace(/ </span><span class="s3">\\</span><span class="s1">[.*</span><span class="s3">\\</span><span class="s1">] </span><span class="s3">\\</span><span class="s1">(.*</span><span class="s3">\\</span><span class="s1">)$/, '')</span><span class="s3">\n                </span><span class="s1">Log.warn(</span><span class="s3">\n                  </span><span class="s1">`Fast Refresh had to perform a full reload when ${cleanedModulePath} changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload`</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">case 'client-added-page':</span><span class="s3">\n              </span><span class="s1">// TODO</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">case 'browser-logs': {</span><span class="s3">\n              </span><span class="s1">if (nextConfig.experimental.browserDebugInfoInTerminal) {</span><span class="s3">\n                </span><span class="s1">await receiveBrowserLogsTurbopack({</span><span class="s3">\n                  </span><span class="s1">entries: parsedData.entries,</span><span class="s3">\n                  </span><span class="s1">router: parsedData.router,</span><span class="s3">\n                  </span><span class="s1">sourceType: parsedData.sourceType,</span><span class="s3">\n                  </span><span class="s1">project,</span><span class="s3">\n                  </span><span class="s1">projectPath,</span><span class="s3">\n                  </span><span class="s1">distDir,</span><span class="s3">\n                  </span><span class="s1">config: nextConfig.experimental.browserDebugInfoInTerminal,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">// Might be a Turbopack message...</span><span class="s3">\n              </span><span class="s1">if (!parsedData.type) {</span><span class="s3">\n                </span><span class="s1">throw new Error(`unrecognized HMR message </span><span class="s3">\&quot;</span><span class="s1">${data}</span><span class="s3">\&quot;</span><span class="s1">`)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// Turbopack messages</span><span class="s3">\n          </span><span class="s1">switch (parsedData.type) {</span><span class="s3">\n            </span><span class="s1">case 'turbopack-subscribe':</span><span class="s3">\n              </span><span class="s1">subscribeToHmrEvents(client, parsedData.path)</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n\n            </span><span class="s1">case 'turbopack-unsubscribe':</span><span class="s3">\n              </span><span class="s1">unsubscribeFromHmrEvents(client, parsedData.path)</span><span class="s3">\n              </span><span class="s1">break</span><span class="s3">\n\n            </span><span class="s1">default:</span><span class="s3">\n              </span><span class="s1">if (!parsedData.event) {</span><span class="s3">\n                </span><span class="s1">throw new Error(`unrecognized Turbopack HMR message </span><span class="s3">\&quot;</span><span class="s1">${data}</span><span class="s3">\&quot;</span><span class="s1">`)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n\n        </span><span class="s1">const turbopackConnected: TurbopackConnectedAction = {</span><span class="s3">\n          </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED,</span><span class="s3">\n          </span><span class="s1">data: { sessionId },</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">sendToClient(client, turbopackConnected)</span><span class="s3">\n\n        </span><span class="s1">const errors: CompilationError[] = []</span><span class="s3">\n\n        </span><span class="s1">for (const entryIssues of currentEntryIssues.values()) {</span><span class="s3">\n          </span><span class="s1">for (const issue of entryIssues.values()) {</span><span class="s3">\n            </span><span class="s1">if (issue.severity !== 'warning') {</span><span class="s3">\n              </span><span class="s1">errors.push({</span><span class="s3">\n                </span><span class="s1">message: formatIssue(issue),</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">printNonFatalIssue(issue)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (devIndicatorServerState.disabledUntil &lt; Date.now()) {</span><span class="s3">\n          </span><span class="s1">devIndicatorServerState.disabledUntil = 0</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">;(async function () {</span><span class="s3">\n          </span><span class="s1">const versionInfo = await versionInfoPromise</span><span class="s3">\n          </span><span class="s1">const devToolsConfig = await getDevToolsConfig(distDir)</span><span class="s3">\n\n          </span><span class="s1">const sync: SyncAction = {</span><span class="s3">\n            </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.SYNC,</span><span class="s3">\n            </span><span class="s1">errors,</span><span class="s3">\n            </span><span class="s1">warnings: [],</span><span class="s3">\n            </span><span class="s1">hash: '',</span><span class="s3">\n            </span><span class="s1">versionInfo,</span><span class="s3">\n            </span><span class="s1">debug: {</span><span class="s3">\n              </span><span class="s1">devtoolsFrontendUrl,</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">devIndicator: devIndicatorServerState,</span><span class="s3">\n            </span><span class="s1">devToolsConfig,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">sendToClient(client, sync)</span><span class="s3">\n        </span><span class="s1">})()</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n\n    </span><span class="s1">send(action) {</span><span class="s3">\n      </span><span class="s1">const payload = JSON.stringify(action)</span><span class="s3">\n      </span><span class="s1">for (const client of clients) {</span><span class="s3">\n        </span><span class="s1">client.send(payload)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n\n    </span><span class="s1">setHmrServerError(_error) {</span><span class="s3">\n      </span><span class="s1">// Not implemented yet.</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">clearHmrServerError() {</span><span class="s3">\n      </span><span class="s1">// Not implemented yet.</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async start() {},</span><span class="s3">\n    </span><span class="s1">async getCompilationErrors(page) {</span><span class="s3">\n      </span><span class="s1">const appEntryKey = getEntryKey('app', 'server', page)</span><span class="s3">\n      </span><span class="s1">const pagesEntryKey = getEntryKey('pages', 'server', page)</span><span class="s3">\n\n      </span><span class="s1">const topLevelIssues = currentTopLevelIssues.values()</span><span class="s3">\n\n      </span><span class="s1">const thisEntryIssues =</span><span class="s3">\n        </span><span class="s1">currentEntryIssues.get(appEntryKey) ??</span><span class="s3">\n        </span><span class="s1">currentEntryIssues.get(pagesEntryKey)</span><span class="s3">\n\n      </span><span class="s1">if (thisEntryIssues !== undefined &amp;&amp; thisEntryIssues.size &gt; 0) {</span><span class="s3">\n        </span><span class="s1">// If there is an error related to the requesting page we display it instead of the first error</span><span class="s3">\n        </span><span class="s1">return [...topLevelIssues, ...thisEntryIssues.values()]</span><span class="s3">\n          </span><span class="s1">.map((issue) =&gt; {</span><span class="s3">\n            </span><span class="s1">const formattedIssue = formatIssue(issue)</span><span class="s3">\n            </span><span class="s1">if (issue.severity === 'warning') {</span><span class="s3">\n              </span><span class="s1">printNonFatalIssue(issue)</span><span class="s3">\n              </span><span class="s1">return null</span><span class="s3">\n            </span><span class="s1">} else if (isWellKnownError(issue)) {</span><span class="s3">\n              </span><span class="s1">Log.error(formattedIssue)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">return new Error(formattedIssue)</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">.filter((error) =&gt; error !== null)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// Otherwise, return all errors across pages</span><span class="s3">\n      </span><span class="s1">const errors = []</span><span class="s3">\n      </span><span class="s1">for (const issue of topLevelIssues) {</span><span class="s3">\n        </span><span class="s1">if (issue.severity !== 'warning') {</span><span class="s3">\n          </span><span class="s1">errors.push(new Error(formatIssue(issue)))</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">for (const entryIssues of currentEntryIssues.values()) {</span><span class="s3">\n        </span><span class="s1">for (const issue of entryIssues.values()) {</span><span class="s3">\n          </span><span class="s1">if (issue.severity !== 'warning') {</span><span class="s3">\n            </span><span class="s1">const message = formatIssue(issue)</span><span class="s3">\n            </span><span class="s1">errors.push(new Error(message))</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">printNonFatalIssue(issue)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return errors</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async invalidate({</span><span class="s3">\n      </span><span class="s1">// .env files or tsconfig/jsconfig change</span><span class="s3">\n      </span><span class="s1">reloadAfterInvalidation,</span><span class="s3">\n    </span><span class="s1">}) {</span><span class="s3">\n      </span><span class="s1">if (reloadAfterInvalidation) {</span><span class="s3">\n        </span><span class="s1">for (const [key, entrypoint] of currentWrittenEntrypoints) {</span><span class="s3">\n          </span><span class="s1">clearRequireCache(key, entrypoint, { force: true })</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">await clearAllModuleContexts()</span><span class="s3">\n        </span><span class="s1">this.send({</span><span class="s3">\n          </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES,</span><span class="s3">\n          </span><span class="s1">hash: String(++hmrHash),</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async buildFallbackError() {</span><span class="s3">\n      </span><span class="s1">// Not implemented yet.</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async ensurePage({</span><span class="s3">\n      </span><span class="s1">page: inputPage,</span><span class="s3">\n      </span><span class="s1">// Unused parameters</span><span class="s3">\n      </span><span class="s1">// clientOnly,</span><span class="s3">\n      </span><span class="s1">appPaths,</span><span class="s3">\n      </span><span class="s1">definition,</span><span class="s3">\n      </span><span class="s1">isApp,</span><span class="s3">\n      </span><span class="s1">url: requestUrl,</span><span class="s3">\n    </span><span class="s1">}) {</span><span class="s3">\n      </span><span class="s1">// When there is no route definition this is an internal file not a route the user added.</span><span class="s3">\n      </span><span class="s1">// Middleware and instrumentation are handled in turbpack-utils.ts handleEntrypoints instead.</span><span class="s3">\n      </span><span class="s1">if (!definition) {</span><span class="s3">\n        </span><span class="s1">if (inputPage === '/middleware') return</span><span class="s3">\n        </span><span class="s1">if (inputPage === '/src/middleware') return</span><span class="s3">\n        </span><span class="s1">if (inputPage === '/instrumentation') return</span><span class="s3">\n        </span><span class="s1">if (inputPage === '/src/instrumentation') return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return hotReloaderSpan</span><span class="s3">\n        </span><span class="s1">.traceChild('ensure-page', {</span><span class="s3">\n          </span><span class="s1">inputPage,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n        </span><span class="s1">.traceAsyncFn(async () =&gt; {</span><span class="s3">\n          </span><span class="s1">if (BLOCKED_PAGES.includes(inputPage) &amp;&amp; inputPage !== '/_error') {</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">await currentEntriesHandling</span><span class="s3">\n\n          </span><span class="s1">// TODO We shouldn't look into the filesystem again. This should use the information from entrypoints</span><span class="s3">\n          </span><span class="s1">let routeDef: Pick&lt;</span><span class="s3">\n            </span><span class="s1">RouteDefinition,</span><span class="s3">\n            </span><span class="s1">'filename' | 'bundlePath' | 'page'</span><span class="s3">\n          </span><span class="s1">&gt; =</span><span class="s3">\n            </span><span class="s1">definition ??</span><span class="s3">\n            </span><span class="s1">(await findPagePathData(</span><span class="s3">\n              </span><span class="s1">projectPath,</span><span class="s3">\n              </span><span class="s1">inputPage,</span><span class="s3">\n              </span><span class="s1">nextConfig.pageExtensions,</span><span class="s3">\n              </span><span class="s1">opts.pagesDir,</span><span class="s3">\n              </span><span class="s1">opts.appDir,</span><span class="s3">\n              </span><span class="s1">!!nextConfig.experimental.globalNotFound</span><span class="s3">\n            </span><span class="s1">))</span><span class="s3">\n\n          </span><span class="s1">// If the route is actually an app page route, then we should have access</span><span class="s3">\n          </span><span class="s1">// to the app route definition, and therefore, the appPaths from it.</span><span class="s3">\n          </span><span class="s1">if (!appPaths &amp;&amp; definition &amp;&amp; isAppPageRouteDefinition(definition)) {</span><span class="s3">\n            </span><span class="s1">appPaths = definition.appPaths</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">let page = routeDef.page</span><span class="s3">\n          </span><span class="s1">if (appPaths) {</span><span class="s3">\n            </span><span class="s1">const normalizedPage = normalizeAppPath(page)</span><span class="s3">\n\n            </span><span class="s1">// filter out paths that are not exact matches (e.g. catchall)</span><span class="s3">\n            </span><span class="s1">const matchingAppPaths = appPaths.filter(</span><span class="s3">\n              </span><span class="s1">(path) =&gt; normalizeAppPath(path) === normalizedPage</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n\n            </span><span class="s1">// the last item in the array is the root page, if there are parallel routes</span><span class="s3">\n            </span><span class="s1">page = matchingAppPaths[matchingAppPaths.length - 1]</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const pathname = definition?.pathname ?? inputPage</span><span class="s3">\n\n          </span><span class="s1">if (page === '/_error') {</span><span class="s3">\n            </span><span class="s1">let finishBuilding = startBuilding(pathname, requestUrl, false)</span><span class="s3">\n            </span><span class="s1">try {</span><span class="s3">\n              </span><span class="s1">await handlePagesErrorRoute({</span><span class="s3">\n                </span><span class="s1">currentEntryIssues,</span><span class="s3">\n                </span><span class="s1">entrypoints: currentEntrypoints,</span><span class="s3">\n                </span><span class="s1">manifestLoader,</span><span class="s3">\n                </span><span class="s1">devRewrites: opts.fsChecker.rewrites,</span><span class="s3">\n                </span><span class="s1">productionRewrites: undefined,</span><span class="s3">\n                </span><span class="s1">logErrors: true,</span><span class="s3">\n                </span><span class="s1">hooks: {</span><span class="s3">\n                  </span><span class="s1">subscribeToChanges,</span><span class="s3">\n                  </span><span class="s1">handleWrittenEndpoint: (id, result, forceDeleteCache) =&gt; {</span><span class="s3">\n                    </span><span class="s1">currentWrittenEntrypoints.set(id, result)</span><span class="s3">\n                    </span><span class="s1">assetMapper.setPathsForKey(id, result.clientPaths)</span><span class="s3">\n                    </span><span class="s1">return clearRequireCache(id, result, {</span><span class="s3">\n                      </span><span class="s1">force: forceDeleteCache,</span><span class="s3">\n                    </span><span class="s1">})</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">})</span><span class="s3">\n            </span><span class="s1">} finally {</span><span class="s3">\n              </span><span class="s1">finishBuilding()</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">return</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const isInsideAppDir = routeDef.bundlePath.startsWith('app/')</span><span class="s3">\n          </span><span class="s1">const isEntryMetadataRouteFile = isMetadataRouteFile(</span><span class="s3">\n            </span><span class="s1">routeDef.filename.replace(opts.appDir || '', ''),</span><span class="s3">\n            </span><span class="s1">nextConfig.pageExtensions,</span><span class="s3">\n            </span><span class="s1">true</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">const normalizedAppPage = isEntryMetadataRouteFile</span><span class="s3">\n            </span><span class="s1">? normalizedPageToTurbopackStructureRoute(</span><span class="s3">\n                </span><span class="s1">page,</span><span class="s3">\n                </span><span class="s1">extname(routeDef.filename)</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">: page</span><span class="s3">\n\n          </span><span class="s1">const route = isInsideAppDir</span><span class="s3">\n            </span><span class="s1">? currentEntrypoints.app.get(normalizedAppPage)</span><span class="s3">\n            </span><span class="s1">: currentEntrypoints.page.get(page)</span><span class="s3">\n\n          </span><span class="s1">if (!route) {</span><span class="s3">\n            </span><span class="s1">// TODO: why is this entry missing in turbopack?</span><span class="s3">\n            </span><span class="s1">if (page === '/middleware') return</span><span class="s3">\n            </span><span class="s1">if (page === '/src/middleware') return</span><span class="s3">\n            </span><span class="s1">if (page === '/instrumentation') return</span><span class="s3">\n            </span><span class="s1">if (page === '/src/instrumentation') return</span><span class="s3">\n\n            </span><span class="s1">throw new PageNotFoundError(`route not found ${page}`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">// We don't throw on ensureOpts.isApp === true for page-api</span><span class="s3">\n          </span><span class="s1">// since this can happen when app pages make</span><span class="s3">\n          </span><span class="s1">// api requests to page API routes.</span><span class="s3">\n          </span><span class="s1">if (isApp &amp;&amp; route.type === 'page') {</span><span class="s3">\n            </span><span class="s1">throw new Error(`mis-matched route type: isApp &amp;&amp; page for ${page}`)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const finishBuilding = startBuilding(pathname, requestUrl, false)</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">await handleRouteType({</span><span class="s3">\n              </span><span class="s1">dev,</span><span class="s3">\n              </span><span class="s1">page,</span><span class="s3">\n              </span><span class="s1">pathname,</span><span class="s3">\n              </span><span class="s1">route,</span><span class="s3">\n              </span><span class="s1">currentEntryIssues,</span><span class="s3">\n              </span><span class="s1">entrypoints: currentEntrypoints,</span><span class="s3">\n              </span><span class="s1">manifestLoader,</span><span class="s3">\n              </span><span class="s1">readyIds,</span><span class="s3">\n              </span><span class="s1">devRewrites: opts.fsChecker.rewrites,</span><span class="s3">\n              </span><span class="s1">productionRewrites: undefined,</span><span class="s3">\n              </span><span class="s1">logErrors: true,</span><span class="s3">\n\n              </span><span class="s1">hooks: {</span><span class="s3">\n                </span><span class="s1">subscribeToChanges,</span><span class="s3">\n                </span><span class="s1">handleWrittenEndpoint: (id, result, forceDeleteCache) =&gt; {</span><span class="s3">\n                  </span><span class="s1">currentWrittenEntrypoints.set(id, result)</span><span class="s3">\n                  </span><span class="s1">assetMapper.setPathsForKey(id, result.clientPaths)</span><span class="s3">\n                  </span><span class="s1">return clearRequireCache(id, result, {</span><span class="s3">\n                    </span><span class="s1">force: forceDeleteCache,</span><span class="s3">\n                  </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">} finally {</span><span class="s3">\n            </span><span class="s1">finishBuilding()</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">close() {</span><span class="s3">\n      </span><span class="s1">for (const wsClient of clients) {</span><span class="s3">\n        </span><span class="s1">// it's okay to not cleanly close these websocket connections, this is dev</span><span class="s3">\n        </span><span class="s1">wsClient.terminate()</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">clients.clear()</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">handleEntrypointsSubscription().catch((err) =&gt; {</span><span class="s3">\n    </span><span class="s1">console.error(err)</span><span class="s3">\n    </span><span class="s1">process.exit(1)</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// Write empty manifests</span><span class="s3">\n  </span><span class="s1">await currentEntriesHandling</span><span class="s3">\n  </span><span class="s1">await manifestLoader.writeManifests({</span><span class="s3">\n    </span><span class="s1">devRewrites: opts.fsChecker.rewrites,</span><span class="s3">\n    </span><span class="s1">productionRewrites: undefined,</span><span class="s3">\n    </span><span class="s1">entrypoints: currentEntrypoints,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">async function handleProjectUpdates() {</span><span class="s3">\n    </span><span class="s1">for await (const updateMessage of project.updateInfoSubscribe(30)) {</span><span class="s3">\n      </span><span class="s1">switch (updateMessage.updateType) {</span><span class="s3">\n        </span><span class="s1">case 'start': {</span><span class="s3">\n          </span><span class="s1">hotReloader.send({ action: HMR_ACTIONS_SENT_TO_BROWSER.BUILDING })</span><span class="s3">\n          </span><span class="s1">break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">case 'end': {</span><span class="s3">\n          </span><span class="s1">sendEnqueuedMessages()</span><span class="s3">\n\n          </span><span class="s1">function addErrors(</span><span class="s3">\n            </span><span class="s1">errorsMap: Map&lt;string, CompilationError&gt;,</span><span class="s3">\n            </span><span class="s1">issues: EntryIssuesMap</span><span class="s3">\n          </span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">for (const issueMap of issues.values()) {</span><span class="s3">\n              </span><span class="s1">for (const [key, issue] of issueMap) {</span><span class="s3">\n                </span><span class="s1">if (issue.severity === 'warning') continue</span><span class="s3">\n                </span><span class="s1">if (errorsMap.has(key)) continue</span><span class="s3">\n\n                </span><span class="s1">const message = formatIssue(issue)</span><span class="s3">\n\n                </span><span class="s1">errorsMap.set(key, {</span><span class="s3">\n                  </span><span class="s1">message,</span><span class="s3">\n                  </span><span class="s1">details: issue.detail</span><span class="s3">\n                    </span><span class="s1">? renderStyledStringToErrorAnsi(issue.detail)</span><span class="s3">\n                    </span><span class="s1">: undefined,</span><span class="s3">\n                </span><span class="s1">})</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const errors = new Map&lt;string, CompilationError&gt;()</span><span class="s3">\n          </span><span class="s1">addErrors(errors, currentEntryIssues)</span><span class="s3">\n\n          </span><span class="s1">for (const client of clients) {</span><span class="s3">\n            </span><span class="s1">const state = clientStates.get(client)</span><span class="s3">\n            </span><span class="s1">if (!state) {</span><span class="s3">\n              </span><span class="s1">continue</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">const clientErrors = new Map(errors)</span><span class="s3">\n            </span><span class="s1">addErrors(clientErrors, state.clientIssues)</span><span class="s3">\n\n            </span><span class="s1">sendToClient(client, {</span><span class="s3">\n              </span><span class="s1">action: HMR_ACTIONS_SENT_TO_BROWSER.BUILT,</span><span class="s3">\n              </span><span class="s1">hash: String(++hmrHash),</span><span class="s3">\n              </span><span class="s1">errors: [...clientErrors.values()],</span><span class="s3">\n              </span><span class="s1">warnings: [],</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">if (hmrEventHappened) {</span><span class="s3">\n            </span><span class="s1">const time = updateMessage.value.duration</span><span class="s3">\n            </span><span class="s1">const timeMessage =</span><span class="s3">\n              </span><span class="s1">time &gt; 2000 ? `${Math.round(time / 100) / 10}s` : `${time}ms`</span><span class="s3">\n            </span><span class="s1">Log.event(`Compiled in ${timeMessage}`)</span><span class="s3">\n            </span><span class="s1">hmrEventHappened = false</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">default:</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">handleProjectUpdates().catch((err) =&gt; {</span><span class="s3">\n    </span><span class="s1">console.error(err)</span><span class="s3">\n    </span><span class="s1">process.exit(1)</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">return hotReloader</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;createHotReloaderTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;wsServer&quot;</span><span class="s0">,</span><span class="s1">&quot;ws&quot;</span><span class="s0">,</span><span class="s1">&quot;Server&quot;</span><span class="s0">,</span><span class="s1">&quot;noServer&quot;</span><span class="s0">,</span><span class="s1">&quot;isTestMode&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_TEST_MODE&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_TEST_MODE&quot;</span><span class="s0">,</span><span class="s1">&quot;DEBUG&quot;</span><span class="s0">,</span><span class="s1">&quot;sessionId&quot;</span><span class="s0">,</span><span class="s1">&quot;Math&quot;</span><span class="s0">,</span><span class="s1">&quot;floor&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;MAX_SAFE_INTEGER&quot;</span><span class="s0">,</span><span class="s1">&quot;random&quot;</span><span class="s0">,</span><span class="s1">&quot;rewriteTurbopackSources&quot;</span><span class="s0">,</span><span class="s1">&quot;projectRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMap&quot;</span><span class="s0">,</span><span class="s1">&quot;section&quot;</span><span class="s0">,</span><span class="s1">&quot;sections&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;pathToFileURL&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourceMapFromTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;project&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceURL&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapJson&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourceMapSync&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;payload&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;serverFields&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;resetFetch&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;projectPath&quot;</span><span class="s0">,</span><span class="s1">&quot;loadBindings&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;bindings&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;testMode&quot;</span><span class="s0">,</span><span class="s1">&quot;hasRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;fsChecker&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;hotReloaderSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;trace&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_VERSION&quot;</span><span class="s0">,</span><span class="s1">&quot;stop&quot;</span><span class="s0">,</span><span class="s1">&quot;encryptionKey&quot;</span><span class="s0">,</span><span class="s1">&quot;generateEncryptionKeyBase64&quot;</span><span class="s0">,</span><span class="s1">&quot;isBuild&quot;</span><span class="s0">,</span><span class="s1">&quot;clientRouterFilters&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;clientRouterFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;supportedBrowsers&quot;</span><span class="s0">,</span><span class="s1">&quot;getSupportedBrowsers&quot;</span><span class="s0">,</span><span class="s1">&quot;currentNodeJsVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;versions&quot;</span><span class="s0">,</span><span class="s1">&quot;node&quot;</span><span class="s0">,</span><span class="s1">&quot;rootPath&quot;</span><span class="s0">,</span><span class="s1">&quot;turbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;root&quot;</span><span class="s0">,</span><span class="s1">&quot;outputFileTracingRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;turbo&quot;</span><span class="s0">,</span><span class="s1">&quot;createProject&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePath&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;jsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getTurbopackJsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;watch&quot;</span><span class="s0">,</span><span class="s1">&quot;enable&quot;</span><span class="s0">,</span><span class="s1">&quot;pollIntervalMs&quot;</span><span class="s0">,</span><span class="s1">&quot;watchOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;defineEnv&quot;</span><span class="s0">,</span><span class="s1">&quot;createDefineEnv&quot;</span><span class="s0">,</span><span class="s1">&quot;isTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchCacheKeyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareMatchers&quot;</span><span class="s0">,</span><span class="s1">&quot;previewProps&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;preview&quot;</span><span class="s0">,</span><span class="s1">&quot;browserslistQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;noMangling&quot;</span><span class="s0">,</span><span class="s1">&quot;persistentCaching&quot;</span><span class="s0">,</span><span class="s1">&quot;isPersistentCachingEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;memoryLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;turbopackMemoryLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;isShortSession&quot;</span><span class="s0">,</span><span class="s1">&quot;backgroundLogCompilationEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;eventTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;setBundlerFindSourceMapImplementation&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;onDevServerCleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;onExit&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypointsSubscription&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypointsSubscribe&quot;</span><span class="s0">,</span><span class="s1">&quot;currentWrittenEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;currentEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;global&quot;</span><span class="s0">,</span><span class="s1">&quot;app&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentation&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;currentTopLevelIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;currentEntryIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;TurbopackManifestLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;changeSubscriptions&quot;</span><span class="s0">,</span><span class="s1">&quot;serverPathState&quot;</span><span class="s0">,</span><span class="s1">&quot;readyIds&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;currentEntriesHandlingResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;currentEntriesHandling&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;assetMapper&quot;</span><span class="s0">,</span><span class="s1">&quot;AssetMapper&quot;</span><span class="s0">,</span><span class="s1">&quot;clearRequireCache&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;writtenEndpoint&quot;</span><span class="s0">,</span><span class="s1">&quot;force&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;contentHash&quot;</span><span class="s0">,</span><span class="s1">&quot;serverPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;hasChange&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;localKey&quot;</span><span class="s0">,</span><span class="s1">&quot;localHash&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;globalHash&quot;</span><span class="s0">,</span><span class="s1">&quot;__next__clear_chunk_cache__&quot;</span><span class="s0">,</span><span class="s1">&quot;p&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;clearModuleContext&quot;</span><span class="s0">,</span><span class="s1">&quot;deleteCache&quot;</span><span class="s0">,</span><span class="s1">&quot;buildingIds&quot;</span><span class="s0">,</span><span class="s1">&quot;startBuilding&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;requestUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;forceRebuild&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;consoleStore&quot;</span><span class="s0">,</span><span class="s1">&quot;setState&quot;</span><span class="s0">,</span><span class="s1">&quot;loading&quot;</span><span class="s0">,</span><span class="s1">&quot;trigger&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;finishBuilding&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;hmrEventHappened&quot;</span><span class="s0">,</span><span class="s1">&quot;hmrHash&quot;</span><span class="s0">,</span><span class="s1">&quot;clients&quot;</span><span class="s0">,</span><span class="s1">&quot;clientStates&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;sendToClient&quot;</span><span class="s0">,</span><span class="s1">&quot;client&quot;</span><span class="s0">,</span><span class="s1">&quot;send&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;sendEnqueuedMessages&quot;</span><span class="s0">,</span><span class="s1">&quot;issueMap&quot;</span><span class="s0">,</span><span class="s1">&quot;values&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;severity&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;clientIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;hmrPayloads&quot;</span><span class="s0">,</span><span class="s1">&quot;clear&quot;</span><span class="s0">,</span><span class="s1">&quot;turbopackUpdates&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;HMR_ACTIONS_SENT_TO_BROWSER&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK_MESSAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;sendEnqueuedMessagesDebounce&quot;</span><span class="s0">,</span><span class="s1">&quot;debounce&quot;</span><span class="s0">,</span><span class="s1">&quot;sendHmr&quot;</span><span class="s0">,</span><span class="s1">&quot;sendTurbopackMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;diagnostics&quot;</span><span class="s0">,</span><span class="s1">&quot;issues&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;subscribeToChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;includeIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;endpoint&quot;</span><span class="s0">,</span><span class="s1">&quot;makePayload&quot;</span><span class="s0">,</span><span class="s1">&quot;onError&quot;</span><span class="s0">,</span><span class="s1">&quot;side&quot;</span><span class="s0">,</span><span class="s1">&quot;splitEntryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;changedPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;changed&quot;</span><span class="s0">,</span><span class="s1">&quot;change&quot;</span><span class="s0">,</span><span class="s1">&quot;processIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;unsubscribeFromChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;subscription&quot;</span><span class="s0">,</span><span class="s1">&quot;return&quot;</span><span class="s0">,</span><span class="s1">&quot;subscribeToHmrEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;getEntryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;hasEntrypointForKey&quot;</span><span class="s0">,</span><span class="s1">&quot;subscriptions&quot;</span><span class="s0">,</span><span class="s1">&quot;hmrEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;reloadAction&quot;</span><span class="s0">,</span><span class="s1">&quot;RELOAD_PAGE&quot;</span><span class="s0">,</span><span class="s1">&quot;close&quot;</span><span class="s0">,</span><span class="s1">&quot;unsubscribeFromHmrEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;handleEntrypointsSubscription&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;processTopLevelIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;handleEntrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;devRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;productionRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;logErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;hooks&quot;</span><span class="s0">,</span><span class="s1">&quot;handleWrittenEndpoint&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;forceDeleteCache&quot;</span><span class="s0">,</span><span class="s1">&quot;propagateServerField&quot;</span><span class="s0">,</span><span class="s1">&quot;mkdir&quot;</span><span class="s0">,</span><span class="s1">&quot;recursive&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewares&quot;</span><span class="s0">,</span><span class="s1">&quot;getOverlayMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;isSrcDir&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourceMapMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextErrorFeedbackMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;telemetry&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevOverlayFontMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getDisableDevIndicatorMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;getRestartDevServerMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;turbopackProject&quot;</span><span class="s0">,</span><span class="s1">&quot;devToolsConfigMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;sendUpdateSignal&quot;</span><span class="s0">,</span><span class="s1">&quot;hotReloader&quot;</span><span class="s0">,</span><span class="s1">&quot;DEVTOOLS_CONFIG&quot;</span><span class="s0">,</span><span class="s1">&quot;versionInfoPromise&quot;</span><span class="s0">,</span><span class="s1">&quot;getVersionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;devtoolsFrontendUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;getNodeDebugType&quot;</span><span class="s0">,</span><span class="s1">&quot;debugPort&quot;</span><span class="s0">,</span><span class="s1">&quot;debugInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;debugInfoList&quot;</span><span class="s0">,</span><span class="s1">&quot;fetch&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;activeWebpackConfigs&quot;</span><span class="s0">,</span><span class="s1">&quot;serverStats&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServerStats&quot;</span><span class="s0">,</span><span class="s1">&quot;run&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;_parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;matchNextPageBundleRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;decodedPagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;param&quot;</span><span class="s0">,</span><span class="s1">&quot;decodeURIComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;denormalizedPagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;denormalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;ensurePage&quot;</span><span class="s0">,</span><span class="s1">&quot;clientOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;definition&quot;</span><span class="s0">,</span><span class="s1">&quot;catch&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;calledNext&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;onHMR&quot;</span><span class="s0">,</span><span class="s1">&quot;socket&quot;</span><span class="s0">,</span><span class="s1">&quot;head&quot;</span><span class="s0">,</span><span class="s1">&quot;onUpgrade&quot;</span><span class="s0">,</span><span class="s1">&quot;handleUpgrade&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;addEventListener&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedData&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;manualTraceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;spanName&quot;</span><span class="s0">,</span><span class="s1">&quot;msToNs&quot;</span><span class="s0">,</span><span class="s1">&quot;startTime&quot;</span><span class="s0">,</span><span class="s1">&quot;endTime&quot;</span><span class="s0">,</span><span class="s1">&quot;attributes&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedModules&quot;</span><span class="s0">,</span><span class="s1">&quot;isPageHidden&quot;</span><span class="s0">,</span><span class="s1">&quot;hadRuntimeError&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencyChain&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;FAST_REFRESH_RUNTIME_RELOAD&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanedModulePath&quot;</span><span class="s0">,</span><span class="s1">&quot;browserDebugInfoInTerminal&quot;</span><span class="s0">,</span><span class="s1">&quot;receiveBrowserLogsTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;router&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceType&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;turbopackConnected&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK_CONNECTED&quot;</span><span class="s0">,</span><span class="s1">&quot;errors&quot;</span><span class="s0">,</span><span class="s1">&quot;entryIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;issue&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;formatIssue&quot;</span><span class="s0">,</span><span class="s1">&quot;printNonFatalIssue&quot;</span><span class="s0">,</span><span class="s1">&quot;devIndicatorServerState&quot;</span><span class="s0">,</span><span class="s1">&quot;disabledUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;versionInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;devToolsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevToolsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;SYNC&quot;</span><span class="s0">,</span><span class="s1">&quot;warnings&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;devIndicator&quot;</span><span class="s0">,</span><span class="s1">&quot;setHmrServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;_error&quot;</span><span class="s0">,</span><span class="s1">&quot;clearHmrServerError&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;getCompilationErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;appEntryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesEntryKey&quot;</span><span class="s0">,</span><span class="s1">&quot;topLevelIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;thisEntryIssues&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedIssue&quot;</span><span class="s0">,</span><span class="s1">&quot;isWellKnownError&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;reloadAfterInvalidation&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoint&quot;</span><span class="s0">,</span><span class="s1">&quot;clearAllModuleContexts&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_COMPONENT_CHANGES&quot;</span><span class="s0">,</span><span class="s1">&quot;buildFallbackError&quot;</span><span class="s0">,</span><span class="s1">&quot;inputPage&quot;</span><span class="s0">,</span><span class="s1">&quot;appPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;isApp&quot;</span><span class="s0">,</span><span class="s1">&quot;traceChild&quot;</span><span class="s0">,</span><span class="s1">&quot;traceAsyncFn&quot;</span><span class="s0">,</span><span class="s1">&quot;BLOCKED_PAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;routeDef&quot;</span><span class="s0">,</span><span class="s1">&quot;findPagePathData&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;globalNotFound&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppPageRouteDefinition&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;matchingAppPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;handlePagesErrorRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;setPathsForKey&quot;</span><span class="s0">,</span><span class="s1">&quot;clientPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;isInsideAppDir&quot;</span><span class="s0">,</span><span class="s1">&quot;bundlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;isEntryMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;isMetadataRouteFile&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedAppPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedPageToTurbopackStructureRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;extname&quot;</span><span class="s0">,</span><span class="s1">&quot;route&quot;</span><span class="s0">,</span><span class="s1">&quot;PageNotFoundError&quot;</span><span class="s0">,</span><span class="s1">&quot;handleRouteType&quot;</span><span class="s0">,</span><span class="s1">&quot;wsClient&quot;</span><span class="s0">,</span><span class="s1">&quot;terminate&quot;</span><span class="s0">,</span><span class="s1">&quot;exit&quot;</span><span class="s0">,</span><span class="s1">&quot;writeManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;handleProjectUpdates&quot;</span><span class="s0">,</span><span class="s1">&quot;updateMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;updateInfoSubscribe&quot;</span><span class="s0">,</span><span class="s1">&quot;updateType&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILDING&quot;</span><span class="s0">,</span><span class="s1">&quot;addErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;errorsMap&quot;</span><span class="s0">,</span><span class="s1">&quot;details&quot;</span><span class="s0">,</span><span class="s1">&quot;detail&quot;</span><span class="s0">,</span><span class="s1">&quot;renderStyledStringToErrorAnsi&quot;</span><span class="s0">,</span><span class="s1">&quot;clientErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILT&quot;</span><span class="s0">,</span><span class="s1">&quot;time&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;duration&quot;</span><span class="s0">,</span><span class="s1">&quot;timeMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;round&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAmKsBA;;;eAAAA;;;0BAlKW;sBACO;qBACV;2DAEf;uBAGuB;kCASM;qBASZ;6DACX;oCAId;2BACuB;qCAIvB;uBAC2B;wBACT;8BACG;8BAIrB;qCAC6B;uBACd;gCAgBf;iCAKA;gCACiC;sCACP;0BAM1B;0BACqC;uCACA;wCACH;0BACR;wBAEA;iCACG;mCACkB;gDACP;wBAUxC;6CACqC;yCACJ;wCACS;4CACH;mCACC;wBACV;6BACO;+BACd;0CAIvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEP,MAAMC,WAAW,IAAIC,WAAE,CAACC,MAAM,CAAC;IAAEC,UAAU;AAAK;AAChD,MAAMC,aAAa,CAAC,CAClBC,CAAAA,QAAQC,GAAG,CAACC,cAAc,IAC1BF,QAAQC,GAAG,CAACE,gBAAgB,IAC5BH,QAAQC,GAAG,CAACG,KAAK,AAAD;AAGlB,MAAMC,YAAYC,KAAKC,KAAK,CAACC,OAAOC,gBAAgB,GAAGH,KAAKI,MAAM;AAIlE;;CAEC,GACD,SAASC,wBACPC,WAAmB,EACnBC,SAAiC;IAEjC,IAAI,cAAcA,WAAW;QAC3B,KAAK,MAAMC,WAAWD,UAAUE,QAAQ,CAAE;YACxCJ,wBAAwBC,aAAaE,QAAQE,GAAG;QAClD;IACF,OAAO;QACL,IAAK,IAAIC,IAAI,GAAGA,IAAIJ,UAAUK,OAAO,CAACC,MAAM,EAAEF,IAAK;YACjDJ,UAAUK,OAAO,CAACD,EAAE,GAAGG,IAAAA,kBAAa,EAClCC,IAAAA,UAAI,EACFT,aACAC,UAAUK,OAAO,CAACD,EAAE,CAACK,OAAO,CAAC,+BAA+B,MAE9DC,QAAQ;QACZ;IACF;AACF;AAEA,SAASC,0BACPC,OAAgB,EAChBb,WAAmB,EACnBc,SAAiB;IAEjB,IAAIC,gBAA+B;IAEnC,IAAI;QACFA,gBAAgBF,QAAQG,gBAAgB,CAACF;IAC3C,EAAE,OAAOG,KAAK,CAAC;IAEf,IAAIF,kBAAkB,MAAM;QAC1B,OAAOG;IACT,OAAO;QACL,MAAMC,UAAkCC,KAAKC,KAAK,CAACN;QACnD,2EAA2E;QAC3E,4EAA4E;QAC5EhB,wBAAwBC,aAAamB;QACrC,OAAOA;IACT;AACF;AAEO,eAAerC,2BACpBwC,IAAuC,EACvCC,YAA0B,EAC1BC,OAAe,EACfC,UAAsB;QAkDpBH,4BAYoBI,0BA0BLJ;IAtFjB,MAAMK,MAAM;IACZ,MAAMC,UAAU;IAChB,MAAM,EAAEF,UAAU,EAAEG,KAAKC,WAAW,EAAE,GAAGR;IAEzC,MAAM,EAAES,YAAY,EAAE,GACpBC,QAAQ;IAEV,IAAIC,WAAW,MAAMF;IAErB,iGAAiG;IACjG,yGAAyG;IACzG,IAAI5C,YAAY;;QACZ6C,QAAQ,WAAwCE,GAAG,CACnD,8BACA;YACEL,KAAKC;YACLK,UAAUhD;QACZ;IAEJ;IAEA,MAAMiD,cACJd,KAAKe,SAAS,CAACC,QAAQ,CAACC,UAAU,CAAChC,MAAM,GAAG,KAC5Ce,KAAKe,SAAS,CAACC,QAAQ,CAACE,WAAW,CAACjC,MAAM,GAAG,KAC7Ce,KAAKe,SAAS,CAACC,QAAQ,CAACG,QAAQ,CAAClC,MAAM,GAAG;IAE5C,MAAMmC,kBAAkBC,IAAAA,YAAK,EAAC,gBAAgBzB,WAAW;QACvD0B,SAASxD,QAAQC,GAAG,CAACwD,cAAc;IACrC;IACA,8FAA8F;IAC9F,wCAAwC;IACxCH,gBAAgBI,IAAI;IAEpB,MAAMC,gBAAgB,MAAMC,IAAAA,kDAA2B,EAAC;QACtDC,SAAS;QACTzB;IACF;IAEA,kBAAkB;IAClB,IAAI0B;IACJ,IAAIxB,WAAWyB,YAAY,CAACC,kBAAkB,EAAE;IAC9C,oEAAoE;IACtE;IAEA,MAAMC,oBAAoBC,IAAAA,4BAAoB,EAACxB,aAAaH;IAC5D,MAAM4B,uBAAuBnE,QAAQoE,QAAQ,CAACC,IAAI;IAElD,MAAMC,WACJpC,EAAAA,6BAAAA,KAAKI,UAAU,CAACiC,SAAS,qBAAzBrC,2BAA2BsC,IAAI,KAC/BtC,KAAKI,UAAU,CAACmC,qBAAqB,IACrC/B;IACF,MAAMjB,UAAU,MAAMoB,SAAS6B,KAAK,CAACC,aAAa,CAChD;QACEL;QACA5B,aAAakC,IAAAA,4BAAa,EAACC,IAAAA,cAAQ,EAACP,UAAU5B,gBAAgB;QAC9DN;QACAE,YAAYJ,KAAKI,UAAU;QAC3BwC,UAAU,MAAMC,IAAAA,4BAAoB,EAACrC,aAAaJ;QAClD0C,OAAO;YACLC,QAAQ1C;YACR2C,cAAc,GAAE5C,2BAAAA,WAAW6C,YAAY,qBAAvB7C,yBAAyB4C,cAAc;QACzD;QACA3C;QACAtC,KAAKD,QAAQC,GAAG;QAChBmF,WAAWC,IAAAA,oBAAe,EAAC;YACzBC,aAAa;YACbxB;YACAyB,QAAQjD;YACRC;YACAH;YACAM;YACA8C,qBAAqBtD,KAAKI,UAAU,CAACyB,YAAY,CAACyB,mBAAmB;YACrExC;YACA,kBAAkB;YAClByC,oBAAoB3D;YACpBoB,UAAUhB,KAAKe,SAAS,CAACC,QAAQ;QACnC;QACAV;QACAmB;QACA+B,cAAcxD,KAAKe,SAAS,CAAC0C,iBAAiB,CAACC,OAAO;QACtDC,mBAAmB5B,kBAAkB5C,IAAI,CAAC;QAC1CyE,YAAY;QACZ3B;IACF,GACA;QACE4B,mBAAmBC,IAAAA,kCAA0B,EAAC9D,KAAKI,UAAU;QAC7D2D,WAAW,GAAE/D,gCAAAA,KAAKI,UAAU,CAACyB,YAAY,qBAA5B7B,8BAA8BgE,oBAAoB;QAC/DC,gBAAgB;IAClB;IAEFC,IAAAA,iDAA8B,EAAC3E,SAAS;QACtC4E,YAAY;YAAC;YAAiC;SAAc;IAC9D;IACAC,IAAAA,wDAAqC,EACnC9E,0BAA0B+E,IAAI,CAAC,MAAM9E,SAASiB;IAEhDR,KAAKsE,kBAAkB,oBAAvBtE,KAAKsE,kBAAkB,MAAvBtE,MAA0B;QACxBoE,IAAAA,wDAAqC,EAAC,IAAMxE;QAC5C,MAAML,QAAQgF,MAAM;IACtB;IACA,MAAMC,0BAA0BjF,QAAQkF,oBAAoB;IAE5D,MAAMC,4BAA4D,IAAIC;IACtE,MAAMC,qBAAkC;QACtCC,QAAQ;YACNC,KAAKlF;YACLmF,UAAUnF;YACVoF,OAAOpF;YAEPqF,YAAYrF;YACZsF,iBAAiBtF;QACnB;QAEAuF,MAAM,IAAIR;QACVG,KAAK,IAAIH;IACX;IAEA,MAAMS,wBAA2C,IAAIT;IACrD,MAAMU,qBAAqC,IAAIV;IAE/C,MAAMW,iBAAiB,IAAIC,uCAAuB,CAAC;QACjDjF;QACAJ;QACAuB;IACF;IAEA,eAAe;IACf,MAAM+D,sBAA2C,IAAIb;IACrD,MAAMc,kBAAkB,IAAId;IAC5B,MAAMe,WAAqB,IAAIC;IAC/B,IAAIC;IACJ,IAAIC,yBAAyB,IAAIC,QAC/B,CAACC,UAAaH,gCAAgCG;IAGhD,MAAMC,cAAc,IAAIC,2BAAW;IAEnC,SAASC,kBACPC,GAAa,EACbC,eAAgC,EAChC,EACEC,KAAK,EAIN,GAAG,CAAC,CAAC;QAEN,IAAIA,OAAO;YACT,KAAK,MAAM,EAAEC,IAAI,EAAEC,WAAW,EAAE,IAAIH,gBAAgBI,WAAW,CAAE;gBAC/Df,gBAAgBgB,GAAG,CAACH,MAAMC;YAC5B;QACF,OAAO;YACL,8CAA8C;YAC9C,IAAIG,YAAY;YAChB,KAAK,MAAM,EAAEJ,IAAI,EAAEC,WAAW,EAAE,IAAIH,gBAAgBI,WAAW,CAAE;gBAC/D,wBAAwB;gBACxB,IAAIF,KAAKK,QAAQ,CAAC,SAAS;gBAC3B,MAAMC,WAAW,GAAGT,IAAI,CAAC,EAAEG,MAAM;gBACjC,MAAMO,YAAYpB,gBAAgBqB,GAAG,CAACF;gBACtC,MAAMG,aAAatB,gBAAgBqB,GAAG,CAACR;gBACvC,IACE,AAACO,aAAaA,cAAcN,eAC3BQ,cAAcA,eAAeR,aAC9B;oBACAG,YAAY;oBACZjB,gBAAgBgB,GAAG,CAACN,KAAKI;oBACzBd,gBAAgBgB,GAAG,CAACH,MAAMC;gBAC5B,OAAO;oBACL,IAAI,CAACM,WAAW;wBACdpB,gBAAgBgB,GAAG,CAACN,KAAKI;oBAC3B;oBACA,IAAI,CAACQ,YAAY;wBACftB,gBAAgBgB,GAAG,CAACH,MAAMC;oBAC5B;gBACF;YACF;YAEA,IAAI,CAACG,WAAW;gBACd,OAAO;YACT;QACF;QAEAvG;QAEA,oBAAoB;QACpB,sCAAsC;QACtC,mFAAmF;QACnF,IAAI,OAAO6G,gCAAgC,YAAY;YACrDA;QACF;QAEA,MAAMR,cAAcJ,gBAAgBI,WAAW,CAAC1H,GAAG,CAAC,CAAC,EAAEwH,MAAMW,CAAC,EAAE,GAC9D9H,IAAAA,UAAI,EAACe,SAAS+G;QAGhB,KAAK,MAAMC,QAAQV,YAAa;YAC9BW,IAAAA,gCAAkB,EAACD;YACnBE,IAAAA,yBAAW,EAACF;QACd;QAEA,OAAO;IACT;IAEA,MAAMG,cAAc,IAAI1B;IAExB,MAAM2B,gBAA+B,CAACC,IAAIC,YAAYC;QACpD,IAAI,CAACA,gBAAgB/B,SAASgC,GAAG,CAACH,KAAK;YACrC,OAAO,KAAO;QAChB;QACA,IAAIF,YAAYM,IAAI,KAAK,GAAG;YAC1BC,YAAY,CAACC,QAAQ,CACnB;gBACEC,SAAS;gBACTC,SAASR;gBACTS,KAAKR;YACP,GACA;QAEJ;QACAH,YAAYY,GAAG,CAACV;QAChB,OAAO,SAASW;YACd,IAAIb,YAAYM,IAAI,KAAK,GAAG;gBAC1B;YACF;YACAjC,SAASuC,GAAG,CAACV;YACbF,YAAYc,MAAM,CAACZ;YACnB,IAAIF,YAAYM,IAAI,KAAK,GAAG;gBAC1BS,mBAAmB;gBACnBR,YAAY,CAACC,QAAQ,CACnB;oBACEC,SAAS;gBACX,GACA;YAEJ;QACF;IACF;IAEA,IAAIM,mBAAmB;IACvB,IAAIC,UAAU;IAEd,MAAMC,UAAU,IAAI3C;IACpB,MAAM4C,eAAe,IAAIC;IAEzB,SAASC,aAAaC,MAAU,EAAE7I,OAAyB;QACzD6I,OAAOC,IAAI,CAAC7I,KAAK8I,SAAS,CAAC/I;IAC7B;IAEA,SAASgJ;QACP,KAAK,MAAM,GAAGC,SAAS,IAAIzD,mBAAoB;YAC7C,IACE;mBAAIyD,SAASC,MAAM;aAAG,CAACC,MAAM,CAAC,CAACjK,IAAMA,EAAEkK,QAAQ,KAAK,WAAWhK,MAAM,GACrE,GACA;gBACA,mFAAmF;gBACnF;YACF;QACF;QAEA,KAAK,MAAMyJ,UAAUJ,QAAS;YAC5B,MAAMY,QAAQX,aAAazB,GAAG,CAAC4B;YAC/B,IAAI,CAACQ,OAAO;gBACV;YACF;YAEA,KAAK,MAAM,GAAGJ,SAAS,IAAII,MAAMC,YAAY,CAAE;gBAC7C,IACE;uBAAIL,SAASC,MAAM;iBAAG,CAACC,MAAM,CAAC,CAACjK,IAAMA,EAAEkK,QAAQ,KAAK,WACjDhK,MAAM,GAAG,GACZ;oBACA,mFAAmF;oBACnF;gBACF;YACF;YAEA,KAAK,MAAMY,WAAWqJ,MAAME,WAAW,CAACL,MAAM,GAAI;gBAChDN,aAAaC,QAAQ7I;YACvB;YACAqJ,MAAME,WAAW,CAACC,KAAK;YAEvB,IAAIH,MAAMI,gBAAgB,CAACrK,MAAM,GAAG,GAAG;gBACrCwJ,aAAaC,QAAQ;oBACnBa,QAAQC,6CAA2B,CAACC,iBAAiB;oBACrDC,MAAMR,MAAMI,gBAAgB;gBAC9B;gBACAJ,MAAMI,gBAAgB,CAACrK,MAAM,GAAG;YAClC;QACF;IACF;IACA,MAAM0K,+BAA+BC,IAAAA,gBAAQ,EAACf,sBAAsB;IAEpE,MAAMgB,UAAmB,CAACtC,IAAY1H;QACpC,KAAK,MAAM6I,UAAUJ,QAAS;gBAC5BC;aAAAA,oBAAAA,aAAazB,GAAG,CAAC4B,4BAAjBH,kBAA0Ba,WAAW,CAAC3C,GAAG,CAACc,IAAI1H;QAChD;QAEAuI,mBAAmB;QACnBuB;IACF;IAEA,SAASG,qBAAqBjK,OAAwB;QACpD,kGAAkG;QAClG,mCAAmC;QACnC,iGAAiG;QACjGA,QAAQkK,WAAW,GAAG,EAAE;QACxBlK,QAAQmK,MAAM,GAAG,EAAE;QAEnB,KAAK,MAAMtB,UAAUJ,QAAS;gBAC5BC;aAAAA,oBAAAA,aAAazB,GAAG,CAAC4B,4BAAjBH,kBAA0Be,gBAAgB,CAACW,IAAI,CAACpK;QAClD;QAEAuI,mBAAmB;QACnBuB;IACF;IAEA,eAAeO,mBACb/D,GAAa,EACbgE,aAAsB,EACtBC,QAAkB,EAClBC,WAGwD,EACxDC,OAEwD;QAExD,IAAI9E,oBAAoBkC,GAAG,CAACvB,MAAM;YAChC;QACF;QAEA,MAAM,EAAEoE,IAAI,EAAE,GAAGC,IAAAA,uBAAa,EAACrE;QAE/B,MAAMsE,iBAAiBL,QAAQ,CAAC,GAAGG,KAAK,OAAO,CAAC,CAAC,CAACJ;QAClD3E,oBAAoBiB,GAAG,CAACN,KAAKsE;QAC7B,IAAI;YACF,MAAMC,UAAU,MAAMD;YAEtB,WAAW,MAAME,UAAUD,QAAS;gBAClCE,IAAAA,qBAAa,EAACvF,oBAAoBc,KAAKwE,QAAQ,OAAO;gBACtD,mDAAmD;gBACnD,MAAM9K,UAAU,MAAMwK,YAAYM,QAAQE,OAAO,EAAExC;gBACnD,IAAIxI,SAAS;oBACXgK,QAAQ1D,KAAKtG;gBACf;YACF;QACF,EAAE,OAAOiL,GAAG;YACVtF,oBAAoB2C,MAAM,CAAChC;YAC3B,MAAMtG,UAAU,OAAMyK,2BAAAA,QAAUQ;YAChC,IAAIjL,SAAS;gBACXgK,QAAQ1D,KAAKtG;YACf;YACA;QACF;QACA2F,oBAAoB2C,MAAM,CAAChC;IAC7B;IAEA,eAAe4E,uBAAuB5E,GAAa;QACjD,MAAM6E,eAAe,MAAMxF,oBAAoBsB,GAAG,CAACX;QACnD,IAAI6E,cAAc;YAChB,OAAMA,aAAaC,MAAM,oBAAnBD,aAAaC,MAAM,MAAnBD;YACNxF,oBAAoB2C,MAAM,CAAChC;QAC7B;QACAd,mBAAmB8C,MAAM,CAAChC;IAC5B;IAEA,eAAe+E,qBAAqBxC,MAAU,EAAEnB,EAAU;QACxD,MAAMpB,MAAMgF,IAAAA,qBAAW,EAAC,UAAU,UAAU5D;QAC5C,IAAI,CAAC6D,IAAAA,mCAAmB,EAACxG,oBAAoBuB,KAAKH,cAAc;YAC9D,qDAAqD;YACrD;QACF;QAEA,MAAMkD,QAAQX,aAAazB,GAAG,CAAC4B;QAC/B,IAAI,CAACQ,SAASA,MAAMmC,aAAa,CAAC3D,GAAG,CAACH,KAAK;YACzC;QACF;QAEA,MAAMyD,eAAezL,QAAS+L,SAAS,CAAC/D;QACxC2B,MAAMmC,aAAa,CAAC5E,GAAG,CAACc,IAAIyD;QAE5B,+DAA+D;QAC/D,oDAAoD;QACpD,IAAI;YACF,MAAMA,aAAaO,IAAI;YAEvB,WAAW,MAAM7B,QAAQsB,aAAc;gBACrCJ,IAAAA,qBAAa,EAAC1B,MAAMC,YAAY,EAAEhD,KAAKuD,MAAM,OAAO;gBACpD,IAAIA,KAAK8B,IAAI,KAAK,UAAU;oBAC1B1B,qBAAqBJ;gBACvB;YACF;QACF,EAAE,OAAOoB,GAAG;YACV,6EAA6E;YAC7E,8DAA8D;YAC9D,sEAAsE;YACtE,2CAA2C;YAC3C,MAAMW,eAAiC;gBACrClC,QAAQC,6CAA2B,CAACkC,WAAW;gBAC/ChC,MAAM,CAAC,oCAAoC,EAAEnC,GAAG,EAAE,EAAEuD,GAAG;YACzD;YACArC,aAAaC,QAAQ+C;YACrB/C,OAAOiD,KAAK;YACZ;QACF;IACF;IAEA,SAASC,yBAAyBlD,MAAU,EAAEnB,EAAU;QACtD,MAAM2B,QAAQX,aAAazB,GAAG,CAAC4B;QAC/B,IAAI,CAACQ,OAAO;YACV;QACF;QAEA,MAAM8B,eAAe9B,MAAMmC,aAAa,CAACvE,GAAG,CAACS;QAC7CyD,gCAAAA,aAAcC,MAAM;QAEpB,MAAM9E,MAAMgF,IAAAA,qBAAW,EAAC,UAAU,UAAU5D;QAC5C2B,MAAMC,YAAY,CAAChB,MAAM,CAAChC;IAC5B;IAEA,eAAe0F;QACb,WAAW,MAAMC,eAAetH,wBAAyB;YACvD,IAAI,CAACoB,+BAA+B;gBAClCC,yBAAyB,IAAIC,QAC3B,wCAAwC;gBACxC,CAACC,UAAaH,gCAAgCG;YAElD;YAEAgG,IAAAA,qCAAqB,EAAC3G,uBAAuB0G;YAE7C,MAAME,IAAAA,iCAAiB,EAAC;gBACtBF;gBAEAlH;gBAEAS;gBACAC;gBACA2G,aAAajM,KAAKe,SAAS,CAACC,QAAQ;gBACpCkL,oBAAoBtM;gBACpBuM,WAAW;gBAEX9L,KAAK;oBACH2F;oBACAR;oBACA8C;oBACAC;oBACAtI;oBAEAmM,OAAO;wBACLC,uBAAuB,CAAC9E,IAAI+E,QAAQC;4BAClC7H,0BAA0B+B,GAAG,CAACc,IAAI+E;4BAClC,OAAOpG,kBAAkBqB,IAAI+E,QAAQ;gCAAEjG,OAAOkG;4BAAiB;wBACjE;wBACAC,sBAAsBA,qCAAoB,CAACnI,IAAI,CAAC,MAAMrE;wBACtD6J;wBACAvC;wBACA4C;wBACAa;wBACAa;oBACF;gBACF;YACF;YAEAhG;YACAA,gCAAgChG;QAClC;IACF;IAEA,MAAM6M,IAAAA,eAAK,EAACtN,IAAAA,UAAI,EAACe,SAAS,WAAW;QAAEwM,WAAW;IAAK;IACvD,MAAMD,IAAAA,eAAK,EAACtN,IAAAA,UAAI,EAACe,SAAS,UAAUI,UAAU;QAAEoM,WAAW;IAAK;IAChE,MAAMC,IAAAA,mBAAS,EACbxN,IAAAA,UAAI,EAACe,SAAS,iBACdJ,KAAK8I,SAAS,CACZ;QACE4C,MAAM;IACR,GACA,MACA;IAIJ,MAAMoB,cAAc;QAClBC,IAAAA,yCAAoB,EAAC;YACnBtN;YACAiB;YACAsM,UAAU9M,KAAK8M,QAAQ;QACzB;QACAC,IAAAA,2CAAsB,EAACxN;QACvByN,IAAAA,8DAA8B,EAAChN,KAAKiN,SAAS;QAC7CC,IAAAA,wDAA2B;QAC3BC,IAAAA,wDAAgC;QAChCC,IAAAA,yDAA6B,EAAC;YAC5BH,WAAWjN,KAAKiN,SAAS;YACzBI,kBAAkB9N;QACpB;QACA+N,IAAAA,kDAAwB,EAAC;YACvBpN;YACAqN,kBAAkB,CAAC7D;gBACjB8D,YAAY7E,IAAI,CAAC;oBACfY,QAAQC,6CAA2B,CAACiE,eAAe;oBACnD/D;gBACF;YACF;QACF;KACD;IAED,MAAMgE,qBAAqBC,IAAAA,kCAAc;IAEzC,IAAIC;IACJ,MAAMC,gBAAgBC,IAAAA,wBAAgB;IACtC,IAAID,eAAe;QACjB,MAAME,YAAYjQ,QAAQiQ,SAAS;QACnC,IAAIC;QACJ,IAAI;YACF,8EAA8E;YAC9E,MAAMC,gBAAgB,MAAMC,MAC1B,CAAC,iBAAiB,EAAEH,UAAU,UAAU,CAAC,EACzCI,IAAI,CAAC,CAACC,MAAQA,IAAIC,IAAI;YACxBL,YAAYC,aAAa,CAAC,EAAE;QAC9B,EAAE,OAAM,CAAC;QACT,IAAID,WAAW;YACbJ,sBAAsBI,UAAUJ,mBAAmB;QACrD;IACF;IAEA,MAAMJ,cAA0C;QAC9CH,kBAAkB9N;QAClB+O,sBAAsB1O;QACtB2O,aAAa;QACbC,iBAAiB;QACjB,MAAMC,KAAIC,GAAG,EAAEN,GAAG,EAAEO,UAAU;gBAExBD;YADJ,+DAA+D;YAC/D,KAAIA,WAAAA,IAAI1G,GAAG,qBAAP0G,SAASE,UAAU,CAAC,gCAAgC;gBACtD,MAAMC,SAASC,IAAAA,8CAA0B,EAACJ,IAAI1G,GAAG;gBAEjD,IAAI6G,QAAQ;oBACV,MAAME,kBAAkB,CAAC,CAAC,EAAEF,OAAOvI,IAAI,CACpCxH,GAAG,CAAC,CAACkQ,QAAkBC,mBAAmBD,QAC1C7P,IAAI,CAAC,MAAM;oBAEd,MAAM+P,uBAAuBC,IAAAA,wCAAmB,EAACJ;oBAEjD,MAAMvB,YACH4B,UAAU,CAAC;wBACVjK,MAAM+J;wBACNG,YAAY;wBACZC,YAAY1P;wBACZoI,KAAK0G,IAAI1G,GAAG;oBACd,GACCuH,KAAK,CAACC,QAAQxK,KAAK;gBACxB;YACF;YAEA,KAAK,MAAMC,cAAc2H,YAAa;gBACpC,IAAI6C,aAAa;gBAEjB,MAAMxK,WAAWyJ,KAAKN,KAAK;oBACzBqB,aAAa;gBACf;gBAEA,IAAI,CAACA,YAAY;oBACf,OAAO;wBAAEC,UAAU;oBAAK;gBAC1B;YACF;YAEA,4BAA4B;YAC5B,OAAO;gBAAEA,UAAU9P;YAAU;QAC/B;QAEA,2EAA2E;QAC3E+P,OAAMjB,GAAG,EAAEkB,MAAc,EAAEC,IAAI,EAAEC,SAAS;YACxCrS,SAASsS,aAAa,CAACrB,KAAKkB,QAAQC,MAAM,CAACnH;gBACzCoH,UAAUpH;gBACV,MAAMS,eAA+B,IAAIxE;gBACzC,MAAM0G,gBAAiD,IAAI1G;gBAE3D2D,QAAQL,GAAG,CAACS;gBACZH,aAAa9B,GAAG,CAACiC,QAAQ;oBACvBS;oBACAC,aAAa,IAAIzE;oBACjB2E,kBAAkB,EAAE;oBACpB+B;gBACF;gBAEA3C,OAAOsH,EAAE,CAAC,SAAS;oBACjB,8BAA8B;oBAC9B,KAAK,MAAMhF,gBAAgBK,cAActC,MAAM,GAAI;wBACjDiC,aAAaC,MAAM,oBAAnBD,aAAaC,MAAM,MAAnBD;oBACF;oBACAzC,aAAaJ,MAAM,CAACO;oBACpBJ,QAAQH,MAAM,CAACO;gBACjB;gBAEAA,OAAOuH,gBAAgB,CAAC,WAAW,OAAO,EAAEvG,IAAI,EAAE;oBAChD,MAAMwG,aAAapQ,KAAKC,KAAK,CAC3B,OAAO2J,SAAS,WAAWA,KAAKrK,QAAQ,KAAKqK;oBAG/C,mBAAmB;oBACnB,OAAQwG,WAAWC,KAAK;wBACtB,KAAK;4BAAY;gCACf/O,gBAAgBgP,gBAAgB,CAC9BF,WAAWG,QAAQ,EACnBC,IAAAA,sBAAM,EAACJ,WAAWK,SAAS,GAC3BD,IAAAA,sBAAM,EAACJ,WAAWM,OAAO,GACzBN,WAAWO,UAAU;gCAEvB;4BACF;wBACA,KAAK;4BACHrP,gBAAgBgP,gBAAgB,CAC9BF,WAAWC,KAAK,EAChBG,IAAAA,sBAAM,EAACJ,WAAWK,SAAS,GAC3BD,IAAAA,sBAAM,EAACJ,WAAWM,OAAO,GACzB;gCACEE,gBAAgBR,WAAWQ,cAAc;gCACzCvL,MAAM+K,WAAW/K,IAAI;gCACrBwL,cAAcT,WAAWS,YAAY;4BACvC;4BAEF;wBAEF,KAAK;wBACL,KAAK;wBACL,KAAK;wBACL,KAAK;wBACL,KAAK;wBACL,KAAK;wBACL,KAAK;4BACH,MAAM,EAAEC,eAAe,EAAEC,eAAe,EAAE,GAAGX;4BAC7C,IAAIU,iBAAiB;gCACnBE,KAAIC,IAAI,CAACC,qCAA2B;4BACtC;4BACA,IACEC,MAAMC,OAAO,CAACL,oBACd,OAAOA,eAAe,CAAC,EAAE,KAAK,UAC9B;gCACA,MAAMM,oBAAoBN,eAAe,CAAC,EAAE,CACzCzR,OAAO,CAAC,gBAAgB,KACxBA,OAAO,CAAC,mBAAmB;gCAC9B0R,KAAIC,IAAI,CACN,CAAC,+CAA+C,EAAEI,kBAAkB,yEAAyE,CAAC;4BAElJ;4BACA;wBACF,KAAK;4BAEH;wBACF,KAAK;4BAAgB;gCACnB,IAAI/Q,WAAWyB,YAAY,CAACuP,0BAA0B,EAAE;oCACtD,MAAMC,IAAAA,wCAA2B,EAAC;wCAChCC,SAASpB,WAAWoB,OAAO;wCAC3BC,QAAQrB,WAAWqB,MAAM;wCACzBC,YAAYtB,WAAWsB,UAAU;wCACjCjS;wCACAiB;wCACAN;wCACAmD,QAAQjD,WAAWyB,YAAY,CAACuP,0BAA0B;oCAC5D;gCACF;gCACA;4BACF;wBAEA;4BACE,kCAAkC;4BAClC,IAAI,CAAClB,WAAW1E,IAAI,EAAE;gCACpB,MAAM,qBAA+C,CAA/C,IAAIiG,MAAM,CAAC,0BAA0B,EAAE/H,KAAK,CAAC,CAAC,GAA9C,qBAAA;2CAAA;gDAAA;kDAAA;gCAA8C;4BACtD;oBACJ;oBAEA,qBAAqB;oBACrB,OAAQwG,WAAW1E,IAAI;wBACrB,KAAK;4BACHN,qBAAqBxC,QAAQwH,WAAW5J,IAAI;4BAC5C;wBAEF,KAAK;4BACHsF,yBAAyBlD,QAAQwH,WAAW5J,IAAI;4BAChD;wBAEF;4BACE,IAAI,CAAC4J,WAAWC,KAAK,EAAE;gCACrB,MAAM,qBAAyD,CAAzD,IAAIsB,MAAM,CAAC,oCAAoC,EAAE/H,KAAK,CAAC,CAAC,GAAxD,qBAAA;2CAAA;gDAAA;kDAAA;gCAAwD;4BAChE;oBACJ;gBACF;gBAEA,MAAMgI,qBAA+C;oBACnDnI,QAAQC,6CAA2B,CAACmI,mBAAmB;oBACvDjI,MAAM;wBAAEvL;oBAAU;gBACpB;gBACAsK,aAAaC,QAAQgJ;gBAErB,MAAME,SAA6B,EAAE;gBAErC,KAAK,MAAMC,eAAexM,mBAAmB0D,MAAM,GAAI;oBACrD,KAAK,MAAM+I,SAASD,YAAY9I,MAAM,GAAI;wBACxC,IAAI+I,MAAM7I,QAAQ,KAAK,WAAW;4BAChC2I,OAAO3H,IAAI,CAAC;gCACV8H,SAASC,IAAAA,mBAAW,EAACF;4BACvB;wBACF,OAAO;4BACLG,IAAAA,kCAAkB,EAACH;wBACrB;oBACF;gBACF;gBAEA,IAAII,gDAAuB,CAACC,aAAa,GAAGC,KAAKC,GAAG,IAAI;oBACtDH,gDAAuB,CAACC,aAAa,GAAG;gBAC1C;;gBAEE,CAAA;oBACA,MAAMG,cAAc,MAAM5E;oBAC1B,MAAM6E,iBAAiB,MAAMC,IAAAA,2CAAiB,EAACtS;oBAE/C,MAAMuS,OAAmB;wBACvBlJ,QAAQC,6CAA2B,CAACkJ,IAAI;wBACxCd;wBACAe,UAAU,EAAE;wBACZC,MAAM;wBACNN;wBACAO,OAAO;4BACLjF;wBACF;wBACAkF,cAAcZ,gDAAuB;wBACrCK;oBACF;oBAEA9J,aAAaC,QAAQ+J;gBACvB,CAAA;YACF;QACF;QAEA9J,MAAKY,MAAM;YACT,MAAM1J,UAAUC,KAAK8I,SAAS,CAACW;YAC/B,KAAK,MAAMb,UAAUJ,QAAS;gBAC5BI,OAAOC,IAAI,CAAC9I;YACd;QACF;QAEAkT,mBAAkBC,MAAM;QACtB,uBAAuB;QACzB;QACAC;QACE,uBAAuB;QACzB;QACA,MAAMC,UAAS;QACf,MAAMC,sBAAqBhO,IAAI;YAC7B,MAAMiO,cAAcjI,IAAAA,qBAAW,EAAC,OAAO,UAAUhG;YACjD,MAAMkO,gBAAgBlI,IAAAA,qBAAW,EAAC,SAAS,UAAUhG;YAErD,MAAMmO,iBAAiBlO,sBAAsB2D,MAAM;YAEnD,MAAMwK,kBACJlO,mBAAmByB,GAAG,CAACsM,gBACvB/N,mBAAmByB,GAAG,CAACuM;YAEzB,IAAIE,oBAAoB3T,aAAa2T,gBAAgB5L,IAAI,GAAG,GAAG;gBAC7D,+FAA+F;gBAC/F,OAAO;uBAAI2L;uBAAmBC,gBAAgBxK,MAAM;iBAAG,CACpDjK,GAAG,CAAC,CAACgT;oBACJ,MAAM0B,iBAAiBxB,IAAAA,mBAAW,EAACF;oBACnC,IAAIA,MAAM7I,QAAQ,KAAK,WAAW;wBAChCgJ,IAAAA,kCAAkB,EAACH;wBACnB,OAAO;oBACT,OAAO,IAAI2B,IAAAA,wBAAgB,EAAC3B,QAAQ;wBAClChB,KAAI9L,KAAK,CAACwO;oBACZ;oBAEA,OAAO,qBAAyB,CAAzB,IAAI/B,MAAM+B,iBAAV,qBAAA;+BAAA;oCAAA;sCAAA;oBAAwB;gBACjC,GACCxK,MAAM,CAAC,CAAChE,QAAUA,UAAU;YACjC;YAEA,4CAA4C;YAC5C,MAAM4M,SAAS,EAAE;YACjB,KAAK,MAAME,SAASwB,eAAgB;gBAClC,IAAIxB,MAAM7I,QAAQ,KAAK,WAAW;oBAChC2I,OAAO3H,IAAI,CAAC,qBAA6B,CAA7B,IAAIwH,MAAMO,IAAAA,mBAAW,EAACF,SAAtB,qBAAA;+BAAA;oCAAA;sCAAA;oBAA4B;gBAC1C;YACF;YACA,KAAK,MAAMD,eAAexM,mBAAmB0D,MAAM,GAAI;gBACrD,KAAK,MAAM+I,SAASD,YAAY9I,MAAM,GAAI;oBACxC,IAAI+I,MAAM7I,QAAQ,KAAK,WAAW;wBAChC,MAAM8I,UAAUC,IAAAA,mBAAW,EAACF;wBAC5BF,OAAO3H,IAAI,CAAC,qBAAkB,CAAlB,IAAIwH,MAAMM,UAAV,qBAAA;mCAAA;wCAAA;0CAAA;wBAAiB;oBAC/B,OAAO;wBACLE,IAAAA,kCAAkB,EAACH;oBACrB;gBACF;YACF;YACA,OAAOF;QACT;QACA,MAAM8B,YAAW,EACf,yCAAyC;QACzCC,uBAAuB,EACxB;YACC,IAAIA,yBAAyB;gBAC3B,KAAK,MAAM,CAACxN,KAAKyN,WAAW,IAAIlP,0BAA2B;oBACzDwB,kBAAkBC,KAAKyN,YAAY;wBAAEvN,OAAO;oBAAK;gBACnD;gBAEA,MAAMwN,IAAAA,oCAAsB;gBAC5B,IAAI,CAAClL,IAAI,CAAC;oBACRY,QAAQC,6CAA2B,CAACsK,wBAAwB;oBAC5DlB,MAAM/H,OAAO,EAAExC;gBACjB;YACF;QACF;QACA,MAAM0L;QACJ,uBAAuB;QACzB;QACA,MAAM3E,YAAW,EACfjK,MAAM6O,SAAS,EACf,oBAAoB;QACpB,cAAc;QACdC,QAAQ,EACR3E,UAAU,EACV4E,KAAK,EACLlM,KAAKR,UAAU,EAChB;YACC,yFAAyF;YACzF,6FAA6F;YAC7F,IAAI,CAAC8H,YAAY;gBACf,IAAI0E,cAAc,eAAe;gBACjC,IAAIA,cAAc,mBAAmB;gBACrC,IAAIA,cAAc,oBAAoB;gBACtC,IAAIA,cAAc,wBAAwB;YAC5C;YAEA,OAAO5S,gBACJ+S,UAAU,CAAC,eAAe;gBACzBH;YACF,GACCI,YAAY,CAAC;gBACZ,IAAIC,wBAAa,CAACC,QAAQ,CAACN,cAAcA,cAAc,WAAW;oBAChE;gBACF;gBAEA,MAAMnO;gBAEN,qGAAqG;gBACrG,IAAI0O,WAIFjF,cACC,MAAMkF,IAAAA,sCAAgB,EACrBhU,aACAwT,WACA5T,WAAWqU,cAAc,EACzBzU,KAAK0U,QAAQ,EACb1U,KAAK2U,MAAM,EACX,CAAC,CAACvU,WAAWyB,YAAY,CAAC+S,cAAc;gBAG5C,yEAAyE;gBACzE,oEAAoE;gBACpE,IAAI,CAACX,YAAY3E,cAAcuF,IAAAA,gDAAwB,EAACvF,aAAa;oBACnE2E,WAAW3E,WAAW2E,QAAQ;gBAChC;gBAEA,IAAI9O,OAAOoP,SAASpP,IAAI;gBACxB,IAAI8O,UAAU;oBACZ,MAAMa,iBAAiBC,IAAAA,0BAAgB,EAAC5P;oBAExC,8DAA8D;oBAC9D,MAAM6P,mBAAmBf,SAASjL,MAAM,CACtC,CAAC1C,OAASyO,IAAAA,0BAAgB,EAACzO,UAAUwO;oBAGvC,4EAA4E;oBAC5E3P,OAAO6P,gBAAgB,CAACA,iBAAiB/V,MAAM,GAAG,EAAE;gBACtD;gBAEA,MAAMgW,WAAW3F,CAAAA,8BAAAA,WAAY2F,QAAQ,KAAIjB;gBAEzC,IAAI7O,SAAS,WAAW;oBACtB,IAAI+C,iBAAiBZ,cAAc2N,UAAUzN,YAAY;oBACzD,IAAI;wBACF,MAAM0N,IAAAA,qCAAqB,EAAC;4BAC1B7P;4BACAyG,aAAalH;4BACbU;4BACA2G,aAAajM,KAAKe,SAAS,CAACC,QAAQ;4BACpCkL,oBAAoBtM;4BACpBuM,WAAW;4BACXC,OAAO;gCACLlC;gCACAmC,uBAAuB,CAAC9E,IAAI+E,QAAQC;oCAClC7H,0BAA0B+B,GAAG,CAACc,IAAI+E;oCAClCtG,YAAYmP,cAAc,CAAC5N,IAAI+E,OAAO8I,WAAW;oCACjD,OAAOlP,kBAAkBqB,IAAI+E,QAAQ;wCACnCjG,OAAOkG;oCACT;gCACF;4BACF;wBACF;oBACF,SAAU;wBACRrE;oBACF;oBACA;gBACF;gBAEA,MAAMmN,iBAAiBd,SAASe,UAAU,CAAC1G,UAAU,CAAC;gBACtD,MAAM2G,2BAA2BC,IAAAA,oCAAmB,EAClDjB,SAASkB,QAAQ,CAACrW,OAAO,CAACY,KAAK2U,MAAM,IAAI,IAAI,KAC7CvU,WAAWqU,cAAc,EACzB;gBAEF,MAAMiB,oBAAoBH,2BACtBI,IAAAA,uDAAuC,EACrCxQ,MACAyQ,IAAAA,aAAO,EAACrB,SAASkB,QAAQ,KAE3BtQ;gBAEJ,MAAM0Q,QAAQR,iBACVzQ,mBAAmBE,GAAG,CAACgC,GAAG,CAAC4O,qBAC3B9Q,mBAAmBO,IAAI,CAAC2B,GAAG,CAAC3B;gBAEhC,IAAI,CAAC0Q,OAAO;oBACV,gDAAgD;oBAChD,IAAI1Q,SAAS,eAAe;oBAC5B,IAAIA,SAAS,mBAAmB;oBAChC,IAAIA,SAAS,oBAAoB;oBACjC,IAAIA,SAAS,wBAAwB;oBAErC,MAAM,IAAI2Q,wBAAiB,CAAC,CAAC,gBAAgB,EAAE3Q,MAAM;gBACvD;gBAEA,2DAA2D;gBAC3D,4CAA4C;gBAC5C,mCAAmC;gBACnC,IAAI+O,SAAS2B,MAAMrK,IAAI,KAAK,QAAQ;oBAClC,MAAM,qBAA8D,CAA9D,IAAIiG,MAAM,CAAC,0CAA0C,EAAEtM,MAAM,GAA7D,qBAAA;+BAAA;oCAAA;sCAAA;oBAA6D;gBACrE;gBAEA,MAAM+C,iBAAiBZ,cAAc2N,UAAUzN,YAAY;gBAC3D,IAAI;oBACF,MAAMuO,IAAAA,+BAAe,EAAC;wBACpB1V;wBACA8E;wBACA8P;wBACAY;wBACAxQ;wBACAyG,aAAalH;wBACbU;wBACAI;wBACAuG,aAAajM,KAAKe,SAAS,CAACC,QAAQ;wBACpCkL,oBAAoBtM;wBACpBuM,WAAW;wBAEXC,OAAO;4BACLlC;4BACAmC,uBAAuB,CAAC9E,IAAI+E,QAAQC;gCAClC7H,0BAA0B+B,GAAG,CAACc,IAAI+E;gCAClCtG,YAAYmP,cAAc,CAAC5N,IAAI+E,OAAO8I,WAAW;gCACjD,OAAOlP,kBAAkBqB,IAAI+E,QAAQ;oCACnCjG,OAAOkG;gCACT;4BACF;wBACF;oBACF;gBACF,SAAU;oBACRrE;gBACF;YACF;QACJ;QACAyD;YACE,KAAK,MAAMqK,YAAY1N,QAAS;gBAC9B,0EAA0E;gBAC1E0N,SAASC,SAAS;YACpB;YACA3N,QAAQe,KAAK;QACf;IACF;IAEAwC,gCAAgC0D,KAAK,CAAC,CAAC5P;QACrC6P,QAAQxK,KAAK,CAACrF;QACd7B,QAAQoY,IAAI,CAAC;IACf;IAEA,wBAAwB;IACxB,MAAMrQ;IACN,MAAMP,eAAe6Q,cAAc,CAAC;QAClClK,aAAajM,KAAKe,SAAS,CAACC,QAAQ;QACpCkL,oBAAoBtM;QACpBkM,aAAalH;IACf;IAEA,eAAewR;QACb,WAAW,MAAMC,iBAAiB9W,QAAQ+W,mBAAmB,CAAC,IAAK;YACjE,OAAQD,cAAcE,UAAU;gBAC9B,KAAK;oBAAS;wBACZ/I,YAAY7E,IAAI,CAAC;4BAAEY,QAAQC,6CAA2B,CAACgN,QAAQ;wBAAC;wBAChE;oBACF;gBACA,KAAK;oBAAO;wBACV3N;wBAEA,SAAS4N,UACPC,SAAwC,EACxC1M,MAAsB;4BAEtB,KAAK,MAAMlB,YAAYkB,OAAOjB,MAAM,GAAI;gCACtC,KAAK,MAAM,CAAC5C,KAAK2L,MAAM,IAAIhJ,SAAU;oCACnC,IAAIgJ,MAAM7I,QAAQ,KAAK,WAAW;oCAClC,IAAIyN,UAAUhP,GAAG,CAACvB,MAAM;oCAExB,MAAM4L,UAAUC,IAAAA,mBAAW,EAACF;oCAE5B4E,UAAUjQ,GAAG,CAACN,KAAK;wCACjB4L;wCACA4E,SAAS7E,MAAM8E,MAAM,GACjBC,IAAAA,qCAA6B,EAAC/E,MAAM8E,MAAM,IAC1ChX;oCACN;gCACF;4BACF;wBACF;wBAEA,MAAMgS,SAAS,IAAIjN;wBACnB8R,UAAU7E,QAAQvM;wBAElB,KAAK,MAAMqD,UAAUJ,QAAS;4BAC5B,MAAMY,QAAQX,aAAazB,GAAG,CAAC4B;4BAC/B,IAAI,CAACQ,OAAO;gCACV;4BACF;4BAEA,MAAM4N,eAAe,IAAInS,IAAIiN;4BAC7B6E,UAAUK,cAAc5N,MAAMC,YAAY;4BAE1CV,aAAaC,QAAQ;gCACnBa,QAAQC,6CAA2B,CAACuN,KAAK;gCACzCnE,MAAM/H,OAAO,EAAExC;gCACfuJ,QAAQ;uCAAIkF,aAAa/N,MAAM;iCAAG;gCAClC4J,UAAU,EAAE;4BACd;wBACF;wBAEA,IAAIvK,kBAAkB;4BACpB,MAAM4O,OAAOX,cAAcY,KAAK,CAACC,QAAQ;4BACzC,MAAMC,cACJH,OAAO,OAAO,GAAG5Y,KAAKgZ,KAAK,CAACJ,OAAO,OAAO,GAAG,CAAC,CAAC,GAAG,GAAGA,KAAK,EAAE,CAAC;4BAC/DlG,KAAIX,KAAK,CAAC,CAAC,YAAY,EAAEgH,aAAa;4BACtC/O,mBAAmB;wBACrB;wBACA;oBACF;gBACA;YACF;QACF;IACF;IAEAgO,uBAAuB7G,KAAK,CAAC,CAAC5P;QAC5B6P,QAAQxK,KAAK,CAACrF;QACd7B,QAAQoY,IAAI,CAAC;IACf;IAEA,OAAO1I;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>