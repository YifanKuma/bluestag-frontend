<html>
<head>
<title>eslint-visitor-keys.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #067d17;}
.s1 { color: #080808;}
.s2 { color: #8c8c8c; font-style: italic;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #0033b3;}
.s5 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslint-visitor-keys.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s2">/* eslint-disable jsdoc/valid-types -- doesn't allow `readonly`. 
   TODO: remove eslint-disable when https://github.com/jsdoc-type-pratt-parser/jsdoc-type-pratt-parser/issues/164 is fixed 
*/</span>
<span class="s2">/**</span>
 <span class="s2">* </span><span class="s3">@typedef </span><span class="s2">{{ readonly [type: string]: ReadonlyArray&lt;string&gt; }} VisitorKeys</span>
 <span class="s2">*/</span>
<span class="s2">/* eslint-enable jsdoc/valid-types -- doesn't allow `readonly string[]`. TODO: check why */</span>

<span class="s2">/**</span>
 <span class="s2">* </span><span class="s3">@type </span><span class="s2">{VisitorKeys}</span>
 <span class="s2">*/</span>
<span class="s4">const </span><span class="s1">KEYS = {</span>
    <span class="s1">ArrayExpression: [</span>
        <span class="s0">&quot;elements&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ArrayPattern: [</span>
        <span class="s0">&quot;elements&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ArrowFunctionExpression: [</span>
        <span class="s0">&quot;params&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">AssignmentExpression: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span>
    <span class="s1">],</span>
    <span class="s1">AssignmentPattern: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span>
    <span class="s1">],</span>
    <span class="s1">AwaitExpression: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">BinaryExpression: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span>
    <span class="s1">],</span>
    <span class="s1">BlockStatement: [</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">BreakStatement: [</span>
        <span class="s0">&quot;label&quot;</span>
    <span class="s1">],</span>
    <span class="s1">CallExpression: [</span>
        <span class="s0">&quot;callee&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;arguments&quot;</span>
    <span class="s1">],</span>
    <span class="s1">CatchClause: [</span>
        <span class="s0">&quot;param&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ChainExpression: [</span>
        <span class="s0">&quot;expression&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ClassBody: [</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ClassDeclaration: [</span>
        <span class="s0">&quot;id&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;superClass&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ClassExpression: [</span>
        <span class="s0">&quot;id&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;superClass&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ConditionalExpression: [</span>
        <span class="s0">&quot;test&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;consequent&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;alternate&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ContinueStatement: [</span>
        <span class="s0">&quot;label&quot;</span>
    <span class="s1">],</span>
    <span class="s1">DebuggerStatement: [],</span>
    <span class="s1">DoWhileStatement: [</span>
        <span class="s0">&quot;body&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;test&quot;</span>
    <span class="s1">],</span>
    <span class="s1">EmptyStatement: [],</span>
    <span class="s1">ExperimentalRestProperty: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExperimentalSpreadProperty: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExportAllDeclaration: [</span>
        <span class="s0">&quot;exported&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;source&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;attributes&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExportDefaultDeclaration: [</span>
        <span class="s0">&quot;declaration&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExportNamedDeclaration: [</span>
        <span class="s0">&quot;declaration&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;specifiers&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;source&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;attributes&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExportSpecifier: [</span>
        <span class="s0">&quot;local&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;exported&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ExpressionStatement: [</span>
        <span class="s0">&quot;expression&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ForInStatement: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ForOfStatement: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ForStatement: [</span>
        <span class="s0">&quot;init&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;test&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;update&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">FunctionDeclaration: [</span>
        <span class="s0">&quot;id&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;params&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">FunctionExpression: [</span>
        <span class="s0">&quot;id&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;params&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">Identifier: [],</span>
    <span class="s1">IfStatement: [</span>
        <span class="s0">&quot;test&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;consequent&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;alternate&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportAttribute: [</span>
        <span class="s0">&quot;key&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;value&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportDeclaration: [</span>
        <span class="s0">&quot;specifiers&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;source&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;attributes&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportDefaultSpecifier: [</span>
        <span class="s0">&quot;local&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportExpression: [</span>
        <span class="s0">&quot;source&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;options&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportNamespaceSpecifier: [</span>
        <span class="s0">&quot;local&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ImportSpecifier: [</span>
        <span class="s0">&quot;imported&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;local&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXAttribute: [</span>
        <span class="s0">&quot;name&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;value&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXClosingElement: [</span>
        <span class="s0">&quot;name&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXClosingFragment: [],</span>
    <span class="s1">JSXElement: [</span>
        <span class="s0">&quot;openingElement&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;children&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;closingElement&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXEmptyExpression: [],</span>
    <span class="s1">JSXExpressionContainer: [</span>
        <span class="s0">&quot;expression&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXFragment: [</span>
        <span class="s0">&quot;openingFragment&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;children&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;closingFragment&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXIdentifier: [],</span>
    <span class="s1">JSXMemberExpression: [</span>
        <span class="s0">&quot;object&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;property&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXNamespacedName: [</span>
        <span class="s0">&quot;namespace&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;name&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXOpeningElement: [</span>
        <span class="s0">&quot;name&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;attributes&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXOpeningFragment: [],</span>
    <span class="s1">JSXSpreadAttribute: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXSpreadChild: [</span>
        <span class="s0">&quot;expression&quot;</span>
    <span class="s1">],</span>
    <span class="s1">JSXText: [],</span>
    <span class="s1">LabeledStatement: [</span>
        <span class="s0">&quot;label&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">Literal: [],</span>
    <span class="s1">LogicalExpression: [</span>
        <span class="s0">&quot;left&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;right&quot;</span>
    <span class="s1">],</span>
    <span class="s1">MemberExpression: [</span>
        <span class="s0">&quot;object&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;property&quot;</span>
    <span class="s1">],</span>
    <span class="s1">MetaProperty: [</span>
        <span class="s0">&quot;meta&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;property&quot;</span>
    <span class="s1">],</span>
    <span class="s1">MethodDefinition: [</span>
        <span class="s0">&quot;key&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;value&quot;</span>
    <span class="s1">],</span>
    <span class="s1">NewExpression: [</span>
        <span class="s0">&quot;callee&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;arguments&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ObjectExpression: [</span>
        <span class="s0">&quot;properties&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ObjectPattern: [</span>
        <span class="s0">&quot;properties&quot;</span>
    <span class="s1">],</span>
    <span class="s1">PrivateIdentifier: [],</span>
    <span class="s1">Program: [</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">Property: [</span>
        <span class="s0">&quot;key&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;value&quot;</span>
    <span class="s1">],</span>
    <span class="s1">PropertyDefinition: [</span>
        <span class="s0">&quot;key&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;value&quot;</span>
    <span class="s1">],</span>
    <span class="s1">RestElement: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ReturnStatement: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">SequenceExpression: [</span>
        <span class="s0">&quot;expressions&quot;</span>
    <span class="s1">],</span>
    <span class="s1">SpreadElement: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">StaticBlock: [</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">Super: [],</span>
    <span class="s1">SwitchCase: [</span>
        <span class="s0">&quot;test&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;consequent&quot;</span>
    <span class="s1">],</span>
    <span class="s1">SwitchStatement: [</span>
        <span class="s0">&quot;discriminant&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;cases&quot;</span>
    <span class="s1">],</span>
    <span class="s1">TaggedTemplateExpression: [</span>
        <span class="s0">&quot;tag&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;quasi&quot;</span>
    <span class="s1">],</span>
    <span class="s1">TemplateElement: [],</span>
    <span class="s1">TemplateLiteral: [</span>
        <span class="s0">&quot;quasis&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;expressions&quot;</span>
    <span class="s1">],</span>
    <span class="s1">ThisExpression: [],</span>
    <span class="s1">ThrowStatement: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">TryStatement: [</span>
        <span class="s0">&quot;block&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;handler&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;finalizer&quot;</span>
    <span class="s1">],</span>
    <span class="s1">UnaryExpression: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">UpdateExpression: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">],</span>
    <span class="s1">VariableDeclaration: [</span>
        <span class="s0">&quot;declarations&quot;</span>
    <span class="s1">],</span>
    <span class="s1">VariableDeclarator: [</span>
        <span class="s0">&quot;id&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;init&quot;</span>
    <span class="s1">],</span>
    <span class="s1">WhileStatement: [</span>
        <span class="s0">&quot;test&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">WithStatement: [</span>
        <span class="s0">&quot;object&quot;</span><span class="s1">,</span>
        <span class="s0">&quot;body&quot;</span>
    <span class="s1">],</span>
    <span class="s1">YieldExpression: [</span>
        <span class="s0">&quot;argument&quot;</span>
    <span class="s1">]</span>
<span class="s1">};</span>

<span class="s2">// Types.</span>
<span class="s4">const </span><span class="s1">NODE_TYPES = Object.keys(KEYS);</span>

<span class="s2">// Freeze the keys.</span>
<span class="s4">for </span><span class="s1">(</span><span class="s4">const </span><span class="s1">type of NODE_TYPES) {</span>
    <span class="s1">Object.freeze(KEYS[type]);</span>
<span class="s1">}</span>
<span class="s1">Object.freeze(KEYS);</span>

<span class="s2">/**</span>
 <span class="s2">* </span><span class="s3">@author </span><span class="s2">Toru Nagashima &lt;https://github.com/mysticatea&gt;</span>
 <span class="s2">* See LICENSE file in root directory for full license.</span>
 <span class="s2">*/</span>

<span class="s2">/**</span>
 <span class="s2">* </span><span class="s3">@typedef </span><span class="s2">{import('./visitor-keys.js').VisitorKeys} VisitorKeys</span>
 <span class="s2">*/</span>

<span class="s2">// List to ignore keys.</span>
<span class="s4">const </span><span class="s1">KEY_BLACKLIST = </span><span class="s4">new </span><span class="s1">Set([</span>
    <span class="s0">&quot;parent&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;leadingComments&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;trailingComments&quot;</span>
<span class="s1">]);</span>

<span class="s2">/**</span>
 <span class="s2">* Check whether a given key should be used or not.</span>
 <span class="s2">* </span><span class="s3">@param </span><span class="s2">{string} key The key to check.</span>
 <span class="s2">* </span><span class="s3">@returns </span><span class="s2">{boolean} `true` if the key should be used.</span>
 <span class="s2">*/</span>
<span class="s4">function </span><span class="s1">filterKey(key) {</span>
    <span class="s4">return </span><span class="s1">!KEY_BLACKLIST.has(key) &amp;&amp; key[</span><span class="s5">0</span><span class="s1">] !== </span><span class="s0">&quot;_&quot;</span><span class="s1">;</span>
<span class="s1">}</span>


<span class="s2">/* eslint-disable jsdoc/valid-types -- doesn't allow `readonly`. 
   TODO: remove eslint-disable when https://github.com/jsdoc-type-pratt-parser/jsdoc-type-pratt-parser/issues/164 is fixed 
*/</span>
<span class="s2">/**</span>
 <span class="s2">* Get visitor keys of a given node.</span>
 <span class="s2">* </span><span class="s3">@param </span><span class="s2">{Object} node The AST node to get keys.</span>
 <span class="s2">* </span><span class="s3">@returns </span><span class="s2">{readonly string[]} Visitor keys of the node.</span>
 <span class="s2">*/</span>
<span class="s4">function </span><span class="s1">getKeys(node) {</span>
    <span class="s4">return </span><span class="s1">Object.keys(node).filter(filterKey);</span>
<span class="s1">}</span>
<span class="s2">/* eslint-enable jsdoc/valid-types -- doesn't allow `readonly` */</span>

<span class="s2">/**</span>
 <span class="s2">* Make the union set with `KEYS` and given keys.</span>
 <span class="s2">* </span><span class="s3">@param </span><span class="s2">{VisitorKeys} additionalKeys The additional keys.</span>
 <span class="s2">* </span><span class="s3">@returns </span><span class="s2">{VisitorKeys} The union set.</span>
 <span class="s2">*/</span>
<span class="s4">function </span><span class="s1">unionWith(additionalKeys) {</span>
    <span class="s4">const </span><span class="s1">retv = </span><span class="s2">/** </span><span class="s3">@type </span><span class="s2">{{ [type: string]: ReadonlyArray&lt;string&gt; }} */</span>
        <span class="s1">(Object.assign({}, KEYS));</span>

    <span class="s4">for </span><span class="s1">(</span><span class="s4">const </span><span class="s1">type of Object.keys(additionalKeys)) {</span>
        <span class="s4">if </span><span class="s1">(Object.hasOwn(retv, type)) {</span>
            <span class="s4">const </span><span class="s1">keys = </span><span class="s4">new </span><span class="s1">Set(additionalKeys[type]);</span>

            <span class="s4">for </span><span class="s1">(</span><span class="s4">const </span><span class="s1">key of retv[type]) {</span>
                <span class="s1">keys.add(key);</span>
            <span class="s1">}</span>

            <span class="s1">retv[type] = Object.freeze(Array.from(keys));</span>
        <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
            <span class="s1">retv[type] = Object.freeze(Array.from(additionalKeys[type]));</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">return </span><span class="s1">Object.freeze(retv);</span>
<span class="s1">}</span>

<span class="s1">exports.KEYS = KEYS;</span>
<span class="s1">exports.getKeys = getKeys;</span>
<span class="s1">exports.unionWith = unionWith;</span>
</pre>
</body>
</html>