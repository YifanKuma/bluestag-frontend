<html>
<head>
<title>resolve-rewrites.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
resolve-rewrites.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../../../src/shared/lib/router/utils/resolve-rewrites.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { ParsedUrlQuery } from 'querystring'</span><span class="s3">\n</span><span class="s1">import type { Rewrite } from '../../../../lib/load-custom-routes'</span><span class="s3">\n</span><span class="s1">import { getPathMatch } from './path-match'</span><span class="s3">\n</span><span class="s1">import { matchHas, prepareDestination } from './prepare-destination'</span><span class="s3">\n</span><span class="s1">import { removeTrailingSlash } from './remove-trailing-slash'</span><span class="s3">\n</span><span class="s1">import { normalizeLocalePath } from '../../i18n/normalize-locale-path'</span><span class="s3">\n</span><span class="s1">import { removeBasePath } from '../../../../client/remove-base-path'</span><span class="s3">\n</span><span class="s1">import { parseRelativeUrl, type ParsedRelativeUrl } from './parse-relative-url'</span><span class="s3">\n\n</span><span class="s1">interface ParsedAs extends Omit&lt;ParsedRelativeUrl, 'slashes'&gt; {</span><span class="s3">\n  </span><span class="s1">slashes: boolean | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default function resolveRewrites(</span><span class="s3">\n  </span><span class="s1">asPath: string,</span><span class="s3">\n  </span><span class="s1">pages: string[],</span><span class="s3">\n  </span><span class="s1">rewrites: {</span><span class="s3">\n    </span><span class="s1">beforeFiles: Rewrite[]</span><span class="s3">\n    </span><span class="s1">afterFiles: Rewrite[]</span><span class="s3">\n    </span><span class="s1">fallback: Rewrite[]</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">query: ParsedUrlQuery,</span><span class="s3">\n  </span><span class="s1">resolveHref: (path: string) =&gt; string,</span><span class="s3">\n  </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n</span><span class="s1">): {</span><span class="s3">\n  </span><span class="s1">matchedPage: boolean</span><span class="s3">\n  </span><span class="s1">parsedAs: ParsedAs</span><span class="s3">\n  </span><span class="s1">asPath: string</span><span class="s3">\n  </span><span class="s1">resolvedHref?: string</span><span class="s3">\n  </span><span class="s1">externalDest?: boolean</span><span class="s3">\n</span><span class="s1">} {</span><span class="s3">\n  </span><span class="s1">let matchedPage = false</span><span class="s3">\n  </span><span class="s1">let externalDest = false</span><span class="s3">\n  </span><span class="s1">let parsedAs: ParsedAs = parseRelativeUrl(asPath)</span><span class="s3">\n  </span><span class="s1">let fsPathname = removeTrailingSlash(</span><span class="s3">\n    </span><span class="s1">normalizeLocalePath(removeBasePath(parsedAs.pathname), locales).pathname</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">let resolvedHref</span><span class="s3">\n\n  </span><span class="s1">const handleRewrite = (rewrite: Rewrite) =&gt; {</span><span class="s3">\n    </span><span class="s1">const matcher = getPathMatch(</span><span class="s3">\n      </span><span class="s1">rewrite.source + (process.env.__NEXT_TRAILING_SLASH ? '(/)?' : ''),</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">removeUnnamedParams: true,</span><span class="s3">\n        </span><span class="s1">strict: true,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">let params = matcher(parsedAs.pathname)</span><span class="s3">\n\n    </span><span class="s1">if ((rewrite.has || rewrite.missing) &amp;&amp; params) {</span><span class="s3">\n      </span><span class="s1">const hasParams = matchHas(</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">headers: {</span><span class="s3">\n            </span><span class="s1">host: document.location.hostname,</span><span class="s3">\n            </span><span class="s1">'user-agent': navigator.userAgent,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">cookies: document.cookie</span><span class="s3">\n            </span><span class="s1">.split('; ')</span><span class="s3">\n            </span><span class="s1">.reduce&lt;Record&lt;string, string&gt;&gt;((acc, item) =&gt; {</span><span class="s3">\n              </span><span class="s1">const [key, ...value] = item.split('=')</span><span class="s3">\n              </span><span class="s1">acc[key] = value.join('=')</span><span class="s3">\n              </span><span class="s1">return acc</span><span class="s3">\n            </span><span class="s1">}, {}),</span><span class="s3">\n        </span><span class="s1">} as any,</span><span class="s3">\n        </span><span class="s1">parsedAs.query,</span><span class="s3">\n        </span><span class="s1">rewrite.has,</span><span class="s3">\n        </span><span class="s1">rewrite.missing</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (hasParams) {</span><span class="s3">\n        </span><span class="s1">Object.assign(params, hasParams)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">params = false</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (params) {</span><span class="s3">\n      </span><span class="s1">if (!rewrite.destination) {</span><span class="s3">\n        </span><span class="s1">// this is a proxied rewrite which isn't handled on the client</span><span class="s3">\n        </span><span class="s1">externalDest = true</span><span class="s3">\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const destRes = prepareDestination({</span><span class="s3">\n        </span><span class="s1">appendParamsToQuery: true,</span><span class="s3">\n        </span><span class="s1">destination: rewrite.destination,</span><span class="s3">\n        </span><span class="s1">params: params,</span><span class="s3">\n        </span><span class="s1">query: query,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">parsedAs = destRes.parsedDestination</span><span class="s3">\n      </span><span class="s1">asPath = destRes.newUrl</span><span class="s3">\n      </span><span class="s1">Object.assign(query, destRes.parsedDestination.query)</span><span class="s3">\n\n      </span><span class="s1">fsPathname = removeTrailingSlash(</span><span class="s3">\n        </span><span class="s1">normalizeLocalePath(removeBasePath(asPath), locales).pathname</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (pages.includes(fsPathname)) {</span><span class="s3">\n        </span><span class="s1">// check if we now match a page as this means we are done</span><span class="s3">\n        </span><span class="s1">// resolving the rewrites</span><span class="s3">\n        </span><span class="s1">matchedPage = true</span><span class="s3">\n        </span><span class="s1">resolvedHref = fsPathname</span><span class="s3">\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// check if we match a dynamic-route, if so we break the rewrites chain</span><span class="s3">\n      </span><span class="s1">resolvedHref = resolveHref(fsPathname)</span><span class="s3">\n\n      </span><span class="s1">if (resolvedHref !== asPath &amp;&amp; pages.includes(resolvedHref)) {</span><span class="s3">\n        </span><span class="s1">matchedPage = true</span><span class="s3">\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">let finished = false</span><span class="s3">\n\n  </span><span class="s1">for (let i = 0; i &lt; rewrites.beforeFiles.length; i++) {</span><span class="s3">\n    </span><span class="s1">// we don't end after match in beforeFiles to allow</span><span class="s3">\n    </span><span class="s1">// continuing through all beforeFiles rewrites</span><span class="s3">\n    </span><span class="s1">handleRewrite(rewrites.beforeFiles[i])</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">matchedPage = pages.includes(fsPathname)</span><span class="s3">\n\n  </span><span class="s1">if (!matchedPage) {</span><span class="s3">\n    </span><span class="s1">if (!finished) {</span><span class="s3">\n      </span><span class="s1">for (let i = 0; i &lt; rewrites.afterFiles.length; i++) {</span><span class="s3">\n        </span><span class="s1">if (handleRewrite(rewrites.afterFiles[i])) {</span><span class="s3">\n          </span><span class="s1">finished = true</span><span class="s3">\n          </span><span class="s1">break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// check dynamic route before processing fallback rewrites</span><span class="s3">\n    </span><span class="s1">if (!finished) {</span><span class="s3">\n      </span><span class="s1">resolvedHref = resolveHref(fsPathname)</span><span class="s3">\n      </span><span class="s1">matchedPage = pages.includes(resolvedHref)</span><span class="s3">\n      </span><span class="s1">finished = matchedPage</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!finished) {</span><span class="s3">\n      </span><span class="s1">for (let i = 0; i &lt; rewrites.fallback.length; i++) {</span><span class="s3">\n        </span><span class="s1">if (handleRewrite(rewrites.fallback[i])) {</span><span class="s3">\n          </span><span class="s1">finished = true</span><span class="s3">\n          </span><span class="s1">break</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">asPath,</span><span class="s3">\n    </span><span class="s1">parsedAs,</span><span class="s3">\n    </span><span class="s1">matchedPage,</span><span class="s3">\n    </span><span class="s1">resolvedHref,</span><span class="s3">\n    </span><span class="s1">externalDest,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;resolveRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;asPath&quot;</span><span class="s0">,</span><span class="s1">&quot;pages&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveHref&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;matchedPage&quot;</span><span class="s0">,</span><span class="s1">&quot;externalDest&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedAs&quot;</span><span class="s0">,</span><span class="s1">&quot;parseRelativeUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;fsPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;removeBasePath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedHref&quot;</span><span class="s0">,</span><span class="s1">&quot;handleRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;matcher&quot;</span><span class="s0">,</span><span class="s1">&quot;getPathMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;source&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_TRAILING_SLASH&quot;</span><span class="s0">,</span><span class="s1">&quot;removeUnnamedParams&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;missing&quot;</span><span class="s0">,</span><span class="s1">&quot;hasParams&quot;</span><span class="s0">,</span><span class="s1">&quot;matchHas&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;host&quot;</span><span class="s0">,</span><span class="s1">&quot;document&quot;</span><span class="s0">,</span><span class="s1">&quot;location&quot;</span><span class="s0">,</span><span class="s1">&quot;hostname&quot;</span><span class="s0">,</span><span class="s1">&quot;navigator&quot;</span><span class="s0">,</span><span class="s1">&quot;userAgent&quot;</span><span class="s0">,</span><span class="s1">&quot;cookies&quot;</span><span class="s0">,</span><span class="s1">&quot;cookie&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;destination&quot;</span><span class="s0">,</span><span class="s1">&quot;destRes&quot;</span><span class="s0">,</span><span class="s1">&quot;prepareDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;appendParamsToQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedDestination&quot;</span><span class="s0">,</span><span class="s1">&quot;newUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;finished&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>