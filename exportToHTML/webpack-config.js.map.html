<html>
<head>
<title>webpack-config.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
webpack-config.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/build/webpack-config.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import React from 'react'</span><span class="s3">\n</span><span class="s1">import ReactRefreshWebpackPlugin from 'next/dist/compiled/@next/react-refresh-utils/dist/ReactRefreshWebpackPlugin'</span><span class="s3">\n</span><span class="s1">import { yellow, bold } from '../lib/picocolors'</span><span class="s3">\n</span><span class="s1">import crypto from 'crypto'</span><span class="s3">\n</span><span class="s1">import { webpack } from 'next/dist/compiled/webpack/webpack'</span><span class="s3">\n</span><span class="s1">import path from 'path'</span><span class="s3">\n\n</span><span class="s1">import { getDefineEnv } from './define-env'</span><span class="s3">\n</span><span class="s1">import { escapeStringRegexp } from '../shared/lib/escape-regexp'</span><span class="s3">\n</span><span class="s1">import { WEBPACK_LAYERS, WEBPACK_RESOURCE_QUERIES } from '../lib/constants'</span><span class="s3">\n</span><span class="s1">import type { WebpackLayerName } from '../lib/constants'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">isWebpackBundledLayer,</span><span class="s3">\n  </span><span class="s1">isWebpackClientOnlyLayer,</span><span class="s3">\n  </span><span class="s1">shouldUseReactServerCondition,</span><span class="s3">\n  </span><span class="s1">isWebpackDefaultLayer,</span><span class="s3">\n  </span><span class="s1">RSPACK_DEFAULT_LAYERS_REGEX,</span><span class="s3">\n</span><span class="s1">} from './utils'</span><span class="s3">\n</span><span class="s1">import type { CustomRoutes } from '../lib/load-custom-routes.js'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_AMP,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_MAIN,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,</span><span class="s3">\n  </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_WEBPACK,</span><span class="s3">\n  </span><span class="s1">MIDDLEWARE_REACT_LOADABLE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">REACT_LOADABLE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">SERVER_DIRECTORY,</span><span class="s3">\n  </span><span class="s1">COMPILER_NAMES,</span><span class="s3">\n</span><span class="s1">} from '../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import type { CompilerNameValues } from '../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { execOnce } from '../shared/lib/utils'</span><span class="s3">\n</span><span class="s1">import type { NextConfigComplete } from '../server/config-shared'</span><span class="s3">\n</span><span class="s1">import { finalizeEntrypoint } from './entries'</span><span class="s3">\n</span><span class="s1">import * as Log from './output/log'</span><span class="s3">\n</span><span class="s1">import { buildConfiguration } from './webpack/config'</span><span class="s3">\n</span><span class="s1">import MiddlewarePlugin, {</span><span class="s3">\n  </span><span class="s1">getEdgePolyfilledModules,</span><span class="s3">\n  </span><span class="s1">handleWebpackExternalForEdgeRuntime,</span><span class="s3">\n</span><span class="s1">} from './webpack/plugins/middleware-plugin'</span><span class="s3">\n</span><span class="s1">import BuildManifestPlugin from './webpack/plugins/build-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { JsConfigPathsPlugin } from './webpack/plugins/jsconfig-paths-plugin'</span><span class="s3">\n</span><span class="s1">import { DropClientPage } from './webpack/plugins/next-drop-client-page-plugin'</span><span class="s3">\n</span><span class="s1">import PagesManifestPlugin from './webpack/plugins/pages-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { ProfilingPlugin } from './webpack/plugins/profiling-plugin'</span><span class="s3">\n</span><span class="s1">import { ReactLoadablePlugin } from './webpack/plugins/react-loadable-plugin'</span><span class="s3">\n</span><span class="s1">import { WellKnownErrorsPlugin } from './webpack/plugins/wellknown-errors-plugin'</span><span class="s3">\n</span><span class="s1">import { regexLikeCss } from './webpack/config/blocks/css'</span><span class="s3">\n</span><span class="s1">import { CopyFilePlugin } from './webpack/plugins/copy-file-plugin'</span><span class="s3">\n</span><span class="s1">import { ClientReferenceManifestPlugin } from './webpack/plugins/flight-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { FlightClientEntryPlugin as NextFlightClientEntryPlugin } from './webpack/plugins/flight-client-entry-plugin'</span><span class="s3">\n</span><span class="s1">import { RspackFlightClientEntryPlugin } from './webpack/plugins/rspack-flight-client-entry-plugin'</span><span class="s3">\n</span><span class="s1">import { NextTypesPlugin } from './webpack/plugins/next-types-plugin'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">Feature,</span><span class="s3">\n  </span><span class="s1">SWC_TARGET_TRIPLE,</span><span class="s3">\n</span><span class="s1">} from './webpack/plugins/telemetry-plugin/telemetry-plugin'</span><span class="s3">\n</span><span class="s1">import type { Span } from '../trace'</span><span class="s3">\n</span><span class="s1">import type { MiddlewareMatcher } from './analysis/get-page-static-info'</span><span class="s3">\n</span><span class="s1">import loadJsConfig, {</span><span class="s3">\n  </span><span class="s1">type JsConfig,</span><span class="s3">\n  </span><span class="s1">type ResolvedBaseUrl,</span><span class="s3">\n</span><span class="s1">} from './load-jsconfig'</span><span class="s3">\n</span><span class="s1">import { loadBindings } from './swc'</span><span class="s3">\n</span><span class="s1">import { AppBuildManifestPlugin } from './webpack/plugins/app-build-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { SubresourceIntegrityPlugin } from './webpack/plugins/subresource-integrity-plugin'</span><span class="s3">\n</span><span class="s1">import { NextFontManifestPlugin } from './webpack/plugins/next-font-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { getSupportedBrowsers } from './utils'</span><span class="s3">\n</span><span class="s1">import { MemoryWithGcCachePlugin } from './webpack/plugins/memory-with-gc-cache-plugin'</span><span class="s3">\n</span><span class="s1">import { getBabelConfigFile } from './get-babel-config-file'</span><span class="s3">\n</span><span class="s1">import { needsExperimentalReact } from '../lib/needs-experimental-react'</span><span class="s3">\n</span><span class="s1">import type { SWCLoaderOptions } from './webpack/loaders/next-swc-loader'</span><span class="s3">\n</span><span class="s1">import { isResourceInPackages, makeExternalHandler } from './handle-externals'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getMainField,</span><span class="s3">\n  </span><span class="s1">edgeConditionNames,</span><span class="s3">\n</span><span class="s1">} from './webpack-config-rules/resolve'</span><span class="s3">\n</span><span class="s1">import { OptionalPeerDependencyResolverPlugin } from './webpack/plugins/optional-peer-dependency-resolve-plugin'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">createWebpackAliases,</span><span class="s3">\n  </span><span class="s1">createServerOnlyClientOnlyAliases,</span><span class="s3">\n  </span><span class="s1">createVendoredReactAliases,</span><span class="s3">\n  </span><span class="s1">createNextApiEsmAliases,</span><span class="s3">\n  </span><span class="s1">createAppRouterApiAliases,</span><span class="s3">\n</span><span class="s1">} from './create-compiler-aliases'</span><span class="s3">\n</span><span class="s1">import { hasCustomExportOutput } from '../export/utils'</span><span class="s3">\n</span><span class="s1">import { CssChunkingPlugin } from './webpack/plugins/css-chunking-plugin'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">getBabelLoader,</span><span class="s3">\n  </span><span class="s1">getReactCompilerLoader,</span><span class="s3">\n</span><span class="s1">} from './get-babel-loader-config'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NEXT_PROJECT_ROOT,</span><span class="s3">\n  </span><span class="s1">NEXT_PROJECT_ROOT_DIST_CLIENT,</span><span class="s3">\n</span><span class="s1">} from './next-dir-paths'</span><span class="s3">\n</span><span class="s1">import { getRspackCore, getRspackReactRefresh } from '../shared/lib/get-rspack'</span><span class="s3">\n</span><span class="s1">import { RspackProfilingPlugin } from './webpack/plugins/rspack-profiling-plugin'</span><span class="s3">\n</span><span class="s1">import getWebpackBundler from '../shared/lib/get-webpack-bundler'</span><span class="s3">\n</span><span class="s1">import type { NextBuildContext } from './build-context'</span><span class="s3">\n</span><span class="s1">import type { RootParamsLoaderOpts } from './webpack/loaders/next-root-params-loader'</span><span class="s3">\n</span><span class="s1">import type { InvalidImportLoaderOpts } from './webpack/loaders/next-invalid-import-error-loader'</span><span class="s3">\n\n</span><span class="s1">type ExcludesFalse = &lt;T&gt;(x: T | false) =&gt; x is T</span><span class="s3">\n</span><span class="s1">type ClientEntries = {</span><span class="s3">\n  </span><span class="s1">[key: string]: string | string[]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const EXTERNAL_PACKAGES =</span><span class="s3">\n  </span><span class="s1">require('../lib/server-external-packages.json') as string[]</span><span class="s3">\n\n</span><span class="s1">const DEFAULT_TRANSPILED_PACKAGES =</span><span class="s3">\n  </span><span class="s1">require('../lib/default-transpiled-packages.json') as string[]</span><span class="s3">\n\n</span><span class="s1">if (parseInt(React.version) &lt; 18) {</span><span class="s3">\n  </span><span class="s1">throw new Error('Next.js requires react &gt;= 18.2.0 to be installed.')</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const babelIncludeRegexes: RegExp[] = [</span><span class="s3">\n  </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?shared[</span><span class="s3">\\\\</span><span class="s1">/]lib/,</span><span class="s3">\n  </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?client/,</span><span class="s3">\n  </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?pages/,</span><span class="s3">\n  </span><span class="s1">/[</span><span class="s3">\\\\</span><span class="s1">/](strip-ansi|ansi-regex|styled-jsx)[</span><span class="s3">\\\\</span><span class="s1">/]/,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n\n</span><span class="s1">const browserNonTranspileModules = [</span><span class="s3">\n  </span><span class="s1">// Transpiling `process/browser` will trigger babel compilation error due to value replacement.</span><span class="s3">\n  </span><span class="s1">// TypeError: Property left of AssignmentExpression expected node to be of a type [</span><span class="s3">\&quot;</span><span class="s1">LVal</span><span class="s3">\&quot;</span><span class="s1">] but instead got </span><span class="s3">\&quot;</span><span class="s1">BooleanLiteral</span><span class="s3">\&quot;\n  </span><span class="s1">// e.g. `process.browser = true` will become `true = true`.</span><span class="s3">\n  </span><span class="s1">/[</span><span class="s3">\\\\</span><span class="s1">/]node_modules[</span><span class="s3">\\\\</span><span class="s1">/]process[</span><span class="s3">\\\\</span><span class="s1">/]browser/,</span><span class="s3">\n  </span><span class="s1">// Exclude precompiled react packages from browser compilation due to SWC helper insertion (#61791),</span><span class="s3">\n  </span><span class="s1">// We fixed the issue but it's safer to exclude them from compilation since they don't need to be re-compiled.</span><span class="s3">\n  </span><span class="s1">/[</span><span class="s3">\\\\</span><span class="s1">/]next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]compiled[</span><span class="s3">\\\\</span><span class="s1">/](react|react-dom|react-server-dom-webpack)(-experimental)?($|[</span><span class="s3">\\\\</span><span class="s1">/])/,</span><span class="s3">\n</span><span class="s1">]</span><span class="s3">\n</span><span class="s1">const precompileRegex = /[</span><span class="s3">\\\\</span><span class="s1">/]next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]compiled[</span><span class="s3">\\\\</span><span class="s1">/]/</span><span class="s3">\n\n</span><span class="s1">const asyncStoragesRegex =</span><span class="s3">\n  </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?server[</span><span class="s3">\\\\</span><span class="s1">/]app-render[</span><span class="s3">\\\\</span><span class="s1">/](work-async-storage|action-async-storage|dynamic-access-async-storage|work-unit-async-storage)/</span><span class="s3">\n\n</span><span class="s1">// Support for NODE_PATH</span><span class="s3">\n</span><span class="s1">const nodePathList = (process.env.NODE_PATH || '')</span><span class="s3">\n  </span><span class="s1">.split(process.platform === 'win32' ? ';' : ':')</span><span class="s3">\n  </span><span class="s1">.filter((p) =&gt; !!p)</span><span class="s3">\n\n</span><span class="s1">const baseWatchOptions: webpack.Configuration['watchOptions'] = Object.freeze({</span><span class="s3">\n  </span><span class="s1">aggregateTimeout: 5,</span><span class="s3">\n  </span><span class="s1">ignored:</span><span class="s3">\n    </span><span class="s1">// Matches **/node_modules/**, **/.git/** and **/.next/**</span><span class="s3">\n    </span><span class="s1">/^((?:[^/]*(?:</span><span class="s3">\\</span><span class="s1">/|$))*)(</span><span class="s3">\\</span><span class="s1">.(git|next)|node_modules)(</span><span class="s3">\\</span><span class="s1">/((?:[^/]*(?:</span><span class="s3">\\</span><span class="s1">/|$))*)(?:$|</span><span class="s3">\\</span><span class="s1">/))?/,</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">function isModuleCSS(module: { type: string }) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">// mini-css-extract-plugin</span><span class="s3">\n    </span><span class="s1">module.type === `css/mini-extract` ||</span><span class="s3">\n    </span><span class="s1">// extract-css-chunks-webpack-plugin (old)</span><span class="s3">\n    </span><span class="s1">module.type === `css/extract-chunks` ||</span><span class="s3">\n    </span><span class="s1">// extract-css-chunks-webpack-plugin (new)</span><span class="s3">\n    </span><span class="s1">module.type === `css/extract-css-chunks`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const devtoolRevertWarning = execOnce(</span><span class="s3">\n  </span><span class="s1">(devtool: webpack.Configuration['devtool']) =&gt; {</span><span class="s3">\n    </span><span class="s1">console.warn(</span><span class="s3">\n      </span><span class="s1">yellow(bold('Warning: ')) +</span><span class="s3">\n        </span><span class="s1">bold(`Reverting webpack devtool to '${devtool}'.</span><span class="s3">\\</span><span class="s1">n`) +</span><span class="s3">\n        </span><span class="s1">'Changing the webpack devtool in development mode will cause severe performance regressions.</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n        </span><span class="s1">'Read more: https://nextjs.org/docs/messages/improper-devtool'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">let loggedSwcDisabled = false</span><span class="s3">\n</span><span class="s1">let loggedIgnoredCompilerOptions = false</span><span class="s3">\n</span><span class="s1">const reactRefreshLoaderName =</span><span class="s3">\n  </span><span class="s1">'next/dist/compiled/@next/react-refresh-utils/dist/loader'</span><span class="s3">\n\n</span><span class="s1">function getReactRefreshLoader() {</span><span class="s3">\n  </span><span class="s1">return process.env.NEXT_RSPACK</span><span class="s3">\n    </span><span class="s1">? getRspackReactRefresh().loader</span><span class="s3">\n    </span><span class="s1">: require.resolve(reactRefreshLoaderName)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function attachReactRefresh(</span><span class="s3">\n  </span><span class="s1">webpackConfig: webpack.Configuration,</span><span class="s3">\n  </span><span class="s1">targetLoader: webpack.RuleSetUseItem</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const reactRefreshLoader = getReactRefreshLoader()</span><span class="s3">\n  </span><span class="s1">webpackConfig.module?.rules?.forEach((rule) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (rule &amp;&amp; typeof rule === 'object' &amp;&amp; 'use' in rule) {</span><span class="s3">\n      </span><span class="s1">const curr = rule.use</span><span class="s3">\n      </span><span class="s1">// When the user has configured `defaultLoaders.babel` for a input file:</span><span class="s3">\n      </span><span class="s1">if (curr === targetLoader) {</span><span class="s3">\n        </span><span class="s1">rule.use = [reactRefreshLoader, curr as webpack.RuleSetUseItem]</span><span class="s3">\n      </span><span class="s1">} else if (</span><span class="s3">\n        </span><span class="s1">Array.isArray(curr) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">curr.some((r) =&gt; r === targetLoader) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">// Check if loader already exists:</span><span class="s3">\n        </span><span class="s1">!curr.some(</span><span class="s3">\n          </span><span class="s1">(r) =&gt; r === reactRefreshLoader || r === reactRefreshLoaderName</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">const idx = curr.findIndex((r) =&gt; r === targetLoader)</span><span class="s3">\n        </span><span class="s1">// Clone to not mutate user input</span><span class="s3">\n        </span><span class="s1">rule.use = [...curr]</span><span class="s3">\n\n        </span><span class="s1">// inject / input: [other, babel] output: [other, refresh, babel]:</span><span class="s3">\n        </span><span class="s1">rule.use.splice(idx, 0, reactRefreshLoader)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const NODE_RESOLVE_OPTIONS = {</span><span class="s3">\n  </span><span class="s1">dependencyType: 'commonjs',</span><span class="s3">\n  </span><span class="s1">modules: ['node_modules'],</span><span class="s3">\n  </span><span class="s1">fallback: false,</span><span class="s3">\n  </span><span class="s1">exportsFields: ['exports'],</span><span class="s3">\n  </span><span class="s1">importsFields: ['imports'],</span><span class="s3">\n  </span><span class="s1">conditionNames: ['node', 'require'],</span><span class="s3">\n  </span><span class="s1">descriptionFiles: ['package.json'],</span><span class="s3">\n  </span><span class="s1">extensions: ['.js', '.json', '.node'],</span><span class="s3">\n  </span><span class="s1">enforceExtensions: false,</span><span class="s3">\n  </span><span class="s1">symlinks: true,</span><span class="s3">\n  </span><span class="s1">mainFields: ['main'],</span><span class="s3">\n  </span><span class="s1">mainFiles: ['index'],</span><span class="s3">\n  </span><span class="s1">roots: [],</span><span class="s3">\n  </span><span class="s1">fullySpecified: false,</span><span class="s3">\n  </span><span class="s1">preferRelative: false,</span><span class="s3">\n  </span><span class="s1">preferAbsolute: false,</span><span class="s3">\n  </span><span class="s1">restrictions: [],</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const NODE_BASE_RESOLVE_OPTIONS = {</span><span class="s3">\n  </span><span class="s1">...NODE_RESOLVE_OPTIONS,</span><span class="s3">\n  </span><span class="s1">alias: false,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const NODE_ESM_RESOLVE_OPTIONS = {</span><span class="s3">\n  </span><span class="s1">...NODE_RESOLVE_OPTIONS,</span><span class="s3">\n  </span><span class="s1">alias: false,</span><span class="s3">\n  </span><span class="s1">dependencyType: 'esm',</span><span class="s3">\n  </span><span class="s1">conditionNames: ['node', 'import'],</span><span class="s3">\n  </span><span class="s1">fullySpecified: true,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const NODE_BASE_ESM_RESOLVE_OPTIONS = {</span><span class="s3">\n  </span><span class="s1">...NODE_ESM_RESOLVE_OPTIONS,</span><span class="s3">\n  </span><span class="s1">alias: false,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const nextImageLoaderRegex =</span><span class="s3">\n  </span><span class="s1">/</span><span class="s3">\\</span><span class="s1">.(png|jpg|jpeg|gif|webp|avif|ico|bmp|svg)$/i</span><span class="s3">\n\n</span><span class="s1">export async function loadProjectInfo({</span><span class="s3">\n  </span><span class="s1">dir,</span><span class="s3">\n  </span><span class="s1">config,</span><span class="s3">\n  </span><span class="s1">dev,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">dir: string</span><span class="s3">\n  </span><span class="s1">config: NextConfigComplete</span><span class="s3">\n  </span><span class="s1">dev: boolean</span><span class="s3">\n</span><span class="s1">}): Promise&lt;{</span><span class="s3">\n  </span><span class="s1">jsConfig: JsConfig</span><span class="s3">\n  </span><span class="s1">jsConfigPath?: string</span><span class="s3">\n  </span><span class="s1">resolvedBaseUrl: ResolvedBaseUrl</span><span class="s3">\n  </span><span class="s1">supportedBrowsers: string[] | undefined</span><span class="s3">\n</span><span class="s1">}&gt; {</span><span class="s3">\n  </span><span class="s1">const { jsConfig, jsConfigPath, resolvedBaseUrl } = await loadJsConfig(</span><span class="s3">\n    </span><span class="s1">dir,</span><span class="s3">\n    </span><span class="s1">config</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">const supportedBrowsers = getSupportedBrowsers(dir, dev)</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">jsConfig,</span><span class="s3">\n    </span><span class="s1">jsConfigPath,</span><span class="s3">\n    </span><span class="s1">resolvedBaseUrl,</span><span class="s3">\n    </span><span class="s1">supportedBrowsers,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function hasExternalOtelApiPackage(): boolean {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">require('@opentelemetry/api') as typeof import('@opentelemetry/api')</span><span class="s3">\n    </span><span class="s1">return true</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const UNSAFE_CACHE_REGEX = /[</span><span class="s3">\\\\</span><span class="s1">/]pages[</span><span class="s3">\\\\</span><span class="s1">/][^</span><span class="s3">\\\\</span><span class="s1">/]+(?:$|</span><span class="s3">\\</span><span class="s1">?|#)/</span><span class="s3">\n\n</span><span class="s1">export function getCacheDirectories(</span><span class="s3">\n  </span><span class="s1">configs: webpack.Configuration[]</span><span class="s3">\n</span><span class="s1">): Set&lt;string&gt; {</span><span class="s3">\n  </span><span class="s1">return new Set(</span><span class="s3">\n    </span><span class="s1">configs</span><span class="s3">\n      </span><span class="s1">.map((cfg) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (typeof cfg.cache === 'object' &amp;&amp; cfg.cache.type === 'filesystem') {</span><span class="s3">\n          </span><span class="s1">return cfg.cache.cacheDirectory</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return null</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">.filter((dir) =&gt; dir != null)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default async function getBaseWebpackConfig(</span><span class="s3">\n  </span><span class="s1">dir: string,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">buildId,</span><span class="s3">\n    </span><span class="s1">encryptionKey,</span><span class="s3">\n    </span><span class="s1">config,</span><span class="s3">\n    </span><span class="s1">compilerType,</span><span class="s3">\n    </span><span class="s1">dev = false,</span><span class="s3">\n    </span><span class="s1">entrypoints,</span><span class="s3">\n    </span><span class="s1">isDevFallback = false,</span><span class="s3">\n    </span><span class="s1">pagesDir,</span><span class="s3">\n    </span><span class="s1">reactProductionProfiling = false,</span><span class="s3">\n    </span><span class="s1">rewrites,</span><span class="s3">\n    </span><span class="s1">originalRewrites,</span><span class="s3">\n    </span><span class="s1">originalRedirects,</span><span class="s3">\n    </span><span class="s1">runWebpackSpan,</span><span class="s3">\n    </span><span class="s1">appDir,</span><span class="s3">\n    </span><span class="s1">middlewareMatchers,</span><span class="s3">\n    </span><span class="s1">noMangling,</span><span class="s3">\n    </span><span class="s1">jsConfig,</span><span class="s3">\n    </span><span class="s1">jsConfigPath,</span><span class="s3">\n    </span><span class="s1">resolvedBaseUrl,</span><span class="s3">\n    </span><span class="s1">supportedBrowsers,</span><span class="s3">\n    </span><span class="s1">clientRouterFilters,</span><span class="s3">\n    </span><span class="s1">fetchCacheKeyPrefix,</span><span class="s3">\n    </span><span class="s1">isCompileMode,</span><span class="s3">\n    </span><span class="s1">previewProps,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">previewProps: NonNullable&lt;(typeof NextBuildContext)['previewProps']&gt;</span><span class="s3">\n    </span><span class="s1">isCompileMode?: boolean</span><span class="s3">\n    </span><span class="s1">buildId: string</span><span class="s3">\n    </span><span class="s1">encryptionKey: string</span><span class="s3">\n    </span><span class="s1">config: NextConfigComplete</span><span class="s3">\n    </span><span class="s1">compilerType: CompilerNameValues</span><span class="s3">\n    </span><span class="s1">dev?: boolean</span><span class="s3">\n    </span><span class="s1">entrypoints: webpack.EntryObject</span><span class="s3">\n    </span><span class="s1">isDevFallback?: boolean</span><span class="s3">\n    </span><span class="s1">pagesDir: string | undefined</span><span class="s3">\n    </span><span class="s1">reactProductionProfiling?: boolean</span><span class="s3">\n    </span><span class="s1">rewrites: CustomRoutes['rewrites']</span><span class="s3">\n    </span><span class="s1">originalRewrites: CustomRoutes['rewrites'] | undefined</span><span class="s3">\n    </span><span class="s1">originalRedirects: CustomRoutes['redirects'] | undefined</span><span class="s3">\n    </span><span class="s1">runWebpackSpan: Span</span><span class="s3">\n    </span><span class="s1">appDir: string | undefined</span><span class="s3">\n    </span><span class="s1">middlewareMatchers?: MiddlewareMatcher[]</span><span class="s3">\n    </span><span class="s1">noMangling?: boolean</span><span class="s3">\n    </span><span class="s1">jsConfig: any</span><span class="s3">\n    </span><span class="s1">jsConfigPath?: string</span><span class="s3">\n    </span><span class="s1">resolvedBaseUrl: ResolvedBaseUrl</span><span class="s3">\n    </span><span class="s1">supportedBrowsers: string[] | undefined</span><span class="s3">\n    </span><span class="s1">clientRouterFilters?: {</span><span class="s3">\n      </span><span class="s1">staticFilter: ReturnType&lt;</span><span class="s3">\n        </span><span class="s1">import('../shared/lib/bloom-filter').BloomFilter['export']</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n      </span><span class="s1">dynamicFilter: ReturnType&lt;</span><span class="s3">\n        </span><span class="s1">import('../shared/lib/bloom-filter').BloomFilter['export']</span><span class="s3">\n      </span><span class="s1">&gt;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">fetchCacheKeyPrefix?: string</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">): Promise&lt;webpack.Configuration&gt; {</span><span class="s3">\n  </span><span class="s1">const bundler = getWebpackBundler()</span><span class="s3">\n  </span><span class="s1">const isClient = compilerType === COMPILER_NAMES.client</span><span class="s3">\n  </span><span class="s1">const isEdgeServer = compilerType === COMPILER_NAMES.edgeServer</span><span class="s3">\n  </span><span class="s1">const isNodeServer = compilerType === COMPILER_NAMES.server</span><span class="s3">\n\n  </span><span class="s1">const isRspack = Boolean(process.env.NEXT_RSPACK)</span><span class="s3">\n\n  </span><span class="s1">const FlightClientEntryPlugin =</span><span class="s3">\n    </span><span class="s1">isRspack &amp;&amp; process.env.BUILTIN_FLIGHT_CLIENT_ENTRY_PLUGIN</span><span class="s3">\n      </span><span class="s1">? RspackFlightClientEntryPlugin</span><span class="s3">\n      </span><span class="s1">: NextFlightClientEntryPlugin</span><span class="s3">\n\n  </span><span class="s1">// If the current compilation is aimed at server-side code instead of client-side code.</span><span class="s3">\n  </span><span class="s1">const isNodeOrEdgeCompilation = isNodeServer || isEdgeServer</span><span class="s3">\n\n  </span><span class="s1">const hasRewrites =</span><span class="s3">\n    </span><span class="s1">rewrites.beforeFiles.length &gt; 0 ||</span><span class="s3">\n    </span><span class="s1">rewrites.afterFiles.length &gt; 0 ||</span><span class="s3">\n    </span><span class="s1">rewrites.fallback.length &gt; 0</span><span class="s3">\n\n  </span><span class="s1">const hasAppDir = !!appDir</span><span class="s3">\n  </span><span class="s1">const disableOptimizedLoading = true</span><span class="s3">\n  </span><span class="s1">const bundledReactChannel = needsExperimentalReact(config)</span><span class="s3">\n    </span><span class="s1">? '-experimental'</span><span class="s3">\n    </span><span class="s1">: ''</span><span class="s3">\n\n  </span><span class="s1">const babelConfigFile = getBabelConfigFile(dir)</span><span class="s3">\n\n  </span><span class="s1">if (!dev &amp;&amp; hasCustomExportOutput(config)) {</span><span class="s3">\n    </span><span class="s1">config.distDir = '.next'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const distDir = path.join(dir, config.distDir)</span><span class="s3">\n\n  </span><span class="s1">let useSWCLoader = !babelConfigFile || config.experimental.forceSwcTransforms</span><span class="s3">\n  </span><span class="s1">let SWCBinaryTarget: [Feature, boolean] | undefined = undefined</span><span class="s3">\n  </span><span class="s1">if (useSWCLoader) {</span><span class="s3">\n    </span><span class="s1">// TODO: we do not collect wasm target yet</span><span class="s3">\n    </span><span class="s1">const binaryTarget = (</span><span class="s3">\n      </span><span class="s1">require('./swc') as typeof import('./swc')</span><span class="s3">\n    </span><span class="s1">)?.getBinaryMetadata?.()?.target as SWC_TARGET_TRIPLE</span><span class="s3">\n    </span><span class="s1">SWCBinaryTarget = binaryTarget</span><span class="s3">\n      </span><span class="s1">? [`swc/target/${binaryTarget}` as const, true]</span><span class="s3">\n      </span><span class="s1">: undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!loggedSwcDisabled &amp;&amp; !useSWCLoader &amp;&amp; babelConfigFile) {</span><span class="s3">\n    </span><span class="s1">Log.info(</span><span class="s3">\n      </span><span class="s1">`Disabled SWC as replacement for Babel because of custom Babel configuration </span><span class="s3">\&quot;</span><span class="s1">${path.relative(</span><span class="s3">\n        </span><span class="s1">dir,</span><span class="s3">\n        </span><span class="s1">babelConfigFile</span><span class="s3">\n      </span><span class="s1">)}</span><span class="s3">\&quot; </span><span class="s1">https://nextjs.org/docs/messages/swc-disabled`</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">loggedSwcDisabled = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// eagerly load swc bindings instead of waiting for transform calls</span><span class="s3">\n  </span><span class="s1">if (!babelConfigFile &amp;&amp; isClient) {</span><span class="s3">\n    </span><span class="s1">await loadBindings(config.experimental.useWasmBinary)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// since `pages` doesn't always bundle by default we need to</span><span class="s3">\n  </span><span class="s1">// auto-include optimizePackageImports in transpilePackages</span><span class="s3">\n  </span><span class="s1">const finalTranspilePackages: string[] = (</span><span class="s3">\n    </span><span class="s1">config.transpilePackages || []</span><span class="s3">\n  </span><span class="s1">).concat(DEFAULT_TRANSPILED_PACKAGES)</span><span class="s3">\n\n  </span><span class="s1">for (const pkg of config.experimental.optimizePackageImports || []) {</span><span class="s3">\n    </span><span class="s1">if (!finalTranspilePackages.includes(pkg)) {</span><span class="s3">\n      </span><span class="s1">finalTranspilePackages.push(pkg)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!loggedIgnoredCompilerOptions &amp;&amp; !useSWCLoader &amp;&amp; config.compiler) {</span><span class="s3">\n    </span><span class="s1">Log.info(</span><span class="s3">\n      </span><span class="s1">'`compiler` options in `next.config.js` will be ignored while using Babel https://nextjs.org/docs/messages/ignored-compiler-options'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">loggedIgnoredCompilerOptions = true</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const excludeCache: Record&lt;string, boolean&gt; = {}</span><span class="s3">\n  </span><span class="s1">function exclude(excludePath: string): boolean {</span><span class="s3">\n    </span><span class="s1">const cached = excludeCache[excludePath]</span><span class="s3">\n    </span><span class="s1">if (cached !== undefined) {</span><span class="s3">\n      </span><span class="s1">return cached</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const shouldExclude =</span><span class="s3">\n      </span><span class="s1">excludePath.includes('node_modules') &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!babelIncludeRegexes.some((r) =&gt; r.test(excludePath)) &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!isResourceInPackages(excludePath, finalTranspilePackages)</span><span class="s3">\n\n    </span><span class="s1">excludeCache[excludePath] = shouldExclude</span><span class="s3">\n    </span><span class="s1">return shouldExclude</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const shouldIncludeExternalDirs =</span><span class="s3">\n    </span><span class="s1">config.experimental.externalDir || !!config.transpilePackages</span><span class="s3">\n  </span><span class="s1">const codeCondition = {</span><span class="s3">\n    </span><span class="s1">test: { or: [/</span><span class="s3">\\</span><span class="s1">.(tsx|ts|js|cjs|mjs|jsx)$/, /__barrel_optimize__/] },</span><span class="s3">\n    </span><span class="s1">...(shouldIncludeExternalDirs</span><span class="s3">\n      </span><span class="s1">? // Allowing importing TS/TSX files from outside of the root dir.</span><span class="s3">\n        </span><span class="s1">{}</span><span class="s3">\n      </span><span class="s1">: { include: [dir, ...babelIncludeRegexes] }),</span><span class="s3">\n    </span><span class="s1">exclude,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const babelLoader = getBabelLoader(</span><span class="s3">\n    </span><span class="s1">useSWCLoader,</span><span class="s3">\n    </span><span class="s1">babelConfigFile,</span><span class="s3">\n    </span><span class="s1">isNodeOrEdgeCompilation,</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n    </span><span class="s1">pagesDir,</span><span class="s3">\n    </span><span class="s1">dir,</span><span class="s3">\n    </span><span class="s1">(appDir || pagesDir)!,</span><span class="s3">\n    </span><span class="s1">dev,</span><span class="s3">\n    </span><span class="s1">isClient,</span><span class="s3">\n    </span><span class="s1">config.experimental?.reactCompiler,</span><span class="s3">\n    </span><span class="s1">codeCondition.exclude</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const reactCompilerLoader = babelLoader</span><span class="s3">\n    </span><span class="s1">? undefined</span><span class="s3">\n    </span><span class="s1">: getReactCompilerLoader(</span><span class="s3">\n        </span><span class="s1">config.experimental?.reactCompiler,</span><span class="s3">\n        </span><span class="s1">dir,</span><span class="s3">\n        </span><span class="s1">dev,</span><span class="s3">\n        </span><span class="s1">isNodeOrEdgeCompilation,</span><span class="s3">\n        </span><span class="s1">codeCondition.exclude</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let swcTraceProfilingInitialized = false</span><span class="s3">\n  </span><span class="s1">const getSwcLoader = (extraOptions: Partial&lt;SWCLoaderOptions&gt;) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">config?.experimental?.swcTraceProfiling &amp;&amp;</span><span class="s3">\n      </span><span class="s1">!swcTraceProfilingInitialized</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">// This will init subscribers once only in a single process lifecycle,</span><span class="s3">\n      </span><span class="s1">// even though it can be called multiple times.</span><span class="s3">\n      </span><span class="s1">// Subscriber need to be initialized _before_ any actual swc's call (transform, etcs)</span><span class="s3">\n      </span><span class="s1">// to collect correct trace spans when they are called.</span><span class="s3">\n      </span><span class="s1">swcTraceProfilingInitialized = true</span><span class="s3">\n      </span><span class="s1">;(</span><span class="s3">\n        </span><span class="s1">require('./swc') as typeof import('./swc')</span><span class="s3">\n      </span><span class="s1">)?.initCustomTraceSubscriber?.(</span><span class="s3">\n        </span><span class="s1">path.join(distDir, `swc-trace-profile-${Date.now()}.json`)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const useBuiltinSwcLoader = process.env.BUILTIN_SWC_LOADER</span><span class="s3">\n    </span><span class="s1">if (isRspack &amp;&amp; useBuiltinSwcLoader) {</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">loader: 'builtin:next-swc-loader',</span><span class="s3">\n        </span><span class="s1">options: {</span><span class="s3">\n          </span><span class="s1">isServer: isNodeOrEdgeCompilation,</span><span class="s3">\n          </span><span class="s1">rootDir: dir,</span><span class="s3">\n          </span><span class="s1">pagesDir,</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">hasReactRefresh: dev &amp;&amp; isClient,</span><span class="s3">\n          </span><span class="s1">transpilePackages: finalTranspilePackages,</span><span class="s3">\n          </span><span class="s1">supportedBrowsers,</span><span class="s3">\n          </span><span class="s1">swcCacheDir: path.join(</span><span class="s3">\n            </span><span class="s1">dir,</span><span class="s3">\n            </span><span class="s1">config?.distDir ?? '.next',</span><span class="s3">\n            </span><span class="s1">'cache',</span><span class="s3">\n            </span><span class="s1">'swc'</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">serverReferenceHashSalt: encryptionKey,</span><span class="s3">\n\n          </span><span class="s1">// rspack specific options</span><span class="s3">\n          </span><span class="s1">pnp: Boolean(process.versions.pnp),</span><span class="s3">\n          </span><span class="s1">optimizeServerReact: Boolean(config.experimental.optimizeServerReact),</span><span class="s3">\n          </span><span class="s1">modularizeImports: config.modularizeImports,</span><span class="s3">\n          </span><span class="s1">decorators: Boolean(</span><span class="s3">\n            </span><span class="s1">jsConfig?.compilerOptions?.experimentalDecorators</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">emitDecoratorMetadata: Boolean(</span><span class="s3">\n            </span><span class="s1">jsConfig?.compilerOptions?.emitDecoratorMetadata</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">regeneratorRuntimePath: require.resolve(</span><span class="s3">\n            </span><span class="s1">'next/dist/compiled/regenerator-runtime'</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n\n          </span><span class="s1">...extraOptions,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">loader: 'next-swc-loader',</span><span class="s3">\n      </span><span class="s1">options: {</span><span class="s3">\n        </span><span class="s1">isServer: isNodeOrEdgeCompilation,</span><span class="s3">\n        </span><span class="s1">compilerType,</span><span class="s3">\n        </span><span class="s1">rootDir: dir,</span><span class="s3">\n        </span><span class="s1">pagesDir,</span><span class="s3">\n        </span><span class="s1">appDir,</span><span class="s3">\n        </span><span class="s1">hasReactRefresh: dev &amp;&amp; isClient,</span><span class="s3">\n        </span><span class="s1">nextConfig: config,</span><span class="s3">\n        </span><span class="s1">jsConfig,</span><span class="s3">\n        </span><span class="s1">transpilePackages: finalTranspilePackages,</span><span class="s3">\n        </span><span class="s1">supportedBrowsers,</span><span class="s3">\n        </span><span class="s1">swcCacheDir: path.join(dir, config?.distDir ?? '.next', 'cache', 'swc'),</span><span class="s3">\n        </span><span class="s1">serverReferenceHashSalt: encryptionKey,</span><span class="s3">\n        </span><span class="s1">...extraOptions,</span><span class="s3">\n      </span><span class="s1">} satisfies SWCLoaderOptions,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// RSC loaders, prefer ESM, set `esm` to true</span><span class="s3">\n  </span><span class="s1">const swcServerLayerLoader = getSwcLoader({</span><span class="s3">\n    </span><span class="s1">serverComponents: true,</span><span class="s3">\n    </span><span class="s1">bundleLayer: WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n    </span><span class="s1">esm: true,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">const swcSSRLayerLoader = getSwcLoader({</span><span class="s3">\n    </span><span class="s1">serverComponents: true,</span><span class="s3">\n    </span><span class="s1">bundleLayer: WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n    </span><span class="s1">esm: true,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">const swcBrowserLayerLoader = getSwcLoader({</span><span class="s3">\n    </span><span class="s1">serverComponents: true,</span><span class="s3">\n    </span><span class="s1">bundleLayer: WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n    </span><span class="s1">esm: true,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">// Default swc loaders for pages doesn't prefer ESM.</span><span class="s3">\n  </span><span class="s1">const swcDefaultLoader = getSwcLoader({</span><span class="s3">\n    </span><span class="s1">serverComponents: true,</span><span class="s3">\n    </span><span class="s1">esm: false,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const defaultLoaders = {</span><span class="s3">\n    </span><span class="s1">babel: useSWCLoader ? swcDefaultLoader : babelLoader!,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const appServerLayerLoaders = hasAppDir</span><span class="s3">\n    </span><span class="s1">? [</span><span class="s3">\n        </span><span class="s1">// When using Babel, we will have to add the SWC loader</span><span class="s3">\n        </span><span class="s1">// as an additional pass to handle RSC correctly.</span><span class="s3">\n        </span><span class="s1">// This will cause some performance overhead but</span><span class="s3">\n        </span><span class="s1">// acceptable as Babel will not be recommended.</span><span class="s3">\n        </span><span class="s1">swcServerLayerLoader,</span><span class="s3">\n        </span><span class="s1">babelLoader,</span><span class="s3">\n        </span><span class="s1">reactCompilerLoader,</span><span class="s3">\n      </span><span class="s1">].filter(Boolean)</span><span class="s3">\n    </span><span class="s1">: []</span><span class="s3">\n\n  </span><span class="s1">const instrumentLayerLoaders = [</span><span class="s3">\n    </span><span class="s1">'next-flight-loader',</span><span class="s3">\n    </span><span class="s1">// When using Babel, we will have to add the SWC loader</span><span class="s3">\n    </span><span class="s1">// as an additional pass to handle RSC correctly.</span><span class="s3">\n    </span><span class="s1">// This will cause some performance overhead but</span><span class="s3">\n    </span><span class="s1">// acceptable as Babel will not be recommended.</span><span class="s3">\n    </span><span class="s1">swcServerLayerLoader,</span><span class="s3">\n    </span><span class="s1">babelLoader,</span><span class="s3">\n  </span><span class="s1">].filter(Boolean)</span><span class="s3">\n\n  </span><span class="s1">const middlewareLayerLoaders = [</span><span class="s3">\n    </span><span class="s1">'next-flight-loader',</span><span class="s3">\n    </span><span class="s1">// When using Babel, we will have to use SWC to do the optimization</span><span class="s3">\n    </span><span class="s1">// for middleware to tree shake the unused default optimized imports like </span><span class="s3">\&quot;</span><span class="s1">next/server</span><span class="s3">\&quot;</span><span class="s1">.</span><span class="s3">\n    </span><span class="s1">// This will cause some performance overhead but</span><span class="s3">\n    </span><span class="s1">// acceptable as Babel will not be recommended.</span><span class="s3">\n    </span><span class="s1">getSwcLoader({</span><span class="s3">\n      </span><span class="s1">serverComponents: true,</span><span class="s3">\n      </span><span class="s1">bundleLayer: WEBPACK_LAYERS.middleware,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">babelLoader,</span><span class="s3">\n  </span><span class="s1">].filter(Boolean)</span><span class="s3">\n\n  </span><span class="s1">const reactRefreshLoaders = dev &amp;&amp; isClient ? [getReactRefreshLoader()] : []</span><span class="s3">\n\n  </span><span class="s1">// client components layers: SSR or browser</span><span class="s3">\n  </span><span class="s1">const createClientLayerLoader = ({</span><span class="s3">\n    </span><span class="s1">isBrowserLayer,</span><span class="s3">\n    </span><span class="s1">reactRefresh,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">isBrowserLayer: boolean</span><span class="s3">\n    </span><span class="s1">reactRefresh: boolean</span><span class="s3">\n  </span><span class="s1">}) =&gt; [</span><span class="s3">\n    </span><span class="s1">...(reactRefresh ? reactRefreshLoaders : []),</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">// This loader handles actions and client entries</span><span class="s3">\n      </span><span class="s1">// in the client layer.</span><span class="s3">\n      </span><span class="s1">loader: 'next-flight-client-module-loader',</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">...(hasAppDir</span><span class="s3">\n      </span><span class="s1">? [</span><span class="s3">\n          </span><span class="s1">// When using Babel, we will have to add the SWC loader</span><span class="s3">\n          </span><span class="s1">// as an additional pass to handle RSC correctly.</span><span class="s3">\n          </span><span class="s1">// This will cause some performance overhead but</span><span class="s3">\n          </span><span class="s1">// acceptable as Babel will not be recommended.</span><span class="s3">\n          </span><span class="s1">isBrowserLayer ? swcBrowserLayerLoader : swcSSRLayerLoader,</span><span class="s3">\n          </span><span class="s1">babelLoader,</span><span class="s3">\n          </span><span class="s1">reactCompilerLoader,</span><span class="s3">\n        </span><span class="s1">].filter(Boolean)</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n\n  </span><span class="s1">const appBrowserLayerLoaders = createClientLayerLoader({</span><span class="s3">\n    </span><span class="s1">isBrowserLayer: true,</span><span class="s3">\n    </span><span class="s1">// reactRefresh for browser layer is applied conditionally to user-land source</span><span class="s3">\n    </span><span class="s1">reactRefresh: false,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">const appSSRLayerLoaders = createClientLayerLoader({</span><span class="s3">\n    </span><span class="s1">isBrowserLayer: false,</span><span class="s3">\n    </span><span class="s1">reactRefresh: true,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// Loader for API routes needs to be differently configured as it shouldn't</span><span class="s3">\n  </span><span class="s1">// have RSC transpiler enabled, so syntax checks such as invalid imports won't</span><span class="s3">\n  </span><span class="s1">// be performed.</span><span class="s3">\n  </span><span class="s1">const apiRoutesLayerLoaders = useSWCLoader</span><span class="s3">\n    </span><span class="s1">? getSwcLoader({</span><span class="s3">\n        </span><span class="s1">serverComponents: false,</span><span class="s3">\n        </span><span class="s1">bundleLayer: WEBPACK_LAYERS.apiNode,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">: defaultLoaders.babel</span><span class="s3">\n\n  </span><span class="s1">const pageExtensions = config.pageExtensions</span><span class="s3">\n\n  </span><span class="s1">const outputPath = isNodeOrEdgeCompilation</span><span class="s3">\n    </span><span class="s1">? path.join(distDir, SERVER_DIRECTORY)</span><span class="s3">\n    </span><span class="s1">: distDir</span><span class="s3">\n\n  </span><span class="s1">const reactServerCondition = [</span><span class="s3">\n    </span><span class="s1">'react-server',</span><span class="s3">\n    </span><span class="s1">...(isEdgeServer ? edgeConditionNames : []),</span><span class="s3">\n    </span><span class="s1">// inherits the default conditions</span><span class="s3">\n    </span><span class="s1">'...',</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n\n  </span><span class="s1">const reactRefreshEntry = isRspack</span><span class="s3">\n    </span><span class="s1">? getRspackReactRefresh().entry</span><span class="s3">\n    </span><span class="s1">: require.resolve(</span><span class="s3">\n        </span><span class="s1">`next/dist/compiled/@next/react-refresh-utils/dist/runtime`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const clientEntries = isClient</span><span class="s3">\n    </span><span class="s1">? ({</span><span class="s3">\n        </span><span class="s1">// Backwards compatibility</span><span class="s3">\n        </span><span class="s1">'main.js': [],</span><span class="s3">\n        </span><span class="s1">...(dev</span><span class="s3">\n          </span><span class="s1">? {</span><span class="s3">\n              </span><span class="s1">[CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]: reactRefreshEntry,</span><span class="s3">\n              </span><span class="s1">[CLIENT_STATIC_FILES_RUNTIME_AMP]:</span><span class="s3">\n                </span><span class="s1">`./` +</span><span class="s3">\n                </span><span class="s1">path</span><span class="s3">\n                  </span><span class="s1">.relative(</span><span class="s3">\n                    </span><span class="s1">dir,</span><span class="s3">\n                    </span><span class="s1">path.join(NEXT_PROJECT_ROOT_DIST_CLIENT, 'dev', 'amp-dev')</span><span class="s3">\n                  </span><span class="s1">)</span><span class="s3">\n                  </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/'),</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">: {}),</span><span class="s3">\n        </span><span class="s1">[CLIENT_STATIC_FILES_RUNTIME_MAIN]:</span><span class="s3">\n          </span><span class="s1">`./` +</span><span class="s3">\n          </span><span class="s1">path</span><span class="s3">\n            </span><span class="s1">.relative(</span><span class="s3">\n              </span><span class="s1">dir,</span><span class="s3">\n              </span><span class="s1">path.join(</span><span class="s3">\n                </span><span class="s1">NEXT_PROJECT_ROOT_DIST_CLIENT,</span><span class="s3">\n                </span><span class="s1">dev ? `next-dev.js` : 'next.js'</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/'),</span><span class="s3">\n        </span><span class="s1">...(hasAppDir</span><span class="s3">\n          </span><span class="s1">? {</span><span class="s3">\n              </span><span class="s1">[CLIENT_STATIC_FILES_RUNTIME_MAIN_APP]: dev</span><span class="s3">\n                </span><span class="s1">? [</span><span class="s3">\n                    </span><span class="s1">reactRefreshEntry,</span><span class="s3">\n                    </span><span class="s1">`./` +</span><span class="s3">\n                      </span><span class="s1">path</span><span class="s3">\n                        </span><span class="s1">.relative(</span><span class="s3">\n                          </span><span class="s1">dir,</span><span class="s3">\n                          </span><span class="s1">path.join(</span><span class="s3">\n                            </span><span class="s1">NEXT_PROJECT_ROOT_DIST_CLIENT,</span><span class="s3">\n                            </span><span class="s1">'app-next-dev.js'</span><span class="s3">\n                          </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/'),</span><span class="s3">\n                  </span><span class="s1">]</span><span class="s3">\n                </span><span class="s1">: [</span><span class="s3">\n                    </span><span class="s1">`./` +</span><span class="s3">\n                      </span><span class="s1">path</span><span class="s3">\n                        </span><span class="s1">.relative(</span><span class="s3">\n                          </span><span class="s1">dir,</span><span class="s3">\n                          </span><span class="s1">path.join(</span><span class="s3">\n                            </span><span class="s1">NEXT_PROJECT_ROOT_DIST_CLIENT,</span><span class="s3">\n                            </span><span class="s1">'app-next.js'</span><span class="s3">\n                          </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">)</span><span class="s3">\n                        </span><span class="s1">.replace(/</span><span class="s3">\\\\</span><span class="s1">/g, '/'),</span><span class="s3">\n                  </span><span class="s1">],</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">: {}),</span><span class="s3">\n      </span><span class="s1">} satisfies ClientEntries)</span><span class="s3">\n    </span><span class="s1">: undefined</span><span class="s3">\n\n  </span><span class="s1">const resolveConfig: webpack.Configuration['resolve'] = {</span><span class="s3">\n    </span><span class="s1">// Disable .mjs for node_modules bundling</span><span class="s3">\n    </span><span class="s1">extensions: ['.js', '.mjs', '.tsx', '.ts', '.jsx', '.json', '.wasm'],</span><span class="s3">\n    </span><span class="s1">extensionAlias: config.experimental.extensionAlias,</span><span class="s3">\n    </span><span class="s1">modules: [</span><span class="s3">\n      </span><span class="s1">'node_modules',</span><span class="s3">\n      </span><span class="s1">...nodePathList, // Support for NODE_PATH environment variable</span><span class="s3">\n    </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">alias: createWebpackAliases({</span><span class="s3">\n      </span><span class="s1">distDir,</span><span class="s3">\n      </span><span class="s1">isClient,</span><span class="s3">\n      </span><span class="s1">isEdgeServer,</span><span class="s3">\n      </span><span class="s1">dev,</span><span class="s3">\n      </span><span class="s1">config,</span><span class="s3">\n      </span><span class="s1">pagesDir,</span><span class="s3">\n      </span><span class="s1">appDir,</span><span class="s3">\n      </span><span class="s1">dir,</span><span class="s3">\n      </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">...(isClient</span><span class="s3">\n      </span><span class="s1">? {</span><span class="s3">\n          </span><span class="s1">fallback: {</span><span class="s3">\n            </span><span class="s1">process: require.resolve('./polyfills/process'),</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">: undefined),</span><span class="s3">\n    </span><span class="s1">// default main fields use pages dir ones, and customize app router ones in loaders.</span><span class="s3">\n    </span><span class="s1">mainFields: getMainField(compilerType, false),</span><span class="s3">\n    </span><span class="s1">...(isEdgeServer &amp;&amp; {</span><span class="s3">\n      </span><span class="s1">conditionNames: edgeConditionNames,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">plugins: [</span><span class="s3">\n      </span><span class="s1">isNodeServer ? new OptionalPeerDependencyResolverPlugin() : undefined,</span><span class="s3">\n    </span><span class="s1">].filter(Boolean) as webpack.ResolvePluginInstance[],</span><span class="s3">\n    </span><span class="s1">...((isRspack &amp;&amp; jsConfigPath</span><span class="s3">\n      </span><span class="s1">? {</span><span class="s3">\n          </span><span class="s1">// Skip paths that are routed to a .d.ts file</span><span class="s3">\n          </span><span class="s1">restrictions: [/^(?!.*</span><span class="s3">\\</span><span class="s1">.d</span><span class="s3">\\</span><span class="s1">.ts$).*$/],</span><span class="s3">\n          </span><span class="s1">tsConfig: {</span><span class="s3">\n            </span><span class="s1">configFile: jsConfigPath,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">: {}) as any),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Packages which will be split into the 'framework' chunk.</span><span class="s3">\n  </span><span class="s1">// Only top-level packages are included, e.g. nested copies like</span><span class="s3">\n  </span><span class="s1">// 'node_modules/meow/node_modules/object-assign' are not included.</span><span class="s3">\n  </span><span class="s1">const nextFrameworkPaths: string[] = []</span><span class="s3">\n  </span><span class="s1">const topLevelFrameworkPaths: string[] = []</span><span class="s3">\n  </span><span class="s1">const visitedFrameworkPackages = new Set&lt;string&gt;()</span><span class="s3">\n  </span><span class="s1">// Adds package-paths of dependencies recursively</span><span class="s3">\n  </span><span class="s1">const addPackagePath = (</span><span class="s3">\n    </span><span class="s1">packageName: string,</span><span class="s3">\n    </span><span class="s1">relativeToPath: string,</span><span class="s3">\n    </span><span class="s1">paths: string[]</span><span class="s3">\n  </span><span class="s1">) =&gt; {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">if (visitedFrameworkPackages.has(packageName)) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">visitedFrameworkPackages.add(packageName)</span><span class="s3">\n\n      </span><span class="s1">const packageJsonPath = require.resolve(`${packageName}/package.json`, {</span><span class="s3">\n        </span><span class="s1">paths: [relativeToPath],</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n\n      </span><span class="s1">// Include a trailing slash so that a `.startsWith(packagePath)` check avoids false positives</span><span class="s3">\n      </span><span class="s1">// when one package name starts with the full name of a different package.</span><span class="s3">\n      </span><span class="s1">// For example:</span><span class="s3">\n      </span><span class="s1">//   </span><span class="s3">\&quot;</span><span class="s1">node_modules/react-slider</span><span class="s3">\&quot;</span><span class="s1">.startsWith(</span><span class="s3">\&quot;</span><span class="s1">node_modules/react</span><span class="s3">\&quot;</span><span class="s1">)  // true</span><span class="s3">\n      </span><span class="s1">//   </span><span class="s3">\&quot;</span><span class="s1">node_modules/react-slider</span><span class="s3">\&quot;</span><span class="s1">.startsWith(</span><span class="s3">\&quot;</span><span class="s1">node_modules/react/</span><span class="s3">\&quot;</span><span class="s1">) // false</span><span class="s3">\n      </span><span class="s1">const directory = path.join(packageJsonPath, '../')</span><span class="s3">\n\n      </span><span class="s1">// Returning from the function in case the directory has already been added and traversed</span><span class="s3">\n      </span><span class="s1">if (paths.includes(directory)) return</span><span class="s3">\n      </span><span class="s1">paths.push(directory)</span><span class="s3">\n      </span><span class="s1">const dependencies = require(packageJsonPath).dependencies || {}</span><span class="s3">\n      </span><span class="s1">for (const name of Object.keys(dependencies)) {</span><span class="s3">\n        </span><span class="s1">addPackagePath(name, directory, paths)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} catch (_) {</span><span class="s3">\n      </span><span class="s1">// don't error on failing to resolve framework packages</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">for (const packageName of [</span><span class="s3">\n    </span><span class="s1">'react',</span><span class="s3">\n    </span><span class="s1">'react-dom',</span><span class="s3">\n    </span><span class="s1">...(hasAppDir</span><span class="s3">\n      </span><span class="s1">? [</span><span class="s3">\n          </span><span class="s1">`next/dist/compiled/react${bundledReactChannel}`,</span><span class="s3">\n          </span><span class="s1">`next/dist/compiled/react-dom${bundledReactChannel}`,</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n      </span><span class="s1">: []),</span><span class="s3">\n  </span><span class="s1">]) {</span><span class="s3">\n    </span><span class="s1">addPackagePath(packageName, dir, topLevelFrameworkPaths)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">addPackagePath('next', dir, nextFrameworkPaths)</span><span class="s3">\n\n  </span><span class="s1">const crossOrigin = config.crossOrigin</span><span class="s3">\n\n  </span><span class="s1">// The `serverExternalPackages` should not conflict with</span><span class="s3">\n  </span><span class="s1">// the `transpilePackages`.</span><span class="s3">\n  </span><span class="s1">if (config.serverExternalPackages &amp;&amp; finalTranspilePackages) {</span><span class="s3">\n    </span><span class="s1">const externalPackageConflicts = finalTranspilePackages.filter((pkg) =&gt;</span><span class="s3">\n      </span><span class="s1">config.serverExternalPackages?.includes(pkg)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (externalPackageConflicts.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`The packages specified in the 'transpilePackages' conflict with the 'serverExternalPackages': ${externalPackageConflicts.join(</span><span class="s3">\n          </span><span class="s1">', '</span><span class="s3">\n        </span><span class="s1">)}`</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// For original request, such as `package name`</span><span class="s3">\n  </span><span class="s1">const optOutBundlingPackages = EXTERNAL_PACKAGES.concat(</span><span class="s3">\n    </span><span class="s1">...(config.serverExternalPackages || [])</span><span class="s3">\n  </span><span class="s1">).filter((pkg) =&gt; !finalTranspilePackages?.includes(pkg))</span><span class="s3">\n  </span><span class="s1">// For resolved request, such as `absolute path/package name/foo/bar.js`</span><span class="s3">\n  </span><span class="s1">const optOutBundlingPackageRegex = new RegExp(</span><span class="s3">\n    </span><span class="s1">`[/</span><span class="s3">\\\\\\\\</span><span class="s1">]node_modules[/</span><span class="s3">\\\\\\\\</span><span class="s1">](${optOutBundlingPackages</span><span class="s3">\n      </span><span class="s1">.map((p) =&gt; p.replace(/</span><span class="s3">\\</span><span class="s1">//g, '[/</span><span class="s3">\\\\\\\\</span><span class="s1">]'))</span><span class="s3">\n      </span><span class="s1">.join('|')})[/</span><span class="s3">\\\\\\\\</span><span class="s1">]`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const transpilePackagesRegex = new RegExp(</span><span class="s3">\n    </span><span class="s1">`[/</span><span class="s3">\\\\\\\\</span><span class="s1">]node_modules[/</span><span class="s3">\\\\\\\\</span><span class="s1">](${finalTranspilePackages</span><span class="s3">\n      </span><span class="s1">?.map((p) =&gt; p.replace(/</span><span class="s3">\\</span><span class="s1">//g, '[/</span><span class="s3">\\\\\\\\</span><span class="s1">]'))</span><span class="s3">\n      </span><span class="s1">.join('|')})[/</span><span class="s3">\\\\\\\\</span><span class="s1">]`</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const handleExternals = makeExternalHandler({</span><span class="s3">\n    </span><span class="s1">config,</span><span class="s3">\n    </span><span class="s1">optOutBundlingPackageRegex,</span><span class="s3">\n    </span><span class="s1">transpiledPackages: finalTranspilePackages,</span><span class="s3">\n    </span><span class="s1">dir,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const pageExtensionsRegex = new RegExp(`</span><span class="s3">\\\\</span><span class="s1">.(${pageExtensions.join('|')})$`)</span><span class="s3">\n\n  </span><span class="s1">const aliasCodeConditionTest = [codeCondition.test, pageExtensionsRegex]</span><span class="s3">\n\n  </span><span class="s1">const builtinModules = (require('module') as typeof import('module'))</span><span class="s3">\n    </span><span class="s1">.builtinModules</span><span class="s3">\n\n  </span><span class="s1">const bunExternals = [</span><span class="s3">\n    </span><span class="s1">'bun:ffi',</span><span class="s3">\n    </span><span class="s1">'bun:jsc',</span><span class="s3">\n    </span><span class="s1">'bun:sqlite',</span><span class="s3">\n    </span><span class="s1">'bun:test',</span><span class="s3">\n    </span><span class="s1">'bun:wrap',</span><span class="s3">\n    </span><span class="s1">'bun',</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n\n  </span><span class="s1">const shouldEnableSlowModuleDetection =</span><span class="s3">\n    </span><span class="s1">!!config.experimental.slowModuleDetection &amp;&amp; dev</span><span class="s3">\n\n  </span><span class="s1">const getParallelism = () =&gt; {</span><span class="s3">\n    </span><span class="s1">const override = Number(process.env.NEXT_WEBPACK_PARALLELISM)</span><span class="s3">\n    </span><span class="s1">if (shouldEnableSlowModuleDetection) {</span><span class="s3">\n      </span><span class="s1">if (override) {</span><span class="s3">\n        </span><span class="s1">console.warn(</span><span class="s3">\n          </span><span class="s1">'NEXT_WEBPACK_PARALLELISM is specified but will be ignored due to experimental.slowModuleDetection being enabled.'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return 1</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return override || undefined</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const telemetryPlugin =</span><span class="s3">\n    </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n    </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n    </span><span class="s1">new (</span><span class="s3">\n      </span><span class="s1">require('./webpack/plugins/telemetry-plugin/telemetry-plugin') as typeof import('./webpack/plugins/telemetry-plugin/telemetry-plugin')</span><span class="s3">\n    </span><span class="s1">).TelemetryPlugin(</span><span class="s3">\n      </span><span class="s1">new Map(</span><span class="s3">\n        </span><span class="s1">[</span><span class="s3">\n          </span><span class="s1">['swcLoader', useSWCLoader],</span><span class="s3">\n          </span><span class="s1">['swcRelay', !!config.compiler?.relay],</span><span class="s3">\n          </span><span class="s1">['swcStyledComponents', !!config.compiler?.styledComponents],</span><span class="s3">\n          </span><span class="s1">[</span><span class="s3">\n            </span><span class="s1">'swcReactRemoveProperties',</span><span class="s3">\n            </span><span class="s1">!!config.compiler?.reactRemoveProperties,</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">[</span><span class="s3">\n            </span><span class="s1">'swcExperimentalDecorators',</span><span class="s3">\n            </span><span class="s1">!!jsConfig?.compilerOptions?.experimentalDecorators,</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">['swcRemoveConsole', !!config.compiler?.removeConsole],</span><span class="s3">\n          </span><span class="s1">['swcImportSource', !!jsConfig?.compilerOptions?.jsxImportSource],</span><span class="s3">\n          </span><span class="s1">['swcEmotion', !!config.compiler?.emotion],</span><span class="s3">\n          </span><span class="s1">['transpilePackages', !!config.transpilePackages],</span><span class="s3">\n          </span><span class="s1">['skipMiddlewareUrlNormalize', !!config.skipMiddlewareUrlNormalize],</span><span class="s3">\n          </span><span class="s1">['skipTrailingSlashRedirect', !!config.skipTrailingSlashRedirect],</span><span class="s3">\n          </span><span class="s1">['modularizeImports', !!config.modularizeImports],</span><span class="s3">\n          </span><span class="s1">// If esmExternals is not same as default value, it represents customized usage</span><span class="s3">\n          </span><span class="s1">['esmExternals', config.experimental.esmExternals !== true],</span><span class="s3">\n          </span><span class="s1">SWCBinaryTarget,</span><span class="s3">\n        </span><span class="s1">].filter&lt;[Feature, boolean]&gt;(Boolean as any)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">let webpackConfig: webpack.Configuration = {</span><span class="s3">\n    </span><span class="s1">parallelism: getParallelism(),</span><span class="s3">\n    </span><span class="s1">...(isNodeServer ? { externalsPresets: { node: true } } : {}),</span><span class="s3">\n    </span><span class="s1">// @ts-ignore</span><span class="s3">\n    </span><span class="s1">externals:</span><span class="s3">\n      </span><span class="s1">isClient || isEdgeServer</span><span class="s3">\n        </span><span class="s1">? // make sure importing </span><span class="s3">\&quot;</span><span class="s1">next</span><span class="s3">\&quot; </span><span class="s1">is handled gracefully for client</span><span class="s3">\n          </span><span class="s1">// bundles in case a user imported types and it wasn't removed</span><span class="s3">\n          </span><span class="s1">// TODO: should we warn/error for this instead?</span><span class="s3">\n          </span><span class="s1">[</span><span class="s3">\n            </span><span class="s1">'next',</span><span class="s3">\n            </span><span class="s1">...(isEdgeServer</span><span class="s3">\n              </span><span class="s1">? [</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">'@builder.io/partytown': '{}',</span><span class="s3">\n                    </span><span class="s1">'next/dist/compiled/etag': '{}',</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">getEdgePolyfilledModules(),</span><span class="s3">\n                  </span><span class="s1">handleWebpackExternalForEdgeRuntime,</span><span class="s3">\n                </span><span class="s1">]</span><span class="s3">\n              </span><span class="s1">: []),</span><span class="s3">\n          </span><span class="s1">]</span><span class="s3">\n        </span><span class="s1">: [</span><span class="s3">\n            </span><span class="s1">...builtinModules,</span><span class="s3">\n            </span><span class="s1">...bunExternals,</span><span class="s3">\n            </span><span class="s1">({</span><span class="s3">\n              </span><span class="s1">context,</span><span class="s3">\n              </span><span class="s1">request,</span><span class="s3">\n              </span><span class="s1">dependencyType,</span><span class="s3">\n              </span><span class="s1">contextInfo,</span><span class="s3">\n              </span><span class="s1">getResolve,</span><span class="s3">\n            </span><span class="s1">}: {</span><span class="s3">\n              </span><span class="s1">context: string</span><span class="s3">\n              </span><span class="s1">request: string</span><span class="s3">\n              </span><span class="s1">dependencyType: string</span><span class="s3">\n              </span><span class="s1">contextInfo: {</span><span class="s3">\n                </span><span class="s1">issuer: string</span><span class="s3">\n                </span><span class="s1">issuerLayer: string | null</span><span class="s3">\n                </span><span class="s1">compiler: string</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">getResolve: (</span><span class="s3">\n                </span><span class="s1">options: any</span><span class="s3">\n              </span><span class="s1">) =&gt; (</span><span class="s3">\n                </span><span class="s1">resolveContext: string,</span><span class="s3">\n                </span><span class="s1">resolveRequest: string,</span><span class="s3">\n                </span><span class="s1">callback: (</span><span class="s3">\n                  </span><span class="s1">err?: Error,</span><span class="s3">\n                  </span><span class="s1">result?: string,</span><span class="s3">\n                  </span><span class="s1">resolveData?: { descriptionFileData?: { type?: any } }</span><span class="s3">\n                </span><span class="s1">) =&gt; void</span><span class="s3">\n              </span><span class="s1">) =&gt; void</span><span class="s3">\n            </span><span class="s1">}) =&gt;</span><span class="s3">\n              </span><span class="s1">handleExternals(</span><span class="s3">\n                </span><span class="s1">context,</span><span class="s3">\n                </span><span class="s1">request,</span><span class="s3">\n                </span><span class="s1">dependencyType,</span><span class="s3">\n                </span><span class="s1">contextInfo.issuerLayer as WebpackLayerName,</span><span class="s3">\n                </span><span class="s1">(options) =&gt; {</span><span class="s3">\n                  </span><span class="s1">const resolveFunction = getResolve(options)</span><span class="s3">\n                  </span><span class="s1">return (resolveContext: string, requestToResolve: string) =&gt;</span><span class="s3">\n                    </span><span class="s1">new Promise((resolve, reject) =&gt; {</span><span class="s3">\n                      </span><span class="s1">resolveFunction(</span><span class="s3">\n                        </span><span class="s1">resolveContext,</span><span class="s3">\n                        </span><span class="s1">requestToResolve,</span><span class="s3">\n                        </span><span class="s1">(err, result, resolveData) =&gt; {</span><span class="s3">\n                          </span><span class="s1">if (err) return reject(err)</span><span class="s3">\n                          </span><span class="s1">if (!result) return resolve([null, false])</span><span class="s3">\n                          </span><span class="s1">const isEsm = /</span><span class="s3">\\</span><span class="s1">.js$/i.test(result)</span><span class="s3">\n                            </span><span class="s1">? resolveData?.descriptionFileData?.type ===</span><span class="s3">\n                              </span><span class="s1">'module'</span><span class="s3">\n                            </span><span class="s1">: /</span><span class="s3">\\</span><span class="s1">.mjs$/i.test(result)</span><span class="s3">\n                          </span><span class="s1">resolve([result, isEsm])</span><span class="s3">\n                        </span><span class="s1">}</span><span class="s3">\n                      </span><span class="s1">)</span><span class="s3">\n                    </span><span class="s1">})</span><span class="s3">\n                </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">),</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n\n    </span><span class="s1">optimization: {</span><span class="s3">\n      </span><span class="s1">emitOnErrors: !dev,</span><span class="s3">\n      </span><span class="s1">checkWasmTypes: false,</span><span class="s3">\n      </span><span class="s1">nodeEnv: false,</span><span class="s3">\n\n      </span><span class="s1">splitChunks: (():</span><span class="s3">\n        </span><span class="s1">| Required&lt;webpack.Configuration&gt;['optimization']['splitChunks']</span><span class="s3">\n        </span><span class="s1">| false =&gt; {</span><span class="s3">\n        </span><span class="s1">// server chunking</span><span class="s3">\n        </span><span class="s1">if (dev) {</span><span class="s3">\n          </span><span class="s1">if (isNodeServer) {</span><span class="s3">\n            </span><span class="s1">/*</span><span class="s3">\n              </span><span class="s1">In development, we want to split code that comes from `node_modules` into their own chunks.</span><span class="s3">\n              </span><span class="s1">This is because in development, we often need to reload the user bundle due to changes in the code.</span><span class="s3">\n              </span><span class="s1">To work around this, we put all the vendor code into separate chunks so that we don't need to reload them.</span><span class="s3">\n              </span><span class="s1">This is safe because the vendor code doesn't change between reloads.</span><span class="s3">\n            </span><span class="s1">*/</span><span class="s3">\n            </span><span class="s1">const extractRootNodeModule = (modulePath: string) =&gt; {</span><span class="s3">\n              </span><span class="s1">// This regex is used to extract the root node module name to be used as the chunk group name.</span><span class="s3">\n              </span><span class="s1">// example: ../../node_modules/.pnpm/next@10/foo/node_modules/bar -&gt; next@10</span><span class="s3">\n              </span><span class="s1">const regex =</span><span class="s3">\n                </span><span class="s1">/node_modules(?:</span><span class="s3">\\</span><span class="s1">/|</span><span class="s3">\\\\</span><span class="s1">)</span><span class="s3">\\</span><span class="s1">.?(?:pnpm(?:</span><span class="s3">\\</span><span class="s1">/|</span><span class="s3">\\\\</span><span class="s1">))?([^/</span><span class="s3">\\\\</span><span class="s1">]+)/</span><span class="s3">\n              </span><span class="s1">const match = modulePath.match(regex)</span><span class="s3">\n              </span><span class="s1">return match ? match[1] : null</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">return {</span><span class="s3">\n              </span><span class="s1">cacheGroups: {</span><span class="s3">\n                </span><span class="s1">// this chunk configuration gives us a separate chunk for each top level module in node_modules</span><span class="s3">\n                </span><span class="s1">// or a hashed chunk if we can't extract the module name.</span><span class="s3">\n                </span><span class="s1">vendor: {</span><span class="s3">\n                  </span><span class="s1">chunks: 'all',</span><span class="s3">\n                  </span><span class="s1">reuseExistingChunk: true,</span><span class="s3">\n                  </span><span class="s1">test: /[</span><span class="s3">\\\\</span><span class="s1">/]node_modules[</span><span class="s3">\\\\</span><span class="s1">/]/,</span><span class="s3">\n                  </span><span class="s1">minSize: 0,</span><span class="s3">\n                  </span><span class="s1">minChunks: 1,</span><span class="s3">\n                  </span><span class="s1">maxAsyncRequests: 300,</span><span class="s3">\n                  </span><span class="s1">maxInitialRequests: 300,</span><span class="s3">\n                  </span><span class="s1">name: (module: webpack.Module) =&gt; {</span><span class="s3">\n                    </span><span class="s1">const moduleId = module.nameForCondition()!</span><span class="s3">\n                    </span><span class="s1">const rootModule = extractRootNodeModule(moduleId)</span><span class="s3">\n                    </span><span class="s1">if (rootModule) {</span><span class="s3">\n                      </span><span class="s1">return `vendor-chunks/${rootModule}`</span><span class="s3">\n                    </span><span class="s1">} else {</span><span class="s3">\n                      </span><span class="s1">const hash = crypto.createHash('sha1').update(moduleId)</span><span class="s3">\n                      </span><span class="s1">hash.update(moduleId)</span><span class="s3">\n                      </span><span class="s1">return `vendor-chunks/${hash.digest('hex')}`</span><span class="s3">\n                    </span><span class="s1">}</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">// disable the default chunk groups</span><span class="s3">\n                </span><span class="s1">default: false,</span><span class="s3">\n                </span><span class="s1">defaultVendors: false,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">return false</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">if (isNodeServer || isEdgeServer) {</span><span class="s3">\n          </span><span class="s1">return {</span><span class="s3">\n            </span><span class="s1">filename: `${isEdgeServer ? `edge-chunks/` : ''}[name].js`,</span><span class="s3">\n            </span><span class="s1">chunks: 'all',</span><span class="s3">\n            </span><span class="s1">minChunks: 2,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const frameworkCacheGroup = {</span><span class="s3">\n          </span><span class="s1">chunks: 'all' as const,</span><span class="s3">\n          </span><span class="s1">name: 'framework',</span><span class="s3">\n          </span><span class="s1">// Ensures the framework chunk is not created for App Router.</span><span class="s3">\n          </span><span class="s1">layer: isWebpackDefaultLayer,</span><span class="s3">\n          </span><span class="s1">test(module: any) {</span><span class="s3">\n            </span><span class="s1">const resource = module.nameForCondition?.()</span><span class="s3">\n            </span><span class="s1">return resource</span><span class="s3">\n              </span><span class="s1">? topLevelFrameworkPaths.some((pkgPath) =&gt;</span><span class="s3">\n                  </span><span class="s1">resource.startsWith(pkgPath)</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">: false</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">priority: 40,</span><span class="s3">\n          </span><span class="s1">// Don't let webpack eliminate this chunk (prevents this chunk from</span><span class="s3">\n          </span><span class="s1">// becoming a part of the commons chunk)</span><span class="s3">\n          </span><span class="s1">enforce: true,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">const libCacheGroup = {</span><span class="s3">\n          </span><span class="s1">test(module: {</span><span class="s3">\n            </span><span class="s1">type: string</span><span class="s3">\n            </span><span class="s1">size: Function</span><span class="s3">\n            </span><span class="s1">nameForCondition: Function</span><span class="s3">\n          </span><span class="s1">}): boolean {</span><span class="s3">\n            </span><span class="s1">return (</span><span class="s3">\n              </span><span class="s1">!module.type?.startsWith('css') &amp;&amp;</span><span class="s3">\n              </span><span class="s1">module.size() &gt; 160000 &amp;&amp;</span><span class="s3">\n              </span><span class="s1">/node_modules[/</span><span class="s3">\\\\</span><span class="s1">]/.test(module.nameForCondition() || '')</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">name(module: {</span><span class="s3">\n            </span><span class="s1">layer: string | null | undefined</span><span class="s3">\n            </span><span class="s1">type: string</span><span class="s3">\n            </span><span class="s1">libIdent?: Function</span><span class="s3">\n            </span><span class="s1">updateHash: (hash: crypto.Hash) =&gt; void</span><span class="s3">\n          </span><span class="s1">}): string {</span><span class="s3">\n            </span><span class="s1">const hash = crypto.createHash('sha1')</span><span class="s3">\n            </span><span class="s1">if (isModuleCSS(module)) {</span><span class="s3">\n              </span><span class="s1">module.updateHash(hash)</span><span class="s3">\n            </span><span class="s1">} else {</span><span class="s3">\n              </span><span class="s1">if (!module.libIdent) {</span><span class="s3">\n                </span><span class="s1">throw new Error(</span><span class="s3">\n                  </span><span class="s1">`Encountered unknown module type: ${module.type}. Please open an issue.`</span><span class="s3">\n                </span><span class="s1">)</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n              </span><span class="s1">hash.update(module.libIdent({ context: dir }))</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">// Ensures the name of the chunk is not the same between two modules in different layers</span><span class="s3">\n            </span><span class="s1">// E.g. if you import 'button-library' in App Router and Pages Router we don't want these to be bundled in the same chunk</span><span class="s3">\n            </span><span class="s1">// as they're never used on the same page.</span><span class="s3">\n            </span><span class="s1">if (module.layer) {</span><span class="s3">\n              </span><span class="s1">hash.update(module.layer)</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">return hash.digest('hex').substring(0, 8)</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">priority: 30,</span><span class="s3">\n          </span><span class="s1">minChunks: 1,</span><span class="s3">\n          </span><span class="s1">reuseExistingChunk: true,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">// client chunking</span><span class="s3">\n        </span><span class="s1">return {</span><span class="s3">\n          </span><span class="s1">// Keep main and _app chunks unsplitted in webpack 5</span><span class="s3">\n          </span><span class="s1">// as we don't need a separate vendor chunk from that</span><span class="s3">\n          </span><span class="s1">// and all other chunk depend on them so there is no</span><span class="s3">\n          </span><span class="s1">// duplication that need to be pulled out.</span><span class="s3">\n          </span><span class="s1">chunks: isRspack</span><span class="s3">\n            </span><span class="s1">? // using a function here causes noticable slowdown</span><span class="s3">\n              </span><span class="s1">// in rspack</span><span class="s3">\n              </span><span class="s1">/(?!polyfills|main|pages</span><span class="s3">\\</span><span class="s1">/_app)/</span><span class="s3">\n            </span><span class="s1">: (chunk: any) =&gt;</span><span class="s3">\n                </span><span class="s1">!/^(polyfills|main|pages</span><span class="s3">\\</span><span class="s1">/_app)$/.test(chunk.name),</span><span class="s3">\n\n          </span><span class="s1">cacheGroups: isRspack</span><span class="s3">\n            </span><span class="s1">? {</span><span class="s3">\n                </span><span class="s1">framework: {</span><span class="s3">\n                  </span><span class="s1">chunks: 'all' as const,</span><span class="s3">\n                  </span><span class="s1">name: 'framework',</span><span class="s3">\n                  </span><span class="s1">layer: RSPACK_DEFAULT_LAYERS_REGEX,</span><span class="s3">\n                  </span><span class="s1">test: /[/]node_modules[/](react|react-dom|next[/]dist[/]compiled[/](react|react-dom)(-experimental)?)[/]/,</span><span class="s3">\n                  </span><span class="s1">priority: 40,</span><span class="s3">\n                  </span><span class="s1">enforce: true,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">lib: {</span><span class="s3">\n                  </span><span class="s1">test: /[/]node_modules[/](?!.*</span><span class="s3">\\</span><span class="s1">.(css|scss|sass|less|styl)$)/,</span><span class="s3">\n                  </span><span class="s1">name: 'lib',</span><span class="s3">\n                  </span><span class="s1">chunks: 'all',</span><span class="s3">\n                  </span><span class="s1">priority: 30,</span><span class="s3">\n                  </span><span class="s1">minChunks: 1,</span><span class="s3">\n                  </span><span class="s1">reuseExistingChunk: true,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">: {</span><span class="s3">\n                </span><span class="s1">framework: frameworkCacheGroup,</span><span class="s3">\n                </span><span class="s1">lib: libCacheGroup,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">maxInitialRequests: 25,</span><span class="s3">\n          </span><span class="s1">minSize: 20000,</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})(),</span><span class="s3">\n      </span><span class="s1">runtimeChunk: isClient</span><span class="s3">\n        </span><span class="s1">? { name: CLIENT_STATIC_FILES_RUNTIME_WEBPACK }</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n\n      </span><span class="s1">minimize:</span><span class="s3">\n        </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(isClient ||</span><span class="s3">\n          </span><span class="s1">isEdgeServer ||</span><span class="s3">\n          </span><span class="s1">(isNodeServer &amp;&amp; config.experimental.serverMinification)),</span><span class="s3">\n      </span><span class="s1">minimizer: [</span><span class="s3">\n        </span><span class="s1">// Minify JavaScript</span><span class="s3">\n        </span><span class="s1">isRspack</span><span class="s3">\n          </span><span class="s1">? new (getRspackCore().SwcJsMinimizerRspackPlugin)({</span><span class="s3">\n              </span><span class="s1">// JS minimizer configuration</span><span class="s3">\n              </span><span class="s1">// options should align with crates/napi/src/minify.rs#patch_opts</span><span class="s3">\n              </span><span class="s1">minimizerOptions: {</span><span class="s3">\n                </span><span class="s1">compress: {</span><span class="s3">\n                  </span><span class="s1">inline: 2,</span><span class="s3">\n                  </span><span class="s1">global_defs: {</span><span class="s3">\n                    </span><span class="s1">'process.env.__NEXT_PRIVATE_MINIMIZE_MACRO_FALSE': false,</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">mangle: !noMangling &amp;&amp; {</span><span class="s3">\n                  </span><span class="s1">reserved: ['AbortSignal'],</span><span class="s3">\n                  </span><span class="s1">disableCharFreq: !isClient,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: (compiler: webpack.Compiler) =&gt; {</span><span class="s3">\n              </span><span class="s1">// @ts-ignore No typings yet</span><span class="s3">\n              </span><span class="s1">const { MinifyPlugin } =</span><span class="s3">\n                </span><span class="s1">require('./webpack/plugins/minify-webpack-plugin/src') as typeof import('./webpack/plugins/minify-webpack-plugin/src')</span><span class="s3">\n              </span><span class="s1">new MinifyPlugin({</span><span class="s3">\n                </span><span class="s1">noMangling,</span><span class="s3">\n                </span><span class="s1">disableCharFreq: !isClient,</span><span class="s3">\n              </span><span class="s1">}).apply(compiler)</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">// Minify CSS</span><span class="s3">\n        </span><span class="s1">// By default, Rspack uses LightningCSS for CSS minification.</span><span class="s3">\n        </span><span class="s1">// Rspack uses css-minimizer-plugin by default for compatibility.</span><span class="s3">\n        </span><span class="s1">isRspack &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(process.env.__NEXT_TEST_MODE</span><span class="s3">\n          </span><span class="s1">? config.experimental.useLightningcss</span><span class="s3">\n          </span><span class="s1">: config.experimental?.useLightningcss === undefined ||</span><span class="s3">\n            </span><span class="s1">config.experimental.useLightningcss)</span><span class="s3">\n          </span><span class="s1">? new (getRspackCore().LightningCssMinimizerRspackPlugin)({</span><span class="s3">\n              </span><span class="s1">// CSS minimizer configuration</span><span class="s3">\n              </span><span class="s1">minimizerOptions: {</span><span class="s3">\n                </span><span class="s1">targets: supportedBrowsers,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: (compiler: webpack.Compiler) =&gt; {</span><span class="s3">\n              </span><span class="s1">const { CssMinimizerPlugin } =</span><span class="s3">\n                </span><span class="s1">require('./webpack/plugins/css-minimizer-plugin') as typeof import('./webpack/plugins/css-minimizer-plugin')</span><span class="s3">\n              </span><span class="s1">new CssMinimizerPlugin({</span><span class="s3">\n                </span><span class="s1">postcssOptions: {</span><span class="s3">\n                  </span><span class="s1">map: {</span><span class="s3">\n                    </span><span class="s1">// `inline: false` generates the source map in a separate file.</span><span class="s3">\n                    </span><span class="s1">// Otherwise, the CSS file is needlessly large.</span><span class="s3">\n                    </span><span class="s1">inline: false,</span><span class="s3">\n                    </span><span class="s1">// `annotation: false` skips appending the `sourceMappingURL`</span><span class="s3">\n                    </span><span class="s1">// to the end of the CSS file. Webpack already handles this.</span><span class="s3">\n                    </span><span class="s1">annotation: false,</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">}).apply(compiler)</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">context: dir,</span><span class="s3">\n    </span><span class="s1">// Kept as function to be backwards compatible</span><span class="s3">\n    </span><span class="s1">entry: async () =&gt; {</span><span class="s3">\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">...(clientEntries ? clientEntries : {}),</span><span class="s3">\n        </span><span class="s1">...entrypoints,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">watchOptions: Object.freeze({</span><span class="s3">\n      </span><span class="s1">...baseWatchOptions,</span><span class="s3">\n      </span><span class="s1">poll: config.watchOptions?.pollIntervalMs,</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">output: {</span><span class="s3">\n      </span><span class="s1">// we must set publicPath to an empty value to override the default of</span><span class="s3">\n      </span><span class="s1">// auto which doesn't work in IE11</span><span class="s3">\n      </span><span class="s1">publicPath: `${</span><span class="s3">\n        </span><span class="s1">config.assetPrefix</span><span class="s3">\n          </span><span class="s1">? config.assetPrefix.endsWith('/')</span><span class="s3">\n            </span><span class="s1">? config.assetPrefix.slice(0, -1)</span><span class="s3">\n            </span><span class="s1">: config.assetPrefix</span><span class="s3">\n          </span><span class="s1">: ''</span><span class="s3">\n      </span><span class="s1">}/_next/`,</span><span class="s3">\n      </span><span class="s1">path: !dev &amp;&amp; isNodeServer ? path.join(outputPath, 'chunks') : outputPath,</span><span class="s3">\n      </span><span class="s1">// On the server we don't use hashes</span><span class="s3">\n      </span><span class="s1">filename: isNodeOrEdgeCompilation</span><span class="s3">\n        </span><span class="s1">? dev || isEdgeServer</span><span class="s3">\n          </span><span class="s1">? `[name].js`</span><span class="s3">\n          </span><span class="s1">: `../[name].js`</span><span class="s3">\n        </span><span class="s1">: `static/chunks/${isDevFallback ? 'fallback/' : ''}[name]${</span><span class="s3">\n            </span><span class="s1">dev ? '' : '-[contenthash]'</span><span class="s3">\n          </span><span class="s1">}.js`,</span><span class="s3">\n      </span><span class="s1">library: isClient || isEdgeServer ? '_N_E' : undefined,</span><span class="s3">\n      </span><span class="s1">libraryTarget: isClient || isEdgeServer ? 'assign' : 'commonjs2',</span><span class="s3">\n      </span><span class="s1">hotUpdateChunkFilename: 'static/webpack/[id].[fullhash].hot-update.js',</span><span class="s3">\n      </span><span class="s1">hotUpdateMainFilename:</span><span class="s3">\n        </span><span class="s1">'static/webpack/[fullhash].[runtime].hot-update.json',</span><span class="s3">\n      </span><span class="s1">// This saves chunks with the name given via `import()`</span><span class="s3">\n      </span><span class="s1">chunkFilename: isNodeOrEdgeCompilation</span><span class="s3">\n        </span><span class="s1">? '[name].js'</span><span class="s3">\n        </span><span class="s1">: `static/chunks/${isDevFallback ? 'fallback/' : ''}${</span><span class="s3">\n            </span><span class="s1">dev ? '[name]' : '[name].[contenthash]'</span><span class="s3">\n          </span><span class="s1">}.js`,</span><span class="s3">\n      </span><span class="s1">strictModuleExceptionHandling: true,</span><span class="s3">\n      </span><span class="s1">crossOriginLoading: crossOrigin,</span><span class="s3">\n      </span><span class="s1">// if `sources[number]` is not an absolute path, it's is resolved</span><span class="s3">\n      </span><span class="s1">// relative to the location of the source map file (https://tc39.es/source-map/#resolving-sources).</span><span class="s3">\n      </span><span class="s1">// However, Webpack's `resource-path` is relative to the app dir.</span><span class="s3">\n      </span><span class="s1">// TODO: Either `sourceRoot` should be populated with the root and then we can use `[resource-path]`</span><span class="s3">\n      </span><span class="s1">// or we need a way to resolve return `path.relative(sourceMapLocation, info.resourcePath)`</span><span class="s3">\n      </span><span class="s1">devtoolModuleFilenameTemplate: dev</span><span class="s3">\n        </span><span class="s1">? '[absolute-resource-path]'</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n      </span><span class="s1">webassemblyModuleFilename: 'static/wasm/[modulehash].wasm',</span><span class="s3">\n      </span><span class="s1">hashFunction: 'xxhash64',</span><span class="s3">\n      </span><span class="s1">hashDigestLength: 16,</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">performance: false,</span><span class="s3">\n    </span><span class="s1">resolve: resolveConfig,</span><span class="s3">\n    </span><span class="s1">resolveLoader: {</span><span class="s3">\n      </span><span class="s1">// The loaders Next.js provides</span><span class="s3">\n      </span><span class="s1">alias: [</span><span class="s3">\n        </span><span class="s1">'error-loader',</span><span class="s3">\n        </span><span class="s1">'next-swc-loader',</span><span class="s3">\n        </span><span class="s1">'next-client-pages-loader',</span><span class="s3">\n        </span><span class="s1">'next-image-loader',</span><span class="s3">\n        </span><span class="s1">'next-metadata-image-loader',</span><span class="s3">\n        </span><span class="s1">'next-style-loader',</span><span class="s3">\n        </span><span class="s1">'next-flight-loader',</span><span class="s3">\n        </span><span class="s1">'next-flight-client-entry-loader',</span><span class="s3">\n        </span><span class="s1">'next-flight-action-entry-loader',</span><span class="s3">\n        </span><span class="s1">'next-flight-client-module-loader',</span><span class="s3">\n        </span><span class="s1">'next-flight-server-reference-proxy-loader',</span><span class="s3">\n        </span><span class="s1">'empty-loader',</span><span class="s3">\n        </span><span class="s1">'next-middleware-loader',</span><span class="s3">\n        </span><span class="s1">'next-edge-function-loader',</span><span class="s3">\n        </span><span class="s1">'next-edge-app-route-loader',</span><span class="s3">\n        </span><span class="s1">'next-edge-ssr-loader',</span><span class="s3">\n        </span><span class="s1">'next-middleware-asset-loader',</span><span class="s3">\n        </span><span class="s1">'next-middleware-wasm-loader',</span><span class="s3">\n        </span><span class="s1">'next-app-loader',</span><span class="s3">\n        </span><span class="s1">'next-route-loader',</span><span class="s3">\n        </span><span class="s1">'next-font-loader',</span><span class="s3">\n        </span><span class="s1">'next-invalid-import-error-loader',</span><span class="s3">\n        </span><span class="s1">'next-metadata-route-loader',</span><span class="s3">\n        </span><span class="s1">'modularize-import-loader',</span><span class="s3">\n        </span><span class="s1">'next-barrel-loader',</span><span class="s3">\n        </span><span class="s1">'next-error-browser-binary-loader',</span><span class="s3">\n        </span><span class="s1">'next-root-params-loader',</span><span class="s3">\n      </span><span class="s1">].reduce(</span><span class="s3">\n        </span><span class="s1">(alias, loader) =&gt; {</span><span class="s3">\n          </span><span class="s1">// using multiple aliases to replace `resolveLoader.modules`</span><span class="s3">\n          </span><span class="s1">alias[loader] = path.join(__dirname, 'webpack', 'loaders', loader)</span><span class="s3">\n\n          </span><span class="s1">return alias</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{} as Record&lt;string, string&gt;</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">modules: [</span><span class="s3">\n        </span><span class="s1">'node_modules',</span><span class="s3">\n        </span><span class="s1">...nodePathList, // Support for NODE_PATH environment variable</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n      </span><span class="s1">plugins: [],</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">module: {</span><span class="s3">\n      </span><span class="s1">rules: [</span><span class="s3">\n        </span><span class="s1">// Alias server-only and client-only to proper exports based on bundling layers</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">issuerLayer: {</span><span class="s3">\n            </span><span class="s1">or: [</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.serverOnly,</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.neutralTarget,</span><span class="s3">\n            </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">resolve: {</span><span class="s3">\n            </span><span class="s1">// Error on client-only but allow server-only</span><span class="s3">\n            </span><span class="s1">alias: createServerOnlyClientOnlyAliases(true),</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">issuerLayer: {</span><span class="s3">\n            </span><span class="s1">not: [</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.serverOnly,</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.neutralTarget,</span><span class="s3">\n            </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">resolve: {</span><span class="s3">\n            </span><span class="s1">// Error on server-only but allow client-only</span><span class="s3">\n            </span><span class="s1">alias: createServerOnlyClientOnlyAliases(false),</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">// Detect server-only / client-only imports and error in build time</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">test: [</span><span class="s3">\n            </span><span class="s1">/^client-only$/,</span><span class="s3">\n            </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]compiled[</span><span class="s3">\\\\</span><span class="s1">/]client-only[</span><span class="s3">\\\\</span><span class="s1">/]error/,</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">loader: 'next-invalid-import-error-loader',</span><span class="s3">\n          </span><span class="s1">issuerLayer: {</span><span class="s3">\n            </span><span class="s1">or: WEBPACK_LAYERS.GROUP.serverOnly,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">options: {</span><span class="s3">\n            </span><span class="s1">message:</span><span class="s3">\n              \&quot;</span><span class="s1">'client-only' cannot be imported from a Server Component module. It should only be used from a Client Component.</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">test: [</span><span class="s3">\n            </span><span class="s1">/^server-only$/,</span><span class="s3">\n            </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]compiled[</span><span class="s3">\\\\</span><span class="s1">/]server-only[</span><span class="s3">\\\\</span><span class="s1">/]index/,</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">loader: 'next-invalid-import-error-loader',</span><span class="s3">\n          </span><span class="s1">issuerLayer: {</span><span class="s3">\n            </span><span class="s1">not: [</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.serverOnly,</span><span class="s3">\n              </span><span class="s1">...WEBPACK_LAYERS.GROUP.neutralTarget,</span><span class="s3">\n            </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">options: {</span><span class="s3">\n            </span><span class="s1">message:</span><span class="s3">\n              \&quot;</span><span class="s1">'server-only' cannot be imported from a Client Component module. It should only be used from a Server Component.</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">// Potential the bundle introduced into middleware and api can be poisoned by client-only</span><span class="s3">\n        </span><span class="s1">// but not being used, so we disabled the `client-only` erroring on these layers.</span><span class="s3">\n        </span><span class="s1">// `server-only` is still available.</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">test: [</span><span class="s3">\n            </span><span class="s1">/^client-only$/,</span><span class="s3">\n            </span><span class="s1">/next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]compiled[</span><span class="s3">\\\\</span><span class="s1">/]client-only[</span><span class="s3">\\\\</span><span class="s1">/]error/,</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">loader: 'empty-loader',</span><span class="s3">\n          </span><span class="s1">issuerLayer: {</span><span class="s3">\n            </span><span class="s1">or: WEBPACK_LAYERS.GROUP.neutralTarget,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">...(isNodeServer</span><span class="s3">\n          </span><span class="s1">? []</span><span class="s3">\n          </span><span class="s1">: [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">test: /[</span><span class="s3">\\\\</span><span class="s1">/].*?</span><span class="s3">\\</span><span class="s1">.node$/,</span><span class="s3">\n                </span><span class="s1">loader: 'next-error-browser-binary-loader',</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]),</span><span class="s3">\n        </span><span class="s1">...(hasAppDir</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">// Make sure that AsyncLocalStorage module instance is shared between server and client</span><span class="s3">\n                </span><span class="s1">// layers.</span><span class="s3">\n                </span><span class="s1">layer: WEBPACK_LAYERS.shared,</span><span class="s3">\n                </span><span class="s1">test: asyncStoragesRegex,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">// Convert metadata routes to separate layer</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">resourceQuery: new RegExp(</span><span class="s3">\n                  </span><span class="s1">WEBPACK_RESOURCE_QUERIES.metadataRoute</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">layer: WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">// Ensure that the app page module is in the client layers, this</span><span class="s3">\n                </span><span class="s1">// enables React to work correctly for RSC.</span><span class="s3">\n                </span><span class="s1">layer: WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n                </span><span class="s1">test: /next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?server[</span><span class="s3">\\\\</span><span class="s1">/]route-modules[</span><span class="s3">\\\\</span><span class="s1">/]app-page[</span><span class="s3">\\\\</span><span class="s1">/]module/,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">issuerLayer: isWebpackBundledLayer,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">alias: createNextApiEsmAliases(),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">issuerLayer: shouldUseReactServerCondition,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">alias: createAppRouterApiAliases(true),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">issuerLayer: isWebpackClientOnlyLayer,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">alias: createAppRouterApiAliases(false),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">...(hasAppDir &amp;&amp; !isClient</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">issuerLayer: shouldUseReactServerCondition,</span><span class="s3">\n                </span><span class="s1">test: {</span><span class="s3">\n                  </span><span class="s1">// Resolve it if it is a source code file, and it has NOT been</span><span class="s3">\n                  </span><span class="s1">// opted out of bundling.</span><span class="s3">\n                  </span><span class="s1">and: [</span><span class="s3">\n                    </span><span class="s1">aliasCodeConditionTest,</span><span class="s3">\n                    </span><span class="s1">{</span><span class="s3">\n                      </span><span class="s1">not: [optOutBundlingPackageRegex, asyncStoragesRegex],</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">],</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">resourceQuery: {</span><span class="s3">\n                  </span><span class="s1">// Do not apply next-flight-loader to imports generated by the</span><span class="s3">\n                  </span><span class="s1">// next-metadata-image-loader, to avoid generating unnecessary</span><span class="s3">\n                  </span><span class="s1">// and conflicting entries in the flight client entry plugin.</span><span class="s3">\n                  </span><span class="s1">// These are already covered by the next-metadata-route-loader</span><span class="s3">\n                  </span><span class="s1">// entries.</span><span class="s3">\n                  </span><span class="s1">not: [</span><span class="s3">\n                    </span><span class="s1">new RegExp(WEBPACK_RESOURCE_QUERIES.metadata),</span><span class="s3">\n                    </span><span class="s1">new RegExp(WEBPACK_RESOURCE_QUERIES.metadataImageMeta),</span><span class="s3">\n                  </span><span class="s1">],</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                  </span><span class="s1">conditionNames: reactServerCondition,</span><span class="s3">\n                  </span><span class="s1">// If missing the alias override here, the default alias will be used which aliases</span><span class="s3">\n                  </span><span class="s1">// react to the direct file path, not the package name. In that case the condition</span><span class="s3">\n                  </span><span class="s1">// will be ignored completely.</span><span class="s3">\n                  </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                    </span><span class="s1">// No server components profiling</span><span class="s3">\n                    </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                    </span><span class="s1">layer: WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n                    </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                    </span><span class="s1">isEdgeServer,</span><span class="s3">\n                  </span><span class="s1">}),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">use: 'next-flight-loader',</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n\n        </span><span class="s1">...getNextRootParamsRules({</span><span class="s3">\n          </span><span class="s1">isRootParamsEnabled:</span><span class="s3">\n            </span><span class="s1">config.experimental.rootParams ??</span><span class="s3">\n            </span><span class="s1">// `experimental.dynamicIO` implies `experimental.rootParams`.</span><span class="s3">\n            </span><span class="s1">config.experimental.cacheComponents ??</span><span class="s3">\n            </span><span class="s1">false,</span><span class="s3">\n          </span><span class="s1">isClient,</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">pageExtensions,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n\n        </span><span class="s1">// TODO: FIXME: do NOT webpack 5 support with this</span><span class="s3">\n        </span><span class="s1">// x-ref: https://github.com/webpack/webpack/issues/11467</span><span class="s3">\n        </span><span class="s1">...(!config.experimental.fullySpecified</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">test: /</span><span class="s3">\\</span><span class="s1">.m?js/,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">fullySpecified: false,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">} as any,</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">...(hasAppDir &amp;&amp; isEdgeServer</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">// The Edge bundle includes the server in its entrypoint, so it has to</span><span class="s3">\n              </span><span class="s1">// be in the SSR layer  here we convert the actual page request to</span><span class="s3">\n              </span><span class="s1">// the RSC layer via a webpack rule.</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">resourceQuery: new RegExp(</span><span class="s3">\n                  </span><span class="s1">WEBPACK_RESOURCE_QUERIES.edgeSSREntry</span><span class="s3">\n                </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">layer: WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">...(hasAppDir</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">// Alias react-dom for ReactDOM.preload usage.</span><span class="s3">\n                </span><span class="s1">// Alias react for switching between default set and share subset.</span><span class="s3">\n                </span><span class="s1">oneOf: [</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">issuerLayer: shouldUseReactServerCondition,</span><span class="s3">\n                    </span><span class="s1">test: {</span><span class="s3">\n                      </span><span class="s1">// Resolve it if it is a source code file, and it has NOT been</span><span class="s3">\n                      </span><span class="s1">// opted out of bundling.</span><span class="s3">\n                      </span><span class="s1">and: [</span><span class="s3">\n                        </span><span class="s1">aliasCodeConditionTest,</span><span class="s3">\n                        </span><span class="s1">{</span><span class="s3">\n                          </span><span class="s1">not: [optOutBundlingPackageRegex, asyncStoragesRegex],</span><span class="s3">\n                        </span><span class="s1">},</span><span class="s3">\n                      </span><span class="s1">],</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                    </span><span class="s1">resolve: {</span><span class="s3">\n                      </span><span class="s1">// It needs `conditionNames` here to require the proper asset,</span><span class="s3">\n                      </span><span class="s1">// when react is acting as dependency of compiled/react-dom.</span><span class="s3">\n                      </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                        </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                        </span><span class="s1">layer: WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n                        </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                        </span><span class="s1">isEdgeServer,</span><span class="s3">\n                      </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">test: aliasCodeConditionTest,</span><span class="s3">\n                    </span><span class="s1">issuerLayer: WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n                    </span><span class="s1">resolve: {</span><span class="s3">\n                      </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                        </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                        </span><span class="s1">layer: WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n                        </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                        </span><span class="s1">isEdgeServer,</span><span class="s3">\n                      </span><span class="s1">}),</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">],</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">test: aliasCodeConditionTest,</span><span class="s3">\n                </span><span class="s1">issuerLayer: WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                    </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                    </span><span class="s1">layer: WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n                    </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                    </span><span class="s1">isEdgeServer,</span><span class="s3">\n                  </span><span class="s1">}),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">// Do not apply react-refresh-loader to node_modules for app router browser layer</span><span class="s3">\n        </span><span class="s1">...(hasAppDir &amp;&amp; dev &amp;&amp; isClient</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n                </span><span class="s1">exclude: [</span><span class="s3">\n                  </span><span class="s1">// exclude unchanged modules from react-refresh</span><span class="s3">\n                  </span><span class="s1">codeCondition.exclude,</span><span class="s3">\n                  </span><span class="s1">transpilePackagesRegex,</span><span class="s3">\n                  </span><span class="s1">precompileRegex,</span><span class="s3">\n                </span><span class="s1">],</span><span class="s3">\n                </span><span class="s1">issuerLayer: WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n                </span><span class="s1">use: reactRefreshLoaders,</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">oneOf: [</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">...codeCondition,</span><span class="s3">\n              </span><span class="s1">issuerLayer: WEBPACK_LAYERS.apiNode,</span><span class="s3">\n              </span><span class="s1">use: apiRoutesLayerLoaders,</span><span class="s3">\n              </span><span class="s1">// In Node.js, switch back to normal URL handling.</span><span class="s3">\n              </span><span class="s1">// We won't bundle `new URL()` cases in Node.js bundler layer.</span><span class="s3">\n              </span><span class="s1">parser: {</span><span class="s3">\n                </span><span class="s1">url: true,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">...codeCondition,</span><span class="s3">\n              </span><span class="s1">issuerLayer: WEBPACK_LAYERS.apiEdge,</span><span class="s3">\n              </span><span class="s1">use: apiRoutesLayerLoaders,</span><span class="s3">\n              </span><span class="s1">// In Edge runtime, we leave the url handling by default.</span><span class="s3">\n              </span><span class="s1">// The new URL assets will be converted into edge assets through assets loader.</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n              </span><span class="s1">issuerLayer: WEBPACK_LAYERS.middleware,</span><span class="s3">\n              </span><span class="s1">use: middlewareLayerLoaders,</span><span class="s3">\n              </span><span class="s1">resolve: {</span><span class="s3">\n                </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                </span><span class="s1">conditionNames: reactServerCondition,</span><span class="s3">\n                </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                  </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                  </span><span class="s1">layer: WEBPACK_LAYERS.middleware,</span><span class="s3">\n                  </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                  </span><span class="s1">isEdgeServer,</span><span class="s3">\n                </span><span class="s1">}),</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n              </span><span class="s1">issuerLayer: WEBPACK_LAYERS.instrument,</span><span class="s3">\n              </span><span class="s1">use: instrumentLayerLoaders,</span><span class="s3">\n              </span><span class="s1">resolve: {</span><span class="s3">\n                </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                </span><span class="s1">conditionNames: reactServerCondition,</span><span class="s3">\n                </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n                  </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n                  </span><span class="s1">layer: WEBPACK_LAYERS.instrument,</span><span class="s3">\n                  </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n                  </span><span class="s1">isEdgeServer,</span><span class="s3">\n                </span><span class="s1">}),</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">...(hasAppDir</span><span class="s3">\n              </span><span class="s1">? [</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n                    </span><span class="s1">issuerLayer: shouldUseReactServerCondition,</span><span class="s3">\n                    </span><span class="s1">exclude: asyncStoragesRegex,</span><span class="s3">\n                    </span><span class="s1">use: appServerLayerLoaders,</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n                    </span><span class="s1">resourceQuery: new RegExp(</span><span class="s3">\n                      </span><span class="s1">WEBPACK_RESOURCE_QUERIES.edgeSSREntry</span><span class="s3">\n                    </span><span class="s1">),</span><span class="s3">\n                    </span><span class="s1">use: appServerLayerLoaders,</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n                    </span><span class="s1">issuerLayer: WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n                    </span><span class="s1">// Exclude the transpilation of the app layer due to compilation issues</span><span class="s3">\n                    </span><span class="s1">exclude: browserNonTranspileModules,</span><span class="s3">\n                    </span><span class="s1">use: appBrowserLayerLoaders,</span><span class="s3">\n                    </span><span class="s1">resolve: {</span><span class="s3">\n                      </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">{</span><span class="s3">\n                    </span><span class="s1">test: codeCondition.test,</span><span class="s3">\n                    </span><span class="s1">issuerLayer: WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n                    </span><span class="s1">exclude: asyncStoragesRegex,</span><span class="s3">\n                    </span><span class="s1">use: appSSRLayerLoaders,</span><span class="s3">\n                    </span><span class="s1">resolve: {</span><span class="s3">\n                      </span><span class="s1">mainFields: getMainField(compilerType, true),</span><span class="s3">\n                    </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">]</span><span class="s3">\n              </span><span class="s1">: []),</span><span class="s3">\n            </span><span class="s1">{</span><span class="s3">\n              </span><span class="s1">...codeCondition,</span><span class="s3">\n              </span><span class="s1">use: [</span><span class="s3">\n                </span><span class="s1">...reactRefreshLoaders,</span><span class="s3">\n                </span><span class="s1">defaultLoaders.babel,</span><span class="s3">\n                </span><span class="s1">reactCompilerLoader,</span><span class="s3">\n              </span><span class="s1">].filter(Boolean),</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">],</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n\n        </span><span class="s1">...(!config.images.disableStaticImages</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">test: nextImageLoaderRegex,</span><span class="s3">\n                </span><span class="s1">loader: 'next-image-loader',</span><span class="s3">\n                </span><span class="s1">issuer: { not: regexLikeCss },</span><span class="s3">\n                </span><span class="s1">dependency: { not: ['url'] },</span><span class="s3">\n                </span><span class="s1">resourceQuery: {</span><span class="s3">\n                  </span><span class="s1">not: [</span><span class="s3">\n                    </span><span class="s1">new RegExp(WEBPACK_RESOURCE_QUERIES.metadata),</span><span class="s3">\n                    </span><span class="s1">new RegExp(WEBPACK_RESOURCE_QUERIES.metadataRoute),</span><span class="s3">\n                    </span><span class="s1">new RegExp(WEBPACK_RESOURCE_QUERIES.metadataImageMeta),</span><span class="s3">\n                  </span><span class="s1">],</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">options: {</span><span class="s3">\n                  </span><span class="s1">isDev: dev,</span><span class="s3">\n                  </span><span class="s1">compilerType,</span><span class="s3">\n                  </span><span class="s1">basePath: config.basePath,</span><span class="s3">\n                  </span><span class="s1">assetPrefix: config.assetPrefix,</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">...(isEdgeServer</span><span class="s3">\n          </span><span class="s1">? [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">resolve: {</span><span class="s3">\n                  </span><span class="s1">fallback: {</span><span class="s3">\n                    </span><span class="s1">process: require.resolve('./polyfills/process'),</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">: isClient</span><span class="s3">\n            </span><span class="s1">? [</span><span class="s3">\n                </span><span class="s1">{</span><span class="s3">\n                  </span><span class="s1">resolve: {</span><span class="s3">\n                    </span><span class="s1">fallback:</span><span class="s3">\n                      </span><span class="s1">config.experimental.fallbackNodePolyfills === false</span><span class="s3">\n                        </span><span class="s1">? {</span><span class="s3">\n                            </span><span class="s1">assert: false,</span><span class="s3">\n                            </span><span class="s1">buffer: false,</span><span class="s3">\n                            </span><span class="s1">constants: false,</span><span class="s3">\n                            </span><span class="s1">crypto: false,</span><span class="s3">\n                            </span><span class="s1">domain: false,</span><span class="s3">\n                            </span><span class="s1">http: false,</span><span class="s3">\n                            </span><span class="s1">https: false,</span><span class="s3">\n                            </span><span class="s1">os: false,</span><span class="s3">\n                            </span><span class="s1">path: false,</span><span class="s3">\n                            </span><span class="s1">punycode: false,</span><span class="s3">\n                            </span><span class="s1">process: false,</span><span class="s3">\n                            </span><span class="s1">querystring: false,</span><span class="s3">\n                            </span><span class="s1">stream: false,</span><span class="s3">\n                            </span><span class="s1">string_decoder: false,</span><span class="s3">\n                            </span><span class="s1">sys: false,</span><span class="s3">\n                            </span><span class="s1">timers: false,</span><span class="s3">\n                            </span><span class="s1">tty: false,</span><span class="s3">\n                            </span><span class="s1">util: false,</span><span class="s3">\n                            </span><span class="s1">vm: false,</span><span class="s3">\n                            </span><span class="s1">zlib: false,</span><span class="s3">\n                            </span><span class="s1">events: false,</span><span class="s3">\n                            </span><span class="s1">setImmediate: false,</span><span class="s3">\n                          </span><span class="s1">}</span><span class="s3">\n                        </span><span class="s1">: {</span><span class="s3">\n                            </span><span class="s1">assert: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/assert'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">buffer: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/buffer'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">constants: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/constants-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">crypto: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/crypto-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">domain: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/domain-browser'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">http: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/stream-http'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">https: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/https-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">os: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/os-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">path: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/path-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">punycode: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/punycode'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">process: require.resolve('./polyfills/process'),</span><span class="s3">\n                            </span><span class="s1">// Handled in separate alias</span><span class="s3">\n                            </span><span class="s1">querystring: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/querystring-es3'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">stream: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/stream-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">string_decoder: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/string_decoder'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">sys: require.resolve('next/dist/compiled/util'),</span><span class="s3">\n                            </span><span class="s1">timers: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/timers-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">tty: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/tty-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">// Handled in separate alias</span><span class="s3">\n                            </span><span class="s1">// url: require.resolve('url'),</span><span class="s3">\n                            </span><span class="s1">util: require.resolve('next/dist/compiled/util'),</span><span class="s3">\n                            </span><span class="s1">vm: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/vm-browserify'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">zlib: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/browserify-zlib'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">events: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/events'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                            </span><span class="s1">setImmediate: require.resolve(</span><span class="s3">\n                              </span><span class="s1">'next/dist/compiled/setimmediate'</span><span class="s3">\n                            </span><span class="s1">),</span><span class="s3">\n                          </span><span class="s1">},</span><span class="s3">\n                  </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n              </span><span class="s1">]</span><span class="s3">\n            </span><span class="s1">: []),</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">// Mark `image-response.js` as side-effects free to make sure we can</span><span class="s3">\n          </span><span class="s1">// tree-shake it if not used.</span><span class="s3">\n          </span><span class="s1">test: /[</span><span class="s3">\\\\</span><span class="s1">/]next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?server[</span><span class="s3">\\\\</span><span class="s1">/]og[</span><span class="s3">\\\\</span><span class="s1">/]image-response</span><span class="s3">\\</span><span class="s1">.js/,</span><span class="s3">\n          </span><span class="s1">sideEffects: false,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">// Mark the action-client-wrapper module as side-effects free to make sure</span><span class="s3">\n        </span><span class="s1">// the individual transformed module of client action can be tree-shaken.</span><span class="s3">\n        </span><span class="s1">// This will make modules processed by `next-flight-server-reference-proxy-loader` become side-effects free,</span><span class="s3">\n        </span><span class="s1">// then on client side the module ids will become tree-shakable.</span><span class="s3">\n        </span><span class="s1">// e.g. the output of client action module will look like:</span><span class="s3">\n        </span><span class="s1">// `export { a } from 'next-flight-server-reference-proxy-loader?id=idOfA&amp;name=a!</span><span class="s3">\n        </span><span class="s1">// `export { b } from 'next-flight-server-reference-proxy-loader?id=idOfB&amp;name=b!</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">test: /[</span><span class="s3">\\\\</span><span class="s1">/]next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/](esm[</span><span class="s3">\\\\</span><span class="s1">/])?build[</span><span class="s3">\\\\</span><span class="s1">/]webpack[</span><span class="s3">\\\\</span><span class="s1">/]loaders[</span><span class="s3">\\\\</span><span class="s1">/]next-flight-loader[</span><span class="s3">\\\\</span><span class="s1">/]action-client-wrapper</span><span class="s3">\\</span><span class="s1">.js/,</span><span class="s3">\n          </span><span class="s1">sideEffects: false,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">// This loader rule should be before other rules, as it can output code</span><span class="s3">\n          </span><span class="s1">// that still contains `</span><span class="s3">\&quot;</span><span class="s1">use client</span><span class="s3">\&quot;</span><span class="s1">` or `</span><span class="s3">\&quot;</span><span class="s1">use server</span><span class="s3">\&quot;</span><span class="s1">` statements that</span><span class="s3">\n          </span><span class="s1">// needs to be re-transformed by the RSC compilers.</span><span class="s3">\n          </span><span class="s1">// This loader rule works like a bridge between user's import and</span><span class="s3">\n          </span><span class="s1">// the target module behind a package's barrel file. It reads SWC's</span><span class="s3">\n          </span><span class="s1">// analysis result from the previous loader, and directly returns the</span><span class="s3">\n          </span><span class="s1">// code that only exports values that are asked by the user.</span><span class="s3">\n          </span><span class="s1">test: /__barrel_optimize__/,</span><span class="s3">\n          </span><span class="s1">use: ({ resourceQuery }: { resourceQuery: string }) =&gt; {</span><span class="s3">\n            </span><span class="s1">const names = (</span><span class="s3">\n              </span><span class="s1">resourceQuery.match(/</span><span class="s3">\\</span><span class="s1">?names=([^&amp;]+)/)?.[1] || ''</span><span class="s3">\n            </span><span class="s1">).split(',')</span><span class="s3">\n\n            </span><span class="s1">return [</span><span class="s3">\n              </span><span class="s1">{</span><span class="s3">\n                </span><span class="s1">loader: 'next-barrel-loader',</span><span class="s3">\n                </span><span class="s1">options: {</span><span class="s3">\n                  </span><span class="s1">names,</span><span class="s3">\n                  </span><span class="s1">swcCacheDir: path.join(</span><span class="s3">\n                    </span><span class="s1">dir,</span><span class="s3">\n                    </span><span class="s1">config?.distDir ?? '.next',</span><span class="s3">\n                    </span><span class="s1">'cache',</span><span class="s3">\n                    </span><span class="s1">'swc'</span><span class="s3">\n                  </span><span class="s1">),</span><span class="s3">\n                </span><span class="s1">},</span><span class="s3">\n                </span><span class="s1">// This is part of the request value to serve as the module key.</span><span class="s3">\n                </span><span class="s1">// The barrel loader are no-op re-exported modules keyed by</span><span class="s3">\n                </span><span class="s1">// export names.</span><span class="s3">\n                </span><span class="s1">ident: 'next-barrel-loader:' + resourceQuery,</span><span class="s3">\n              </span><span class="s1">},</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">resolve: {</span><span class="s3">\n            </span><span class="s1">alias: {</span><span class="s3">\n              </span><span class="s1">next: NEXT_PROJECT_ROOT,</span><span class="s3">\n            </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">plugins: [</span><span class="s3">\n      </span><span class="s1">isNodeServer &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new bundler.NormalModuleReplacementPlugin(</span><span class="s3">\n          </span><span class="s1">/</span><span class="s3">\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">/(.+)</span><span class="s3">\\</span><span class="s1">.shared-runtime$/,</span><span class="s3">\n          </span><span class="s1">function (resource) {</span><span class="s3">\n            </span><span class="s1">const moduleName = path.basename(</span><span class="s3">\n              </span><span class="s1">resource.request,</span><span class="s3">\n              </span><span class="s1">'.shared-runtime'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">const layer = resource.contextInfo.issuerLayer</span><span class="s3">\n            </span><span class="s1">let runtime</span><span class="s3">\n\n            </span><span class="s1">switch (layer) {</span><span class="s3">\n              </span><span class="s1">case WEBPACK_LAYERS.serverSideRendering:</span><span class="s3">\n              </span><span class="s1">case WEBPACK_LAYERS.reactServerComponents:</span><span class="s3">\n              </span><span class="s1">case WEBPACK_LAYERS.appPagesBrowser:</span><span class="s3">\n              </span><span class="s1">case WEBPACK_LAYERS.actionBrowser:</span><span class="s3">\n                </span><span class="s1">runtime = 'app-page'</span><span class="s3">\n                </span><span class="s1">break</span><span class="s3">\n              </span><span class="s1">case null:</span><span class="s3">\n              </span><span class="s1">case undefined:</span><span class="s3">\n              </span><span class="s1">default:</span><span class="s3">\n                </span><span class="s1">runtime = 'pages'</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">resource.request = `next/dist/server/route-modules/${runtime}/vendored/contexts/${moduleName}`</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">dev &amp;&amp; new MemoryWithGcCachePlugin({ maxGenerations: 5 }),</span><span class="s3">\n      </span><span class="s1">dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(isRspack</span><span class="s3">\n          </span><span class="s1">? // eslint-disable-next-line</span><span class="s3">\n            </span><span class="s1">new (getRspackReactRefresh() as any)({</span><span class="s3">\n              </span><span class="s1">injectLoader: false,</span><span class="s3">\n              </span><span class="s1">injectEntry: false,</span><span class="s3">\n              </span><span class="s1">overlay: false,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: new ReactRefreshWebpackPlugin(webpack)),</span><span class="s3">\n      </span><span class="s1">// Makes sure `Buffer` and `process` are polyfilled in client and flight bundles (same behavior as webpack 4)</span><span class="s3">\n      </span><span class="s1">(isClient || isEdgeServer) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new bundler.ProvidePlugin({</span><span class="s3">\n          </span><span class="s1">// Buffer is used by getInlineScriptSource</span><span class="s3">\n          </span><span class="s1">Buffer: [require.resolve('buffer'), 'Buffer'],</span><span class="s3">\n          </span><span class="s1">// Avoid process being overridden when in web run time</span><span class="s3">\n          </span><span class="s1">...(isClient &amp;&amp; { process: [require.resolve('process')] }),</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n\n      </span><span class="s1">new (getWebpackBundler().DefinePlugin)(</span><span class="s3">\n        </span><span class="s1">getDefineEnv({</span><span class="s3">\n          </span><span class="s1">isTurbopack: false,</span><span class="s3">\n          </span><span class="s1">config,</span><span class="s3">\n          </span><span class="s1">dev,</span><span class="s3">\n          </span><span class="s1">distDir,</span><span class="s3">\n          </span><span class="s1">projectPath: dir,</span><span class="s3">\n          </span><span class="s1">fetchCacheKeyPrefix,</span><span class="s3">\n          </span><span class="s1">hasRewrites,</span><span class="s3">\n          </span><span class="s1">isClient,</span><span class="s3">\n          </span><span class="s1">isEdgeServer,</span><span class="s3">\n          </span><span class="s1">isNodeServer,</span><span class="s3">\n          </span><span class="s1">middlewareMatchers,</span><span class="s3">\n          </span><span class="s1">omitNonDeterministic: isCompileMode,</span><span class="s3">\n          </span><span class="s1">rewrites,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new ReactLoadablePlugin({</span><span class="s3">\n          </span><span class="s1">filename: REACT_LOADABLE_MANIFEST,</span><span class="s3">\n          </span><span class="s1">pagesDir,</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">runtimeAsset: `server/${MIDDLEWARE_REACT_LOADABLE_MANIFEST}.js`,</span><span class="s3">\n          </span><span class="s1">dev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">// rspack doesn't support the parser hooks used here</span><span class="s3">\n      </span><span class="s1">!isRspack &amp;&amp; (isClient || isEdgeServer) &amp;&amp; new DropClientPage(),</span><span class="s3">\n      </span><span class="s1">isNodeServer &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new ((</span><span class="s3">\n          </span><span class="s1">require('./webpack/plugins/next-trace-entrypoints-plugin') as typeof import('./webpack/plugins/next-trace-entrypoints-plugin')</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">.TraceEntryPointsPlugin as typeof import('./webpack/plugins/next-trace-entrypoints-plugin').TraceEntryPointsPlugin)(</span><span class="s3">\n          </span><span class="s1">{</span><span class="s3">\n            </span><span class="s1">rootDir: dir,</span><span class="s3">\n            </span><span class="s1">appDir: appDir,</span><span class="s3">\n            </span><span class="s1">pagesDir: pagesDir,</span><span class="s3">\n            </span><span class="s1">esmExternals: config.experimental.esmExternals,</span><span class="s3">\n            </span><span class="s1">outputFileTracingRoot: config.outputFileTracingRoot,</span><span class="s3">\n            </span><span class="s1">appDirEnabled: hasAppDir,</span><span class="s3">\n            </span><span class="s1">traceIgnores: [],</span><span class="s3">\n            </span><span class="s1">compilerType,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">// Moment.js is an extremely popular library that bundles large locale files</span><span class="s3">\n      </span><span class="s1">// by default due to how Webpack interprets its code. This is a practical</span><span class="s3">\n      </span><span class="s1">// solution that requires the user to opt into importing specific locales.</span><span class="s3">\n      </span><span class="s1">// https://github.com/jmblog/how-to-optimize-momentjs-with-webpack</span><span class="s3">\n      </span><span class="s1">config.excludeDefaultMomentLocales &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new bundler.IgnorePlugin({</span><span class="s3">\n          </span><span class="s1">resourceRegExp: /^</span><span class="s3">\\</span><span class="s1">.</span><span class="s3">\\</span><span class="s1">/locale$/,</span><span class="s3">\n          </span><span class="s1">contextRegExp: /moment$/,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">...(dev</span><span class="s3">\n        </span><span class="s1">? (() =&gt; {</span><span class="s3">\n            </span><span class="s1">// Even though require.cache is server only we have to clear assets from both compilations</span><span class="s3">\n            </span><span class="s1">// This is because the client compilation generates the build manifest that's used on the server side</span><span class="s3">\n            </span><span class="s1">const { NextJsRequireCacheHotReloader } =</span><span class="s3">\n              </span><span class="s1">require('./webpack/plugins/nextjs-require-cache-hot-reloader') as typeof import('./webpack/plugins/nextjs-require-cache-hot-reloader')</span><span class="s3">\n            </span><span class="s1">const devPlugins: any[] = [</span><span class="s3">\n              </span><span class="s1">new NextJsRequireCacheHotReloader({</span><span class="s3">\n                </span><span class="s1">serverComponents: hasAppDir,</span><span class="s3">\n              </span><span class="s1">}),</span><span class="s3">\n            </span><span class="s1">]</span><span class="s3">\n\n            </span><span class="s1">if (isClient || isEdgeServer) {</span><span class="s3">\n              </span><span class="s1">devPlugins.push(new bundler.HotModuleReplacementPlugin())</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n\n            </span><span class="s1">return devPlugins</span><span class="s3">\n          </span><span class="s1">})()</span><span class="s3">\n        </span><span class="s1">: []),</span><span class="s3">\n      </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new bundler.IgnorePlugin({</span><span class="s3">\n          </span><span class="s1">resourceRegExp: /react-is/,</span><span class="s3">\n          </span><span class="s1">contextRegExp: /next[</span><span class="s3">\\\\</span><span class="s1">/]dist[</span><span class="s3">\\\\</span><span class="s1">/]/,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">isNodeOrEdgeCompilation &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new PagesManifestPlugin({</span><span class="s3">\n          </span><span class="s1">dev,</span><span class="s3">\n          </span><span class="s1">appDirEnabled: hasAppDir,</span><span class="s3">\n          </span><span class="s1">isEdgeRuntime: isEdgeServer,</span><span class="s3">\n          </span><span class="s1">distDir: !dev ? distDir : undefined,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">// MiddlewarePlugin should be after DefinePlugin so NEXT_PUBLIC_*</span><span class="s3">\n      </span><span class="s1">// replacement is done before its process.env.* handling</span><span class="s3">\n      </span><span class="s1">isEdgeServer &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new MiddlewarePlugin({</span><span class="s3">\n          </span><span class="s1">dev,</span><span class="s3">\n          </span><span class="s1">sriEnabled: !dev &amp;&amp; !!config.experimental.sri?.algorithm,</span><span class="s3">\n          </span><span class="s1">rewrites,</span><span class="s3">\n          </span><span class="s1">edgeEnvironments: {</span><span class="s3">\n            </span><span class="s1">__NEXT_BUILD_ID: buildId,</span><span class="s3">\n            </span><span class="s1">NEXT_SERVER_ACTIONS_ENCRYPTION_KEY: encryptionKey,</span><span class="s3">\n            </span><span class="s1">__NEXT_PREVIEW_MODE_ID: previewProps.previewModeId,</span><span class="s3">\n            </span><span class="s1">__NEXT_PREVIEW_MODE_SIGNING_KEY: previewProps.previewModeSigningKey,</span><span class="s3">\n            </span><span class="s1">__NEXT_PREVIEW_MODE_ENCRYPTION_KEY:</span><span class="s3">\n              </span><span class="s1">previewProps.previewModeEncryptionKey,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new BuildManifestPlugin({</span><span class="s3">\n          </span><span class="s1">buildId,</span><span class="s3">\n          </span><span class="s1">rewrites,</span><span class="s3">\n          </span><span class="s1">isDevFallback,</span><span class="s3">\n          </span><span class="s1">appDirEnabled: hasAppDir,</span><span class="s3">\n          </span><span class="s1">clientRouterFilters,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">isRspack</span><span class="s3">\n        </span><span class="s1">? new RspackProfilingPlugin({ runWebpackSpan })</span><span class="s3">\n        </span><span class="s1">: new ProfilingPlugin({ runWebpackSpan, rootDir: dir }),</span><span class="s3">\n      </span><span class="s1">new WellKnownErrorsPlugin(),</span><span class="s3">\n      </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new CopyFilePlugin({</span><span class="s3">\n          </span><span class="s1">// file path to build output of `@next/polyfill-nomodule`</span><span class="s3">\n          </span><span class="s1">filePath: require.resolve('./polyfills/polyfill-nomodule'),</span><span class="s3">\n          </span><span class="s1">cacheKey: process.env.__NEXT_VERSION as string,</span><span class="s3">\n          </span><span class="s1">name: `static/chunks/polyfills${dev ? '' : '-[hash]'}.js`,</span><span class="s3">\n          </span><span class="s1">minimize: false,</span><span class="s3">\n          </span><span class="s1">info: {</span><span class="s3">\n            </span><span class="s1">[CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL]: 1,</span><span class="s3">\n            </span><span class="s1">// This file is already minified</span><span class="s3">\n            </span><span class="s1">minimized: true,</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">hasAppDir &amp;&amp; isClient &amp;&amp; new AppBuildManifestPlugin({ dev }),</span><span class="s3">\n      </span><span class="s1">hasAppDir &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(isClient</span><span class="s3">\n          </span><span class="s1">? new ClientReferenceManifestPlugin({</span><span class="s3">\n              </span><span class="s1">dev,</span><span class="s3">\n              </span><span class="s1">appDir,</span><span class="s3">\n              </span><span class="s1">experimentalInlineCss: !!config.experimental.inlineCss,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: new FlightClientEntryPlugin({</span><span class="s3">\n              </span><span class="s1">appDir,</span><span class="s3">\n              </span><span class="s1">dev,</span><span class="s3">\n              </span><span class="s1">isEdgeServer,</span><span class="s3">\n              </span><span class="s1">encryptionKey,</span><span class="s3">\n            </span><span class="s1">})),</span><span class="s3">\n      </span><span class="s1">hasAppDir &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new NextTypesPlugin({</span><span class="s3">\n          </span><span class="s1">dir,</span><span class="s3">\n          </span><span class="s1">distDir: config.distDir,</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n          </span><span class="s1">dev,</span><span class="s3">\n          </span><span class="s1">isEdgeServer,</span><span class="s3">\n          </span><span class="s1">pageExtensions: config.pageExtensions,</span><span class="s3">\n          </span><span class="s1">cacheLifeConfig: config.experimental.cacheLife,</span><span class="s3">\n          </span><span class="s1">originalRewrites,</span><span class="s3">\n          </span><span class="s1">originalRedirects,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">!!config.experimental.sri?.algorithm &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new SubresourceIntegrityPlugin(config.experimental.sri.algorithm),</span><span class="s3">\n      </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new NextFontManifestPlugin({</span><span class="s3">\n          </span><span class="s1">appDir,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">isClient &amp;&amp;</span><span class="s3">\n        </span><span class="s1">config.experimental.cssChunking &amp;&amp;</span><span class="s3">\n        </span><span class="s1">(isRspack</span><span class="s3">\n          </span><span class="s1">? new (getRspackCore().experiments.CssChunkingPlugin)({</span><span class="s3">\n              </span><span class="s1">strict: config.experimental.cssChunking === 'strict',</span><span class="s3">\n              </span><span class="s1">nextjs: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: new CssChunkingPlugin(</span><span class="s3">\n              </span><span class="s1">config.experimental.cssChunking === 'strict'</span><span class="s3">\n            </span><span class="s1">)),</span><span class="s3">\n      </span><span class="s1">telemetryPlugin,</span><span class="s3">\n      </span><span class="s1">!dev &amp;&amp;</span><span class="s3">\n        </span><span class="s1">isNodeServer &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new (</span><span class="s3">\n          </span><span class="s1">require('./webpack/plugins/telemetry-plugin/telemetry-plugin') as typeof import('./webpack/plugins/telemetry-plugin/telemetry-plugin')</span><span class="s3">\n        </span><span class="s1">).TelemetryPlugin(new Map()),</span><span class="s3">\n      </span><span class="s1">shouldEnableSlowModuleDetection &amp;&amp;</span><span class="s3">\n        </span><span class="s1">new (</span><span class="s3">\n          </span><span class="s1">require('./webpack/plugins/slow-module-detection-plugin') as typeof import('./webpack/plugins/slow-module-detection-plugin')</span><span class="s3">\n        </span><span class="s1">).default({</span><span class="s3">\n          </span><span class="s1">compilerType,</span><span class="s3">\n          </span><span class="s1">...config.experimental.slowModuleDetection!,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">].filter(Boolean as any as ExcludesFalse),</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Support tsconfig and jsconfig baseUrl</span><span class="s3">\n  </span><span class="s1">// Only add the baseUrl if it's explicitly set in tsconfig/jsconfig</span><span class="s3">\n  </span><span class="s1">if (resolvedBaseUrl &amp;&amp; !resolvedBaseUrl.isImplicit) {</span><span class="s3">\n    </span><span class="s1">webpackConfig.resolve?.modules?.push(resolvedBaseUrl.baseUrl)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// always add JsConfigPathsPlugin to allow hot-reloading</span><span class="s3">\n  </span><span class="s1">// if the config is added/removed</span><span class="s3">\n  </span><span class="s1">webpackConfig.resolve?.plugins?.unshift(</span><span class="s3">\n    </span><span class="s1">new JsConfigPathsPlugin(</span><span class="s3">\n      </span><span class="s1">jsConfig?.compilerOptions?.paths || {},</span><span class="s3">\n      </span><span class="s1">resolvedBaseUrl</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">const webpack5Config = webpackConfig as webpack.Configuration</span><span class="s3">\n\n  </span><span class="s1">if (isEdgeServer) {</span><span class="s3">\n    </span><span class="s1">webpack5Config.module?.rules?.unshift({</span><span class="s3">\n      </span><span class="s1">test: /</span><span class="s3">\\</span><span class="s1">.wasm$/,</span><span class="s3">\n      </span><span class="s1">loader: 'next-middleware-wasm-loader',</span><span class="s3">\n      </span><span class="s1">type: 'javascript/auto',</span><span class="s3">\n      </span><span class="s1">resourceQuery: /module/i,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">webpack5Config.module?.rules?.unshift({</span><span class="s3">\n      </span><span class="s1">dependency: 'url',</span><span class="s3">\n      </span><span class="s1">loader: 'next-middleware-asset-loader',</span><span class="s3">\n      </span><span class="s1">type: 'javascript/auto',</span><span class="s3">\n      </span><span class="s1">layer: WEBPACK_LAYERS.edgeAsset,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">webpack5Config.module?.rules?.unshift({</span><span class="s3">\n      </span><span class="s1">issuerLayer: WEBPACK_LAYERS.edgeAsset,</span><span class="s3">\n      </span><span class="s1">type: 'asset/source',</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">webpack5Config.experiments = {</span><span class="s3">\n    </span><span class="s1">layers: true,</span><span class="s3">\n    </span><span class="s1">cacheUnaffected: true,</span><span class="s3">\n    </span><span class="s1">buildHttp: Array.isArray(config.experimental.urlImports)</span><span class="s3">\n      </span><span class="s1">? {</span><span class="s3">\n          </span><span class="s1">allowedUris: config.experimental.urlImports,</span><span class="s3">\n          </span><span class="s1">cacheLocation: path.join(dir, 'next.lock/data'),</span><span class="s3">\n          </span><span class="s1">lockfileLocation: path.join(dir, 'next.lock/lock.json'),</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">: config.experimental.urlImports</span><span class="s3">\n        </span><span class="s1">? {</span><span class="s3">\n            </span><span class="s1">cacheLocation: path.join(dir, 'next.lock/data'),</span><span class="s3">\n            </span><span class="s1">lockfileLocation: path.join(dir, 'next.lock/lock.json'),</span><span class="s3">\n            </span><span class="s1">...config.experimental.urlImports,</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">: undefined,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">webpack5Config.module!.parser = {</span><span class="s3">\n    </span><span class="s1">javascript: {</span><span class="s3">\n      </span><span class="s1">url: 'relative',</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">webpack5Config.module!.generator = {</span><span class="s3">\n    </span><span class="s1">asset: {</span><span class="s3">\n      </span><span class="s1">filename: 'static/media/[name].[hash:8][ext]',</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!webpack5Config.output) {</span><span class="s3">\n    </span><span class="s1">webpack5Config.output = {}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (isClient) {</span><span class="s3">\n    </span><span class="s1">webpack5Config.output.trustedTypes = 'nextjs#bundler'</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (isClient || isEdgeServer) {</span><span class="s3">\n    </span><span class="s1">webpack5Config.output.enabledLibraryTypes = ['assign']</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// This enables managedPaths for all node_modules</span><span class="s3">\n  </span><span class="s1">// and also for the unplugged folder when using yarn pnp</span><span class="s3">\n  </span><span class="s1">// It also add the yarn cache to the immutable paths</span><span class="s3">\n  </span><span class="s1">webpack5Config.snapshot = {}</span><span class="s3">\n  </span><span class="s1">if (process.versions.pnp === '3') {</span><span class="s3">\n    </span><span class="s1">webpack5Config.snapshot.managedPaths = [</span><span class="s3">\n      </span><span class="s1">/^(.+?(?:[</span><span class="s3">\\\\</span><span class="s1">/]</span><span class="s3">\\</span><span class="s1">.yarn[</span><span class="s3">\\\\</span><span class="s1">/]unplugged[</span><span class="s3">\\\\</span><span class="s1">/][^</span><span class="s3">\\\\</span><span class="s1">/]+)?[</span><span class="s3">\\\\</span><span class="s1">/]node_modules[</span><span class="s3">\\\\</span><span class="s1">/])/,</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">webpack5Config.snapshot.managedPaths = [/^(.+?[</span><span class="s3">\\\\</span><span class="s1">/]node_modules[</span><span class="s3">\\\\</span><span class="s1">/])/]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (process.versions.pnp === '3') {</span><span class="s3">\n    </span><span class="s1">webpack5Config.snapshot.immutablePaths = [</span><span class="s3">\n      </span><span class="s1">/^(.+?[</span><span class="s3">\\\\</span><span class="s1">/]cache[</span><span class="s3">\\\\</span><span class="s1">/][^</span><span class="s3">\\\\</span><span class="s1">/]+</span><span class="s3">\\</span><span class="s1">.zip[</span><span class="s3">\\\\</span><span class="s1">/]node_modules[</span><span class="s3">\\\\</span><span class="s1">/])/,</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (dev) {</span><span class="s3">\n    </span><span class="s1">if (!webpack5Config.optimization) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.optimization = {}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// For Server Components, it's necessary to have provided exports collected</span><span class="s3">\n    </span><span class="s1">// to generate the correct flight manifest.</span><span class="s3">\n    </span><span class="s1">if (!hasAppDir) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.optimization.providedExports = false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">webpack5Config.optimization.usedExports = false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const configVars = JSON.stringify({</span><span class="s3">\n    </span><span class="s1">optimizePackageImports: config?.experimental?.optimizePackageImports,</span><span class="s3">\n    </span><span class="s1">crossOrigin: config.crossOrigin,</span><span class="s3">\n    </span><span class="s1">pageExtensions: pageExtensions,</span><span class="s3">\n    </span><span class="s1">trailingSlash: config.trailingSlash,</span><span class="s3">\n    </span><span class="s1">buildActivityPosition:</span><span class="s3">\n      </span><span class="s1">config.devIndicators === false</span><span class="s3">\n        </span><span class="s1">? undefined</span><span class="s3">\n        </span><span class="s1">: config.devIndicators.position,</span><span class="s3">\n    </span><span class="s1">productionBrowserSourceMaps: !!config.productionBrowserSourceMaps,</span><span class="s3">\n    </span><span class="s1">reactStrictMode: config.reactStrictMode,</span><span class="s3">\n    </span><span class="s1">optimizeCss: config.experimental.optimizeCss,</span><span class="s3">\n    </span><span class="s1">nextScriptWorkers: config.experimental.nextScriptWorkers,</span><span class="s3">\n    </span><span class="s1">scrollRestoration: config.experimental.scrollRestoration,</span><span class="s3">\n    </span><span class="s1">basePath: config.basePath,</span><span class="s3">\n    </span><span class="s1">excludeDefaultMomentLocales: config.excludeDefaultMomentLocales,</span><span class="s3">\n    </span><span class="s1">assetPrefix: config.assetPrefix,</span><span class="s3">\n    </span><span class="s1">disableOptimizedLoading,</span><span class="s3">\n    </span><span class="s1">isEdgeRuntime: isEdgeServer,</span><span class="s3">\n    </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n    </span><span class="s1">webpack: !!config.webpack,</span><span class="s3">\n    </span><span class="s1">hasRewrites,</span><span class="s3">\n    </span><span class="s1">swcLoader: useSWCLoader,</span><span class="s3">\n    </span><span class="s1">removeConsole: config.compiler?.removeConsole,</span><span class="s3">\n    </span><span class="s1">reactRemoveProperties: config.compiler?.reactRemoveProperties,</span><span class="s3">\n    </span><span class="s1">styledComponents: config.compiler?.styledComponents,</span><span class="s3">\n    </span><span class="s1">relay: config.compiler?.relay,</span><span class="s3">\n    </span><span class="s1">emotion: config.compiler?.emotion,</span><span class="s3">\n    </span><span class="s1">modularizeImports: config.modularizeImports,</span><span class="s3">\n    </span><span class="s1">imageLoaderFile: config.images.loaderFile,</span><span class="s3">\n    </span><span class="s1">clientTraceMetadata: config.experimental.clientTraceMetadata,</span><span class="s3">\n    </span><span class="s1">serverSourceMaps: config.experimental.serverSourceMaps,</span><span class="s3">\n    </span><span class="s1">serverReferenceHashSalt: encryptionKey,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">const cache: any = {</span><span class="s3">\n    </span><span class="s1">type: 'filesystem',</span><span class="s3">\n    </span><span class="s1">// Disable memory cache in development in favor of our own MemoryWithGcCachePlugin.</span><span class="s3">\n    </span><span class="s1">maxMemoryGenerations: dev ? 0 : Infinity, // Infinity is default value for production in webpack currently.</span><span class="s3">\n    </span><span class="s1">// Includes:</span><span class="s3">\n    </span><span class="s1">//  - Next.js location on disk (some loaders use absolute paths and some resolve options depend on absolute paths)</span><span class="s3">\n    </span><span class="s1">//  - Next.js version</span><span class="s3">\n    </span><span class="s1">//  - next.config.js keys that affect compilation</span><span class="s3">\n    </span><span class="s1">version: `${__dirname}|${process.env.__NEXT_VERSION}|${configVars}`,</span><span class="s3">\n    </span><span class="s1">cacheDirectory: path.join(distDir, 'cache', 'webpack'),</span><span class="s3">\n    </span><span class="s1">// For production builds, it's more efficient to compress all cache files together instead of compression each one individually.</span><span class="s3">\n    </span><span class="s1">// So we disable compression here and allow the build runner to take care of compressing the cache as a whole.</span><span class="s3">\n    </span><span class="s1">// For local development, we still want to compress the cache files individually to avoid I/O bottlenecks</span><span class="s3">\n    </span><span class="s1">// as we are seeing 1~10 seconds of fs I/O time from user reports.</span><span class="s3">\n    </span><span class="s1">compression: dev ? 'gzip' : false,</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Adds `next.config.js` as a buildDependency when custom webpack config is provided</span><span class="s3">\n  </span><span class="s1">if (config.webpack &amp;&amp; config.configFile) {</span><span class="s3">\n    </span><span class="s1">cache.buildDependencies = {</span><span class="s3">\n      </span><span class="s1">config: [config.configFile],</span><span class="s3">\n      </span><span class="s1">// We don't want to use the webpack default buildDependencies as we already include the next.js version</span><span class="s3">\n      </span><span class="s1">defaultWebpack: [],</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">cache.buildDependencies = {</span><span class="s3">\n      </span><span class="s1">// We don't want to use the webpack default buildDependencies as we already include the next.js version</span><span class="s3">\n      </span><span class="s1">defaultWebpack: [],</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">webpack5Config.plugins?.push((compiler) =&gt; {</span><span class="s3">\n    </span><span class="s1">compiler.hooks.done.tap('next-build-dependencies', (stats) =&gt; {</span><span class="s3">\n      </span><span class="s1">const buildDependencies = stats.compilation.buildDependencies</span><span class="s3">\n      </span><span class="s1">const nextPackage = path.dirname(require.resolve('next/package.json'))</span><span class="s3">\n      </span><span class="s1">// Remove all next.js build dependencies, they are already covered by the cacheVersion</span><span class="s3">\n      </span><span class="s1">// and next.js also imports the output files which leads to broken caching.</span><span class="s3">\n      </span><span class="s1">for (const dep of buildDependencies) {</span><span class="s3">\n        </span><span class="s1">if (dep.startsWith(nextPackage)) {</span><span class="s3">\n          </span><span class="s1">buildDependencies.delete(dep)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">webpack5Config.cache = cache</span><span class="s3">\n\n  </span><span class="s1">if (process.env.NEXT_WEBPACK_LOGGING) {</span><span class="s3">\n    </span><span class="s1">const infra = process.env.NEXT_WEBPACK_LOGGING.includes('infrastructure')</span><span class="s3">\n    </span><span class="s1">const profileClient =</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_WEBPACK_LOGGING.includes('profile-client')</span><span class="s3">\n    </span><span class="s1">const profileServer =</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_WEBPACK_LOGGING.includes('profile-server')</span><span class="s3">\n    </span><span class="s1">const summaryClient =</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_WEBPACK_LOGGING.includes('summary-client')</span><span class="s3">\n    </span><span class="s1">const summaryServer =</span><span class="s3">\n      </span><span class="s1">process.env.NEXT_WEBPACK_LOGGING.includes('summary-server')</span><span class="s3">\n\n    </span><span class="s1">const profile =</span><span class="s3">\n      </span><span class="s1">(profileClient &amp;&amp; isClient) || (profileServer &amp;&amp; isNodeOrEdgeCompilation)</span><span class="s3">\n    </span><span class="s1">const summary =</span><span class="s3">\n      </span><span class="s1">(summaryClient &amp;&amp; isClient) || (summaryServer &amp;&amp; isNodeOrEdgeCompilation)</span><span class="s3">\n\n    </span><span class="s1">const logDefault = !infra &amp;&amp; !profile &amp;&amp; !summary</span><span class="s3">\n\n    </span><span class="s1">if (logDefault || infra) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.infrastructureLogging = {</span><span class="s3">\n        </span><span class="s1">level: 'verbose',</span><span class="s3">\n        </span><span class="s1">debug: /FileSystemInfo/,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (logDefault || profile) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.plugins!.push((compiler: webpack.Compiler) =&gt; {</span><span class="s3">\n        </span><span class="s1">compiler.hooks.done.tap('next-webpack-logging', (stats) =&gt; {</span><span class="s3">\n          </span><span class="s1">console.log(</span><span class="s3">\n            </span><span class="s1">stats.toString({</span><span class="s3">\n              </span><span class="s1">colors: true,</span><span class="s3">\n              </span><span class="s1">logging: logDefault ? 'log' : 'verbose',</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">} else if (summary) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.plugins!.push((compiler: webpack.Compiler) =&gt; {</span><span class="s3">\n        </span><span class="s1">compiler.hooks.done.tap('next-webpack-logging', (stats) =&gt; {</span><span class="s3">\n          </span><span class="s1">console.log(</span><span class="s3">\n            </span><span class="s1">stats.toString({</span><span class="s3">\n              </span><span class="s1">preset: 'summary',</span><span class="s3">\n              </span><span class="s1">colors: true,</span><span class="s3">\n              </span><span class="s1">timings: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (profile) {</span><span class="s3">\n      </span><span class="s1">const ProgressPlugin =</span><span class="s3">\n        </span><span class="s1">webpack.ProgressPlugin as unknown as typeof webpack.ProgressPlugin</span><span class="s3">\n      </span><span class="s1">webpack5Config.plugins!.push(</span><span class="s3">\n        </span><span class="s1">new ProgressPlugin({</span><span class="s3">\n          </span><span class="s1">profile: true,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">webpack5Config.profile = true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">webpackConfig = await buildConfiguration(webpackConfig, {</span><span class="s3">\n    </span><span class="s1">supportedBrowsers,</span><span class="s3">\n    </span><span class="s1">rootDirectory: dir,</span><span class="s3">\n    </span><span class="s1">customAppFile: pagesDir</span><span class="s3">\n      </span><span class="s1">? new RegExp(escapeStringRegexp(path.join(pagesDir, `_app`)))</span><span class="s3">\n      </span><span class="s1">: undefined,</span><span class="s3">\n    </span><span class="s1">hasAppDir,</span><span class="s3">\n    </span><span class="s1">isDevelopment: dev,</span><span class="s3">\n    </span><span class="s1">isServer: isNodeOrEdgeCompilation,</span><span class="s3">\n    </span><span class="s1">isEdgeRuntime: isEdgeServer,</span><span class="s3">\n    </span><span class="s1">targetWeb: isClient || isEdgeServer,</span><span class="s3">\n    </span><span class="s1">assetPrefix: config.assetPrefix || '',</span><span class="s3">\n    </span><span class="s1">sassOptions: config.sassOptions,</span><span class="s3">\n    </span><span class="s1">productionBrowserSourceMaps: config.productionBrowserSourceMaps,</span><span class="s3">\n    </span><span class="s1">future: config.future,</span><span class="s3">\n    </span><span class="s1">experimental: config.experimental,</span><span class="s3">\n    </span><span class="s1">disableStaticImages: config.images.disableStaticImages,</span><span class="s3">\n    </span><span class="s1">transpilePackages: config.transpilePackages,</span><span class="s3">\n    </span><span class="s1">serverSourceMaps: config.experimental.serverSourceMaps,</span><span class="s3">\n  </span><span class="s1">})</span><span class="s3">\n\n  </span><span class="s1">// @ts-ignore Cache exists</span><span class="s3">\n  </span><span class="s1">webpackConfig.cache.name = `${webpackConfig.name}-${webpackConfig.mode}${</span><span class="s3">\n    </span><span class="s1">isDevFallback ? '-fallback' : ''</span><span class="s3">\n  </span><span class="s1">}`</span><span class="s3">\n\n  </span><span class="s1">if (dev) {</span><span class="s3">\n    </span><span class="s1">if (webpackConfig.module) {</span><span class="s3">\n      </span><span class="s1">webpackConfig.module.unsafeCache = (module: any) =&gt;</span><span class="s3">\n        </span><span class="s1">!UNSAFE_CACHE_REGEX.test(module.resource)</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">webpackConfig.module = {</span><span class="s3">\n        </span><span class="s1">unsafeCache: (module: any) =&gt; !UNSAFE_CACHE_REGEX.test(module.resource),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let originalDevtool = webpackConfig.devtool</span><span class="s3">\n  </span><span class="s1">if (typeof config.webpack === 'function') {</span><span class="s3">\n    </span><span class="s1">const pluginCountBefore = webpackConfig.plugins?.length</span><span class="s3">\n\n    </span><span class="s1">webpackConfig = config.webpack(webpackConfig, {</span><span class="s3">\n      </span><span class="s1">dir,</span><span class="s3">\n      </span><span class="s1">dev,</span><span class="s3">\n      </span><span class="s1">isServer: isNodeOrEdgeCompilation,</span><span class="s3">\n      </span><span class="s1">buildId,</span><span class="s3">\n      </span><span class="s1">config,</span><span class="s3">\n      </span><span class="s1">defaultLoaders,</span><span class="s3">\n      </span><span class="s1">totalPages: Object.keys(entrypoints).length,</span><span class="s3">\n      </span><span class="s1">webpack: bundler,</span><span class="s3">\n      </span><span class="s1">...(isNodeOrEdgeCompilation</span><span class="s3">\n        </span><span class="s1">? {</span><span class="s3">\n            </span><span class="s1">nextRuntime: isEdgeServer ? 'edge' : 'nodejs',</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">: {}),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">if (telemetryPlugin &amp;&amp; pluginCountBefore) {</span><span class="s3">\n      </span><span class="s1">const pluginCountAfter = webpackConfig.plugins?.length</span><span class="s3">\n      </span><span class="s1">if (pluginCountAfter) {</span><span class="s3">\n        </span><span class="s1">const pluginsChanged = pluginCountAfter !== pluginCountBefore</span><span class="s3">\n        </span><span class="s1">telemetryPlugin.addUsage('webpackPlugins', pluginsChanged ? 1 : 0)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!webpackConfig) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`Webpack config is undefined. You may have forgot to return properly from within the </span><span class="s3">\&quot;</span><span class="s1">webpack</span><span class="s3">\&quot; </span><span class="s1">method of your ${config.configFileName}.</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n          </span><span class="s1">'See more info here https://nextjs.org/docs/messages/undefined-webpack-config'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (dev &amp;&amp; originalDevtool !== webpackConfig.devtool) {</span><span class="s3">\n      </span><span class="s1">webpackConfig.devtool = originalDevtool</span><span class="s3">\n      </span><span class="s1">devtoolRevertWarning(originalDevtool)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-shadow</span><span class="s3">\n    </span><span class="s1">const webpack5Config = webpackConfig as webpack.Configuration</span><span class="s3">\n\n    </span><span class="s1">// disable lazy compilation of entries as next.js has it's own method here</span><span class="s3">\n    </span><span class="s1">if (webpack5Config.experiments?.lazyCompilation === true) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.experiments.lazyCompilation = {</span><span class="s3">\n        </span><span class="s1">entries: false,</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else if (</span><span class="s3">\n      </span><span class="s1">typeof webpack5Config.experiments?.lazyCompilation === 'object' &amp;&amp;</span><span class="s3">\n      </span><span class="s1">webpack5Config.experiments.lazyCompilation.entries !== false</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">webpack5Config.experiments.lazyCompilation.entries = false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof (webpackConfig as any).then === 'function') {</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">'&gt; Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const rules = webpackConfig.module?.rules || []</span><span class="s3">\n\n  </span><span class="s1">const customSvgRule = rules.find(</span><span class="s3">\n    </span><span class="s1">(rule): rule is webpack.RuleSetRule =&gt;</span><span class="s3">\n      </span><span class="s1">(rule &amp;&amp;</span><span class="s3">\n        </span><span class="s1">typeof rule === 'object' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">rule.loader !== 'next-image-loader' &amp;&amp;</span><span class="s3">\n        </span><span class="s1">'test' in rule &amp;&amp;</span><span class="s3">\n        </span><span class="s1">rule.test instanceof RegExp &amp;&amp;</span><span class="s3">\n        </span><span class="s1">rule.test.test('.svg')) ||</span><span class="s3">\n      </span><span class="s1">false</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">if (customSvgRule &amp;&amp; hasAppDir) {</span><span class="s3">\n    </span><span class="s1">// Create React aliases for SVG components that were transformed using a</span><span class="s3">\n    </span><span class="s1">// custom webpack config with e.g. the `@svgr/webpack` loader, or the</span><span class="s3">\n    </span><span class="s1">// `babel-plugin-inline-react-svg` plugin.</span><span class="s3">\n    </span><span class="s1">rules.push({</span><span class="s3">\n      </span><span class="s1">test: customSvgRule.test,</span><span class="s3">\n      </span><span class="s1">oneOf: [</span><span class="s3">\n        </span><span class="s1">WEBPACK_LAYERS.reactServerComponents,</span><span class="s3">\n        </span><span class="s1">WEBPACK_LAYERS.serverSideRendering,</span><span class="s3">\n        </span><span class="s1">WEBPACK_LAYERS.appPagesBrowser,</span><span class="s3">\n      </span><span class="s1">].map((layer) =&gt; ({</span><span class="s3">\n        </span><span class="s1">issuerLayer: layer,</span><span class="s3">\n        </span><span class="s1">resolve: {</span><span class="s3">\n          </span><span class="s1">alias: createVendoredReactAliases(bundledReactChannel, {</span><span class="s3">\n            </span><span class="s1">reactProductionProfiling,</span><span class="s3">\n            </span><span class="s1">layer,</span><span class="s3">\n            </span><span class="s1">isBrowser: isClient,</span><span class="s3">\n            </span><span class="s1">isEdgeServer,</span><span class="s3">\n          </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">})),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!config.images.disableStaticImages) {</span><span class="s3">\n    </span><span class="s1">const nextImageRule = rules.find(</span><span class="s3">\n      </span><span class="s1">(rule) =&gt;</span><span class="s3">\n        </span><span class="s1">rule &amp;&amp; typeof rule === 'object' &amp;&amp; rule.loader === 'next-image-loader'</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">if (customSvgRule &amp;&amp; nextImageRule &amp;&amp; typeof nextImageRule === 'object') {</span><span class="s3">\n      </span><span class="s1">// Exclude svg if the user already defined it in custom</span><span class="s3">\n      </span><span class="s1">// webpack config such as the `@svgr/webpack` loader, or</span><span class="s3">\n      </span><span class="s1">// the `babel-plugin-inline-react-svg` plugin.</span><span class="s3">\n      </span><span class="s1">nextImageRule.test = /</span><span class="s3">\\</span><span class="s1">.(png|jpg|jpeg|gif|webp|avif|ico|bmp)$/i</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">config.experimental.craCompat &amp;&amp;</span><span class="s3">\n    </span><span class="s1">webpackConfig.module?.rules &amp;&amp;</span><span class="s3">\n    </span><span class="s1">webpackConfig.plugins</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">// CRA allows importing non-webpack handled files with file-loader</span><span class="s3">\n    </span><span class="s1">// these need to be the last rule to prevent catching other items</span><span class="s3">\n    </span><span class="s1">// https://github.com/facebook/create-react-app/blob/fddce8a9e21bf68f37054586deb0c8636a45f50b/packages/react-scripts/config/webpack.config.js#L594</span><span class="s3">\n    </span><span class="s1">const fileLoaderExclude = [/</span><span class="s3">\\</span><span class="s1">.(js|mjs|jsx|ts|tsx|json)$/]</span><span class="s3">\n    </span><span class="s1">const fileLoader = {</span><span class="s3">\n      </span><span class="s1">exclude: fileLoaderExclude,</span><span class="s3">\n      </span><span class="s1">issuer: fileLoaderExclude,</span><span class="s3">\n      </span><span class="s1">type: 'asset/resource',</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const topRules = []</span><span class="s3">\n    </span><span class="s1">const innerRules = []</span><span class="s3">\n\n    </span><span class="s1">for (const rule of webpackConfig.module.rules) {</span><span class="s3">\n      </span><span class="s1">if (!rule || typeof rule !== 'object') continue</span><span class="s3">\n      </span><span class="s1">if (rule.resolve) {</span><span class="s3">\n        </span><span class="s1">topRules.push(rule)</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">rule.oneOf &amp;&amp;</span><span class="s3">\n          </span><span class="s1">!(rule.test || rule.exclude || rule.resource || rule.issuer)</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">rule.oneOf.forEach((r) =&gt; innerRules.push(r))</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">innerRules.push(rule)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">webpackConfig.module.rules = [</span><span class="s3">\n      </span><span class="s1">...(topRules as any),</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">oneOf: [...innerRules, fileLoader],</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Backwards compat with webpack-dev-middleware options object</span><span class="s3">\n  </span><span class="s1">if (typeof config.webpackDevMiddleware === 'function') {</span><span class="s3">\n    </span><span class="s1">const options = config.webpackDevMiddleware({</span><span class="s3">\n      </span><span class="s1">watchOptions: webpackConfig.watchOptions,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">if (options.watchOptions) {</span><span class="s3">\n      </span><span class="s1">webpackConfig.watchOptions = options.watchOptions</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function canMatchCss(rule: webpack.RuleSetCondition | undefined): boolean {</span><span class="s3">\n    </span><span class="s1">if (!rule) {</span><span class="s3">\n      </span><span class="s1">return false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const fileNames = [</span><span class="s3">\n      </span><span class="s1">'/tmp/NEXTJS_CSS_DETECTION_FILE.css',</span><span class="s3">\n      </span><span class="s1">'/tmp/NEXTJS_CSS_DETECTION_FILE.scss',</span><span class="s3">\n      </span><span class="s1">'/tmp/NEXTJS_CSS_DETECTION_FILE.sass',</span><span class="s3">\n      </span><span class="s1">'/tmp/NEXTJS_CSS_DETECTION_FILE.less',</span><span class="s3">\n      </span><span class="s1">'/tmp/NEXTJS_CSS_DETECTION_FILE.styl',</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n\n    </span><span class="s1">if (rule instanceof RegExp &amp;&amp; fileNames.some((input) =&gt; rule.test(input))) {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (typeof rule === 'function') {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">fileNames.some((input) =&gt; {</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">if (rule(input)) {</span><span class="s3">\n              </span><span class="s1">return true</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">} catch {}</span><span class="s3">\n          </span><span class="s1">return false</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return true</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (Array.isArray(rule) &amp;&amp; rule.some(canMatchCss)) {</span><span class="s3">\n      </span><span class="s1">return true</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return false</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const hasUserCssConfig =</span><span class="s3">\n    </span><span class="s1">webpackConfig.module?.rules?.some(</span><span class="s3">\n      </span><span class="s1">(rule: any) =&gt; canMatchCss(rule.test) || canMatchCss(rule.include)</span><span class="s3">\n    </span><span class="s1">) ?? false</span><span class="s3">\n\n  </span><span class="s1">if (hasUserCssConfig) {</span><span class="s3">\n    </span><span class="s1">// only show warning for one build</span><span class="s3">\n    </span><span class="s1">if (isNodeOrEdgeCompilation) {</span><span class="s3">\n      </span><span class="s1">console.warn(</span><span class="s3">\n        </span><span class="s1">yellow(bold('Warning: ')) +</span><span class="s3">\n          </span><span class="s1">bold(</span><span class="s3">\n            </span><span class="s1">'Built-in CSS support is being disabled due to custom CSS configuration being detected.</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n          </span><span class="s1">) +</span><span class="s3">\n          </span><span class="s1">'See here for more info: https://nextjs.org/docs/messages/built-in-css-disabled</span><span class="s3">\\</span><span class="s1">n'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (webpackConfig.module?.rules?.length) {</span><span class="s3">\n      </span><span class="s1">// Remove default CSS Loaders</span><span class="s3">\n      </span><span class="s1">webpackConfig.module.rules.forEach((r) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (!r || typeof r !== 'object') return</span><span class="s3">\n        </span><span class="s1">if (Array.isArray(r.oneOf)) {</span><span class="s3">\n          </span><span class="s1">r.oneOf = r.oneOf.filter(</span><span class="s3">\n            </span><span class="s1">(o) =&gt; (o as any)[Symbol.for('__next_css_remove')] !== true</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (webpackConfig.plugins?.length) {</span><span class="s3">\n      </span><span class="s1">// Disable CSS Extraction Plugin</span><span class="s3">\n      </span><span class="s1">webpackConfig.plugins = webpackConfig.plugins.filter(</span><span class="s3">\n        </span><span class="s1">(p) =&gt; (p as any).__next_css_remove !== true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (webpackConfig.optimization?.minimizer?.length) {</span><span class="s3">\n      </span><span class="s1">// Disable CSS Minifier</span><span class="s3">\n      </span><span class="s1">webpackConfig.optimization.minimizer =</span><span class="s3">\n        </span><span class="s1">webpackConfig.optimization.minimizer.filter(</span><span class="s3">\n          </span><span class="s1">(e) =&gt; (e as any).__next_css_remove !== true</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Inject missing React Refresh loaders so that development mode is fast:</span><span class="s3">\n  </span><span class="s1">if (dev &amp;&amp; isClient) {</span><span class="s3">\n    </span><span class="s1">attachReactRefresh(webpackConfig, defaultLoaders.babel)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Backwards compat for `main.js` entry key</span><span class="s3">\n  </span><span class="s1">// and setup of dependencies between entries</span><span class="s3">\n  </span><span class="s1">// we can't do that in the initial entry for</span><span class="s3">\n  </span><span class="s1">// backward-compat reasons</span><span class="s3">\n  </span><span class="s1">const originalEntry: any = webpackConfig.entry</span><span class="s3">\n  </span><span class="s1">if (typeof originalEntry !== 'undefined') {</span><span class="s3">\n    </span><span class="s1">const updatedEntry = async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const entry: webpack.EntryObject =</span><span class="s3">\n        </span><span class="s1">typeof originalEntry === 'function'</span><span class="s3">\n          </span><span class="s1">? await originalEntry()</span><span class="s3">\n          </span><span class="s1">: originalEntry</span><span class="s3">\n      </span><span class="s1">// Server compilation doesn't have main.js</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">clientEntries &amp;&amp;</span><span class="s3">\n        </span><span class="s1">Array.isArray(entry['main.js']) &amp;&amp;</span><span class="s3">\n        </span><span class="s1">entry['main.js'].length &gt; 0</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">const originalFile = clientEntries[</span><span class="s3">\n          </span><span class="s1">CLIENT_STATIC_FILES_RUNTIME_MAIN</span><span class="s3">\n        </span><span class="s1">] as string</span><span class="s3">\n        </span><span class="s1">entry[CLIENT_STATIC_FILES_RUNTIME_MAIN] = [</span><span class="s3">\n          </span><span class="s1">...entry['main.js'],</span><span class="s3">\n          </span><span class="s1">originalFile,</span><span class="s3">\n        </span><span class="s1">]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">delete entry['main.js']</span><span class="s3">\n\n      </span><span class="s1">for (const name of Object.keys(entry)) {</span><span class="s3">\n        </span><span class="s1">entry[name] = finalizeEntrypoint({</span><span class="s3">\n          </span><span class="s1">value: entry[name],</span><span class="s3">\n          </span><span class="s1">compilerType,</span><span class="s3">\n          </span><span class="s1">name,</span><span class="s3">\n          </span><span class="s1">hasAppDir,</span><span class="s3">\n        </span><span class="s1">})</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return entry</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// @ts-ignore webpack 5 typings needed</span><span class="s3">\n    </span><span class="s1">webpackConfig.entry = updatedEntry</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!dev &amp;&amp; typeof webpackConfig.entry === 'function') {</span><span class="s3">\n    </span><span class="s1">// entry is always a function</span><span class="s3">\n    </span><span class="s1">webpackConfig.entry = await webpackConfig.entry()</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return webpackConfig</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getNextRootParamsRules({</span><span class="s3">\n  </span><span class="s1">isRootParamsEnabled,</span><span class="s3">\n  </span><span class="s1">isClient,</span><span class="s3">\n  </span><span class="s1">appDir,</span><span class="s3">\n  </span><span class="s1">pageExtensions,</span><span class="s3">\n</span><span class="s1">}: {</span><span class="s3">\n  </span><span class="s1">isRootParamsEnabled: boolean</span><span class="s3">\n  </span><span class="s1">isClient: boolean</span><span class="s3">\n  </span><span class="s1">appDir: string | undefined</span><span class="s3">\n  </span><span class="s1">pageExtensions: string[]</span><span class="s3">\n</span><span class="s1">}): webpack.RuleSetRule[] {</span><span class="s3">\n  </span><span class="s1">// Match resolved import of 'next/root-params'</span><span class="s3">\n  </span><span class="s1">const nextRootParamsModule = path.join(NEXT_PROJECT_ROOT, 'root-params.js')</span><span class="s3">\n\n  </span><span class="s1">const createInvalidImportRule = (message: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">resource: nextRootParamsModule,</span><span class="s3">\n      </span><span class="s1">loader: 'next-invalid-import-error-loader',</span><span class="s3">\n      </span><span class="s1">options: {</span><span class="s3">\n        </span><span class="s1">message,</span><span class="s3">\n      </span><span class="s1">} satisfies InvalidImportLoaderOpts,</span><span class="s3">\n    </span><span class="s1">} satisfies webpack.RuleSetRule</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Hard-error if the flag is not enabled, regardless of if we're on the server or on the client.</span><span class="s3">\n  </span><span class="s1">if (!isRootParamsEnabled) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">createInvalidImportRule(</span><span class="s3">\n        \&quot;</span><span class="s1">'next/root-params' can only be imported when `experimental.rootParams` is enabled.</span><span class="s3">\&quot;\n      </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// If there's no app-dir (and thus no layouts), there's no sensible way to use 'next/root-params',</span><span class="s3">\n  </span><span class="s1">// because we wouldn't generate any getters.</span><span class="s3">\n  </span><span class="s1">if (!appDir) {</span><span class="s3">\n    </span><span class="s1">return [</span><span class="s3">\n      </span><span class="s1">createInvalidImportRule(</span><span class="s3">\n        \&quot;</span><span class="s1">'next/root-params' can only be used with the App Directory.</span><span class="s3">\&quot;\n      </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// In general, the compiler should prevent importing 'next/root-params' from client modules, but it doesn't catch everything.</span><span class="s3">\n  </span><span class="s1">// If an import slips through our validation, make it error.</span><span class="s3">\n  </span><span class="s1">const invalidClientImportRule = createInvalidImportRule(</span><span class="s3">\n    \&quot;</span><span class="s1">'next/root-params' cannot be imported from a Client Component module. It should only be used from a Server Component.</span><span class="s3">\&quot;\n  </span><span class="s1">)</span><span class="s3">\n\n  </span><span class="s1">// in the browser compilation we can skip the server rules, because we know all imports will be invalid.</span><span class="s3">\n  </span><span class="s1">if (isClient) {</span><span class="s3">\n    </span><span class="s1">return [invalidClientImportRule]</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return [</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">oneOf: [</span><span class="s3">\n        </span><span class="s1">{</span><span class="s3">\n          </span><span class="s1">resource: nextRootParamsModule,</span><span class="s3">\n          </span><span class="s1">issuerLayer: shouldUseReactServerCondition as (</span><span class="s3">\n            </span><span class="s1">layer: string</span><span class="s3">\n          </span><span class="s1">) =&gt; boolean,</span><span class="s3">\n          </span><span class="s1">loader: 'next-root-params-loader',</span><span class="s3">\n          </span><span class="s1">options: {</span><span class="s3">\n            </span><span class="s1">appDir,</span><span class="s3">\n            </span><span class="s1">pageExtensions,</span><span class="s3">\n          </span><span class="s1">} satisfies RootParamsLoaderOpts,</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">// if the rule above didn't match, we're in the SSR layer (or something else that isn't server-only).</span><span class="s3">\n        </span><span class="s1">invalidClientImportRule,</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">]</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;NODE_BASE_ESM_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_BASE_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ESM_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_RESOLVE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;attachReactRefresh&quot;</span><span class="s0">,</span><span class="s1">&quot;babelIncludeRegexes&quot;</span><span class="s0">,</span><span class="s1">&quot;getBaseWebpackConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheDirectories&quot;</span><span class="s0">,</span><span class="s1">&quot;hasExternalOtelApiPackage&quot;</span><span class="s0">,</span><span class="s1">&quot;loadProjectInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;nextImageLoaderRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;EXTERNAL_PACKAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_TRANSPILED_PACKAGES&quot;</span><span class="s0">,</span><span class="s1">&quot;parseInt&quot;</span><span class="s0">,</span><span class="s1">&quot;React&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;browserNonTranspileModules&quot;</span><span class="s0">,</span><span class="s1">&quot;precompileRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;asyncStoragesRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;nodePathList&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_PATH&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;platform&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;p&quot;</span><span class="s0">,</span><span class="s1">&quot;baseWatchOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;freeze&quot;</span><span class="s0">,</span><span class="s1">&quot;aggregateTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;ignored&quot;</span><span class="s0">,</span><span class="s1">&quot;isModuleCSS&quot;</span><span class="s0">,</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;devtoolRevertWarning&quot;</span><span class="s0">,</span><span class="s1">&quot;execOnce&quot;</span><span class="s0">,</span><span class="s1">&quot;devtool&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;yellow&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;loggedSwcDisabled&quot;</span><span class="s0">,</span><span class="s1">&quot;loggedIgnoredCompilerOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRefreshLoaderName&quot;</span><span class="s0">,</span><span class="s1">&quot;getReactRefreshLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RSPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;getRspackReactRefresh&quot;</span><span class="s0">,</span><span class="s1">&quot;loader&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;targetLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRefreshLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;rules&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;rule&quot;</span><span class="s0">,</span><span class="s1">&quot;curr&quot;</span><span class="s0">,</span><span class="s1">&quot;use&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;r&quot;</span><span class="s0">,</span><span class="s1">&quot;idx&quot;</span><span class="s0">,</span><span class="s1">&quot;findIndex&quot;</span><span class="s0">,</span><span class="s1">&quot;splice&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencyType&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;exportsFields&quot;</span><span class="s0">,</span><span class="s1">&quot;importsFields&quot;</span><span class="s0">,</span><span class="s1">&quot;conditionNames&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptionFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;extensions&quot;</span><span class="s0">,</span><span class="s1">&quot;enforceExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;symlinks&quot;</span><span class="s0">,</span><span class="s1">&quot;mainFields&quot;</span><span class="s0">,</span><span class="s1">&quot;mainFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;roots&quot;</span><span class="s0">,</span><span class="s1">&quot;fullySpecified&quot;</span><span class="s0">,</span><span class="s1">&quot;preferRelative&quot;</span><span class="s0">,</span><span class="s1">&quot;preferAbsolute&quot;</span><span class="s0">,</span><span class="s1">&quot;restrictions&quot;</span><span class="s0">,</span><span class="s1">&quot;alias&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;jsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;jsConfigPath&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedBaseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;loadJsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;supportedBrowsers&quot;</span><span class="s0">,</span><span class="s1">&quot;getSupportedBrowsers&quot;</span><span class="s0">,</span><span class="s1">&quot;UNSAFE_CACHE_REGEX&quot;</span><span class="s0">,</span><span class="s1">&quot;configs&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;cfg&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;encryptionKey&quot;</span><span class="s0">,</span><span class="s1">&quot;compilerType&quot;</span><span class="s0">,</span><span class="s1">&quot;entrypoints&quot;</span><span class="s0">,</span><span class="s1">&quot;isDevFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;pagesDir&quot;</span><span class="s0">,</span><span class="s1">&quot;reactProductionProfiling&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;originalRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;originalRedirects&quot;</span><span class="s0">,</span><span class="s1">&quot;runWebpackSpan&quot;</span><span class="s0">,</span><span class="s1">&quot;appDir&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareMatchers&quot;</span><span class="s0">,</span><span class="s1">&quot;noMangling&quot;</span><span class="s0">,</span><span class="s1">&quot;clientRouterFilters&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchCacheKeyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;isCompileMode&quot;</span><span class="s0">,</span><span class="s1">&quot;previewProps&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack5Config&quot;</span><span class="s0">,</span><span class="s1">&quot;bundler&quot;</span><span class="s0">,</span><span class="s1">&quot;getWebpackBundler&quot;</span><span class="s0">,</span><span class="s1">&quot;isClient&quot;</span><span class="s0">,</span><span class="s1">&quot;COMPILER_NAMES&quot;</span><span class="s0">,</span><span class="s1">&quot;client&quot;</span><span class="s0">,</span><span class="s1">&quot;isEdgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeServer&quot;</span><span class="s0">,</span><span class="s1">&quot;server&quot;</span><span class="s0">,</span><span class="s1">&quot;isRspack&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;FlightClientEntryPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILTIN_FLIGHT_CLIENT_ENTRY_PLUGIN&quot;</span><span class="s0">,</span><span class="s1">&quot;RspackFlightClientEntryPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;NextFlightClientEntryPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;isNodeOrEdgeCompilation&quot;</span><span class="s0">,</span><span class="s1">&quot;hasRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAppDir&quot;</span><span class="s0">,</span><span class="s1">&quot;disableOptimizedLoading&quot;</span><span class="s0">,</span><span class="s1">&quot;bundledReactChannel&quot;</span><span class="s0">,</span><span class="s1">&quot;needsExperimentalReact&quot;</span><span class="s0">,</span><span class="s1">&quot;babelConfigFile&quot;</span><span class="s0">,</span><span class="s1">&quot;getBabelConfigFile&quot;</span><span class="s0">,</span><span class="s1">&quot;hasCustomExportOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;useSWCLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;forceSwcTransforms&quot;</span><span class="s0">,</span><span class="s1">&quot;SWCBinaryTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;binaryTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;getBinaryMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;target&quot;</span><span class="s0">,</span><span class="s1">&quot;Log&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;loadBindings&quot;</span><span class="s0">,</span><span class="s1">&quot;useWasmBinary&quot;</span><span class="s0">,</span><span class="s1">&quot;finalTranspilePackages&quot;</span><span class="s0">,</span><span class="s1">&quot;transpilePackages&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;pkg&quot;</span><span class="s0">,</span><span class="s1">&quot;optimizePackageImports&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;compiler&quot;</span><span class="s0">,</span><span class="s1">&quot;excludeCache&quot;</span><span class="s0">,</span><span class="s1">&quot;exclude&quot;</span><span class="s0">,</span><span class="s1">&quot;excludePath&quot;</span><span class="s0">,</span><span class="s1">&quot;cached&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldExclude&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;isResourceInPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldIncludeExternalDirs&quot;</span><span class="s0">,</span><span class="s1">&quot;externalDir&quot;</span><span class="s0">,</span><span class="s1">&quot;codeCondition&quot;</span><span class="s0">,</span><span class="s1">&quot;or&quot;</span><span class="s0">,</span><span class="s1">&quot;include&quot;</span><span class="s0">,</span><span class="s1">&quot;babelLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;getBabelLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;reactCompiler&quot;</span><span class="s0">,</span><span class="s1">&quot;reactCompilerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;getReactCompilerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;swcTraceProfilingInitialized&quot;</span><span class="s0">,</span><span class="s1">&quot;getSwcLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;extraOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;swcTraceProfiling&quot;</span><span class="s0">,</span><span class="s1">&quot;initCustomTraceSubscriber&quot;</span><span class="s0">,</span><span class="s1">&quot;Date&quot;</span><span class="s0">,</span><span class="s1">&quot;now&quot;</span><span class="s0">,</span><span class="s1">&quot;useBuiltinSwcLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILTIN_SWC_LOADER&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;isServer&quot;</span><span class="s0">,</span><span class="s1">&quot;rootDir&quot;</span><span class="s0">,</span><span class="s1">&quot;hasReactRefresh&quot;</span><span class="s0">,</span><span class="s1">&quot;swcCacheDir&quot;</span><span class="s0">,</span><span class="s1">&quot;serverReferenceHashSalt&quot;</span><span class="s0">,</span><span class="s1">&quot;pnp&quot;</span><span class="s0">,</span><span class="s1">&quot;versions&quot;</span><span class="s0">,</span><span class="s1">&quot;optimizeServerReact&quot;</span><span class="s0">,</span><span class="s1">&quot;modularizeImports&quot;</span><span class="s0">,</span><span class="s1">&quot;decorators&quot;</span><span class="s0">,</span><span class="s1">&quot;compilerOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalDecorators&quot;</span><span class="s0">,</span><span class="s1">&quot;emitDecoratorMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;regeneratorRuntimePath&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;swcServerLayerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;serverComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;bundleLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_LAYERS&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;esm&quot;</span><span class="s0">,</span><span class="s1">&quot;swcSSRLayerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;serverSideRendering&quot;</span><span class="s0">,</span><span class="s1">&quot;swcBrowserLayerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;appPagesBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;swcDefaultLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;babel&quot;</span><span class="s0">,</span><span class="s1">&quot;appServerLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;middlewareLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;middleware&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRefreshLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;createClientLayerLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;isBrowserLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRefresh&quot;</span><span class="s0">,</span><span class="s1">&quot;appBrowserLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;appSSRLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;apiRoutesLayerLoaders&quot;</span><span class="s0">,</span><span class="s1">&quot;apiNode&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensions&quot;</span><span class="s0">,</span><span class="s1">&quot;outputPath&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_DIRECTORY&quot;</span><span class="s0">,</span><span class="s1">&quot;reactServerCondition&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeConditionNames&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRefreshEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;clientEntries&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_AMP&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_PROJECT_ROOT_DIST_CLIENT&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_MAIN&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_MAIN_APP&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;extensionAlias&quot;</span><span class="s0">,</span><span class="s1">&quot;createWebpackAliases&quot;</span><span class="s0">,</span><span class="s1">&quot;getMainField&quot;</span><span class="s0">,</span><span class="s1">&quot;plugins&quot;</span><span class="s0">,</span><span class="s1">&quot;OptionalPeerDependencyResolverPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;tsConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;configFile&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFrameworkPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;topLevelFrameworkPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;visitedFrameworkPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;addPackagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;packageName&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeToPath&quot;</span><span class="s0">,</span><span class="s1">&quot;paths&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;packageJsonPath&quot;</span><span class="s0">,</span><span class="s1">&quot;directory&quot;</span><span class="s0">,</span><span class="s1">&quot;dependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;crossOrigin&quot;</span><span class="s0">,</span><span class="s1">&quot;serverExternalPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;externalPackageConflicts&quot;</span><span class="s0">,</span><span class="s1">&quot;optOutBundlingPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;optOutBundlingPackageRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;transpilePackagesRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;handleExternals&quot;</span><span class="s0">,</span><span class="s1">&quot;makeExternalHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;transpiledPackages&quot;</span><span class="s0">,</span><span class="s1">&quot;pageExtensionsRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;aliasCodeConditionTest&quot;</span><span class="s0">,</span><span class="s1">&quot;builtinModules&quot;</span><span class="s0">,</span><span class="s1">&quot;bunExternals&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldEnableSlowModuleDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;slowModuleDetection&quot;</span><span class="s0">,</span><span class="s1">&quot;getParallelism&quot;</span><span class="s0">,</span><span class="s1">&quot;override&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_WEBPACK_PARALLELISM&quot;</span><span class="s0">,</span><span class="s1">&quot;telemetryPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;TelemetryPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;relay&quot;</span><span class="s0">,</span><span class="s1">&quot;styledComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;reactRemoveProperties&quot;</span><span class="s0">,</span><span class="s1">&quot;removeConsole&quot;</span><span class="s0">,</span><span class="s1">&quot;jsxImportSource&quot;</span><span class="s0">,</span><span class="s1">&quot;emotion&quot;</span><span class="s0">,</span><span class="s1">&quot;skipMiddlewareUrlNormalize&quot;</span><span class="s0">,</span><span class="s1">&quot;skipTrailingSlashRedirect&quot;</span><span class="s0">,</span><span class="s1">&quot;esmExternals&quot;</span><span class="s0">,</span><span class="s1">&quot;parallelism&quot;</span><span class="s0">,</span><span class="s1">&quot;externalsPresets&quot;</span><span class="s0">,</span><span class="s1">&quot;node&quot;</span><span class="s0">,</span><span class="s1">&quot;externals&quot;</span><span class="s0">,</span><span class="s1">&quot;getEdgePolyfilledModules&quot;</span><span class="s0">,</span><span class="s1">&quot;handleWebpackExternalForEdgeRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;contextInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;getResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;issuerLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveContext&quot;</span><span class="s0">,</span><span class="s1">&quot;requestToResolve&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveData&quot;</span><span class="s0">,</span><span class="s1">&quot;isEsm&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptionFileData&quot;</span><span class="s0">,</span><span class="s1">&quot;optimization&quot;</span><span class="s0">,</span><span class="s1">&quot;emitOnErrors&quot;</span><span class="s0">,</span><span class="s1">&quot;checkWasmTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeEnv&quot;</span><span class="s0">,</span><span class="s1">&quot;splitChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;extractRootNodeModule&quot;</span><span class="s0">,</span><span class="s1">&quot;modulePath&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheGroups&quot;</span><span class="s0">,</span><span class="s1">&quot;vendor&quot;</span><span class="s0">,</span><span class="s1">&quot;chunks&quot;</span><span class="s0">,</span><span class="s1">&quot;reuseExistingChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;minSize&quot;</span><span class="s0">,</span><span class="s1">&quot;minChunks&quot;</span><span class="s0">,</span><span class="s1">&quot;maxAsyncRequests&quot;</span><span class="s0">,</span><span class="s1">&quot;maxInitialRequests&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleId&quot;</span><span class="s0">,</span><span class="s1">&quot;nameForCondition&quot;</span><span class="s0">,</span><span class="s1">&quot;rootModule&quot;</span><span class="s0">,</span><span class="s1">&quot;hash&quot;</span><span class="s0">,</span><span class="s1">&quot;crypto&quot;</span><span class="s0">,</span><span class="s1">&quot;createHash&quot;</span><span class="s0">,</span><span class="s1">&quot;update&quot;</span><span class="s0">,</span><span class="s1">&quot;digest&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultVendors&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;frameworkCacheGroup&quot;</span><span class="s0">,</span><span class="s1">&quot;layer&quot;</span><span class="s0">,</span><span class="s1">&quot;isWebpackDefaultLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;resource&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgPath&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;priority&quot;</span><span class="s0">,</span><span class="s1">&quot;enforce&quot;</span><span class="s0">,</span><span class="s1">&quot;libCacheGroup&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;updateHash&quot;</span><span class="s0">,</span><span class="s1">&quot;libIdent&quot;</span><span class="s0">,</span><span class="s1">&quot;substring&quot;</span><span class="s0">,</span><span class="s1">&quot;chunk&quot;</span><span class="s0">,</span><span class="s1">&quot;framework&quot;</span><span class="s0">,</span><span class="s1">&quot;RSPACK_DEFAULT_LAYERS_REGEX&quot;</span><span class="s0">,</span><span class="s1">&quot;lib&quot;</span><span class="s0">,</span><span class="s1">&quot;runtimeChunk&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_WEBPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;minimize&quot;</span><span class="s0">,</span><span class="s1">&quot;serverMinification&quot;</span><span class="s0">,</span><span class="s1">&quot;minimizer&quot;</span><span class="s0">,</span><span class="s1">&quot;getRspackCore&quot;</span><span class="s0">,</span><span class="s1">&quot;SwcJsMinimizerRspackPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;minimizerOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;compress&quot;</span><span class="s0">,</span><span class="s1">&quot;inline&quot;</span><span class="s0">,</span><span class="s1">&quot;global_defs&quot;</span><span class="s0">,</span><span class="s1">&quot;mangle&quot;</span><span class="s0">,</span><span class="s1">&quot;reserved&quot;</span><span class="s0">,</span><span class="s1">&quot;disableCharFreq&quot;</span><span class="s0">,</span><span class="s1">&quot;MinifyPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_TEST_MODE&quot;</span><span class="s0">,</span><span class="s1">&quot;useLightningcss&quot;</span><span class="s0">,</span><span class="s1">&quot;LightningCssMinimizerRspackPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;targets&quot;</span><span class="s0">,</span><span class="s1">&quot;CssMinimizerPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;postcssOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;annotation&quot;</span><span class="s0">,</span><span class="s1">&quot;watchOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;poll&quot;</span><span class="s0">,</span><span class="s1">&quot;pollIntervalMs&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;publicPath&quot;</span><span class="s0">,</span><span class="s1">&quot;assetPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;library&quot;</span><span class="s0">,</span><span class="s1">&quot;libraryTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;hotUpdateChunkFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;hotUpdateMainFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;chunkFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;strictModuleExceptionHandling&quot;</span><span class="s0">,</span><span class="s1">&quot;crossOriginLoading&quot;</span><span class="s0">,</span><span class="s1">&quot;devtoolModuleFilenameTemplate&quot;</span><span class="s0">,</span><span class="s1">&quot;webassemblyModuleFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;hashFunction&quot;</span><span class="s0">,</span><span class="s1">&quot;hashDigestLength&quot;</span><span class="s0">,</span><span class="s1">&quot;performance&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;__dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;GROUP&quot;</span><span class="s0">,</span><span class="s1">&quot;serverOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;neutralTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;createServerOnlyClientOnlyAliases&quot;</span><span class="s0">,</span><span class="s1">&quot;not&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;shared&quot;</span><span class="s0">,</span><span class="s1">&quot;resourceQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;WEBPACK_RESOURCE_QUERIES&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;isWebpackBundledLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;createNextApiEsmAliases&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldUseReactServerCondition&quot;</span><span class="s0">,</span><span class="s1">&quot;createAppRouterApiAliases&quot;</span><span class="s0">,</span><span class="s1">&quot;isWebpackClientOnlyLayer&quot;</span><span class="s0">,</span><span class="s1">&quot;and&quot;</span><span class="s0">,</span><span class="s1">&quot;metadata&quot;</span><span class="s0">,</span><span class="s1">&quot;metadataImageMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;createVendoredReactAliases&quot;</span><span class="s0">,</span><span class="s1">&quot;isBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;getNextRootParamsRules&quot;</span><span class="s0">,</span><span class="s1">&quot;isRootParamsEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;rootParams&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheComponents&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeSSREntry&quot;</span><span class="s0">,</span><span class="s1">&quot;oneOf&quot;</span><span class="s0">,</span><span class="s1">&quot;parser&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;apiEdge&quot;</span><span class="s0">,</span><span class="s1">&quot;instrument&quot;</span><span class="s0">,</span><span class="s1">&quot;images&quot;</span><span class="s0">,</span><span class="s1">&quot;disableStaticImages&quot;</span><span class="s0">,</span><span class="s1">&quot;issuer&quot;</span><span class="s0">,</span><span class="s1">&quot;regexLikeCss&quot;</span><span class="s0">,</span><span class="s1">&quot;dependency&quot;</span><span class="s0">,</span><span class="s1">&quot;isDev&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackNodePolyfills&quot;</span><span class="s0">,</span><span class="s1">&quot;assert&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;constants&quot;</span><span class="s0">,</span><span class="s1">&quot;domain&quot;</span><span class="s0">,</span><span class="s1">&quot;http&quot;</span><span class="s0">,</span><span class="s1">&quot;https&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;punycode&quot;</span><span class="s0">,</span><span class="s1">&quot;querystring&quot;</span><span class="s0">,</span><span class="s1">&quot;stream&quot;</span><span class="s0">,</span><span class="s1">&quot;string_decoder&quot;</span><span class="s0">,</span><span class="s1">&quot;sys&quot;</span><span class="s0">,</span><span class="s1">&quot;timers&quot;</span><span class="s0">,</span><span class="s1">&quot;tty&quot;</span><span class="s0">,</span><span class="s1">&quot;util&quot;</span><span class="s0">,</span><span class="s1">&quot;vm&quot;</span><span class="s0">,</span><span class="s1">&quot;zlib&quot;</span><span class="s0">,</span><span class="s1">&quot;events&quot;</span><span class="s0">,</span><span class="s1">&quot;setImmediate&quot;</span><span class="s0">,</span><span class="s1">&quot;sideEffects&quot;</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">,</span><span class="s1">&quot;ident&quot;</span><span class="s0">,</span><span class="s1">&quot;next&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_PROJECT_ROOT&quot;</span><span class="s0">,</span><span class="s1">&quot;NormalModuleReplacementPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleName&quot;</span><span class="s0">,</span><span class="s1">&quot;basename&quot;</span><span class="s0">,</span><span class="s1">&quot;runtime&quot;</span><span class="s0">,</span><span class="s1">&quot;actionBrowser&quot;</span><span class="s0">,</span><span class="s1">&quot;MemoryWithGcCachePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;maxGenerations&quot;</span><span class="s0">,</span><span class="s1">&quot;injectLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;injectEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;overlay&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactRefreshWebpackPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;webpack&quot;</span><span class="s0">,</span><span class="s1">&quot;ProvidePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;Buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;DefinePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefineEnv&quot;</span><span class="s0">,</span><span class="s1">&quot;isTurbopack&quot;</span><span class="s0">,</span><span class="s1">&quot;projectPath&quot;</span><span class="s0">,</span><span class="s1">&quot;omitNonDeterministic&quot;</span><span class="s0">,</span><span class="s1">&quot;ReactLoadablePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;REACT_LOADABLE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;runtimeAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;MIDDLEWARE_REACT_LOADABLE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;DropClientPage&quot;</span><span class="s0">,</span><span class="s1">&quot;TraceEntryPointsPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;outputFileTracingRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;traceIgnores&quot;</span><span class="s0">,</span><span class="s1">&quot;excludeDefaultMomentLocales&quot;</span><span class="s0">,</span><span class="s1">&quot;IgnorePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;resourceRegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;contextRegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;NextJsRequireCacheHotReloader&quot;</span><span class="s0">,</span><span class="s1">&quot;devPlugins&quot;</span><span class="s0">,</span><span class="s1">&quot;HotModuleReplacementPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;PagesManifestPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;isEdgeRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;MiddlewarePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;sriEnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;sri&quot;</span><span class="s0">,</span><span class="s1">&quot;algorithm&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeEnvironments&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_BUILD_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_SERVER_ACTIONS_ENCRYPTION_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PREVIEW_MODE_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;previewModeId&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PREVIEW_MODE_SIGNING_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;previewModeSigningKey&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_PREVIEW_MODE_ENCRYPTION_KEY&quot;</span><span class="s0">,</span><span class="s1">&quot;previewModeEncryptionKey&quot;</span><span class="s0">,</span><span class="s1">&quot;BuildManifestPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;RspackProfilingPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;ProfilingPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;WellKnownErrorsPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;CopyFilePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;filePath&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_VERSION&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL&quot;</span><span class="s0">,</span><span class="s1">&quot;minimized&quot;</span><span class="s0">,</span><span class="s1">&quot;AppBuildManifestPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;ClientReferenceManifestPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;experimentalInlineCss&quot;</span><span class="s0">,</span><span class="s1">&quot;inlineCss&quot;</span><span class="s0">,</span><span class="s1">&quot;NextTypesPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheLifeConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheLife&quot;</span><span class="s0">,</span><span class="s1">&quot;SubresourceIntegrityPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;NextFontManifestPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;cssChunking&quot;</span><span class="s0">,</span><span class="s1">&quot;experiments&quot;</span><span class="s0">,</span><span class="s1">&quot;CssChunkingPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;strict&quot;</span><span class="s0">,</span><span class="s1">&quot;nextjs&quot;</span><span class="s0">,</span><span class="s1">&quot;isImplicit&quot;</span><span class="s0">,</span><span class="s1">&quot;baseUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;JsConfigPathsPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;edgeAsset&quot;</span><span class="s0">,</span><span class="s1">&quot;layers&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheUnaffected&quot;</span><span class="s0">,</span><span class="s1">&quot;buildHttp&quot;</span><span class="s0">,</span><span class="s1">&quot;urlImports&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedUris&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheLocation&quot;</span><span class="s0">,</span><span class="s1">&quot;lockfileLocation&quot;</span><span class="s0">,</span><span class="s1">&quot;javascript&quot;</span><span class="s0">,</span><span class="s1">&quot;generator&quot;</span><span class="s0">,</span><span class="s1">&quot;asset&quot;</span><span class="s0">,</span><span class="s1">&quot;trustedTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;enabledLibraryTypes&quot;</span><span class="s0">,</span><span class="s1">&quot;snapshot&quot;</span><span class="s0">,</span><span class="s1">&quot;managedPaths&quot;</span><span class="s0">,</span><span class="s1">&quot;immutablePaths&quot;</span><span class="s0">,</span><span class="s1">&quot;providedExports&quot;</span><span class="s0">,</span><span class="s1">&quot;usedExports&quot;</span><span class="s0">,</span><span class="s1">&quot;configVars&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;buildActivityPosition&quot;</span><span class="s0">,</span><span class="s1">&quot;devIndicators&quot;</span><span class="s0">,</span><span class="s1">&quot;position&quot;</span><span class="s0">,</span><span class="s1">&quot;productionBrowserSourceMaps&quot;</span><span class="s0">,</span><span class="s1">&quot;reactStrictMode&quot;</span><span class="s0">,</span><span class="s1">&quot;optimizeCss&quot;</span><span class="s0">,</span><span class="s1">&quot;nextScriptWorkers&quot;</span><span class="s0">,</span><span class="s1">&quot;scrollRestoration&quot;</span><span class="s0">,</span><span class="s1">&quot;swcLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;imageLoaderFile&quot;</span><span class="s0">,</span><span class="s1">&quot;loaderFile&quot;</span><span class="s0">,</span><span class="s1">&quot;clientTraceMetadata&quot;</span><span class="s0">,</span><span class="s1">&quot;serverSourceMaps&quot;</span><span class="s0">,</span><span class="s1">&quot;maxMemoryGenerations&quot;</span><span class="s0">,</span><span class="s1">&quot;Infinity&quot;</span><span class="s0">,</span><span class="s1">&quot;compression&quot;</span><span class="s0">,</span><span class="s1">&quot;buildDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultWebpack&quot;</span><span class="s0">,</span><span class="s1">&quot;hooks&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;tap&quot;</span><span class="s0">,</span><span class="s1">&quot;stats&quot;</span><span class="s0">,</span><span class="s1">&quot;compilation&quot;</span><span class="s0">,</span><span class="s1">&quot;nextPackage&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;dep&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_WEBPACK_LOGGING&quot;</span><span class="s0">,</span><span class="s1">&quot;infra&quot;</span><span class="s0">,</span><span class="s1">&quot;profileClient&quot;</span><span class="s0">,</span><span class="s1">&quot;profileServer&quot;</span><span class="s0">,</span><span class="s1">&quot;summaryClient&quot;</span><span class="s0">,</span><span class="s1">&quot;summaryServer&quot;</span><span class="s0">,</span><span class="s1">&quot;profile&quot;</span><span class="s0">,</span><span class="s1">&quot;summary&quot;</span><span class="s0">,</span><span class="s1">&quot;logDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;infrastructureLogging&quot;</span><span class="s0">,</span><span class="s1">&quot;level&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;colors&quot;</span><span class="s0">,</span><span class="s1">&quot;logging&quot;</span><span class="s0">,</span><span class="s1">&quot;preset&quot;</span><span class="s0">,</span><span class="s1">&quot;timings&quot;</span><span class="s0">,</span><span class="s1">&quot;ProgressPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;buildConfiguration&quot;</span><span class="s0">,</span><span class="s1">&quot;rootDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;customAppFile&quot;</span><span class="s0">,</span><span class="s1">&quot;escapeStringRegexp&quot;</span><span class="s0">,</span><span class="s1">&quot;isDevelopment&quot;</span><span class="s0">,</span><span class="s1">&quot;targetWeb&quot;</span><span class="s0">,</span><span class="s1">&quot;sassOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;future&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;unsafeCache&quot;</span><span class="s0">,</span><span class="s1">&quot;originalDevtool&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginCountBefore&quot;</span><span class="s0">,</span><span class="s1">&quot;totalPages&quot;</span><span class="s0">,</span><span class="s1">&quot;nextRuntime&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginCountAfter&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginsChanged&quot;</span><span class="s0">,</span><span class="s1">&quot;addUsage&quot;</span><span class="s0">,</span><span class="s1">&quot;configFileName&quot;</span><span class="s0">,</span><span class="s1">&quot;lazyCompilation&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;customSvgRule&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;nextImageRule&quot;</span><span class="s0">,</span><span class="s1">&quot;craCompat&quot;</span><span class="s0">,</span><span class="s1">&quot;fileLoaderExclude&quot;</span><span class="s0">,</span><span class="s1">&quot;fileLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;topRules&quot;</span><span class="s0">,</span><span class="s1">&quot;innerRules&quot;</span><span class="s0">,</span><span class="s1">&quot;webpackDevMiddleware&quot;</span><span class="s0">,</span><span class="s1">&quot;canMatchCss&quot;</span><span class="s0">,</span><span class="s1">&quot;fileNames&quot;</span><span class="s0">,</span><span class="s1">&quot;input&quot;</span><span class="s0">,</span><span class="s1">&quot;hasUserCssConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;o&quot;</span><span class="s0">,</span><span class="s1">&quot;Symbol&quot;</span><span class="s0">,</span><span class="s1">&quot;for&quot;</span><span class="s0">,</span><span class="s1">&quot;__next_css_remove&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;originalEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;originalFile&quot;</span><span class="s0">,</span><span class="s1">&quot;finalizeEntrypoint&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;nextRootParamsModule&quot;</span><span class="s0">,</span><span class="s1">&quot;createInvalidImportRule&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidClientImportRule&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>