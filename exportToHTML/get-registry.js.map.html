<html>
<head>
<title>get-registry.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
get-registry.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/lib/helpers/get-registry.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { execSync } from 'child_process'</span><span class="s3">\n</span><span class="s1">import { getPkgManager } from './get-pkg-manager'</span><span class="s3">\n</span><span class="s1">import { getFormattedNodeOptionsWithoutInspect } from '../../server/lib/utils'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the package registry using the user's package manager.</span><span class="s3">\n </span><span class="s1">* The URL will have a trailing slash.</span><span class="s3">\n </span><span class="s1">* @default https://registry.npmjs.org/</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getRegistry(baseDir: string = process.cwd()) {</span><span class="s3">\n  </span><span class="s1">const pkgManager = getPkgManager(baseDir)</span><span class="s3">\n  </span><span class="s1">// Since `npm config` command fails in npm workspace to prevent workspace config conflicts,</span><span class="s3">\n  </span><span class="s1">// add `--no-workspaces` flag to run under the context of the root project only.</span><span class="s3">\n  </span><span class="s1">// Safe for non-workspace projects as it's equivalent to default `--workspaces=false`.</span><span class="s3">\n  </span><span class="s1">// x-ref: https://github.com/vercel/next.js/issues/47121#issuecomment-1499044345</span><span class="s3">\n  </span><span class="s1">// x-ref: https://github.com/npm/statusboard/issues/371#issue-920669998</span><span class="s3">\n  </span><span class="s1">const resolvedFlags = pkgManager === 'npm' ? '--no-workspaces' : ''</span><span class="s3">\n  </span><span class="s1">let registry = `https://registry.npmjs.org/`</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const output = execSync(</span><span class="s3">\n      </span><span class="s1">`${pkgManager} config get registry ${resolvedFlags}`,</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">env: {</span><span class="s3">\n          </span><span class="s1">...process.env,</span><span class="s3">\n          </span><span class="s1">NODE_OPTIONS: getFormattedNodeOptionsWithoutInspect(),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">.toString()</span><span class="s3">\n      </span><span class="s1">.trim()</span><span class="s3">\n\n    </span><span class="s1">if (output.startsWith('http')) {</span><span class="s3">\n      </span><span class="s1">registry = output.endsWith('/') ? output : `${output}/`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch (err) {</span><span class="s3">\n    </span><span class="s1">throw new Error(`Failed to get registry from </span><span class="s3">\&quot;</span><span class="s1">${pkgManager}</span><span class="s3">\&quot;</span><span class="s1">.`, {</span><span class="s3">\n      </span><span class="s1">cause: err,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return registry</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getRegistry&quot;</span><span class="s0">,</span><span class="s1">&quot;baseDir&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgManager&quot;</span><span class="s0">,</span><span class="s1">&quot;getPkgManager&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedFlags&quot;</span><span class="s0">,</span><span class="s1">&quot;registry&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;execSync&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;getFormattedNodeOptionsWithoutInspect&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;trim&quot;</span><span class="s0">,</span><span class="s1">&quot;startsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;endsWith&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;cause&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BASgBA;;;eAAAA;;;+BATS;+BACK;uBACwB;AAO/C,SAASA,YAAYC,UAAkBC,QAAQC,GAAG,EAAE;IACzD,MAAMC,aAAaC,IAAAA,4BAAa,EAACJ;IACjC,2FAA2F;IAC3F,gFAAgF;IAChF,sFAAsF;IACtF,gFAAgF;IAChF,uEAAuE;IACvE,MAAMK,gBAAgBF,eAAe,QAAQ,oBAAoB;IACjE,IAAIG,WAAW,CAAC,2BAA2B,CAAC;IAE5C,IAAI;QACF,MAAMC,SAASC,IAAAA,uBAAQ,EACrB,GAAGL,WAAW,qBAAqB,EAAEE,eAAe,EACpD;YACEI,KAAK;gBACH,GAAGR,QAAQQ,GAAG;gBACdC,cAAcC,IAAAA,4CAAqC;YACrD;QACF,GAECC,QAAQ,GACRC,IAAI;QAEP,IAAIN,OAAOO,UAAU,CAAC,SAAS;YAC7BR,WAAWC,OAAOQ,QAAQ,CAAC,OAAOR,SAAS,GAAGA,OAAO,CAAC,CAAC;QACzD;IACF,EAAE,OAAOS,KAAK;QACZ,MAAM,qBAEJ,CAFI,IAAIC,MAAM,CAAC,6BAA6B,EAAEd,WAAW,EAAE,CAAC,EAAE;YAC9De,OAAOF;QACT,IAFM,qBAAA;mBAAA;wBAAA;0BAAA;QAEL;IACH;IAEA,OAAOV;AACT&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>