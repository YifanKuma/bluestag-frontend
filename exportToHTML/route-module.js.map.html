<html>
<head>
<title>route-module.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #1750eb;}
.s3 { color: #0037a6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
route-module.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/server/route-modules/route-module.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import type { IncomingMessage, ServerResponse } from 'node:http'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">InstrumentationOnRequestError,</span><span class="s3">\n  </span><span class="s1">RequestErrorContext,</span><span class="s3">\n</span><span class="s1">} from '../instrumentation/types'</span><span class="s3">\n</span><span class="s1">import type { ParsedUrlQuery } from 'node:querystring'</span><span class="s3">\n</span><span class="s1">import type { UrlWithParsedQuery } from 'node:url'</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">PrerenderManifest,</span><span class="s3">\n  </span><span class="s1">RequiredServerFilesManifest,</span><span class="s3">\n</span><span class="s1">} from '../../build'</span><span class="s3">\n</span><span class="s1">import type { DevRoutesManifest } from '../lib/router-utils/setup-dev-bundler'</span><span class="s3">\n</span><span class="s1">import type { RouteDefinition } from '../route-definitions/route-definition'</span><span class="s3">\n</span><span class="s1">import type { DeepReadonly } from '../../shared/lib/deep-readonly'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">BUILD_ID_FILE,</span><span class="s3">\n  </span><span class="s1">BUILD_MANIFEST,</span><span class="s3">\n  </span><span class="s1">CLIENT_REFERENCE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">DYNAMIC_CSS_MANIFEST,</span><span class="s3">\n  </span><span class="s1">NEXT_FONT_MANIFEST,</span><span class="s3">\n  </span><span class="s1">PRERENDER_MANIFEST,</span><span class="s3">\n  </span><span class="s1">REACT_LOADABLE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">ROUTES_MANIFEST,</span><span class="s3">\n  </span><span class="s1">SERVER_FILES_MANIFEST,</span><span class="s3">\n  </span><span class="s1">SERVER_REFERENCE_MANIFEST,</span><span class="s3">\n  </span><span class="s1">SUBRESOURCE_INTEGRITY_MANIFEST,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/constants'</span><span class="s3">\n</span><span class="s1">import { parseReqUrl } from '../../lib/url'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">normalizeLocalePath,</span><span class="s3">\n  </span><span class="s1">type PathLocale,</span><span class="s3">\n</span><span class="s1">} from '../../shared/lib/i18n/normalize-locale-path'</span><span class="s3">\n</span><span class="s1">import { isDynamicRoute } from '../../shared/lib/router/utils'</span><span class="s3">\n</span><span class="s1">import { removePathPrefix } from '../../shared/lib/router/utils/remove-path-prefix'</span><span class="s3">\n</span><span class="s1">import { getServerUtils } from '../server-utils'</span><span class="s3">\n</span><span class="s1">import { detectDomainLocale } from '../../shared/lib/i18n/detect-domain-locale'</span><span class="s3">\n</span><span class="s1">import { getHostname } from '../../shared/lib/get-hostname'</span><span class="s3">\n</span><span class="s1">import { checkIsOnDemandRevalidate } from '../api-utils'</span><span class="s3">\n</span><span class="s1">import type { PreviewData } from '../../types'</span><span class="s3">\n</span><span class="s1">import type { BuildManifest } from '../get-page-files'</span><span class="s3">\n</span><span class="s1">import type { ReactLoadableManifest } from '../load-components'</span><span class="s3">\n</span><span class="s1">import type { NextFontManifest } from '../../build/webpack/plugins/next-font-manifest-plugin'</span><span class="s3">\n</span><span class="s1">import { normalizeDataPath } from '../../shared/lib/page-path/normalize-data-path'</span><span class="s3">\n</span><span class="s1">import { pathHasPrefix } from '../../shared/lib/router/utils/path-has-prefix'</span><span class="s3">\n</span><span class="s1">import { addRequestMeta, getRequestMeta } from '../request-meta'</span><span class="s3">\n</span><span class="s1">import { normalizePagePath } from '../../shared/lib/page-path/normalize-page-path'</span><span class="s3">\n</span><span class="s1">import { isStaticMetadataRoute } from '../../lib/metadata/is-metadata-route'</span><span class="s3">\n</span><span class="s1">import { IncrementalCache } from '../lib/incremental-cache'</span><span class="s3">\n</span><span class="s1">import { initializeCacheHandlers, setCacheHandler } from '../use-cache/handlers'</span><span class="s3">\n</span><span class="s1">import { interopDefault } from '../app-render/interop-default'</span><span class="s3">\n</span><span class="s1">import type { RouteKind } from '../route-kind'</span><span class="s3">\n</span><span class="s1">import type { BaseNextRequest } from '../base-http'</span><span class="s3">\n</span><span class="s1">import type { I18NConfig, NextConfigComplete } from '../config-shared'</span><span class="s3">\n</span><span class="s1">import ResponseCache, { type ResponseGenerator } from '../response-cache'</span><span class="s3">\n</span><span class="s1">import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">RouterServerContextSymbol,</span><span class="s3">\n  </span><span class="s1">routerServerGlobal,</span><span class="s3">\n  </span><span class="s1">type RouterServerContext,</span><span class="s3">\n</span><span class="s1">} from '../lib/router-utils/router-server-context'</span><span class="s3">\n</span><span class="s1">import { decodePathParams } from '../lib/router-utils/decode-path-params'</span><span class="s3">\n</span><span class="s1">import { removeTrailingSlash } from '../../shared/lib/router/utils/remove-trailing-slash'</span><span class="s3">\n</span><span class="s1">import { isInterceptionRouteRewrite } from '../../lib/generate-interception-routes-rewrites'</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* RouteModuleOptions is the options that are passed to the route module, other</span><span class="s3">\n </span><span class="s1">* route modules should extend this class to add specific options for their</span><span class="s3">\n </span><span class="s1">* route.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export interface RouteModuleOptions&lt;</span><span class="s3">\n  </span><span class="s1">D extends RouteDefinition = RouteDefinition,</span><span class="s3">\n  </span><span class="s1">U = unknown,</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">readonly definition: Readonly&lt;D&gt;</span><span class="s3">\n  </span><span class="s1">readonly userland: Readonly&lt;U&gt;</span><span class="s3">\n  </span><span class="s1">readonly distDir: string</span><span class="s3">\n  </span><span class="s1">readonly relativeProjectDir: string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* RouteHandlerContext is the base context for a route handler.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export interface RouteModuleHandleContext {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Any matched parameters for the request. This is only defined for dynamic</span><span class="s3">\n   </span><span class="s1">* routes.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">params: Record&lt;string, string | string[] | undefined&gt; | undefined</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const dynamicImportEsmDefault = (id: string) =&gt;</span><span class="s3">\n  </span><span class="s1">import(/* webpackIgnore: true */ /* turbopackIgnore: true */ id).then(</span><span class="s3">\n    </span><span class="s1">(mod) =&gt; mod.default || mod</span><span class="s3">\n  </span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* RouteModule is the base class for all route modules. This class should be</span><span class="s3">\n </span><span class="s1">* extended by all route modules.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export abstract class RouteModule&lt;</span><span class="s3">\n  </span><span class="s1">D extends RouteDefinition = RouteDefinition,</span><span class="s3">\n  </span><span class="s1">U = unknown,</span><span class="s3">\n</span><span class="s1">&gt; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The userland module. This is the module that is exported from the user's</span><span class="s3">\n   </span><span class="s1">* code. This is marked as readonly to ensure that the module is not mutated</span><span class="s3">\n   </span><span class="s1">* because the module (when compiled) only provides getters.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public readonly userland: Readonly&lt;U&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The definition of the route.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public readonly definition: Readonly&lt;D&gt;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The shared modules that are exposed and required for the route module.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public static readonly sharedModules: any</span><span class="s3">\n\n  </span><span class="s1">public isDev: boolean</span><span class="s3">\n  </span><span class="s1">public distDir: string</span><span class="s3">\n  </span><span class="s1">public isAppRouter?: boolean</span><span class="s3">\n  </span><span class="s1">public relativeProjectDir: string</span><span class="s3">\n  </span><span class="s1">public incrementCache?: IncrementalCache</span><span class="s3">\n  </span><span class="s1">public responseCache?: ResponseCache</span><span class="s3">\n\n  </span><span class="s1">constructor({</span><span class="s3">\n    </span><span class="s1">userland,</span><span class="s3">\n    </span><span class="s1">definition,</span><span class="s3">\n    </span><span class="s1">distDir,</span><span class="s3">\n    </span><span class="s1">relativeProjectDir,</span><span class="s3">\n  </span><span class="s1">}: RouteModuleOptions&lt;D, U&gt;) {</span><span class="s3">\n    </span><span class="s1">this.userland = userland</span><span class="s3">\n    </span><span class="s1">this.definition = definition</span><span class="s3">\n    </span><span class="s1">this.isDev = process.env.NODE_ENV === 'development'</span><span class="s3">\n    </span><span class="s1">this.distDir = distDir</span><span class="s3">\n    </span><span class="s1">this.relativeProjectDir = relativeProjectDir</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async instrumentationOnRequestError(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">...args: Parameters&lt;InstrumentationOnRequestError&gt;</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n      </span><span class="s1">const { getEdgeInstrumentationModule } = await import('../web/globals')</span><span class="s3">\n      </span><span class="s1">const instrumentation = await getEdgeInstrumentationModule()</span><span class="s3">\n\n      </span><span class="s1">if (instrumentation) {</span><span class="s3">\n        </span><span class="s1">await instrumentation.onRequestError?.(...args)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">const { join } = require('node:path') as typeof import('node:path')</span><span class="s3">\n      </span><span class="s1">const absoluteProjectDir = join(</span><span class="s3">\n        </span><span class="s1">process.cwd(),</span><span class="s3">\n        </span><span class="s1">getRequestMeta(req, 'relativeProjectDir') || this.relativeProjectDir</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const { instrumentationOnRequestError } = await import(</span><span class="s3">\n        </span><span class="s1">'../lib/router-utils/instrumentation-globals.external.js'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">return instrumentationOnRequestError(</span><span class="s3">\n        </span><span class="s1">absoluteProjectDir,</span><span class="s3">\n        </span><span class="s1">this.distDir,</span><span class="s3">\n        </span><span class="s1">...args</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private loadManifests(</span><span class="s3">\n    </span><span class="s1">srcPage: string,</span><span class="s3">\n    </span><span class="s1">projectDir?: string</span><span class="s3">\n  </span><span class="s1">): {</span><span class="s3">\n    </span><span class="s1">buildId: string</span><span class="s3">\n    </span><span class="s1">buildManifest: BuildManifest</span><span class="s3">\n    </span><span class="s1">fallbackBuildManifest: BuildManifest</span><span class="s3">\n    </span><span class="s1">routesManifest: DeepReadonly&lt;DevRoutesManifest&gt;</span><span class="s3">\n    </span><span class="s1">nextFontManifest: DeepReadonly&lt;NextFontManifest&gt;</span><span class="s3">\n    </span><span class="s1">prerenderManifest: DeepReadonly&lt;PrerenderManifest&gt;</span><span class="s3">\n    </span><span class="s1">serverFilesManifest: RequiredServerFilesManifest</span><span class="s3">\n    </span><span class="s1">reactLoadableManifest: DeepReadonly&lt;ReactLoadableManifest&gt;</span><span class="s3">\n    </span><span class="s1">subresourceIntegrityManifest: any</span><span class="s3">\n    </span><span class="s1">clientReferenceManifest: any</span><span class="s3">\n    </span><span class="s1">serverActionsManifest: any</span><span class="s3">\n    </span><span class="s1">dynamicCssManifest: any</span><span class="s3">\n    </span><span class="s1">interceptionRoutePatterns: RegExp[]</span><span class="s3">\n  </span><span class="s1">} {</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n      </span><span class="s1">const { getEdgePreviewProps } =</span><span class="s3">\n        </span><span class="s1">require('../web/get-edge-preview-props') as typeof import('../web/get-edge-preview-props')</span><span class="s3">\n\n      </span><span class="s1">const maybeJSONParse = (str?: string) =&gt;</span><span class="s3">\n        </span><span class="s1">str ? JSON.parse(str) : undefined</span><span class="s3">\n\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">buildId: process.env.__NEXT_BUILD_ID || '',</span><span class="s3">\n        </span><span class="s1">buildManifest: self.__BUILD_MANIFEST as any,</span><span class="s3">\n        </span><span class="s1">fallbackBuildManifest: {} as any,</span><span class="s3">\n        </span><span class="s1">reactLoadableManifest: maybeJSONParse(self.__REACT_LOADABLE_MANIFEST),</span><span class="s3">\n        </span><span class="s1">nextFontManifest: maybeJSONParse(self.__NEXT_FONT_MANIFEST),</span><span class="s3">\n        </span><span class="s1">prerenderManifest: {</span><span class="s3">\n          </span><span class="s1">routes: {},</span><span class="s3">\n          </span><span class="s1">dynamicRoutes: {},</span><span class="s3">\n          </span><span class="s1">notFoundRoutes: [],</span><span class="s3">\n          </span><span class="s1">version: 4,</span><span class="s3">\n          </span><span class="s1">preview: getEdgePreviewProps(),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">routesManifest: {</span><span class="s3">\n          </span><span class="s1">version: 4,</span><span class="s3">\n          </span><span class="s1">caseSensitive: Boolean(process.env.__NEXT_CASE_SENSITIVE_ROUTES),</span><span class="s3">\n          </span><span class="s1">basePath: process.env.__NEXT_BASE_PATH || '',</span><span class="s3">\n          </span><span class="s1">rewrites: (process.env.__NEXT_REWRITES as any) || {</span><span class="s3">\n            </span><span class="s1">beforeFiles: [],</span><span class="s3">\n            </span><span class="s1">afterFiles: [],</span><span class="s3">\n            </span><span class="s1">fallback: [],</span><span class="s3">\n          </span><span class="s1">},</span><span class="s3">\n          </span><span class="s1">redirects: [],</span><span class="s3">\n          </span><span class="s1">headers: [],</span><span class="s3">\n          </span><span class="s1">i18n:</span><span class="s3">\n            </span><span class="s1">(process.env.__NEXT_I18N_CONFIG as any as I18NConfig) || undefined,</span><span class="s3">\n          </span><span class="s1">skipMiddlewareUrlNormalize: Boolean(</span><span class="s3">\n            </span><span class="s1">process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">serverFilesManifest: {</span><span class="s3">\n          </span><span class="s1">config: (globalThis as any).nextConfig || {},</span><span class="s3">\n        </span><span class="s1">} as any,</span><span class="s3">\n        </span><span class="s1">clientReferenceManifest: self.__RSC_MANIFEST?.[srcPage],</span><span class="s3">\n        </span><span class="s1">serverActionsManifest: maybeJSONParse(self.__RSC_SERVER_MANIFEST),</span><span class="s3">\n        </span><span class="s1">subresourceIntegrityManifest: maybeJSONParse(</span><span class="s3">\n          </span><span class="s1">self.__SUBRESOURCE_INTEGRITY_MANIFEST</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">dynamicCssManifest: maybeJSONParse(self.__DYNAMIC_CSS_MANIFEST),</span><span class="s3">\n        </span><span class="s1">interceptionRoutePatterns: (</span><span class="s3">\n          </span><span class="s1">maybeJSONParse(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST) ?? []</span><span class="s3">\n        </span><span class="s1">).map((rewrite: any) =&gt; new RegExp(rewrite.regex)),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">if (!projectDir) {</span><span class="s3">\n        </span><span class="s1">throw new Error('Invariant: projectDir is required for node runtime')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const { loadManifestFromRelativePath } =</span><span class="s3">\n        </span><span class="s1">require('../load-manifest.external') as typeof import('../load-manifest.external')</span><span class="s3">\n      </span><span class="s1">const normalizedPagePath = normalizePagePath(srcPage)</span><span class="s3">\n\n      </span><span class="s1">const [</span><span class="s3">\n        </span><span class="s1">routesManifest,</span><span class="s3">\n        </span><span class="s1">prerenderManifest,</span><span class="s3">\n        </span><span class="s1">buildManifest,</span><span class="s3">\n        </span><span class="s1">fallbackBuildManifest,</span><span class="s3">\n        </span><span class="s1">reactLoadableManifest,</span><span class="s3">\n        </span><span class="s1">nextFontManifest,</span><span class="s3">\n        </span><span class="s1">clientReferenceManifest,</span><span class="s3">\n        </span><span class="s1">serverActionsManifest,</span><span class="s3">\n        </span><span class="s1">subresourceIntegrityManifest,</span><span class="s3">\n        </span><span class="s1">serverFilesManifest,</span><span class="s3">\n        </span><span class="s1">buildId,</span><span class="s3">\n        </span><span class="s1">dynamicCssManifest,</span><span class="s3">\n      </span><span class="s1">] = [</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;DevRoutesManifest&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: ROUTES_MANIFEST,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;PrerenderManifest&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: PRERENDER_MANIFEST,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;BuildManifest&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: BUILD_MANIFEST,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">srcPage === '/_error'</span><span class="s3">\n          </span><span class="s1">? loadManifestFromRelativePath&lt;BuildManifest&gt;({</span><span class="s3">\n              </span><span class="s1">projectDir,</span><span class="s3">\n              </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n              </span><span class="s1">manifest: `fallback-${BUILD_MANIFEST}`,</span><span class="s3">\n              </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n              </span><span class="s1">handleMissing: true,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: ({} as BuildManifest),</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;ReactLoadableManifest&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: process.env.TURBOPACK</span><span class="s3">\n            </span><span class="s1">? `server/${this.isAppRouter ? 'app' : 'pages'}${normalizedPagePath}/${REACT_LOADABLE_MANIFEST}`</span><span class="s3">\n            </span><span class="s1">: REACT_LOADABLE_MANIFEST,</span><span class="s3">\n          </span><span class="s1">handleMissing: true,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;NextFontManifest&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: `server/${NEXT_FONT_MANIFEST}.json`,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">this.isAppRouter &amp;&amp; !isStaticMetadataRoute(srcPage)</span><span class="s3">\n          </span><span class="s1">? loadManifestFromRelativePath({</span><span class="s3">\n              </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n              </span><span class="s1">projectDir,</span><span class="s3">\n              </span><span class="s1">useEval: true,</span><span class="s3">\n              </span><span class="s1">handleMissing: true,</span><span class="s3">\n              </span><span class="s1">manifest: `server/app${srcPage.replace(/%5F/g, '_') + '_' + CLIENT_REFERENCE_MANIFEST}.js`,</span><span class="s3">\n              </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: undefined,</span><span class="s3">\n        </span><span class="s1">this.isAppRouter</span><span class="s3">\n          </span><span class="s1">? loadManifestFromRelativePath&lt;any&gt;({</span><span class="s3">\n              </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n              </span><span class="s1">projectDir,</span><span class="s3">\n              </span><span class="s1">manifest: `server/${SERVER_REFERENCE_MANIFEST}.json`,</span><span class="s3">\n              </span><span class="s1">handleMissing: true,</span><span class="s3">\n              </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n            </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">: {},</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;Record&lt;string, string&gt;&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: `server/${SUBRESOURCE_INTEGRITY_MANIFEST}.json`,</span><span class="s3">\n          </span><span class="s1">handleMissing: true,</span><span class="s3">\n          </span><span class="s1">shouldCache: !this.isDev,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">this.isDev</span><span class="s3">\n          </span><span class="s1">? ({} as any)</span><span class="s3">\n          </span><span class="s1">: loadManifestFromRelativePath&lt;RequiredServerFilesManifest&gt;({</span><span class="s3">\n              </span><span class="s1">projectDir,</span><span class="s3">\n              </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n              </span><span class="s1">manifest: SERVER_FILES_MANIFEST,</span><span class="s3">\n            </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">this.isDev</span><span class="s3">\n          </span><span class="s1">? 'development'</span><span class="s3">\n          </span><span class="s1">: loadManifestFromRelativePath&lt;any&gt;({</span><span class="s3">\n              </span><span class="s1">projectDir,</span><span class="s3">\n              </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n              </span><span class="s1">manifest: BUILD_ID_FILE,</span><span class="s3">\n              </span><span class="s1">skipParse: true,</span><span class="s3">\n            </span><span class="s1">}),</span><span class="s3">\n        </span><span class="s1">loadManifestFromRelativePath&lt;any&gt;({</span><span class="s3">\n          </span><span class="s1">projectDir,</span><span class="s3">\n          </span><span class="s1">distDir: this.distDir,</span><span class="s3">\n          </span><span class="s1">manifest: DYNAMIC_CSS_MANIFEST,</span><span class="s3">\n          </span><span class="s1">handleMissing: true,</span><span class="s3">\n        </span><span class="s1">}),</span><span class="s3">\n      </span><span class="s1">]</span><span class="s3">\n\n      </span><span class="s1">return {</span><span class="s3">\n        </span><span class="s1">buildId,</span><span class="s3">\n        </span><span class="s1">buildManifest,</span><span class="s3">\n        </span><span class="s1">fallbackBuildManifest,</span><span class="s3">\n        </span><span class="s1">routesManifest,</span><span class="s3">\n        </span><span class="s1">nextFontManifest,</span><span class="s3">\n        </span><span class="s1">prerenderManifest,</span><span class="s3">\n        </span><span class="s1">serverFilesManifest,</span><span class="s3">\n        </span><span class="s1">reactLoadableManifest,</span><span class="s3">\n        </span><span class="s1">clientReferenceManifest: (clientReferenceManifest as any)</span><span class="s3">\n          </span><span class="s1">?.__RSC_MANIFEST?.[srcPage.replace(/%5F/g, '_')],</span><span class="s3">\n        </span><span class="s1">serverActionsManifest,</span><span class="s3">\n        </span><span class="s1">subresourceIntegrityManifest,</span><span class="s3">\n        </span><span class="s1">dynamicCssManifest,</span><span class="s3">\n        </span><span class="s1">interceptionRoutePatterns: routesManifest.rewrites.beforeFiles</span><span class="s3">\n          </span><span class="s1">.filter(isInterceptionRouteRewrite)</span><span class="s3">\n          </span><span class="s1">.map((rewrite) =&gt; new RegExp(rewrite.regex)),</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async loadCustomCacheHandlers(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">nextConfig: NextConfigComplete</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge') {</span><span class="s3">\n      </span><span class="s1">const { cacheHandlers } = nextConfig.experimental</span><span class="s3">\n      </span><span class="s1">if (!cacheHandlers) return</span><span class="s3">\n\n      </span><span class="s1">// If we've already initialized the cache handlers interface, don't do it</span><span class="s3">\n      </span><span class="s1">// again.</span><span class="s3">\n      </span><span class="s1">if (!initializeCacheHandlers()) return</span><span class="s3">\n\n      </span><span class="s1">for (const [kind, handler] of Object.entries(cacheHandlers)) {</span><span class="s3">\n        </span><span class="s1">if (!handler) continue</span><span class="s3">\n\n        </span><span class="s1">const { formatDynamicImportPath } =</span><span class="s3">\n          </span><span class="s1">require('../../lib/format-dynamic-import-path') as typeof import('../../lib/format-dynamic-import-path')</span><span class="s3">\n\n        </span><span class="s1">const { join } = require('node:path') as typeof import('node:path')</span><span class="s3">\n        </span><span class="s1">const absoluteProjectDir = join(</span><span class="s3">\n          </span><span class="s1">process.cwd(),</span><span class="s3">\n          </span><span class="s1">getRequestMeta(req, 'relativeProjectDir') || this.relativeProjectDir</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n\n        </span><span class="s1">setCacheHandler(</span><span class="s3">\n          </span><span class="s1">kind,</span><span class="s3">\n          </span><span class="s1">interopDefault(</span><span class="s3">\n            </span><span class="s1">await dynamicImportEsmDefault(</span><span class="s3">\n              </span><span class="s1">formatDynamicImportPath(</span><span class="s3">\n                </span><span class="s1">`${absoluteProjectDir}/${this.distDir}`,</span><span class="s3">\n                </span><span class="s1">handler</span><span class="s3">\n              </span><span class="s1">)</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async getIncrementalCache(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">nextConfig: NextConfigComplete,</span><span class="s3">\n    </span><span class="s1">prerenderManifest: DeepReadonly&lt;PrerenderManifest&gt;</span><span class="s3">\n  </span><span class="s1">): Promise&lt;IncrementalCache&gt; {</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME === 'edge') {</span><span class="s3">\n      </span><span class="s1">return (globalThis as any).__incrementalCache</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">let CacheHandler: any</span><span class="s3">\n      </span><span class="s1">const { cacheHandler } = nextConfig</span><span class="s3">\n\n      </span><span class="s1">if (cacheHandler) {</span><span class="s3">\n        </span><span class="s1">const { formatDynamicImportPath } =</span><span class="s3">\n          </span><span class="s1">require('../../lib/format-dynamic-import-path') as typeof import('../../lib/format-dynamic-import-path')</span><span class="s3">\n\n        </span><span class="s1">CacheHandler = interopDefault(</span><span class="s3">\n          </span><span class="s1">await dynamicImportEsmDefault(</span><span class="s3">\n            </span><span class="s1">formatDynamicImportPath(this.distDir, cacheHandler)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const { join } = require('node:path') as typeof import('node:path')</span><span class="s3">\n      </span><span class="s1">const projectDir = join(</span><span class="s3">\n        </span><span class="s1">process.cwd(),</span><span class="s3">\n        </span><span class="s1">getRequestMeta(req, 'relativeProjectDir') || this.relativeProjectDir</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">await this.loadCustomCacheHandlers(req, nextConfig)</span><span class="s3">\n\n      </span><span class="s1">// incremental-cache is request specific</span><span class="s3">\n      </span><span class="s1">// although can have shared caches in module scope</span><span class="s3">\n      </span><span class="s1">// per-cache handler</span><span class="s3">\n      </span><span class="s1">return new IncrementalCache({</span><span class="s3">\n        </span><span class="s1">fs: (</span><span class="s3">\n          </span><span class="s1">require('../lib/node-fs-methods') as typeof import('../lib/node-fs-methods')</span><span class="s3">\n        </span><span class="s1">).nodeFs,</span><span class="s3">\n        </span><span class="s1">dev: this.isDev,</span><span class="s3">\n        </span><span class="s1">requestHeaders: req.headers,</span><span class="s3">\n        </span><span class="s1">allowedRevalidateHeaderKeys:</span><span class="s3">\n          </span><span class="s1">nextConfig.experimental.allowedRevalidateHeaderKeys,</span><span class="s3">\n        </span><span class="s1">minimalMode: getRequestMeta(req, 'minimalMode'),</span><span class="s3">\n        </span><span class="s1">serverDistDir: `${projectDir}/${this.distDir}/server`,</span><span class="s3">\n        </span><span class="s1">fetchCacheKeyPrefix: nextConfig.experimental.fetchCacheKeyPrefix,</span><span class="s3">\n        </span><span class="s1">maxMemoryCacheSize: nextConfig.cacheMaxMemorySize,</span><span class="s3">\n        </span><span class="s1">flushToDisk: nextConfig.experimental.isrFlushToDisk,</span><span class="s3">\n        </span><span class="s1">getPrerenderManifest: () =&gt; prerenderManifest,</span><span class="s3">\n        </span><span class="s1">CurCacheHandler: CacheHandler,</span><span class="s3">\n      </span><span class="s1">})</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async onRequestError(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">err: unknown,</span><span class="s3">\n    </span><span class="s1">errorContext: RequestErrorContext,</span><span class="s3">\n    </span><span class="s1">routerServerContext?: RouterServerContext[string]</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (routerServerContext?.logErrorWithOriginalStack) {</span><span class="s3">\n      </span><span class="s1">routerServerContext.logErrorWithOriginalStack(err, 'app-dir')</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">console.error(err)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">await this.instrumentationOnRequestError(</span><span class="s3">\n      </span><span class="s1">req,</span><span class="s3">\n      </span><span class="s1">err,</span><span class="s3">\n      </span><span class="s1">{</span><span class="s3">\n        </span><span class="s1">path: req.url || '/',</span><span class="s3">\n        </span><span class="s1">headers: req.headers,</span><span class="s3">\n        </span><span class="s1">method: req.method || 'GET',</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">errorContext</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async prepare(</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest,</span><span class="s3">\n    </span><span class="s1">res: ServerResponse | null,</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">srcPage,</span><span class="s3">\n      </span><span class="s1">multiZoneDraftMode,</span><span class="s3">\n    </span><span class="s1">}: {</span><span class="s3">\n      </span><span class="s1">srcPage: string</span><span class="s3">\n      </span><span class="s1">multiZoneDraftMode?: boolean</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">): Promise&lt;</span><span class="s3">\n    </span><span class="s1">| {</span><span class="s3">\n        </span><span class="s1">buildId: string</span><span class="s3">\n        </span><span class="s1">locale?: string</span><span class="s3">\n        </span><span class="s1">locales?: readonly string[]</span><span class="s3">\n        </span><span class="s1">defaultLocale?: string</span><span class="s3">\n        </span><span class="s1">query: ParsedUrlQuery</span><span class="s3">\n        </span><span class="s1">originalQuery: ParsedUrlQuery</span><span class="s3">\n        </span><span class="s1">originalPathname: string</span><span class="s3">\n        </span><span class="s1">params?: ParsedUrlQuery</span><span class="s3">\n        </span><span class="s1">parsedUrl: UrlWithParsedQuery</span><span class="s3">\n        </span><span class="s1">previewData: PreviewData</span><span class="s3">\n        </span><span class="s1">pageIsDynamic: boolean</span><span class="s3">\n        </span><span class="s1">isDraftMode: boolean</span><span class="s3">\n        </span><span class="s1">resolvedPathname: string</span><span class="s3">\n        </span><span class="s1">isNextDataRequest: boolean</span><span class="s3">\n        </span><span class="s1">buildManifest: DeepReadonly&lt;BuildManifest&gt;</span><span class="s3">\n        </span><span class="s1">fallbackBuildManifest: DeepReadonly&lt;BuildManifest&gt;</span><span class="s3">\n        </span><span class="s1">nextFontManifest: DeepReadonly&lt;NextFontManifest&gt;</span><span class="s3">\n        </span><span class="s1">serverFilesManifest: DeepReadonly&lt;RequiredServerFilesManifest&gt;</span><span class="s3">\n        </span><span class="s1">reactLoadableManifest: DeepReadonly&lt;ReactLoadableManifest&gt;</span><span class="s3">\n        </span><span class="s1">routesManifest: DeepReadonly&lt;DevRoutesManifest&gt;</span><span class="s3">\n        </span><span class="s1">prerenderManifest: DeepReadonly&lt;PrerenderManifest&gt;</span><span class="s3">\n        </span><span class="s1">// we can't pull in the client reference type or it causes issues with</span><span class="s3">\n        </span><span class="s1">// our pre-compiled types</span><span class="s3">\n        </span><span class="s1">clientReferenceManifest?: any</span><span class="s3">\n        </span><span class="s1">serverActionsManifest?: any</span><span class="s3">\n        </span><span class="s1">dynamicCssManifest?: any</span><span class="s3">\n        </span><span class="s1">subresourceIntegrityManifest?: DeepReadonly&lt;Record&lt;string, string&gt;&gt;</span><span class="s3">\n        </span><span class="s1">isOnDemandRevalidate: boolean</span><span class="s3">\n        </span><span class="s1">revalidateOnlyGenerated: boolean</span><span class="s3">\n        </span><span class="s1">nextConfig: NextConfigComplete</span><span class="s3">\n        </span><span class="s1">routerServerContext?: RouterServerContext[string]</span><span class="s3">\n        </span><span class="s1">interceptionRoutePatterns?: any</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">| undefined</span><span class="s3">\n  </span><span class="s1">&gt; {</span><span class="s3">\n    </span><span class="s1">let absoluteProjectDir: string | undefined</span><span class="s3">\n\n    </span><span class="s1">// edge runtime handles loading instrumentation at the edge adapter level</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge') {</span><span class="s3">\n      </span><span class="s1">const { join, relative } =</span><span class="s3">\n        </span><span class="s1">require('node:path') as typeof import('node:path')</span><span class="s3">\n\n      </span><span class="s1">absoluteProjectDir = join(</span><span class="s3">\n        </span><span class="s1">process.cwd(),</span><span class="s3">\n        </span><span class="s1">getRequestMeta(req, 'relativeProjectDir') || this.relativeProjectDir</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">const absoluteDistDir = getRequestMeta(req, 'distDir')</span><span class="s3">\n\n      </span><span class="s1">if (absoluteDistDir) {</span><span class="s3">\n        </span><span class="s1">this.distDir = relative(absoluteProjectDir, absoluteDistDir)</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const { ensureInstrumentationRegistered } = await import(</span><span class="s3">\n        </span><span class="s1">'../lib/router-utils/instrumentation-globals.external.js'</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">// ensure instrumentation is registered and pass</span><span class="s3">\n      </span><span class="s1">// onRequestError below</span><span class="s3">\n      </span><span class="s1">ensureInstrumentationRegistered(absoluteProjectDir, this.distDir)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const manifests = await this.loadManifests(srcPage, absoluteProjectDir)</span><span class="s3">\n    </span><span class="s1">const { routesManifest, prerenderManifest, serverFilesManifest } = manifests</span><span class="s3">\n\n    </span><span class="s1">const { basePath, i18n, rewrites } = routesManifest</span><span class="s3">\n\n    </span><span class="s1">if (basePath) {</span><span class="s3">\n      </span><span class="s1">req.url = removePathPrefix(req.url || '/', basePath)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const parsedUrl = parseReqUrl(req.url || '/')</span><span class="s3">\n    </span><span class="s1">// if we couldn't parse the URL we can't continue</span><span class="s3">\n    </span><span class="s1">if (!parsedUrl) {</span><span class="s3">\n      </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">let isNextDataRequest = false</span><span class="s3">\n\n    </span><span class="s1">if (pathHasPrefix(parsedUrl.pathname || '/', '/_next/data')) {</span><span class="s3">\n      </span><span class="s1">isNextDataRequest = true</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = normalizeDataPath(parsedUrl.pathname || '/')</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">let originalPathname = parsedUrl.pathname || '/'</span><span class="s3">\n    </span><span class="s1">const originalQuery = { ...parsedUrl.query }</span><span class="s3">\n    </span><span class="s1">const pageIsDynamic = isDynamicRoute(srcPage)</span><span class="s3">\n\n    </span><span class="s1">let localeResult: PathLocale | undefined</span><span class="s3">\n    </span><span class="s1">let detectedLocale: string | undefined</span><span class="s3">\n\n    </span><span class="s1">if (i18n) {</span><span class="s3">\n      </span><span class="s1">localeResult = normalizeLocalePath(</span><span class="s3">\n        </span><span class="s1">parsedUrl.pathname || '/',</span><span class="s3">\n        </span><span class="s1">i18n.locales</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (localeResult.detectedLocale) {</span><span class="s3">\n        </span><span class="s1">req.url = `${localeResult.pathname}${parsedUrl.search}`</span><span class="s3">\n        </span><span class="s1">originalPathname = localeResult.pathname</span><span class="s3">\n\n        </span><span class="s1">if (!detectedLocale) {</span><span class="s3">\n          </span><span class="s1">detectedLocale = localeResult.detectedLocale</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const serverUtils = getServerUtils({</span><span class="s3">\n      </span><span class="s1">page: srcPage,</span><span class="s3">\n      </span><span class="s1">i18n,</span><span class="s3">\n      </span><span class="s1">basePath,</span><span class="s3">\n      </span><span class="s1">rewrites,</span><span class="s3">\n      </span><span class="s1">pageIsDynamic,</span><span class="s3">\n      </span><span class="s1">trailingSlash: process.env.__NEXT_TRAILING_SLASH as any as boolean,</span><span class="s3">\n      </span><span class="s1">caseSensitive: Boolean(routesManifest.caseSensitive),</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">const domainLocale = detectDomainLocale(</span><span class="s3">\n      </span><span class="s1">i18n?.domains,</span><span class="s3">\n      </span><span class="s1">getHostname(parsedUrl, req.headers),</span><span class="s3">\n      </span><span class="s1">detectedLocale</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">addRequestMeta(req, 'isLocaleDomain', Boolean(domainLocale))</span><span class="s3">\n\n    </span><span class="s1">const defaultLocale = domainLocale?.defaultLocale || i18n?.defaultLocale</span><span class="s3">\n\n    </span><span class="s1">// Ensure parsedUrl.pathname includes locale before processing</span><span class="s3">\n    </span><span class="s1">// rewrites or they won't match correctly.</span><span class="s3">\n    </span><span class="s1">if (defaultLocale &amp;&amp; !detectedLocale) {</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = `/${defaultLocale}${parsedUrl.pathname === '/' ? '' : parsedUrl.pathname}`</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const locale =</span><span class="s3">\n      </span><span class="s1">getRequestMeta(req, 'locale') || detectedLocale || defaultLocale</span><span class="s3">\n\n    </span><span class="s1">const rewriteParamKeys = Object.keys(</span><span class="s3">\n      </span><span class="s1">serverUtils.handleRewrites(req, parsedUrl)</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n\n    </span><span class="s1">// after processing rewrites we want to remove locale</span><span class="s3">\n    </span><span class="s1">// from parsedUrl pathname</span><span class="s3">\n    </span><span class="s1">if (i18n) {</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = normalizeLocalePath(</span><span class="s3">\n        </span><span class="s1">parsedUrl.pathname || '/',</span><span class="s3">\n        </span><span class="s1">i18n.locales</span><span class="s3">\n      </span><span class="s1">).pathname</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">let params: Record&lt;string, undefined | string | string[]&gt; | undefined =</span><span class="s3">\n      </span><span class="s1">getRequestMeta(req, 'params')</span><span class="s3">\n\n    </span><span class="s1">// attempt parsing from pathname</span><span class="s3">\n    </span><span class="s1">if (!params &amp;&amp; serverUtils.dynamicRouteMatcher) {</span><span class="s3">\n      </span><span class="s1">const paramsMatch = serverUtils.dynamicRouteMatcher(</span><span class="s3">\n        </span><span class="s1">normalizeDataPath(localeResult?.pathname || parsedUrl.pathname || '/')</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">const paramsResult = serverUtils.normalizeDynamicRouteParams(</span><span class="s3">\n        </span><span class="s1">paramsMatch || {},</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">if (paramsResult.hasValidParams) {</span><span class="s3">\n        </span><span class="s1">params = paramsResult.params</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Local </span><span class="s3">\&quot;</span><span class="s1">next start</span><span class="s3">\&quot; </span><span class="s1">expects the routing parsed query values</span><span class="s3">\n    </span><span class="s1">// to not be present in the URL although when deployed proxies</span><span class="s3">\n    </span><span class="s1">// will add query values from resolving the routes to pass to function.</span><span class="s3">\n\n    </span><span class="s1">// TODO: do we want to change expectations for </span><span class="s3">\&quot;</span><span class="s1">next start</span><span class="s3">\&quot;\n    </span><span class="s1">// to include these query values in the URL which affects asPath</span><span class="s3">\n    </span><span class="s1">// but would match deployed behavior, e.g. a rewrite from middleware</span><span class="s3">\n    </span><span class="s1">// that adds a query param would be in asPath as query but locally</span><span class="s3">\n    </span><span class="s1">// it won't be in the asPath but still available in the query object</span><span class="s3">\n    </span><span class="s1">const query = getRequestMeta(req, 'query') || {</span><span class="s3">\n      </span><span class="s1">...parsedUrl.query,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const routeParamKeys = new Set&lt;string&gt;()</span><span class="s3">\n    </span><span class="s1">const combinedParamKeys = []</span><span class="s3">\n\n    </span><span class="s1">// we don't include rewriteParamKeys in the combinedParamKeys</span><span class="s3">\n    </span><span class="s1">// for app router since the searchParams is populated from the</span><span class="s3">\n    </span><span class="s1">// URL so we don't want to strip the rewrite params from the URL</span><span class="s3">\n    </span><span class="s1">// so that searchParams can include them</span><span class="s3">\n    </span><span class="s1">if (!this.isAppRouter) {</span><span class="s3">\n      </span><span class="s1">for (const key of [</span><span class="s3">\n        </span><span class="s1">...rewriteParamKeys,</span><span class="s3">\n        </span><span class="s1">...Object.keys(serverUtils.defaultRouteMatches || {}),</span><span class="s3">\n      </span><span class="s1">]) {</span><span class="s3">\n        </span><span class="s1">// We only want to filter rewrite param keys from the URL</span><span class="s3">\n        </span><span class="s1">// if they are matches from the URL e.g. the key/value matches</span><span class="s3">\n        </span><span class="s1">// before and after applying the rewrites /:path for /hello and</span><span class="s3">\n        </span><span class="s1">// { path: 'hello' } but not for { path: 'another' } and /hello</span><span class="s3">\n        </span><span class="s1">// TODO: we should prefix rewrite param keys the same as we do</span><span class="s3">\n        </span><span class="s1">// for dynamic routes so we can identify them properly</span><span class="s3">\n        </span><span class="s1">const originalValue = Array.isArray(originalQuery[key])</span><span class="s3">\n          </span><span class="s1">? originalQuery[key].join('')</span><span class="s3">\n          </span><span class="s1">: originalQuery[key]</span><span class="s3">\n\n        </span><span class="s1">const queryValue = Array.isArray(query[key])</span><span class="s3">\n          </span><span class="s1">? query[key].join('')</span><span class="s3">\n          </span><span class="s1">: query[key]</span><span class="s3">\n\n        </span><span class="s1">if (!(key in originalQuery) || originalValue === queryValue) {</span><span class="s3">\n          </span><span class="s1">combinedParamKeys.push(key)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">serverUtils.normalizeCdnUrl(req, combinedParamKeys)</span><span class="s3">\n    </span><span class="s1">serverUtils.normalizeQueryParams(query, routeParamKeys)</span><span class="s3">\n    </span><span class="s1">serverUtils.filterInternalQuery(originalQuery, combinedParamKeys)</span><span class="s3">\n\n    </span><span class="s1">if (pageIsDynamic) {</span><span class="s3">\n      </span><span class="s1">const queryResult = serverUtils.normalizeDynamicRouteParams(query, true)</span><span class="s3">\n\n      </span><span class="s1">const paramsResult = serverUtils.normalizeDynamicRouteParams(</span><span class="s3">\n        </span><span class="s1">params || {},</span><span class="s3">\n        </span><span class="s1">true</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">const paramsToInterpolate: ParsedUrlQuery =</span><span class="s3">\n        </span><span class="s1">paramsResult.hasValidParams &amp;&amp; params</span><span class="s3">\n          </span><span class="s1">? params</span><span class="s3">\n          </span><span class="s1">: queryResult.hasValidParams</span><span class="s3">\n            </span><span class="s1">? query</span><span class="s3">\n            </span><span class="s1">: {}</span><span class="s3">\n\n      </span><span class="s1">req.url = serverUtils.interpolateDynamicPath(</span><span class="s3">\n        </span><span class="s1">req.url || '/',</span><span class="s3">\n        </span><span class="s1">paramsToInterpolate</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">parsedUrl.pathname = serverUtils.interpolateDynamicPath(</span><span class="s3">\n        </span><span class="s1">parsedUrl.pathname || '/',</span><span class="s3">\n        </span><span class="s1">paramsToInterpolate</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">originalPathname = serverUtils.interpolateDynamicPath(</span><span class="s3">\n        </span><span class="s1">originalPathname,</span><span class="s3">\n        </span><span class="s1">paramsToInterpolate</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n\n      </span><span class="s1">// try pulling from query if valid</span><span class="s3">\n      </span><span class="s1">if (!params) {</span><span class="s3">\n        </span><span class="s1">if (queryResult.hasValidParams) {</span><span class="s3">\n          </span><span class="s1">params = Object.assign({}, queryResult.params)</span><span class="s3">\n\n          </span><span class="s1">// If we pulled from query remove it so it's</span><span class="s3">\n          </span><span class="s1">// only in params</span><span class="s3">\n          </span><span class="s1">for (const key in serverUtils.defaultRouteMatches) {</span><span class="s3">\n            </span><span class="s1">delete query[key]</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">} else {</span><span class="s3">\n          </span><span class="s1">// use final params from URL matching</span><span class="s3">\n          </span><span class="s1">const paramsMatch = serverUtils.dynamicRouteMatcher?.(</span><span class="s3">\n            </span><span class="s1">normalizeDataPath(</span><span class="s3">\n              </span><span class="s1">localeResult?.pathname || parsedUrl.pathname || '/'</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n          </span><span class="s1">// we don't normalize these as they are allowed to be</span><span class="s3">\n          </span><span class="s1">// the literal slug matches here e.g. /blog/[slug]</span><span class="s3">\n          </span><span class="s1">// actually being requested</span><span class="s3">\n          </span><span class="s1">if (paramsMatch) {</span><span class="s3">\n            </span><span class="s1">params = Object.assign({}, paramsMatch)</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">// Remove any normalized params from the query if they</span><span class="s3">\n    </span><span class="s1">// weren't present as non-prefixed query key e.g.</span><span class="s3">\n    </span><span class="s1">// ?search=1&amp;nxtPsearch=hello we don't delete search</span><span class="s3">\n    </span><span class="s1">for (const key of routeParamKeys) {</span><span class="s3">\n      </span><span class="s1">if (!(key in originalQuery)) {</span><span class="s3">\n        </span><span class="s1">delete query[key]</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const { isOnDemandRevalidate, revalidateOnlyGenerated } =</span><span class="s3">\n      </span><span class="s1">checkIsOnDemandRevalidate(req, prerenderManifest.preview)</span><span class="s3">\n\n    </span><span class="s1">let isDraftMode = false</span><span class="s3">\n    </span><span class="s1">let previewData: PreviewData</span><span class="s3">\n\n    </span><span class="s1">// preview data relies on non-edge utils</span><span class="s3">\n    </span><span class="s1">if (process.env.NEXT_RUNTIME !== 'edge' &amp;&amp; res) {</span><span class="s3">\n      </span><span class="s1">const { tryGetPreviewData } =</span><span class="s3">\n        </span><span class="s1">require('../api-utils/node/try-get-preview-data') as typeof import('../api-utils/node/try-get-preview-data')</span><span class="s3">\n\n      </span><span class="s1">previewData = tryGetPreviewData(</span><span class="s3">\n        </span><span class="s1">req,</span><span class="s3">\n        </span><span class="s1">res,</span><span class="s3">\n        </span><span class="s1">prerenderManifest.preview,</span><span class="s3">\n        </span><span class="s1">Boolean(multiZoneDraftMode)</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">isDraftMode = previewData !== false</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const relativeProjectDir =</span><span class="s3">\n      </span><span class="s1">getRequestMeta(req, 'relativeProjectDir') || this.relativeProjectDir</span><span class="s3">\n\n    </span><span class="s1">const routerServerContext =</span><span class="s3">\n      </span><span class="s1">routerServerGlobal[RouterServerContextSymbol]?.[relativeProjectDir]</span><span class="s3">\n    </span><span class="s1">const nextConfig =</span><span class="s3">\n      </span><span class="s1">routerServerContext?.nextConfig || serverFilesManifest.config</span><span class="s3">\n\n    </span><span class="s1">const normalizedSrcPage = normalizeAppPath(srcPage)</span><span class="s3">\n    </span><span class="s1">let resolvedPathname =</span><span class="s3">\n      </span><span class="s1">getRequestMeta(req, 'rewroteURL') || normalizedSrcPage</span><span class="s3">\n\n    </span><span class="s1">if (isDynamicRoute(resolvedPathname) &amp;&amp; params) {</span><span class="s3">\n      </span><span class="s1">resolvedPathname = serverUtils.interpolateDynamicPath(</span><span class="s3">\n        </span><span class="s1">resolvedPathname,</span><span class="s3">\n        </span><span class="s1">params</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (resolvedPathname === '/index') {</span><span class="s3">\n      </span><span class="s1">resolvedPathname = '/'</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">resolvedPathname = decodePathParams(resolvedPathname)</span><span class="s3">\n    </span><span class="s1">} catch (_) {}</span><span class="s3">\n\n    </span><span class="s1">resolvedPathname = removeTrailingSlash(resolvedPathname)</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">query,</span><span class="s3">\n      </span><span class="s1">originalQuery,</span><span class="s3">\n      </span><span class="s1">originalPathname,</span><span class="s3">\n      </span><span class="s1">params,</span><span class="s3">\n      </span><span class="s1">parsedUrl,</span><span class="s3">\n      </span><span class="s1">locale,</span><span class="s3">\n      </span><span class="s1">isNextDataRequest,</span><span class="s3">\n      </span><span class="s1">locales: i18n?.locales,</span><span class="s3">\n      </span><span class="s1">defaultLocale,</span><span class="s3">\n      </span><span class="s1">isDraftMode,</span><span class="s3">\n      </span><span class="s1">previewData,</span><span class="s3">\n      </span><span class="s1">pageIsDynamic,</span><span class="s3">\n      </span><span class="s1">resolvedPathname,</span><span class="s3">\n      </span><span class="s1">isOnDemandRevalidate,</span><span class="s3">\n      </span><span class="s1">revalidateOnlyGenerated,</span><span class="s3">\n      </span><span class="s1">...manifests,</span><span class="s3">\n      </span><span class="s1">serverActionsManifest: manifests.serverActionsManifest,</span><span class="s3">\n      </span><span class="s1">clientReferenceManifest: manifests.clientReferenceManifest,</span><span class="s3">\n      </span><span class="s1">nextConfig,</span><span class="s3">\n      </span><span class="s1">routerServerContext,</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getResponseCache(req: IncomingMessage | BaseNextRequest) {</span><span class="s3">\n    </span><span class="s1">if (!this.responseCache) {</span><span class="s3">\n      </span><span class="s1">const minimalMode = getRequestMeta(req, 'minimalMode') ?? false</span><span class="s3">\n      </span><span class="s1">this.responseCache = new ResponseCache(minimalMode)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return this.responseCache</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public async handleResponse({</span><span class="s3">\n    </span><span class="s1">req,</span><span class="s3">\n    </span><span class="s1">nextConfig,</span><span class="s3">\n    </span><span class="s1">cacheKey,</span><span class="s3">\n    </span><span class="s1">routeKind,</span><span class="s3">\n    </span><span class="s1">isFallback,</span><span class="s3">\n    </span><span class="s1">prerenderManifest,</span><span class="s3">\n    </span><span class="s1">isRoutePPREnabled,</span><span class="s3">\n    </span><span class="s1">isOnDemandRevalidate,</span><span class="s3">\n    </span><span class="s1">revalidateOnlyGenerated,</span><span class="s3">\n    </span><span class="s1">responseGenerator,</span><span class="s3">\n    </span><span class="s1">waitUntil,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">req: IncomingMessage | BaseNextRequest</span><span class="s3">\n    </span><span class="s1">nextConfig: NextConfigComplete</span><span class="s3">\n    </span><span class="s1">cacheKey: string | null</span><span class="s3">\n    </span><span class="s1">routeKind: RouteKind</span><span class="s3">\n    </span><span class="s1">isFallback?: boolean</span><span class="s3">\n    </span><span class="s1">prerenderManifest: DeepReadonly&lt;PrerenderManifest&gt;</span><span class="s3">\n    </span><span class="s1">isRoutePPREnabled?: boolean</span><span class="s3">\n    </span><span class="s1">isOnDemandRevalidate?: boolean</span><span class="s3">\n    </span><span class="s1">revalidateOnlyGenerated?: boolean</span><span class="s3">\n    </span><span class="s1">responseGenerator: ResponseGenerator</span><span class="s3">\n    </span><span class="s1">waitUntil?: (prom: Promise&lt;any&gt;) =&gt; void</span><span class="s3">\n  </span><span class="s1">}) {</span><span class="s3">\n    </span><span class="s1">const responseCache = this.getResponseCache(req)</span><span class="s3">\n    </span><span class="s1">const cacheEntry = await responseCache.get(cacheKey, responseGenerator, {</span><span class="s3">\n      </span><span class="s1">routeKind,</span><span class="s3">\n      </span><span class="s1">isFallback,</span><span class="s3">\n      </span><span class="s1">isRoutePPREnabled,</span><span class="s3">\n      </span><span class="s1">isOnDemandRevalidate,</span><span class="s3">\n      </span><span class="s1">isPrefetch: req.headers.purpose === 'prefetch',</span><span class="s3">\n      </span><span class="s1">incrementalCache: await this.getIncrementalCache(</span><span class="s3">\n        </span><span class="s1">req,</span><span class="s3">\n        </span><span class="s1">nextConfig,</span><span class="s3">\n        </span><span class="s1">prerenderManifest</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">waitUntil,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n\n    </span><span class="s1">if (!cacheEntry) {</span><span class="s3">\n      </span><span class="s1">if (</span><span class="s3">\n        </span><span class="s1">cacheKey &amp;&amp;</span><span class="s3">\n        </span><span class="s1">// revalidate only generated can bail even if cacheKey is provided</span><span class="s3">\n        </span><span class="s1">!(isOnDemandRevalidate &amp;&amp; revalidateOnlyGenerated)</span><span class="s3">\n      </span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">// A cache entry might not be generated if a response is written</span><span class="s3">\n        </span><span class="s1">// in `getInitialProps` or `getServerSideProps`, but those shouldn't</span><span class="s3">\n        </span><span class="s1">// have a cache key. If we do have a cache key but we don't end up</span><span class="s3">\n        </span><span class="s1">// with a cache entry, then either Next.js or the application has a</span><span class="s3">\n        </span><span class="s1">// bug that needs fixing.</span><span class="s3">\n        </span><span class="s1">throw new Error('invariant: cache entry required but not generated')</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return cacheEntry</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;RouteModule&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicImportEsmDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;mod&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;userland&quot;</span><span class="s0">,</span><span class="s1">&quot;definition&quot;</span><span class="s0">,</span><span class="s1">&quot;distDir&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeProjectDir&quot;</span><span class="s0">,</span><span class="s1">&quot;isDev&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;NODE_ENV&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentationOnRequestError&quot;</span><span class="s0">,</span><span class="s1">&quot;req&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_RUNTIME&quot;</span><span class="s0">,</span><span class="s1">&quot;getEdgeInstrumentationModule&quot;</span><span class="s0">,</span><span class="s1">&quot;instrumentation&quot;</span><span class="s0">,</span><span class="s1">&quot;onRequestError&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteProjectDir&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;getRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;loadManifests&quot;</span><span class="s0">,</span><span class="s1">&quot;srcPage&quot;</span><span class="s0">,</span><span class="s1">&quot;projectDir&quot;</span><span class="s0">,</span><span class="s1">&quot;self&quot;</span><span class="s0">,</span><span class="s1">&quot;getEdgePreviewProps&quot;</span><span class="s0">,</span><span class="s1">&quot;maybeJSONParse&quot;</span><span class="s0">,</span><span class="s1">&quot;str&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;buildId&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_BUILD_ID&quot;</span><span class="s0">,</span><span class="s1">&quot;buildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;fallbackBuildManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;reactLoadableManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__REACT_LOADABLE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;nextFontManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_FONT_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;prerenderManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;routes&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;notFoundRoutes&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;preview&quot;</span><span class="s0">,</span><span class="s1">&quot;routesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;caseSensitive&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_CASE_SENSITIVE_ROUTES&quot;</span><span class="s0">,</span><span class="s1">&quot;basePath&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_BASE_PATH&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_REWRITES&quot;</span><span class="s0">,</span><span class="s1">&quot;beforeFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;afterFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;fallback&quot;</span><span class="s0">,</span><span class="s1">&quot;redirects&quot;</span><span class="s0">,</span><span class="s1">&quot;headers&quot;</span><span class="s0">,</span><span class="s1">&quot;i18n&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_I18N_CONFIG&quot;</span><span class="s0">,</span><span class="s1">&quot;skipMiddlewareUrlNormalize&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_NO_MIDDLEWARE_URL_NORMALIZE&quot;</span><span class="s0">,</span><span class="s1">&quot;serverFilesManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;globalThis&quot;</span><span class="s0">,</span><span class="s1">&quot;nextConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;clientReferenceManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__RSC_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;serverActionsManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__RSC_SERVER_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;subresourceIntegrityManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__SUBRESOURCE_INTEGRITY_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicCssManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;__DYNAMIC_CSS_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;interceptionRoutePatterns&quot;</span><span class="s0">,</span><span class="s1">&quot;__INTERCEPTION_ROUTE_REWRITE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;rewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;loadManifestFromRelativePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedPagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePagePath&quot;</span><span class="s0">,</span><span class="s1">&quot;manifest&quot;</span><span class="s0">,</span><span class="s1">&quot;ROUTES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldCache&quot;</span><span class="s0">,</span><span class="s1">&quot;PRERENDER_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILD_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;handleMissing&quot;</span><span class="s0">,</span><span class="s1">&quot;TURBOPACK&quot;</span><span class="s0">,</span><span class="s1">&quot;isAppRouter&quot;</span><span class="s0">,</span><span class="s1">&quot;REACT_LOADABLE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;NEXT_FONT_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;isStaticMetadataRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;useEval&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIENT_REFERENCE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_REFERENCE_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;SUBRESOURCE_INTEGRITY_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;SERVER_FILES_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;BUILD_ID_FILE&quot;</span><span class="s0">,</span><span class="s1">&quot;skipParse&quot;</span><span class="s0">,</span><span class="s1">&quot;DYNAMIC_CSS_MANIFEST&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;isInterceptionRouteRewrite&quot;</span><span class="s0">,</span><span class="s1">&quot;loadCustomCacheHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;experimental&quot;</span><span class="s0">,</span><span class="s1">&quot;initializeCacheHandlers&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;handler&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;formatDynamicImportPath&quot;</span><span class="s0">,</span><span class="s1">&quot;setCacheHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;interopDefault&quot;</span><span class="s0">,</span><span class="s1">&quot;getIncrementalCache&quot;</span><span class="s0">,</span><span class="s1">&quot;__incrementalCache&quot;</span><span class="s0">,</span><span class="s1">&quot;CacheHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;IncrementalCache&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;nodeFs&quot;</span><span class="s0">,</span><span class="s1">&quot;dev&quot;</span><span class="s0">,</span><span class="s1">&quot;requestHeaders&quot;</span><span class="s0">,</span><span class="s1">&quot;allowedRevalidateHeaderKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;minimalMode&quot;</span><span class="s0">,</span><span class="s1">&quot;serverDistDir&quot;</span><span class="s0">,</span><span class="s1">&quot;fetchCacheKeyPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;maxMemoryCacheSize&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheMaxMemorySize&quot;</span><span class="s0">,</span><span class="s1">&quot;flushToDisk&quot;</span><span class="s0">,</span><span class="s1">&quot;isrFlushToDisk&quot;</span><span class="s0">,</span><span class="s1">&quot;getPrerenderManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;CurCacheHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;errorContext&quot;</span><span class="s0">,</span><span class="s1">&quot;routerServerContext&quot;</span><span class="s0">,</span><span class="s1">&quot;logErrorWithOriginalStack&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;url&quot;</span><span class="s0">,</span><span class="s1">&quot;method&quot;</span><span class="s0">,</span><span class="s1">&quot;prepare&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;multiZoneDraftMode&quot;</span><span class="s0">,</span><span class="s1">&quot;routerServerGlobal&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteDistDir&quot;</span><span class="s0">,</span><span class="s1">&quot;ensureInstrumentationRegistered&quot;</span><span class="s0">,</span><span class="s1">&quot;manifests&quot;</span><span class="s0">,</span><span class="s1">&quot;removePathPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;parseReqUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;isNextDataRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;pathHasPrefix&quot;</span><span class="s0">,</span><span class="s1">&quot;pathname&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeDataPath&quot;</span><span class="s0">,</span><span class="s1">&quot;originalPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;originalQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;query&quot;</span><span class="s0">,</span><span class="s1">&quot;pageIsDynamic&quot;</span><span class="s0">,</span><span class="s1">&quot;isDynamicRoute&quot;</span><span class="s0">,</span><span class="s1">&quot;localeResult&quot;</span><span class="s0">,</span><span class="s1">&quot;detectedLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeLocalePath&quot;</span><span class="s0">,</span><span class="s1">&quot;locales&quot;</span><span class="s0">,</span><span class="s1">&quot;search&quot;</span><span class="s0">,</span><span class="s1">&quot;serverUtils&quot;</span><span class="s0">,</span><span class="s1">&quot;getServerUtils&quot;</span><span class="s0">,</span><span class="s1">&quot;page&quot;</span><span class="s0">,</span><span class="s1">&quot;trailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;__NEXT_TRAILING_SLASH&quot;</span><span class="s0">,</span><span class="s1">&quot;domainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;detectDomainLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;domains&quot;</span><span class="s0">,</span><span class="s1">&quot;getHostname&quot;</span><span class="s0">,</span><span class="s1">&quot;addRequestMeta&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultLocale&quot;</span><span class="s0">,</span><span class="s1">&quot;locale&quot;</span><span class="s0">,</span><span class="s1">&quot;rewriteParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;handleRewrites&quot;</span><span class="s0">,</span><span class="s1">&quot;params&quot;</span><span class="s0">,</span><span class="s1">&quot;dynamicRouteMatcher&quot;</span><span class="s0">,</span><span class="s1">&quot;paramsMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;paramsResult&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeDynamicRouteParams&quot;</span><span class="s0">,</span><span class="s1">&quot;hasValidParams&quot;</span><span class="s0">,</span><span class="s1">&quot;routeParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;combinedParamKeys&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;defaultRouteMatches&quot;</span><span class="s0">,</span><span class="s1">&quot;originalValue&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;queryValue&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeCdnUrl&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeQueryParams&quot;</span><span class="s0">,</span><span class="s1">&quot;filterInternalQuery&quot;</span><span class="s0">,</span><span class="s1">&quot;queryResult&quot;</span><span class="s0">,</span><span class="s1">&quot;paramsToInterpolate&quot;</span><span class="s0">,</span><span class="s1">&quot;interpolateDynamicPath&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;isOnDemandRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;revalidateOnlyGenerated&quot;</span><span class="s0">,</span><span class="s1">&quot;checkIsOnDemandRevalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;isDraftMode&quot;</span><span class="s0">,</span><span class="s1">&quot;previewData&quot;</span><span class="s0">,</span><span class="s1">&quot;tryGetPreviewData&quot;</span><span class="s0">,</span><span class="s1">&quot;RouterServerContextSymbol&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizedSrcPage&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeAppPath&quot;</span><span class="s0">,</span><span class="s1">&quot;resolvedPathname&quot;</span><span class="s0">,</span><span class="s1">&quot;decodePathParams&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;removeTrailingSlash&quot;</span><span class="s0">,</span><span class="s1">&quot;getResponseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;responseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;ResponseCache&quot;</span><span class="s0">,</span><span class="s1">&quot;handleResponse&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheKey&quot;</span><span class="s0">,</span><span class="s1">&quot;routeKind&quot;</span><span class="s0">,</span><span class="s1">&quot;isFallback&quot;</span><span class="s0">,</span><span class="s1">&quot;isRoutePPREnabled&quot;</span><span class="s0">,</span><span class="s1">&quot;responseGenerator&quot;</span><span class="s0">,</span><span class="s1">&quot;waitUntil&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheEntry&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;isPrefetch&quot;</span><span class="s0">,</span><span class="s1">&quot;purpose&quot;</span><span class="s0">,</span><span class="s1">&quot;incrementalCache&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;+BAmGsBA;;;eAAAA;;;2BAzEf;qBACqB;qCAIrB;uBACwB;kCACE;6BACF;oCACI;6BACP;0BACc;mCAKR;+BACJ;6BACiB;mCACb;iCACI;kCACL;0BACwB;gCAC1B;sEAIuB;0BACrB;qCAK1B;kCAC0B;qCACG;oDACO;;;;;;AA4B3C,MAAMC,0BAA0B,CAACC,KAC/B,MAAM,CAAC,uBAAuB,GAAG,yBAAyB,GAAGA,IAAIC,IAAI,CACnE,CAACC,MAAQA,IAAIC,OAAO,IAAID;AAOrB,MAAeJ;IA4BpBM,YAAY,EACVC,QAAQ,EACRC,UAAU,EACVC,OAAO,EACPC,kBAAkB,EACO,CAAE;QAC3B,IAAI,CAACH,QAAQ,GAAGA;QAChB,IAAI,CAACC,UAAU,GAAGA;QAClB,IAAI,CAACG,KAAK,GAAGC,QAAQC,GAAG,CAACC,QAAQ,KAAK;QACtC,IAAI,CAACL,OAAO,GAAGA;QACf,IAAI,CAACC,kBAAkB,GAAGA;IAC5B;IAEA,MAAaK,8BACXC,GAAsC,EACtC,GAAGC,IAA+C,EAClD;QACA,IAAIL,QAAQC,GAAG,CAACK,YAAY,KAAK,QAAQ;YACvC,MAAM,EAAEC,4BAA4B,EAAE,GAAG,MAAM,MAAM,CAAC;YACtD,MAAMC,kBAAkB,MAAMD;YAE9B,IAAIC,iBAAiB;gBACnB,OAAMA,gBAAgBC,cAAc,oBAA9BD,gBAAgBC,cAAc,MAA9BD,oBAAoCH;YAC5C;QACF,OAAO;YACL,MAAM,EAAEK,IAAI,EAAE,GAAGC,QAAQ;YACzB,MAAMC,qBAAqBF,KACzBV,QAAQa,GAAG,IACXC,IAAAA,2BAAc,EAACV,KAAK,yBAAyB,IAAI,CAACN,kBAAkB;YAGtE,MAAM,EAAEK,6BAA6B,EAAE,GAAG,MAAM,MAAM,CACpD;YAGF,OAAOA,8BACLS,oBACA,IAAI,CAACf,OAAO,KACTQ;QAEP;IACF;IAEQU,cACNC,OAAe,EACfC,UAAmB,EAenB;QACA,IAAIjB,QAAQC,GAAG,CAACK,YAAY,KAAK,QAAQ;gBAwCZY;YAvC3B,MAAM,EAAEC,mBAAmB,EAAE,GAC3BR,QAAQ;YAEV,MAAMS,iBAAiB,CAACC,MACtBA,MAAMC,KAAKC,KAAK,CAACF,OAAOG;YAE1B,OAAO;gBACLC,SAASzB,QAAQC,GAAG,CAACyB,eAAe,IAAI;gBACxCC,eAAeT,KAAKU,gBAAgB;gBACpCC,uBAAuB,CAAC;gBACxBC,uBAAuBV,eAAeF,KAAKa,yBAAyB;gBACpEC,kBAAkBZ,eAAeF,KAAKe,oBAAoB;gBAC1DC,mBAAmB;oBACjBC,QAAQ,CAAC;oBACTC,eAAe,CAAC;oBAChBC,gBAAgB,EAAE;oBAClBC,SAAS;oBACTC,SAASpB;gBACX;gBACAqB,gBAAgB;oBACdF,SAAS;oBACTG,eAAeC,QAAQ1C,QAAQC,GAAG,CAAC0C,4BAA4B;oBAC/DC,UAAU5C,QAAQC,GAAG,CAAC4C,gBAAgB,IAAI;oBAC1CC,UAAU,AAAC9C,QAAQC,GAAG,CAAC8C,eAAe,IAAY;wBAChDC,aAAa,EAAE;wBACfC,YAAY,EAAE;wBACdC,UAAU,EAAE;oBACd;oBACAC,WAAW,EAAE;oBACbC,SAAS,EAAE;oBACXC,MACE,AAACrD,QAAQC,GAAG,CAACqD,kBAAkB,IAA0B9B;oBAC3D+B,4BAA4Bb,QAC1B1C,QAAQC,GAAG,CAACuD,kCAAkC;gBAElD;gBACAC,qBAAqB;oBACnBC,QAAQ,AAACC,WAAmBC,UAAU,IAAI,CAAC;gBAC7C;gBACAC,uBAAuB,GAAE3C,uBAAAA,KAAK4C,cAAc,qBAAnB5C,oBAAqB,CAACF,QAAQ;gBACvD+C,uBAAuB3C,eAAeF,KAAK8C,qBAAqB;gBAChEC,8BAA8B7C,eAC5BF,KAAKgD,gCAAgC;gBAEvCC,oBAAoB/C,eAAeF,KAAKkD,sBAAsB;gBAC9DC,2BAA2B,AACzBjD,CAAAA,eAAeF,KAAKoD,qCAAqC,KAAK,EAAE,AAAD,EAC/DC,GAAG,CAAC,CAACC,UAAiB,IAAIC,OAAOD,QAAQE,KAAK;YAClD;QACF,OAAO;gBA0HsB;YAzH3B,IAAI,CAACzD,YAAY;gBACf,MAAM,qBAA+D,CAA/D,IAAI0D,MAAM,uDAAV,qBAAA;2BAAA;gCAAA;kCAAA;gBAA8D;YACtE;YACA,MAAM,EAAEC,4BAA4B,EAAE,GACpCjE,QAAQ;YACV,MAAMkE,qBAAqBC,IAAAA,oCAAiB,EAAC9D;YAE7C,MAAM,CACJwB,gBACAN,mBACAP,eACAE,uBACAC,uBACAE,kBACA6B,yBACAE,uBACAE,8BACAR,qBACAhC,SACA0C,mBACD,GAAG;gBACFS,6BAAgD;oBAC9C3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUC,0BAAe;oBACzBC,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACA6E,6BAAgD;oBAC9C3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUG,6BAAkB;oBAC5BD,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACA6E,6BAA4C;oBAC1C3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUI,yBAAc;oBACxBF,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACAiB,YAAY,YACR4D,6BAA4C;oBAC1C3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAU,CAAC,SAAS,EAAEI,yBAAc,EAAE;oBACtCF,aAAa,CAAC,IAAI,CAAClF,KAAK;oBACxBqF,eAAe;gBACjB,KACC,CAAC;gBACNR,6BAAoD;oBAClD3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAU/E,QAAQC,GAAG,CAACoF,SAAS,GAC3B,CAAC,OAAO,EAAE,IAAI,CAACC,WAAW,GAAG,QAAQ,UAAUT,mBAAmB,CAAC,EAAEU,kCAAuB,EAAE,GAC9FA,kCAAuB;oBAC3BH,eAAe;oBACfH,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACA6E,6BAA+C;oBAC7C3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAU,CAAC,OAAO,EAAES,6BAAkB,CAAC,KAAK,CAAC;oBAC7CP,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACA,IAAI,CAACuF,WAAW,IAAI,CAACG,IAAAA,sCAAqB,EAACzE,WACvC4D,6BAA6B;oBAC3B/E,SAAS,IAAI,CAACA,OAAO;oBACrBoB;oBACAyE,SAAS;oBACTN,eAAe;oBACfL,UAAU,CAAC,UAAU,EAAE/D,QAAQ2E,OAAO,CAAC,QAAQ,OAAO,MAAMC,oCAAyB,CAAC,GAAG,CAAC;oBAC1FX,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B,KACAyB;gBACJ,IAAI,CAAC8D,WAAW,GACZV,6BAAkC;oBAChC/E,SAAS,IAAI,CAACA,OAAO;oBACrBoB;oBACA8D,UAAU,CAAC,OAAO,EAAEc,oCAAyB,CAAC,KAAK,CAAC;oBACpDT,eAAe;oBACfH,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B,KACA,CAAC;gBACL6E,6BAAqD;oBACnD3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAU,CAAC,OAAO,EAAEe,yCAA8B,CAAC,KAAK,CAAC;oBACzDV,eAAe;oBACfH,aAAa,CAAC,IAAI,CAAClF,KAAK;gBAC1B;gBACA,IAAI,CAACA,KAAK,GACL,CAAC,IACF6E,6BAA0D;oBACxD3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUgB,gCAAqB;gBACjC;gBACJ,IAAI,CAAChG,KAAK,GACN,gBACA6E,6BAAkC;oBAChC3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUiB,wBAAa;oBACvBC,WAAW;gBACb;gBACJrB,6BAAkC;oBAChC3D;oBACApB,SAAS,IAAI,CAACA,OAAO;oBACrBkF,UAAUmB,+BAAoB;oBAC9Bd,eAAe;gBACjB;aACD;YAED,OAAO;gBACL3D;gBACAE;gBACAE;gBACAW;gBACAR;gBACAE;gBACAuB;gBACA3B;gBACA+B,uBAAuB,EAAGA,4CAAD,0CAAA,AAACA,wBACtBC,cAAc,qBADO,uCACL,CAAC9C,QAAQ2E,OAAO,CAAC,QAAQ,KAAK;gBAClD5B;gBACAE;gBACAE;gBACAE,2BAA2B7B,eAAeM,QAAQ,CAACE,WAAW,CAC3DmD,MAAM,CAACC,8DAA0B,EACjC7B,GAAG,CAAC,CAACC,UAAY,IAAIC,OAAOD,QAAQE,KAAK;YAC9C;QACF;IACF;IAEA,MAAa2B,wBACXjG,GAAsC,EACtCwD,UAA8B,EAC9B;QACA,IAAI5D,QAAQC,GAAG,CAACK,YAAY,KAAK,QAAQ;YACvC,MAAM,EAAEgG,aAAa,EAAE,GAAG1C,WAAW2C,YAAY;YACjD,IAAI,CAACD,eAAe;YAEpB,yEAAyE;YACzE,SAAS;YACT,IAAI,CAACE,IAAAA,iCAAuB,KAAI;YAEhC,KAAK,MAAM,CAACC,MAAMC,QAAQ,IAAIC,OAAOC,OAAO,CAACN,eAAgB;gBAC3D,IAAI,CAACI,SAAS;gBAEd,MAAM,EAAEG,uBAAuB,EAAE,GAC/BlG,QAAQ;gBAEV,MAAM,EAAED,IAAI,EAAE,GAAGC,QAAQ;gBACzB,MAAMC,qBAAqBF,KACzBV,QAAQa,GAAG,IACXC,IAAAA,2BAAc,EAACV,KAAK,yBAAyB,IAAI,CAACN,kBAAkB;gBAGtEgH,IAAAA,yBAAe,EACbL,MACAM,IAAAA,8BAAc,EACZ,MAAM1H,wBACJwH,wBACE,GAAGjG,mBAAmB,CAAC,EAAE,IAAI,CAACf,OAAO,EAAE,EACvC6G;YAKV;QACF;IACF;IAEA,MAAaM,oBACX5G,GAAsC,EACtCwD,UAA8B,EAC9B1B,iBAAkD,EACvB;QAC3B,IAAIlC,QAAQC,GAAG,CAACK,YAAY,KAAK,QAAQ;YACvC,OAAO,AAACqD,WAAmBsD,kBAAkB;QAC/C,OAAO;YACL,IAAIC;YACJ,MAAM,EAAEC,YAAY,EAAE,GAAGvD;YAEzB,IAAIuD,cAAc;gBAChB,MAAM,EAAEN,uBAAuB,EAAE,GAC/BlG,QAAQ;gBAEVuG,eAAeH,IAAAA,8BAAc,EAC3B,MAAM1H,wBACJwH,wBAAwB,IAAI,CAAChH,OAAO,EAAEsH;YAG5C;YACA,MAAM,EAAEzG,IAAI,EAAE,GAAGC,QAAQ;YACzB,MAAMM,aAAaP,KACjBV,QAAQa,GAAG,IACXC,IAAAA,2BAAc,EAACV,KAAK,yBAAyB,IAAI,CAACN,kBAAkB;YAGtE,MAAM,IAAI,CAACuG,uBAAuB,CAACjG,KAAKwD;YAExC,wCAAwC;YACxC,kDAAkD;YAClD,oBAAoB;YACpB,OAAO,IAAIwD,kCAAgB,CAAC;gBAC1BC,IAAI,AACF1G,QAAQ,0BACR2G,MAAM;gBACRC,KAAK,IAAI,CAACxH,KAAK;gBACfyH,gBAAgBpH,IAAIgD,OAAO;gBAC3BqE,6BACE7D,WAAW2C,YAAY,CAACkB,2BAA2B;gBACrDC,aAAa5G,IAAAA,2BAAc,EAACV,KAAK;gBACjCuH,eAAe,GAAG1G,WAAW,CAAC,EAAE,IAAI,CAACpB,OAAO,CAAC,OAAO,CAAC;gBACrD+H,qBAAqBhE,WAAW2C,YAAY,CAACqB,mBAAmB;gBAChEC,oBAAoBjE,WAAWkE,kBAAkB;gBACjDC,aAAanE,WAAW2C,YAAY,CAACyB,cAAc;gBACnDC,sBAAsB,IAAM/F;gBAC5BgG,iBAAiBhB;YACnB;QACF;IACF;IAEA,MAAazG,eACXL,GAAsC,EACtC+H,GAAY,EACZC,YAAiC,EACjCC,mBAAiD,EACjD;QACA,IAAIA,uCAAAA,oBAAqBC,yBAAyB,EAAE;YAClDD,oBAAoBC,yBAAyB,CAACH,KAAK;QACrD,OAAO;YACLI,QAAQC,KAAK,CAACL;QAChB;QACA,MAAM,IAAI,CAAChI,6BAA6B,CACtCC,KACA+H,KACA;YACEM,MAAMrI,IAAIsI,GAAG,IAAI;YACjBtF,SAAShD,IAAIgD,OAAO;YACpBuF,QAAQvI,IAAIuI,MAAM,IAAI;QACxB,GACAP;IAEJ;IAEA,MAAaQ,QACXxI,GAAsC,EACtCyI,GAA0B,EAC1B,EACE7H,OAAO,EACP8H,kBAAkB,EAInB,EAqCD;YAsQEC;QArQF,IAAInI;QAEJ,yEAAyE;QACzE,IAAIZ,QAAQC,GAAG,CAACK,YAAY,KAAK,QAAQ;YACvC,MAAM,EAAEI,IAAI,EAAEsI,QAAQ,EAAE,GACtBrI,QAAQ;YAEVC,qBAAqBF,KACnBV,QAAQa,GAAG,IACXC,IAAAA,2BAAc,EAACV,KAAK,yBAAyB,IAAI,CAACN,kBAAkB;YAGtE,MAAMmJ,kBAAkBnI,IAAAA,2BAAc,EAACV,KAAK;YAE5C,IAAI6I,iBAAiB;gBACnB,IAAI,CAACpJ,OAAO,GAAGmJ,SAASpI,oBAAoBqI;YAC9C;YACA,MAAM,EAAEC,+BAA+B,EAAE,GAAG,MAAM,MAAM,CACtD;YAEF,gDAAgD;YAChD,uBAAuB;YACvBA,gCAAgCtI,oBAAoB,IAAI,CAACf,OAAO;QAClE;QACA,MAAMsJ,YAAY,MAAM,IAAI,CAACpI,aAAa,CAACC,SAASJ;QACpD,MAAM,EAAE4B,cAAc,EAAEN,iBAAiB,EAAEuB,mBAAmB,EAAE,GAAG0F;QAEnE,MAAM,EAAEvG,QAAQ,EAAES,IAAI,EAAEP,QAAQ,EAAE,GAAGN;QAErC,IAAII,UAAU;YACZxC,IAAIsI,GAAG,GAAGU,IAAAA,kCAAgB,EAAChJ,IAAIsI,GAAG,IAAI,KAAK9F;QAC7C;QAEA,MAAMyG,YAAYC,IAAAA,gBAAW,EAAClJ,IAAIsI,GAAG,IAAI;QACzC,iDAAiD;QACjD,IAAI,CAACW,WAAW;YACd;QACF;QACA,IAAIE,oBAAoB;QAExB,IAAIC,IAAAA,4BAAa,EAACH,UAAUI,QAAQ,IAAI,KAAK,gBAAgB;YAC3DF,oBAAoB;YACpBF,UAAUI,QAAQ,GAAGC,IAAAA,oCAAiB,EAACL,UAAUI,QAAQ,IAAI;QAC/D;QACA,IAAIE,mBAAmBN,UAAUI,QAAQ,IAAI;QAC7C,MAAMG,gBAAgB;YAAE,GAAGP,UAAUQ,KAAK;QAAC;QAC3C,MAAMC,gBAAgBC,IAAAA,qBAAc,EAAC/I;QAErC,IAAIgJ;QACJ,IAAIC;QAEJ,IAAI5G,MAAM;YACR2G,eAAeE,IAAAA,wCAAmB,EAChCb,UAAUI,QAAQ,IAAI,KACtBpG,KAAK8G,OAAO;YAGd,IAAIH,aAAaC,cAAc,EAAE;gBAC/B7J,IAAIsI,GAAG,GAAG,GAAGsB,aAAaP,QAAQ,GAAGJ,UAAUe,MAAM,EAAE;gBACvDT,mBAAmBK,aAAaP,QAAQ;gBAExC,IAAI,CAACQ,gBAAgB;oBACnBA,iBAAiBD,aAAaC,cAAc;gBAC9C;YACF;QACF;QAEA,MAAMI,cAAcC,IAAAA,2BAAc,EAAC;YACjCC,MAAMvJ;YACNqC;YACAT;YACAE;YACAgH;YACAU,eAAexK,QAAQC,GAAG,CAACwK,qBAAqB;YAChDhI,eAAeC,QAAQF,eAAeC,aAAa;QACrD;QAEA,MAAMiI,eAAeC,IAAAA,sCAAkB,EACrCtH,wBAAAA,KAAMuH,OAAO,EACbC,IAAAA,wBAAW,EAACxB,WAAWjJ,IAAIgD,OAAO,GAClC6G;QAEFa,IAAAA,2BAAc,EAAC1K,KAAK,kBAAkBsC,QAAQgI;QAE9C,MAAMK,gBAAgBL,CAAAA,gCAAAA,aAAcK,aAAa,MAAI1H,wBAAAA,KAAM0H,aAAa;QAExE,8DAA8D;QAC9D,0CAA0C;QAC1C,IAAIA,iBAAiB,CAACd,gBAAgB;YACpCZ,UAAUI,QAAQ,GAAG,CAAC,CAAC,EAAEsB,gBAAgB1B,UAAUI,QAAQ,KAAK,MAAM,KAAKJ,UAAUI,QAAQ,EAAE;QACjG;QACA,MAAMuB,SACJlK,IAAAA,2BAAc,EAACV,KAAK,aAAa6J,kBAAkBc;QAErD,MAAME,mBAAmBtE,OAAOuE,IAAI,CAClCb,YAAYc,cAAc,CAAC/K,KAAKiJ;QAGlC,qDAAqD;QACrD,0BAA0B;QAC1B,IAAIhG,MAAM;YACRgG,UAAUI,QAAQ,GAAGS,IAAAA,wCAAmB,EACtCb,UAAUI,QAAQ,IAAI,KACtBpG,KAAK8G,OAAO,EACZV,QAAQ;QACZ;QAEA,IAAI2B,SACFtK,IAAAA,2BAAc,EAACV,KAAK;QAEtB,gCAAgC;QAChC,IAAI,CAACgL,UAAUf,YAAYgB,mBAAmB,EAAE;YAC9C,MAAMC,cAAcjB,YAAYgB,mBAAmB,CACjD3B,IAAAA,oCAAiB,EAACM,CAAAA,gCAAAA,aAAcP,QAAQ,KAAIJ,UAAUI,QAAQ,IAAI;YAEpE,MAAM8B,eAAelB,YAAYmB,2BAA2B,CAC1DF,eAAe,CAAC,GAChB;YAGF,IAAIC,aAAaE,cAAc,EAAE;gBAC/BL,SAASG,aAAaH,MAAM;YAC9B;QACF;QAEA,6DAA6D;QAC7D,8DAA8D;QAC9D,uEAAuE;QAEvE,2DAA2D;QAC3D,gEAAgE;QAChE,oEAAoE;QACpE,kEAAkE;QAClE,oEAAoE;QACpE,MAAMvB,QAAQ/I,IAAAA,2BAAc,EAACV,KAAK,YAAY;YAC5C,GAAGiJ,UAAUQ,KAAK;QACpB;QAEA,MAAM6B,iBAAiB,IAAIC;QAC3B,MAAMC,oBAAoB,EAAE;QAE5B,6DAA6D;QAC7D,8DAA8D;QAC9D,gEAAgE;QAChE,wCAAwC;QACxC,IAAI,CAAC,IAAI,CAACtG,WAAW,EAAE;YACrB,KAAK,MAAMuG,OAAO;mBACbZ;mBACAtE,OAAOuE,IAAI,CAACb,YAAYyB,mBAAmB,IAAI,CAAC;aACpD,CAAE;gBACD,yDAAyD;gBACzD,8DAA8D;gBAC9D,+DAA+D;gBAC/D,+DAA+D;gBAC/D,8DAA8D;gBAC9D,sDAAsD;gBACtD,MAAMC,gBAAgBC,MAAMC,OAAO,CAACrC,aAAa,CAACiC,IAAI,IAClDjC,aAAa,CAACiC,IAAI,CAACnL,IAAI,CAAC,MACxBkJ,aAAa,CAACiC,IAAI;gBAEtB,MAAMK,aAAaF,MAAMC,OAAO,CAACpC,KAAK,CAACgC,IAAI,IACvChC,KAAK,CAACgC,IAAI,CAACnL,IAAI,CAAC,MAChBmJ,KAAK,CAACgC,IAAI;gBAEd,IAAI,CAAEA,CAAAA,OAAOjC,aAAY,KAAMmC,kBAAkBG,YAAY;oBAC3DN,kBAAkBO,IAAI,CAACN;gBACzB;YACF;QACF;QAEAxB,YAAY+B,eAAe,CAAChM,KAAKwL;QACjCvB,YAAYgC,oBAAoB,CAACxC,OAAO6B;QACxCrB,YAAYiC,mBAAmB,CAAC1C,eAAegC;QAE/C,IAAI9B,eAAe;YACjB,MAAMyC,cAAclC,YAAYmB,2BAA2B,CAAC3B,OAAO;YAEnE,MAAM0B,eAAelB,YAAYmB,2BAA2B,CAC1DJ,UAAU,CAAC,GACX;YAEF,MAAMoB,sBACJjB,aAAaE,cAAc,IAAIL,SAC3BA,SACAmB,YAAYd,cAAc,GACxB5B,QACA,CAAC;YAETzJ,IAAIsI,GAAG,GAAG2B,YAAYoC,sBAAsB,CAC1CrM,IAAIsI,GAAG,IAAI,KACX8D;YAEFnD,UAAUI,QAAQ,GAAGY,YAAYoC,sBAAsB,CACrDpD,UAAUI,QAAQ,IAAI,KACtB+C;YAEF7C,mBAAmBU,YAAYoC,sBAAsB,CACnD9C,kBACA6C;YAGF,kCAAkC;YAClC,IAAI,CAACpB,QAAQ;gBACX,IAAImB,YAAYd,cAAc,EAAE;oBAC9BL,SAASzE,OAAO+F,MAAM,CAAC,CAAC,GAAGH,YAAYnB,MAAM;oBAE7C,4CAA4C;oBAC5C,iBAAiB;oBACjB,IAAK,MAAMS,OAAOxB,YAAYyB,mBAAmB,CAAE;wBACjD,OAAOjC,KAAK,CAACgC,IAAI;oBACnB;gBACF,OAAO;oBACL,qCAAqC;oBACrC,MAAMP,cAAcjB,YAAYgB,mBAAmB,oBAA/BhB,YAAYgB,mBAAmB,MAA/BhB,aAClBX,IAAAA,oCAAiB,EACfM,CAAAA,gCAAAA,aAAcP,QAAQ,KAAIJ,UAAUI,QAAQ,IAAI;oBAGpD,qDAAqD;oBACrD,kDAAkD;oBAClD,2BAA2B;oBAC3B,IAAI6B,aAAa;wBACfF,SAASzE,OAAO+F,MAAM,CAAC,CAAC,GAAGpB;oBAC7B;gBACF;YACF;QACF;QAEA,sDAAsD;QACtD,iDAAiD;QACjD,oDAAoD;QACpD,KAAK,MAAMO,OAAOH,eAAgB;YAChC,IAAI,CAAEG,CAAAA,OAAOjC,aAAY,GAAI;gBAC3B,OAAOC,KAAK,CAACgC,IAAI;YACnB;QACF;QAEA,MAAM,EAAEc,oBAAoB,EAAEC,uBAAuB,EAAE,GACrDC,IAAAA,mCAAyB,EAACzM,KAAK8B,kBAAkBK,OAAO;QAE1D,IAAIuK,cAAc;QAClB,IAAIC;QAEJ,wCAAwC;QACxC,IAAI/M,QAAQC,GAAG,CAACK,YAAY,KAAK,UAAUuI,KAAK;YAC9C,MAAM,EAAEmE,iBAAiB,EAAE,GACzBrM,QAAQ;YAEVoM,cAAcC,kBACZ5M,KACAyI,KACA3G,kBAAkBK,OAAO,EACzBG,QAAQoG;YAEVgE,cAAcC,gBAAgB;QAChC;QAEA,MAAMjN,qBACJgB,IAAAA,2BAAc,EAACV,KAAK,yBAAyB,IAAI,CAACN,kBAAkB;QAEtE,MAAMuI,uBACJU,gDAAAA,uCAAkB,CAACkE,8CAAyB,CAAC,qBAA7ClE,6CAA+C,CAACjJ,mBAAmB;QACrE,MAAM8D,aACJyE,CAAAA,uCAAAA,oBAAqBzE,UAAU,KAAIH,oBAAoBC,MAAM;QAE/D,MAAMwJ,oBAAoBC,IAAAA,0BAAgB,EAACnM;QAC3C,IAAIoM,mBACFtM,IAAAA,2BAAc,EAACV,KAAK,iBAAiB8M;QAEvC,IAAInD,IAAAA,qBAAc,EAACqD,qBAAqBhC,QAAQ;YAC9CgC,mBAAmB/C,YAAYoC,sBAAsB,CACnDW,kBACAhC;QAEJ;QAEA,IAAIgC,qBAAqB,UAAU;YACjCA,mBAAmB;QACrB;QACA,IAAI;YACFA,mBAAmBC,IAAAA,kCAAgB,EAACD;QACtC,EAAE,OAAOE,GAAG,CAAC;QAEbF,mBAAmBG,IAAAA,wCAAmB,EAACH;QAEvC,OAAO;YACLvD;YACAD;YACAD;YACAyB;YACA/B;YACA2B;YACAzB;YACAY,OAAO,EAAE9G,wBAAAA,KAAM8G,OAAO;YACtBY;YACA+B;YACAC;YACAjD;YACAsD;YACAT;YACAC;YACA,GAAGzD,SAAS;YACZpF,uBAAuBoF,UAAUpF,qBAAqB;YACtDF,yBAAyBsF,UAAUtF,uBAAuB;YAC1DD;YACAyE;QACF;IACF;IAEOmF,iBAAiBpN,GAAsC,EAAE;QAC9D,IAAI,CAAC,IAAI,CAACqN,aAAa,EAAE;YACvB,MAAM/F,cAAc5G,IAAAA,2BAAc,EAACV,KAAK,kBAAkB;YAC1D,IAAI,CAACqN,aAAa,GAAG,IAAIC,sBAAa,CAAChG;QACzC;QACA,OAAO,IAAI,CAAC+F,aAAa;IAC3B;IAEA,MAAaE,eAAe,EAC1BvN,GAAG,EACHwD,UAAU,EACVgK,QAAQ,EACRC,SAAS,EACTC,UAAU,EACV5L,iBAAiB,EACjB6L,iBAAiB,EACjBpB,oBAAoB,EACpBC,uBAAuB,EACvBoB,iBAAiB,EACjBC,SAAS,EAaV,EAAE;QACD,MAAMR,gBAAgB,IAAI,CAACD,gBAAgB,CAACpN;QAC5C,MAAM8N,aAAa,MAAMT,cAAcU,GAAG,CAACP,UAAUI,mBAAmB;YACtEH;YACAC;YACAC;YACApB;YACAyB,YAAYhO,IAAIgD,OAAO,CAACiL,OAAO,KAAK;YACpCC,kBAAkB,MAAM,IAAI,CAACtH,mBAAmB,CAC9C5G,KACAwD,YACA1B;YAEF+L;QACF;QAEA,IAAI,CAACC,YAAY;YACf,IACEN,YACA,kEAAkE;YAClE,CAAEjB,CAAAA,wBAAwBC,uBAAsB,GAChD;gBACA,gEAAgE;gBAChE,oEAAoE;gBACpE,kEAAkE;gBAClE,mEAAmE;gBACnE,yBAAyB;gBACzB,MAAM,qBAA8D,CAA9D,IAAIjI,MAAM,sDAAV,qBAAA;2BAAA;gCAAA;kCAAA;gBAA6D;YACrE;QACF;QACA,OAAOuJ;IACT;AACF&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreList&quot;</span><span class="s0">:[</span><span class="s2">0</span><span class="s0">]}</span></pre>
</body>
</html>